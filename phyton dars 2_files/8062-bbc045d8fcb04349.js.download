!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="c6eaf529-bc06-4817-811a-df310bbde7cd",e._sentryDebugIdIdentifier="sentry-dbid-c6eaf529-bc06-4817-811a-df310bbde7cd")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"35ecf50c"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8062],{155:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(12694),i=t(21462);function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,r._)((0,i.useState)(e),2),t=n[0],o=n[1];return[t,(0,i.useCallback)(function(){return o(function(e){return!e})},[])]}},307:(e,n,t)=>{"use strict";t.d(n,{f:()=>r});var r=new Map([["envEditor",["Environment variables"]],["ghostwriterChat",["Chat",{alias:"Ghostwriter",prefix:"previously"}]],["shell",["Terminal"]],["objectStorage",["Blobject Storage","Blob Cloud"]],["dependencies",["Packages","System dependencies","Nix","Modules"]],["integrations",["Cloud Services","OpenAI","Slack"]],["agentProgress",["Agent Progress","AI Agent"]]])},554:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{d:"M5.25 4.125C5.25 3.504 5.754 3 6.375 3h5.25c.621 0 1.125.504 1.125 1.125V9H6.375A1.125 1.125 0 0 1 5.25 7.875v-3.75ZM12.75 9h6.375c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125H12.75V9ZM5.25 16.125c0-.621.504-1.125 1.125-1.125h6.375v4.875c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-3.75Z"})}))}},662:(e,n,t)=>{"use strict";t.d(n,{k:()=>l});var r=t(1889),i=t(40043),o=t(35869),a=t(25584);function l(e){return(0,r.FD)(o.S,{gap:4,children:[(0,r.Y)(i.EY,{color:"dimmer",variant:"small",children:"Potential features"}),(0,r.Y)(a.Ay,{children:e.features}),(0,r.Y)(i.EY,{color:"dimmest",variant:"small",children:"The agent works best step by step. These are potential features the agent can build next."})]})}},961:(e,n,t)=>{"use strict";t.d(n,{i:()=>i});var r=t(30316);function i(){var e,n=(0,r.eJ)(),t=n.data,i=n.loading,o=n.error,a=(null==t?void 0:null===(e=t.currentUser)||void 0===e?void 0:e.aiFreeUsageLimits.__typename)==="UserAiFreeUsageLimitResult"?t.currentUser.aiFreeUsageLimits.agentCheckpoints:null;return a?{loading:i,error:o,agentCheckpoints:a}:{loading:i,error:o,agentCheckpoints:null}}},1019:(e,n,t)=>{"use strict";t.d(n,{P:()=>CL});var r,i,o,a,l,s,c,u,d,p,f=t(1889),h=t(75152),m=t(24998),g=t(83846),v=t(12694),w=t(21462),y=t(29935),b=t(82643),S=t(26496),Y=t(18879),A=t(67337),C=t(72004),x=t(74340),k=t(68209),_=t(67549),D=t(36245),E=t(95949),R=t(12966),I=t(40043),F=t(35869);function T(){var e=(0,S.C9)().agentState,n=(0,k.J2)(e);return(0,f.Y)(_.A,{headerContent:(0,f.Y)(I.EY,{children:"Agent state"}),children:(0,f.Y)(x.A,{code:JSON.stringify(n,null,2),language:"json"})})}function P(e){var n=(0,k.J2)(e.session.data);return(0,f.Y)(_.A,{headerContent:(0,f.Y)(I.EY,{children:"Session data"}),children:(0,f.Y)(x.A,{code:JSON.stringify(n,null,2),language:"json"})})}function L(e){var n=(0,k.J2)(e.session.data);return(0,f.Y)(E.nh,{id:e.session.id,label:(null==n?void 0:n.title)||"untitled"})}function U(e){var n=(0,k.J2)(e.event);return n?(0,f.Y)(F.S,{children:(0,f.Y)(_.A,{headerContent:(0,f.FD)(F.S,{row:!0,gap:8,children:[(0,f.Y)(I.EY,{children:n.id}),(0,f.Y)(D.r,{textToCopy:n.id,tooltipSuccessText:"Copied to clipboard"})]}),children:(0,f.Y)(x.A,{code:JSON.stringify(n,null,2),language:"json"})})}):(0,f.Y)(F.S,{children:"No data found for event"})}var N=t(21238),O=t(33977),M=t(61234),B=t(43974),H=t(60738),z={"File context":function(){var e=(0,S.nt)(),n=(0,O.Sx)(),t=(0,(0,S.dm)().getAssistantMessageModel)({isAuthorized:!0}),r=(0,A.A)(),i=r.fs,o=r.dotReplit,a=(0,N.P)(i,o),l=(0,v._)((0,w.useState)(null),2),s=l[0],c=l[1];return(0,w.useEffect)(function(){var r=!1;function i(){return(i=(0,y._)(function(){var i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,a({modelType:t,filePreferences:e,recentFiles:n()})];case 1:if(i=o.sent(),r)return[2];return c(i),[2]}})})).apply(this,arguments)}return function(){i.apply(this,arguments)}(),function(){r=!0}},[n,e,t,a]),(0,f.Y)(Y.A,{json:s})},"Session Events":function(){var e,n,t=(0,S.NC)(),r=(0,k.Rj)(function(){return t.sessions.query({types:[C.dF3.CHAT,C.dF3.REPL_CREATION_V3,C.dF3.AGENT_SESSION]}).map(function(e){return Array.from(e.values())})},[t],{default:[]}),i=(0,v._)((0,w.useState)(null!==(n=null===(e=r[0])||void 0===e?void 0:e.id)&&void 0!==n?n:null),2),o=i[0],a=i[1],l=(0,k.Rj)(function(){return o?t.sessions.get(o):null},[o,t]),s=(0,k.Rj)(function(){return null==l?void 0:l.transform({direction:"reverse",state:{},transformer:function(e){return e}},1e3)},[l]);return(0,f.FD)(f.FK,{children:[(0,f.Y)(T,{}),(0,f.FD)(F.S,{gap:16,children:[(0,f.Y)(R.l,{label:"Select a session",selectedKey:o,onSelectionChange:function(e){"string"==typeof e&&a(e)},children:r.map(function(e){return(0,f.Y)(L,{session:e},e.id)})}),l?(0,f.Y)(P,{session:l}):null,(0,f.Y)(F.S,{children:null==s?void 0:s.map(function(e){var n=(0,v._)(e,2),t=n[0],r=n[1];return(0,f.Y)(U,{event:r},t)})})]})]})}},W=(0,M.x)({wrapper:[B.wp.flex.growAndShrink(1),(r={},(0,g._)(r,"& > div",[B.wp.flex.growAndShrink(1),B.wp.overflowY("auto"),B.wp.colWithGap(4)]),(0,g._)(r,"& > div > div:first-of-type",[B.wp.flex.shrink(1),B.wp.overflowY("auto")]),(0,g._)(r,"& > div > div:last-of-type",[B.wp.flex.growAndShrink(1),B.wp.overflowY("auto")]),r)]}),G=t(68456),V=t(7146),j=(0,M.x)({container:[B.wp.py(8),B.wp.px(12),B.wp.colWithGap(12)]}),Z=t(91752),q=t(86105),K=t(17844),$=t(12584),J=t(41114),Q=t(86997);function X(){var e=(0,$._)(["\n  query AdminPanelGitView {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n        installations {\n          id\n          type\n          avatarUrl\n          name\n        }\n        userInfo {\n          name\n          email\n          avatarUrl\n        }\n      }\n    }\n  }\n"]);return X=function(){return e},e}var ee={},en=(0,J.J1)(X()),et=t(30391),er=t(32194),ei=t(98988),eo=t(2527);function ea(e){var n=e.event,t=n.input,r=n.output,i=n.error,o=n.start,a=n.end,l=n.cached,s=(0,v._)((0,w.useState)(!0),2),c=s[0],u=s[1],d=(0,w.useCallback)(function(){return u(function(e){return!e})},[]),p="bash"===t[0]&&"-c"===t[1]?t.slice(2).join(" "):t.join(" "),h=r.trimEnd();return(0,f.FD)(F.S,{css:[(0,ei.Li)(i?"negative":"positive"),l?{opacity:.75}:void 0,B.wp.borderRadius(8)],children:[(0,f.FD)(F.S,{onClick:d,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&d()},tabIndex:0,css:[B.wp.py(4),B.wp.px(8),B.wp.font.code,B.wp.cursor.pointer],row:!0,gap:4,justify:"space-between",children:[(0,f.FD)("span",{css:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:["$ ",p]}),(0,f.FD)("span",{css:[B.wp.color.foregroundDimmer,B.wp.flex.shrink(0)],children:[i?(0,f.Y)("span",{css:[B.wp.mr(16)],children:i}):null,l?(0,f.Y)("span",{children:"CACHED"}):(0,f.FD)("span",{children:[a-o," ms"]})]})]}),c?null:(0,f.Y)(F.S,{css:[B.wp.px(2),B.wp.pb(2),B.wp.borderRadius(0,0,8,8)],children:(0,f.Y)(eo.ui,{elevated:!0,css:[B.wp.p(8),B.wp.borderRadius(8)],children:(0,f.Y)(x.A,{code:h})})})]})}var el=t(77253),es=t(155),ec=t(41594),eu=t(28154),ed=t(88654);function ep(e){var n=e.t,t=e.children;return(0,f.FD)("span",{css:{display:"flex",alignItems:"flex-start",columnGap:"0.5rem"},children:[(0,f.FD)(I.EY,{css:{minWidth:"8em"},multiline:!1,children:[n,":"," "]}),(0,f.Y)("span",{children:t})]})}var ef=t(4880),eh=t(55675),em=t(10825),eg=t(93682),ev=t(26705),ew=t(31618),ey=t(71991),eb=t(67811),eS=(0,M.x)({container:[B.wp.height("100%"),B.wp.position.relative],controls:[B.wp.px(4),B.wp.pb(8),B.wp.backgroundColor.backgroundDefault]}),eY=(0,M.x)({in:[B.wp.color.greenStrongest],out:[B.wp.color.redStrongest],error:[B.wp.color.magentaStrongest]}),eA=[B.wp.flex.row,B.wp.rowWithGap(4),{"&:hover":{cursor:"pointer",".link":{textDecoration:"underline"}}}],eC=(0,M.x)({clickable:(0,q._)(eA),clickableHighlighted:(0,q._)(eA).concat([B.wp.backgroundColor.accentPositiveDimmer]),inner:[B.wp.flex.grow(1),B.wp.rowWithGap(4),B.wp.maxWidth("100%")],log:[B.wp.flex.growAndShrink(1),{opacity:.5}],row:[B.wp.my(4),B.wp.mx(4)],timestamp:[B.wp.fontSize(13),{cursor:"pointer"}]});function ex(e){var n,t=e.log,r=e.filters,i=e.timeRef,o=e.setTimeRef,a=(0,w.useMemo)(function(){return r.highlightOnly&&(0,eh.jQ)(t,r)},[r,t]),l=null!==(n=t.cmd.channel)&&void 0!==n?n:0,s=(0,w.useMemo)(function(){var e=(0,K._)({},t.cmd);return delete e.channel,{cleaned:e,formatted:JSON.stringify(e,null,2)}},[t]),c=i?t.timestamp-i:t.timestamp,u=(0,v._)((0,es.A)(!0),2),d=u[0],p=u[1];return(0,f.FD)(F.S,{css:eC.row,children:[(0,f.Y)(F.S,{role:"button",onClick:p,onKeyDown:p,tabIndex:0,css:a?eC.clickableHighlighted:eC.clickable,children:(0,f.FD)(F.S,{css:eC.inner,children:[(0,f.Y)(I.EY,{className:"icon",multiline:!1,children:"in"===t.dir?(0,f.Y)(F.S,{css:eY.in,children:"→"}):"out"===t.dir?(0,f.Y)(F.S,{css:eY.out,children:"←"}):(0,f.Y)(F.S,{css:eY.error,children:"⚠"})}),(0,f.Y)(I.EY,{className:"link",multiline:!1,children:(0,f.FD)("code",{children:["#",l," - ",t.channel.service,t.channel.name?"::".concat(t.channel.name):""]})}),(0,f.Y)(I.EY,{css:eC.log,multiline:!1,children:(0,f.Y)("code",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:s.formatted})}),null!=c&&(0,f.Y)(F.S,{style:{opacity:.5},onClick:function(){o(t.timestamp)},children:(0,f.Y)(I.EY,{css:eC.timestamp,multiline:!1,children:t.timestamp===i?"(reference)":(0,f.FD)(f.FK,{children:[c.toFixed(0)," ms"]})})})]})}),!d&&(0,f.Y)(f.FK,{children:void 0!==s.cleaned&&(0,f.Y)(em.U,{name:"cmd",src:s.cleaned})})]})}var ek=(0,M.x)({listContainer:[B.wp.position.relative,B.wp.height("100%")],listScroller:[B.wp.overflow("auto"),B.wp.coverContainer],listBox:[B.wp.width("100%"),B.wp.position.relative],listItem:[B.wp.position.absolute,B.wp.top(0),B.wp.left(0),B.wp.width("100%")]}),e_=(0,w.memo)(function(e){var n=e.logs,t=e.filters,r=e.timeRef,i=e.setTimeRef,o=(0,w.useRef)(null),a=(0,ef.Te)({count:n.length,getScrollElement:function(){return o.current},getItemKey:function(e){return n[e].id},estimateSize:function(){return 30},overscan:10});return(0,f.Y)("div",{css:ek.listContainer,children:(0,f.FD)("div",{ref:o,css:ek.listScroller,children:[(0,f.Y)("div",{css:ek.listBox,style:{height:"".concat(a.getTotalSize(),"px")},children:a.getVirtualItems().map(function(e){var o=e.index,l=e.key,s=e.start,c=n[o];return c?(0,f.Y)("div",{"data-index":o,ref:a.measureElement,css:ek.listItem,style:{transform:"translateY(".concat(s,"px)")},children:(0,f.Y)(ex,{log:c,filters:t,timeRef:r,setTimeRef:i})},l.toString()):null})}),(0,f.Y)("div",{className:"bottom-anchor"})]})})}),eD=function(e){var n=e.filters,t=e.updateFilters;return(0,f.FD)(F.S,{gap:4,children:[(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:"Regex (regex,flags):"}),(0,f.Y)(ew.pd,{id:"regex",onChange:function(e){var n=null;if(e.currentTarget.value){var r=(0,v._)(e.currentTarget.value.split(","),2),i=r[0],o=r[1];try{n=new RegExp(i,o)}catch(e){}}t({regexp:n})},placeholder:"\\w+,gi"}),(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:"Channel (comma separated ids, clear to reset)"}),(0,f.Y)(ew.pd,{id:"channels",onChange:function(e){t({channels:e.currentTarget.value.split(",").map(function(e){return e.trim()}).map(Number).filter(function(e){return!isNaN(e)})})},placeholder:"1,2,3"}),(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:"Directions:"}),(0,f.Y)(ey.z,{css:B.wp.rowWithGap(16),name:"direction",value:n.direction,onChange:function(e){var n=e.target.value;t({direction:"in"===n||"out"===n||""===n?n:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map(function(e){return(0,f.FD)(F.S,{row:!0,gap:8,children:[(0,f.Y)(ey.s,{id:e.val,value:e.val}),(0,f.Y)("label",{htmlFor:e.val,children:e.text})]},e.val)})}),(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:"Filter style:"}),(0,f.Y)(ey.z,{css:B.wp.rowWithGap(16),name:"filter-style",value:n.highlightOnly?"highlight":"filter",onChange:function(e){return t({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map(function(e){return(0,f.FD)(F.S,{row:!0,gap:8,children:[(0,f.Y)(ey.s,{id:e.val,value:e.val}),(0,f.Y)("label",{htmlFor:e.val,children:e.text})]},e.val)})})]})},eE=t(2904),eR=t(94631),eI=t(88390),eF=t(81879),eT=(0,M.x)({root:{height:"100%",overflow:"auto",padding:10,pre:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},command:[B.wp.flex.shrink(1)]}),eP=t(20221),eL=t(53669),eU=t(57465),eN=t(44370),eO=t(69338),eM=(0,eN.eU)(null),eB=(0,eN.eU)(null),eH=function(){var e=(0,eO.Xr)(eM),n=(0,eO.Xr)(eB);return(0,w.useCallback)(function(t){if(!t){e(null),n(null);return}e({id:-1,connectionString:t,databaseId:-1,databaseName:"Admin Override",isFrozen:!1,isEphemeral:!1,projectId:"mock-project-id-does-not-exist",__typename:"NeonDatabase",maxComputeUnits:1,minComputeUnits:1,historyRetentionSeconds:86400,timeCreated:new Date().toString()}),n(t)},[n,e])},ez=t(6680),eW=t(25644),eG=t(95570),eV=t(83165),ej=t.n(eV),eZ=t(82871),eq=t(44441),eK=t(11597),e$=t(2960),eJ=t(58270),eQ="(click to upload dev build)",eX=(0,eN.eU)(["IDLE","pid2 running latest prod ".concat(eQ)]);function e0(e,n){return e1.apply(this,arguments)}function e1(){return(e1=(0,y._)(function(e,n){var t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,e.exec("printenv","REPL_HOME")];case 1:if((t=o.sent()).error||!t.output)return n("IDLE","could not printenv REPL_HOME"),[2,null];return r=t.output.trim(),i=ej().join(r,".local/bin/pid2"),[2,{REPL_HOME:r,pid2BinDst:"/home/runner/bin/pid2",pid2BinDst2:i}]}})})).apply(this,arguments)}function e2(){return(e2=(0,y._)(function(e,n,t){var r,i,o,a,l,s,c,u,d,p,f,h,m,g;return(0,b.YH)(this,function(v){switch(v.label){case 0:return[4,(0,eJ.EW)()];case 1:if("dev"===(o=v.sent()))return t("IDLE","dev is not a version we can upload to the container"),[2];return[4,function(e,n,t,r){return e4.apply(this,arguments)}(o,e,n,t)];case 2:return v.sent(),[4,e0(e,t)];case 3:if(!(a=v.sent()))return[2];return l=ej().join(a.REPL_HOME,".cache/replit/pid2/".concat(o)),s=ej().join(l,"pid2"),[4,e.exec("stat","-c","%N",a.pid2BinDst)];case 4:return c=v.sent(),[4,e.exec("stat","-c","%N",a.pid2BinDst2)];case 5:if(u=v.sent(),!c.error&&(null===(r=c.output)||void 0===r?void 0:r.includes(s))&&!u.error&&(null===(i=u.output)||void 0===i?void 0:i.includes(s)))return t("IDLE","pid2 version ".concat(o," already exists in container ").concat(eQ)),[2];return d=ej().dirname(a.pid2BinDst),[4,e.exec("mkdir","-p",d)];case 6:if((p=v.sent()).error)throw Error("pid2: mkdir ".concat(d,": ").concat(p.error));return[4,e.exec("ln","-sf",s,a.pid2BinDst)];case 7:if((f=v.sent()).error)throw Error("pid2: link ".concat(a.pid2BinDst,": ").concat(f.error));return h=ej().dirname(a.pid2BinDst2),[4,e.exec("mkdir","-p",h)];case 8:if(v.sent().error)throw Error("pid2: mkdir ".concat(h,": ").concat(p.error));return[4,e.exec("ln","-sf",s,a.pid2BinDst2)];case 9:if(m=v.sent(),f.error)throw Error("pid2: link ".concat(a.pid2BinDst2,": ").concat(m.error));return t("RESTARTING","pid2 version ".concat(o," installed, restarting pid2")),[4,e.exec("bash","-c","kill -9 $(pidof pid2)")];case 10:return(g=v.sent()).error&&t("ERROR","pid2: couldn't kill ".concat(g.error)),t("IDLE","pid2 version ".concat(o," installed ").concat(eQ)),[2]}})})).apply(this,arguments)}function e4(){return(e4=(0,y._)(function(e,n,t,r){var i,o,a,l,s,c,u,d,p,f;return(0,b.YH)(this,function(h){switch(h.label){case 0:return i=ej().join(eq.Dl,".cache/replit/pid2/".concat(e)),o=ej().join(i,"success"),[4,t.stat(o)];case 1:if((a=h.sent()).exists&&a.type===eK.pt.File)return[2];return r("UPLOADING","pid2: uploading version ".concat(e," to container...")),[4,fetch("/pid2/bundle")];case 2:if(!(l=h.sent()).ok)throw Error("Error fetching PID2 bundle: ".concat(l.statusText));if(!l.body)throw Error("Error fetching PID2 bundle: ".concat(l));return[4,l.arrayBuffer()];case 3:return s=h.sent(),c=".cache/replit/pid2/pid2-".concat(e,".tar.gz"),[4,t.writeFile(c,eZ.A.from(s))];case 4:if((u=h.sent()).error)throw Error("pid2: writing tarball: ".concat(u.error));return[4,n.exec("mkdir","-p",i)];case 5:if((d=h.sent()).error)throw Error("pid2: mkdir: ".concat(d.error));return[4,n.exec("tar","-C",i,"-xf",c)];case 6:if((p=h.sent()).error)throw Error("pid2: untar: ".concat(p.error));return[4,t.writeFile(ej().join(i,"pid2.version"),e)];case 7:if((f=h.sent()).error)throw Error("pid2: writeVersion: ".concat(f.error));return[4,n.exec("touch",o)];case 8:return h.sent(),[4,n.exec("rm","-f",c)];case 9:return h.sent(),r("UPLOADED","pid2: ".concat(e," upload success")),[2]}})})).apply(this,arguments)}var e5=t(96497),e8=t(95570),e3=(0,M.x)({view:[B.wp.pt(16),B.wp.px(12),B.wp.colWithGap(12)],uploadMessage:[B.wp.flex.growAndShrink(1),B.wp.width("100%"),B.wp.font.code]}),e6=t(46434),e7=t(93629),e9=t(22531),ne=t(49069),nn=t(45773),nt=t(23244),nr=t(85431),ni=t(44987),no=t(64774),na=t(50066),nl=t(99672),ns=t(85788),nc=t(60990);function nu(e){var n=(0,v._)((0,w.useState)(null),2),t=n[0],r=n[1],i=(0,k.J2)(e.logs),o=null!==t?i[i.length-t-1]:null,a=(0,na.A)(),l=a.ref,s=a.view;(0,w.useEffect)(function(){s&&s.dispatch({changes:{from:0,to:s.state.doc.length,insert:o?o.data:""}})},[o,s]);var c=(0,w.useRef)(t);return(0,w.useEffect)(function(){c.current=t},[t]),(0,w.useEffect)(function(){return e.logs.subscribe(function(e){var n=c.current;(null===n||e.length-2===n)&&r(e.length-1)})},[e.logs]),(0,f.FD)(F.S,{css:ny.response,row:!0,gap:0,children:[(0,f.FD)(F.S,{css:ny.responseL,children:[(0,f.Y)(F.S,{css:ny.logHeader,align:"start",justify:"center",children:o?null==o?void 0:o.name:null}),(0,f.Y)(F.S,{css:ny.logData,children:(0,f.Y)(ni.Ay,{ref:l,language:"json",readOnly:!0})})]}),(0,f.FD)(F.S,{css:ny.responseR,children:[(0,f.Y)(F.S,{css:ny.logsHeader,children:(0,f.Y)(eg.$n,{size:"small",text:"Clear",disabled:!i.length,onClick:e.onClear})}),(0,f.Y)(F.S,{css:ny.logsList,children:i.map(function(e,n){var o=i.length-n-1;return(0,f.Y)("code",{role:"button",tabIndex:0,className:t===o?"selected":void 0,onClick:function(){r(o)},onKeyDown:function(e){"Enter"===e.key&&r(o)},children:e.name},o)})})]})]})}var nd=ne.Pe.define(),np=ne.Pe.define(),nf=ne.Pe.define(),nh=nn.Lz.theme({"&":{border:"1px solid ".concat(ez.LU.outlineDefault),height:"225px"},"& .cm-panels":{backgroundColor:"unset"},"& .cm-panels.cm-panels-bottom":{borderTop:"1px solid ".concat(ez.LU.outlineDefault)}}),nm=new nl.k(function(e,n){return[nh,ne.sU.define({create:function(){return null},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.is(nd)&&(e=l.value),l.is(nf)&&(e=null)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(t){return[nn.Z9.define(function(){var t,r,i=new AbortController;return{update:(t=(0,y._)(function(t){var o,a,l,s,c,u,d,p,f,h,m,g,v,w,y,S,Y,A,C,x,k,_,D,E,R,I,F,T,P,L,U,N,O,M;return(0,b.YH)(this,function(b){switch(b.label){case 0:if(!e)return[2];o=void 0,a=!0,l=!1,s=void 0;try{for(c=t.transactions[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){d=u.value,p=!0,f=!1,h=void 0;try{for(m=d.effects[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var B;(v=g.value).is(nd)&&v.value&&(o=v.value),v.is(np)&&(null==r||r.write((B=v.value,JSON.parse(B,function(e,n){return(void 0===n?"undefined":(0,e9._)(n))==="object"&&"Uint8Array"===n.type&&void 0!==n.data?new Uint8Array(n.data):n})))),v.is(nf)&&i.abort()}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}}}catch(e){l=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}if(!o)return[2];switch(w=o.service,y=o.procedure,S=o.type,Y=e.client[w][y][S],A=void 0,C=1,o.type){case"rpc":return[3,1];case"stream":return[3,3];case"subscribe":return[3,5];case"upload":return[3,7]}return[3,9];case 1:case 5:return[4,Y(o.input,{signal:i.signal})];case 2:return x=b.sent(),n({name:"".concat(w,".").concat(y,".").concat(S,".").concat(C),data:ng(x)}),t.view.dispatch({effects:nf.of(null)}),[3,9];case 3:return[4,Y(null!==(k=o.input)&&void 0!==k?k:void 0,{signal:i.signal})];case 4:return D=(_=b.sent()).reqWritable,E=_.resReadable,r=D,A=E,[3,9];case 6:return A=b.sent().resReadable,[3,9];case 7:return[4,Y(null!==(R=o.input)&&void 0!==R?R:void 0,{signal:i.signal})];case 8:return F=(I=b.sent()).reqWritable,I.finalize,r=F,[3,9];case 9:if(!A)return[3,22];T=!1,P=!1,b.label=10;case 10:b.trys.push([10,15,16,21]),U=(0,e6._)(A),b.label=11;case 11:return[4,U.next()];case 12:if(!(T=!(N=b.sent()).done))return[3,14];O=N.value,n({name:"".concat(w,".").concat(y,".").concat(S,".").concat(C),data:ng(O)}),C++,b.label=13;case 13:return T=!1,[3,11];case 14:return[3,21];case 15:return M=b.sent(),P=!0,L=M,[3,21];case 16:if(b.trys.push([16,,19,20]),!(T&&null!=U.return))return[3,18];return[4,U.return()];case 17:b.sent(),b.label=18;case 18:return[3,20];case 19:if(P)throw L;return[7];case 20:return[7];case 21:t.view.dispatch({effects:nf.of(null)}),b.label=22;case 22:return[2]}})}),function(e){return t.apply(this,arguments)})}}),nn.Lz.editable.from(t,function(e){return(null==e?void 0:e.type)!=="rpc"&&(null==e?void 0:e.type)!=="subscribe"}),nr.x.compute([t,"doc"],function(e){var n,r;return e.doc.length?null:(null===(n=e.field(t))||void 0===n?void 0:n.type)==="stream"||(null===(r=e.field(t))||void 0===r?void 0:r.type)==="upload"?{from:0,insert:"{\n   # ... input data\n}"}:{from:0,insert:'{\n  "service_name": {\n    "procedure_name": {\n      "rpc" | "stream" | "subscribe" | "upload": {\n        # ... init/input data\n      }\n    }\n  }\n}'}}),nn.w4.of([{key:"Tab",run:function(e){var n;return!e.state.doc.length&&(e.dispatch({changes:null!==(n=e.state.facet(nr.x)[0])&&void 0!==n?n:void 0}),!0)}}]),nn.S7.of(function(n){var r=function(){if(!!e){var t=nw(n.state.doc.toString());if(t){var r=t.type,i=t.service,o=t.procedure,a=t.input;r&&i&&o&&n.dispatch({effects:nd.of({type:r,service:i,procedure:o,input:a}),changes:"stream"===r||"upload"===r?{from:0,to:n.state.doc.length,insert:""}:void 0})}}},i=function(){n.dispatch({effects:np.of(n.state.doc.toString()),changes:{from:0,to:n.state.doc.length,insert:""}})},o=function(){var r,i=n.state.field(t),o=new Set,a=n.state.doc.toString();return e&&i&&"rpc"!==i.type&&(o.add("Close"),("stream"===i.type||"upload"===i.type)&&a.startsWith("{")&&a.endsWith("}")&&o.add("Send")),e&&!i&&a.length&&(o.add("Clear"),(null===(r=nw(a))||void 0===r?void 0:r.type)&&o.add("Send")),o},a=nS.create({enabled:o(),onSend:function(){null==n.state.field(t)?r():i(),n.focus()},onClose:function(){n.dispatch({effects:[nf.of(null),nd.of(null)],changes:{from:0,to:n.state.doc.length,insert:""}})},onClear:function(){n.dispatch({changes:{from:0,to:n.state.doc.length,insert:""}}),n.focus()}});return{dom:a,top:!1,update:function(e){if((0,nt.$H)(e,t,"doc")){var n=e.state.field(t);nS.update(a,function(e){return(0,e7._)((0,K._)({},e),{enabled:o(),inProgress:n?"".concat(n.type,": ").concat(n.service,".").concat(n.procedure):void 0})})}}}})]}})]});function ng(e){return JSON.stringify(e,function(e,n){return n instanceof Uint8Array?Array.from(n):n},2)}var nv=["rpc","stream","subscribe","upload"];function nw(e){try{n=JSON.parse(e)}catch(e){return null}var n,t=0,r=null,i=null,o=null;try{for(;t<3;){var a=Object.keys(n)[0];if(void 0===a)throw Error("expected key");if(0===t&&(r=a),1===t&&(i=a),2===t){if(nv.includes(a))o=a;else throw Error("expected procedure type")}n=n[a],t++}return{type:o,service:r,procedure:i,input:n}}catch(e){return{type:o,service:r,procedure:i,input:null}}}var ny=(0,M.x)({buttons:[B.wp.p(4),B.wp.rowWithGap(4)],status:[B.wp.p(4),B.wp.pb(0)],response:[B.wp.flex.growAndShrink(1),B.wp.border({width:1,color:ez.LU.outlineDefault}),{marginTop:"4px"}],logHeader:[B.wp.height("37px"),B.wp.display.flex,B.wp.p(4),B.wp.border({width:1,color:ez.LU.outlineDefault,direction:"bottom"})],logData:[B.wp.display.block,B.wp.flex.growAndShrink(1),{overflowY:"auto"}],logsHeader:[B.wp.display.flex,B.wp.align.end,B.wp.p(4),B.wp.border({width:1,color:ez.LU.outlineDefault,direction:"bottom"})],logsList:[B.wp.display.block,B.wp.flex.growAndShrink(1),{overflowY:"auto"}],responseL:[B.wp.display.flex,B.wp.flex.growAndShrink(1),{overflowY:"auto"}],responseR:[B.wp.display.flex,B.wp.border({width:1,color:ez.LU.outlineDefault,direction:"left"}),B.wp.width("40%"),B.wp.maxWidth("250px"),{overflowY:"auto","& code":{display:"block",cursor:"pointer",padding:"4px",borderBottom:"1px solid ".concat(ez.LU.outlineDimmer),overflowX:"hidden",textOverflow:"ellipsis"},"& code.selected":{backgroundColor:ez.LU.accentPrimaryDimmer},"& code:last-of-type":{borderBottom:"unset"}}]}),nb=["Send","Close","Clear"],nS=new no.E(function(e){return(0,f.FD)(F.S,{children:[(0,f.Y)(F.S,{css:ny.status,children:(0,f.FD)(I.EY,{variant:"small",color:"dimmer",children:["Status:"," ",e.inProgress?(0,f.FD)(f.FK,{children:["In progress - ",e.inProgress]}):null]})}),(0,f.Y)(F.S,{css:ny.buttons,children:Object.values(nb).map(function(n){return(0,f.Y)(eg.$n,{size:"small",disabled:!e.enabled.has(n),text:n,onClick:function(){switch(n){case"Send":e.onSend();break;case"Close":e.onClose();break;case"Clear":e.onClear()}}},n)})})]})});function nY(){var e=(0,$._)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isPrivate\n    timeCreated\n    timeUpdated\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n    }\n    isRenamed\n    folderId\n    isOwner\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n          url\n          templateLabel\n        }\n      }\n    }\n  }\n"]);return nY=function(){return e},e}function nA(){var e=(0,$._)(["\n  query AdminPanelReplView($replId: String!) {\n    repl(id: $replId) {\n      ...AdminPanelRepl\n    }\n  }\n  ","\n"]);return nA=function(){return e},e}var nC={},nx=(0,J.J1)(nY()),nk=(0,J.J1)(nA(),nx),n_=t(16907),nD=t(45771),nE=t(75472),nR=(0,nD.AH)([B.wp.colWithGap(16),B.wp.p(4),{pre:{whiteSpace:"pre-wrap",wordWrap:"break-word"}}]),nI=t(53811),nF=t(67201),nT=t(81239),nP=t(40208),nL=t(62493),nU=t(35899),nN=t(67197);function nO(e){var n=e.sessionId,t=(0,v._)((0,w.useState)(!1),2),r=t[0],i=t[1],o=(0,v._)((0,w.useState)(""),2),a=o[0],l=o[1],s=(0,v._)((0,w.useState)(!1),2),c=s[0],u=s[1],d=(0,nT.A)().showConfirm,p=(0,nU.c)();return null==n?(0,f.Y)(F.S,{children:(0,f.Y)(I.EY,{multiline:!1,children:"Something went wrong... no RUM session found... Try refreshing the page"})}):(0,f.FD)(F.S,{gap:8,children:[(0,f.FD)(I.EY,{variant:"small",multiline:!1,children:["RUM Session ID: ",n]}),(0,f.Y)(I.EY,{variant:"headerDefault",multiline:!1,children:"Submit an Issue"}),(0,f.FD)(F.S,{gap:16,children:[(0,f.Y)(ew.ov,{id:p("message"),placeholder:"What can we do better?",value:a,onChange:function(e){return l(e.target.value)},disabled:r}),(0,f.FD)(F.S,{row:!0,gap:8,children:[(0,f.Y)(nN.S,{id:p("issueInRecording"),checked:c,onChange:function(e){return u(e)}}),(0,f.Y)("label",{htmlFor:p("issueInRecording"),children:(0,f.Y)(I.EY,{multiline:!1,children:"Issue is demoed in recording"})})]}),(0,f.Y)(eg.$n,{onClick:function(){var e=(0,nF.A)();i(!0),(0,nP.yH)({name:"replitOnReplit:issue",context:{message:a,issueInRecording:c,customEventId:e}}),d("Issue submitted! Have a cookie \uD83C\uDF6A",5e3),setTimeout(function(){i(!1),l(""),u(!1)},5e3)},text:"Submit",disabled:r||0===a.trim().length,colorway:"primary"})]})]})}var nM=t(49705),nB=t(33105),nH=t(38349),nz=(0,M.x)({wrapper:[B.wp.p(4)],noWorkflow:[B.wp.p(4),B.wp.flex.growAndShrink(1)]}),nW=function(e){return e.Repl="repl",e.Pid2="pid2",e.Pid2Repl="pid2Repl",e.MuxedShell="pid2MuxedShell",e.Logs="logs",e.LSP="lsp",e.AI="ai",e.GhostwriterChat="aiChat",e.Git="git",e.History2="history2",e.Metadata="metadata",e.Override="override",e.DDRum="rum",e.CommandBar="commandBar",e.Workflows="workflows",e.TriggerBSOD="triggerBSOD",e}(nW||{}),nG=(i={},(0,g._)(i,"repl",function(){var e,n,t,r,i,o,a,l,s,c=(0,n_.A)(),u=(e=(0,K._)({},nC,{variables:{replId:c}}),Q.I(nk,e)).data,d=(null==u?void 0:u.repl.__typename)==="Repl"?JSON.parse(JSON.stringify(u.repl)):void 0;return d&&(delete d.__typename,null===(n=d.user)||void 0===n||delete n.__typename,null===(t=d.origin)||void 0===t||delete t.__typename,delete d.config.__typename,null===(r=d.source)||void 0===r||delete r.__typename,null===(o=d.source)||void 0===o||null===(i=o.release)||void 0===i||delete i.__typename,null===(s=d.source)||void 0===s||null===(l=s.release)||void 0===l||null===(a=l.repl)||void 0===a||delete a.__typename),(0,f.FD)(F.S,{css:nR,children:[(0,f.Y)(nE.A,{replId:c}),(0,f.Y)("div",{children:d?(0,f.Y)(Y.A,{json:d}):null})]})}),(0,g._)(i,"pid2",function(){var e,n,t,r,i,o,a,l,s,c,u=(0,A.A)().container,d=null===(c=u.getContext())||void 0===c?void 0:c.repl,p=(0,eJ.yB)(),h=(0,v._)((0,w.useState)("unknown"),2),m=h[0],g=h[1],S=(0,v._)((0,w.useState)(null),2),Y=S[0],C=S[1],x=(0,v._)((0,w.useState)(null),2),k=x[0],_=x[1],D=(0,v._)((0,w.useState)(null),2),E=D[0],R=D[1],T=(t=(n=(0,A.A)()).fs,i=null===(e=(r=n.container).getContext())||void 0===e?void 0:e.repl,o=(0,eO.Xr)(eX),l=(a=(0,v._)((0,eO.md)(eX),2))[0],a[1],s=(0,e$.A)(l),(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!i||"IDLE"!==s.current&&"ERROR"!==s.current)return[2];return o(["STARTING","starting pid2 upload process"]),[4,function(e,n,t){return e2.apply(this,arguments)}(r,t,function(e,n){o([e,n])})];case 1:return e.sent(),[2]}})}),[s,i,o,r,t])),P=(0,v._)((0,eO.md)(eX),2),L=P[0],U=P[1],N=(0,e5.I)(function(e){return(0,y._)(function(){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return g("loading"),n=setTimeout(function(){g("unhealthy")},5e3),[4,e0(u,C)];case 1:if(!(t=i.sent()))return g("unhealthy"),[2];return[4,u.exec("stat","-c","%N",t.pid2BinDst2)];case 2:return(r=i.sent()).error?C("LocalPid2 not installed: ".concat(r.output)):C("LocalPid2 installed: ".concat(r.output)),e.healthCheck.ping.rpc({}).then(function(e){_(e.payload),clearTimeout(n),e.ok?g("ok"):g("unhealthy")}).catch(function(){clearTimeout(n),g("unhealthy")}),[2]}})})});return(0,f.FD)(F.S,{css:e3.view,children:[(0,f.FD)(I.Y9,{level:3,children:["Is pid2 enabled? ",p?"Yes":"No"]}),(0,f.Y)(eg.$n,{text:"Ping pid2 (state: ".concat(m,")"),colorway:"ok"===m?"green":"unhealthy"===m?"red":"grey",disabled:!N,onClick:function(){null==N||N()}}),k?(0,f.Y)("code",{children:JSON.stringify(k,null,2)}):null,Y?(0,f.Y)("code",{children:Y}):null,(0,f.Y)(eg.$n,{colorway:"purple",text:"Upload pid2 to Repl",onClick:(0,y._)(function(){return(0,b.YH)(this,function(e){return d&&T(),[2]})})}),(0,f.FD)(I.EY,{css:e3.uploadMessage,children:["[",L,"] ",U]}),(0,f.Y)(eg.$n,{colorway:"red",text:"Delete uploaded pid2",onClick:(0,y._)(function(){var e,n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(!d)return[2];return[4,e0(u,R)];case 1:if(!(e=r.sent()))return[2];return[4,u.exec("rm","-f",e.pid2BinDst)];case 2:return n=r.sent(),[4,u.exec("rm","-f",e.pid2BinDst2)];case 3:if(t=r.sent(),n.error)return R("".concat(n.error,": ").concat(n.output)),[2];if(t.error)return R("".concat(t.error,": ").concat(t.output)),[2];return R("uploaded pid2 deleted"),[2]}})})}),E?(0,f.Y)(I.EY,{css:e3.uploadMessage,children:E}):null,(0,f.Y)(eg.$n,{text:"Assign pid2 client to window for testing",onClick:function(){window.pid2=p,e8.log("window.pid2: ",p)}})]})}),(0,g._)(i,"pid2Repl",function(){var e=(0,v._)((0,w.useState)(function(){return new ns.N([])}),1)[0],n=(0,w.useCallback)(function(n){return e.update(function(e){return[n].concat((0,q._)(e))})},[e]),t=(0,v._)((0,w.useState)(null),2),r=t[0],i=t[1];(0,nc.b)(function(e){return i({client:e}),function(){return i(null)}},[]);var o=nm.use(r,n);return(0,f.FD)(f.FK,{children:[(0,f.Y)(ni.Ay,{language:"json",hideGutter:!0,extensions:o}),(0,f.Y)(nu,{logs:e,onClear:function(){return e.set([])}})]})}),(0,g._)(i,"pid2MuxedShell",function(){var e,n=(0,v._)((0,w.useState)([]),2),t=n[0],r=n[1];return(0,nc.b)((e=(0,y._)(function(e,n){var t,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:t=n.signal,i=e.shellExec.monitorAll.subscribe({},{signal:t}).resReadable,o=!1,a=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),s=(0,e6._)(i),p.label=2;case 2:return[4,s.next()];case 3:if(!(o=!(c=p.sent()).done))return[3,5];if(!(u=c.value).ok)return[2];r(u.payload.processes),p.label=4;case 4:return o=!1,[3,2];case 5:return[3,12];case 6:return d=p.sent(),a=!0,l=d,[3,12];case 7:if(p.trys.push([7,,10,11]),!(o&&null!=s.return))return[3,9];return[4,s.return()];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(a)throw l;return[7];case 11:return[7];case 12:return[2]}})}),function(n,t){return e.apply(this,arguments)}),[]),(0,f.Y)(F.S,{children:(0,f.Y)(Y.A,{json:t})})}),(0,g._)(i,"logs",function(e){var n=e.isHidden,t=(0,v._)((0,es.A)(!1),2),r=t[0],i=t[1],o=(0,v._)((0,w.useState)(null),2),a=o[0],l=o[1],s=(0,eh.jg)(),c=(0,eh.lY)(),u=(0,eh.x6)(),d=(0,eh.R7)(),p=(0,eh.G2)(),h=(0,eh.ou)();return n?null:(0,f.FD)(F.S,{css:eS.container,gap:8,children:[(0,f.FD)(F.S,{css:eS.controls,gap:8,children:[(0,f.Y)(eg.$n,{colorway:c?void 0:"positive",onClick:u,text:c?"Stop logging goval":"Start logging goval"}),(0,f.FD)(F.S,{row:!0,gap:4,justify:"space-between",children:[(0,f.Y)(eg.$n,{onClick:i,text:r?"Hide filters":"Show filters"}),a?(0,f.Y)(eg.$n,{onClick:function(){return l(null)},text:"Reset Time Ref"}):null,(0,f.Y)(ev.K0,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(s)),n=document.createElement("a");n.setAttribute("href",e);var t=new Date().toISOString();n.setAttribute("download","logs-".concat(t.slice(0,t.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),n.click()},size:32,children:(0,f.Y)(eb.A,{})}),(0,f.Y)(eg.$n,{colorway:"negative",onClick:function(){return h()},text:"Clear logs"})]}),r?(0,f.Y)(eD,{filters:d,updateFilters:function(e){p((0,K._)({},d,e))}}):null]}),(0,f.Y)(e_,{logs:s,filters:d,timeRef:a,setTimeRef:l})]})}),(0,g._)(i,"lsp",em.O),(0,g._)(i,"ai",Z.uG),(0,g._)(i,"aiChat",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.isHidden,t=e.performPaneOperation;return n?null:(0,f.Y)(F.S,{css:W.wrapper,children:(0,f.FD)(H.tU,{children:[(0,f.Y)(H.wb,{"aria-label":"Tabs",children:Object.keys(z).map(function(e){return(0,f.Y)(H.oz,{children:e},e)})}),(0,f.Y)(H.T2,{children:Object.entries(z).map(function(e){var n=(0,v._)(e,2),r=n[0],i=n[1];return(0,f.Y)(H.Kp,{children:(0,f.Y)(i,{performPaneOperation:t})},r)})})]})})}),(0,g._)(i,"git",function(){var e,n=(0,v._)((0,w.useState)([]),2),t=n[0],r=n[1],i=(e=(0,K._)({},ee,void 0),Q.I(en,e)).data,o=(0,et.A)(er.Y);return(0,w.useEffect)(function(){o&&r(function(e){return e.length&&e[0].key===o.key?e:[o].concat((0,q._)(e)).slice(0,100)})},[o]),(0,f.FD)(F.S,{css:[B.wp.p(8)],children:[(0,f.FD)(eo.ui,{elevated:!0,css:[B.wp.borderRadius(8),B.wp.p(8),B.wp.mb(8)],children:[(0,f.Y)("span",{children:"Git Service Connection Info"}),(0,f.Y)("pre",{children:(null==i?void 0:i.currentUser)?JSON.stringify(i,function(e,n){return"accessToken"===e?"censored":n},2):"No gitHubInfo"})]}),(0,f.Y)(F.S,{gap:4,children:t.length?t.map(function(e){return(0,f.Y)(ea,{event:e},e.key)}):"No events yet..."})]})}),(0,g._)(i,"history2",function(){var e=(0,et.A)(ec.pX)(),n=(0,et.A)(ec.aP)(),t=(0,v._)((0,es.A)(!1),2),r=t[0],i=t[1];if(!e)return null;var o=e.filePath,a=e.changes,l=e.users,s=e.version,c=e.playing,u=e.count,d=a[s];if(!d)return(0,f.FD)(F.S,{children:[(0,f.FD)("div",{children:["Change at ",s," not found. Here's the state"]}),(0,f.Y)("pre",{children:JSON.stringify(e,null,2)})]});var p=null==l?void 0:l[d.userId],h=d.timestamp,m=r&&n?function(e,n){try{return(0,el.$1)(e,n).op}catch(e){return e}}(d.changes,n.state.doc.sliceString(0)):null;return(0,f.FD)(F.S,{gap:16,css:[B.wp.p(4)],children:[(0,f.FD)(F.S,{gap:4,children:[(0,f.Y)(ep,{t:"File",children:(0,f.Y)("pre",{children:o})}),(0,f.FD)(ep,{t:"Version",children:[s," / ",u-1]}),(0,f.Y)(ep,{t:"Playing",children:(0,f.Y)(eu.R,{children:c?"true":"false"})}),(0,f.Y)(ep,{t:"Date",children:(0,f.Y)(ed.Dc,{date:h})})]}),p?(0,f.FD)(F.S,{children:[(0,f.Y)(ep,{t:"Author",children:p.username}),(0,f.FD)(F.S,{css:[B.wp.pl(8),B.wp.colWithGap(4)],children:[(0,f.Y)(ep,{t:"ID",children:p.id}),(0,f.Y)(ep,{t:"Name",children:p.username}),(0,f.Y)(ep,{t:"Image",children:(0,f.Y)("a",{href:p.image,children:p.image})})]})]}):null,(0,f.Y)(V.d,{isSelected:r,onChange:i,children:"Changes"}),d?null:"No changes",r&&d?(0,f.Y)(f.FK,{children:(0,f.FD)(F.S,{children:[(0,f.Y)(ep,{t:"Changeset",children:(0,f.Y)("pre",{children:JSON.stringify(d,null,2)})}),n?(0,f.Y)(f.FK,{children:(0,f.FD)(F.S,{css:[B.wp.mt(4)],children:[(0,f.Y)(ep,{t:"OT",children:(0,f.Y)("pre",{children:JSON.stringify(m,null,2)})}),(0,f.Y)("p",{children:(0,f.FD)("small",{children:["Note that the OT value is translated ",(0,f.Y)("em",{children:"back"})," to an operational transformation from the CodeMirror changeset."]})})]})}):null]})}):null]})}),(0,g._)(i,"metadata",function(){var e=(0,A.A)().container;(0,eI.A)(e);var n=e.getConnectionMetadata();if(!n)return(0,f.Y)("div",{children:"no token yet, wait for connection"});var t=n.token,r=new URL(n.conmanURL).host,i='./conman-repl -t "'.concat(t,'" -u ').concat(r);return(0,f.FD)("div",{css:eT.root,children:[(0,f.FD)(F.S,{row:!0,gap:2,children:[(0,f.FD)(I.EY,{css:eT.command,multiline:!1,children:["conman Repl command: ",(0,f.Y)(eu.R,{children:i})]}),(0,f.Y)(ev.K0,{alt:"Copy to clipboard",onClick:function(){return(0,eE.default)(i)},children:(0,f.Y)(eF.A,{})})]}),(0,f.FD)("div",{children:["metadata:",(0,f.Y)("pre",{children:JSON.stringify(n,null,2)})]}),(0,f.Y)("br",{}),(0,f.Y)("br",{}),(0,f.FD)("div",{children:["parsed token:",(0,f.Y)("pre",{children:JSON.stringify((0,eR.pI)(n.token),null,2)})]}),(0,f.Y)("br",{}),(0,f.Y)("br",{})]})}),(0,g._)(i,"override",function(){var e=(0,v._)((0,w.useState)(eL.A.get("gurl","string")||""),2),n=e[0],t=e[1],r=(0,v._)((0,w.useState)(""),2),i=r[0],o=r[1],a=eH(),l=(0,eP.RL)(),s=""===n?"null":JSON.stringify((0,eU.x)(n),null,2);return(0,f.FD)(F.S,{css:[B.wp.pt(16),B.wp.px(12),B.wp.colWithGap(12)],children:[(0,f.FD)(F.S,{gap:12,children:[(0,f.Y)(eW.Ay,{label:"Custom gurl",placeholder:"ws://localhost:".concat(4560),value:n,onChange:function(e){return t(e.currentTarget.value)}}),(0,f.FD)("pre",{children:["metadata override preview:",s]}),(0,f.FD)(F.S,{row:!0,gap:12,children:[(0,f.Y)(eg.$n,{colorway:"positive",onClick:function(){eL.A.set("gurl",n),window.location.reload()},text:"Set gurl and reload"}),(0,f.Y)(eg.$n,{colorway:"yellow",onClick:function(){eL.A.set("gurl","wss://eval.canary.replit.com"),window.location.reload()},text:"Switch to canary & reload"}),(0,f.Y)(eg.$n,{colorway:"orange",onClick:function(){eL.A.remove("gurl"),window.location.reload()},text:"Unset gurl and reload"}),(0,f.Y)(eg.$n,{colorway:"red",onClick:function(){eL.A.set("gurl","ws://localhost:4560"),window.location.reload()},text:"Switch to localhost & reload"})]}),(0,f.Y)("div",{children:eL.A.get("gurl","string")?"currently in localStorage: ".concat(eL.A.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,f.Y)("p",{children:"Gurl order of precedence:"}),(0,f.FD)("ol",{style:{margin:12},children:[(0,f.Y)("li",{children:"‘gurl’ in localStorage (set above)"}),(0,f.FD)("li",{children:["If in development webapp and a there’s a response from",(0,f.Y)("code",{children:"https://localhost:4563"})," or",(0,f.FD)("code",{children:["http://localhost:",4560]}),", then it will use that."]}),(0,f.FD)("li",{children:["default is ",(0,f.Y)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]})]}),(0,f.Y)("hr",{css:[B.wp.my(16),{borderColor:ez.LU.outlineDefault}]}),(0,f.FD)(F.S,{gap:12,children:[(0,f.Y)(I.EY,{multiline:!1,children:"Override Database"}),(0,f.Y)(eW.Ay,{type:"text",value:i,onChange:function(e){o(e.target.value)}}),(0,f.Y)(F.S,{row:!0,gap:8,children:(0,f.Y)(eg.$n,{colorway:"positive",onClick:function(){a(i)},text:"Override Postgres connection string"})})]}),(0,f.Y)(eg.$n,{onClick:function(){window.ldClient=l,eG.log("window.ldClient: ",l)},text:"Assign LD client to window for testing"})]})}),(0,g._)(i,"rum",function(){var e,n=null===(e=nI.L.getInternalContext())||void 0===e?void 0:e.session_id,t=nI.L.getInitConfiguration(),r=null!=t&&100===t.sampleRate,i=(0,v._)((0,w.useState)(null!=n),2),o=i[0],a=i[1];return(0,f.Y)(F.S,{gap:16,css:[B.wp.p(4)],children:r?(0,f.FD)(f.FK,{children:[(0,f.Y)(eg.$n,{onClick:o?function(){nI.L.stopSessionReplayRecording(),document.cookie="_dd_s=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href=window.location.href.split("?")[0]}:function(){(0,nP.mC)({name:"replitOnReplit"}),setTimeout(function(){a(!0)},1e3)},text:o?"\uD83D\uDD34 Recording... Click to stop and reload page":"Start Recording",colorway:o?void 0:"primary",css:(0,K._)({},o&&nL.S.backgroundPulse(ez.LU.redDimmest,ez.LU.redDimmer))}),o?(0,f.Y)(nO,{sessionId:n}):null]}):(0,f.Y)(eg.$n,{onClick:function(){window.location.href=window.location.href.split("?")[0].split("#")[0]+"?rum=1"},text:"Click to reload and start recording",colorway:"primary"})})}),(0,g._)(i,"commandBar",function(){var e=(0,G.H)(),n=(0,G.D)();return(0,f.Y)(F.S,{css:j.container,children:(0,f.Y)(V.d,{isSelected:e,onChange:n,children:"Show match scores in Command Bar"})})}),(0,g._)(i,"workflows",function(){var e=(0,v._)((0,w.useState)([]),2),n=e[0],t=e[1],r=(0,v._)((0,w.useState)(void 0),2),i=r[0],o=r[1],a=(0,nH.OK)(),l=(0,nH.mP)(),s=(0,nH.If)();(0,w.useEffect)(function(){var e,n,r=null!==(n=null==l?void 0:l.map(function(e){return{id:e.name}}))&&void 0!==n?n:[];t(r),o(null===(e=r[0])||void 0===e?void 0:e.id)},[l]);var c=(0,e5.I)(function(e){return function(n){var t=n.workflowId;return e.workflows.runWorkflow.rpc({workflowId:t})}},[]),u=(0,e5.I)(function(e){return function(n){var t=n.runId;e.workflows.stopRun.rpc({runId:t})}},[]);return(0,f.FD)(F.S,{css:nz.wrapper,children:[(0,f.FD)(F.S,{children:[i?(0,f.Y)(R.l,{"aria-label":"Workflow",onSelectionChange:function(e){o(e)},selectedKey:i,items:n,children:function(e){return(0,f.Y)(E.nh,{label:e.id},e.id)}}):(0,f.Y)(F.S,{row:!0,align:"center",justify:"center",css:nz.noWorkflow,children:(0,f.Y)(I.EY,{children:"No workflow selected"})}),(0,f.Y)(eg.$n,{onClick:(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!i||!c)return[2];return[4,c({workflowId:i})];case 1:return e.sent(),[2]}})}),text:"Run",disabled:!i})]}),s?(0,f.Y)(F.S,{children:Object.entries(s).map(function(e){var n=(0,v._)(e,2),t=n[0],r=n[1];return(0,f.FD)(F.S,{row:!0,gap:4,align:"center",children:[t," step: ",r.step,r.step===nB.zY.RUNNING?(0,f.Y)(eg.$n,{text:"Stop",onClick:function(){null==u||u({runId:t})}}):null]},t)})}):null,(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{children:"Run State"}),(0,f.Y)(Y.A,{json:s})]}),(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{children:"Config"}),(0,f.Y)(Y.A,{json:a})]})]})}),(0,g._)(i,"triggerBSOD",function(){var e=(0,nM.iO)();return(0,f.Y)(F.S,{gap:16,children:(0,f.Y)(eg.$n,{text:"Throw BSOD",onClick:function(){return e({error:Error("[DEBUG] TriggerBSOD"),origin:"debug: Debug"})}})})}),i),nV=Object.values(nW),nj=(0,M.x)({surface:[B.wp.p(4),B.wp.height("100%")],tabs:[{flexWrap:"wrap",flexDirection:"row",gap:"4px"}],tab:[B.wp.flex.growAndShrink(1),B.wp.overflow("auto")],content:[B.wp.flex.growAndShrink(1),B.wp.height("100%")]});function nZ(e){var n=e.paneOptions,t=(0,v._)((0,w.useState)("repl"),2),r=t[0],i=t[1],o=nV.map(function(e){return(0,f.Y)(eg.$n,{colorway:e===r?"primary":void 0,onClick:function(){return i(e)},text:e},e)});return(0,f.FD)(eo.ui,{background:"default",css:nj.surface,gap:8,children:[(0,f.Y)(F.S,{css:nj.tabs,children:o}),(0,f.Y)(F.S,{css:nj.tab,children:Object.entries(nG).map(function(e){var t=(0,v._)(e,2),i=t[0],o=t[1];return(0,f.Y)(F.S,{css:nj.content,style:{display:i!==r?"none":"inherit"},children:"override"===i&&"override"!==r?null:(0,f.Y)(o,{isHidden:n.isHidden||r!==i,performPaneOperation:n.performPaneOperation})},i)})})]})}var nq=t(51895),nK=t(42795),n$=t(84296),nJ=h.ZU.Object({type:h.ZU.Literal("adminPanel")}),nQ={Content:function(e){var n=e.options;return(0,f.Y)(nZ,{paneOptions:n})},Icon:function(e){var n=e.size;return(0,f.Y)(n$.Vx.Provider,{value:{color:ez.LU.redStronger,size:n},children:(0,f.Y)(nK.A,{})})},getTitle:function(){return"Debug"},getTitlePill:function(){return{text:"Staff-only",colorway:"warning"}},description:"Replit developer debugging tools",category:nq.bY.Other,decode:function(e){return m.WT.Decode(nJ,e)}},nX=t(80481),n0=t(31425),n1=t(37010),n2=t(54760),n4=(0,M.x)({container:[B.wp.coverContainer,B.wp.py(4),B.wp.px(8)]});function n5(e){var n=e.performPaneOperation,t=(0,A.A)().fs,r="cmdOrCtrlKey"===(0,nX.gc)("multiselectModifierKey").preferences.multiselectModifierKey?"cmdOrCtrlKey":"altKey",i=(0,n2.J)(!0),o=(0,w.useCallback)(function(e){return!i(e.filename)},[i]),a=(0,n1.u)({fs:t,filter:o,multiselectModifierKey:r,readOnly:!0,fontSize:13,manageWidth:!0,onFileSelect:function(e){var t=e.path;n({operation:"replace",pane:(0,n0.af)(t)})}});return(0,f.Y)(F.S,{css:n4.container,children:(0,f.Y)(n1.J,{store:a.store})})}var n8=t(32545),n3=h.ZU.Object({type:h.ZU.Literal("agentFiles")}),n6={Content:function(e){return(0,f.Y)(n5,{performPaneOperation:e.options.performPaneOperation})},Icon:function(e){var n=e.size;return(0,f.Y)(n$.Vx.Provider,{value:{color:ez.LU.blurpleStrongest,size:n},children:(0,f.Y)(n8.A,{})})},getTitle:function(){return"Files"},category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(n3,e)}},n7=t(67668),n9=t(1566),te=t(78559),tn=t(56185),tt=(0,M.x)({text:{width:"100%",textAlign:"center"},loaderContainer:[B.wp.display.flex,B.wp.center,B.wp.height("100%")]}),tr=h.ZU.Object({type:h.ZU.Literal("binary"),data:h.ZU.Object({path:h.ZU.String()})}),ti={Content:function(e){var n=e.pane,t=e.options;return(0,f.Y)(to,{path:n.data.path,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.pane,t=e.size;return(0,f.Y)(te.A,{path:n.data.path,size:t})},getTitle:function(e){return(0,n7.WP)(e.data.path)},category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(tr,e)}};function to(e){var n=e.path,t=e.performPaneOperation,r=(0,A.A)().fs,i=(0,n0.KA)({path:n,performPaneOperation:t});(0,n9.Qt)(function(){if(i)return{commands:[{commands:i?(0,q._)(i):[]}]}},[i]);var o=(0,v._)((0,w.useState)(null),2),a=o[0],l=o[1],s=(0,v._)((0,w.useState)(!0),2),c=s[0],u=s[1];return((0,w.useEffect)(function(){var e=r.watchFile(n,{onChange:function(e){l(e.toString("base64")),u(!1)},onError:function(){l(null),u(!1)},onMoveOrDelete:function(){l(null),u(!1)}});return function(){e(),u(!0),l(null)}},[r,n]),c)?(0,f.Y)(F.S,{css:tt.loaderContainer,children:(0,f.Y)(tn.A,{})}):null===a?(0,f.Y)(I.EY,{multiline:!1,children:"Failed to load binary file"}):(0,f.FD)(f.FK,{children:[(0,f.Y)(n0.ou,{path:n,performPaneOperation:t}),(0,f.FD)(n0.UC,{centered:!0,children:[(0,f.Y)(I.EY,{css:tt.text,children:"The file is not displayed in the text editor because it is either binary or uses an unsupported text encoding."}),(0,f.Y)(ev.K0,{alt:"Download",css:[B.wp.position.absolute,B.wp.bottom(8),B.wp.right(8),B.wp.p(16)],children:(0,f.Y)("a",{href:"data:text/plain;base64,".concat(a),download:(0,n7.WP)(n),css:[B.wp.color.foregroundDimmer],children:(0,f.Y)(eb.A,{})})})]})]})}var ta=t(72727),tl=t(54401),ts=t(88184),tc=t(70906),tu=t(56902),td=t(41502),tp=t(49937),tf=t(44144),th=t(85280),tm=(0,M.x)({button:{width:"fit-content"}});function tg(e){var n=e.code,t=e.activeFile,r=(0,tp.vO)(),i=(0,td.A)(t),o=i?{text:"Insert",iconRight:(0,f.Y)(tf.A,{}),onClick:function(){var e,t,o;return i({code:n,insertAt:null!==(o=null===(t=r())||void 0===t?void 0:null===(e=t.position)||void 0===e?void 0:e.offset)&&void 0!==o?o:"end"})}}:{text:"Copy",iconLeft:(0,f.Y)(th.A,{}),onClick:function(){return(0,eE.default)(n)}};return(0,f.Y)(eo.ui,{background:"default",children:(0,f.Y)(eg.$n,(0,K._)({size:"small",variant:"outlined",css:tm.button},o))})}var tv=(0,M.x)({self:B.wp.colWithGap(4),content:[B.wp.backgroundColor.backgroundRoot,B.wp.borderRadius(4),B.wp.p(4),B.wp.align.center,B.wp.maxWidth("100%"),B.wp.overflowX("auto"),{width:"fit-content"}]});function tw(e){var n=e.method,t=e.content,r=e.activeFile,i=(0,v._)((0,w.useState)(t),2),o=i[0],a=i[1];return(0,f.FD)(F.S,{css:tv.self,children:[(0,f.Y)(tC,{title:n}),(0,f.Y)(F.S,{css:tv.content,row:!0,gap:4,children:o.map(function(e,t){var r="".concat(n,"-").concat(t);return"input"===e.type?(0,f.Y)(tb,{i:t,value:e.value,placeholder:e.placeholder,setContent:a},r):(0,f.Y)(tY,{value:e.value},r)})}),(0,f.Y)(tg,{code:o.reduce(function(e,n){return e+(n.value||("input"===n.type?n.placeholder:""))},""),activeFile:r})]})}var ty=(0,M.x)({self:[B.wp.width(64),B.wp.height(24),B.wp.zIndex(1)]});function tb(e){var n=e.i,t=e.value,r=e.placeholder,i=e.setContent;return(0,f.Y)(ew.pd,{onChange:function(e){i(function(t){return t.map(function(t,r){return n===r?(0,e7._)((0,K._)({},t),{value:e.target.value}):t})})},placeholder:r,value:t||"",css:ty.self})}var tS=(0,M.x)({self:[B.wp.borderRadius(0),B.wp.backgroundColor.backgroundRoot],code:[B.wp.font.code,B.wp.color.greyStronger,B.wp.p(4),{whiteSpace:"pre-wrap"}]});function tY(e){var n=e.value;return(0,f.Y)(F.S,{css:tS.self,children:(0,f.Y)(I.EY,{css:tS.code,children:n})})}var tA=(0,M.x)({self:B.wp.rowWithGap(4),bold:{fontWeight:ez.LU.fontWeightMedium}});function tC(e){var n=e.title,t=(0,v._)((0,tc.A)(function(){var e=(0,tu._)(n.split(" "));return[e[0],e.slice(1).join(" ")]},[n]),2),r=t[0],i=t[1];return(0,f.FD)(F.S,{css:tA.self,children:[(0,f.Y)(I.EY,{css:tA.bold,multiline:!1,children:r}),(0,f.Y)(I.EY,{color:"dimmer",multiline:!1,children:i})]})}var tx=function(e){return e.IMPORT="Import the database",e.CREATE="Create a new database",e.SET="Set a key to a value",e.GET="Get a key's value",e.DELETE="Delete a key",e.LIST="List all keys",e.LIST_PREFIX="List keys with a prefix",e}(tx||{}),tk={language:"Bash",methods:[tR("Set a key to a value","curl $REPLIT_DB_URL -d '{{key}} = {{value}}'"),tR("Get a key's value","curl $REPLIT_DB_URL/{{key}}"),tR("Delete a key","curl -XDELETE $REPLIT_DB_URL/{{key}}"),tR("List all keys",'curl "$REPLIT_DB_URL?prefix={{key}}"')]},t_={language:"Node",methods:[tR("Import the database",'const Database = require("@replit/database")'),tR("Create a new database","const db = new Database()"),tR("Set a key to a value",'db.set("{{key}}", "{{value}}").then(() => {})'),tR("Get a key's value",'db.get("{{key}}").then(value => {})'),tR("Delete a key",'db.delete("{{key}}").then(() => {})'),tR("List all keys","db.list().then(keys => {\n  console.log(keys);\n})"),tR("List keys with a prefix",'db.list("{{prefix}}").then(matches => {})')]},tD={language:"Go",methods:[tR("Import the database",'import "github.com/replit/database-go"'),tR("Set a key to a value",'db.Set("{{key}}", "{{value}}")'),tR("Get a key's value",'value, _ := database.Get("{{key}}")'),tR("Delete a key",'database.Delete("{{key}}")'),tR("List all keys",'keys, _ := database.ListKeys("")'),tR("List keys with a prefix",'matches, _ := database.ListKeys("{{prefix}}")')]},tE={language:"Python",methods:[tR("Import the database","from replit import db"),tR("Set a key to a value",'db["{{key}}"] = "{{value}}"'),tR("Get a key's value",'db["{{key}}"]'),tR("Delete a key",'del db["{{key}}"]'),tR("List all keys","keys = db.keys()\nprint(list(keys))"),tR("List keys with a prefix",'matches = db.prefix("{{prefix}}")')]};function tR(e,n){return{method:e,content:function(e){for(var n=[],t=0;t<e.length;){var r=e.indexOf("{{",t),i=e.indexOf("}}",t);if(-1===r||-1===i){n.push({type:"code",value:e.substring(t)});break}n.push({type:"code",value:e.substring(t,r)}),n.push({type:"input",placeholder:e.substring(r+2,i)}),t=i+2}return n}(n)}}var tI=(0,M.x)({self:B.wp.colWithGap(24),code:[B.wp.font.code,B.wp.color.greyStronger,B.wp.backgroundColor.backgroundRoot,B.wp.p(4),B.wp.borderRadius(4)]});function tF(e){var n=e.activeFile,t=(0,tc.A)(function(){return function(e){switch(e?(0,n7.an)(e):"bash"){case"js":case"ts":case"tsx":case"jsx":case"mjs":return t_;case"go":return tD;case"py":return tE;default:return tk}}(n)},[n]);return(0,f.FD)(F.S,{css:tI.self,children:[(0,f.FD)(I.EY,{color:"dimmer",children:["You can use the Database from any App by making HTTP requests or a client library as outlined below. We’ve set an environment variable called ",(0,f.Y)("code",{css:tI.code,children:"REPLIT_DB_URL"})," in your App if you'd like to interact with the database directly."]}),t.methods.map(function(e){return(0,f.Y)(tw,{method:e.method,content:e.content,activeFile:n},"".concat(t.language).concat(e.method))})]})}var tT=(0,M.x)({children:[B.wp.p(12),B.wp.colWithGap(8)]});function tP(e){var n=e.title,t=e.defaultExpanded,r=e.children;return(0,f.Y)(_.A,{defaultExpanded:t,headerContent:(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:n}),children:(0,f.Y)(F.S,{css:tT.children,children:r})})}var tL=t(69543),tU=t(57761),tN=(0,nD.i7)("from{opacity:0}to{opacity:1}"),tO=(0,M.x)({self:[{animation:"".concat(tN," 100ms forwards ease-in-out alternate")}],selfLoadingText:[B.wp.height(16),B.wp.width(48),B.wp.borderRadius(4),nL.S.backgroundPulse()],selfLoading:[B.wp.height(12),B.wp.borderRadius(16),nL.S.backgroundPulse()],text:[B.wp.rowWithGap(4),{display:"inline-flex"}],textSpan:[B.wp.width("fit-content"),B.wp.display.inlineFlex]});function tM(e){var n,t,r=e.database,i=e.loading,o=(null==r?void 0:r.sizeMB)||0,a=(n=1e6*(n=o)/1048576,"".concat(n.toFixed(),"/50 MiB")),l=i||!r;return(0,f.Y)(F.S,{css:tO.self,gap:8,children:l?(0,f.FD)(f.FK,{children:[(0,f.Y)(F.S,{css:tO.selfLoadingText}),(0,f.Y)(F.S,{css:tO.selfLoading})]}):(0,f.FD)(f.FK,{children:[(0,f.FD)(I.EY,{color:"dimmer",css:tO.text,multiline:!1,children:[(0,f.Y)(F.D.span,{css:tO.textSpan,children:a}),(0,f.Y)(F.D.span,{css:tO.textSpan,children:"|"}),(0,f.Y)(F.D.span,{css:tO.textSpan,children:(t=(t=null==r?void 0:r.keysCount)||0,"".concat(t," ").concat((0,tL.A)("key",t)))})]}),(0,f.Y)(tU.W,{current:o,total:50,tooltip:a})]})},l?"databaseLoadingStats":"databaseLoadedStats")}function tB(){var e=(0,$._)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return tB=function(){return e},e}function tH(){var e=(0,$._)(["\n  query Database($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return tH=function(){return e},e}var tz={},tW=(0,J.J1)(tB()),tG=(0,J.J1)(tH(),tW),tV=t(33078),tj=t(4930),tZ=t(3910),tq=t(28080),tK=(0,M.x)({sectionWrapper:[B.wp.width("100%"),B.wp.maxWidth(450)]});function t$(e){var n,t,r,i,o,a,l,s,c,u=e.performPaneOperation,d=(l=(i={variables:{replID:(0,n_.A)()},pollInterval:1e4},o=(0,K._)({},tz,i),a=Q.I(tG,o)).data,s=a.error,c=a.loading,l&&("Repl"===l.repl.__typename?t=null==l?void 0:null===(r=l.repl)||void 0===r?void 0:r.database:n="Could not fetch Database info"),s&&("GraphQL error: You don't have access to this database"===s.message?t=null:n=s.message),{db:t,loading:c,error:n}),p=d.db,h=d.error,m=d.loading,g=(0,tp.rM)(),v=(0,nq.Vv)().getTitle({type:"database"});return(0,f.Y)(tV.A,{pane:{type:"database"},headerText:v,action:(0,f.FD)(F.S,{css:tK.sectionWrapper,gap:16,children:[h?(0,f.Y)(tZ.N,{colorway:"negative",text:h}):null,(0,f.Y)(tP,{title:"Storage capacity",children:(0,f.Y)(tM,{database:p,loading:m})}),(0,f.Y)(tP,{title:"How to use the database",children:(0,f.Y)(tF,{activeFile:g})}),(0,f.Y)(tJ,{performPaneOperation:u})]})})}function tJ(e){var n=e.performPaneOperation;return(0,f.Y)(tj.v,{href:ts.ik.REPL_DATABASE,target:"_blank",rel:"noopener",onClick:function(e){e.preventDefault(),n({operation:"open",pane:{type:"docs",data:{url:ts.ik.REPL_DATABASE}}})},iconLeft:(0,f.Y)(tq.A,{}),text:"Learn more in the docs"})}var tQ=t(76860),tX=h.ZU.Object({type:h.ZU.Literal("database")}),t0={Content:function(e){var n=e.options.performPaneOperation;return(0,f.Y)(t$,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,f.Y)(n$.Vx.Provider,{value:{color:ez.LU.blurpleStronger,size:n},children:(0,f.Y)(tQ.A,{})})},getTitle:function(){return"Replit Key-Value Store"},description:"Free, easy-to-use key-value store suitable for unstructured data, caching, session management, fast lookups, and flexible data models",category:nq.bY.CloudServices,decode:function(e){return m.WT.Decode(tX,e)}},t1=t(14075),t2=t(28094),t4=t(11646),t5=t(79071),t8=t(17459),t3=t(29824),t6=t(90001),t7=t(63892),t9=t(4479),re=t(58196),rn=t(65983),rt=new Map,rr=t(96866),ri=t(54468),ro=t(6620),ra=t(10091),rl=(0,M.x)({shadow:{position:"absolute",'&[data-position="top"], &[data-position="bottom"]':{left:0,right:0,height:12},'&[data-position="left"], &[data-position="right"]':{top:0,bottom:0,height:12},'&[data-position="top"]':{top:0,backgroundImage:"linear-gradient(to top, transparent, var(--shadow-color))"},'&[data-position="bottom"]':{bottom:0,backgroundImage:"linear-gradient(to bottom, transparent, var(--shadow-color))"},'&[data-position="left"]':{left:0,backgroundImage:"linear-gradient(to left, transparent, var(--shadow-color))"},'&[data-position="right"]':{right:0,backgroundImage:"linear-gradient(to right, transparent, var(--shadow-color))"}}});function rs(e){var n=e.scrolledAmount,t=e.scrollableAmount,r=e.orientation,i=void 0===r?"vertical":r,o=e.hideEnd,a=e.shadowColor,l=void 0===a?"rgba(2, 2, 3, 0.32)":a;return(0,f.FD)(f.FK,{children:[n>0&&(0,f.Y)("div",{css:rl.shadow,"data-position":"vertical"===i?"top":"left",style:{"--shadow-color":l}}),!(void 0!==o&&o)&&n<t&&(0,f.Y)("div",{css:rl.shadow,"data-position":"vertical"===i?"bottom":"right",style:{"--shadow-color":l}})]})}var rc=t(37407),ru=t(65558),rd=t(20627),rp=t(5445),rf=t(75251),rh=t(19915),rm=(0,M.x)({header:[B.wp.height(36)],description:[B.wp.flex.column,B.wp.gap(8)],divider:[B.wp.backgroundColor.outlineDimmer],package:[B.wp.p(4),B.wp.flex.row,B.wp.align.center,B.wp.border({color:"transparent"}),B.wp.justify.spaceBetween,{"&:hover":{backgroundColor:ez.LU.backgroundHighest}}],packageList:[B.wp.maxHeight(220),B.wp.overflowY("auto")],packageMetadata:[B.wp.flex.growAndShrink(1),B.wp.align.center,B.wp.overflow("hidden"),B.wp.mr(8)],packageName:[B.wp.truncate,B.wp.flex.growAndShrink(1),B.wp.mx(8),{"> a":[B.wp.ml(4),{color:"currentColor",lineHeight:0}]}],packagerRoot:[B.wp.flex.column,B.wp.gap(8)],packager:[B.wp.backgroundColor.backgroundHigher,B.wp.borderRadius(4),B.wp.overflow("hidden")],packagerHeader:[B.wp.pl(4),B.wp.flex.row,B.wp.justify.spaceBetween,B.wp.flex.growAndShrink(1)],packagerHeaderTitle:[B.wp.truncate,B.wp.flex.shrink(1)],packagerEmptyState:[B.wp.p(8),B.wp.align.center,B.wp.backgroundColor.backgroundOverlay,B.wp.borderRadius(0,0,4,4),B.wp.color.foregroundDimmest],dividerInner:[B.wp.p(0),B.wp.m(0),{borderBottom:"1px solid",borderBottomColor:ez.LU.backgroundHighest}]});function rg(e){var n,t,r,i,o,a,l=e.pkg,s=e.uninstall,c=(0,rn.UK)(),u=(t=(0,rn.UK)(),r=(0,A.A)(),o=(i=(0,v._)((0,w.useState)(null!==(n=rt.get("".concat(null==t?void 0:t.id,":").concat(l.name)))&&void 0!==n?n:null),2))[0],a=i[1],(0,w.useEffect)(function(){if((null==t?void 0:t.id)&&l.name){var e,n=l.name;if(!rt.has(n)){var i=(0,re.N)(t.id),o=!1;return(e=(0,y._)(function(){var e;return(0,b.YH)(this,function(l){switch(l.label){case 0:return[4,i.getPackageInfo({id:t.id,name:n,services:r})];case 1:if((e=l.sent())&&"string"!=typeof(null==e?void 0:e.homepageURL)&&delete e.homepageURL,o)return[2];return rt.set("".concat(t.id,":").concat(n),null!=e?e:null),a(null!=e?e:null),[2]}})}),function(){return e.apply(this,arguments)})(),function(){o=!0}}}},[null==t?void 0:t.id,l.name]),o),d=(0,w.useMemo)(function(){var e=(null==u?void 0:u.description)||l.description;if(e&&/<[^>]+>|<\/[^>]+>/.test(e)){var n=document.createElement("DIV");return n.innerHTML=e,(n.textContent||n.innerText||"").trim()}return e},[null==u?void 0:u.description,l.description]),p=(0,t9.A)((null==u?void 0:u.license)||l.license),h=(0,w.useMemo)(function(){if(u){var e;return(0,e7._)((0,K._)({},u),{version:null!==(e=null==u?void 0:u.version)&&void 0!==e?e:l.spec,name:(null==c?void 0:c.id)==="nix"&&(null==u?void 0:u.prettyName)||l.name,license:p,description:d})}return l},[null==c?void 0:c.id,d,u,p,l]),m=(0,ro.n5)(),g=(0,ro.BL)(),S=(0,w.useMemo)(function(){return m.some(function(e){return e.pkgs.some(function(e){return e.name===l.name})})},[l.name,m]),Y=(0,w.useMemo)(function(){return!!(null!==g&&g.pkgs.find(function(e){return e.name===l.name}))},[g]);return(0,f.FD)(F.S,{css:rm.package,tag:"li",children:[(0,f.FD)(F.S,{css:rm.packageMetadata,row:!0,children:[(0,f.Y)(rp.A,{}),(0,f.FD)(I.EY,{css:rm.packageName,children:[h.name,h.homepageURL?(0,f.Y)("a",{href:h.homepageURL,target:"_blank",children:(0,f.Y)(ru.A,{})}):null]}),h.version?(0,f.Y)(I.EY,{color:"dimmer",children:h.version}):null]}),(0,f.FD)(F.S,{css:[B.wp.gap(4),B.wp.align.center],row:!0,children:[h.description||h.license?(0,f.Y)(rc.m_,{tooltip:(0,f.FD)("div",{children:[(0,f.Y)("div",{children:h.description}),h.license?(0,f.Y)(I.EY,{variant:"small",color:"dimmer",children:h.license}):null]}),children:(0,f.Y)(rd.A,{})}):null,(0,f.Y)(ev.K0,{alt:"Uninstall",disabled:Y||S,onClick:function(){s()},children:(0,f.Y)(rh.A,{})})]})]})}function rv(e){var n=e.onAddPackage,t=e.name,r=e.id,i=e.addText;return(0,f.FD)(F.S,{css:rm.packagerHeader,children:[(0,f.Y)(I.EY,{css:rm.packagerHeaderTitle,id:r,children:t}),(0,f.Y)(ev.K0,{alt:i,onClick:n,children:(0,f.Y)(rf.A,{})})]})}function rw(e){var n=e.packages,t=e.labelId,r=(0,rn.UK)(),i=(0,ro.q3)(),o=(0,w.useRef)(null),a=(0,ef.Te)({count:n.length,getScrollElement:function(){return o.current},estimateSize:function(){return 34},overscan:15,measureElement:function(e){return e.getBoundingClientRect().height}}),l=(0,v._)((0,w.useState)(0),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(0),2),d=u[0],p=u[1],h=a.getTotalSize(),m=(0,t6.A)(function(e){return p(e.height)});return r?(0,f.Y)(F.S,{css:B.wp.position.relative,innerRef:m,children:(0,f.FD)(F.S,{innerRef:o,css:rm.packageList,onScroll:function(e){c(e.target.scrollTop)},children:[(0,f.Y)(rs,{scrolledAmount:s,scrollableAmount:h-d,hideEnd:!0}),(0,f.Y)(F.S,{style:{height:h},tag:"ul","aria-labelledby":t,children:a.getVirtualItems().map(function(e){var t=n[e.index];return(0,f.Y)(rg,{pkg:t,uninstall:function(){i({id:r.id,pkg:t})}},t.name)})})]})}):null}var ry=new Map;function rb(e){var n=e.onAddPackage,t=e.openFile,r=(0,rn.UK)(),i=(0,ro.H_)(null==r?void 0:r.id),o=(0,w.useMemo)(function(){return i.filter(function(e){return e.name}).sort(function(e,n){return e.name&&n.name?e.name.localeCompare(n.name):0})},[i]),a=(0,w.useId)(),l=(0,w.useCallback)(function(){n(null==r?void 0:r.id)},[n,null==r?void 0:r.id]),s=(null==r?void 0:r.id)==="nix",c=(0,w.useMemo)(function(){return null==r?void 0:r.packagerFiles.filter(function(e){return!e.includes("lock")&&!e.endsWith("/")})},[null==r?void 0:r.packagerFiles]),u=(0,t3.om)(),d=(0,v._)((0,w.useState)(r?ry.get(r.id):void 0),2),p=d[0],h=d[1];return((0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e,n,t,i,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:if(!c||!r)return[2];e=!0,n=!1,t=void 0,s.label=1;case 1:s.trys.push([1,6,7,8]),i=c[Symbol.iterator](),s.label=2;case 2:if(e=(o=i.next()).done)return[3,5];return a=o.value,[4,u.readFile(a)];case 3:if("content"in s.sent())return ry.set(r.id,a),h(a),[3,5];s.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return l=s.sent(),n=!0,t=l,[3,8];case 7:try{e||null==i.return||i.return()}finally{if(n)throw t}return[7];case 8:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[r,u,c]),r)?(0,f.FD)(F.S,{css:rm.packagerRoot,children:[(0,f.Y)(F.S,{css:rm.packager,children:(0,f.Y)(_.A,{defaultExpanded:!0,headerContent:(0,f.Y)(rv,{id:a,name:r.name,addText:"Add new ".concat(s?"dependency":"package"),onAddPackage:l}),children:(0,f.FD)(f.FK,{children:[(0,f.Y)(rA,{css:rm.divider}),o.length>0?(0,f.Y)(rw,{packages:o,labelId:a}):(0,f.FD)(F.S,{css:rm.packagerEmptyState,children:["No ",s?"dependencies":"packages"," found"]})]})})}),(0,f.Y)(eg.$n,{colorway:"primary",variant:"outlined",text:"Add new ".concat(s?"dependency":"package"),iconLeft:(0,f.Y)(rf.A,{}),onClick:l}),p?(0,f.Y)(eg.$n,{variant:"nofill",text:"Open ".concat(p),iconLeft:(0,f.Y)(rp.A,{}),onClick:function(){(0,t7.u4)(t4.AZ.DEPENDENCIES_PACKAGER_FILE_OPENED,{packagerId:r.id,file:p}),t({path:p})}}):null]}):null}function rS(e){var n=e.configs,t=e.description,r=e.title,i=e.openFile,o=(0,t8._)(e,["configs","description","title","openFile"]);return(0,f.FD)(F.S,{children:[(0,f.Y)(F.S,{css:rm.header,row:!0,justify:"space-between",children:(0,f.Y)(I.Y9,{variant:"subheadDefault",level:2,children:r})}),(0,f.FD)(F.S,{gap:8,children:[(0,f.Y)(ra.s,{color:"dimmer",css:rm.description,children:t}),n.length>0?n.map(function(e){return(0,f.Y)(ri.A,{config:e,children:(0,f.Y)(rb,(0,K._)({openFile:i},o))},e.id)}):null]})]})}function rY(e){var n=(0,rr.J)().configs,t=(0,w.useMemo)(function(){return n.find(function(e){return"nix"===e.id})},[n]);return t?(0,f.Y)(rS,(0,e7._)((0,K._)({title:"System Dependencies",description:(0,f.FD)("span",{children:["Add additional support to your environment with"," ",(0,f.Y)("a",{href:"https://search.nixos.org/packages",target:"_blank",children:"Nix packages"}),"."]})},e),{configs:[t]})):null}var rA=function(){return(0,f.Y)("div",{css:rm.dividerInner})},rC=t(30536),rx=t(27899);function rk(e){var n=e.openFile,t=e.openConsole,r=e.openNixTab,i=(0,rr.J)().configs,o=(0,w.useMemo)(function(){return i.filter(function(e){return"nix"!==e.id})},[i]),a=(0,v._)((0,w.useState)({mode:"Overview"}),2),l=a[0],s=a[1];switch((0,t5.M)(t4.AZ.DEPENDENCIES_TAB_VIEWED,{tab:"import"}),l.mode){case"Overview":return(0,f.Y)(rx._0,{children:(0,f.Y)(rS,{title:"Manage Imports",configs:o,openFile:n,onAddPackage:function(e){s({mode:"Search",initialPackager:e})},description:(0,f.FD)(f.FK,{children:[(0,f.Y)(I.EY,{children:"Packagers manage language-specific dependencies for your project. These can be imported directly from your codebase."}),0===o.length?(0,f.Y)(I.EY,{color:"dimmest",children:(0,f.FD)("p",{children:["You don't currently have any packagers. Add language support by"," ",(0,f.Y)("a",{href:"",onClick:function(e){e.preventDefault(),r()},children:"adding a System Module"}),"."]})}):null]})})});case"Search":return(0,f.Y)(rC.Y,{onBack:function(){return s({mode:"Overview"})},initialCategory:l.initialPackager,openConsole:t})}}var r_=t(49547),rD=t(96415),rE=(0,M.x)({systemModules:[B.wp.flex.column,B.wp.gap(8)],sectionHeader:[B.wp.height(36)]});function rR(e){var n=e.openFile,t=e.openConsole,r=(0,t1.G)().modules,i=(0,v._)((0,w.useState)({mode:"Overview"}),2),o=i[0],a=i[1];if((0,t5.M)(t4.AZ.DEPENDENCIES_TAB_VIEWED,{tab:"nix"}),!r)return null;switch(o.mode){case"Overview":return(0,f.FD)(rx._0,{children:[(0,f.FD)(F.S,{children:[(0,f.Y)(F.S,{css:rE.sectionHeader,row:!0,justify:"space-between",children:(0,f.Y)(I.Y9,{variant:"subheadDefault",level:2,children:"System Modules"})}),(0,f.FD)(F.S,{css:rE.systemModules,children:[(0,f.Y)(ra.s,{color:"dimmer",children:"Modules combine support for programming languages, formatters, and packagers. These provide the foundation for your App."}),(0,f.Y)(r_.A,{modules:r}),(0,f.Y)(eg.$n,{text:"Add new module",variant:r.length>0?"outlined":"default",colorway:"primary",iconLeft:(0,f.Y)(rf.A,{}),onClick:function(){a({mode:"Search",initialCategory:"Modules"})}}),(0,f.Y)(eg.$n,{text:"Open .replit",variant:"nofill",iconLeft:(0,f.Y)(rD.A,{}),onClick:function(){n({path:".replit"})}})]})]}),(0,f.Y)(rY,{onAddPackage:function(){a({mode:"Search",initialCategory:"Packages"})},openFile:n}),(0,f.Y)(tj.v,{href:ts.ik.DEPENDENCY_MANAGEMENT,target:"_blank",rel:"noopener",variant:"underlinedOnHover",colorway:"primary",iconRight:(0,f.Y)(ru.A,{}),text:"Learn more about Nix and .replit configuration"})]});case"Search":return(0,f.Y)(rC.m,{onBack:function(){return a({mode:"Overview"})},initialCategory:o.initialCategory,openConsole:t})}}var rI=t(11764),rF=t(28928),rT=(0,M.x)({root:[B.wp.overflow("hidden"),B.wp.flex.growAndShrink(1)],content:[B.wp.flex.growAndShrink(1),B.wp.overflowY("auto")]});function rP(e){var n,t=e.openFile,r=e.openConsole,i=e.initialTab,o=(0,rr.J)(),a=o.configs,l=o.loading,s=(0,t1.G)(),c=s.modules,u=s.configs,d=(0,t2.A)(),p=(0,w.useMemo)(function(){return a.filter(function(e){return"nix"!==e.id})},[a]).length>0,h=(0,v._)((0,w.useState)(p?void 0===i?"import":i:"nix"),2),m=h[0],g=h[1];return((0,w.useEffect)(function(){p||g("nix")},[p,l]),a&&c&&u&&d&&!l)?("import"===m?n=(0,f.Y)(rk,{openFile:t,openConsole:r,openNixTab:function(){return g("nix")}}):"nix"===m&&(n=(0,f.Y)(rR,{openFile:t,openConsole:r})),(0,f.FD)(F.S,{css:rT.root,children:[(0,f.Y)(rI.P,{tabs:[{value:"import",label:"Imports",icon:(0,f.Y)(rp.A,{})},{value:"nix",label:"System (Advanced)",icon:(0,f.Y)(rF.A,{})}],value:m,onClick:function(e){g(e.value)}}),(0,f.Y)(F.S,{css:rT.content,children:n})]})):(0,f.Y)(rx.Gu,{})}var rL=t(35428),rU=t(92228),rN=h.ZU.Object({type:h.ZU.Literal("dependencies"),initialTab:h.ZU.Optional(h.ZU.Union([h.ZU.Literal("import"),h.ZU.Literal("nix")]))}),rO={Content:function(e){var n=e.options.performPaneOperation,t=e.pane.initialTab,r=(0,w.useCallback)(function(e){return n({operation:"open",secondary:!0,pane:{type:"codeEditor",data:e}})},[n]),i=(0,w.useCallback)(function(){n({operation:"open",secondary:!0,pane:{type:"runnerOutput"}})},[n]);return(0,f.Y)(rP,{openFile:r,openConsole:i,initialTab:t})},Icon:function(e){var n=e.size;return(0,f.Y)(rU.A,{size:n})},getTitle:function(){return"Dependencies"},description:"Install, upgrade, and manage dependencies for your environment, build system, and application runtime",category:rL.b.WorkspaceFeatures,decode:function(e){return m.WT.Decode(rN,e)}},rM=t(58127),rB=h.ZU.Object({type:h.ZU.Literal("devdocs")}),rH={Content:function(e){return(0,f.Y)("iframe",{title:"DevDocs",height:"100%",src:"https://devdocs.io"})},Icon:function(e){var n=e.size;return(0,f.Y)(n$.Vx.Provider,{value:{color:ez.LU.foregroundDimmer,size:n},children:(0,f.Y)(rM.A,{})})},getTitle:function(){return"DevDocs"},getTitlePill:function(){return{text:"Staff-only",colorway:"warning"}},description:"Documentation for common software platforms & APIs",category:nq.bY.Other,decode:function(e){return m.WT.Decode(rB,e)}},rz=t(8300),rW=t(52147),rG=t(94146),rV=t(90629),rj=function(e){var n=e.context,t=e.gitService,r=e.result,i=e.data;rV.v4(function(e){e.setTag("service","git"),e.setTag("context",n),e.setExtra("env",t.getEnv()),i&&rV.l7("data",i),rV.Cp(r.error)})},rZ=function(){var e=(0,y._)(function(e,n,t,r){var i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:if("generatedFile"===r.type)return[2,""];if("git"!==r.type)return[3,2];return i=r.revision,[4,e.getFileContents({path:t,revision:i,convertToBase64:(0,n7.FN)(t)})];case 1:if((o=l.sent()).error)throw rj({context:"use-file-at-revision-fetch-content",gitService:e,result:o,data:{path:t,revision:i}}),o.error;return[2,o.content||""];case 2:return[4,n.readFile(t,{fromDisk:!0})];case 3:if((a=l.sent()).error)throw a.error;return[2,a.content.toString("utf8")]}})});return function(n,t,r,i){return e.apply(this,arguments)}}();let rq=function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,v._)((0,w.useState)(null),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(!0),2),s=l[0],c=l[1],u=(0,A.A)().fs,d=(0,rG.A)((t=(0,y._)(function(t){var r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:c(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,rZ(t,u,e,n)];case 2:return r=o.sent(),c(!1),[2,{content:r,error:null}];case 3:return i=o.sent(),c(!1),[2,{content:null,error:i}];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),[e,n,u],r);return(0,w.useEffect)(function(){d&&(d.error?a(null):a(d.content))},[d]),{fileContent:o,loading:s}};var rK=t(13337),r$=t(11797),rJ="rgba(180, 0, 0, 0.125)",rQ="rgba(0, 180, 0, 0.125)",rX=nn.Lz.theme({"&.cm-merge-b .cm-changedLine":{background:"rgba(0, 180, 0, 0.075)"},"&.cm-merge-a .cm-changedLine":{background:"rgba(180, 0, 0, 0.075)"},"&.cm-merge-b .cm-changedLineGutter":{background:rQ},"&.cm-merge-a .cm-changedLineGutter":{background:rJ},"&.cm-merge-b .cm-changedText":{background:rQ,outline:"solid 1px ".concat(rQ),borderRadius:"2px"},"&.cm-merge-a .cm-changedText":{background:rJ,outline:"solid 1px ".concat(rJ),borderRadius:"2px"},".cm-collapsedLines":{color:ez.LU.accentPrimaryStrongest,background:ez.LU.accentPrimaryDimmest,transition:"background 250ms ease","&:hover":{background:ez.LU.accentPrimaryDimmer}}}),r0=[nn.Lz.baseTheme({".cm-scroller":{height:"100% !important",overflowY:"auto !important"}}),nn.Lz.theme({".cm-scroller":{height:"auto !important",overflowY:"visible !important"}})],r1=[ne.Nb.highest(r0),rX],r2=t(76724),r4=t(52378);function r5(e){var n,t,r,i=e.a,o=e.b,a=e.style,l=e.className,s=(0,t8._)(e,["a","b","style","className"]),c=(0,v._)((0,w.useState)(null),2),u=c[0],d=c[1],p=(0,v._)((0,w.useState)(null),2),h=p[0],m=p[1],g=(0,w.useRef)(!1),y=(0,e$.A)(s),b=(0,e$.A)(i.doc),S=(0,e$.A)(o.doc),Y=(0,ni.pm)((0,e7._)((0,K._)({},i),{readOnly:!0})),A=(0,ni.pm)((0,e7._)((0,K._)({},o),{readOnly:!0})),C=(n=(0,v._)((0,w.useState)(),2)[1],(0,w.useCallback)(function(e){n(function(){throw e})},[])),x=s.orientation,k=s.revertControls,_=s.renderRevertControl,D=s.collapseUnchanged,E=s.gutter,R=s.highlightChanges,I=void 0!==D,F=null==D?void 0:D.margin,T=null==D?void 0:D.minSize,P=null!==(t=null==h?void 0:h.a)&&void 0!==t?t:null,L=null!==(r=null==h?void 0:h.b)&&void 0!==r?r:null;return(0,ni.vO)(),(0,w.useEffect)(function(){var e=function(e){C(e)};if(u){var n=null;try{n=new r$.SV((0,e7._)((0,K._)({},y.current),{parent:u,a:{doc:b.current,extensions:[nn.Lz.exceptionSink.of(e),r1].concat((0,q._)(Y))},b:{doc:S.current,extensions:[nn.Lz.exceptionSink.of(e),r1].concat((0,q._)(A))}}))}catch(n){e(n)}return n&&(m(n),g.current=!0),function(){if(n){m(null);try{n.destroy()}catch(n){e(n)}}}}},[u]),(0,w.useEffect)(function(){P&&!g.current&&P.dispatch({changes:{from:0,to:P.state.doc.length,insert:i.doc}})},[P,i.doc]),(0,w.useEffect)(function(){L&&!g.current&&L.dispatch({changes:{from:0,to:L.state.doc.length,insert:o.doc}})},[L,o.doc]),(0,w.useEffect)(function(){h&&!g.current&&r8(h,y.current.collapseUnchanged)},[h,y,i.doc,o.doc]),(0,w.useEffect)(function(){if(h&&!g.current){var e=I?{margin:F,minSize:T}:void 0;h.reconfigure({orientation:x,revertControls:k,renderRevertControl:_,collapseUnchanged:e,gutter:E,highlightChanges:R}),e&&r8(h,e)}},[h,x,k,_,I,F,T,E,R]),(0,r2.O)(P),(0,r2.O)(L),(0,w.useEffect)(function(){g.current=!1}),(0,f.FD)(f.FK,{children:[(0,f.Y)("div",{ref:d,className:l,style:a}),(0,f.Y)(r4.OE,{view:P}),(0,f.Y)(r4.OE,{view:L})]})}function r8(e,n){e&&n&&(e.reconfigure({collapseUnchanged:void 0}),e.reconfigure({collapseUnchanged:(0,K._)({},n)}))}var r3=(0,M.x)({container:[B.wp.width(60),B.wp.height(24),B.wp.display.flex,B.wp.center,B.wp.borderRadius(4),B.wp.fontSize(ez.LU.fontSizeSmall)]});function r6(e){var n,t,r;switch(e.type){case rz.PX.ADDED:case rz.PX.UNTRACKED:n="Added",t=ez.LU.greenDimmest,r=ez.LU.greenStrongest;break;case rz.PX.MODIFIED:n="Modified",t=ez.LU.yellowDimmest,r=ez.LU.yellowStrongest;break;case rz.PX.DELETED:n="Deleted",t=ez.LU.redDimmest,r=ez.LU.redStrongest;break;case rz.PX.RENAMED:n="Renamed",t=ez.LU.tealDimmest,r=ez.LU.tealStrongest;break;case rz.PX.COPIED:n="Copy",t=ez.LU.limeDimmest,r=ez.LU.limeStrongest;break;default:return null}return(0,f.Y)(F.S,{style:{backgroundColor:t,color:r},css:r3.container,children:(0,f.Y)("span",{children:n})})}function r7(e){var n,t,r;switch(e.type){case"ADDED":n="Added",t=ez.LU.greenDimmest,r=ez.LU.greenStrongest;break;case"MODIFIED":n="Modified",t=ez.LU.yellowDimmest,r=ez.LU.yellowStrongest;break;case"DELETED":n="Deleted",t=ez.LU.redDimmest,r=ez.LU.redStrongest;break;case"RENAMED":n="Renamed",t=ez.LU.tealDimmest,r=ez.LU.tealStrongest;break;case"COPIED":n="Copy",t=ez.LU.limeDimmest,r=ez.LU.limeStrongest;break;default:return null}return(0,f.Y)(F.S,{style:{backgroundColor:t,color:r},css:r3.container,children:(0,f.Y)("span",{children:n})})}var r9=t(18890),ie=t(53723),it=t(54572),ir=t(54239),ii=[{"& > span:first-child-of-type":[B.wp.flex.grow(1),B.wp.textAlign.left]},{"& > span":[B.wp.flex.shrink(1)]},B.wp.height("auto"),B.wp.p(8),B.wp.fontWeight.medium,B.wp.backgroundColor.backgroundHigher,B.wp.flex.row,B.wp.align.center,B.wp.justify.spaceBetween,B.wp.overflow("hidden"),B.wp.cursor.pointer],io=(0,M.x)({buttonFolded:[ii,B.wp.borderRadius(8)],buttonUnfolded:[ii,B.wp.borderRadius(8,8,0,0)],rowContainer:[B.wp.position.relative,B.wp.zIndex(1),B.wp.overflow("hidden")],diffContainer:[B.wp.flex.grow(1),B.wp.borderRadius(8)],bodyContainer:[B.wp.borderRadius(0,0,8,8),B.wp.p(8),B.wp.display.flex,B.wp.flex.row,B.wp.flex.wrap,B.wp.align.center,B.wp.justify.center,B.wp.backgroundColor.backgroundDefault,B.wp.border({color:ez.LU.outlineDimmer,direction:"bottom"}),B.wp.border({color:ez.LU.outlineDimmer,direction:"left"}),B.wp.border({color:ez.LU.outlineDimmer,direction:"right"})],noChangesContainer:[B.wp.py(8),B.wp.px(8),B.wp.center,B.wp.width("100%")],innerContainer:[B.wp.display.flex,B.wp.align.center],splitContainer:[B.wp.p(8),B.wp.display.flex,B.wp.flex.row,B.wp.justify.spaceBetween,B.wp.maxWidth("100%"),B.wp.align.center],splitChild:[{flexBasis:"50%"}],buttonGroupItem:[B.wp.width(64),B.wp.height(32)]}),ia=function(e){var n=e.value,t=e.onChange;return(0,f.FD)(ie.e2,{name:"SplitOrUnifiedDiff",value:n,onChange:t,row:!0,children:[(0,f.Y)(F.S,{css:io.buttonGroupItem,children:(0,f.Y)(ie.$O,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,f.Y)(F.S,{css:io.buttonGroupItem,children:(0,f.Y)(ie.$O,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},il=function(e){var n=e.folded,t=void 0!==n&&n,r=e.setFolded,i=e.diff,o="".concat(i.initial.path,"/").concat(i.initial.filename),a="".concat(i.final.path,"/").concat(i.final.filename);return(0,f.FD)(F.S,{css:t?io.buttonFolded:io.buttonUnfolded,onClick:function(){return r(!t)},children:[(0,f.FD)(F.S,{css:[io.rowContainer,B.wp.flex.shrink(1)],align:"center",row:!0,gap:8,children:["RENAMED"===i.status||"COPIED"===i.status?(0,f.FD)(f.FK,{children:[(0,f.Y)(te.A,{path:o}),(0,f.Y)(I.EY,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,f.Y)(I.EY,{multiline:!1,color:"dimmest",css:[B.wp.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,f.Y)(tf.A,{}),(0,f.Y)(te.A,{path:a}),(0,f.Y)(I.EY,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,f.Y)(I.EY,{multiline:!1,color:"dimmest",css:[B.wp.fontWeight.normal],children:i.final.path})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)(te.A,{path:a}),(0,f.Y)(I.EY,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,f.Y)(I.EY,{multiline:!1,color:"dimmest",css:[B.wp.fontWeight.normal],children:i.final.path})]}),(0,f.Y)(D.r,{textToCopy:a,tooltipText:"Copy Full Path",tooltipPlacement:"bottom-end"})]}),(0,f.FD)(F.S,{css:io.rowContainer,align:"center",row:!0,gap:8,children:[(0,f.Y)(r7,{type:i.status}),(0,f.Y)(ev.K0,{alt:t?"Collapse diff":"Expand diff",onClick:function(){return r(!t)},children:t?(0,f.Y)(it.A,{}):(0,f.Y)(ir.A,{})})]})]})},is=function(e){var n=e.diff,t=e.splitOrUnified,r=e.extensions;return"Split"===t?(0,f.Y)(r5,{a:{filePath:n.initial.filename,doc:n.initial.content},b:{filePath:n.final.filename,doc:n.final.content,extensions:r},collapseUnchanged:{},style:{width:"100%"}}):(0,f.Y)(ni.Ay,{filePath:n.final.filename,initialDoc:n.final.content,extensions:[rK.X.of(ne.EY.of(n.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},ic=function(e){return(0,n7.FN)(e)?"media":(0,n7.m6)(e)?"ot":"binary"},iu=function(e){var n=e.content,t=e.type,r=e.filename,i=e.extensions;switch(t){case"media":return(0,f.Y)(F.S,{css:[{display:"flex",height:"100%"}],children:(0,f.Y)(r9.jM,{src:(0,r9.p4)(n,(0,n7.P7)(r)),mime:(0,n7.P7)(r),fileName:r})});case"ot":return(0,f.Y)(ni.Ay,{filePath:r,initialDoc:n,readOnly:!0,style:{width:"100%"},extensions:i});default:return(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},id=function(e){var n=e.diff,t=e.splitOrUnified,r=e.extensions;if(n.loading)return(0,f.Y)(F.S,{css:io.noChangesContainer,children:(0,f.Y)(tn.A,{size:20})});if(n.initial.content===n.final.content)return(0,f.Y)(F.S,{css:io.noChangesContainer,children:(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===n.status)return(0,f.Y)(F.S,{css:io.noChangesContainer,children:(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var i=ic(n.initial.filename),o=ic(n.final.filename);if("ADDED"===n.status)switch(o){case"media":return(0,f.Y)(F.S,{css:io.noChangesContainer,children:(0,f.Y)(F.S,{css:io.innerContainer,children:(0,f.Y)(r9.jM,{src:(0,r9.p4)(n.final.content,(0,n7.P7)(n.final.filename)),mime:(0,n7.P7)(n.final.filename),fileName:n.final.filename})})});case"ot":return(0,f.Y)(F.S,{css:io.noChangesContainer,children:(0,f.Y)(ni.Ay,{filePath:n.final.filename,initialDoc:n.final.content,readOnly:!0,style:{width:"100%"},extensions:r})});default:return(0,f.Y)(F.S,{css:io.noChangesContainer,children:(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"binary"===i&&"binary"===o?(0,f.Y)(F.S,{css:io.noChangesContainer,children:(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}):"ot"===i&&"ot"===o?(0,f.Y)(is,{diff:n,splitOrUnified:t,extensions:r}):(0,f.FD)(F.S,{css:io.splitContainer,children:[(0,f.Y)(F.S,{css:io.splitChild,align:"center",justify:"center",children:(0,f.Y)(iu,{content:n.initial.content,type:i,filename:n.initial.filename,extensions:r})}),(0,f.Y)(F.S,{css:io.splitChild,children:(0,f.Y)(iu,{content:n.final.content,type:o,filename:n.final.filename,extensions:r})})]})},ip=function(e){var n=e.diff,t=e.folded,r=e.setFolded,i=e.splitOrUnified;return(0,f.FD)(F.S,{css:io.diffContainer,children:[(0,f.Y)(il,{folded:t,setFolded:r,diff:n}),t?null:(0,f.Y)(eo.ui,{css:io.bodyContainer,elevated:!0,children:(0,f.Y)(id,{diff:n,splitOrUnified:i})})]},n.id)},ih=t(69596),im=t(5968),ig=h.ZU.Object({type:h.ZU.Literal("git"),revision:h.ZU.String()}),iv=h.ZU.Object({type:h.ZU.Literal("fs")}),iw=h.ZU.Object({type:h.ZU.Literal("generatedFile"),content:h.ZU.String()}),iy=h.ZU.Object({left:h.ZU.Object({path:h.ZU.String(),data:h.ZU.Union([ig,iv,iw])}),right:h.ZU.Object({path:h.ZU.String(),data:h.ZU.Union([ig,iv,iw])})}),ib=h.ZU.Object({type:h.ZU.Literal("patch"),diff:rW.Zw}),iS=h.ZU.Object({type:h.ZU.Literal("diff"),data:h.ZU.Union([iy,h.ZU.Array(iy),ib])}),iY=(0,M.x)({container:[B.wp.p(8)],singleDiffWrapper:[B.wp.width("100%"),B.wp.backgroundColor.backgroundHigher,B.wp.borderRadius(4),B.wp.mb(8)],accordionBody:[B.wp.p(4),B.wp.border({direction:"x",width:1,color:ez.LU.backgroundHigher}),B.wp.border({direction:"bottom",width:1,color:ez.LU.backgroundHigher}),B.wp.backgroundColor.backgroundDefault,B.wp.borderRadius(0,0,4,4)]});function iA(e){var n=e.left,t=e.right,r=e.splitOrUnified,i=(0,v._)((0,w.useState)(!0),2),o=i[0],a=i[1],l=rq(n.path,n.data),s=l.fileContent,c=l.loading,u=rq(t.path,t.data),d=u.fileContent,p=u.loading,h="generatedFile"===n.data.type?n.data.content:null,m="generatedFile"===t.data.type?t.data.content:null,g=s||h,y=d||m,b=(0,w.useMemo)(function(){return null===g&&null!==y?rz.Os.ADDED:null!==g&&null===y?rz.Os.DELETED:rz.Os.MODIFIED},[g,y]),S={id:"".concat(n.path,"-").concat(t.path),status:b,loading:c||p,initial:{filename:(0,n7.WP)(n.path),path:(0,n7._6)(n.path),content:null!=g?g:""},final:{filename:(0,n7.WP)(t.path),path:(0,n7._6)(t.path),content:null!=y?y:""}};return(0,f.Y)(F.S,{css:iY.singleDiffWrapper,children:(0,f.Y)(_.A,{expanded:o,onClick:function(){return a(function(e){return!e})},headerContent:(0,f.FD)(F.S,{row:!0,gap:8,children:[(0,f.Y)(te.A,{path:n.path}),(0,f.Y)(I.EY,{multiline:!1,children:n.path})]}),children:(0,f.Y)(F.S,{css:iY.accordionBody,children:(0,f.Y)(id,{splitOrUnified:r,diff:S})})})})}function iC(e){var n=e.patch;return(0,f.Y)(F.S,{css:iY.container,children:(0,f.Y)(ih.A,{patch:n.diff,compressed:!1,background:null})})}var ix={Content:function(e){var n=e.pane.data,t=(0,v._)((0,w.useState)("Split"),2),r=t[0],i=t[1],o=(0,w.useMemo)(function(){return Array.isArray(n)?n:[n]},[n]);return"type"in n&&"patch"===n.type?(0,f.Y)(iC,{patch:n}):(0,f.FD)(F.S,{gap:8,css:iY.container,children:[(0,f.Y)(ia,{value:r,onChange:i}),(0,f.Y)(F.S,{children:o.map(function(e){return"left"in e&&"right"in e?(0,f.Y)(iA,{left:e.left,right:e.right,splitOrUnified:r},e.left.path+e.right.path):null})})]})},Icon:function(){return(0,f.Y)(im.A,{})},getTitle:function(e){var n=e.data,t=Array.isArray(n)?n:[n];if(1===t.length){var r=t[0];if("type"in r&&"patch"===r.type){var i=r.diff,o=i.labelA,a=i.labelB;return o===a?"Diff: ".concat((0,n7.WP)(null!=o?o:"")):"Diff: ".concat(o," - ").concat(a)}if("left"in r&&"right"in r)return r.left.path===r.right.path?"Diff: ".concat((0,n7.WP)(r.left.path)):"Diff: ".concat((0,n7.WP)(r.left.path)," - ").concat((0,n7.WP)(r.right.path))}return"Diff: ".concat(t.length," files")},category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(iS,e)}},ik=t(96907),i_=t.n(ik);function iD(){var e=(0,$._)(["\n  query WorkspaceDraw($id: String!) {\n    currentUser {\n      id\n      username\n    }\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n      }\n    }\n  }\n"]);return iD=function(){return e},e}var iE={},iR=(0,J.J1)(iD()),iI=t(96241),iF=t(7524),iT=function(e){return e.reduce(function(e,n){return e[n.id]=n,e},{})};let iP=function(e,n,t){if(!e)return[];var r,i=n(e.getSceneElementsIncludingDeleted()),o=e.getAppState();return(r=t.reduce(function(e,n){var t,r,a;return n.id===(null===(t=o.editingElement)||void 0===t?void 0:t.id)||n.id===(null===(r=o.resizingElement)||void 0===r?void 0:r.id)||n.id===(null===(a=o.draggingElement)||void 0===a?void 0:a.id)||(i[n.id]&&i[n.id].version>n.version?e.push(i[n.id]):i[n.id]&&i[n.id].version===n.version&&i[n.id].versionNonce!==n.versionNonce&&i[n.id].versionNonce<n.versionNonce?e.push(i[n.id]):e.push(n),delete i[n.id]),e},[])).concat.apply(r,(0,q._)(Object.values(i)))},iL=function(){var e,n,t=new Promise(function(t,r){e=t,n=r});return t.resolve=e,t.reject=n,t};var iU=t(938),iN=t(12722),iO=t(52670),iM=(0,nD.AH)(".excalidraw.excalidraw-modal-container.excalidraw--mobile{margin-top:",iO.uF-1,"px;}");function iB(e){var n,r,i,o,a,l,s=e.fs,c=e.filePath,u=(0,v._)((0,w.useState)(void 0),2),d=u[0],p=u[1],h=(0,iI.A)(),m=(0,w.useRef)(function(e){return(0,q._)(e)}),g=(0,w.useRef)(function(e){return -1}),S=(0,w.useRef)(),Y=(0,w.useRef)(iL()),A=(0,e5.I)(function(e){return function(n){return e.excalidraw.update.rpc(n)}},[]);(0,w.useEffect)(function(){Promise.all([t.e(9248),t.e(5514)]).then(t.t.bind(t,5514,23)).then(function(e){m.current=function(n){return n.filter(function(n){return n.isDeleted||!e.isInvisiblySmallElement(n)})},g.current=e.getSceneVersion,p(e.Excalidraw)})},[]);var C=(0,w.useCallback)(function(){return S.current},[]),x=(n={variables:{id:(0,n_.A)()},ssr:!1},r=(0,K._)({},iE,n),Q.I(iR,r)),k=x.data,_=x.loading,D=(null==k?void 0:null===(l=k.currentUser)||void 0===l?void 0:l.username)||"",E=(0,iN.D)().isDarkColorScheme,R=(0,iU.Q4)(),I=(0,iF.A)(),T=null==I?void 0:I.color,P=(0,v._)((0,w.useState)(new Map),2),L=P[0],U=P[1],N=(0,v._)((0,w.useState)(-1),2),O=N[0],M=N[1],B=(0,w.useRef)((0,nF.A)()).current;(0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!k||!k.currentUser)return[2];return[4,Y.current];case 1:return t.sent(),e=C().getAppState().collaborators,n=new Map,R.forEach(function(t){if(t.username!==(null==k?void 0:null===(r=k.currentUser)||void 0===r?void 0:r.username)){var r,i=e.get(t.username)||{};n.set(t.username,(0,e7._)((0,K._)({},i),{username:t.username,color:{background:t.color,foreground:t.color}}))}}),C().updateScene({collaborators:n}),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[k,R,C]);var H=(0,w.useCallback)((i=(0,y._)(function(e,n){var t,r,i,o,a,l;return(0,b.YH)(this,function(s){n||(e=e.filter(function(e){return!L.has(e.id)||e.version>L.get(e.id)})),t=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)l=a.value,L.set(l.id,l.version),U(new Map(L))}catch(e){r=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}return null==A||A({paneId:B,path:c,$kind:"elements",elements:JSON.stringify(e)}),[2]})}),function(e,n){return i.apply(this,arguments)}),[A,B,c,L]);(0,nc.b)((o=(0,y._)(function(e,n){var t,r,i,o,a,l,s,u,d,p,f,h,m,v,w,y,S;return(0,b.YH)(this,function(b){switch(b.label){case 0:return t=n.signal,r=e.excalidraw.listen.subscribe({paneId:B,path:c},{signal:t}).resReadable,[4,Y.current];case 1:b.sent(),i=!1,o=!1,b.label=2;case 2:b.trys.push([2,7,8,13]),l=(0,e6._)(r),b.label=3;case 3:return[4,l.next()];case 4:if(!(i=!(s=b.sent()).done))return[3,6];if(!(u=s.value).ok)return[2];"collaborator"===u.payload.$kind?(d=C().getAppState().collaborators,f=(p=u.payload).pointer,h=p.selectedElementIds,d.set(u.payload.username,(0,e7._)((0,K._)({},d.get(u.payload.username)),{pointer:f,selectedElementIds:h,username:u.payload.username})),C().updateScene({collaborators:d})):"elements"===u.payload.$kind?(m=JSON.parse(u.payload.elements),v=iP(C(),iT,m),(w=g.current(v))>O&&(M(w),C().updateScene({elements:v}))):"leave"===u.payload.$kind&&((y=C().getAppState().collaborators).delete(u.payload.username),C().updateScene({collaborators:y})),b.label=5;case 5:return i=!1,[3,3];case 6:return[3,13];case 7:return S=b.sent(),o=!0,a=S,[3,13];case 8:if(b.trys.push([8,,11,12]),!(i&&null!=l.return))return[3,10];return[4,l.return()];case 9:b.sent(),b.label=10;case 10:return[3,12];case 11:if(o)throw a;return[7];case 12:return[7];case 13:return[2]}})}),function(e,n){return o.apply(this,arguments)}),[B,c,C,O,g]),(0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!c||!s)return[2];return[4,s.readFile(c)];case 1:if(!("content"in(e=t.sent())))return[3,3];return n=JSON.parse(e.content.toString()||"{}"),[4,Y.current];case 2:t.sent(),C().updateScene({elements:n.elements||[],appState:n.appState||{}}),C().scrollToContent(),t.label=3;case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[c,s,C]);var z=(0,w.useCallback)(i_()((a=(0,y._)(function(e,n){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(t=e.filter(function(e){return!e.isDeleted}),!c)return[3,2];return[4,s.writeFile(c,eZ.A.from(JSON.stringify({elements:t,files:n})))];case 1:r.sent(),r.label=2;case 2:return[2]}})}),function(e,n){return a.apply(this,arguments)}),350),[c]),W=(0,w.useCallback)(function(e){var n=g.current(e);n>O&&(H(m.current(e),!1),M(n))},[H,m,g]);return(0,f.FD)(F.S,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:T?"0 3px 0 3px ".concat(T):"none",backgroundColor:ez.LU.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"}},onMouseLeave:function(){null==A||A({paneId:B,path:c,$kind:"leave"})},children:[d&&!_?(0,f.Y)(d,{ref:function(e){e&&(S.current=e,e.readyPromise&&e.readyPromise.then(function(e){Y.current.resolve(e)}).catch(function(e){Y.current.reject(e)}))},UIOptions:{canvasActions:{loadScene:!1}},isCollaborating:!0,theme:E?"dark":"light",onPointerUpdate:function(e){var n=e.pointer;null==A||A({paneId:B,path:c,$kind:"collaborator",pointer:n,selectedElementIds:C().getAppState().selectedElementIds||{}})},onChange:function(e,n,t){W(e),g.current(e)>O&&z(e,t)},name:D}):null,h?(0,f.Y)(nD.mL,{styles:[iM]}):null]})}function iH(e){var n=e.fs,t=e.filePath;return(0,f.Y)(iB,{fs:n,filePath:t},t)}var iz=t(89577),iW=h.ZU.Object({type:h.ZU.Literal("draw"),data:h.ZU.Object({path:h.ZU.String()})}),iG={Content:function(e){var n=e.pane,t=e.options.performPaneOperation;return(0,f.Y)(iV,{path:n.data.path,performPaneOperation:t})},Icon:function(e){var n=e.size;return(0,f.Y)(iz.A,{size:n})},getTitle:function(e){return(0,n7.WP)(e.data.path)},category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(iW,e)}};function iV(e){var n=e.path,t=e.performPaneOperation,r=(0,A.A)().fs,i=(0,n0.KA)({path:n,performPaneOperation:t});return(0,n9.Qt)(function(){if(i)return{commands:[{commands:i}]}},[i]),(0,f.FD)(f.FK,{children:[(0,f.Y)(n0.ou,{path:n,performPaneOperation:t}),(0,f.Y)(n0.UC,{children:(0,f.Y)(iH,{fs:r,filePath:n})})]})}var ij=t(73912),iZ=t(18680),iq=h.ZU.Object({type:h.ZU.Literal("envEditor")}),iK={Content:function(e){var n=e.options.performPaneOperation,t=(0,A.A)().runner;return(0,f.Y)(ij.Ay,{getRunState:t.getRunState,performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,f.Y)(iZ.A,{size:n})},getTitle:function(){return"Secrets"},description:"Store sensitive information (like API keys) securely in your App",category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(iq,e)}},i$=t(80865),iJ=t(60799),iQ=t(6152),iX=t(4124),i0=t(65888),i1=t(72e3),i2=t(93415),i4=t(8952),i5=t(317),i8=t(87736),i3=t(50633),i6=t(95715),i7="The ".concat(i5.Lm," plan includes Basic ").concat(S.BP,". Upgrade for more capabilities."),i9=(0,M.x)({pill:[B.wp.cursor.pointer]}),oe=function(e){var n=(0,i6.A)(),t=n.showAiUpsell,r=n.refetch,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1];return t?(0,f.FD)(f.FK,{children:[(0,f.Y)(rc.m_,{tooltip:i7,children:(0,f.Y)(i3.a,{css:i9.pill,text:"BASIC",onClick:function(){return a(!0)}})}),(0,f.Y)(i4.A,{isOpen:o,onClose:function(){return a(!1)},type:"purchase",onPurchaseComplete:function(){var n;null===(n=e.onPurchaseComplete)||void 0===n||n.call(e),r()},reloadPageAfterPurchaseComplete:!0,contextualUpsell:(0,f.FD)(F.S,{gap:8,children:[(0,f.Y)(I.EY,{variant:"subheadBig",children:"Upgrade for Advanced AI"}),(0,f.Y)(I.EY,{multiline:!0,children:"Get the most advanced model with higher quality responses and generation"})]}),analyticsContext:{upgrade:{context:"ai_chat_upsell"}},highlightUpsell:"agent"})]}):null},on=t(98089),ot=t(5644),or=t(62451),oi=B.kL.max(520),oo=(0,M.x)({upgradeSurface:[B.wp.p(16),B.wp.center,B.wp.borderRadius("container")],upgradeSurfaceAiItems:[(0,g._)({},oi,[B.wp.colWithGap(16)])],upgradeSurfaceAiItem:[B.wp.colWithGap(8),B.wp.align.center,B.wp.maxWidth(220),B.wp.textAlign.center],upgradeSurfaceAiItemTitle:[B.wp.rowWithGap(4),B.wp.align.center],shortText:[B.wp.display.none,(0,g._)({},oi,[B.wp.display.block])],longText:[B.wp.display.block,(0,g._)({},oi,[B.wp.display.none])]});function oa(){return(0,f.FD)(eo.ui,{elevated:!0,css:oo.upgradeSurface,gap:16,children:[(0,f.FD)(F.S,{children:[(0,f.Y)(F.S,{css:oo.longText,children:(0,f.Y)(i8.A,{context:"ai_chat_upsell",text:"Upgrade to Replit ".concat(i5.en," for more powerful AI"),variant:"default",highlightUpsell:"assistant"})}),(0,f.Y)(F.S,{css:oo.shortText,children:(0,f.Y)(i8.A,{context:"ai_chat_upsell",text:"Upgrade to ".concat(i5.en),variant:"default",highlightUpsell:"assistant",css:oo.shortText})})]}),(0,f.FD)(F.S,{css:oo.upgradeSurfaceAiItems,row:!0,gap:16,children:[(0,f.FD)(F.S,{css:oo.upgradeSurfaceAiItem,children:[(0,f.FD)(F.S,{css:oo.upgradeSurfaceAiItemTitle,children:[(0,f.Y)(or.A,{size:16}),(0,f.Y)(I.EY,{variant:"subheadDefault",children:S.BP}),(0,f.Y)(i3.a,{text:"ADVANCED"})]}),(0,f.Y)(I.EY,{variant:"small",color:"dimmer",children:S.JY})]}),(0,f.FD)(F.S,{css:oo.upgradeSurfaceAiItem,children:[(0,f.FD)(F.S,{css:oo.upgradeSurfaceAiItemTitle,children:[(0,f.Y)(on.l,{size:16}),(0,f.Y)(I.EY,{variant:"subheadDefault",children:"Agent"})]}),(0,f.Y)(I.EY,{variant:"small",color:"dimmer",children:S.RB})]})]})]})}function ol(){var e=(0,ot.A)();return(0,f.FD)(F.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(I.Y9,{level:1,variant:"subheadDefault",children:S.BP}),(0,f.Y)(oe,{onPurchaseComplete:e})]})}var os=t(60099),oc=t(20882),ou=function(){var e=(0,i6.A)(),n=e.showAiUpsell,t=e.refetch,r=(0,v._)((0,w.useState)(!1),2),i=r[0],o=r[1],a=(0,ot.A)();return n?(0,f.FD)(f.FK,{children:[(0,f.Y)(F.S,{tag:"button",css:od.bannerWrapper,onClick:function(){return o(!0)},children:(0,f.Y)(tZ.N,{icon:(0,f.Y)(oc.A,{}),colorway:"yellow",text:"You’re using the free Basic AI model. Upgrade to get better AI responses and more accurate code generation and analysis.",css:od.banner})}),(0,f.Y)(i4.A,{isOpen:i,onClose:function(){return o(!1)},onPurchaseComplete:function(){t(),a()},reloadPageAfterPurchaseComplete:!0,type:"purchase",contextualUpsell:(0,f.FD)(F.S,{gap:8,children:[(0,f.Y)(I.EY,{variant:"subheadBig",children:"Upgrade for Advanced AI"}),(0,f.Y)(I.EY,{multiline:!0,children:"Get the most advanced model with higher quality responses and generation"})]}),analyticsContext:{upgrade:{context:"ai_chat_upsell"}},highlightUpsell:"agent"})]}):null},od=(0,M.x)({bannerWrapper:[B.wp.cursor.pointer,B.wp.textAlign.left],banner:[B.wp.borderRadius(0)]}),op=t(18706);function of(e){return e.error&&e.error.type!==C.fqQ.EVENT_ERROR_TYPE_UNKNOWN?e.error.type:null}var oh=t(54044);let om={direction:"reverse",state:{iterativeAgentEvents:[],didProcessLatestProposedActionsEvent:!1},transformer:function(e,n){var t=e.contents.contents;if((0,C.VFn)(t,"messageEventContents")){var r=(0,C.QNh)(t);if(e.sender.type===C.utd.USER)return{type:"userMessage",sender:{id:e.sender.id},uploadedFiles:r.uploadedFiles,codeReference:r.codeReference,content:r.content,targetedElement:r.targetedElement};var i,o,a,l,s,c,u,d,p,f,h,m,g,v,w,y,b,S,Y,A,x,k,_,D,E,R=of(e),I=function(e){if(!(0,C.VFn)(e,"proposedFileChanges"))return{fileChanges:[],commitId:"",summary:""};var n=(0,C.QNh)(e),t=n.changes,r=n.commitId,i=n.summary;return{fileChanges:t.map(function(e){return(0,e7._)((0,K._)({},e),{filePath:(0,oh.iD)(e.filePath)})}),commitId:r,summary:i}}((0,C.QNh)(t).extraActions),F=I.fileChanges,T=I.commitId,P=I.summary,L=(0,C.QNh)(t).assistantProposedActions,U=(0,C.ka6)(e),N=(o=L,a=F,l=(i=e.id,n.iterativeAgentEvents.filter(function(e){return(0,C.VFn)(e.contents,"installingPackages")||(0,C.VFn)(e.contents,"installedPackages")?(0,C.QNh)(e.contents).eventWhichProposedPackageInstall===i:(0,C.VFn)(e.contents,"startedShellExecution")||(0,C.VFn)(e.contents,"finishedShellExecution")?(0,C.QNh)(e.contents).eventWhichProposedShellExecution===i:(0,C.VFn)(e.contents,"appliedRunConfiguration")?(0,C.QNh)(e.contents).eventWhichProposedRunConfiguration===i:(0,C.VFn)(e.contents,"appliedDeploymentConfiguration")?(0,C.QNh)(e.contents).eventWhichProposedDeploymentConfiguration===i:!!(0,C.VFn)(e.contents,"appliedWorkflowConfiguration")&&(0,C.QNh)(e.contents).eventWhichProposedWorkflowConfiguration===i})),h=(null!==(s=null==o?void 0:o.shellCommands)&&void 0!==s?s:[]).map(function(e){var n,t,r;return l.forEach(function(r){(0,C.VFn)(r.contents,"startedShellExecution")&&r.contents.startedShellExecution.messageContentsOffset===e.messageContentsOffset&&(n=r.contents.startedShellExecution),(0,C.VFn)(r.contents,"finishedShellExecution")&&r.contents.finishedShellExecution.messageContentsOffset===e.messageContentsOffset&&(t=r.contents.finishedShellExecution)}),t&&t.processId===(null==n?void 0:n.processId)?{state:"finished",command:e.command,isDangerous:e.isDangerous,messageContentsOffset:e.messageContentsOffset,workingDirectory:e.workingDirectory,commandOutput:t.commandOutput,exitCode:t.exitCode}:n?{state:"running",command:e.command,isDangerous:e.isDangerous,messageContentsOffset:e.messageContentsOffset,workingDirectory:e.workingDirectory,processId:n.processId}:{state:"proposed",command:e.command,isDangerous:e.isDangerous,messageContentsOffset:e.messageContentsOffset,workingDirectory:e.workingDirectory}}),m=(null!==(c=null==o?void 0:o.packageInstalls)&&void 0!==c?c:[]).map(function(e){var n,t,r;return l.forEach(function(r){(0,C.VFn)(r.contents,"installingPackages")&&r.contents.installingPackages.messageContentsOffset===e.messageContentsOffset&&(n=r.contents.installingPackages),(0,C.VFn)(r.contents,"installedPackages")&&r.contents.installedPackages.messageContentsOffset===e.messageContentsOffset&&(t=r.contents.installedPackages)}),t&&t.processId===(null==n?void 0:n.processId)?{state:"installed",language:e.language,packageList:e.packageList,messageContentsOffset:e.messageContentsOffset,installationOutput:t.installationOutput,exitCode:t.exitCode}:n?{state:"installing",language:e.language,packageList:e.packageList,messageContentsOffset:e.messageContentsOffset,processId:n.processId}:{state:"proposed",language:e.language,packageList:e.packageList,messageContentsOffset:e.messageContentsOffset}}),g=null!==(u=o.workspaceToolNudges)&&void 0!==u?u:[],v=(null!==(d=o.runConfigurations)&&void 0!==d?d:[]).map(function(e){var n=l.some(function(n){return!!(0,C.VFn)(n.contents,"appliedRunConfiguration")&&n.contents.appliedRunConfiguration.messageContentsOffset===e.messageContentsOffset});return(0,K._)({state:n?"applied":"proposed"},e)}),w=(null!==(p=o.workflowConfigurations)&&void 0!==p?p:[]).map(function(e){var n=l.some(function(n){return!!(0,C.VFn)(n.contents,"appliedWorkflowConfiguration")&&n.contents.appliedWorkflowConfiguration.messageContentsOffset===e.messageContentsOffset});return(0,K._)({state:n?"applied":"proposed"},e)}),y=(null!==(f=o.deploymentConfigurations)&&void 0!==f?f:[]).map(function(e){var n=l.some(function(n){return!!(0,C.VFn)(n.contents,"appliedDeploymentConfiguration")&&n.contents.appliedDeploymentConfiguration.messageContentsOffset===e.messageContentsOffset});return(0,K._)({state:n?"applied":"proposed"},e)}),b=(0,q._)(h.map(function(e){return(0,C.hT8)("shellCommand",e)})).concat((0,q._)(m.map(function(e){return(0,C.hT8)("packageInstall",e)})),(0,q._)(a.map(function(e){return(0,C.hT8)("fileChange",e)})),(0,q._)(g.map(function(e){return(0,C.hT8)("workspaceToolNudge",e)})),(0,q._)(v.map(function(e){return(0,C.hT8)("runConfiguration",e)})),(0,q._)(y.map(function(e){return(0,C.hT8)("deploymentConfiguration",e)})),(0,q._)(w.map(function(e){return(0,C.hT8)("workflowConfiguration",e)}))).sort(function(e,n){return(0,C.QNh)(e).messageContentsOffset-(0,C.QNh)(n).messageContentsOffset}),S=h.length>0,Y=m.length>0,A=v.length>0,x=y.length>0,k=w.length>0,{sortedActions:b,hasAnyWorkspaceProposedActions:S||Y||A||x||k}),O=N.sortedActions,M=N.hasAnyWorkspaceProposedActions,B=!1;return n.didProcessLatestProposedActionsEvent||(n.didProcessLatestProposedActionsEvent=B=L.didCountEditRequest||L.workflowConfigurations.length>0),{type:"assistantMessage",content:r.content,created:e.created,state:e.state,intent:{value:r.intent,kind:"message"},error:R,usedModelSelector:r.usedModelSelector,ragSources:function(e){var n=e.sources;if(null==n)return[];var t=n.slice().sort(function(e,n){return e.url.localeCompare(n.url)});return(0,op.Qq)(t,"url")}(r),isDebugMessage:!1,sessionId:e.sessionId,proposedActions:(0,e7._)((0,K._)({},L),{commitId:null!==(_=L.commitId)&&void 0!==_?_:T,summary:null!==(D=L.summary)&&void 0!==D?D:P,fileChanges:F,sortedActions:O,didCreateCheckpoint:null!==(E=L.didCreateCheckpoint)&&void 0!==E&&E,didCountEditRequest:U,hasAnyWorkspaceProposedActions:M}),isLatestProposedActionsEvent:B}}if((0,C.VFn)(t,"inlineActionEventContents")){var H=(0,C.QNh)(t);if(e.sender.type===C.utd.USER)return{type:"userMessage",sender:{id:e.sender.id},codeReference:H.codeReference,content:H.content};var z=of(e);return{type:"assistantMessage",content:H.content,created:e.created,state:e.state,intent:{value:H.messageType,kind:"inline"},error:z,usedModelSelector:H.usedModelSelector,ragSources:[],isDebugMessage:H.messageType===C.Z1T.DEBUGGER,sessionId:e.sessionId,proposedActions:null,isLatestProposedActionsEvent:!1}}if((0,C.VFn)(t,"iterativeAgentEventContents")){var W=(0,C.QNh)(t);n.iterativeAgentEvents.push(W);var G=(0,C.zLm)(e);if(!G)return;return{type:"assistantAction",contents:W,created:e.created,sessionId:e.sessionId,eventIdWhichProposedAction:G}}}};var og=t(50377),ov=t(90122),ow=t(61280),oy=t(76243),ob=t(79571),oS=(0,M.x)({root:[B.wp.borderRadius(4),B.wp.border({color:ez.LU.outlineDimmest})],header:[B.wp.border({color:ez.LU.outlineDimmest,direction:"bottom"})],button:[{borderRadius:0,borderTopLeftRadius:4}]});function oY(e){var n=e.codeReference,t=e.onClick;return(0,f.FD)(eo.ui,{css:oS.root,elevated:!0,children:[(0,f.Y)(F.S,{css:oS.header,row:!0,gap:4,children:(0,f.Y)(eg.$n,{css:oS.button,size:"small",variant:"nofill",iconLeft:(0,f.Y)(te.A,{size:12,path:n.filePath}),iconRight:(0,f.Y)(ob.A,{}),text:"".concat(n.filePath," ").concat(n.range.lineFrom,":").concat(n.range.lineTo),onClick:t})}),(0,f.Y)(x.A,{lineNumbers:!0,lineNumbersStart:n.range.lineFrom,language:n.language,code:n.code,filePath:n.filePath})]})}var oA=t(40919),oC=t(9487),ox=t(59527);function ok(e){return(0,w.useCallback)(function(n){var t,r="string"==typeof n?{path:n}:n;e({type:null!==(t=(0,nq.QY)(r))&&void 0!==t?t:"codeEditor",data:r})},[e])}var o_=(0,M.x)({event:[B.wp.px(16),B.wp.pt(32),B.wp.pb(16),{justifyContent:"end"}],main:[B.wp.flex.growAndShrink(1)],userMessageAttachments:[B.wp.maxWidth("100%")],message:[B.wp.maxWidth(400),B.wp.px(8),B.wp.py(6),B.wp.borderRadius(),B.wp.colorMixBg(ez.LU.accentPrimaryDefault,"transparent",.4)],codeReference:[{width:"100%"}],avatar:[B.wp.pt(6)]}),oD=(0,w.memo)(function(e){var n,t=e.data,r=e.openPane,i=e.readFile,o=ok(r);return t?(0,f.Y)(oE,{openFile:o,content:t.content,userId:Number(t.sender.id),codeReference:t.codeReference,uploadedFiles:t.uploadedFiles,readFile:i,targetedElement:null!==(n=t.targetedElement)&&void 0!==n?n:null}):null});function oE(e){var n=e.openFile,t=e.readFile,r=e.content,i=e.userId,o=e.codeReference,a=e.uploadedFiles,l=e.targetedElement,s=(0,oA.Vd)({openFile:n,messageSenderType:C.utd.USER});return(0,f.FD)(F.S,{css:o_.event,row:!0,gap:8,children:[(0,f.FD)(F.S,{css:o_.main,gap:8,align:"end",children:[a?(0,f.Y)(oR,{attachments:a,readFile:t}):null,(0,f.FD)(F.S,{css:o_.message,children:[(0,f.Y)(oA.d2,{text:r,codeComponent:s,messageState:C.qOk.COMPLETE}),l?(0,f.Y)(oC.l,{targetedElement:l}):null]}),(null==o?void 0:o.code)?(0,f.Y)(F.S,{css:o_.codeReference,children:(0,f.Y)(oY,{codeReference:o,onClick:function(){var e=null==o?void 0:o.filePath;e&&n({path:e,line:null==o?void 0:o.range.lineTo})}})}):null]}),(0,f.Y)(F.S,{css:o_.avatar,children:(0,f.Y)(ox.H,{id:i,showAvatarOnly:!0})})]})}function oR(e){var n=e.attachments,t=e.readFile;return 0===n.length?null:(0,f.Y)(F.S,{css:o_.userMessageAttachments,children:(0,f.Y)(ov.A,{fileAttachments:n.map(function(e){return(0,f.Y)(ow.m1,{attachment:e,readFile:t,getAttachmentTypeDisclaimer:(0,oy.F)({aiName:S.BP})},e.path)})})})}var oI=t(76318);function oF(){var e=(0,$._)(["\n  fragment MonthlyCreditsCurrentUser on CurrentUser {\n    id\n    usageInterval {\n      ... on UsageInterval {\n        __typename\n        subtotalAmountUsd\n        planDiscountUsd\n      }\n    }\n  }\n"]);return oF=function(){return e},e}function oT(){var e=(0,$._)(["\n  fragment MonthlyCreditsOrg on UsageInterval {\n    availableCreditsUsd\n  }\n"]);return oT=function(){return e},e}function oP(){var e=(0,$._)(["\n  query MonthlyCreditsUser($orgId: String) {\n    currentUser {\n      id\n      ...MonthlyCreditsCurrentUser\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          ...TotalUsageOrg\n          usageInterval {\n            ... on UsageInterval {\n              ...MonthlyCreditsOrg\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return oP=function(){return e},e}var oL={},oU=(0,J.J1)(oF()),oN=(0,J.J1)(oT()),oO=(0,J.J1)(oP(),oU,oI.Y,oN),oM=t(47606);function oB(){var e,n,t,r,i,o=(0,n_.A)(),a=(0,oM.R)(o).orgId,l=(e=(0,K._)({},oL,{variables:{orgId:a}}),Q.I(oO,e)),s=l.data,c=l.loading,u=!1;return c?u:u=a?(null==s?void 0:null===(n=s.currentUser)||void 0===n?void 0:n.org.__typename)==="Org"&&"UsageInterval"===s.currentUser.org.usageInterval.__typename&&0===s.currentUser.org.usageInterval.availableCreditsUsd:(null==s?void 0:null===(r=s.currentUser)||void 0===r?void 0:null===(t=r.usageInterval)||void 0===t?void 0:t.__typename)==="UsageInterval"&&s.currentUser.usageInterval.subtotalAmountUsd>=(null!==(i=s.currentUser.usageInterval.planDiscountUsd)&&void 0!==i?i:0)}var oH=t(8038),oz=t(25726),oW=t(47258),oG=t(18063),oV=t(81207),oj=(0,M.x)({container:[B.wp.py(4),B.wp.px(8),B.wp.borderRadius(4),B.wp.flex.growAndShrink(1),B.wp.rowWithGap(8),B.wp.align.center,B.wp.border({color:"transparent"}),{backgroundColor:ez.LU.interactiveBackground,"&.generation-complete":[oW.b.filledAndOutlined],"&.generation-in-progress":[nL.S.foregroundPulse()],"&.is-applied":[B.wp.py(2)]}],iconCol:[B.wp.py(4),{alignSelf:"flex-start"}],textCol:[B.wp.flex.growAndShrink(1),B.wp.colWithGap(4),B.wp.overflow("hidden")],filePathAndDiffLines:[B.wp.rowWithGap(4),B.wp.justify.spaceBetween,B.wp.align.center],filePath:[B.wp.flex.shrink(1)],diffLineStatsPill:[B.wp.fontWeight.medium],editSummary:[{".is-reverted &":[B.wp.color.foregroundDimmest,{textDecoration:"line-through"}]}]});function oZ(e){var n=e.filePath,t=e.content,r=e.changeSummary,i=e.changeStatus,o=e.lineStats,a=e.onOpenDiff,l=e.state,s=l===C.u5I.GENERATION_COMPLETE,c=(0,w.useCallback)(function(){s&&a(n,{type:"generatedFile",content:t})},[n,a,s,t]);return(0,f.FD)(eo.ui,{css:oj.container,className:"is-".concat(i.state," generation-").concat(function(e){switch(e){case C.u5I.GENERATION_IN_PROGRESS:return"in-progress";case C.u5I.GENERATION_REGENERATING:return"regenerating";case C.u5I.GENERATION_COMPLETE:return"complete";case C.u5I.GENERATION_ERROR:return"error";default:return"unknown"}}(l)),onClick:c,children:[(0,f.Y)(F.S,{css:oj.iconCol,children:(0,f.Y)(te.A,{path:n,fill:"reverted"===i.state?ez.LU.foregroundDimmest:void 0})}),(0,f.FD)(F.S,{css:oj.textCol,children:[(0,f.FD)(F.S,{css:oj.filePathAndDiffLines,children:[(0,f.Y)(I.EY,{variant:"text",color:"default",multiline:!1,css:oj.filePath,children:n}),"reverted"===i.state?(0,f.FD)(F.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(oV.A,{}),(0,f.Y)(I.EY,{variant:"text",color:"dimmer",children:"Reverted"})]}):s?(0,f.Y)(oK,{filePath:n,lineStats:o}):null]}),(0,f.Y)(F.S,{css:oj.editSummary,children:(0,f.Y)(I.EY,{variant:"small",color:"dimmer",children:r})})]})]})}function oq(e){var n=e.filePath,t=e.linesAdded,r=e.linesRemoved,i=e.onOpenDiff,o=e.commitHash;return(0,f.FD)(eo.ui,{css:oj.container,className:"is-applied generation-complete",onClick:function(){return i(n,{type:"git",revision:o})},children:[(0,f.Y)(F.S,{css:oj.iconCol,children:(0,f.Y)(te.A,{path:n})}),(0,f.Y)(F.S,{css:oj.textCol,children:(0,f.FD)(F.S,{css:oj.filePathAndDiffLines,children:[(0,f.Y)(I.EY,{variant:"text",color:"default",children:n}),(0,f.Y)(oK,{filePath:n,lineStats:{added:t,removed:r}})]})})]})}function oK(e){var n=e.lineStats;return null==n?null:(0,f.FD)(F.S,{row:!0,gap:4,children:[(0,f.Y)(oG.a,{css:oj.diffLineStatsPill,compact:!0,colorway:"positive",text:"+".concat(n.added)}),(0,f.Y)(oG.a,{css:oj.diffLineStatsPill,compact:!0,colorway:"negative",text:"-".concat(n.removed)})]})}var o$=t(79040);function oJ(e){var n=e.sessionId,t=e.eventIdWhichProposedShellExecution,r=(0,S.NC)(),i=(0,k.J2)(r.sessions.get(n));return{sendStartedShellExecutionMessage:(0,w.useCallback)(function(e){var n=e.processId,r=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedShellExecution:t,processId:n,messageContentsOffset:r}})},[t,i]),sendFinishedShellExecutionMessage:(0,w.useCallback)(function(e){var n=e.commandOutput,r=e.exitCode,o=e.processId,a=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedShellExecution:t,commandOutput:n,exitCode:r,processId:o,messageContentsOffset:a}})},[t,i])}}function oQ(e){var n=e.sessionId,t=e.eventIdWhichProposedPackageInstall,r=(0,S.NC)(),i=(0,k.J2)(r.sessions.get(n));return{sendInstallingPackagesMessage:(0,w.useCallback)(function(e){var n=e.processId,r=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedPackageInstall:t,processId:n,messageContentsOffset:r}})},[t,i]),sendInstalledPackagesMessage:(0,w.useCallback)(function(e){var n=e.installationOutput,r=e.exitCode,o=e.processId,a=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedPackageInstall:t,installationOutput:n,messageContentsOffset:a,exitCode:r,processId:o}})},[t,i])}}function oX(e){var n=e.sessionId,t=e.eventIdWhichProposedRunConfiguration,r=(0,S.NC)(),i=(0,k.J2)(r.sessions.get(n));return(0,w.useCallback)(function(e){var n=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedRunConfiguration:t,messageContentsOffset:n}})},[t,i])}function o0(e){var n=e.sessionId,t=e.eventIdWhichProposedWorkflowConfiguration,r=(0,S.NC)(),i=(0,k.J2)(r.sessions.get(n));return(0,w.useCallback)(function(e){var n=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedWorkflowConfiguration:t,messageContentsOffset:n}})},[t,i])}function o1(e){var n=e.sessionId,t=e.eventIdWhichProposedDeploymentConfiguration,r=(0,S.NC)(),i=(0,k.J2)(r.sessions.get(n));return(0,w.useCallback)(function(e){var n=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedDeploymentConfiguration:t,messageContentsOffset:n}})},[t,i])}var o2=t(64254).hp;function o4(){return{spawnCommand:(0,e5.I)(function(e){var n;return n=(0,y._)(function(n){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,e.shellExec.spawn.rpc({cmd:"bash",args:["-ci",n]})];case 1:if(!(t=r.sent()).ok)return[2,t];return[2,{ok:!0,payload:t.payload.id}]}})}),function(e){return n.apply(this,arguments)}},[]),killProcessId:(0,e5.I)(function(e){var n;return n=(0,y._)(function(n){return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.shellExec.kill.rpc({id:n})];case 1:return[2,t.sent()]}})}),function(e){return n.apply(this,arguments)}},[]),waitAndGetCommandOutput:(0,e5.I)(function(e){var n;return n=(0,y._)(function(n){var t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v,w,y;return(0,b.YH)(this,function(b){switch(b.label){case 0:t=e.shellExec.monitor.subscribe({id:n}).resReadable,r=-1,i=!1,o=!1,b.label=1;case 1:b.trys.push([1,6,7,12]),l=(0,e6._)(t),b.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(s=b.sent()).done))return[3,5];if((c=s.value).ok&&"Finished"===c.payload.state)return r=c.payload.exitCode,[3,5];b.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return u=b.sent(),o=!0,a=u,[3,12];case 7:if(b.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:b.sent(),b.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:d=e.shellExec.readBuffer.subscribe({id:n}).resReadable,p=o2.alloc(0),f=!1,h=!1,b.label=13;case 13:b.trys.push([13,18,19,24]),g=(0,e6._)(d),b.label=14;case 14:return[4,g.next()];case 15:if(!(f=!(v=b.sent()).done))return[3,17];if((w=v.value).ok&&"output"===w.payload.$kind&&(p=o2.concat([p,w.payload.output])),w.ok&&"finished"===w.payload.$kind)return[2,{commandOutput:p.toString(),exitCode:r,processId:n}];b.label=16;case 16:return f=!1,[3,14];case 17:return[3,24];case 18:return y=b.sent(),h=!0,m=y,[3,24];case 19:if(b.trys.push([19,,22,23]),!(f&&null!=g.return))return[3,21];return[4,g.return()];case 20:b.sent(),b.label=21;case 21:return[3,23];case 22:if(h)throw m;return[7];case 23:return[7];case 24:return[2]}})}),function(e){return n.apply(this,arguments)}},[])}}var o5=t(17966),o8=t(84185),o3=t(59086),o6=t(52355),o7=t(42727),o9=t(32633),ae=(0,M.x)({container:[B.wp.borderRadius(4),B.wp.flex.growAndShrink(1),B.wp.border({width:1,color:ez.LU.interactiveBorder}),{"> div":{alignItems:"start"},"> div > button":[B.wp.mt(4),B.wp.mr(4)]}],headerWrapper:[B.wp.width("100%"),B.wp.flex.growAndShrink(1)],headerInner:[B.wp.width("100%")],textWrapper:[B.wp.flex.growAndShrink(1),B.wp.flex.wrap,B.wp.font.code,{lineHeight:ez.LU.lineHeightDefault}],actionsWrapper:[B.wp.flex.growAndShrink(0),B.wp.height("100%")],terminalWrapper:[B.wp.width("100%"),{"> div":B.wp.borderRadius(0,0,4,4)}],warningIcon:[B.wp.mx(4)]});function an(e){var n=e.command,t=e.eventId,r=e.sessionId,i=e.openPane,o=(0,v._)((0,w.useState)("proposed"!==n.state),2),a=o[0],l=o[1],s=o4(),c=s.spawnCommand,u=s.killProcessId,d=s.waitAndGetCommandOutput,p=oJ({sessionId:r,eventIdWhichProposedShellExecution:t}),h=p.sendStartedShellExecutionMessage,m=p.sendFinishedShellExecutionMessage;(0,w.useEffect)(function(){"running"===n.state&&l(!0),"finished"===n.state&&0===n.commandOutput.length&&l(!1)},[n]);var g=(0,w.useCallback)((0,y._)(function(){var e,t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:if(!c||!u||!d)return[2];if("running"!==n.state)return[3,2];return[4,u(n.processId)];case 1:case 6:return o.sent(),[2];case 2:return[4,c(n.command)];case 3:if(!(null==(e=o.sent())?void 0:e.ok))return[2];return[4,h({processId:t=e.payload,messageContentsOffset:n.messageContentsOffset})];case 4:if(!(null==(r=o.sent())?void 0:r.ok))return[2];return[4,d(t)];case 5:if(!(i=o.sent()))return[2];return[4,m((0,e7._)((0,K._)({},i),{messageContentsOffset:n.messageContentsOffset}))]}})}),[n,u,m,h,c,d]),S=(0,w.useCallback)(function(){i({type:"shell",data:{initialCmd:"".concat(n.command,"\n")}})},[n.command,i]);return(0,f.Y)(at,{command:n,isExpanded:a,toggleExpanded:function(){return l(function(e){return!e})},openPane:i,onRunInline:g,onRunInShell:S})}function at(e){var n=e.command,t=e.isExpanded,r=e.toggleExpanded,i=e.openPane,o=e.onRunInline,a=e.onRunInShell,l=(0,f.Y)(o8.A,{}),s="Run";return"running"===n.state&&(l=(0,f.Y)(o7.A,{}),s="Stop"),"finished"===n.state&&(l=(0,f.Y)(o3.A,{}),s="Run again"),(0,f.Y)(eo.ui,{elevated:!0,children:(0,f.Y)(_.A,{css:ae.container,expanded:t,onClick:r,disabled:"proposed"===n.state,chevron:"start",toggleOn:"chevron",headerContent:(0,f.Y)(F.S,{css:ae.headerWrapper,row:!0,children:(0,f.FD)(F.S,{row:!0,gap:8,align:"center",justify:"space-between",css:ae.headerInner,children:[(0,f.Y)(F.S,{row:!0,gap:8,align:"center",css:ae.textWrapper,children:n.command}),(0,f.Y)(F.S,{align:"start",css:ae.actionsWrapper,children:(0,f.FD)(F.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(ev.K0,{size:24,alt:"Run in Shell",onClick:a,children:(0,f.Y)(o6.A,{})}),(0,f.Y)(eg.$n,{size:"small",colorway:"proposed"===n.state?"primary":void 0,text:s,iconLeft:l,onClick:o}),n.isDangerous?(0,f.Y)(rc.m_,{tooltip:"This command is potentially dangerous!",children:(0,f.Y)(o9.A,{color:ez.LU.accentNegativeDefault,css:ae.warningIcon})}):null]})})]})}),children:(0,f.FD)(F.S,{css:ae.terminalWrapper,children:["running"===n.state?(0,f.Y)(o$.A,{processId:n.processId,maxHeight:160,openPane:i,interactive:!0}):null,"finished"===n.state?(0,f.Y)(o5.xd,{output:n.commandOutput,maxHeight:160,openPane:i}):null]})})})}var ar=t(60275);function ai(){var e,n=(0,A.A)().fs;return(0,w.useCallback)((e=(0,y._)(function(e){var t,r,i,o,a,l,s,c,u,d,p,f,h,m;return(0,b.YH)(this,function(g){switch(g.label){case 0:t=e.changes,r=new Map,i=!0,o=!1,a=void 0,g.label=1;case 1:g.trys.push([1,6,7,8]),l=t[Symbol.iterator](),g.label=2;case 2:if(i=(s=l.next()).done)return[3,5];if((c=s.value).state!==C.u5I.GENERATION_COMPLETE)return[3,4];return u=[""],[4,n.readFile(c.filePath)];case 3:(d=g.sent()).error||(u=d.content.toString().split("\n")),p=ne.EY.of(u),f=ne.EY.of(c.content.split("\n")),h=ar.o.create(p,f),r.set(c.filePath,h.getLineStats()),g.label=4;case 4:return i=!0,[3,2];case 5:return[3,8];case 6:return m=g.sent(),o=!0,a=m,[3,8];case 7:try{i||null==l.return||l.return()}finally{if(o)throw a}return[7];case 8:return[2,r]}})}),function(n){return e.apply(this,arguments)}),[n])}var ao=t(23099),aa=t.n(ao);function al(e){var n=e.changeStatus,t=e.removePane,r=(0,O.tL)(),i=(0,v._)((0,w.useState)(null),2),o=i[0],a=i[1],l=(0,w.useRef)(n);return(0,w.useEffect)(function(){if("applied"!==l.current.state&&"applied"===n.state&&null!=o){var e,i=null===(e=r.find(function(e){var n=(0,v._)(e,2),t=(n[0],n[1]);return"diff"===t.type&&aa()(t.data,o)}))||void 0===e?void 0:e[0];i&&(t(i),a(null))}l.current=n},[n,o,r,t]),{onOpenTemporaryDiffPane:a}}var as=t(52920),ac=t(31167),au=t(25782);function ad(){var e,n=(0,ac.T)(),t=(0,nH.mP)(),r=(0,nH.Eo)(),i=(0,nH.Ss)(),o=(0,nH.z1)();return(0,w.useCallback)((e=(0,y._)(function(e){var a,l,s,c,u;return(0,b.YH)(this,function(d){if(!n)return[2];if(a=t.findIndex(function(n){return n.name===e.workflowName}),l=e.commands.map(function(e){return{task:"shell.exec",args:e}}),s="sequential"===e.mode?"sequential":"parallel",a>=0){if("agent"===(u=t[a]).author||(null===(c=u.metadata)||void 0===c?void 0:c.generated))return[2];i(a,function(e){var n=t[a].tasks;e.tasks=(0,au.pC)(n,l)},{persist:!0})}else r({name:e.workflowName,author:n,tasks:l,mode:s});return e.setRunButton&&o(e.workflowName),[2]})}),function(n){return e.apply(this,arguments)}),[n,t,i,r,o])}var ap=t(6761),af=t(31412),ah=(0,M.x)({container:[B.wp.p(8),B.wp.borderRadius(4),B.wp.flex.growAndShrink(1),B.wp.border({width:1,color:ez.LU.interactiveBorder})],infoWrapper:[B.wp.flex.growAndShrink(1),B.wp.flex.wrap],inlineRunButton:[B.wp.display.inlineFlex,B.wp.backgroundColor.greyDimmest,B.wp.color.greyStrongest,B.wp.align.center,B.wp.borderRadius(8),B.wp.py(2),B.wp.px(6),B.wp.mx(2)],actionsWrapper:[B.wp.flex.growAndShrink(0)]});function am(e){var n=e.text;return(0,f.FD)(F.S,{css:ah.inlineRunButton,row:!0,gap:6,children:[(0,f.Y)(o8.A,{size:12}),(0,f.Y)(I.EY,{children:n})]})}function ag(e){var n,t=e.workflowConfiguration,r=e.eventId,i=e.sessionId,o=e.openPane,a=(0,w.useCallback)(function(){o({type:"workflows"})},[o]),l=ad(),s=o0({sessionId:i,eventIdWhichProposedWorkflowConfiguration:r}),c=(0,w.useCallback)(function(){l(t),s({messageContentsOffset:t.messageContentsOffset})},[l,s,t]);return(0,f.FD)(eo.ui,{elevated:!0,css:ah.container,children:[(0,f.FD)(F.S,{row:!0,align:"start",justify:"space-between",children:[(0,f.FD)(F.S,{row:!0,align:"center",gap:8,css:ah.infoWrapper,children:["Set",(0,f.Y)(am,{text:t.workflowName}),"to run"]}),(0,f.FD)(F.S,{row:!0,gap:4,align:"center",css:ah.actionsWrapper,children:[(0,f.Y)(ev.K0,{size:24,alt:"Open Workflows",onClick:a,children:(0,f.Y)(af.A,{})}),(0,f.Y)(eg.$n,{size:"small",colorway:"proposed"===t.state?"primary":void 0,onClick:c,text:"proposed"===t.state?"Apply":"Applied",disabled:"proposed"!==t.state,iconLeft:(0,f.Y)(ap.A,{})})]})]}),(0,f.Y)(as.qv,{workflow:(n=t.commands.map(function(e){return{task:"shell.exec",args:e}}),{name:t.workflowName,tasks:n,mode:t.mode}),readOnlyMode:!0,simplified:!0})]})}var av=t(73301),aw=(0,M.x)({container:[B.wp.px(8),B.wp.py(4),B.wp.borderRadius(4),B.wp.flex.growAndShrink(1),B.wp.rowWithGap(8),oW.b.filledAndOutlined],iconCol:[B.wp.py(4)],textCol:[B.wp.flex.growAndShrink(1),B.wp.justify.center]});function ay(e){var n=e.toolName,t=e.openPane,r=(0,nq.Vv)();return ab.includes(n)?(0,f.FD)(eo.ui,{css:aw.container,onClick:function(){return t({type:n})},children:[(0,f.Y)(F.S,{css:aw.iconCol,children:r.Icon({pane:{type:n},size:16})}),(0,f.FD)(F.S,{css:aw.textCol,children:[(0,f.Y)(I.EY,{color:"default",children:r.getTitle({type:n})}),(0,f.Y)(I.EY,{color:"dimmer",variant:"small",children:r.getDescription({type:n})})]}),(0,f.Y)(F.S,{css:aw.iconCol,children:(0,f.Y)(av.A,{})})]}):null}var ab=["agentChat","deployments","envEditor"];function aS(){return(0,e5.I)(function(e){var n;return n=(0,y._)(function(n){var t,r;return(0,b.YH)(this,function(i){return t=n.buildCommand,r=n.runCommand,[2,e.agentToolDeployConfig.update.rpc({build:t?["sh","-c",t]:void 0,run:["sh","-c",r]})]})}),function(e){return n.apply(this,arguments)}},[])}var aY=t(99054),aA=(0,M.x)({container:[B.wp.p(8),B.wp.borderRadius(4),B.wp.flex.growAndShrink(1),B.wp.border({width:1,color:ez.LU.interactiveBorder})],runCommandPill:[B.wp.font.code,B.wp.flex.growAndShrink(0)],infoWrapper:[B.wp.flex.growAndShrink(1),B.wp.flex.wrap,B.wp.height("100%")],actionsWrapper:[B.wp.flex.growAndShrink(0)]});function aC(e){var n=e.deploymentConfiguration,t=e.eventId,r=e.sessionId,i=e.openPane,o=(0,w.useCallback)(function(){i({type:"deployments"})},[i]),a=aS(),l=o1({sessionId:r,eventIdWhichProposedDeploymentConfiguration:t}),s=(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!a)return[2];return[4,a({buildCommand:n.buildCommand,runCommand:n.runCommand})];case 1:if(!e.sent().ok)return[2];return[4,l({messageContentsOffset:n.messageContentsOffset})];case 2:return e.sent(),[2]}})}),[a,n.buildCommand,n.messageContentsOffset,n.runCommand,l]),c=n.buildCommand.length>0,u="Set deployment run command to ";return c&&(u=" and run command to "),(0,f.Y)(eo.ui,{elevated:!0,css:aA.container,children:(0,f.FD)(F.S,{row:!0,align:"start",justify:"space-between",children:[(0,f.FD)(F.S,{row:!0,align:"center",gap:8,css:aA.infoWrapper,children:[c?(0,f.FD)(f.FK,{children:["Set deployment build command to"," ",(0,f.Y)(oG.a,{text:n.buildCommand,css:aA.runCommandPill})]}):null,u,(0,f.Y)(oG.a,{text:n.runCommand,css:aA.runCommandPill})]}),(0,f.FD)(F.S,{row:!0,gap:4,align:"center",css:aA.actionsWrapper,children:[(0,f.Y)(ev.K0,{size:24,alt:"Open Deployments",onClick:o,children:(0,f.Y)(aY.A,{})}),(0,f.Y)(eg.$n,{size:"small",onClick:s,text:"proposed"===n.state?"Apply":"Applied",disabled:"proposed"!==n.state,colorway:"proposed"===n.state?"primary":void 0,iconLeft:(0,f.Y)(ap.A,{})})]})]})})}var ax=t(12494),ak=t(64254).hp;function a_(){return{spawnInstall:(0,e5.I)(function(e){var n;return n=(0,y._)(function(n){var t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return t=n.language,r=n.packageList,[4,e.agentToolPackager.spawnInstallPackages.rpc({language:t,pkgs:r})];case 1:if(!(i=o.sent()).ok)return[2,i];return[2,{ok:!0,payload:i.payload.id}]}})}),function(e){return n.apply(this,arguments)}},[]),waitAndGetSpawnedInstallPackagesResult:(0,e5.I)(function(e){var n;return n=(0,y._)(function(n){var t,r,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:t=e.agentToolPackager.waitAndGetSpawnedInstallPackagesResult.subscribe({processId:n}).resReadable,r=ak.alloc(0),i=!1,o=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),l=(0,e6._)(t),p.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(s=p.sent()).done))return[3,5];if((c=s.value).ok&&"output"===c.payload.$kind&&(r=ak.concat([r,c.payload.output])),c.ok&&"finished"===c.payload.$kind)return u=c.payload.exitCode,[2,{installationOutput:r.toString(),exitCode:u}];p.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return d=p.sent(),o=!0,a=d,[3,12];case 7:if(p.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:return[2]}})}),function(e){return n.apply(this,arguments)}})}}function aD(e){var n,t,r=e.eventId,i=e.packageInstall,o=e.sessionId,a=e.openPane,l=(n=(0,A.A)().git,(0,w.useCallback)((t=(0,y._)(function(e){var t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return[4,n.status()];case 1:if((t=i.sent()).error)return[2,t];if(0===(r=null!=e?e:t.changes.map(function(e){return e.path})).length)return[2];return[2,n.stageFiles({add:r})]}})}),function(e){return t.apply(this,arguments)}),[n])),s=(0,v._)((0,w.useState)("installed"===i.state&&0!==i.exitCode),2),c=s[0],u=s[1];(0,w.useEffect)(function(){"installing"===i.state&&u(!0),"installed"===i.state&&0===i.exitCode&&u(!1)},[i]);var d=a_(),p=d.spawnInstall,h=d.waitAndGetSpawnedInstallPackagesResult,m=oQ({sessionId:o,eventIdWhichProposedPackageInstall:r}),g=m.sendInstallingPackagesMessage,S=m.sendInstalledPackagesMessage,Y=(0,w.useCallback)((0,y._)(function(){var e,n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(!p||!h)return[2];return u(!0),[4,null==p?void 0:p({language:i.language,packageList:i.packageList})];case 1:if(!(null==(e=r.sent())?void 0:e.ok))return[2];return[4,g({processId:n=e.payload,messageContentsOffset:i.messageContentsOffset})];case 2:return r.sent(),[4,h(n)];case 3:if(!(t=r.sent()))return[2];return 0===t.exitCode&&u(!1),[4,S({installationOutput:t.installationOutput,exitCode:t.exitCode,processId:n,messageContentsOffset:i.messageContentsOffset})];case 4:return r.sent(),[4,l()];case 5:return r.sent(),[2]}})}),[p,h,i,g,S,l]);return(0,f.Y)(aR,{packageInstall:i,isExpanded:c,toggleExpanded:function(){return u(function(e){return!e})},openPane:a,onInstallClick:Y})}var aE=(0,M.x)({container:[B.wp.borderRadius(4),B.wp.flex.growAndShrink(1),B.wp.border({width:1,color:ez.LU.interactiveBorder}),{"> div":{alignItems:"start"},"> div > button":[B.wp.mt(4),B.wp.mr(4)]}],headerWrapper:[B.wp.width("100%"),B.wp.flex.growAndShrink(1)],headerInner:[B.wp.mb(2)],packagesWrapper:[B.wp.width("100%"),B.wp.py(4),{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:ez.LU.space8}],package:[B.wp.borderRadius(4),B.wp.px(8),B.wp.py(4),B.wp.width("calc(50% - ".concat(ez.LU.space4,")")),B.wp.backgroundColor.backgroundHighest],terminalWrapper:[B.wp.width("100%"),{"> div":B.wp.borderRadius(0,0,4,4)}]});function aR(e){var n=e.packageInstall,t=e.isExpanded,r=e.toggleExpanded,i=e.openPane,o=e.onInstallClick,a=(0,w.useCallback)(function(){i({type:"dependencies"})},[i]),l="Install",s=(0,f.Y)(rp.A,{}),c=!1;return"installing"===n.state&&(l="Installing...",s=(0,f.Y)(tn.A,{}),c=!0),"installed"===n.state&&(l="Installed",s=(0,f.Y)(ap.A,{}),c=!0),(0,f.Y)(eo.ui,{elevated:!0,children:(0,f.Y)(_.A,{css:aE.container,expanded:t,onClick:r,disabled:"proposed"===n.state,chevron:"start",toggleOn:"chevron",headerContent:(0,f.FD)(F.S,{css:aE.headerWrapper,children:[(0,f.FD)(F.S,{row:!0,gap:8,align:"center",justify:"space-between",css:aE.headerInner,children:[(0,f.Y)(I.EY,{variant:"text",color:"default",children:"Dependencies"}),(0,f.FD)(F.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(ev.K0,{size:24,alt:"Open Dependencies",onClick:a,children:(0,f.Y)(rU.A,{})}),(0,f.Y)(eg.$n,{text:l,iconLeft:s,disabled:c,size:"small",colorway:"proposed"===n.state?"primary":void 0,onClick:o})]})]}),(0,f.Y)(F.S,{css:aE.packagesWrapper,children:n.packageList.map(function(e,n){return(0,f.Y)(eo.ui,{css:aE.package,row:!0,gap:8,align:"center",justify:"space-between",children:(0,f.FD)(F.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(rp.A,{}),(0,f.Y)(I.EY,{children:e})]})},n+"-"+e)})})]}),children:(0,f.FD)(F.S,{css:aE.terminalWrapper,children:["installing"===n.state?(0,f.Y)(ax.A,{processId:n.processId,openPane:i,maxHeight:160}):null,"installed"===n.state?(0,f.Y)(o5.xd,{output:n.installationOutput,maxHeight:160,openPane:i}):null]})})})}function aI(){var e,n=(0,ac.T)(),t=(0,nH.mP)(),r=(0,nH.Eo)(),i=(0,nH.Ss)(),o=(0,nH.z1)();return(0,w.useCallback)((e=(0,y._)(function(e){var a;return(0,b.YH)(this,function(l){return n&&((a=t.findIndex(function(n){return n.name===e.workflowName}))>=0?i(a,function(n){var t="agent"===n.author,r=n.tasks.find(function(n){return"shell.exec"===n.task&&n.args===e.oldCommand});if(r)r.args=e.newCommand;else{if(t){var i=n.tasks.find(function(e){return"shell.exec"===e.task}),o=n.tasks.filter(function(e){return"shell.exec"!==e.task});n.tasks=(0,q._)(o).concat([(0,e7._)((0,K._)({},i),{task:"shell.exec",args:e.newCommand})]);return}n.tasks=[{task:"shell.exec",args:e.newCommand}]}},{persist:!0}):r({name:e.workflowName,author:n,tasks:[{task:"shell.exec",args:e.newCommand}]}),e.setRunButton&&o(e.workflowName)),[2]})}),function(n){return e.apply(this,arguments)}),[n,t,i,r,o])}var aF=(0,M.x)({container:[B.wp.p(8),B.wp.borderRadius(4),B.wp.flex.growAndShrink(1),B.wp.border({width:1,color:ez.LU.interactiveBorder})],infoWrapper:[B.wp.flex.growAndShrink(1),B.wp.flex.wrap],runCommandPill:[B.wp.font.code,B.wp.flex.growAndShrink(0)],inlineRunButton:[B.wp.display.inlineFlex,B.wp.backgroundColor.greyDimmest,B.wp.color.greyStrongest,B.wp.align.center,B.wp.borderRadius(8),B.wp.py(2),B.wp.px(6),B.wp.mx(2)],actionsWrapper:[B.wp.flex.growAndShrink(0)]});function aT(e){var n=e.text;return(0,f.FD)(F.S,{css:aF.inlineRunButton,row:!0,gap:6,children:[(0,f.Y)(o8.A,{size:12}),(0,f.Y)(I.EY,{children:n})]})}function aP(e){var n=e.runConfiguration,t=e.eventId,r=e.sessionId,i=e.openPane,o=(0,w.useCallback)(function(){i({type:"workflows"})},[i]),a=aI(),l=oX({sessionId:r,eventIdWhichProposedRunConfiguration:t}),s=(0,w.useCallback)(function(){a(n),l({messageContentsOffset:n.messageContentsOffset})},[a,l,n]);return(0,f.Y)(eo.ui,{elevated:!0,css:aF.container,children:(0,f.FD)(F.S,{row:!0,align:"start",justify:"space-between",children:[(0,f.FD)(F.S,{row:!0,align:"center",gap:8,css:aF.infoWrapper,children:["Set",(0,f.Y)(aT,{text:n.workflowName}),"to",(0,f.Y)(oG.a,{text:n.newCommand,css:aF.runCommandPill})]}),(0,f.FD)(F.S,{row:!0,gap:4,align:"center",css:aF.actionsWrapper,children:[(0,f.Y)(ev.K0,{size:24,alt:"Open Workflows",onClick:o,children:(0,f.Y)(af.A,{})}),(0,f.Y)(eg.$n,{size:"small",colorway:"proposed"===n.state?"primary":void 0,onClick:s,text:"proposed"===n.state?"Apply":"Applied",disabled:"proposed"!==n.state,iconLeft:(0,f.Y)(ap.A,{})})]})]})})}function aL(e){var n=e.sessionId,t=e.eventIdWhichProposedChanges,r=(0,S.NC)(),i=(0,k.Rj)(function(){return n?r.sessions.get(n):void 0},[n,r]),o=(0,k.Rj)(function(){return null==i?void 0:i.reduce(aU,1e3)},[i]);return(0,w.useMemo)(function(){var e=null==o?void 0:o[t];return null!=e?e:{state:"pending"}},[o,t])}var aU={direction:"reverse",state:{},reducer:function(e,n){if((null===(t=e.contents.contents)||void 0===t?void 0:t.$kind)==="iterativeAgentEventContents"){var t,r=e.contents.contents.iterativeAgentEventContents.contents;if((null==r?void 0:r.$kind)==="appliedFileChanges"){var i=r.appliedFileChanges.eventWhichProposedChanges;if(n[i])return;n[i]={state:"applied",appliedChanges:r.appliedFileChanges.appliedChanges,commitHash:r.appliedFileChanges.commitHash};return}if((null==r?void 0:r.$kind)==="revertedFileChanges"){var o=r.revertedFileChanges.eventWhichProposedChanges;if(n[o])return;n[o]={state:"reverted",revertedChanges:r.revertedFileChanges.revertedChanges};return}}}},aN=t(6865);let aO=(0,w.memo)(function(e){var n=e.text,t=e.ragSources,r=e.proposedActions,i=e.eventId,o=e.eventState,a=e.markdownCodeComponent,l=e.markdownLinkComponent,s=e.sessionId,c=e.openPane,u=e.removePane,d=[];null!=t&&d.push((0,f.Y)(aB,{eventState:o,ragSources:t,openPane:c},"rag-sources"));var p=null!=r?r:{sortedActions:[],commitId:"",fileChanges:[]},h=p.sortedActions,m=p.commitId,g=p.fileChanges,S=ai(),Y=(0,v._)((0,w.useState)(function(){return new Map}),2),A=Y[0],x=Y[1];(0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,S({changes:g})];case 1:return x(e.sent()),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[g,S]);var k=h.reduce(function(e,t){var r=(0,C.QNh)(t).messageContentsOffset;if(null==r||!s)return e;var d=(0,q._)(e.parts);if(d.push((0,f.Y)(oA.d2,{text:n.slice(e.chars,r),codeComponent:a,linkComponent:l,messageState:o},"text-slice-".concat(e.chars,"-to-").concat(r))),(0,C.VFn)(t,"fileChange")){var p=(0,C.QNh)(t);d.push((0,f.Y)(aH,{change:p,commitId:m,lineStats:A.get(p.filePath),sessionId:s,eventId:i,openPane:c,removePane:u},p.filePath))}else if((0,C.VFn)(t,"shellCommand")){var h=(0,C.QNh)(t);d.push((0,f.Y)(an,{command:h,openPane:c,eventId:i,sessionId:s},h.command))}else if((0,C.VFn)(t,"packageInstall"))d.push((0,f.Y)(aD,{eventId:i,sessionId:s,packageInstall:t.packageInstall,openPane:c},t.packageInstall.language+"---"+t.packageInstall.packageList.join("-")));else if((0,C.VFn)(t,"workspaceToolNudge")){var g=(0,C.QNh)(t);"deployments"===g.toolName?d.push((0,f.Y)(oz.K4,{onConfigure:function(){return c({type:"deployments"})},paneType:"ghostwriterChat"},g.toolName)):d.push((0,f.Y)(az,{nudge:g,openPane:c},g.toolName))}else(0,C.VFn)(t,"runConfiguration")?d.push((0,f.Y)(aP,{runConfiguration:t.runConfiguration,openPane:c,eventId:i,sessionId:s},t.runConfiguration.workflowName+"---"+t.runConfiguration.oldCommand+"---"+t.runConfiguration.newCommand)):(0,C.VFn)(t,"deploymentConfiguration")?d.push((0,f.Y)(aC,{deploymentConfiguration:t.deploymentConfiguration,openPane:c,eventId:i,sessionId:s},t.deploymentConfiguration.buildCommand+"---"+t.deploymentConfiguration.runCommand)):(0,C.VFn)(t,"workflowConfiguration")&&d.push((0,f.Y)(ag,{workflowConfiguration:t.workflowConfiguration,openPane:c,eventId:i,sessionId:s},t.workflowConfiguration.workflowName+"---"+t.workflowConfiguration.commands.join("&&")));return{chars:r,parts:d}},{chars:0,parts:d}),_=k.chars,D=k.parts,E=n.slice(_).trim();E.length>0&&D.push((0,f.Y)(oA.d2,{text:E,codeComponent:a,linkComponent:l,messageState:o},"remaining-text"));var R=h.filter(function(e){return null==(0,C.QNh)(e).messageContentsOffset}),I=!0,F=!1,T=void 0;try{for(var P,L=R[Symbol.iterator]();!(I=(P=L.next()).done);I=!0){var U=P.value;if((0,C.VFn)(U,"fileChange")){var N=(0,C.QNh)(U);D.push((0,f.Y)(aH,{change:N,commitId:m,lineStats:A.get(N.filePath),sessionId:s,eventId:i,openPane:c,removePane:u},N.filePath))}}}catch(e){F=!0,T=e}finally{try{I||null==L.return||L.return()}finally{if(F)throw T}}return(0,f.Y)(f.FK,{children:D})});var aM=(0,M.x)({container:[B.wp.borderRadius()],accordionItem:[B.wp.flex.growAndShrink(1)],list:[B.wp.display.flex,B.wp.colWithGap(2),B.wp.p(4),B.wp.border({color:ez.LU.outlineDefault}),B.wp.borderRadius()],listItem:[B.wp.cursor.pointer,oW.b.listItem,B.wp.p(4),B.wp.borderRadius(4)],header:[B.wp.color.foregroundDimmer]});function aB(e){var n=e.eventState,t=e.ragSources,r=e.openPane;if(0===t.length)return null;var i=(0,tL.A)("file",t.length);return(0,f.Y)(eo.ui,{css:aM.container,row:!0,children:(0,f.Y)(_.A,{css:aM.accordionItem,headerContent:(0,f.FD)(F.S,{row:!0,gap:6,align:"center",css:aM.header,children:[(0,f.Y)(aN.A,{}),(0,f.Y)(I.EY,{children:n===C.qOk.IN_PROGRESS?"Reading ".concat(t.length," ").concat(i,"…"):"Read ".concat(t.length," ").concat(i)})]}),children:(0,f.Y)("ul",{"aria-label":"RAG sources",css:aM.list,children:t.map(function(e){var n=(0,oH.A)(e.url);return(0,f.Y)("li",{children:(0,f.FD)(F.S,{css:aM.listItem,row:!0,gap:4,onClick:function(){return r({type:"codeEditor",data:{path:n}})},children:[(0,f.Y)(te.A,{path:n,size:16}),(0,f.Y)(I.EY,{variant:"small",children:n})]})},e.url)})})})})}function aH(e){var n=e.change,t=e.commitId,r=e.lineStats,i=e.sessionId,o=e.eventId,a=e.openPane,l=e.removePane,s=aL({sessionId:i,eventIdWhichProposedChanges:o}),c=al({changeStatus:s,removePane:l}).onOpenTemporaryDiffPane,u=(0,w.useCallback)(function(e,n){var r={type:"diff",data:{left:{path:e,data:{type:"git",revision:t}},right:{path:e,data:n}}};a(r),c(r.data)},[a,t,c]);if(!n)return null;if("applied"===s.state){var d=s.appliedChanges,p=s.commitHash,h=d.find(function(e){return e.filePath===n.filePath});return h?(0,f.Y)(oq,(0,K._)({commitHash:p,onOpenDiff:u},h)):null}return(0,f.Y)(oZ,(0,e7._)((0,K._)({},n),{changeStatus:s,lineStats:r,onOpenDiff:u}))}function az(e){var n=e.nudge,t=e.openPane;return(0,f.Y)(ay,(0,e7._)((0,K._)({},n),{openPane:t}))}var aW=(0,w.memo)(function(e){var n=e.eventId,t=e.eventState,r=e.content,i=e.intent,o=e.ragSources,a=e.proposedActions,l=e.sessionId,s=e.openPane,c=e.removePane,u=e.markdownCodeComponent,d=e.markdownLinkComponent;return r||t===C.qOk.COMPLETE?i===C.qRv.ITERATIVE_AGENT?(0,f.Y)(aO,{text:r,eventId:n,eventState:t,ragSources:o,proposedActions:a,markdownCodeComponent:u,markdownLinkComponent:d,sessionId:l,openPane:s,removePane:c}):(0,f.Y)(oA.d2,{text:r,codeComponent:u,linkComponent:d,messageState:t}):(0,f.Y)(tn.A,{})}),aG=t(46762),aV=t(33698);function aj(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.commit,t=void 0===n||n,r=(0,A.A)().git,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(null),2),s=l[0],c=l[1];return(0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:return[4,r.isInitialized()];case 1:if(null!=(e=n.sent()).error)return c(e.error),[2];if(a(e.initialized),!e.initialized)return[3,7];if(!t)return[3,6];n.label=2;case 2:return n.trys.push([2,4,,6]),[4,r.getCommit({commit:"HEAD"})];case 3:case 5:return n.sent(),[3,6];case 4:return n.sent(),[4,r.commit({message:"Initial commit"})];case 6:return a(!0),[3,9];case 7:return[4,r.init({initialCommit:t})];case 8:n.sent(),a(!0),n.label=9;case 9:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[r,t]),{isGitInitialized:o,gitError:s}}var aZ=(0,M.x)({root:[B.wp.width("100%")],banner:[B.wp.width("100%")],li:[{listStyle:"none"}]});function aq(e){var n=e.changedPaths,t=e.openPane,r=(0,v._)((0,w.useState)(100),2),i=r[0],o=r[1],a=(0,t6.A)(function(e){o(e.width/10)});return(0,f.Y)(F.S,{innerRef:a,css:aZ.root,children:(0,f.Y)(tZ.N,{css:aZ.banner,icon:(0,f.Y)(rd.A,{}),colorway:"yellow",text:(0,f.FD)(ra.s,{variant:"small",children:[S.BP," has detected other changes to these files since this code was generated:",(0,f.Y)("ul",{style:{margin:0},children:n.map(function(e){return(0,f.Y)("li",{css:aZ.li,children:(0,f.Y)(eg.$n,{variant:"underlined",size:"small",iconLeft:(0,f.Y)(te.A,{path:e,size:16}),text:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{maxLength:30,truncateFrom:"middle"},t=n.maxLength,r=void 0===t?30:t,i=n.truncateFrom;return e.length<=r?e:"start"===(void 0===i?"middle":i)?"..."+e.slice(e.length-r,e.length):e.slice(0,r/2)+"..."+e.slice(-r/2)}(e,{truncateFrom:"start",maxLength:i}),onClick:function(){return t({type:"codeEditor",data:{path:e}})}})},e)})}),"You can retry this ",aG.go," or overwrite those changes and apply ",S.BP," edits anyway."]})})})}var aK=t(52097),a$=t(35992),aJ=t(11741),aQ=t(669);function aX(e){var n,t,r,i,o,a,l,s,c,u,d,p,f=e.sessionId,h=e.eventId,m=e.sortedActions,g=e.changesSummary,Y=e.handleAutoRestart,x=e.doAutoApplyChanges,_=(r=(n={sessionId:f,prevUserMessageContent:e.prevUserMessageContent}).sessionId,i=n.prevUserMessageContent,o=(0,A.A)().git,(0,w.useCallback)((t=(0,y._)(function(e){var n,t,a,l,s,c,u,d,p,f,h,m,g,v;return(0,b.YH)(this,function(w){switch(w.label){case 0:return n=e.changes,t=e.summary,o.forceRefresh(),[4,o.status()];case 1:if((a=w.sent()).error)return[2,a];if(0===a.changes.length||(l="Assistant checkpoint",0===n.length))return[2,{error:S.ic.NOTHING_TO_COMMIT}];t&&(l+=": ".concat(t)),l+="\n\nAssistant generated file changes:\n",s=!0,c=!1,u=void 0;try{for(d=n[Symbol.iterator]();!(s=(p=d.next()).done);s=!0)f=p.value,l+="- ".concat(f.filePath,": ").concat(f.changeSummary,"\n")}catch(e){c=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(c)throw u}}return i&&(l+="\n---\n\nUser prompt:\n\n".concat(i)),h=a.changes.filter(function(e){return!e.staged}).filter(function(e){return aQ.UC.includes(e.path)}).map(function(e){return e.path}),m=a.changes.filter(function(e){return e.staged}).map(function(e){return e.path}),g=n.map(function(e){return e.filePath}),v=new Set((0,q._)(h).concat((0,q._)(m),(0,q._)(g))),[4,o.stageFiles({add:Array.from(v)})];case 2:return w.sent(),[2,o.commit({message:l,trailers:{"Replit-Commit-Author":"Assistant","Replit-Commit-Session-Id":r}})]}})}),function(e){return t.apply(this,arguments)}),[o,i,r])),D=(0,k.HJ)(void 0);(0,w.useEffect)(function(){var e=function(e){return"workspaceToolNudge"===e.$kind?{action:e,state:"skipped",checked:!1}:"shellCommand"===e.$kind&&e.shellCommand.isDangerous?{action:e,state:"preparing",checked:!1}:{action:e,state:"preparing",checked:!0}};D.update((0,a$.jM)(function(n){if(!n)return m.map(e);for(var t=0;t<m.length;t++)n[t]?n[t].action=m[t]:n.push(e(m[t]))}))},[D,m]);var E=(0,v._)((0,w.useState)({state:"idle"}),2),R=E[0],I=E[1],F=(0,e$.A)(R),T=(0,w.useRef)(!1),P=(l=(a={sessionId:f,eventIdWhichProposedChanges:h}).sessionId,s=a.eventIdWhichProposedChanges,c=(0,S.NC)(),u=(0,k.J2)(c.sessions.get(l)),(0,w.useCallback)(function(e){var n=e.appliedChanges,t=e.commitHash;return null==u?void 0:u.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedChanges:s,appliedChanges:n,commitHash:t}})},[s,u])),L=ai(),U=o4(),N=U.spawnCommand,O=U.waitAndGetCommandOutput,M=oJ({sessionId:f,eventIdWhichProposedShellExecution:h}),B=M.sendStartedShellExecutionMessage,H=M.sendFinishedShellExecutionMessage,z=a_(),W=z.spawnInstall,G=z.waitAndGetSpawnedInstallPackagesResult,V=oQ({sessionId:f,eventIdWhichProposedPackageInstall:h}),j=V.sendInstallingPackagesMessage,Z=V.sendInstalledPackagesMessage,$=aI(),J=oX({sessionId:f,eventIdWhichProposedRunConfiguration:h}),Q=ad(),X=o0({sessionId:f,eventIdWhichProposedWorkflowConfiguration:h}),ee=aS(),en=o1({sessionId:f,eventIdWhichProposedDeploymentConfiguration:h}),et=(d=(0,A.A)().fs,(0,w.useCallback)((p=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return n=e.change,[4,d.writeFile(n.filePath,n.content)];case 1:if(null!==(t=r.sent()).error)return[2,{error:t.error}];return[2,{}]}})}),function(e){return p.apply(this,arguments)}),[d])),er=(0,w.useMemo)(function(){return N&&O&&W&&G&&ee},[ee,N,W,O,G]),ei=(0,w.useCallback)((0,y._)(function(){var e,n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,v,w,y,A,x,k,E,R,U,M,z,V,q,ei,eo,ea,el,es,ec,eu,ed,ep;return(0,b.YH)(this,function(b){switch(b.label){case 0:if(!D.current||"idle"!==F.current.state||!er)return[2];return I({state:"working"}),[4,L({changes:e=D.current.map(function(e){return(0,C.VFn)(e.action,"fileChange")?(0,C.QNh)(e.action):null}).filter(function(e){return null!==e})})];case 1:n=b.sent(),t=new Set,r=!1,D.update((0,a$.jM)(function(e){null==e||e.forEach(function(e){e.state="preparing"===e.state&&e.checked?"scheduled":"skipped"})})),i=-1,o=!1,a=!1,b.label=2;case 2:b.trys.push([2,30,31,36]),s=(0,e6._)(D.current),b.label=3;case 3:return[4,s.next()];case 4:if(!(o=!(c=b.sent()).done))return[3,29];if(u=c.value,i++,"scheduled"!==u.state)return[3,28];switch(D.update((0,a$.jM)(function(e){e&&(e[i].state="working")})),d=function(){D.update((0,a$.jM)(function(e){e&&(e[i]={action:e[i].action,checked:e[i].checked,state:"done"})}))},p=function(e){D.update((0,a$.jM)(function(n){n&&(n[i]={action:n[i].action,checked:n[i].checked,state:"failed",error:e})}))},h=(f=u.action).$kind){case"workspaceToolNudge":return[3,5];case"shellCommand":return[3,6];case"packageInstall":return[3,11];case"runConfiguration":return[3,16];case"deploymentConfiguration":return[3,19];case"fileChange":return[3,22];case"workflowConfiguration":return[3,24]}return[3,27];case 5:return[3,28];case 6:return m=f.shellCommand,[4,null==N?void 0:N(m.command)];case 7:if(!(null==(v=b.sent())?void 0:v.ok))return p("Spawning shell command failed"),[3,28];return[4,B({processId:v.payload,messageContentsOffset:m.messageContentsOffset})];case 8:if(!(null==(w=b.sent())?void 0:w.ok))return p("Server request failed"),[3,28];return[4,null==O?void 0:O(v.payload)];case 9:if(!(y=b.sent())||0!==y.exitCode)return p("Shell command failed"),[3,28];return[4,H((0,e7._)((0,K._)({},y),{messageContentsOffset:m.messageContentsOffset}))];case 10:if(!(null==(A=b.sent())?void 0:A.ok))return p("Server request failed"),[3,28];return d(),[3,28];case 11:return x=f.packageInstall,[4,null==W?void 0:W({language:x.language,packageList:x.packageList})];case 12:if(!(null==(k=b.sent())?void 0:k.ok))return p("spawning packager failed"),[3,28];return[4,j({processId:k.payload,messageContentsOffset:x.messageContentsOffset})];case 13:if(!(null==(E=b.sent())?void 0:E.ok))return p("Server request failed"),[3,28];return[4,null==G?void 0:G(k.payload)];case 14:if(!(R=b.sent())||0!==R.exitCode)return p("Failed to run packager"),[3,28];return[4,Z({installationOutput:R.installationOutput,exitCode:R.exitCode,processId:k.payload,messageContentsOffset:x.messageContentsOffset})];case 15:if(!(null==(U=b.sent())?void 0:U.ok))return p("Server request failed"),[3,28];return d(),[3,28];case 16:return[4,$(M=f.runConfiguration)];case 17:return b.sent(),[4,J({messageContentsOffset:M.messageContentsOffset})];case 18:if(!(null==(z=b.sent())?void 0:z.ok))return p("Server request failed"),[3,28];return d(),[3,28];case 19:return V=f.deploymentConfiguration,[4,null==ee?void 0:ee({buildCommand:V.buildCommand,runCommand:V.runCommand})];case 20:if(!(null==(q=b.sent())?void 0:q.ok))return p("failed configuring deployment"),[3,28];return[4,en({messageContentsOffset:V.messageContentsOffset})];case 21:if(!(null==(ei=b.sent())?void 0:ei.ok))return p("Server request failed"),[3,28];return d(),[3,28];case 22:return[4,et({change:f.fileChange})];case 23:if(b.sent().error)return p("file write failed"),[3,28];return d(),t.add(f.fileChange.filePath),[3,28];case 24:return[4,Q(eo=f.workflowConfiguration)];case 25:return b.sent(),[4,X({messageContentsOffset:eo.messageContentsOffset})];case 26:if(!(null==(ea=b.sent())?void 0:ea.ok))return p("Server request failed"),[3,28];return d(),r=!0,[3,28];case 27:(0,aK.A)(h),b.label=28;case 28:return o=!1,[3,3];case 29:return[3,36];case 30:return el=b.sent(),a=!0,l=el,[3,36];case 31:if(b.trys.push([31,,34,35]),!(o&&null!=s.return))return[3,33];return[4,s.return()];case 32:b.sent(),b.label=33;case 33:return[3,35];case 34:if(a)throw l;return[7];case 35:return[7];case 36:return es=e.filter(function(e){return t.has(e.filePath)}).map(function(e){return{filePath:e.filePath,changeSummary:e.changeSummary}}),r&&es.push({filePath:aJ.v,changeSummary:"Updated app configuration"}),[4,_({changes:es,summary:g})];case 37:if(eu="hash"in(ec=b.sent())?ec.hash:null,ed="error"in ec?ec.error:null,!eu)return ed===S.ic.NOTHING_TO_COMMIT?I({state:"failed",error:"Nothing to commit",canRetryApply:!1}):I({state:"failed",error:"Commit failed: "+ed,canRetryApply:!0}),[2];return[4,P({appliedChanges:es.map(function(e){var t,r,i=e.filePath,o=e.changeSummary,a=n.get(i);return{filePath:i,linesAdded:null!==(t=null==a?void 0:a.added)&&void 0!==t?t:0,linesRemoved:null!==(r=null==a?void 0:a.removed)&&void 0!==r?r:0,changeSummary:o}}),commitHash:eu})];case 38:if(!(null==(ep=b.sent())?void 0:ep.ok))return I({state:"failed",error:"Server request failed",canRetryApply:!0}),[2];return I({state:"done"}),Y(),T.current=!1,[2]}})}),[D,F,er,_,g,L,P,Y,N,B,O,H,W,j,G,Z,$,J,ee,en,et,Q,X]),eo=(0,w.useCallback)(function(){D.update((0,a$.jM)(function(e){null==e||e.forEach(function(e){e.state="preparing"})})),I({state:"idle"}),F.current={state:"idle"},ei()},[ei,F,D]),ea=(0,k.J2)(D),el=(0,w.useCallback)(function(e){D.update((0,a$.jM)(function(n){n&&"preparing"===n[e].state&&(n[e].checked=!n[e].checked)}))},[D]);return(0,w.useEffect)(function(){x&&er&&"idle"===F.current.state&&!0!==T.current&&(T.current=!0,ei())},[ei,x,F,T,er]),{state:R,multistepActions:ea,toggleMultistepActionCheck:el,applyActions:ei,reapplyActions:eo}}var a0=t(38828),a1=t(9885),a2=(0,M.x)({wrapper:[B.wp.width("100%"),B.wp.p(8),B.wp.borderRadius(4)],actionRowWrapper:[B.wp.height(24)],actionRow:[B.wp.maxWidth("100%"),B.wp.flex.growAndShrink(1),B.wp.overflow("hidden")],handleOverflow:[B.wp.maxWidth("100%"),B.wp.flex.growAndShrink(1),B.wp.overflow("hidden")],alignBaseline:[B.wp.height("100%"),{alignItems:"baseline"}],iconWrapper:[B.wp.width(20)],errorText:[B.wp.color.accentNegativeStronger]});function a4(e){var n=e.action,t=n.state;switch(t){case"preparing":return null;case"scheduled":case"skipped":return(0,f.Y)(a0.A,{});case"working":return(0,f.Y)(tn.A,{});case"done":return(0,f.Y)(ap.A,{color:ez.LU.accentPositiveDefault});case"failed":return(0,f.Y)(rc.m_,{tooltip:n.error,children:(0,f.Y)(o9.A,{color:ez.LU.accentNegativeDefault})});default:(0,aK.A)(t)}}function a5(e){var n=e.action,t=n.$kind;switch(t){case"workspaceToolNudge":return null;case"shellCommand":return(0,f.FD)(F.S,{align:"center",row:!0,gap:4,css:a2.handleOverflow,children:[(0,f.Y)(o6.A,{}),(0,f.FD)(F.S,{row:!0,gap:2,css:a2.alignBaseline,children:["Run shell command:"," ",(0,f.Y)(I.EY,{multiline:!1,variant:"code",children:n.shellCommand.command})]})]});case"packageInstall":return(0,f.FD)(F.S,{align:"center",row:!0,gap:4,css:a2.handleOverflow,children:[(0,f.Y)(rU.A,{}),(0,f.FD)(F.S,{row:!0,gap:2,css:a2.alignBaseline,children:["Install dependencies:",n.packageInstall.packageList.map(function(e){return(0,f.Y)(oG.a,{text:e},e)})]})]});case"fileChange":return(0,f.FD)(F.S,{align:"center",row:!0,gap:4,css:a2.handleOverflow,children:[(0,f.Y)(aN.A,{}),(0,f.FD)(F.S,{row:!0,gap:4,css:a2.alignBaseline,children:["Edit file",(0,f.Y)(I.EY,{multiline:!1,variant:"code",children:n.fileChange.filePath})]})]});case"runConfiguration":return(0,f.FD)(F.S,{align:"center",row:!0,gap:4,css:a2.handleOverflow,children:[(0,f.Y)(a1.A,{}),(0,f.FD)(F.S,{row:!0,gap:4,css:a2.alignBaseline,children:["Configure ",(0,f.Y)(oG.a,{text:n.runConfiguration.workflowName})," ","workflow"]})]});case"deploymentConfiguration":var r=n.deploymentConfiguration.buildCommand.length>0,i=n.deploymentConfiguration.runCommand.length>0,o="";return r&&!i?o="Configure deployment build command":!r&&i?o="Configure deployment run command":r&&i&&(o="Configure deployment build and run commands"),(0,f.FD)(F.S,{align:"center",row:!0,gap:4,css:a2.handleOverflow,children:[(0,f.Y)(aY.A,{}),(0,f.Y)(F.S,{row:!0,gap:4,css:a2.alignBaseline,children:(0,f.Y)(F.S,{row:!0,align:"center",children:o})})]});case"workflowConfiguration":return(0,f.FD)(F.S,{align:"center",row:!0,gap:4,css:a2.handleOverflow,children:[(0,f.Y)(a1.A,{}),(0,f.FD)(F.S,{row:!0,gap:4,css:a2.alignBaseline,children:["Configure ",(0,f.Y)(oG.a,{text:n.workflowConfiguration.workflowName})," ","workflow"]})]});default:(0,aK.A)(t)}}function a8(e){var n=e.sessionId,t=e.eventId,r=e.sortedActions,i=e.changesSummary,o=e.changeStatus,a=e.onCancel,l=aX({sessionId:n,eventId:t,handleAutoRestart:e.handleAutoRestart,doAutoApplyChanges:e.doAutoApplyChanges,sortedActions:r,changesSummary:i,prevUserMessageContent:e.prevUserMessageContent}),s=l.applyActions,c=l.reapplyActions,u=l.multistepActions,d=l.toggleMultistepActionCheck,p=l.state,h=(0,w.useMemo)(function(){return!!("failed"===p.state||(null==u?void 0:u.some(function(e){return"failed"===e.state})))},[u,p.state]);return u&&0!==u.length&&("applied"!==o.state||h)?(0,f.Y)(a3,{multistepActions:u,multistepState:p,onCancel:a,applyActions:s,reapplyActions:c,toggleMultistepActionCheck:d}):null}function a3(e){var n=e.multistepActions,t=e.multistepState,r=e.onCancel,i=e.applyActions,o=e.reapplyActions,a=e.toggleMultistepActionCheck,l=(0,w.useMemo)(function(){return null==n?void 0:n.some(function(e){return"preparing"===e.state&&!0===e.checked})},[n]);return(0,f.FD)(eo.ui,{elevated:!0,css:a2.wrapper,gap:8,children:[(0,f.Y)(I.EY,{children:"Apply all:"}),(0,f.FD)(F.S,{gap:8,css:a2.handleOverflow,children:[(0,f.Y)(F.S,{gap:4,css:a2.handleOverflow,children:null==n?void 0:n.map(function(e,n){return(0,f.FD)(F.S,{row:!0,gap:8,css:a2.actionRow,children:[(0,f.Y)(F.S,{align:"center",justify:"center",css:a2.iconWrapper,children:"preparing"===e.state?(0,f.Y)(nN.S,{name:e.action.$kind,checked:e.checked,onChange:function(){a(n)}}):(0,f.Y)(a4,{action:e})}),(0,f.Y)(F.S,{align:"center",css:a2.actionRowWrapper,children:(0,f.Y)(a5,{action:e.action})})]},n+"---"+e.action.$kind)})}),"idle"===t.state?(0,f.FD)(F.S,{row:!0,gap:8,children:[(0,f.Y)(eg.$n,{text:"Cancel",onClick:r}),(0,f.Y)(eg.$n,{text:"Ok",colorway:"primary",disabled:!l,onClick:i})]}):null,"failed"===t.state?(0,f.FD)(F.S,{row:!0,gap:16,css:a2.errorText,align:"center",children:[(0,f.Y)(F.S,{children:t.error}),t.canRetryApply?(0,f.Y)(eg.$n,{text:"Try again",colorway:"primary",onClick:o}):null]}):null]})]})}var a6=t(6553),a7=(0,M.x)({popoverContent:[B.wp.p(8),B.wp.colWithGap(8)]});function a9(e){var n=e.runState,t=e.onClick,r=n===C.g32.AGENT_STATE_PAUSING,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,t()];case 1:return e.sent(),a(!1),[2]}})}),[t]);return(0,f.FD)(a6.Wv,{label:"Pause ".concat(S.g$," confirmation"),placement:"top",trigger:"click",isOpen:o,onOpenChange:a,children:[(0,f.Y)(eg.$n,{text:r?"Pausing ".concat(S.g$,"…"):"Pause ".concat(S.g$),colorway:"red",disabled:r}),(0,f.FD)(F.S,{css:a7.popoverContent,children:[(0,f.FD)(I.EY,{children:["Are you sure you want to pause"," ",(0,S.Nn)({variant:"casual",capitalizeFirstChar:!1}),"?"]}),(0,f.FD)(F.S,{row:!0,gap:4,children:[(0,f.Y)(eg.$n,{text:"Cancel",onClick:function(){return a(!1)}}),(0,f.Y)(eg.$n,{text:"Pause ".concat(S.g$),onClick:l,colorway:"red"})]})]})]})}function le(){return(le=(0,y._)(function(e,n){var t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:var o;return t={},r=null,[4,Promise.all(n.map((o=(0,y._)(function(n){var i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,e.readFile(n)];case 1:return(i=o.sent()).error?r=i.error:t[n]=i.content.toString(),[2]}})}),function(e){return o.apply(this,arguments)})))];case 1:return i.sent(),[2,{contents:t,error:r}]}})})).apply(this,arguments)}var ln=t(4505),lt=t(78839),lr=t(36672),li=(0,M.x)({buttonRow:[B.wp.flex.wrap],errorContainer:[B.wp.rowWithGap(8),B.wp.align.center,B.wp.color.accentNegativeDefault],statusBanner:[B.wp.width("100%")]});function lo(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,Y,x,_,D=e.fileChanges,E=e.commitId,R=e.summary,T=e.sortedActions,P=e.eventId,L=e.sessionId,U=e.openAiChatSettingsPanel,N=e.openPane,O=e.removePane,M=e.hasAnyWorkspaceProposedActions,H=e.isLatestProposedActionsEvent,z=e.isMessageComplete,W=e.prevUserMessageContent,G=(0,aV.Z)("workspace-assistant-auto-apply-changes"),V=(0,aV.Z)("workspace-assistant-auto-restart-repl"),j=(0,nX.gc)("assistantAutoApplyChanges","assistantAutoRestartRepl").preferences,Z=1===D.length&&!M,q=D.length>0,$=j.assistantAutoApplyChanges&&G.isDone,J=aj().isGitInitialized,Q=(0,v._)((0,w.useState)(null),2),X=Q[0],ee=Q[1],en=(0,S.jt)(),et=(0,S.hT)(),er=(0,S.zS)(),ei=en&&(et===C.g32.AGENT_STATE_RUNNING||et===C.g32.AGENT_STATE_PAUSING),eo=(0,v._)((0,w.useState)(null),2),ea=eo[0],el=eo[1],es=(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){try{er()}catch(e){el("Unable to pause agent: ".concat(e))}return[2]})}),[er]),ec=aL({sessionId:L,eventIdWhichProposedChanges:P}),eu=D.some(function(e){return e.state===C.u5I.GENERATION_REGENERATING}),ed=z&&"pending"===ec.state&&!eu,ep=al({changeStatus:ec,removePane:O}).onOpenTemporaryDiffPane,ef=(t=(n={filePaths:(0,w.useMemo)(function(){return D.map(function(e){return e.filePath})},[D]),commitId:E}).commitId,r=n.filePaths,i=(0,A.A)().fs,a=(o=(0,v._)((0,w.useState)(null),2))[0],l=o[1],c=(0,rG.A)((s=(0,y._)(function(e){var n,i,o,a,l,s,c,u,d,p;return(0,b.YH)(this,function(f){switch(f.label){case 0:if(n=null,i={},!t)return[2,{error:rz.uA.NO_COMMITS}];o=!0,a=!1,l=void 0,f.label=1;case 1:f.trys.push([1,6,7,8]),s=r[Symbol.iterator](),f.label=2;case 2:if(o=(c=s.next()).done)return[3,5];return u=c.value,[4,e.getFileContents({path:u,revision:t,convertToBase64:!1})];case 3:(d=f.sent()).error?n=d.error:d.content&&(i[u]=d.content),f.label=4;case 4:return o=!0,[3,2];case 5:return[3,8];case 6:return p=f.sent(),a=!0,l=p,[3,8];case 7:try{o||null==s.return||s.return()}finally{if(a)throw l}return[7];case 8:return[2,n?{error:n}:{fileContents:i,error:null}]}})}),function(e){return s.apply(this,arguments)}),[t,r],{keepStaleResult:!0}),(0,w.useEffect)(function(){(null==c?void 0:c.error)&&l(c.error)},[c]),d=(u=(0,v._)((0,w.useState)({}),2))[0],p=u[1],(0,w.useEffect)(function(){(function(e,n){return le.apply(this,arguments)})(i,r).then(function(e){var n=e.contents,t=e.error;p(n),t&&l(t)});var e=r.map(function(e){return i.watchTextFile(e,{onChange:(0,y._)(function(){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,i.readFile(e)];case 1:if((n=t.sent()).error)return l(n.error),[2];return p(function(t){return(0,e7._)((0,K._)({},t),(0,g._)({},e,n.content.toString()))}),[2]}})})})});return function(){e.forEach(function(e){return e()})}},[i,r]),(0,w.useMemo)(function(){if(null==c||null==d)return{changedPaths:[],hasAnyChangedPaths:!1,error:a,isLoading:!0};if(a)return{changedPaths:[],hasAnyChangedPaths:!1,error:a,isLoading:!1};var e=r.filter(function(e){if(!c.fileContents)return!1;var n=d[e],t=c.fileContents[e];return void 0!==n&&void 0!==t&&d[e]!==c.fileContents[e]});return{changedPaths:e,hasAnyChangedPaths:e.length>0,error:a,isLoading:!1}},[d,c,r,a])),eh=ef.changedPaths,em=ef.hasAnyChangedPaths,ev=ef.isLoading,ew=(h=!!(0,nH.jP)(),m=(0,e5.I)(function(e){return function(){return e.workflows.agentRestartRepl.rpc({})}},[]),Y=(0,e5.I)(function(e){return function(){return e.agentToolRun.run.rpc({})}},[]),(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){return h?[2,null==m?void 0:m()]:[2,null==Y?void 0:Y()]})}),[h,m,Y])),ey=(0,v._)((0,w.useState)(!1),2),eb=ey[0],eS=ey[1],eY=(x=(0,S.NC)(),_=(0,k.J2)(x.sessions.get(L)),(0,w.useCallback)(function(){return null==_?void 0:_.appendEvent({kind:"message",intent:C.qRv.ITERATIVE_AGENT,modelType:C.e3q.ADVANCED,message:"The recent code changes you proposed are outdated. Please try generating new file edits which accomplish the same goal.",uploadedFiles:[],enableDeepThinking:!1,useRag:!1,webviewTargetedElement:void 0,fileContext:[],mostRecentFile:void 0})},[_])),eA=(0,w.useCallback)((0,y._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!j.assistantAutoRestartRepl)return[3,2];return[4,null==ew?void 0:ew()];case 1:(null==(e=t.sent())?void 0:e.ok)?eS(!0):ee(null!==(n=null==e?void 0:e.payload.message)&&void 0!==n?n:"Failed to restart workflow"),t.label=2;case 2:return[2]}})}),[j.assistantAutoRestartRepl,ew]),eC=(0,w.useMemo)(function(){return!!$&&!!H&&!!ed&&!ei},[ei,ed,$,H]),ex=aX({sessionId:L,eventId:P,handleAutoRestart:eA,doAutoApplyChanges:eC,sortedActions:T,changesSummary:R,prevUserMessageContent:W}),ek=ex.applyActions,e_=ex.state,eD="working"===e_.state,eE="failed"===e_.state?e_.error:void 0,eR="failed"===e_.state&&e_.canRetryApply,eI=(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){return ek(),G.isDone||G.setAsDone(),[2]})}),[ek,G]),eF=(0,v._)((0,w.useState)(!1),2),eT=eF[0],eP=eF[1],eL=(0,w.useCallback)(function(){if(Z)return eI();eP(!0)},[eI,Z]),eU=(0,w.useCallback)(function(){var e=D.map(function(e){return{left:{path:e.filePath,data:{type:"git",revision:E}},right:{path:e.filePath,data:{type:"generatedFile",content:e.content}}}});N({type:"diff",data:e}),ep(e)},[E,N,D,ep]);(0,w.useEffect)(function(){eC&&eL()},[eC,eL]);var eN=(0,f.Y)(tZ.N,{css:li.statusBanner,icon:(0,f.Y)(rd.A,{}),colorway:"teal",text:(0,f.FD)(f.FK,{children:[S.BP," can automatically apply proposed changes to your App. You can enable this behavior in"," ",(0,f.Y)(eg.$n,{css:B.wp.display.inlineFlex,variant:"underlined",size:"small",onClick:U,text:"".concat(S.BP," Settings")}),"."]}),closable:!0,closeAction:G.setAsDone}),eO=(0,f.Y)(tZ.N,{css:li.statusBanner,icon:(0,f.Y)(rd.A,{}),colorway:"teal",text:(0,f.FD)(f.FK,{children:[S.BP," automatically restarted your App after applying file changes. You can disable this behavior in"," ",(0,f.Y)(eg.$n,{css:B.wp.display.inlineFlex,variant:"underlined",size:"small",onClick:U,text:"".concat(S.BP," Settings")}),"."]}),closable:!0,closeAction:V.setAsDone}),eM=ei?(0,f.FD)(I.EY,{variant:"small",color:"dimmer",children:[(0,S.Nn)({capitalizeFirstChar:!0})," is currently active. Changes cannot be applied until ",(0,S.Nn)()," finishes working."]}):null;return H&&J?eD||eu?(0,f.FD)(F.S,{row:!0,gap:8,align:"center",children:[eu?(0,f.Y)(I.EY,{color:"dimmer",children:"Thinking…"}):eD?(0,f.Y)(I.EY,{color:"dimmer",children:"Applying changes…"}):null,(0,f.Y)(tn.A,{})]}):z?(0,f.FD)(F.S,{gap:8,align:"start",children:[G.isDone?null:eN,(0,f.Y)(la,{changeStatus:ec,isLoadingFilesChangedSinceCommit:ev,hasAnyChangedPaths:em,changedPaths:eh,openPane:N,handleRetryProposingChanges:eY,handleApplyChanges:eL,isAgentActive:ei,agentRunState:et,handlePauseAgent:es,assistantAutoApplyChanges:j.assistantAutoApplyChanges,openMultiDiffPane:eU,isMultistepApplyUIVisible:eT,hasSingleFileChangeOnly:Z,hasAnyFileChanges:q}),eM,null==ea?null:(0,f.FD)(F.S,{css:li.errorContainer,children:[(0,f.Y)(lt.A,{}),ea,(0,f.Y)(eg.$n,{text:"Try again",onClick:es,variant:"underlined",iconLeft:(0,f.Y)(lr.A,{})})]}),null==eE?null:(0,f.FD)(F.S,{css:li.errorContainer,children:[(0,f.Y)(lt.A,{}),eE,eR?(0,f.Y)(eg.$n,{text:"Try again",onClick:eL,variant:"underlined",iconLeft:(0,f.Y)(lr.A,{})}):null]}),!eb||V.isDone?null:eO,null==X?null:(0,f.FD)(F.S,{css:li.errorContainer,children:[(0,f.Y)(lt.A,{}),X]}),eT?(0,f.Y)(a8,{sessionId:L,eventId:P,sortedActions:T,changesSummary:R,changeStatus:ec,onCancel:function(){eP(!1)},handleAutoRestart:eA,doAutoApplyChanges:eC,prevUserMessageContent:W}):null]}):null:null}function la(e){var n=e.changeStatus,t=e.isLoadingFilesChangedSinceCommit,r=e.hasAnyChangedPaths,i=e.changedPaths,o=e.openPane,a=e.handleRetryProposingChanges,l=e.handleApplyChanges,s=e.isAgentActive,c=e.agentRunState,u=e.handlePauseAgent,d=e.assistantAutoApplyChanges,p=e.openMultiDiffPane,h=e.isMultistepApplyUIVisible,m=e.hasSingleFileChangeOnly,g=e.hasAnyFileChanges;return h||"pending"!==n.state?null:t?(0,f.Y)(F.S,{css:li.buttonRow,row:!0,gap:8,align:"center",children:(0,f.Y)(eg.$n,{text:"Validating code changes…",iconLeft:(0,f.Y)(tn.A,{}),disabled:!0})}):r?(0,f.FD)(f.FK,{children:[(0,f.Y)(aq,{changedPaths:i,openPane:o}),(0,f.FD)(F.S,{css:li.buttonRow,row:!0,gap:8,align:"center",children:[(0,f.Y)(eg.$n,{text:"Retry ".concat(aG.go),onClick:a,iconLeft:(0,f.Y)(lr.A,{})}),(0,f.Y)(eg.$n,{text:"Overwrite and apply",onClick:l,iconLeft:(0,f.Y)(ap.A,{}),colorway:"warning"})]})]}):(0,f.FD)(F.S,{css:li.buttonRow,row:!0,gap:8,align:"center",children:[s?(0,f.Y)(a9,{runState:c,onClick:u}):null,(0,f.Y)(rc.m_,{tooltip:"Pause agent before applying changes",placement:"top",isDisabled:!s,children:(0,f.Y)(eg.$n,{text:m?"Apply":"Apply all",onClick:l,iconLeft:(0,f.Y)(ap.A,{}),disabled:s,colorway:d?"green":"primary"})}),g?(0,f.Y)(eg.$n,{text:"Preview code changes",onClick:p,iconLeft:(0,f.Y)(ln.A,{}),disabled:s}):null]})}function ll(e){var n=e.proposedActions,t=(0,t8._)(e,["proposedActions"]);return n&&(n.fileChanges.length>0||n.hasAnyWorkspaceProposedActions)?(0,f.Y)(lo,(0,K._)({},t,n)):null}var ls=(0,M.x)({container:[B.wp.px(16),B.wp.py(8)]});function lc(){return(0,f.Y)(F.S,{css:ls.container,children:(0,f.Y)(tZ.N,{text:"".concat(S.BP," saved your work"),icon:(0,f.Y)(ap.A,{}),colorway:"primary"})})}var lu=t(54759),ld=t(30094),lp=function(e){return e.None="none",e.Starter="starter",e.Paid="paid",e}({}),lf=(0,M.x)({root:[B.wp.py(4),B.wp.px(8),B.wp.borderRadius(),B.wp.border({color:ez.LU.outlineDimmest})],icon:{paddingTop:3},mainContent:[B.wp.flex.growAndShrink(1),B.wp.colWithGap(4)],footer:[{"@container (max-width: 400px)":[B.wp.colWithGap(8),B.wp.align.start,B.wp.height("100%")]}],footerActions:[B.wp.flex.growAndShrink(1),B.wp.flex.row,B.wp.justify.end,B.wp.color.foregroundDimmer,{"@container (max-width: 400px)":{width:"100%"}}],footerSmallButtonContainer:[B.wp.display.inlineFlex,{"@container (max-width: 400px)":[B.wp.flex.grow(1)]}],footerSmallButton:[{marginTop:-10,marginRight:-4},{"@container (max-width: 400px)":{margin:0}}],timestamp:[B.wp.rowWithGap(4),B.wp.flex.wrap],summaryContainer:[B.wp.width(200)]});function lh(e){var n=e.commitId,t=e.changeSetSummary,r=e.date,i=e.isAtCheckpoint,o=e.isRestoring,a=e.wasReverted,l=e.isLoading,s=e.onCommitRestore,c=e.onOpenCommit,u=e.restoreButtonText,d=e.usageIndicatorVariant,p=oB(),h="starter"===d?"Used 1 ".concat(i5.Lm," plan ").concat(S.BP," ").concat(aG.go):"The ".concat(aG.go," for this checkpoint used ").concat(aG.a7,"\xa2 ").concat(p?"":"of your usage credits",".");return(0,f.FD)(eo.ui,{elevated:!0,css:lf.root,row:!0,gap:8,children:[(0,f.Y)(F.S,{css:lf.icon,children:(0,f.Y)(im.A,{color:ez.LU.foregroundDimmest})}),(0,f.FD)(F.S,{css:lf.mainContent,children:[(0,f.FD)(F.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.FD)(F.S,{row:!0,gap:4,children:[(0,f.Y)(I.EY,{maxLines:2,color:a&&!i?"dimmer":"default",style:{textDecoration:a&&!i?"line-through":void 0},children:i?"Currently at checkpoint":"Checkpoint made"}),a&&!i?(0,f.Y)(I.EY,{color:"dimmer",children:"Reverted"}):null]}),"none"!==d?(0,f.Y)(rc.m_,{tooltip:h,placement:"top",children:(0,f.Y)(ld.A,{})}):null]}),(0,f.Y)(F.S,{children:void 0!==l&&l?(0,f.Y)(F.S,{css:lf.summaryContainer,children:(0,f.Y)(lu.Ay,{speed:2,backgroundColor:ez.LU.backgroundHighest,foregroundColor:ez.LU.backgroundHigher,height:18,children:(0,f.Y)("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"200",height:"16"})})}):t?(0,f.Y)(I.EY,{color:"dimmer",variant:"small",children:t}):null}),(0,f.FD)(F.S,{css:lf.footer,row:!0,align:"center",children:[(0,f.FD)(F.S,{row:!0,gap:8,children:[r?(0,f.Y)(F.S,{css:lf.timestamp,style:{color:ez.LU.foregroundDimmer},children:(0,f.Y)(ed.Dc,{textVariant:"small",live:!0,date:r})}):null,n?(0,f.Y)(lm,{commitId:n,onOpenCommit:c}):null]}),(0,f.Y)(F.S,{css:lf.footerActions,children:n&&s&&!i?(0,f.Y)(rc.m_,{tooltip:"Already at this checkpoint",isDisabled:!i,css:lf.footerSmallButtonContainer,children:(0,f.Y)(eg.$n,{css:lf.footerSmallButton,onClick:s,iconLeft:o?(0,f.Y)(tn.A,{}):a?(0,f.Y)(lr.A,{}):(0,f.Y)(oV.A,{}),disabled:o||i,size:"small",variant:"outlined",text:a?"Restore checkpoint":void 0===u?"Go to this checkpoint":u})}):null})]})]})]})}function lm(e){var n=e.commitId,t=e.onOpenCommit;return(0,f.FD)(F.S,{css:lf.timestamp,style:{color:ez.LU.foregroundDimmer},children:[(0,f.Y)(I.EY,{variant:"small",multiline:!1,children:"•"}),t?(0,f.Y)(eg.$n,{variant:"underlinedOnHover",text:n.slice(0,8),size:"small",onClick:function(){return t(n)}}):(0,f.Y)(I.EY,{variant:"small",children:n})]})}var lg=(0,M.x)({root:[B.wp.px(16),B.wp.py(8),B.wp.colWithGap(8)],errorContainer:[B.wp.color.accentNegativeDefault]});function lv(e){var n,t=e.commitHash,r=e.created,i=e.onOpenCommit,o=e.onRestoreToCommit,a=e.isRestoring,l=e.error,s=void 0===l?null:l,c=e.currentCommit,u=void 0===c?null:c,d=e.commitDetails,p=void 0===d?null:d,h=e.isLoading,m=e.usageIndicatorVariant,g=(null==u?void 0:u.hash)===t,v=(null==u?void 0:u.trailers[rz.aT])===t,w=(n=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!o)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,o()];case 2:case 3:return e.sent(),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)});return(0,f.FD)(F.S,{css:lg.root,children:[s?(0,f.Y)(F.S,{css:lg.errorContainer,children:s}):null,(0,f.Y)(lh,{commitId:t,changeSetSummary:null==p?void 0:p.subject,date:r,isAtCheckpoint:!!(v||g),isRestoring:void 0!==a&&a,onCommitRestore:w,onOpenCommit:i,isLoading:void 0!==h&&h,usageIndicatorVariant:m})]})}function lw(e){var n,t,r=e.commitHash,i=e.created,o=e.onOpenCommit,a=e.onRestoreToCommit,l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(null),2),d=u[0],p=u[1],h=(0,v._)((0,w.useState)(!0),2),m=h[0],g=h[1],S=(0,v._)((0,w.useState)(null),2),Y=S[0],A=S[1],C=(0,v._)((0,w.useState)(null),2),x=C[0],k=C[1],_=(0,v._)((0,w.useState)(!0),2),D=_[0],E=_[1];(0,rG.A)((n=(0,y._)(function(e){var n,t,i,o;return(0,b.YH)(this,function(a){switch(a.label){case 0:return[4,Promise.all([e.getCommit({commit:"HEAD"}),e.getCommit({commit:r})])];case 1:return t=(n=v._.apply(void 0,[a.sent(),2]))[0],i=n[1],t.error?A(null):(o={},Object.entries(t.trailers||{}).forEach(function(e){var n=(0,v._)(e,2),t=n[0],r=n[1];o[t]=null!=r?r:""}),A({hash:t.hash,trailers:o})),i.error?k(null):k({subject:i.subject}),g(!1),[2,{error:null}]}})}),function(e){return n.apply(this,arguments)}),[r]),(0,w.useEffect)(function(){if(D){var e=setTimeout(function(){E(!1)},3e3);return function(){return clearTimeout(e)}}},[D]);var R=(t=(0,y._)(function(){return(0,b.YH)(this,function(e){if(!a)return[2];c(!0);try{a(),p(null)}catch(e){p("Failed to restore to checkpoint")}finally{c(!1)}return[2]})}),function(){return t.apply(this,arguments)});return(0,f.Y)(lv,{commitHash:r,created:i,onOpenCommit:o,onRestoreToCommit:R,isRestoring:s,error:d,currentCommit:Y,commitDetails:x,isLoading:m,usageIndicatorVariant:lp.None})}var ly=(0,M.x)({container:[B.wp.flex.growAndShrink(1)],costInfo:[B.wp.height(24)]});function lb(e){var n=e.eventId,t=e.sessionId,r=e.hasUserExhaustedMonthlyCredits,i=e.didCountEditRequest,o=aL({sessionId:t,eventIdWhichProposedChanges:n});return(0,f.Y)(F.S,{css:ly.container,row:!0,gap:4,justify:"start",children:i&&"pending"===o.state?(0,f.Y)(F.S,{css:ly.costInfo,row:!0,align:"center",children:(0,f.Y)(rc.m_,{tooltip:"This ".concat(aG.go," used ").concat(aG.a7,"\xa2 ").concat(r?"":"of your usage credits","."),placement:"bottom",children:(0,f.Y)(ld.A,{color:ez.LU.foregroundDimmer})})}):null})}var lS=t(51888),lY=(0,M.x)({path:[B.wp.flex.growAndShrink(1),B.wp.align.center],source:[B.wp.color.foregroundDimmest],sourceArrow:[B.wp.mx(8)]});function lA(e){var n=e.path,t=e.prefix,r=e.source,i=e.onClick;return(0,f.FD)(F.S,{css:lY.path,row:!0,gap:8,children:[(0,f.Y)(te.A,{path:n}),(0,f.FD)(I.EY,{multiline:!1,children:[(0,f.Y)(lS.mi,{path:n,prefix:t,onClick:i}),r?(0,f.FD)("span",{css:lY.source,children:[(0,f.Y)("span",{css:lY.sourceArrow,children:"←"}),(0,f.Y)(lS.mi,{path:r})]}):null]})]})}var lC=t(44885),lx=t(68153),lk=(0,M.x)({list:[B.wp.px(4),B.wp.colWithGap(2)]});function l_(e){var n,t,r=e.isOpen,i=e.files,o=e.commitHash,a=e.callback,l=(0,e$.A)(a),s=(0,w.useCallback)(function(){var e;null===(e=l.current)||void 0===e||e.call(l,!0)},[l]),c=(0,w.useCallback)(function(){var e;null===(e=l.current)||void 0===e||e.call(l,!1)},[l]),u=(n=o,(0,rG.A)((t=(0,y._)(function(e){var t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(!n)return[2,{error:rz.uA.INVALID_REFERENCE}];return[4,e.status()];case 1:if((t=i.sent()).error)return[2,{error:t.error}];return[4,e.getCommit({commit:n})];case 2:if((r=i.sent()).error)return[2,{error:r.error}];return[2,r]}})}),function(e){return t.apply(this,arguments)}),[n])),d=u&&!u.error&&u.subject;return(0,f.Y)(lC.a,{isOpen:r,onRequestClose:c,children:r?(0,f.FD)(F.S,{gap:8,children:[(0,f.Y)(I.Y9,{level:2,children:u?"Restore to ".concat(null!=d?d:"".concat(S.BP," checkpoint")):(0,f.Y)(tn.A,{})}),0===i.length?(0,f.Y)(I.EY,{multiline:!1,children:"No file changes for this commit."}):(0,f.FD)(f.FK,{children:[(0,f.Y)(lD,{files:i}),(0,f.FD)(F.S,{row:!0,gap:8,justify:"end",children:[(0,f.Y)(eg.$n,{text:"Cancel",iconLeft:(0,f.Y)(lx.A,{}),onClick:c}),(0,f.Y)(eg.$n,{text:"Restore Commit",iconLeft:(0,f.Y)(oV.A,{}),colorway:"primary",onClick:s})]})]})]}):null})}function lD(e){var n=e.files;return(0,f.Y)(F.S,{gap:12,children:(0,f.FD)(F.S,{gap:4,children:[(0,f.Y)(I.EY,{multiline:!1,children:"The following ".concat((0,tL.A)("file",n.length)," will be modified")}),(0,f.Y)(lE,{files:n})]})})}function lE(e){var n=e.files,t=(0,w.useMemo)(function(){return n.length>20?n.slice(0,20):n},[n]);return(0,f.Y)(F.S,{children:(0,f.FD)("ul",{css:lk.list,children:[t.map(function(e){return(0,f.Y)("li",{children:(0,f.Y)(lA,{path:e.path,source:e.originalPath})},e.path)}),n.length<=20?null:(0,f.Y)("li",{children:(0,f.FD)(I.EY,{color:"dimmer",children:["… ",n.length-20," more"," ",(0,tL.A)("file",n.length-20)]})})]})})}function lR(){var e,n,t=(0,v._)((0,w.useState)(function(){return{isOpen:!1,files:[]}}),2),r=t[0],i=t[1],o=(e=(0,A.A)().git,(0,w.useCallback)((n=(0,y._)(function(n){var t,r,i,o;return(0,b.YH)(this,function(a){switch(a.label){case 0:return t=n.commitA,r=n.commitB,[4,e.status()];case 1:if(null!==(i=a.sent()).error)return[2,{error:i.error}];return[4,e.getChangesBetweenCommits({a:t,b:r})];case 2:if(null!==(o=a.sent()).error)return[2,{error:o.error}];return[2,{error:null,files:o.files}]}})}),function(e){return n.apply(this,arguments)}),[e]));return{confirmRestoreToCommit:(0,w.useCallback)(function(e){var n;return new Promise((n=(0,y._)(function(n,t){var r,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:return[4,o({commitA:"HEAD",commitB:e})];case 1:if((r=l.sent()).error)return t(r.error),[2];if(0===r.files.length)return t("No files changed"),[2];return a=function(e){i({isOpen:!1,files:[],callback:void 0,commitHash:void 0}),n(e)},i({isOpen:!0,files:r.files,callback:a,commitHash:e}),[2]}})}),function(e,t){return n.apply(this,arguments)}))},[o]),restoreConfirmationModal:(0,w.useMemo)(function(){return(0,f.Y)(l_,(0,K._)({},r))},[r])}}var lI=t(48088);function lF(e){var n=e.children,t=e.intent,r=e.showUpsell,i=e.date;return(0,f.FD)(F.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(or.A,{size:24}),(0,f.Y)(I.EY,{variant:"small",color:"dimmer",children:S.BP}),r?(0,f.Y)(oe,{}):null,(0,f.Y)(ed.Dc,{textVariant:"small",textColor:"dimmest",date:i}),(null==t?void 0:t.kind)==="message"?(0,f.Y)(lI.m2,{intent:t.value,icon:{color:ez.LU.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,(null==t?void 0:t.kind)==="inline"?(0,f.Y)(lI.vc,{type:t.value,icon:{color:ez.LU.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,n]})}var lT=(0,M.x)({root:[B.wp.px(16),B.wp.py(8),B.wp.colWithGap(8)],footerRight:[B.wp.flex.growAndShrink(1)]});function lP(e){var n=e.children,t=e.headerProps,r=void 0===t?{showUpsell:!1,intent:null,date:new Date}:t,i=e.headerActions,o=e.footer,a=e.footerActions,l=(0,t8._)(e,["children","headerProps","headerActions","footer","footerActions"]);return(0,f.FD)(F.S,(0,e7._)((0,K._)({css:lT.root},l),{children:[(0,f.Y)(lF,(0,e7._)((0,K._)({},r),{children:i})),n,o||a?(0,f.FD)(F.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(F.S,{children:o}),(0,f.Y)(F.S,{css:lT.footerRight,row:!0,gap:8,align:"center",justify:"end",children:a})]}):null]}))}function lL(e){var n=(0,S.Gk)(),t=(0,v._)((0,w.useState)(n),1)[0];switch(e.type){case C.fqQ.MANUALLY_ABORTED:return(0,f.Y)(tZ.N,{icon:(0,f.Y)(rd.A,{}),text:"Message was stopped"});case C.fqQ.USAGE_LIMIT:return(0,f.Y)(tZ.N,{icon:(0,f.Y)(o9.A,{}),colorway:"orange",text:"Usage limit reached"});default:return(0,f.Y)(tZ.N,{icon:(0,f.Y)(o9.A,{}),colorway:"red",text:t?"Something went wrong":"Please refresh the page and try again"})}}var lU=t(28978),lN=t(97715);function lO(){var e,n=(0,A.A)().git;return(0,w.useCallback)((e=(0,y._)(function(e){var t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return t=e.commitHash,[4,n.status()];case 1:if(null!=(r=o.sent()).error)return[2,{error:r.error}];return[4,n.restoreCommit({commit:t})];case 2:if(i=o.sent(),n.forceRefresh(),null!=i.error)return[2,{error:i.error}];return[2,{}]}})}),function(n){return e.apply(this,arguments)}),[n])}var lM=(0,w.memo)(function(e){var n,t,r,i,o,a,l,s=e.id,c=e.data,u=e.prevData,d=e.openPane,p=e.removePane,h=e.openAiChatSettingsPanel,m=e.isLastEvent,g=lO(),v=lR(),S=v.confirmRestoreToCommit,Y=v.restoreConfirmationModal,A=oB(),x=ok(d),k=(0,w.useCallback)(function(e,n){return d({type:"webview",data:{ports:{path:e,port:n,type:"local"}}})},[d]),_=(n=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!(null===(e=c.proposedActions)||void 0===e?void 0:e.commitId))return[2];return[4,S(c.proposedActions.commitId)];case 1:if(!n.sent())return[3,3];return[4,g({commitHash:c.proposedActions.commitId})];case 2:n.sent(),n.label=3;case 3:return[2]}})}),function(){return n.apply(this,arguments)}),D=(0,oA.Vd)({openFile:x,messageSenderType:C.utd.AI}),E=(0,lN.A)({openWebview:k,ragSources:c.ragSources}),R=(0,w.useCallback)(function(e){return d({type:"git",data:{mode:{type:lU.C.COMMIT,hash:e}}})},[d]),I=c.state===C.qOk.COMPLETE,T=null===(t=c.proposedActions)||void 0===t?void 0:t.didCreateCheckpoint,P=(null==u?void 0:u.type)==="userMessage"?u.content:void 0;return(0,f.FD)(F.S,{children:[Y,T?m?(0,f.Y)(lc,{}):(0,f.Y)(lw,{commitHash:null!==(a=null===(r=c.proposedActions)||void 0===r?void 0:r.commitId)&&void 0!==a?a:"",created:c.created,onOpenCommit:R,onRestoreToCommit:_}):null,(0,f.FD)(lP,{"data-cy":"message-from-ai",headerProps:{showUpsell:!0,date:c.created,intent:c.intent},headerActions:(0,f.Y)(lb,{eventId:s,sessionId:c.sessionId,didCountEditRequest:null!==(l=null===(i=c.proposedActions)||void 0===i?void 0:i.didCountEditRequest)&&void 0!==l&&l,hasUserExhaustedMonthlyCredits:A}),footer:I&&c.error?(0,f.Y)(lL,{type:c.error}):null,children:[(0,f.Y)(aW,{eventId:s,content:c.content,intent:(null===(o=c.intent)||void 0===o?void 0:o.kind)==="message"?c.intent.value:null,ragSources:c.ragSources,proposedActions:c.proposedActions,sessionId:c.sessionId,openPane:d,removePane:p,markdownCodeComponent:c.isDebugMessage?void 0:D,markdownLinkComponent:E,eventState:c.state}),(0,f.Y)(ll,{eventId:s,proposedActions:c.proposedActions,isLatestProposedActionsEvent:c.isLatestProposedActionsEvent,isMessageComplete:I,sessionId:c.sessionId,openAiChatSettingsPanel:h,openPane:d,removePane:p,prevUserMessageContent:P})]})]})}),lB=(0,M.x)({container:[B.wp.flex.growAndShrink(1),B.wp.borderRadius(),B.wp.py(4),B.wp.px(8),B.wp.border({color:ez.LU.outlineDimmest}),oW.b.filledAndOutlined],runButton:[B.wp.rowWithGap(4),B.wp.justify.center,B.wp.align.center,B.wp.height(24),B.wp.minWidth(48),B.wp.cursor.pointer,B.wp.position.relative,B.wp.fontWeight.medium]});function lH(e){var n=e.isWorkflowLoading,t=e.isRunning,r=e.forceDisable,i=e.handleRunButtonClick;return n?(0,f.FD)(F.S,{css:lB.runButton,children:[(0,f.Y)(tn.A,{size:12}),(0,f.Y)(I.EY,{multiline:!1,variant:"small",children:"Loading"})]}):t?(0,f.FD)(F.S,{css:lB.runButton,onClick:i,children:[(0,f.Y)(o3.A,{size:12}),(0,f.Y)(I.EY,{multiline:!1,variant:"small",children:"Rerun"})]}):(0,f.FD)(F.S,{disabled:r,css:lB.runButton,onClick:i,children:[(0,f.Y)(o8.A,{size:12}),(0,f.Y)(I.EY,{multiline:!1,variant:"small",children:"Run"})]})}function lz(){var e,n,t,r,i=(0,nH.OK)(),o=(0,nH.oh)(),a=null==i?void 0:i.runButton,l=(0,nH.cz)(),s=l.isRunning,c=l.runButtonRunsWorkflows,u=l.isDisabled,d=(0,nH.d_)(),p=(0,w.useCallback)(function(){(0,t7.u4)(t7.AZ.RUN_BUTTON_CLICKED,{source:"assistantRerunButton",runner:c?"workflows":"pid1"}),d()},[c,d]);return(0,f.Y)(eo.ui,{css:lB.container,children:(0,f.Y)(rc.m_,{placement:"top",tooltip:(n=(e={forceDisable:u,runButtonText:a,isRunning:s,isWorkflowLoading:o}).forceDisable,t=e.isRunning,r=e.isWorkflowLoading,(0,f.Y)(I.EY,{variant:"small",color:"dimmer",children:n?"Run button is not configured":r?"Connecting to the workspace":t?"Rerun app":"Run app"})),children:(0,f.Y)(lH,{forceDisable:u,handleRunButtonClick:p,isRunning:s,isWorkflowLoading:o})})})}var lW=(0,M.x)({root:[B.wp.px(16),B.wp.py(8),B.wp.colWithGap(8)],errorContainer:[B.wp.color.accentNegativeDefault]});function lG(e){var n,t,r,i=e.sessionId,o=e.commitHash,a=e.created,l=e.eventId,s=e.eventWhichProposedChanges,c=e.onOpenCommit,u=e.appliedChanges,d=e.usageIndicatorVariant,p=e.changeSetSummary,h=e.didCountEditRequest,m=(0,i2.m5)(),g=(0,nX.gc)("assistantAutoRestartRepl").preferences,Y=(0,v._)((0,w.useState)(!1),2),A=Y[0],C=Y[1],x=(0,v._)((0,w.useState)(null),2),_=x[0],D=x[1],E=lV("HEAD"),R=lV("HEAD^1"),T=E&&!E.error&&E.hash===o,P="reverted"===aL({sessionId:i,eventIdWhichProposedChanges:s}).state,L=E&&!E.error&&E.trailers[rz.aT]===o,U=lO(),N=lR(),O=N.confirmRestoreToCommit,M=N.restoreConfirmationModal,B=(n=i,t=(0,S.NC)(),r=(0,k.J2)(t.sessions.get(n)),(0,w.useCallback)(function(e){if(null!=n)return null==r?void 0:r.appendEvent({kind:"iterativeAgent",action:e})},[r,n]));function H(){return(H=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!o)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,O(o)];case 2:return e.sent()&&z(o),[3,4];case 3:return e.sent(),D("Something went wrong. Please try again."),[3,4];case 4:return[2]}})})).apply(this,arguments)}function z(e){return W.apply(this,arguments)}function W(){return(W=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!e)return[2];return C(!0),[4,U({commitHash:e})];case 1:if((n=t.sent()).error)return D(n.error),C(!1),[2];return D(null),C(!1),[2]}})})).apply(this,arguments)}var G=R&&!R.error,V=(0,f.FD)(f.FK,{children:[(0,f.Y)(I.EY,{variant:"small",color:"dimmer",children:"You may need to re-run your App to see the latest changes take effect."}),m?null:(0,f.Y)(lz,{})]});return(0,f.FD)(F.S,{css:lW.root,children:[M,_?(0,f.FD)(F.S,{css:lW.errorContainer,row:!0,gap:8,align:"center",children:[(0,f.Y)(lt.A,{}),_]}):null,T?G?(0,f.Y)(lh,{commitId:o,changeSetSummary:p,date:a,isAtCheckpoint:!1,isRestoring:A,onOpenCommit:c,onCommitRestore:(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,z(R.hash)];case 1:return e.sent(),B({eventIdWhichProposedChanges:s,eventIdWhichAppliedChanges:l,revertedChanges:u}),[2]}})}),restoreButtonText:"Undo these changes",usageIndicatorVariant:h?d:lp.None}):null:(0,f.Y)(lh,{commitId:o,changeSetSummary:p,date:a,isAtCheckpoint:!!L,isRestoring:A,onCommitRestore:function(){return H.apply(this,arguments)},onOpenCommit:c,usageIndicatorVariant:h?d:lp.None,wasReverted:P}),(0,f.Y)(F.S,{gap:8,align:"start",children:T&&!g.assistantAutoRestartRepl?V:null})]})}function lV(e){var n;return(0,rG.A)((n=(0,y._)(function(n){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,n.getCommit({commit:e})];case 1:if((t=r.sent()).error)return[2,t];return[2,{hash:t.hash,trailers:t.trailers,error:null,body:t.body,subject:t.subject}]}})}),function(e){return n.apply(this,arguments)}),[e])}function lj(e){var n=e.id,t=e.data,r=e.proposedActionEventData,i=e.openPane,o=e.checkpointUsageIndicatorVariant,a=(0,k.J2)(r),l=(0,w.useCallback)(function(e){return i({type:"git",data:{mode:{type:lU.C.COMMIT,hash:e}}})},[i]);if((null==a?void 0:a.type)!=="assistantMessage"||!a.proposedActions)return null;if((0,C.VFn)(t.contents.contents,"appliedFileChanges")){var s=a.proposedActions,c=s.summary,u=s.didCountEditRequest;return(0,f.Y)(lG,(0,e7._)((0,K._)({},(0,C.QNh)(t.contents.contents)),{sessionId:t.sessionId,eventId:n,created:t.created,onOpenCommit:l,usageIndicatorVariant:o,changeSetSummary:c,didCountEditRequest:u}))}return(0,C.VFn)(t.contents.contents,"revertedFileChanges"),null}var lZ=t(96842),lq=t(16660),lK=t(65995),l$=(0,M.x)({bannerContainer:[B.wp.position.sticky],loadingContainer:[B.wp.center,B.wp.flex.growAndShrink(1)]});function lJ(e){var n,t,r=e.shouldAutoscrollRef,i=(0,t8._)(e,["shouldAutoscrollRef"]),o=(0,w.useRef)(new Map),a=i.sessionId,l=(n=(0,w.useRef)(null),t=(0,k.HJ)(!1),(0,w.useEffect)(function(){var e=n.current;if(e){var r=function(){var n=e.scrollTop>0;t.current!==n&&t.set(n)},i=requestAnimationFrame(r),o=function(){i&&cancelAnimationFrame(i),i=requestAnimationFrame(r)};return e.addEventListener("scroll",o),function(){e.removeEventListener("scroll",o),i&&cancelAnimationFrame(i)}}},[n,t]),{scrollerRef:n,isScrolledDown:t}),s=l.scrollerRef,c=l.isScrolledDown;return(0,f.FD)(lK.y,{shouldAutoScrollRef:r,scrollCacheKey:a,scrollCache:o.current,scrollerRef:s,children:[(0,f.Y)(F.S,{css:l$.bannerContainer,children:(0,f.Y)(ou,{})}),(0,f.Y)(lQ,(0,K._)({},i)),(0,f.Y)(lq.U,{show:c})]})}function lQ(e){var n,t=e.sessionId,r=(0,t8._)(e,["sessionId"]),i=(0,S.NC)(),o=null===(n=(0,k.J2)(i.sessions.chat,null))||void 0===n?void 0:n.get(t),a=(0,w.useMemo)(function(){return null==o?void 0:o.transform(om,1e3)},[o]),l=(0,k.Rj)(function(){return null==a?void 0:a.tuples},[a]),s=(0,k.Rj)(function(){return null==a?void 0:a.mapped},[a]),c=(0,k.J2)(null==o?void 0:o.leaf),u=(0,lZ.F)()?lp.Starter:lp.Paid,d=(0,og.z7)();return l&&s?(0,f.Y)(og.cX,{value:d,children:l.map(function(e,n){var t=(0,v._)(e,2),i=t[0],o=t[1];return(0,f.Y)(lX,(0,K._)({id:i,data:o,prevData:n>0?l[n-1][1]:void 0,isLastEvent:i===c,checkpointUsageIndicatorVariant:u,eventDataMap:s},r),i)})}):(0,f.Y)(F.S,{css:l$.loadingContainer,children:(0,f.Y)(tn.A,{})})}function lX(e){var n=e.id,t=e.data,r=e.prevData,i=e.eventDataMap,o=(0,t8._)(e,["id","data","prevData","eventDataMap"]),a=(0,A.A)(),l=a.secrets,s=a.fs,c=(0,k.J2)(t),u=(0,k.J2)(r);if((null==c?void 0:c.type)==="userMessage")return(0,f.Y)(oD,{data:c,openPane:o.openPane,readFile:s.readFile});if((null==c?void 0:c.type)==="assistantMessage")return(0,f.Y)(lM,(0,K._)({id:n,data:c,prevData:u,addSecretEntries:l.addEntries},o));if((null==c?void 0:c.type)==="assistantAction"){var d=i.get(c.eventIdWhichProposedAction);return(0,f.Y)(lj,(0,K._)({id:n,data:c,proposedActionEventData:d},o))}return null}var l0=t(79891),l1=t(6164),l2=t(50462),l4=t(34787),l5=t(74863);function l8(e){var n=e.hasAccessToAdvancedModel,t=(0,i$._P)({controlName:"flag-poliwag-override"}),r=(0,nX.gc)("assistantAutoApplyChanges","assistantAutoRestartRepl","assistantAdvancedModelOverride"),i=r.preferences,o=r.update,a=(0,S.so)(),l=a.advancedModel,s=a.overrideModel,c=t?(0,f.FD)(f.FK,{children:[(0,f.Y)(l4.n,{setting:l2.KY.assistantAdvancedModelOverride,currentValue:i.assistantAdvancedModelOverride,update:o,title:(0,f.FD)(f.FK,{children:[(0,f.Y)(F.S,{row:!0,gap:8,align:"center",justify:"start",children:(0,f.Y)(I.EY,{multiline:!1,children:"Model Override"})}),(0,f.Y)(F.S,{row:!0,gap:8,children:(0,f.FD)(I.EY,{variant:"small",color:"dimmest",children:["Current: ",(null!=s?s:l).name.readable]})})]})}),(0,f.Y)(l5.a,{})]}):null;return(0,f.FD)(f.FK,{children:[c,n?(0,f.Y)(l4.n,{setting:l2.KY.assistantAutoApplyChanges,update:o,currentValue:i.assistantAutoApplyChanges}):(0,f.Y)(l4.j,{setting:l2.KY.assistantAutoApplyChanges,currentValueOption:void 0,disabledReason:"Advanced Assistant can automatically apply code changes."}),(0,f.Y)(l5.a,{}),n?(0,f.Y)(l4.n,{setting:l2.KY.assistantAutoRestartRepl,update:o,currentValue:i.assistantAutoRestartRepl}):(0,f.Y)(l4.j,{setting:l2.KY.assistantAutoRestartRepl,currentValueOption:void 0,disabledReason:"Advanced Assistant can automatically restart your App after applying changes."})]})}var l3=t(50175);function l6(){var e=(0,$._)(["\n  query UserPrompts {\n    currentUser {\n      id\n      aiPrompts {\n        ... on UserAiPromptsResult {\n          prompts {\n            id\n            prompt\n            title\n          }\n        }\n      }\n    }\n  }\n"]);return l6=function(){return e},e}function l7(){var e=(0,$._)(["\n  mutation UpdateUserAiPrompts($input: UpdateUserAiPromptsInput!) {\n    updateUserAiPrompts(input: $input) {\n      ... on AICustomPrompt {\n        id\n        prompt\n        title\n      }\n    }\n  }\n"]);return l7=function(){return e},e}function l9(){var e=(0,$._)(["\n  mutation EditUserAiPrompt($input: EditUserAiPromptInput!) {\n    editUserAiPrompt(input: $input) {\n      ... on AICustomPrompt {\n        id\n        prompt\n        title\n      }\n    }\n  }\n"]);return l9=function(){return e},e}function se(){var e=(0,$._)(["\n  mutation DeleteUserAiPrompts($input: DeleteUserAiPromptsInput!) {\n    deleteUserAiPrompt(input: $input) {\n      ... on DeleteUserAiPromptResult {\n        id\n      }\n    }\n  }\n"]);return se=function(){return e},e}function sn(){var e=(0,$._)(["\n  query ReplSelectedPrompt($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        replAiPromptId\n      }\n    }\n  }\n"]);return sn=function(){return e},e}function st(){var e=(0,$._)(["\n  mutation UpdateReplAiPromptSelection(\n    $input: UpdateReplAiPromptSelectionInput!\n  ) {\n    updateReplAiPromptSelection(input: $input) {\n      ... on UpdateReplAiPromptSelectionResult {\n        repl {\n          id\n        }\n      }\n    }\n  }\n"]);return st=function(){return e},e}function sr(){var e=(0,$._)(["\n  mutation DeleteReplAiPromptSelection(\n    $input: DeleteReplAiPromptSelectionInput!\n  ) {\n    deleteReplAiPromptSelection(input: $input) {\n      ... on DeleteReplAiPromptSelectionResult {\n        repl {\n          id\n        }\n      }\n    }\n  }\n"]);return sr=function(){return e},e}var si={},so=(0,J.J1)(l6()),sa=(0,J.J1)(l7()),sl=(0,J.J1)(l9()),ss=(0,J.J1)(se()),sc=(0,J.J1)(sn()),su=(0,J.J1)(st()),sd=(0,J.J1)(sr()),sp=t(25893),sf=(0,M.x)({input:[B.wp.maxHeight("200px"),{resize:"vertical",overflow:"auto"}],inputContainer:[B.wp.py(4),B.wp.colWithGap(8)],buttonContainer:[B.wp.width("100%"),B.wp.rowWithGap(6),B.wp.justify.end,B.wp.pt(4)]});function sh(e){var n,t,r=e.refetchPrompts,i=e.onClose,o=(0,v._)((0,w.useState)(""),2),a=o[0],l=o[1],s=(0,v._)((0,w.useState)(""),2),c=s[0],u=s[1],d=(0,v._)((0,w.useState)(!1),2),p=d[0],h=d[1],m=(0,v._)((n=(0,K._)({},si,{onCompleted:function(){(0,t7.u4)(t7.AZ.ASSISTANT_USED,{action:"custom_prompt_saved",title:c,prompt:a}),A(),r(),i(),h(!1)},onError:function(){h(!0)}}),l3.n(sa,n)),2),g=m[0],S=m[1].loading,Y=(t=(0,y._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(e=a.trim(),n=c.trim(),!e||!n)return[2];return[4,g({variables:{input:{prompt:e,title:n}}})];case 1:return t.sent(),[2]}})}),function(){return t.apply(this,arguments)}),A=function(){l(""),u("")},C=S||!a||!c;return(0,f.FD)(F.S,{css:sf.inputContainer,children:[p?(0,f.Y)(tZ.N,{icon:(0,f.Y)(lt.A,{}),colorway:"red",text:"Could not save prompt. Try again."}):null,(0,f.Y)(sp.l,{onSubmit:function(e){e.preventDefault(),Y()},children:(0,f.FD)(F.S,{gap:4,children:[(0,f.FD)(F.S,{row:!0,gap:6,align:"center",children:[(0,f.Y)(I.EY,{children:"Title"}),(0,f.Y)(I.EY,{variant:"small",color:"dimmer",children:"(max 70 characters)"})]}),(0,f.Y)(ew.pd,{disabled:S,value:c,onChange:function(e){var n=e.target.value;n.length<=70&&u(n)}}),(0,f.Y)(I.EY,{children:"Prompt"}),(0,f.Y)(ew.ov,{disabled:S,value:a,onChange:function(e){var n=e.target.value;n.length<=15e3&&l(n)},css:sf.input,autoSize:!0}),(0,f.FD)(F.S,{css:sf.buttonContainer,children:[(0,f.Y)(eg.$n,{colorway:"primary",text:"Save",type:"submit",disabled:C,loading:S}),(0,f.Y)(eg.$n,{text:"Cancel",onClick:function(){i(),h(!1)}})]})]})})]})}var sm=t(24692),sg=(0,M.x)({input:[B.wp.maxHeight("200px"),{resize:"vertical",overflow:"auto"}],inputContainer:[B.wp.py(4),B.wp.colWithGap(8)],buttonContainer:[B.wp.width("100%"),B.wp.rowWithGap(6),B.wp.justify.end],form:[B.wp.colWithGap(6)],promptItems:[B.wp.py(8),B.wp.colWithGap(4)],promptItem:[B.wp.borderRadius(),B.wp.py(6),B.wp.px(8)],loading:[B.wp.py(4),B.wp.rowWithGap(6),B.wp.align.center]});function sv(e){var n,t,r,i,o=e.isOpen,a=e.prompts,l=e.promptDataLoading,s=e.onClose,c=e.refetchPrompts,u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1],h=(0,v._)((0,w.useState)(a||[]),2),m=h[0],S=h[1],Y=(0,v._)((0,w.useState)(new Set),2),A=Y[0],C=Y[1],x=(0,v._)((n=(0,K._)({},si,{onCompleted:function(){c()}}),l3.n(ss,n)),2),k=x[0],D=x[1].loading,E=(0,v._)((t=(0,K._)({},si,{onCompleted:function(){c()}}),l3.n(sl,t)),2),R=E[0],T=E[1].loading;(0,w.useEffect)(function(){a&&S(function(e){return a.map(function(n){return A.has(n.id)&&e.find(function(e){return e.id===n.id})||n})})},[a,A]);var P=function(e,n,t){S(function(r){return r.map(function(r){return r.id===e?(0,e7._)((0,K._)({},r),(0,g._)({},n,t)):r})}),C(function(n){return new Set(n).add(e)})},L=(r=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!(null==(n=m.find(function(n){return n.id===e}))?void 0:n.title)||!(null==n?void 0:n.prompt))return[2];return[4,R({variables:{input:{promptId:n.id,prompt:n.prompt,title:n.title}}})];case 1:return t.sent(),C(function(n){var t=new Set(n);return t.delete(e),t}),[2]}})}),function(e){return r.apply(this,arguments)}),U=function(e){S(function(n){return n.map(function(n){return n.id===e&&a&&a.find(function(n){return n.id===e})||n})}),C(function(n){var t=new Set(n);return t.delete(e),t})},N=(i=(0,y._)(function(e){return(0,b.YH)(this,function(n){return k({variables:{input:{promptId:e}}}),[2]})}),function(e){return i.apply(this,arguments)});return(0,f.FD)(lC.a,{isOpen:o,onRequestClose:function(){s(),p(!1)},children:[(0,f.Y)(I.EY,{variant:"subheadBig",children:"Manage Prompts"}),a?(0,f.FD)(F.S,{css:sg.promptItems,children:[(0,q._)(m).sort(function(e,n){return e.title.localeCompare(n.title,void 0,{sensitivity:"base"})}).map(function(e){return(0,f.Y)(_.A,{headerContent:(0,f.Y)(I.EY,{children:e.title}),children:(0,f.Y)(eo.ui,{elevated:!0,css:sg.promptItem,children:(0,f.FD)(sm.lV,{css:sg.form,onSubmit:function(n){n.preventDefault(),L(e.id)},children:[(0,f.FD)(F.S,{row:!0,gap:6,align:"center",children:[(0,f.Y)(I.EY,{children:"Title"}),(0,f.Y)(I.EY,{variant:"small",color:"dimmer",children:"(max 70 characters)"})]}),(0,f.Y)(ew.pd,{disabled:T,value:e.title,onChange:function(n){return P(e.id,"title",n.target.value)}}),(0,f.Y)(I.EY,{children:"Prompt"}),(0,f.Y)(ew.ov,{disabled:T,value:e.prompt,onChange:function(n){return P(e.id,"prompt",n.target.value)},css:sg.input,autoSize:!0}),(0,f.FD)(F.S,{css:sg.buttonContainer,children:[(0,f.Y)(eg.$n,{colorway:"red",text:"Delete",onClick:function(){return N(e.id)},disabled:D}),(0,f.Y)(eg.$n,{colorway:"primary",text:"Save",type:"submit",disabled:!A.has(e.id)||T||!e.title||!e.prompt}),(0,f.Y)(eg.$n,{text:"Reset",onClick:function(){return U(e.id)},disabled:!A.has(e.id)})]})]})})},e.id)}),l?(0,f.FD)(F.S,{css:sg.loading,children:[(0,f.Y)(tn.A,{size:16}),(0,f.Y)(I.EY,{variant:"small",color:"dimmer",children:"Updating prompts…"})]}):null]}):null,(0,f.Y)(F.S,{css:sg.inputContainer,children:d?(0,f.Y)(sh,{refetchPrompts:c,onClose:function(){return p(!1)}}):(0,f.Y)(eg.$n,{text:"Add new prompt",iconLeft:(0,f.Y)(rf.A,{}),colorway:"primary",onClick:function(){return p(!0)}})})]})}var sw="default",sy={id:sw,prompt:"".concat(S.BP," will operate using its default behavior."),title:"Default"},sb=(0,M.x)({select:[B.wp.flex.growAndShrink(1),{"& button":{height:"auto",minHeight:"32px"},"& button > span > div > span":{textAlign:"justify"}}],selectContainer:[B.wp.width("100%"),B.wp.align.center],loadingContainer:[B.wp.px(8),B.wp.py(8),B.wp.borderRadius(),B.wp.mr(24),B.wp.gap(6)],loadingPrompt:[B.wp.width("fit-content"),B.wp.px(4),nL.S.foregroundPulse(),{color:"transparent"}]});function sS(){var e,n,t,r,i,o,a,l,s=(0,v._)((0,w.useState)(!1),2),c=s[0],u=s[1],d=(0,n_.A)(),p=(e=(0,K._)({},si,{notifyOnNetworkStatusChange:!0}),Q.I(so,e)),h=p.data,m=p.loading,g=p.refetch,Y=(n=(0,K._)({},si,{variables:{replId:d}}),Q.I(sc,n)),A=Y.data,C=Y.refetch,x=(0,v._)((t=(0,K._)({},si,{onCompleted:function(){C()}}),l3.n(su,t)),1)[0],k=(0,v._)((r=(0,K._)({},si,{update:function(e,n){var t,r=n.data;(null==r?void 0:null===(t=r.deleteReplAiPromptSelection)||void 0===t?void 0:t.__typename)==="DeleteReplAiPromptSelectionResult"&&r.deleteReplAiPromptSelection.repl.id&&e.modify({id:e.identify({__typename:"Repl",id:d}),fields:{replAiPromptId:function(){}}})}}),l3.n(sd,r)),1)[0],_=h&&(null===(o=h.currentUser)||void 0===o?void 0:o.aiPrompts.__typename)==="UserAiPromptsResult"?null===(a=h.currentUser)||void 0===a?void 0:a.aiPrompts.prompts:[],D=(null==A?void 0:A.getRepl.__typename)==="Repl"?A.getRepl.replAiPromptId:void 0,T=(i=(0,y._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(e!==sw)return[3,3];if(!D)return[3,2];return[4,k({variables:{input:{replId:d,promptId:D}}})];case 1:i.sent(),i.label=2;case 2:return[2];case 3:return[4,x({variables:{input:{promptId:e,replId:d}}})];case 4:return(null===(t=i.sent().data)||void 0===t?void 0:null===(n=t.updateReplAiPromptSelection)||void 0===n?void 0:n.__typename)==="UpdateReplAiPromptSelectionResult"&&(r=_.find(function(n){return n.id===e}),(0,t7.u4)(t4.AZ.ASSISTANT_USED,{action:"custom_prompt_selected",title:null==r?void 0:r.title,prompt:null==r?void 0:r.prompt})),[2]}})}),function(e){return i.apply(this,arguments)});return(0,f.FD)(F.S,{gap:4,children:[(0,f.FD)(I.EY,{multiline:!1,children:[S.BP," Prompt"]}),(0,f.FD)(I.EY,{variant:"small",color:"dimmest",children:["Personalize your ",S.BP," with custom rules & instructions"]}),m?(0,f.FD)(eo.ui,{css:sb.loadingContainer,elevated:!0,children:[(0,f.Y)(I.EY,{css:sb.loadingPrompt,children:"Sample prompt title"}),(0,f.Y)(I.EY,{variant:"small",css:sb.loadingPrompt,children:"Sample prompt contents. These are rules & instructions for Assistant behavior."})]}):(0,f.FD)(F.S,{css:sb.selectContainer,row:!0,gap:4,children:[(0,f.Y)(R.l,{"aria-label":"Assistant Custom Prompt",style:{marginRight:0},items:[sy].concat((0,q._)(_)),defaultSelectedKey:(null===(l=_.find(function(e){return D===e.id}))||void 0===l?void 0:l.id)||sw,onSelectionChange:function(e){var n;T((null===(n=_.find(function(n){return n.id===e}))||void 0===n?void 0:n.id)||sw)},css:sb.select,children:function(e){return(0,f.Y)(E.nh,{id:e.id,label:e.title,description:e.prompt,dataCy:e.id},e.id)}}),(0,f.Y)(ev.K0,{alt:"Manage prompts",onClick:function(){return u(!0)},children:(0,f.Y)(af.A,{})})]}),(0,f.Y)(sv,{isOpen:c,prompts:_,promptDataLoading:m,onClose:function(){u(!1)},refetchPrompts:g})]})}var sY=t(90329),sA=t(82568),sC=t(13617),sx=t(25933),sk=t(28896),s_=t(19435),sD=t(91564),sE=t(22498),sR=(0,sE.v)(["fontSize","padding","border"]),sI=sR.cssVars,sF=sR.styleTokens,sT=(0,M.x)({root:[B.wp.center,B.wp.flex.growAndShrink(1)],input:[{backgroundColor:"transparent",border:sF.border,fontSize:sF.fontSize,padding:sF.padding},B.wp.flex.growAndShrink(1)]});function sP(e){var n,t,r=(0,v._)((0,w.useState)(e.initialValue),2),i=r[0],o=r[1],a=(0,e$.A)(e.onCancel),l=(0,sD.A)(function(){return a.current()},[]),s=(0,w.useRef)(null);(0,w.useEffect)(function(){var e;null===(e=s.current)||void 0===e||e.select()},[]);var c=e.compact?(n={},(0,g._)(n,sI.border,"0 none"),(0,g._)(n,sI.fontSize,ez.LU.fontSizeSmall),(0,g._)(n,sI.padding,"0 ".concat(ez.LU.space2)),n):(t={},(0,g._)(t,sI.padding,"".concat(ez.LU.space8)),(0,g._)(t,sI.fontSize,ez.LU.fontSizeDefault),t);return(0,f.Y)(F.S,{style:c,innerRef:l,css:sT.root,row:!0,gap:4,tag:"form",onSubmit:function(n){n.preventDefault(),i&&e.onSubmit(i)},children:(0,f.Y)(ew.pd,{placeholder:"Name this chat",ref:s,css:sT.input,value:i,onChange:function(e){return o(e.currentTarget.value)},onKeyDown:function(n){"Escape"===n.key&&e.onCancel()}})})}var sL=t(95525),sU=t(87860),sN=t(26020),sO=t(17367);function sM(e){var n,t=(0,v._)((0,w.useState)(!1),2),r=t[0],i=t[1];return r?(0,f.Y)(sP,{compact:!0,initialValue:null!==(n=e.title)&&void 0!==n?n:"",onCancel:function(){return i(!1)},onSubmit:function(n){i(!1),e.onRename(n)}}):(0,f.Y)(sH,{title:e.title,archived:e.archived,onRename:function(){return i(!0)},onToggleArchived:e.onToggleArchived})}var sB=(0,M.x)({root:[B.wp.flex.growAndShrink(1),{maxWidth:"100%"}],button:[B.wp.px(4),B.wp.reset.button,B.wp.rowWithGap(4),B.wp.align.center,B.wp.flex.growAndShrink(1),oW.b.nofill,{fontWeight:ez.LU.fontWeightMedium,svg:[B.wp.color.foregroundDimmest],"&:hover svg":[B.wp.color.foregroundDimmer]}],popover:[B.wp.borderRadius(4),B.wp.shadow(1),B.wp.border()],item:[oW.b.listItem,B.wp.minWidth(140),B.wp.px(4),B.wp.py(2)]});function sH(e){var n=["Rename",e.archived?"Unarchive":"Archive"],t=(0,sA.WM)({items:n,onSelectedItemChange:function(n){switch(n.selectedItem){case"Rename":e.onRename();break;case"Archive":case"Unarchive":e.onToggleArchived()}}}),r=(0,v._)((0,w.useState)(null),2),i=r[0],o=r[1],a=(0,v._)((0,w.useState)(null),2),l=a[0],s=a[1],c=(0,sY.E)(i,l,{modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",options:{padding:16}}],placement:"bottom"});return(0,f.Y)(f.FK,{children:(0,f.FD)(F.S,{css:sB.root,children:[(0,f.FD)(F.S,(0,e7._)((0,K._)({tag:"button",css:sB.button},t.getToggleButtonProps({refKey:"innerRef",ref:o})),{children:[(0,f.Y)(s_.n,{variant:"small",color:e.title?"default":"dimmest",multiline:!1,text:e.title||"New chat"}),(0,f.Y)(sN.A,{rotate:180*!!t.isOpen,size:12})]})),(0,f.Y)(F.S,(0,e7._)((0,K._)({},t.getMenuProps({refKey:"innerRef"})),{children:t.isOpen?(0,f.Y)(sU.Z,{children:(0,f.Y)(eo.ui,(0,e7._)((0,K._)({elevated:!0,style:c.styles.popper,innerRef:s,css:sB.popover},c.attributes.popper),{children:n.map(function(e,n){var r=t.highlightedIndex===n?{backgroundColor:ez.LU.interactiveBackground}:void 0;return(0,f.Y)(F.S,(0,e7._)((0,K._)({css:sB.item,style:r},t.getItemProps({refKey:"innerRef",item:e,index:n})),{children:(0,f.Y)(I.EY,{variant:"small",children:e})}),e)})}))}):null}))]})})}var sz=(0,M.x)({tooltip:[B.wp.textAlign.center,B.wp.p(4)]});function sW(e){var n=(0,S.fS)(),t=(0,aV.Z)("assistant-now-defaulting-to-claude-3-5"),r=t.isLoading,i=t.isDone,o=t.setAsDone,a=(null==n?void 0:n.qualified)===sC.oE.qualified&&!1===r&&!1===i;return(0,w.useEffect)(function(){setTimeout(function(){o()},5e3)},[o]),(0,f.Y)(rc.m_,{isOpen:a,onOpenChange:function(e){e||o()},maxWidth:300,tooltip:(0,f.FD)(F.S,{css:sz.tooltip,children:[(0,f.FD)(I.EY,{children:["Currently using ",null==n?void 0:n.readable,"."]}),(0,f.Y)(I.EY,{children:"Configure settings here."})]}),children:(0,f.Y)(ev.K0,{alt:"Settings",onClick:function(){o(),e.onClick()},children:(0,f.Y)(af.A,{})})})}function sG(e){var n=e.sessionCostInCents,t=(0,sx.ET)(),r=t.orgId,i=t.orgSlug,o=(0,i$._P)({controlName:"flag-no-header-usage"}),a=r&&i?"".concat((0,sk.EG)({slug:i}).usage.href,"#agent"):"/usage#agent";return(0,f.Y)(sL.A,{alt:n&&o?"Your usage for this chat: $".concat((n/100).toFixed(2)):"Usage Page",href:a,target:"_blank",onClick:function(){(0,t7.u4)(t7.AZ.ASSISTANT_USED,{action:"opened_usage_link",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"})},children:(0,f.Y)(ld.A,{})})}var sV=(0,M.x)({root:[B.wp.height(28),B.wp.rowWithGap(4),B.wp.px(2),B.wp.justify.spaceBetween,B.wp.align.center],center:[B.wp.flex.growAndShrink(1),B.wp.align.center],right:[B.wp.rowWithGap(0)]});function sj(e){var n=e.onSidebarButtonClick,t=e.onAddButtonClick,r=e.title,i=e.prefsButton,o=e.usageButton,a=e.sessionCost;return(0,f.FD)(F.S,{align:"center",row:!0,gap:0,children:[(0,f.Y)(F.S,{children:(0,f.Y)(ev.K0,{alt:"All chats",onClick:n,children:(0,f.Y)(sO.A,{})})}),(0,f.Y)(eg.$n,{iconLeft:(0,f.Y)(rf.A,{}),text:"New chat",size:"small",variant:"nofill",onClick:t}),(0,f.Y)(F.S,{css:sV.center,children:r}),(0,f.FD)(F.S,{row:!0,gap:4,align:"center",children:[a,o,i]})]})}var sZ=t(13287),sq=(0,M.x)({container:[B.wp.flex.growAndShrink(1),B.wp.flex.column,B.wp.position.relative],body:[B.wp.py(8),B.wp.px(16),B.wp.flex.growAndShrink(1),B.wp.overflowY("auto")],footer:[B.wp.py(8),B.wp.px(16),B.wp.minHeight(40),B.wp.flex.row,B.wp.align.center],settingsPaneButton:[B.wp.display.inlineFlex,B.wp.mx(4),{verticalAlign:"bottom",gap:ez.LU.space4}],heading:[B.wp.fontWeight.medium],upgradePill:[oW.b.filled,(o={},(0,g._)(o,ez.qo.interactiveBackground,ez.LU.yellowDimmest),(0,g._)(o,ez.qo.interactiveBackgroundActive,ez.LU.yellowDimmer),o)]});function sK(e){var n=e.hasAccessToAdvancedModel,t=e.onOpenUserSettings,r=(0,v._)((0,w.useState)(!1),2),i=r[0],o=r[1];return(0,f.FD)(eo.ui,{css:sq.container,background:"default",children:[(0,f.FD)(F.S,{css:sq.body,gap:8,children:[(0,f.Y)(l5.a,{}),(0,f.Y)(sS,{}),(0,f.Y)(l5.a,{}),(0,f.FD)(F.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(I.EY,{css:sq.heading,variant:"text",children:"Advanced ".concat(S.BP," Preferences")}),n?null:(0,f.Y)(i3.a,{css:sq.upgradePill,text:i5.en,onClick:function(){return o(!0)}})]}),(0,f.Y)(l8,{hasAccessToAdvancedModel:n}),(0,f.Y)(l5.a,{})]}),(0,f.Y)(l5.a,{}),(0,f.Y)(F.S,{css:sq.footer,children:(0,f.FD)(I.EY,{variant:"small",children:["Looking for more workspace settings?"," ",(0,f.Y)(eg.$n,{css:sq.settingsPaneButton,iconLeft:(0,f.Y)(af.A,{}),size:"small",variant:"underlined",text:"Open User Settings",onClick:t})]})}),(0,f.Y)(i4.A,{isOpen:i,onClose:function(){return o(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",analyticsContext:{upgrade:{context:"ai_chat_upsell",surface:"assistant_settings"}},highlightUpsell:"assistant"})]})}function s$(e){var n=e.onBack;return(0,f.Y)(F.S,{css:sV.root,children:(0,f.FD)(F.S,{row:!0,align:"center",children:[(0,f.Y)(ev.K0,{onClick:n,alt:"Back to session",children:(0,f.Y)(sZ.A,{})}),(0,f.Y)(I.EY,{children:"Settings"})]})})}var sJ=t(42156),sQ=t(95029),sX=t(54113),s0=t(82563),s1=t(82018),s2=t(93158),s4=t(93582),s5=function(){var e=(0,v._)((0,w.useState)(!1),2),n=e[0],t=e[1],r=(0,v._)((0,w.useState)({x:0,y:0}),2);return{clicked:n,setClicked:t,points:r[0],setPoints:r[1]}},s8=function(){var e=s5(),n=e.clicked,t=e.setClicked,r=e.points,i=e.setPoints;(0,w.useEffect)(function(){var e=function(){return t(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}},[t]);var o=(0,w.useCallback)(function(e){var n=e.x,r=e.y;t(!0),i({x:n,y:r})},[t,i]),a=(0,w.useCallback)(function(e){e.preventDefault(),e.stopPropagation(),o({x:e.clientX,y:e.clientY})},[o]),l=(0,w.useCallback)(function(){t(!1)},[t]);return{triggerProps:{onContextMenu:a},menuProps:(0,e7._)((0,K._)({},r),{isOpen:n}),onClose:l,open:o}},s3=(0,M.x)({menu:[B.wp.position.fixed,B.wp.flex.column,B.wp.borderRadius(8),B.wp.shadow(1),{"& > :first-child":[B.wp.borderRadius(8,8,0,0)],"& > :last-child":[B.wp.borderRadius(0,0,8,8)]}],item:[B.wp.reset.button,{'&:not([disabled]):not([aria-disabled="true"])':[oW.b.listItem],'&[disabled], &[aria-disabled="true"]':[B.wp.color.foregroundDimmest]},B.wp.p(8),B.wp.rowWithGap(8),B.wp.align.center],underlay:[B.wp.position.fixed,{top:0,left:0,bottom:0,right:0}]}),s6=function(e){e.preventDefault()},s7=function(e){var n=e.children,t=e.isOpen,r=e.defaultOpen,i=e.onOpenChange,o=e.x,a=e.y,l=(0,t8._)(e,["children","isOpen","defaultOpen","onOpenChange","x","y"]),s=(0,sX.T)({isOpen:t,defaultOpen:r,onOpenChange:i}),c=(0,w.useRef)(null),u=(0,s0.l)({},s,c),d=u.modalProps,p=u.underlayProps;return t?(0,f.Y)(s1.hJ,{portalContainer:document.body,children:(0,f.Y)("div",(0,e7._)((0,K._)({css:s3.underlay},p),{onContextMenu:s6,children:(0,f.Y)(s2.Ay,{children:(0,f.Y)(eo.ui,(0,e7._)((0,K._)({elevated:!0,css:s3.menu},d,l),{innerRef:c,tag:"ul",role:"menubar","aria-orientation":"vertical","aria-label":"Context",style:{left:o,top:a},children:(0,f.Y)(s4.Se,{options:{direction:"vertical"},children:n})}))})}))}):null},s9=F.D.button,ce=(0,w.forwardRef)(function(e,n){var t=e.children,r=e.iconLeft,i=e.isDisabled,o=void 0!==i&&i,a=e.onClick,l=(0,t8._)(e,["children","iconLeft","isDisabled","onClick"]),s=(0,w.useRef)(null),c=(0,v._)((0,s4.A9)(s,o),4),u=c[0],d=c[1],p=c[2],h=c[3];(0,s4.xK)(d,s);var m=(0,w.useCallback)(function(e){o||(h(),null==a||a(e))},[h,o,a]);return(0,f.FD)(s9,(0,e7._)((0,K._)({disabled:o,css:s3.item,role:"menuitem",ref:(0,sQ.P)(n,s),tabIndex:u,onKeyDown:p,onClick:m},l),{children:[r,(0,f.Y)(I.EY,{multiline:!1,children:t})]}))}),cn=t(60274),ct=(0,sE.v)(["sessionBackground","actionsButtonDisplay"]),cr=ct.cssVars,ci=ct.styleTokens,co=(0,M.x)({loading:[B.wp.coverContainer,B.wp.center],tabs:[B.wp.height("100%")],tabsInner:[B.wp.height("100%")],tabPanel:[B.wp.height("100%")],tabList:[B.wp.p(8)],tabContent:[B.wp.position.relative,B.wp.height("100%"),B.wp.flex.growAndShrink(1)],tabListLeft:[B.wp.viewStyle,B.wp.rowWithGap(2)],tab:[B.wp.viewStyle,oW.b.nofill,B.wp.px(8),B.wp.height(30),B.wp.justify.center,B.wp.borderRadius(4),{"&[data-selected]":{backgroundColor:ez.LU.interactiveBackgroundActive}}],sessions:[B.wp.position.absolute,B.wp.overflow("hidden"),B.wp.px(8),{top:0,left:0,right:0,bottom:0}],editTimestamp:[B.wp.px(4)],session:[B.wp.px(6),B.wp.py(4),B.wp.border({direction:"bottom"}),oW.b.listItem,B.wp.borderRadius(),(a={backgroundColor:ci.sessionBackground},(0,g._)(a,B.$_.canHover,(0,g._)({},cr.actionsButtonDisplay,"none")),(0,g._)(a,"&:hover",(0,g._)({},cr.actionsButtonDisplay,"block")),a)],emptyState:[B.wp.center,B.wp.p(16)],header:[B.wp.rowWithGap(4),B.wp.height(24),B.wp.align.center],title:[B.wp.flex.growAndShrink(1)],actionsButton:[{opacity:.5,display:ci.actionsButtonDisplay,"&:hover":{opacity:1}}],sessionListWrapper:[{overflow:"auto"},B.wp.flex.growAndShrink(1)],sessionListInner:[B.wp.position.relative],sessionListItem:[B.wp.position.absolute,B.wp.top(0),B.wp.left(0),B.wp.width("100%")]});function ca(e){var n=e.onClick;return(0,f.FD)(F.S,{style:(0,g._)({},cr.sessionBackground,ez.LU.accentPrimaryDimmest),css:co.session,onClick:n,children:[(0,f.Y)(F.S,{css:co.header,children:(0,f.Y)(F.S,{css:co.title,children:(0,f.Y)(I.EY,{multiline:!1,children:"New Chat"})})}),(0,f.Y)(I.EY,{multiline:!1,color:"dimmest",variant:"small",children:"just now"})]})}function cl(e){var n,t=e.selected,r=e.onClick,i=e.session,o=(0,v._)((0,w.useState)(!1),2),a=o[0],l=o[1],s=s8(),c=s.menuProps,u=s.triggerProps,d=s.open,p=(0,k.J2)(i.data);return p?a?(0,f.FD)(F.S,{children:[(0,f.Y)(sP,{initialValue:null!==(n=p.title)&&void 0!==n?n:"",onCancel:function(){return l(!1)},onSubmit:function(e){i.updateSession({title:e}),l(!1)}}),(0,f.Y)(F.S,{css:co.editTimestamp,children:(0,f.Y)(ed.Dc,{textColor:"dimmest",textVariant:"small",date:i.created})})]}):(0,f.FD)(f.FK,{children:[(0,f.FD)(F.S,(0,e7._)((0,K._)({style:t?(0,g._)({},cr.sessionBackground,ez.LU.backgroundHigher):void 0,css:co.session,onClick:r},u),{children:[(0,f.FD)(F.S,{css:co.header,children:[(0,f.Y)(F.S,{css:co.title,children:(0,f.Y)(s_.n,{multiline:!1,text:p.title.length>0?p.title:"Untitled"})}),(0,f.Y)(ev.K0,{css:co.actionsButton,alt:"Actions",tooltipBehavior:"hidden",onClick:function(e){var n=e.target.getBoundingClientRect();d({x:n.x,y:n.y})},children:(0,f.Y)(cn.A,{})})]}),(0,f.Y)(ed.Dc,{textColor:"dimmest",textVariant:"small",date:i.created})]})),(0,f.FD)(s7,(0,e7._)((0,K._)({},c),{children:[(0,f.Y)(ce,{onClick:function(){return l(!0)},children:"Rename"}),(0,f.Y)(ce,{onClick:function(){i.updateSession({archived:!p.archived})},children:(null==p?void 0:p.archived)?"Unarchive":"Archive"})]}))]}):null}function cs(){return(0,f.Y)(F.S,{css:co.emptyState,children:(0,f.Y)(I.EY,{color:"dimmest",children:"No chats"})})}function cc(e){var n=e.sessions,t=e.currentSessionId,r=e.onSessionClick,i=(0,w.useRef)(null),o=(0,ef.Te)({overscan:10,count:n.length,getScrollElement:function(){return i.current},estimateSize:function(){return 52}});return(0,f.Y)(F.S,{innerRef:i,css:co.sessionListWrapper,children:(0,f.Y)(F.S,{style:{height:o.getTotalSize()},css:co.sessionListInner,children:o.getVirtualItems().map(function(e){var i=n[e.index];return(0,f.Y)("div",{ref:o.measureElement,"data-index":e.index,css:co.sessionListItem,style:{height:e.size,transform:"translateY(".concat(e.start,"px)")},children:(0,f.Y)(cl,{session:i,selected:i.id===t,onClick:function(){return r(i.id)}})},e.key.toString())})})})}function cu(e){var n=(0,S.NC)(),t=(0,k.J2)(n.sessions.archived.chat),r=(0,w.useMemo)(function(){return t?Array.from(t.values()).sort(function(e,n){return n.created.getTime()-e.created.getTime()}):[]},[t]);return t?0===r.length?(0,f.Y)(cs,{}):(0,f.Y)(cc,{sessions:r,currentSessionId:e.currentSessionId,onSessionClick:e.onSessionClick}):(0,f.Y)(F.S,{css:co.loading,children:(0,f.Y)(tn.A,{})})}function cd(e){var n=(0,S.NC)(),t=(0,k.J2)(n.sessions.chat),r=(0,w.useMemo)(function(){return t?Array.from(t.values()).sort(function(e,n){return n.created.getTime()-e.created.getTime()}):[]},[t]);return t?0===r.length?(0,f.Y)(ca,{onClick:function(){return e.onNewSessionClick()}}):(0,f.Y)(cc,{sessions:r,currentSessionId:e.currentSessionId,onSessionClick:e.onSessionClick}):(0,f.Y)(F.S,{css:co.loading,children:(0,f.Y)(tn.A,{})})}var cp=["Chats","Archived"];function cf(e){var n=(0,v._)((0,w.useState)("Chats"),2),t=n[0],r=n[1];return(0,f.Y)(sJ.tU,{selectedKey:t,onSelectionChange:r,css:co.tabs,children:(0,f.FD)(F.S,{css:co.tabsInner,children:[(0,f.Y)(F.S,{gap:4,css:co.tabList,children:(0,f.Y)(sJ.wb,{"aria-label":"Chats",css:co.tabListLeft,children:cp.map(function(e){return(0,f.Y)(sJ.oz,{id:e,css:co.tab,children:(0,f.Y)(I.EY,{color:"dimmer",children:e})},e)})})}),(0,f.Y)(F.S,{css:co.tabContent,children:cp.map(function(n){return(0,f.Y)(sJ.Kp,{id:n,css:co.tabPanel,children:(0,f.Y)(F.S,{css:co.sessions,children:"Chats"===n?(0,f.Y)(cd,(0,K._)({},e)):(0,f.Y)(cu,(0,K._)({},e))})},n)})})]})})}var ch=(0,M.x)({sessionsListContainer:[B.wp.flex.growAndShrink(1),B.wp.overflowY("auto")],footer:[B.wp.border({direction:"top",color:ez.LU.outlineDimmest})]});function cm(e){var n=e.currentSessionId,t=e.onSessionClick,r=e.onNewSessionClick,i=e.onSettingsButtonClick;return(0,f.FD)(f.FK,{children:[(0,f.Y)(F.S,{css:ch.sessionsListContainer,children:(0,f.Y)(cf,{currentSessionId:n,onSessionClick:t,onNewSessionClick:r})}),(0,f.Y)(F.S,{css:ch.footer,children:(0,f.Y)(eg.$n,{text:"Settings",iconLeft:(0,f.Y)(af.A,{}),alignment:"start",onClick:i,size:"small",variant:"nofill"})})]})}var cg=t(1310),cv=t(54208),cw=t(5814),cy=t(74406),cb="assistant_freemium_quota";function cS(){var e=(0,v._)((0,w.useState)(!1),2),n=e[0],t=e[1],r=(0,cv.V)().assistantEdits,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1];return(0,cw.N)({usage:null==r?void 0:r.usage,limit:null==r?void 0:r.limit,percentThreshold:cw.h,onHitThreshold:function(){t(!0),a(!0)}}),(0,cw.N)({usage:null==r?void 0:r.usage,limit:null==r?void 0:r.limit,percentThreshold:100,onHitThreshold:function(){(0,t7.u4)(t7.AZ.ASSISTANT_USED,{action:"hit_freemium_quota"})}}),(0,f.FD)(a6.Wv,{isOpen:n,onOpenChange:function(e){t(e),e||a(!1)},label:"Usage",placement:"bottom start",children:[(0,f.Y)(ev.K0,{alt:"Usage",disabled:!r,children:(0,f.Y)(F.S,{css:cY.iconBadgeWrapper,children:(0,f.Y)(ld.A,{})})}),(0,f.Y)(F.S,{css:cY.popoverWrapper,children:(0,f.FD)(F.S,{gap:12,children:[(0,f.FD)(I.EY,{css:cY.header,children:["Free ",S.BP," usage"]}),(0,f.Y)(cA,{limit:null==r?void 0:r.limit,usage:null==r?void 0:r.usage,isShowingAlertExplanation:o})]})})]})}var cY=(0,M.x)({popoverWrapper:[B.wp.p(8),B.wp.width(280)],header:[B.wp.fontWeight.bold],measureBar:[B.wp.height(8)],usageMeterAndTitle:[B.wp.display.flex,B.wp.flex.row,B.wp.justify.spaceBetween,B.wp.align.center],iconBadgeWrapper:[B.wp.position.relative]});function cA(e){var n=e.limit,t=e.usage,r=e.isShowingAlertExplanation,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,ot.A)();if(!n||void 0===t)return(0,f.Y)(tn.A,{});var s=t>=n,c=Math.floor(t/n*100),u="You've used ".concat(c,"% of your ").concat(i5.Lm," plan ").concat(S.BP," ").concat((0,cg.pluralize)(aG.go),". ").concat(S.BP," creates edits when asked to make a change to the code.");return(0,f.FD)(f.FK,{children:[(0,f.Y)(F.S,{gap:4,children:(0,f.Y)(cC,{title:"".concat(S.BP," ").concat((0,cg.pluralize)(aG.go)),current:t,max:n})}),s?(0,f.Y)(ck,{}):null,r?(0,f.Y)(tZ.N,{text:u,colorway:"primary"}):null,(0,f.Y)(i8.A,{text:"Upgrade for more",colorway:"brand",variant:"outlined",context:cb,iconLeft:(0,f.Y)(cy.A,{}),highlightUpsell:"assistant"}),(0,f.Y)(i4.A,{isOpen:o,onClose:function(){return a(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",analyticsContext:{upgrade:{context:cb}},onPurchaseComplete:function(){l()}})]})}function cC(e){var n=e.title,t=e.current,r=e.max;return(0,f.FD)(F.S,{gap:6,children:[(0,f.FD)(F.S,{css:cY.usageMeterAndTitle,children:[(0,f.Y)(I.EY,{height:"singleLine",children:n}),(0,f.FD)(I.EY,{height:"singleLine",color:"dimmer",children:[t," / ",r]})]}),(0,f.Y)("div",{children:(0,f.Y)(tU.W,{css:cY.measureBar,total:r,current:t,color:ez.LU.blueDefault,tooltipHidden:!0})})]})}var cx=(0,M.x)({root:[B.wp.border({color:ez.LU.orangeDimmer}),B.wp.borderRadius(),B.wp.py(4),B.wp.px(6),B.wp.colorMixBg(ez.LU.orangeDimmer,"transparent",.25)],text:[B.wp.color.orangeStronger]});function ck(){return(0,f.Y)(F.S,{css:cx.root,children:(0,f.Y)(I.EY,{css:cx.text,children:"You've used 100% of your free AI quota."})})}var c_=t(12549),cD=(0,M.x)({root:[B.wp.px(4),B.wp.flex.growAndShrink(1)],header:[B.wp.height(28),{zIndex:1}],main:[B.wp.position.relative,B.wp.flex.growAndShrink(1),B.wp.justify.end],content:[B.wp.flex.growAndShrink(1),{paddingLeft:i0.Sl.paddingLeft,justifyContent:"end"}],sidebarBlanket:[B.wp.coverContainer,{zIndex:3,backgroundColor:ez.LU.backgroundOverlay,pointerEvents:i0.Sl.sidebarBlanketPointerEvents,opacity:i0.Sl.sidebarBlanketOpacity}],sidebar:[B.wp.position.absolute,B.wp.top(0),B.wp.left(0),B.wp.borderRadius(),{pointerEvents:i0.Sl.sidebarPointerEvents,width:i0.Sl.sidebarWidth,height:i0.Sl.sidebarHeight,opacity:i0.Sl.sidebarOpacity,transform:i0.Sl.sidebarTransform,border:"1px solid "+ez.LU.outlineDimmest,zIndex:3}]});function cE(e){var n=e.sessionId,t=e.children,r=e.isSettingsPanelOpen,i=e.setIsSettingsPanelOpen,o=e.setSessionId,a=e.openUserSettingsPane,l=e.onNewSessionClick,s=e.sidebarState,c=(0,S.NC)(),u=(0,k.Rj)(function(){return n?c.sessions.get(n):null},[c,n]),d=(0,k.Rj)(function(){return null==u?void 0:u.data},[u]),p=(0,k.J2)(c.sessions.chat),h=(0,k.J2)(c.sessions.archived.chat),m=(0,S.UK)().hasAccessToAdvancedModel,g=(0,lZ.F)(),v=s.state,y=s.setSidebarContainerEl,b=s.toggleSidebar,Y=s.closeIfNeeded;function A(){i(!0),Y()}var C=(0,w.useCallback)(function(){(0,t7.u4)(t7.AZ.ASSISTANT_USED,{action:"new_session",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),Y(),l()},[Y,l]),x=(0,w.useCallback)(function(){if(u&&d){var e=d.archived;if((0,t7.u4)(t7.AZ.ASSISTANT_USED,{action:e?"chat_unarchived":"chat_archived",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),u.id===n){var t=e?h:p;if(t&&t.size>1){var r=Array.from(t.keys()).find(function(e){return e!==u.id});o(null!=r?r:null)}else C()}u.updateSession({archived:!e})}},[h,C,p,u,d,n,o]),_=(0,w.useCallback)(function(e){(0,t7.u4)(t7.AZ.ASSISTANT_USED,{action:"chat_renamed",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),null==u||u.updateSession({title:e})},[u]),D=(0,w.useRef)(null);(0,l0.d)(D,v,i0.aT);var E=(0,i$._P)({controlName:"flag-no-header-usage"}),R=d?(0,f.Y)(sM,{title:d.title,archived:d.archived,onRename:_,onToggleArchived:x},d.id):null,I=(0,c_.L)(n),T=(0,f.Y)(sj,{onAddButtonClick:C,onSidebarButtonClick:function(){return b()},title:R,prefsButton:(0,f.Y)(sW,{onClick:A}),usageButton:g?(0,f.Y)(cS,{}):(0,f.Y)(sG,{sessionCostInCents:I}),sessionCost:I&&!E?(0,f.Y)(l1._,{cents:I}):null});return(0,f.FD)(F.S,{css:cD.root,innerRef:D,children:[(0,f.Y)(eo.ui,{css:cD.header,children:r?(0,f.Y)(s$,{onBack:function(){return i(!1)}}):T}),(0,f.FD)(F.S,{css:cD.main,innerRef:y,children:[r?null:(0,f.Y)(F.S,{css:cD.sidebarBlanket,onClick:function(){return b(!1)}}),(0,f.Y)(eo.ui,{css:cD.sidebar,children:(0,f.Y)(cm,{currentSessionId:n,onNewSessionClick:C,onSessionClick:function(e){i(!1),o(e),Y()},onSettingsButtonClick:A})}),(0,f.Y)(F.S,{css:cD.content,children:r?(0,f.Y)(sK,{hasAccessToAdvancedModel:m,onOpenUserSettings:a}):t})]})]})}var cR=t(56711),cI=t(51578),cF=t(48568),cT=t(86113),cP=t(99500),cL=t(56679),cU=t(8319),cN=t(33753),cO=t(51066);function cM(){var e=(0,$._)(["\n  fragment StartWithAiUsageBudget on UsageBasedBillingBudget {\n    id\n    hasReachedBudget\n  }\n"]);return cM=function(){return e},e}function cB(){var e=(0,$._)(["\n  query AssitantUsageBanner($orgId: String) {\n    currentUser {\n      id\n      ...CoreSubscriptionPlanStatus\n      usageBasedBillingBudget {\n        __typename\n        ... on UsageBasedBillingBudget {\n          ...StartWithAiUsageBudget\n        }\n      }\n      usageBasedBillingAlerts {\n        ...EditUsageBasedBillingAlertsFormInitialConfig\n      }\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          name\n          usageBasedBillingBudget {\n            __typename\n            ... on UsageBasedBillingBudget {\n              ...StartWithAiUsageBudget\n            }\n          }\n          usageBasedBillingAlerts {\n            ...EditUsageBasedBillingAlertsFormInitialConfig\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return cB=function(){return e},e}var cH={},cz=(0,J.J1)(cM()),cW=(0,J.J1)(cB(),cN.y,cz,cO.B9),cG=t(93548),cV=t(66404),cj=t(48082),cZ=(0,M.x)({bannerContainer:[B.wp.pb(6)],buttonLink:[B.wp.reset.button,oW.b.underlined]});function cq(e){var n,t,r,i,o,a,l,s,c,u,d,p=e.assistantAuthz,h=(0,v._)((0,w.useState)(!1),2),m=h[0],g=h[1],y=(0,v._)((0,w.useState)(!1),2),b=y[0],Y=y[1],A=(0,v._)((0,w.useState)(!1),2),C=A[0],x=A[1],k=null===(t=(0,cV.y)().paymentMethod)||void 0===t?void 0:t.last4,_=(0,n_.A)(),D=(0,oM.R)(_).orgId,E=(n=(0,K._)({},cH,{variables:{orgId:D}}),Q.I(cW,n)),R=E.data,T=E.loading,P=!1;D?(r=(null==R?void 0:null===(i=R.currentUser)||void 0===i?void 0:i.org.__typename)==="Org"&&"UsageBasedBillingAlertsConfig"===R.currentUser.org.usageBasedBillingAlerts.__typename?R.currentUser.org.usageBasedBillingAlerts:void 0,P=(null==R?void 0:null===(o=R.currentUser)||void 0===o?void 0:o.org.__typename)==="Org"&&(null===(a=R.currentUser.org.usageBasedBillingBudget)||void 0===a?void 0:a.__typename)==="UsageBasedBillingBudget"&&R.currentUser.org.usageBasedBillingBudget.hasReachedBudget):(r=(null==R?void 0:null===(l=R.currentUser)||void 0===l?void 0:l.usageBasedBillingAlerts.__typename)==="UsageBasedBillingAlertsConfig"?R.currentUser.usageBasedBillingAlerts:void 0,P=(null==R?void 0:null===(c=R.currentUser)||void 0===c?void 0:null===(s=c.usageBasedBillingBudget)||void 0===s?void 0:s.__typename)==="UsageBasedBillingBudget"&&R.currentUser.usageBasedBillingBudget.hasReachedBudget);var L=null!==(u=null==R?void 0:R.currentUser)&&void 0!==u?u:null,U=(null==L?void 0:L.org.__typename)==="Org"?L.org:void 0,N=null!==(d=null==L?void 0:L.hasCore)&&void 0!==d&&d;return T||(null==p?void 0:p.advancedAssistant.isAuthorized)||C?null:k||N?P?(0,f.FD)(F.S,{children:[(0,f.Y)(lC.a,{isOpen:b,onRequestClose:function(){return Y(!1)},children:(0,f.Y)(cj.j,{org:U,initialSettings:r,onDone:function(){return Y(!1)}})}),(0,f.Y)(F.S,{css:cZ.bannerContainer,children:(0,f.Y)(tZ.N,{icon:(0,f.Y)(ld.A,{}),text:(0,f.FD)(I.EY,{variant:"small",children:["You must"," ",(0,f.Y)("button",{css:cZ.buttonLink,onClick:function(){Y(!0)},children:"increase your usage budget"})," ","to enable Advanced ",S.BP,"."]}),colorway:"blue",closable:!0,closeAction:function(){return x(!0)}})})]}):null:(0,f.FD)(F.S,{children:[(0,f.Y)(lC.a,{isOpen:m,onRequestClose:function(){return g(!1)},children:(0,f.FD)(F.S,{gap:16,children:[(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:"Add Payment Method"}),(0,f.Y)(cG.y,{onSuccess:function(){g(!1)}})]})}),(0,f.Y)(F.S,{css:cZ.bannerContainer,children:(0,f.Y)(tZ.N,{icon:(0,f.Y)(cy.A,{}),text:(0,f.FD)(I.EY,{variant:"small",children:["You must"," ",(0,f.Y)("button",{css:cZ.buttonLink,onClick:function(){g(!0)},children:"add a billing method"})," ","to enable Advanced ",S.BP,"."]}),colorway:"blue",closable:!0,closeAction:function(){return x(!0)}})})]})}var cK=t(8550),c$=t(54086),cJ=t(97845),cQ=t(27725),cX=t(42281),c0=t(95120),c1=t(52064),c2=t(97282),c4=t(19570),c5=t(61239),c8=t(11860),c3=t(59669),c6=t(84789),c7=t(51820),c9=t(13194),ue=t(82478),un=(0,M.x)({root:[B.wp.flex.growAndShrink(1),B.wp.color.foregroundDimmer],label:[B.wp.visuallyHidden],selectButton:[B.wp.reset.button,B.wp.flex.row,B.wp.rowWithGap(4),B.wp.cursor.pointer,B.wp.align.center,B.wp.px(4),B.wp.py(2),oW.b.nofill,B.wp.color.foregroundDimmest,B.wp.fontSize(12),{'&[aria-expanded="true"] .chevron':{transform:"rotate(180deg)"},"&:hover":B.wp.color.foregroundDefault}],pooverSurface:[B.wp.borderRadius(4),B.wp.border({color:ez.LU.outlineDefault})]});function ut(e){var n,t=e.assistantMode,r=e.availableModels,i=e.assistantAdvancedAuthz,o=e.showModelNames,a=void 0===o||o,l=e.basicModeAffordances,s=e.advancedModeAffordances,c=e.onChange,u=r.basicModel,d=r.advancedModel,p=r.overrideModel,h=(0,c6.a)();return(0,f.Y)(F.S,{css:un.root,children:(0,f.FD)(c4.l6,{selectedKey:t,onSelectionChange:function(e){switch(e){case"basic":case"advanced":c(e)}},children:[(0,f.Y)(c7.J,{css:un.label,children:"Assistant mode"}),(0,f.FD)(c5.$,{css:un.selectButton,children:[(0,f.Y)(lI.D8,{model:"basic"===t?C.e3q.BASIC:C.e3q.ADVANCED,size:12}),"basic"===t?"Basic":"Advanced",(0,f.Y)(sN.A,{size:12})]}),(0,f.Y)(c8.A,{placement:h?"top":void 0,children:(0,f.Y)(eo.ui,{css:un.pooverSurface,elevated:!0,children:(0,f.FD)(c3.qF,{"aria-label":"Assistant chat mode",selectionMode:"single",children:[(0,f.Y)(c3.nh,{id:"basic","aria-label":"basic",children:(0,f.Y)(ui,{readableModelName:u.name.readable,isSelected:"basic"===t,modeAffordances:void 0===l?"Ask questions":l,showModelNames:a})}),(0,f.Y)(c3.nh,{id:"advanced","aria-label":"advanced",children:(0,f.Y)(uo,{readableModelName:null!==(n=null==p?void 0:p.name.readable)&&void 0!==n?n:d.name.readable,isSelected:"advanced"===t,isOverrideActive:null!=r.overrideModel,authz:i,modeAffordances:void 0===s?"Generate code & actions":s,showModelNames:a})})]})})})]})})}var ur=(0,M.x)({root:[B.wp.px(8),B.wp.py(6),B.wp.rowWithGap(8),B.wp.align.center,B.wp.cursor.pointer,B.wp.hover({backgroundColor:ez.LU.backgroundHighest})],content:[B.wp.colWithGap(0),B.wp.flex.growAndShrink(1)],modelName:[B.wp.rowWithGap(6),B.wp.align.center]});function ui(e){var n=e.readableModelName,t=e.isSelected,r=e.modeAffordances,i=e.showModelNames;return(0,f.FD)(F.S,{css:ur.root,children:[(0,f.Y)(F.S,{children:(0,f.Y)(c9.A,{color:ez.LU.foregroundDimmer})}),(0,f.FD)(F.S,{css:ur.content,children:[(0,f.Y)(F.S,{css:ur.modelName,children:(0,f.Y)(I.EY,{variant:"small",children:"Basic"})}),(0,f.FD)(I.EY,{variant:"small",color:"dimmer",children:[r," ",i?"with ".concat(n):""]})]}),(0,f.Y)(F.S,{children:t?(0,f.Y)(ap.A,{color:ez.LU.foregroundDefault}):null})]})}function uo(e){var n=e.readableModelName,t=e.authz,r=e.isSelected,i=e.isOverrideActive,o=e.modeAffordances,a=e.showModelNames;return(0,f.FD)(F.S,{css:ur.root,children:[(0,f.Y)(F.S,{children:(0,f.Y)(ue.A,{color:ez.LU.foregroundDefault})}),(0,f.FD)(F.S,{css:ur.content,children:[(0,f.FD)(F.S,{css:ur.modelName,children:[(0,f.Y)(I.EY,{variant:"small",children:"Advanced"}),t.isAuthorized?(0,f.FD)(I.EY,{variant:"small",color:"dimmer",children:[aG.a7,"\xa2/",aG.go]}):null,t.isAuthorized?null:(0,f.Y)(i3.a,{text:i5.en}),void 0!==i&&i?(0,f.Y)(oG.a,{colorway:"orange",text:"Override"}):null]}),(0,f.FD)(I.EY,{variant:"small",color:"dimmer",children:[o," ",a?"with ".concat(n):""]})]}),(0,f.Y)(F.S,{children:r?(0,f.Y)(ap.A,{color:ez.LU.foregroundDefault}):null})]})}var ua=(0,M.x)({root:[B.wp.px(6),B.wp.borderRadius(4,4,0,0),B.wp.rowWithGap(6),B.wp.align.center,B.wp.minHeight(28),B.wp.backgroundColor.backgroundHigher,B.wp.position.relative,B.wp.container("assistantControlBar")],modeSelectContainer:[B.wp.flex.growAndShrink(1)],modelIndicatorText:[{"@container (max-width: 270px)":{display:"none"}}],modelIndicatorTooltip:[B.wp.colWithGap(8),B.wp.p(4),B.wp.width("100%")]});function ul(e){var n,t,r,i,o,a=e.availableModels,l=e.assistantAdvancedAuthz,s=void 0===l?{isAuthorized:!0}:l,c=e.onModeSelectChange,u=(0,S.dm)().assistantMode,d=(0,S.fS)();return(0,f.FD)(F.S,{css:ua.root,children:[(0,f.Y)(or.A,{}),(0,f.Y)(F.S,{css:ua.modeSelectContainer,children:(0,f.Y)(ut,{availableModels:a,assistantMode:u,assistantAdvancedAuthz:s,onChange:c})}),(0,f.Y)(us,{assistantMode:u,assistantAdvancedAuthz:s,isOverrideActive:"advanced"===u&&null!=a.overrideModel,preferredAdvancedModelName:null==d?void 0:d.readable,text:(n=a,t=u,r=n.basicModel,i=n.advancedModel,o=n.overrideModel,"basic"===t?r.name.readable:"advanced"===t&&o?o.name.readable:i.name.readable)})]})}function us(e){var n=e.assistantMode,t=e.assistantAdvancedAuthz,r=e.isOverrideActive,i=void 0!==r&&r,o=e.preferredAdvancedModelName,a=e.text;return(0,f.FD)(F.S,{row:!0,gap:4,align:"center",children:[i?(0,f.Y)(oG.a,{colorway:"orange",text:"Override"}):null,(0,f.Y)(I.EY,{css:ua.modelIndicatorText,variant:"small",color:"dimmer",children:a}),(0,f.Y)(rc.m_,{tooltip:"basic"===n?(0,f.Y)(uc,{assistantAdvancedAuthz:t}):(0,f.Y)(uu,{assistantAdvancedAuthz:t,preferredAdvancedModelName:i?o:void 0}),placement:"top-end",children:(0,f.Y)(rd.A,{color:ez.LU.foregroundDimmest})})]})}function uc(e){var n=e.assistantAdvancedAuthz;return(0,f.Y)(F.S,{css:ua.modelIndicatorTooltip,children:(0,f.FD)(I.EY,{variant:"small",children:[(0,f.Y)("strong",{children:"Basic"}),": ",S.BP,n.isAuthorized?" will answer questions about your code or the Replit environment using a lightweight model.":" will answer general coding questions."]})})}function uu(e){var n=e.assistantAdvancedAuthz,t=e.preferredAdvancedModelName;return(0,f.FD)(F.S,{css:ua.modelIndicatorTooltip,children:[(0,f.FD)(I.EY,{variant:"small",children:[(0,f.Y)("strong",{children:"Advanced"}),": In addition to answering questions,"," ",S.BP," will write code, propose file changes & shell commands, and use advanced code search techniques."]}),n.isAuthorized&&t?(0,f.FD)(I.EY,{variant:"small",children:["Note that ",t," is best for code generation, and you will experience degraded performance with other models."]}):null]})}var ud=t(84344),up=t(90378),uf=t(17134),uh=t(96562),um=t(92305),ug=t(32836),uv=t(68221),uw=t(24491),uy=t(67084),ub=t(14545),uS=t(43906),uY=t(15110),uA=t(72102),uC=t(86601),ux=t(74702),uk=ne.sj.define({combine:function(e){var n;return null!==(n=e[0])&&void 0!==n?n:[]},compare:aa()}),u_=new nl.k(function(e){return uk.of(e)}),uD=t(43912),uE=t(7385),uR=(0,M.x)({popover:[B.wp.borderRadius(4),B.wp.border({color:ez.LU.outlineDefault}),B.wp.overflow("hidden"),B.wp.maxWidth(290)]}),uI=t(29992),uF=t(19706),uT=t(28023),uP=t(53363);function uL(e){return(0,f.FD)(n$.Ay,(0,e7._)((0,K._)({},e),{children:[(0,f.Y)("path",{fillRule:"evenodd",d:"M1.25 5A2.75 2.75 0 0 1 4 2.25h4.999c.251 0 .485.125.625.334L11.4 5.25H20A2.75 2.75 0 0 1 22.75 8v4.5a.75.75 0 0 1-1.5 0V8c0-.69-.56-1.25-1.25-1.25h-9a.751.751 0 0 1-.625-.335L8.598 3.75H4c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h9a.75.75 0 0 1 0 1.5H4A2.75 2.75 0 0 1 1.25 19V5Z",clipRule:"evenodd"}),(0,f.Y)("path",{fillRule:"evenodd",d:"M18.438 13.8c-.147-.4-.73-.4-.875 0l-1.005 2.744a.458.458 0 0 1-.298.278l-2.436.746a.446.446 0 0 0 0 .857l2.437.752a.458.458 0 0 1 .297.279l1.005 2.745c.146.399.728.399.875 0l1.004-2.745a.458.458 0 0 1 .297-.278l2.437-.75a.446.446 0 0 0 0-.857l-2.437-.749a.458.458 0 0 1-.297-.278L18.437 13.8Z",clipRule:"evenodd"})]}))}var uU=t(97783);function uN(e){return(0,f.Y)(n$.Ay,(0,e7._)((0,K._)({},e),{children:(0,f.Y)("path",{d:"M12 1c.717 0 1.36.441 1.617 1.11l2.298 5.975 5.975 2.298a1.732 1.732 0 0 1 0 3.234l-5.975 2.298-2.298 5.975a1.732 1.732 0 0 1-3.234 0l-2.298-5.975-5.975-2.298a1.732 1.732 0 0 1 0-3.234l5.975-2.298 2.298-5.975C10.641 1.441 11.283 1 12 1Z"})}))}var uO=t(30279),uM=(0,M.x)({root:[oW.b.listItem,B.wp.p(4),B.wp.colWithGap(2)],content:[],left:[B.wp.flex.growAndShrink(1),B.wp.rowWithGap(4),B.wp.align.center,{fontSize:ez.LU.fontSizeSmall}],warning:[{color:ez.LU.accentNegativeDefault}],dir:[{opacity:.6},B.wp.flex.shrink(100)]});function uB(e){var n=e.path,t=e.highlighted,r=e.ranges,i=e.status,o=t?{backgroundColor:ez.LU.interactiveBackgroundActive}:void 0,a=i?({included:(0,f.Y)(ap.A,{}),overflowing:(0,f.Y)(o9.A,{}),truncated:(0,f.Y)(o9.A,{}),unsupported:(0,f.Y)(o9.A,{})})[i]:null,l=(0,uI.dt)({path:n,ranges:null!=r?r:[]}),s=l.directory,c=l.filename,u=s&&s.text.split("/"),d=u&&u.length>2?"".concat(u[0],"/.../").concat(u[u.length-1],"/"):s&&s.text+"/";return(0,f.Y)(rc.m_,{maxWidth:600,closeDelay:"none",tooltip:n,children:(0,f.FD)(F.S,{css:uM.root,style:o,children:[(0,f.FD)(F.S,{row:!0,gap:8,align:"center",style:o,children:[(0,f.FD)(F.S,{css:uM.left,style:o,children:[(0,f.Y)(te.A,{path:n,size:16}),(0,f.Y)(uT.e,{text:c.text,highlight:c.ranges,dimmed:!t}),s?(0,f.Y)(F.S,{color:"dimmest",css:uM.dir,children:(0,f.Y)(uT.e,{text:d||"",highlight:s.ranges,dimmed:!t})}):null]}),(0,f.Y)(rc.m_,{tooltip:"File not supported",isDisabled:"unsupported"!==i,children:a})]}),"overflowing"===i||"truncated"===i?(0,f.Y)(I.EY,{css:uM.warning,variant:"small",children:"Exceeds file memory"}):null]})})}var uH=(0,sE.v)(["iconColor","placeholderColor","itemTransform","inputBorderRadius","inputBorder"]),uz=uH.cssVars,uW=uH.styleTokens,uG=(0,M.x)({root:[B.wp.width(290),B.wp.maxHeight(300),B.wp.display.flex],inputRow:[B.wp.p(4),B.wp.position.relative,(s={},(0,g._)(s,uz.iconColor,ez.LU.foregroundDimmest),(0,g._)(s,uz.placeholderColor,ez.LU.foregroundDimmer),(0,g._)(s,":focus-within, :hover",(l={},(0,g._)(l,uz.iconColor,ez.LU.foregroundDimmer),(0,g._)(l,uz.placeholderColor,ez.LU.foregroundDimmest),l)),s)],searchIcon:[B.wp.pl(12),B.wp.coverContainer,B.wp.align.start,B.wp.justify.center,{color:uW.iconColor,pointerEvents:"none"}],input:[B.wp.p(4),B.wp.pl(24)],header:[B.wp.px(4),B.wp.height(24),B.wp.align.center,B.wp.display.flex,B.wp.justify.spaceBetween],selectionButton:[B.wp.reset.button,oW.b.nofill,B.wp.p(2),{fontSize:ez.LU.fontSizeSmall}],menu:[B.wp.flex.growAndShrink(1),{overflow:"auto",borderBottom:"1px solid "+ez.LU.outlineDimmer}],item:[{transform:uW.itemTransform,position:"absolute",top:0,left:0,width:"100%"}],aiContext:[B.wp.px(6),B.wp.py(2),B.wp.align.center],ragText:[B.wp.px(6)]});function uV(e,n){return n.status&&!e.status?1:e.status&&!n.status?-1:"included"===n.status&&"included"!==e.status?1:"included"===e.status&&"included"!==n.status?-1:0}function uj(e){var n,t,r,i,o,a,l,s,c=e.fileContextInclusions,u=e.findFiles,d=e.overscan,p=e.onChange,h=e.unSelectAllFiles,m=e.isRagAuthorized,Y=e.ragState,A=e.updatePopperPositionRef,C=(0,w.useRef)(null),x=(0,v._)((0,w.useState)(""),2),k=x[0],_=x[1],D=(0,v._)((0,w.useState)(!1),2),E=D[0],R=D[1],T=(n=u,i=(r=(0,v._)((0,w.useState)({loading:!0,error:null,items:null}),2))[0],o=r[1],!(a=(0,w.useRef)(null)).current&&(a.current=(0,cI.A)((t=(0,y._)(function(e){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,n(e)];case 1:return t=r.sent(),(0,w.startTransition)(function(){o(null!==t.error?{error:t.error,loading:!1,items:null}:{items:t.files,total:t.total,error:null,loading:!1})}),[2]}})}),function(e){return t.apply(this,arguments)}),{wait:40})),l=(0,w.useCallback)(function(e){var n;return null===(n=a.current)||void 0===n?void 0:n.call(a,e).catch(function(){})},[]),(0,w.useEffect)(function(){return l(""),function(){try{var e;null===(e=a.current)||void 0===e||e.cancel()}catch(e){}}},[l]),{files:i.items,loading:i.loading,error:i.error,total:i.total,update:l}),P=T.files,L=T.total,U=T.loading,N=T.error,O=T.update,M=(0,w.useRef)(null),H=(0,e$.A)(k),z=(0,w.useMemo)(function(){var e=new Map(c.map(function(e){return[e.path,e.inclusionStatus]})),n=null==P?void 0:P.map(function(n){var t=n.path;return{path:t,ranges:n.ranges,status:e.get(t)}});if(!n)return null;if(M.current&&!H.current)return(0,uE.A)(n,{existing:M.current,getKey:function(e){return e.path}});if(H.current)return n;var t=n.sort(uV);return M.current=t,t},[P,c,H]),W=(0,w.useMemo)(function(){var e;return null!==(e=null==z?void 0:z.filter(function(e){return e.status}))&&void 0!==e?e:[]},[z]);(0,w.useEffect)(function(){if(!U){var e;null===(e=A.current)||void 0===e||e.call(A)}},[U,A]);var G=(0,sA.Bp)({inputValue:k,items:null!=z?z:[],isOpen:!0,defaultHighlightedIndex:0,stateReducer:function(e,n){var t=n.changes;switch(n.type){case sA.Bp.stateChangeTypes.InputKeyDownEnter:case sA.Bp.stateChangeTypes.ItemClick:return(0,a$.jM)(t,function(n){n.highlightedIndex=e.highlightedIndex});default:return t}},onHighlightedIndexChange:function(e){void 0!==e.highlightedIndex&&-1!==e.highlightedIndex&&j.getVirtualItems()[e.highlightedIndex]&&j.scrollToIndex(e.highlightedIndex)},onStateChange:function(e){switch(e.type){case sA.Bp.stateChangeTypes.InputKeyDownEnter:case sA.Bp.stateChangeTypes.ItemClick:if(!e.selectedItem)break;var n,t,r,i=W.includes(e.selectedItem)?"exclude":"include";p({path:e.selectedItem.path,preference:i}),null===(r=C.current)||void 0===r||r.select();break;case sA.Bp.stateChangeTypes.InputChange:_(null!==(n=e.inputValue)&&void 0!==n?n:""),O(null!==(t=e.inputValue)&&void 0!==t?t:"")}}}),V=(0,w.useRef)(null),j=(0,ef.Te)({count:null!==(s=null==z?void 0:z.length)&&void 0!==s?s:0,getScrollElement:function(){return V.current},estimateSize:function(){return 32},getItemKey:function(e){var n,t;return null!==(t=null==z?void 0:null===(n=z[e])||void 0===n?void 0:n.path)&&void 0!==t?t:""},overscan:void 0===d?4:d}),Z="".concat(ez.LU.space4," ").concat(ez.LU.space4," 0 0");return!U||(null==z?void 0:z.length)||(Z=ez.LU.space4),(0,f.FD)(F.S,{css:uG.root,style:(0,g._)({},uz.inputBorderRadius,Z),children:[(0,f.FD)(F.S,{css:uG.aiContext,row:!0,gap:6,children:[(0,f.Y)(I.EY,{css:B.wp.fontWeight.medium,children:"Context"}),m?(0,f.Y)(F.S,{children:(0,f.Y)(uN,{color:ez.LU.tealDefault,size:12})}):null]}),(0,f.FD)(F.S,{css:uG.ragText,children:[m?(0,f.Y)(tZ.N,{colorway:"teal",text:(0,f.FD)(F.S,{children:[(0,f.FD)(F.S,{row:!0,gap:4,css:B.wp.align.center,children:[(0,f.FD)(I.EY,{variant:"small",children:[S.BP," will automatically decide context."]}),(null==Y?void 0:Y.remainingFilesToIndex)?(0,f.Y)(rc.m_,{maxWidth:300,tooltip:(0,f.FD)(F.S,{css:B.wp.textAlign.center,children:[(0,f.FD)(I.EY,{children:[S.BP," is getting to know your code…"]}),(0,f.Y)(I.EY,{color:"dimmer",children:"(".concat(Y.remainingFilesToIndex," files remaining)")})]}),children:(0,f.Y)(tn.A,{size:12})}):null]}),(0,f.Y)(I.EY,{variant:"small",children:"You may highlight specific files if you'd like."})]})}):null,m?null:(0,f.Y)(uF.d,{iconLeft:(0,f.Y)(uO.A,{}),onClick:function(){return R(!0)},colorway:"yellow",text:"Have ".concat(S.BP," decide context automatically")})]}),(0,f.FD)(F.S,{css:uG.inputRow,children:[(0,f.Y)(F.S,{css:uG.searchIcon,children:U?(0,f.Y)(tn.A,{size:12}):(0,f.Y)(uU.A,{size:12})}),(0,f.Y)(ew.pd,(0,K._)({autoFocus:!0,placeholder:"Search files",css:uG.input},G.getInputProps({ref:C})))]}),N?(0,f.Y)(tZ.N,{icon:(0,f.Y)(o9.A,{}),text:N}):null,void 0!==L?(0,f.FD)(F.S,{css:uG.header,row:!0,gap:2,children:[(0,f.Y)(I.EY,{variant:"small",color:"dimmest",children:"".concat(c.length,"/").concat(L," selected")}),c.length?(0,f.Y)(F.S,{tag:"button",css:uG.selectionButton,onClick:function(){return function(){var e=[],n=!0,t=!1,r=void 0;try{for(var i,o=(null!=P?P:[])[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;e.push(a.path)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}h({paths:e})}()},children:"Unselect All"}):null]}):null,(0,f.Y)("div",(0,e7._)((0,K._)({css:uG.menu},G.getMenuProps({ref:V})),{children:(0,f.Y)("div",{style:{height:"".concat(j.getTotalSize(),"px"),width:"100%",position:"relative"},children:j.getVirtualItems().map(function(e){var n=e.index,t=e.key,r=e.start,i=null==z?void 0:z[n];return i?(0,f.Y)(F.S,(0,e7._)((0,K._)({"data-index":n,css:uG.item,style:(0,g._)({},uz.itemTransform,"translateY(".concat(r,"px)"))},G.getItemProps({item:i,index:n,refKey:"innerRef",ref:j.measureElement})),{"aria-selected":void 0!==i.status,children:(0,f.Y)(uB,{highlighted:n===G.highlightedIndex,path:i.path,ranges:i.ranges,status:i.status})}),t.toString()):null})})})),(0,f.Y)(i4.A,{isOpen:E,onClose:function(){return R(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",analyticsContext:{upgrade:{context:"ai_context_menu",surface:"ghostwriter_power_up_dialog"}}})]})}var uZ=(0,M.x)({button:[B.wp.height(24),B.wp.reset.button,B.wp.align.center,B.wp.cursor.pointer,B.wp.px(4),B.wp.py(2),B.wp.rowWithGap(4),oW.b.nofill,B.wp.color.foregroundDimmer,{"&:hover":B.wp.color.foregroundDefault,"@container (max-width: 400px)":{"> div > span":B.wp.display.none}}]});function uq(e){var n,t=(0,v._)((0,w.useState)(!1),2),r=t[0],i=t[1],o=(0,v._)((0,w.useState)(null),2),a=o[0],l=o[1],s=(0,v._)((0,w.useState)(null),2),c=s[0],u=s[1];(0,w.useEffect)(function(){var e=function(e){"Escape"===e.key&&i(!1)};if(r)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[r]);var d=(0,sY.E)(a,c,{modifiers:[{name:"offset",options:{offset:[0,4]}},{name:"preventOverflow",options:{padding:16}}],placement:"top-start"}),p=(0,w.useCallback)(function(){d.update&&d.update()},[d]),h=(0,w.useRef)(p);(0,w.useEffect)(function(){h.current=p},[p]);var m=e.fileContextInclusions,g=e.findFiles,y="Add file context",b=m.filter(function(e){return"included"===e.inclusionStatus});b.length&&(y=1===b.length?(n=(0,n7.WP)(b[0].path)).length>20?n.slice(0,10)+"..."+n.slice(-10):n:b.length+" files");var S=(0,w.useId)();return(0,f.FD)(uD.cQ,{children:[(0,f.Y)(eg.$n,{iconLeft:e.isRagAuthorized?(0,f.Y)(uL,{}):(0,f.Y)(uP.A,{}),text:y,css:uZ.button,ref:l,onClick:function(){return i(function(e){return!e})},"aria-label":"Select files","aria-haspopup":!0,"aria-expanded":r,"aria-controls":S}),(0,f.Y)(c8.A,{isOpen:r,shouldCloseOnInteractOutside:function(e){var n;return n=[c,a],!(e instanceof Node&&n.some(function(n){return null==n?void 0:n.contains(e)}))&&(i(!1),!0)},isKeyboardDismissDisabled:!0,children:(0,f.Y)(eo.ui,(0,e7._)((0,K._)({id:S,elevated:!0,style:d.styles.popper,innerRef:u,css:uR.popover},d.attributes.popper),{children:(0,f.Y)(uj,{overscan:e.overscan,onChange:e.onChange,unSelectAllFiles:e.unSelectAll,findFiles:g,fileContextInclusions:m,isRagAuthorized:e.isRagAuthorized,updatePopperPositionRef:h,ragState:e.ragState})}))})]})}var uK={render:function(e){var n=e.file,t=n.path,r=n.match,i=(0,no.J)((0,f.Y)(F.S,{css:uM.root,style:{width:"100%"},className:"option",children:(0,f.FD)(F.S,{css:uM.content,children:[(0,f.FD)(F.S,{css:uM.left,children:[(0,f.Y)(te.A,{path:t,size:16}),(0,f.Y)(uT.e,{text:r.filename.text,highlight:r.filename.ranges,dimmed:!0}),r.directory?(0,f.Y)(F.S,{color:"dimmest",css:uM.dir,children:(0,f.Y)(uT.e,{text:r.directory.text+"/",highlight:r.directory.ranges,dimmed:!0})}):null]}),"included"===n.inclusionStatus?(0,f.Y)(ap.A,{}):null]})}));return i.style.display="flex",i.style.width="100%",i},position:81},u$=nn.Lz.theme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:ez.LU.fontFamilyDefault,fontSize:ez.LU.fontSizeSmall},"& > ul > li":{padding:"0px",display:"flex",alignItems:"center"},"& > ul > li[aria-selected] .option":{backgroundColor:ez.LU.backgroundHighest}},".cm-completionLabel":{width:0}}),uJ=new nl.k(function(e){if(!e)return[];function n(){return(n=(0,y._)(function(n){var t,r,i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:if(!e||!n.matchBefore(/@(\S*)/g)||null===(t=n.matchBefore(/\w*/)))return[2,null];return[4,e(t.text)];case 1:return i=null!==(r=l.sent().files)&&void 0!==r?r:[],o=new Map(n.state.facet(uk).map(function(e){return[e.path,e.inclusionStatus]})),a=i.map(function(e){var n=e.path,t=e.ranges;return{label:n,displayLabel:" ",file:{path:n,inclusionStatus:o.get(n),match:(0,uI.dt)({path:n,ranges:null!=t?t:[]})}}}),[2,{from:t.from,filter:!1,options:a}]}})})).apply(this,arguments)}return[u$,(0,ud.yU)({defaultKeymap:!1,icons:!1,aboveCursor:!0,addToOptions:[uK],override:[function(e){return n.apply(this,arguments)}],maxRenderedOptions:100})]}),uQ=new nl.k(function(e){return nn.Lz.updateListener.of(function(n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.transactions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value.annotation(ud.rK);l&&e(l.label)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}})}),uX=t(62019),u0=t(37743),u1=t(1833),u2=t(35602),u4=t.n(u2),u5=(0,M.x)({root:[B.wp.display.inlineFlex],button:[B.wp.reset.button,B.wp.display.inlineFlex,B.wp.px(2),oW.b.outlined,B.wp.borderRadius(4),B.wp.rowWithGap(2),B.wp.align.center],warning:{color:ez.LU.redDefault}}),u8=new no.E(function(e){var n=(0,n7.WP)(e.path),t=(0,n7._6)(e.path);return(0,f.Y)(rc.m_,{isDisabled:!t&&!e.warning,tooltip:(0,f.FD)(F.S,{children:[e.warning?(0,f.Y)(I.EY,{variant:"small",css:u5.warning,children:e.warning}):null,t?(0,f.FD)(I.EY,{variant:"small",color:"dimmest",children:[t,"/"]}):null]}),children:function(t,r){return(0,f.Y)(F.S,(0,e7._)((0,K._)({css:u5.root,innerRef:r},t),{children:(0,f.FD)(F.S,{tag:"button",css:u5.button,onClick:function(){return e.onClick()},children:[(0,f.Y)(te.A,{size:12,path:e.path}),(0,f.Y)(I.EY,{variant:"small",children:n}),e.warning?(0,f.Y)(o9.A,{size:12}):null]})}))}})}),u3=function(e){function n(e,t){var r;return(0,u0._)(this,n),(r=(0,uX._)(this,n)).file=e,r.onClick=t,r}(0,u1._)(n,e);var t=n.prototype;return t.eq=function(e){return this.file.path===e.file.path&&this.file.inclusionStatus===e.file.inclusionStatus},t.toDOM=function(){var e=this.file,n=e.path,t=e.inclusionStatus,r=null;switch(t){case"included":break;case"unsupported":r="File not supported";break;case"truncated":case"overflowing":r="Exceedes memory limit"}var i=u8.create({path:n,onClick:this.onClick,warning:r});return i.style.display="inline",i},n}(nn.xO),u6=function(e,n){return new nn.dT({regexp:RegExp("".concat(e.map(function(e){var n=e.path;return"@".concat(u4()(n))}).join("|")),"g"),decoration:function(t,r){var i,o=t[0].substring(1,null===(i=t[0])||void 0===i?void 0:i.length),a=e.find(function(e){return e.path===o});return a?nn.NZ.replace({widget:new u3(a,function(){return n(o)}),inclusive:!0}):null}})},u7=new nl.k(function(e){return e?nn.Z9.fromClass(function(){function n(t){(0,u0._)(this,n);var r=t.state.facet(uk);this.match=r.length&&e?u6(r,e):null,this.placeholders=this.match?this.match.createDeco(t):nn.NZ.none}return n.prototype.update=function(n){var t=n.state.facet(uk);if(0===t.length){this.match=null,this.placeholders=nn.NZ.none;return}if((0,nt.$H)(n,uk)){this.match=u6(t,e),this.placeholders=this.match.createDeco(n.view);return}if((0,nt.$H)(n,"doc")){if(!this.match){this.match=u6(t,e),this.placeholders=this.match.createDeco(n.view);return}this.placeholders=this.match.updateDeco(n,this.placeholders)}},n}(),{decorations:function(e){return e.placeholders},provide:function(e){return nn.Lz.atomicRanges.of(function(n){var t;return(null===(t=n.plugin(e))||void 0===t?void 0:t.placeholders)||nn.NZ.none})}}):[]}),u9=t(49699),de=t(60128),dn=t(89977),dt=t(7655),dr=(0,sE.v)(["padding","columnGap"]),di=dr.cssVars,da=dr.styleTokens,dl=nn.Lz.theme((c={"&":{flexGrow:1},"& .cm-content":{fontFamily:ez.LU.fontFamilyDefault}},(0,g._)(c,"& .".concat(ug.Fb),{display:"none"}),(0,g._)(c,"& .cm-cursor",{borderLeftColor:ez.LU.foregroundDefault,borderLeftWidth:"1px"}),c)),ds=(0,M.x)({controlBarContainer:[B.wp.position.absolute,B.wp.width("100%"),B.wp.top(0),B.wp.left(0),B.wp.border({width:1,color:ez.LU.outlineDimmer,direction:"bottom"})],footer:[B.wp.py(4),B.wp.height(32)],left:[B.wp.flex.growAndShrink(1),{cursor:"text"}],right:[B.wp.display.flex,B.wp.rowWithGap(8),B.wp.align.end],rightColumn:[B.wp.display.flex,B.wp.flex.column,B.wp.align.center],codemirror:[B.wp.display.flex,B.wp.flex.grow(1),B.wp.maxHeight(300),{"& .cm-editor":[B.wp.flex.grow(1)]}],send:[B.wp.borderRadius(),B.wp.mr(2)],sendDisabled:[(0,ei.Li)("grey")],sendEnabled:[(0,ei.Li)("teal")],chatInput:[B.wp.borderRadius(4),oW.b.filledAndOutlined,B.wp.p(4),B.wp.position.relative,{"@media (hover: hover)":{":not([disabled], [aria-disabled])":{cursor:"text"}},padding:da.padding,columnGap:da.columnGap,rowGap:ez.LU.space4,border:"1px solid ".concat(ez.LU.outlineDimmest),"&:not([disabled], [aria-disabled])":{borderColor:ez.LU.outlineDimmer},"&:hover:not([disabled], [aria-disabled]):hover":{borderColor:ez.LU.tealStronger},"&:focus-within":{borderColor:ez.LU.tealStronger}}]});function dc(e){var n,t,r,i,o,a,l,s,c,u=(0,i2.m5)(),d=(0,i2.m6)(),p=(t=(n={view:e.view,setPromptEditor:e.inputRef}).view,r=n.setPromptEditor,i=(0,w.useRef)(null),o=(0,e$.A)(r),(0,w.useEffect)(function(){if(t){var e=o.current;return e({setValue:function(e){t.state.doc.toString()!==e&&t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e}})},getValue:function(){return t.state.doc.toString()},focus:function(){t.focus(),t.dispatch({selection:{anchor:t.state.doc.length}})},animatePlaceholder:function(){t.dispatch({effects:u9.om.of(!0)}),(0,uw.U)(i,"border-color",ez.LU.accentPrimaryDefault),setTimeout(function(){requestAnimationFrame(function(){var e;null===(e=i.current)||void 0===e||e.style.removeProperty("border-color")})},60),t.focus()}}),function(){e(null)}}},[t,o]),i),h=(0,u9.hk)({text:e.placeholderText}),m=(0,cK.Vn)(e.view,u9.Im),v=ux.bZ.use(e.maxLength),y=(0,e$.A)(e.onSubmit),b=du.use((0,w.useCallback)(function(e){return y.current(e)},[y]),!e.isConnected),S=uJ.use(e.findFiles),Y=u7.use(e.openFile),A=u_.use(e.fileContextInclusions),C=up.L.use({analyticsSurface:e.analyticsSurface,shouldTrack:!0}),x=e.updateFileContext,k=uQ.use((0,w.useCallback)(function(e){return null==x?void 0:x({path:e,preference:"include"})},[x])),_=uS.U.use({addAttachments:e.addAttachments,onAutoAttachedLargePaste:function(e){(0,t7.u4)(t7.AZ.ASSISTANT_USED,{action:"auto_attached_large_paste",fileSize:e})}}),D=(0,ub.Jw)(uy.IW.id,uy.Gp.GenerateVisualizationCode),E=(0,ub.Jw)(uy._t.id,uy.ij.GenerateStylingCode),R=(0,uY.A)({addAttachments:e.addAttachments}),I=R.isDraggedOver,T=R.drop,P=(!e.view||!0===m)&&!e.isLastEventInProgress||e.isSessionLoading&&!e.isLastEventInProgress||(null===(a=e.assistantModeAuthz)||void 0===a?void 0:a.isAuthorized)===!1||e.isSubmitDisabled,L=e.attachments,U=e.attachmentButton,N=e.controlBar,O=e.debugButton,M=e.fileContextButton,B=e.visualSelectorButton,H=(0,uA.e)(),z=e.isSessionLoading,W=e.isLastEventInProgress,G=(0,w.useMemo)(function(){return z?{sendButtonIcon:(0,f.Y)(tn.A,{}),sendButtonAlt:"Loading"}:W?{sendButtonIcon:(0,f.Y)(dt.A,{}),sendButtonAlt:"Stop"}:{sendButtonIcon:(0,f.Y)(dn.A,{}),sendButtonAlt:"Send"}},[z,W]),V=G.sendButtonIcon,j=G.sendButtonAlt,Z=function(){if(e.isLastEventInProgress){e.onStop();return}if(e.view){var n=e.view.state.doc.toString();n&&(e.onSubmit(n),e.view.dispatch({changes:{from:0,to:e.view.state.doc.length}}))}},q=(0,de.z)({type:"assistant"}),K=(0,w.useMemo)(function(){return(0,uv.P)(e.isPasteAndDropSupported?T:void 0,p,D,E,q)},[p,D,T,q,E,e.isPasteAndDropSupported]),$=void 0;return e.isSubmitDisabled&&e.submitDisabledReason?$=e.submitDisabledReason:(null===(l=e.assistantModeAuthz)||void 0===l?void 0:l.isAuthorized)===!1&&($=null===(s=e.assistantModeAuthz)||void 0===s?void 0:s.message),(0,f.FD)(eo.ui,{css:ds.chatInput,innerRef:K,style:(c={flexDirection:"compact"===e.variant?"row":void 0},(0,g._)(c,di.padding,"compact"===e.variant?"2px 5px":"4px 4px"),(0,g._)(c,di.columnGap,u||d?"0px":"4px"),(0,g._)(c,"borderColor",I?ez.LU.accentPrimaryDefault:void 0),(0,g._)(c,"paddingTop",e.controlBar?ez.LU.space32:void 0),c),children:[N?(0,f.Y)(F.S,{css:ds.controlBarContainer,children:N}):null,L,(0,f.Y)(um.A,{ref:e.codemirrorRef,css:ds.codemirror,fontSize:14,extensions:[dl,b,C,_,h,ux.tP,v,A,Y,S,k,uh.r,uf.N,e.isPasteAndDropSupported?_:[],H?[]:cX.fd]}),(0,f.FD)(F.S,{css:ds.footer,row:!0,gap:8,align:"end",children:["compact"===e.variant?null:(0,f.FD)(F.S,{css:ds.left,row:!0,gap:8,align:"center",onClick:function(n){if(n.target===n.currentTarget){var t;null===(t=e.view)||void 0===t||t.focus()}},children:[U,B,M,O]}),(0,f.FD)(F.S,{css:ds.right,style:{alignItems:"compact"===e.variant?"flex-end":"center"},children:["compact"===e.variant?null:(0,f.Y)(ux.v$,{view:e.view}),e.feedbackButton,e.deepThinkingControl,(0,f.FD)(F.S,{css:ds.rightColumn,children:["compact"===e.variant?(0,f.Y)(ux.v$,{view:e.view}):null,u?(0,f.Y)(uC.J,{variant:"assistant",alt:j,onClick:Z,dataCy:"ai-chat-send-button",iconOverride:e.isLastEventInProgress?(0,f.Y)(dt.A,{}):void 0}):(0,f.Y)(eo.ui,{elevated:!0,css:ds.send,children:e.isConnected?(0,f.Y)(ev.K0,{css:P?ds.sendDisabled:ds.sendEnabled,disabled:P,tooltipContents:$,tooltipBehavior:P?"default":"hidden",dataCy:"ai-chat-send-button",alt:j,onClick:Z,children:V}):(0,f.Y)(ev.K0,{disabled:!0,alt:"Connecting…",children:(0,f.Y)(tn.A,{})})})]})]})]})]})}var du=new nl.k(function(e,n){return nn.Lz.domEventHandlers({keydown:function(t,r){if(!((0,ud.lq)(r.state).length>0)&&("Enter"===t.key&&t.metaKey&&t.stopPropagation(),"Enter"===t.key&&!t.shiftKey)){if(t.preventDefault(),!(n||r.state.field(u9.Im)))e(r.state.doc.toString()),r.dispatch({changes:{from:0,to:r.state.doc.length}})}}})}),dd=t(33054);function dp(){var e=(0,$._)(["\n  query GetRagAuthorization($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          useRag {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return dp=function(){return e},e}var df={},dh=(0,J.J1)(dp());function dm(){var e,n,t,r=(0,v._)((0,w.useState)(null),2),i=r[0],o=r[1],a=(0,n_.A)(),l=(e=(0,K._)({},df,{variables:{replId:a}}),Q.I(dh,e)),s=l.data,c=l.refetch,u=(null==s?void 0:null===(t=s.repl)||void 0===t?void 0:t.__typename)==="Repl"&&s.repl.authorizations.useRag.isAuthorized;return(0,nc.b)((n=(0,y._)(function(e,n){var t,r,i,a,l,s,c,d,p;return(0,b.YH)(this,function(f){switch(f.label){case 0:if(t=n.signal,!u)return[2];r=e.viktor.subscribeCurrentState.subscribe({},{signal:t}).resReadable,i=!1,a=!1,f.label=1;case 1:f.trys.push([1,6,7,12]),s=(0,e6._)(r),f.label=2;case 2:return[4,s.next()];case 3:if(!(i=!(c=f.sent()).done))return[3,5];if(!(d=c.value).ok)return o({error:d.payload.message}),[3,5];o(d.payload),f.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return p=f.sent(),a=!0,l=p,[3,12];case 7:if(f.trys.push([7,,10,11]),!(i&&null!=s.return))return[3,9];return[4,s.return()];case 8:f.sent(),f.label=9;case 9:return[3,11];case 10:if(a)throw l;return[7];case 11:return[7];case 12:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[u]),{isRagAuthorized:u,ragState:i,refetchRagAuthorization:(0,w.useCallback)(function(){c({replId:a})},[c,a])}}var dg={direction:"reverse",state:{id:null,state:null},reducer:function(e,n){return n.id=e.id,n.state=e.state,!1}},dv=t(6659),dw=t(20731),dy=t(16836),db=(0,M.x)({attachments:[B.wp.px(4),B.wp.py(8)]});function dS(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,g,Y,x,_,D,E=e.assistantAuthz,R=e.sendMessage,I=e.stopMessage,F=e.openFile,T=e.openGitCommit,P=e.inputRef,L=e.isSessionLoading,U=e.sessionId,N=e.fileContextInclusions,M=e.dataAppTourGenerateCodeStep,B=e.portfolioWebsiteTourGenerateCodeStep,H=e.shouldAutoscrollRef,z=(0,S.NC)(),W=(0,k.Rj)(function(){return U?z.sessions.get(U):null},[z,U],{default:null}),G=(0,i2.m5)(),V=(0,i$._P)({controlName:"flag-agent-debug-info-button"}),j=(0,i$._P)({controlName:"flag-machine-meditation"}),Z=(0,i$._P)({controlName:"flag-assistant-visual-editor-button"}),K=!(0,lZ.F)()&&(null==E?void 0:E.advancedAssistant.isAuthorized),$=(0,A.A)().fs;aj();var J=(n=(0,O.Sx)(),t=(0,n2.J)(),(0,w.useCallback)((r=(0,y._)(function(e){var r,i,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:return[4,$.listFiles()];case 1:if((r=s.sent()).error||!r.files)return[2,{error:null!==(i=r.error)&&void 0!==i?i:"Something went wrong",files:null}];if(o=r.files.filter(function(e){return!t(e)}),!e)return[3,3];return[4,(0,uI.UI)(e,o)];case 2:return l=s.sent(),[3,4];case 3:l=(0,uE.A)(o,{existing:n(),getKey:function(e){return e}}).map(function(e){return{path:e}}),s.label=4;case 4:return a=l,[2,{total:o.length,files:a,error:null}]}})}),function(e){return r.apply(this,arguments)}),[$,t,n])),Q=(0,k.Rj)(function(){return null==W?void 0:W.reduce(dg,1)},[W],{default:null}),X=(null==Q?void 0:Q.state)===C.qOk.IN_PROGRESS,ee=(0,S.GS)(),en=(0,S.Y9)(),et=(0,S.so)(),er=(0,S.Gk)(),ei=dm(),eo=ei.isRagAuthorized,ea=ei.ragState,el=ei.refetchRagAuthorization;(0,w.useEffect)(function(){el()},[null==E?void 0:null===(_=E.advancedAssistant)||void 0===_?void 0:_.isAuthorized,el]);var es=(0,v._)((0,w.useState)(!1),2),ec=es[0],eu=es[1],ed=(0,v._)((0,w.useState)("ai_model_selector"),2),ep=ed[0],ef=ed[1],eh=(0,S.dm)(),em=eh.assistantMode,eg=eh.setAssistantMode,ev=(0,S.K2)().limits.messageCharacters,ew=(0,i2.m5)(),ey=(0,nT.A)().showError,eb=(0,w.useCallback)((i=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return n=e.files,t=e.onError,[4,(0,c$.Zn)({parentPath:c0.Ls,files:n,fs:$,overwrite:!0,onError:function(e){return t(e.error)}})];case 1:return r.sent(),[2]}})}),function(e){return i.apply(this,arguments)}),[$]),eS=(0,c0.Ay)({sessionId:null!=U?U:void 0,uploadFiles:eb,onError:ey}),eY=eS.attachments,eA=eS.urlAttachments,eC=eS.removeAttachment,ex=eS.addAttachments,ek=eS.addUrlAttachment,e_=eS.removeUrlAttachment,eD=eS.clearAttachments,eE=eS.isLoading,eR=(0,dy.T)({mode:em,authz:E}),eI=(0,c1.B)(),eF=eI.isDeepThinkingEnabled,eT=eI.setIsDeepThinkingEnabled,eP=(a=(o={authz:eR,sendMessage:R,shouldAutoscrollRef:H}).authz,l=o.sendMessage,s=o.shouldAutoscrollRef,c=(0,S.Gk)(),u=dm().isRagAuthorized,p=(d=(0,dd.Zo)()).toggleVisualEditor,h=d.element,g=(m=(0,S.dm)()).getAssistantMessageIntent,Y=m.getAssistantMessageModel,x=m.getAssistantMode,(0,w.useCallback)(function(e,n,t){if(c){var r,i=Y(a);(0,t7.u4)(t7.AZ.ASSISTANT_USED,{action:"message_sent",assistant_mode:x(),model_type:i,message_content:e,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),l({message:e,attachments:n,isDeepThinkingEnabled:null!==(r=null==t?void 0:t.enableDeepThinking)&&void 0!==r&&r,useRag:u,modelType:i,intent:g(),webviewTargetedElement:null!=h?h:void 0}),s.current=!0,h&&p()}},[c,g,x,Y,a,l,u,s,h,p]));function eL(){return(eL=(0,y._)(function(e){return(0,b.YH)(this,function(n){return eR.isAuthorized&&(eP(e,(0,q._)(eY).concat((0,q._)(eA.map(function(e){return e.file}))),{enableDeepThinking:eF}),eD(),e.trim().length>0&&((null==M?void 0:M.isActive)?M.next():(null==B?void 0:B.isActive)&&B.next())),[2]})})).apply(this,arguments)}var eU=(0,na.A)(),eN=eU.ref,eO=eU.view,eM=null!==(D=(0,cK.Vn)(eO,cX.Wd))&&void 0!==D?D:[];return(0,f.FD)(f.FK,{children:[(0,f.Y)(dc,{codemirrorRef:eN,view:eO,assistantModeAuthz:eR,placeholderText:"Ask ".concat(S.BP,", use @ to include specific files..."),isPasteAndDropSupported:!0,isConnected:er,inputRef:P,isLastEventInProgress:X,isSessionLoading:L,isSubmitDisabled:eE,submitDisabledReason:eE?"Please wait for files to finish uploading":null,findFiles:J,fileContextInclusions:N,updateFileContext:function(e){return ee(e.path,e.preference)},openFile:F,openGitCommit:T,maxLength:ev,onStop:I,onSubmit:function(e){return eL.apply(this,arguments)},analyticsSurface:"workspace_ai_sidebar",attachments:(0,f.Y)(ov.A,{css:db.attachments,detectedUrls:eM.map(function(e){return(0,f.Y)(cQ.A,{url:e,addUrlAttachment:ek,removeUrlAttachment:e_,onError:ey},e)}),fileAttachments:eY.map(function(e){return(0,f.Y)(ow.m1,{attachment:e,removeAttachment:eC,getAttachmentTypeDisclaimer:(0,oy.F)({aiName:S.BP}),imagesDisabledMessage:"basic"===em?"".concat(S.BP," can't see images in Basic mode"):void 0},e.path)})}),attachmentButton:(0,f.Y)(cJ.e,{status:L?"loading":"composing",addAttachments:ex}),addAttachments:ex,debugButton:V&&U?(0,f.Y)(dv.A,{sessionId:U,sessionType:C.dF3.CHAT}):null,fileContextButton:(0,f.Y)(uq,{isInMobileWorkspace:ew,onChange:function(e){return ee(e.path,e.preference)},unSelectAll:function(e){return en(e.paths)},findFiles:J,fileContextInclusions:N,isRagAuthorized:eo,ragState:ea}),controlBar:(0,f.Y)(ul,{availableModels:et,assistantAdvancedAuthz:null==E?void 0:E.advancedAssistant,onModeSelectChange:function(e){if(!(null==E?void 0:E.advancedAssistant.isAuthorized)&&"advanced"===e){ef("ai_model_selector"),eu(!0);return}e!==em&&(0,t7.u4)(t7.AZ.ASSISTANT_USED,{action:"mode_changed",intent_type:null,mode:e,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),eg(e)}}),feedbackButton:!G&&W&&K?(0,f.Y)(c2.M,{session:W}):null,deepThinkingControl:j&&"advanced"===em&&null!=et.overrideModel?(0,f.Y)(c1.A,{isEnabled:eF,setIsEnabled:eT}):null,visualSelectorButton:Z?(0,f.Y)(dw.G,{}):null}),(0,f.Y)(i4.A,{isOpen:ec,onClose:function(){return eu(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",highlightUpsell:"assistant",analyticsContext:{upgrade:{context:ep,surface:"ghostwriter_power_up_dialog"}}})]})}var dY=(0,M.x)({root:[B.wp.py(8),B.wp.px(6)],surface:[B.wp.py(8),B.wp.px(12),B.wp.borderRadius(),B.wp.textAlign.center],buttonContainer:[B.wp.width("100%"),B.wp.justify.center],chatInputWrapper:[B.wp.px(8),B.wp.pb(8)],guestNotAllowedInStarter:[B.wp.p(8)]});function dA(e){var n=e.assistantAuthz,t=e.getFileContext,r=e.hideInput,i=(0,t8._)(e,["assistantAuthz","getFileContext","hideInput"]),o=(0,v._)((0,w.useState)(!1),2),a=o[0],l=o[1],s=(0,lZ.F)(),c=(0,cU.x)(),u=(0,cv.V)().assistantEdits,d=(0,S.dm)(),p=d.assistantMode,h=d.setAssistantMode,m=!!("advanced"===p&&s&&!(null==u?void 0:u.isUnderQuota)),g=(0,i$._P)({controlName:"flag-freemium-ai-load-shedder"}),y=(0,ot.A)(),b=function(){(0,t7.u4)(t7.AZ.ASSISTANT_USED,{action:"mode_changed",intent_type:null,mode:"basic",message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),h("basic")};return m?(0,f.FD)(F.S,{css:dY.root,children:[(0,f.FD)(eo.ui,{elevated:!0,css:dY.surface,gap:8,align:"center",children:[(0,f.FD)(I.EY,{variant:"subheadDefault",children:["You've run out of free ",S.BP," ",(0,tL.A)(aG.go)]}),(0,f.FD)(I.EY,{children:["Upgrade to ",i5.en," to continue generating code. You can still ask ",S.BP," questions in Basic mode."]}),(0,f.FD)(F.S,{css:dY.buttonContainer,row:!0,gap:8,children:[(0,f.Y)(eg.$n,{text:"Upgrade to ".concat(i5.en),iconLeft:(0,f.Y)(ue.A,{}),onClick:function(){return l(!0)},colorway:"brand"}),(0,f.Y)(eg.$n,{text:"Switch to Basic mode",onClick:function(){return b()}})]})]}),(0,f.Y)(i4.A,{isOpen:a,onClose:function(){return l(!1)},type:"purchase",analyticsContext:{upgrade:{context:"assistant_freemium_quota"}},onPurchaseComplete:y,reloadPageAfterPurchaseComplete:!0})]}):r?null:s&&g?(0,f.Y)(cP.n,{aiName:S.BP}):c?(0,f.Y)(F.S,{css:dY.guestNotAllowedInStarter,children:(0,f.Y)(cL.c,{aiName:S.BP})}):(0,f.FD)(F.S,{css:dY.chatInputWrapper,children:[(0,f.Y)(cq,{assistantAuthz:n}),(0,f.Y)(dS,(0,K._)({assistantAuthz:n,getFileContext:t},i))]})}var dC=(0,w.forwardRef)(function(e,n){var t,r,i,o,a,l,s,c,u,d,p,h,m,g,Y,x,_,D=(0,i1.A)(),E=(0,v._)((0,w.useState)(!1),2),R=E[0],I=E[1],F=e.openPane,T=e.onSessionChange,P=e.removePane,L=(0,v._)((0,w.useState)(null!==(_=e.initialSessionId)&&void 0!==_?_:null),2),U=L[0],M=L[1],B=(0,v._)((0,w.useState)(!1),2),H=B[0],z=B[1],W=(0,S.NC)(),G=(0,k.Rj)(function(){return U?W.sessions.get(U):null},[W,U],{default:null}),V=(0,i0.r8)();(0,w.useImperativeHandle)(n,function(){return{updateActiveSessionId:function(e){M(null!=e?e:null)},openSettingsPanel:eg.openSettingsPanel,toggleSidebar:function(){V.toggleSidebar()}}}),(0,w.useEffect)(function(){null==T||T(U)},[T,U]),t=(0,v._)((0,cT.jd)({fetchPolicy:"network-only",ssr:!1}),1)[0],r=(0,w.useMemo)(function(){return i_()(t,2e3,{trailing:!0})},[t]),(0,S.zv)("received-completed-event",function(e){var n=e.event.contents.contents;(0,C.VFn)(n,"messageEventContents")&&(0,C.QNh)(n).assistantProposedActions.didCountEditRequest&&r()});var j=(0,S.q4)(),Z=(0,w.useRef)(!1),$=(0,v._)((0,w.useState)(null),2),J=$[0],Q=$[1],X=(0,iX.useRouter)(),ee=(0,i2.ME)(X,"hideChatInput"),en=(0,cF.L)(),et=en.authorizations,er=en.loading,ei=(0,S.dm)().getAssistantMode;function eo(e){if(M(e),!D&&(null==J||J.focus(),!e)){var n;null==J||null===(n=J.setValue)||void 0===n||n.call(J,"")}}var ea=(0,w.useCallback)(function(e){return F((0,n0.af)(e))},[F]),el=(0,w.useCallback)(function(e){return F({type:"git",data:{mode:{type:lU.C.COMMIT,hash:e}}})},[F]),es=(0,A.A)(),ec=es.fs,eu=es.dotReplit,ed=(o=(i={recentFilesObservable:(0,O.rE)(),getFileContext:(0,N.P)(ec,eu),assistantMode:ei()}).recentFilesObservable,a=i.getFileContext,l=i.assistantMode,s=(0,e$.A)(a),c=(0,S.Vg)(),u=(0,S.nt)(),p=(d=(0,v._)((0,w.useState)([]),2))[0],h=d[1],(0,w.useEffect)(function(){var e=function(e){return n.apply(this,arguments)};function n(){return(n=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,null===(n=s.current)||void 0===n?void 0:n.call(s,{modelType:"advanced"===l?C.e3q.ADVANCED:C.e3q.BASIC,filePreferences:u,recentFiles:e})];case 1:if(!(t=r.sent()))return[2];return h(function(e){var n=e.filePreferences,t=e.fileContextState,r=new Map(t.fileContext.map(function(e){return[e.filePath,"included"]})),i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=(0,v._)(l.value,2),u=c[0],d=c[1];if("exclude"===d){r.delete(u);continue}if(t.unsupportedPreferredFiles.has(u)){r.set(u,"unsupported");continue}r.set(u,"included"===r.get(u)?"included":"overflowing")}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return(0,q._)(r.entries()).map(function(e){var n=(0,v._)(e,2);return{path:n[0],inclusionStatus:n[1]}})}({fileContextState:t,filePreferences:u})),[2]}})})).apply(this,arguments)}return e(o.current),o.subscribe((0,cI.A)(e,{wait:2e3}))},[o,u,l,s]),{fileContextInclusions:p,getFileContext:(0,w.useMemo)(function(){return function(){return a({modelType:"advanced"===l?C.e3q.ADVANCED:C.e3q.BASIC,filePreferences:c(),recentFiles:o.current})}},[a,c,l,o])}),ep=ed.fileContextInclusions,ef=ed.getFileContext,eh=e.inputRef,em=(0,w.useCallback)(function(e){Q(e),null==eh||eh(e)},[eh]),eg=(g=(m=(0,v._)((0,w.useState)(!1),2))[0],Y=m[1],{isSettingsPanelOpen:g,openSettingsPanel:(0,w.useCallback)(function(){return Y(!0)},[]),openUserSettingsPane:(0,w.useCallback)(function(){F({type:"preferences"})},[F]),setIsSettingsPanelOpen:Y}),ev=!!(null==et?void 0:et.advancedAssistant.isAuthorized),ew=(0,w.useCallback)((x=(0,y._)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f;return(0,b.YH)(this,function(h){switch(h.label){case 0:if(n=e.message,t=e.attachments,r=e.isDeepThinkingEnabled,i=e.useRag,o=e.modelType,a=e.intent,l=e.webviewTargetedElement,H)return[2];if(z(!0),s=G)return[3,2];return[4,W.sessions.create({sessionType:C.dF3.CHAT})];case 1:if(!(c=h.sent()).ok)return z(!1),[2];s=c.payload,h.label=2;case 2:return M(s.id),u=t.map(function(e){return{path:e.path,mimeType:e.file.type}}),[4,ef()];case 3:return p=(d=h.sent()).fileContext,f=d.mostRecentFile,[4,s.appendEvent({kind:"message",intent:a,modelType:o,message:n,uploadedFiles:u,enableDeepThinking:r,useRag:i,webviewTargetedElement:l,fileContext:p,mostRecentFile:f})];case 4:return h.sent(),z(!1),[2]}})}),function(e){return x.apply(this,arguments)}),[H,G,ef,W]),ey=(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!G)return[3,2];return[4,G.abortLastEvent()];case 1:e.sent(),z(!1),e.label=2;case 2:return[2]}})}),[G]);return(0,f.FD)(f.FK,{children:[(0,f.FD)(cE,(0,e7._)((0,K._)({sessionId:U,setSessionId:eo,onNewSessionClick:function(){eo(null),null==J||J.animatePlaceholder()},sidebarState:V},eg),{children:[G?(0,f.Y)(lJ,{openPane:F,removePane:P,sessionId:null==G?void 0:G.id,shouldAutoscrollRef:Z,openAiChatSettingsPanel:eg.openSettingsPanel}):(0,f.Y)(cR.T,{showPromptSuggestions:!ee,sessionType:C.dF3.CHAT,onPromptSuggestionClick:J?function(e){var n;null==J||null===(n=J.setValue)||void 0===n||n.call(J,e.text),!D&&(null==J||J.focus())}:void 0,openAiChatSettingsPanel:eg.openSettingsPanel,titleContent:er||ev?null:(0,f.Y)(ol,{}),footerContent:er||ev?void 0:(0,f.Y)(oa,{})}),j?(0,f.Y)(os.x,{}):(0,f.Y)(dA,{assistantAuthz:et,sendMessage:ew,stopMessage:ey,openFile:ea,openGitCommit:el,inputRef:em,isSessionLoading:H,sessionId:U,getFileContext:ef,fileContextInclusions:ep,shouldAutoscrollRef:Z,hideInput:ee})]})),(0,f.Y)(i4.A,{isOpen:R,onClose:function(){return I(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}),dx=t(85144),dk=t(93517),d_=t(35707),dD=t(83378),dE=h.ZU.Object({type:h.ZU.Literal("ghostwriterChat"),data:h.ZU.Optional(h.ZU.Object({sessionId:h.ZU.Optional(h.ZU.String()),newSessionType:h.ZU.Optional(h.ZU.Enum(C.dF3))}))}),dR=(0,M.x)({root:[B.wp.center,B.wp.flex.growAndShrink(1),B.wp.p(16)]});function dI(){return(0,f.Y)(F.S,{css:dR.root,children:(0,f.Y)(I.EY,{children:"AI is disabled for this team"})})}var dF={Content:function(e){var n=e.pane.data,t=e.options,r=(0,S.NC)(),i=(0,k.Rj)(function(){return(null==n?void 0:n.sessionId)?r.sessions.get(n.sessionId):null},[r,null==n?void 0:n.sessionId],{default:null}),o=(0,i$._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),a=t.performPaneOperation,l=(0,w.useCallback)(function(e){a({operation:"open",pane:e,secondary:!0})},[a]),s=(0,w.useCallback)(function(e){a({operation:"remove",pane:{id:e}})},[a]),c=(0,O.AU)("workspaceTourGuide"),u=(0,v._)((0,w.useState)(null),2),d=u[0],p=u[1],h=(0,w.useRef)(null==n?void 0:n.sessionId);(0,n9.HP)(function(){return d},[d]);var m=(0,w.useRef)(""),g=(0,e$.A)(null==n?void 0:n.sessionId),y=(0,w.useCallback)(function(e){g.current!==e&&a({operation:"replace",pane:{type:"ghostwriterChat",data:e?{sessionId:e}:void 0}})},[a,g]),b=(0,iQ.u)(i),Y=b.FeedbackModal,A=b.feedbackCommandGroup,C=(0,w.useRef)(null);(0,w.useEffect)(function(){var e;null===(e=C.current)||void 0===e||e.updateActiveSessionId(null==n?void 0:n.sessionId)},[null==n?void 0:n.sessionId]);var x=(0,dk.y)({sessionId:null==n?void 0:n.sessionId,type:"assistant"}).usageCommand;return((0,n9.Qt)(function(){var e={type:"ghostwriterChat",setInputText:d?d.setValue:function(e){m.current=e}},n=[{name:"Chat",commands:[{data:{type:"action",icon:(0,f.Y)(dD.A,{}),label:"New chat",run:function(){y(null),null==d||d.animatePlaceholder()}}},{data:{type:"action",icon:(0,f.Y)(sO.A,{}),label:"All chats",run:function(){var e;null===(e=C.current)||void 0===e||e.toggleSidebar()}}}]},{name:"Settings",commands:[x,{data:{type:"action",icon:(0,f.Y)(af.A,{}),label:"Settings",run:function(){var e;null===(e=C.current)||void 0===e||e.openSettingsPanel()}}}]},A];return(0,e7._)((0,K._)({},e),{commands:n})},[d,y,C,x,A]),(0,iJ.f)().isTeamWithAiDisabled)?(0,f.Y)(dI,{}):o?(0,f.Y)(dx.A,{textVariant:"headerDefault",showImage:!0}):(0,f.FD)(f.FK,{children:[(0,f.Y)(dC,{ref:C,inputRef:p,initialSessionId:h.current,openPane:l,removePane:s,isGuidedWorkspaceTourActive:null!=c&&c,analyticsMessageSurface:"workspace_ai_pane",onSessionChange:y}),(0,f.Y)(Y,{})]})},Icon:function(e){var n=e.size,t=e.color;return(0,f.Y)(n$.Vx.Provider,{value:{color:t,size:n},children:t?(0,f.Y)(d_.A,{color:t}):(0,f.Y)(or.A,{})})},getTitle:function(){return S.BP},description:S.C3,category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(dE,e)}},dT=(0,w.createContext)(null);function dP(){var e=(0,w.useContext)(dT);if(!e)throw Error("Expected store in context");return e}var dL=(0,eN.eU)([]),dU=(0,eN.eU)(function(e){return e(dL)},function(e,n,t){var r=e(dL),i=Math.random().toString(36).substring(7);n(dL,[{id:i,type:t,dismiss:function(){var t=e(dL).filter(function(e){return e.id!==i});n(dL,t)}}].concat((0,q._)(r)))});function dN(){return(0,eO.Xr)(dU,{store:dP()})}function dO(e,n){(0,t7.u4)(t4.AZ.GIT_FEATURE_USED,(0,K._)({action:e,source:"git-pane"},n))}var dM=t(10460),dB=(0,M.x)({checkboxLabel:B.wp.rowWithGap(8)});function dH(){var e=(0,w.useId)(),n=(0,v._)((0,w.useState)(!0),2),t=n[0],r=n[1],i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=dN(),s=(0,A.A)().git;function c(){return(c=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(o)return[2];return a(!0),[4,s.init({initialCommit:t,includeAllInitialFiles:!0})];case 1:return(e=n.sent()).error?(a(!1),l(e.error)):(s.forceRefresh(),dO("repository-initialized")),[2]}})})).apply(this,arguments)}return(0,f.FD)(f.FK,{children:[(0,f.Y)(eg.$n,{text:o?"Initializing...":"Initialize Git Repository",iconLeft:o?(0,f.Y)(tn.A,{}):(0,f.Y)(dM.A,{}),colorway:"primary",loading:o,onClick:function(){return c.apply(this,arguments)}}),(0,f.FD)(F.S,{css:dB.checkboxLabel,tag:"label",children:[(0,f.Y)(nN.S,{id:e,checked:t,onChange:function(e){return r(e)},size:"small"}),(0,f.Y)(I.EY,{variant:"small",multiline:!1,children:"Create initial commit with all changes"})]})]})}var dz=t(15297),dW=t(39422);function dG(){var e,n=(0,rG.A)((e=(0,y._)(function(e){return(0,b.YH)(this,function(n){return[2,{connectedToGithub:dV(e),error:null}]})}),function(n){return e.apply(this,arguments)}));return null==n||n.error?null:n.connectedToGithub}function dV(e){return e.hasProfile(rz.HJ.GITHUB)}var dj=t(12878);function dZ(e){var n=e.label,t=e.allowReconnect,r=e.callback,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,A.A)().git,s=dG(),c=(0,iI.A)(),u=(0,dW.P)({onAuth:function(){dO("github-user-connected"),a(!1),l.refreshProfiles({preferredProvider:rz.HJ.GITHUB}),null==r||r()},onClose:function(){return a(!1)}});return s&&!(void 0!==t&&t)?(0,f.Y)(eg.$n,{text:"Connected to GitHub",colorway:"primary",iconLeft:(0,f.Y)(ap.A,{}),disabled:!0}):(0,f.Y)(eg.$n,{text:o||null===s?"Connecting...":c?"Visit account page to connect to GitHub":void 0===n?"Connect to GitHub":n,colorway:"primary",iconLeft:o?(0,f.Y)(tn.A,{}):(0,f.Y)(dj.A,{}),loading:o,onClick:function(){if(c){dz.M.openExternalUrl("/account#connected-services");return}a(!0),u()}})}var dq=t(44815);function dK(e){return!!e&&("string"==typeof e?e.includes(dq.Oe):e.fetch.includes(dq.Oe))}function d$(e){return e.endsWith(".git")?e.slice(0,-4):e}function dJ(e){if(!e)return null;var n="string"==typeof e?e:e.fetch;return dK(n)?d$(n):null}function dQ(e){var n="string"==typeof e?e:e.fetch;if(dK(n)){var t=(n=d$(n)).split("/");if(t.length<2)return null;var r=t[t.length-2],i=t[t.length-1];return"".concat(r,"/").concat(i)}return null}var dX=t(28365),d0=(0,M.x)({body:[B.wp.p(4),B.wp.colWithGap(8),B.wp.borderRadius(0,0,8,8)],remedies:[B.wp.flex.wrap,{gap:"8px"}]});function d1(e){var n=e.description,t=e.remedies,r=e.error;return(0,f.FD)(eo.ui,{css:d0.body,elevated:!0,children:[(0,f.Y)(I.EY,{children:n}),(0,f.FD)(F.S,{css:d0.remedies,row:!0,align:"center",justify:"end",children:[t,(0,f.Y)(eg.$n,{text:"Dismiss",iconLeft:(0,f.Y)(dX.A,{}),onClick:r.dismiss})]})]})}function d2(e){var n,t=e.error,r=(0,rG.A)((n=(0,y._)(function(e){var n,r,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:switch(t.type){case rz.uA.UNKNOWN_NOT_GIT:return[3,1];case rz.uA.UNKNOWN:return[3,2];case rz.uA.CHANNEL_CLOSED:return[3,3];case rz.uA.NOT_INITIALIZED:return[3,4];case rz.uA.UNAUTHENTICATED:return[3,5];case rz.uA.INDEX_FILE_CORRUPT:return[3,7];case rz.uA.UNKNOWN_REMOTE:return[3,8];case rz.uA.UNKNOWN_REF:return[3,9];case rz.uA.INDEX_LOCKED:return[3,10];case rz.uA.NO_COMMITS:return[3,11];case rz.uA.PATH_MATCHED_NO_FILES:return[3,12];case rz.uA.USER_NOT_CONFIGURED:return[3,13];case rz.uA.INVALID_REFERENCE:return[3,14];case rz.uA.BRANCH_ALREADY_EXISTS:return[3,15];case rz.uA.MERGE_CONFLICT:return[3,16];case rz.uA.UPSTREAM_NOT_SET:return[3,17];case rz.uA.HEAD_DETACHED:return[3,18];case rz.uA.DIRTY_WORKTREE:return[3,19];case rz.uA.PROTECTED_BRANCH:return[3,20];case rz.uA.PUSH_REJECTED:return[3,21];case rz.uA.REMOTE_ALREADY_EXISTS:return[3,22];case rz.uA.TIMEOUT:return[3,23];case rz.uA.ALREADY_INITIALIZED:return[3,24]}return[3,25];case 1:return n="Unknown error from the Git service. This is probably a bug in the app.",r=null,[3,26];case 2:return n="There was an unrecognized fatal error with Git. This is probably a bug in the app.",r=null,[3,26];case 3:return n="The command was interrupted. Please try again.",r=null,[3,26];case 4:return n="There isn't a Git repository in the Repl's root directory.",r=null,[3,26];case 5:return[4,e.getRemotes()];case 6:if((i=p.sent()).error)return[2,i];if(0!==i.remotes.size){o=!1,a=!0,l=!1,s=void 0;try{for(c=i.remotes.values()[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)if(d=u.value,dK(d)){o=!0;break}}catch(e){l=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}if(o){if(dV(e))return n="Failed to authenticate with the remote. Please ensure that Replit has access to this repository on GitHub.",r=(0,f.Y)(dZ,{label:"Update GitHub Repository Access",callback:t.dismiss,allowReconnect:!0}),[3,26];return n="Failed to authenticate with the remote. You have not connected your Replit account to GitHub, so Replit may not have access to the remote repository. Please connect your account to GitHub and try again.",r=(0,f.Y)(dZ,{label:"Connect to GitHub",callback:t.dismiss,allowReconnect:!0}),[3,26]}}return n="Failed to authenticate with the remote.",r=null,[3,26];case 7:return n="The Git index file is corrupt. This can happen if the index file is manually edited, or if the Git repository is corrupted.",r=null,[3,26];case 8:return n="The remote specified isn't configured.",r=null,[3,26];case 9:return n="Remote ref of current branch is missing, publish your branch or restore the remote branch",r=null,[3,26];case 10:return n="Git tried to perform an action but the index lockfile still exists. This means Git either crashed previously or is still running an action.",r=null,[3,26];case 11:return n="There are no commits in the repository.",r=null,[3,26];case 12:return n="The path specified didn't match any files.",r=null,[3,26];case 13:return n="There isn't any user information configured for Git.",r=null,[3,26];case 14:return n="An unknown/invalid reference was specified. This is usually a branch, but it could be something else, such as a tag.",r=null,[3,26];case 15:return n="The branch specified already exists.",r=null,[3,26];case 16:return n="There was an unexpected merge conflict.",r=null,[3,26];case 17:return n="The upstream branch isn't set.",r=null,[3,26];case 18:return n="The HEAD is detached. You have a commit checked out, not a branch.",r=null,[3,26];case 19:return n="There are uncommitted changes.",r=null,[3,26];case 20:return n="This operation cannot be performed on a protected branch.",r=null,[3,26];case 21:return n="The push was rejected by the remote. This is usually because the remote has commits that aren't in the local repository.",r=null,[3,26];case 22:return n="The remote specified already exists.",r=null,[3,26];case 23:return n="The remote operation timed out.",r=null,[3,26];case 24:return n="There is already a Git repository in the Repl's root directory.",r=null,[3,26];case 25:return n="We ran into an unknown error that we don't have a description for. This is probably a bug with the app.",r=null,[3,26];case 26:return[2,{description:n,remedies:r,error:null}]}})}),function(e){return n.apply(this,arguments)}),[t],{refresh:!1});if(!r)return(0,f.Y)(d1,{description:null,remedies:null,error:t});if(r.error)return(0,f.Y)(d1,{description:"Unknown error from the Git service. This is probably a bug in the app.",remedies:null,error:t});var i=r.description,o=r.remedies;return(0,f.Y)(d1,{description:i,remedies:o,error:t})}var d4=(0,M.x)({errorNotification:[{pointerEvents:"all"},B.wp.p(1),B.wp.backgroundColor.accentNegativeDimmer,B.wp.borderRadius(8),B.wp.shadow(3)],header:[B.wp.py(4),B.wp.px(8),B.wp.display.flex,B.wp.flex.row,B.wp.align.center,B.wp.justify.spaceBetween,B.wp.color.accentNegativeStrongest],errorType:[B.wp.font.code,{opacity:.75}],body:[B.wp.pt(4),B.wp.pb(8),B.wp.px(8),B.wp.colWithGap(8),B.wp.backgroundColor.backgroundHigher,B.wp.borderRadius(0,0,8,8)]});function d5(e){var n=e.error;return(0,f.FD)(F.S,{css:d4.errorNotification,children:[(0,f.FD)(F.S,{css:d4.header,children:[(0,f.FD)(F.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(o9.A,{}),(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:function(e){switch(e.type){case rz.uA.UNKNOWN_NOT_GIT:return"Unknown Error";case rz.uA.UNKNOWN:return"Unknown Git Error";case rz.uA.NOT_INITIALIZED:case rz.uA.UNAUTHENTICATED:case rz.uA.INDEX_FILE_CORRUPT:case rz.uA.UNKNOWN_REMOTE:case rz.uA.UNKNOWN_REF:case rz.uA.INDEX_LOCKED:case rz.uA.NO_COMMITS:case rz.uA.PATH_MATCHED_NO_FILES:case rz.uA.USER_NOT_CONFIGURED:case rz.uA.INVALID_REFERENCE:case rz.uA.BRANCH_ALREADY_EXISTS:case rz.uA.MERGE_CONFLICT:case rz.uA.HEAD_DETACHED:case rz.uA.DIRTY_WORKTREE:case rz.uA.PUSH_REJECTED:case rz.uA.PROTECTED_BRANCH:case rz.uA.REMOTE_ALREADY_EXISTS:case rz.uA.ALREADY_INITIALIZED:case rz.uA.TIMEOUT:case rz.uA.OBJECT_HAS_NO_NOTE:case rz.uA.NOTE_SUCCESSFULLY_REMOVED:case rz.uA.NOTE_SUCCESSFULLY_OVERWRITTEN:case rz.uA.OBJECT_ALREADY_HAS_NOTE:return"Git Error";default:return"Unknown Error"}}(n)})]}),(0,f.Y)(I.EY,{css:d4.errorType,multiline:!1,children:n.type})]}),(0,f.Y)(F.S,{css:d4.body,children:(0,f.Y)(d2,{error:n})})]})}var d8=(0,M.x)({errorList:[{pointerEvents:"none"},{transition:"background-color 100ms"},B.wp.position.absolute,B.wp.top(0),B.wp.bottom(0),B.wp.left(0),B.wp.right(0),B.wp.p(8),B.wp.colWithGap(16),B.wp.zIndex(10)]});function d3(){var e=(0,eO.md)(dU,{store:dP()});return(0,f.Y)(F.S,{style:{backgroundColor:e.length>0?"rgba(0, 0, 0, 0.25)":"transparent"},css:d8.errorList,children:e.map(function(e){return(0,f.Y)(d5,{error:e},e.id)})})}function d6(){var e,n,t,r,i,o=(0,v._)((0,w.useState)(!1),2),a=o[0],l=o[1],s=(0,A.A)().git,c=(n=(e=(0,v._)((0,w.useState)(!1),2))[0],t=e[1],r=(0,A.A)().git,(0,w.useEffect)(function(){return r.onBusyChange(t)},[r]),n),u=dN(),d=(0,rG.A)((i=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,e.isInitialized()];case 1:if((n=r.sent()).error)return u(n.error),[2,n];if(!n.initialized)return[2,{hasRemotes:!1,error:null}];return[4,e.getRemotes()];case 2:if((t=r.sent()).error)return u(t.error),[2,t];return[2,{hasRemotes:t.remotes.size>0,error:null}]}})}),function(e){return i.apply(this,arguments)}),[u]);if(null==d?void 0:d.error)return null;var p=!!d&&d.hasRemotes,h=c||a||null===d;function m(){return(m=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(s.isBusy()||h)return[2];if(l(!0),!p)return[3,2];return[4,s.fetch()];case 1:(e=n.sent()).error?u(e.error):dO("remote-fetched"),n.label=2;case 2:return[4,s.refreshProfiles()];case 3:return n.sent(),s.forceRefresh(),setTimeout(function(){return l(!1)},500),[2]}})})).apply(this,arguments)}return(0,f.Y)(ev.K0,{alt:p?"Refresh and Fetch":"Refresh",size:24,onClick:function(){return m.apply(this,arguments)},disabled:h,children:h?(0,f.Y)(tn.A,{}):(0,f.Y)(o3.A,{})})}var d7=t(64607),d9=t(51026);function pe(){var e=(0,$._)(["\n  query GitUserImageByUsername($username: String!) {\n    userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return pe=function(){return e},e}var pn={},pt=(0,J.J1)(pe()),pr=t(15402),pi=t(46288),po=t(29253),pa=t(36433),pl=(0,M.x)({gitUserContainer:[B.wp.flex.row],gitUserInnerContainer:[B.wp.align.center,B.wp.flex.row,{"& > :not(:first-child)":{marginLeft:ez.LU.space4}}],gitUserInnerContainerFlipped:[B.wp.align.center,B.wp.flex.rowReverse,{"& > :not(:last-child)":{marginLeft:ez.LU.space4}}],alignCenter:[B.wp.align.center]});function ps(e){var n=e.name,t=e.email,r=e.allowPlaceholderAvatar,i=void 0!==r&&r,o=e.color,a=void 0===o?"default":o,l=e.small,s=void 0!==l&&l,c=e.flip,u=void 0!==c&&c,d=e.placement,p=e.showTooltip;return void 0===p||p?(0,f.Y)(F.S,{css:pl.gitUserContainer,children:(0,f.Y)(rc.m_,{placement:void 0===d?"bottom":d,tooltip:(0,f.Y)(I.EY,{children:t}),children:(0,f.FD)(F.S,{css:u?pl.gitUserInnerContainerFlipped:pl.gitUserInnerContainer,children:[(0,f.Y)(pc,{email:t,name:n,enablePlaceholder:i,small:s}),(0,f.Y)(I.EY,{multiline:!1,color:a,variant:s?"small":"text",children:n})]})})}):(0,f.Y)(F.S,{css:pl.gitUserContainer,children:(0,f.FD)(F.S,{css:u?pl.gitUserInnerContainerFlipped:pl.gitUserInnerContainer,children:[(0,f.Y)(pc,{email:t,name:n,enablePlaceholder:i,small:s}),(0,f.Y)(I.EY,{multiline:!1,color:a,variant:s?"small":"text",children:n})]})})}function pc(e){var n,t=e.name,r=e.email,i=e.enablePlaceholder,o=void 0!==i&&i,a=e.small,l=void 0!==a&&a,s=(0,v._)((n=(0,K._)({},pn,{initialFetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",ssr:!1}),d9._(pt,n)),1)[0],c=(0,v._)((0,w.useState)(null),2),u=c[0],d=c[1];return(0,w.useEffect)(function(){var e;(e=(0,y._)(function(){var e,n,t,i,o,a,l,c,u,p;return(0,b.YH)(this,function(f){switch(f.label){case 0:if(!r.endsWith("@".concat(pi.D)))return[3,1];return e=r.split("@")[0],(n=(0,v._)(e.split("+"),2))[0],t=n[1],d((0,pr.d3)("https://github.com/".concat(t,".png"))),[3,4];case 1:if(!r.endsWith("@".concat(pi.O)))return[3,3];return a=r.split("@")[0],(l=(0,v._)(a.split("-"),2))[0],[4,s({variables:{username:l[1]}})];case 2:return(c=null===(o=f.sent().data)||void 0===o?void 0:null===(i=o.userByUsername)||void 0===i?void 0:i.image)&&d(c),[3,4];case 3:u=(0,d7.Fx)(r),(p=new URL("https://gravatar.com/avatar/".concat(u))).searchParams.append("d","404"),d(p.toString()),f.label=4;case 4:return[2]}})}),function(){return e.apply(this,arguments)})()},[r,s]),(0,w.useMemo)(function(){var e=l?12:16;return null===u?o?(0,f.Y)(pa.A,{css:pl.alignCenter,size:e}):null:(0,f.Y)(po.e,{css:pl.alignCenter,username:t,src:u,onError:function(){return d(null)},size:e})},[u,o,l,t])}var pu=t(41845),pd=F.D.button,pp=(0,M.x)({fullWidth:[B.wp.width("100%")],searchContainer:[B.wp.p(8)],paddedX:[B.wp.px(8)],loadingContainer:[B.wp.display.flex,B.wp.align.center,B.wp.justify.center,B.wp.py(48)],menu:[B.wp.maxWidth(390),B.wp.width(280),B.wp.display.flex,B.wp.flex.shrink(1),B.wp.maxHeight(640),B.wp.borderRadius(8),B.wp.overflow("hidden")],form:[B.wp.display.flex,B.wp.flex.growAndShrink(1),B.wp.flex.column,B.wp.overflow("hidden")],body:[B.wp.py(8),B.wp.colWithGap(8),B.wp.flex.growAndShrink(1),B.wp.overflow("auto")],branchMetadata:[B.wp.flex.shrink(1)],selector:[B.wp.display.flex,B.wp.align.center,B.wp.rowWithGap(4)],menuItem:[{backgroundColor:"inherit"},oW.b.listItem,B.wp.px(8),B.wp.py(4),B.wp.borderRadius(0),B.wp.align.start],inputDisabled:[{opacity:.75}],padded:[B.wp.p(8)],virtualItem:[B.wp.position.absolute,B.wp.top(0),B.wp.left(0),B.wp.width("100%"),B.wp.overflow("hidden")],virtualList:[B.wp.position.relative],divider:[B.wp.mt(8),B.wp.mb(8),B.wp.ml(0),B.wp.mr(0)],errorText:[B.wp.color.accentNegativeStronger,B.wp.mt(4)],createBranchButton:[B.wp.height(32),B.wp.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}]}),pf=function(e,n){var t,r,i,o=dN(),a=(0,A.A)().git,l=(0,v._)((0,w.useState)(!0),2),s=l[0],c=l[1],u=(0,rG.A)((t=(0,y._)(function(e){var n,t,r,i,a,l,s,u,d,p,f,h,m,g,v,w,y,S,Y,A,C;return(0,b.YH)(this,function(b){switch(b.label){case 0:return c(!0),[4,e.isInitialized()];case 1:if((n=b.sent()).error)return o(n.error),c(!1),[2,n];if(!n.initialized)return c(!1),[2,{active:[],stale:[],important:[],error:null}];return[4,e.listBranches()];case 2:if((t=b.sent()).error)return o(t.error),c(!1),[2,t];return[4,e.findDefaultBranches()];case 3:if((r=b.sent()).error)return o(r.error),c(!1),[2,r];i=t.branches,a=new Set,l=!0,s=!1,u=void 0;try{for(d=function(){var e=f.value,n=i.find(function(n){return(0,rz.CC)(n,e)});n&&a.add(n)},p=r.refs[Symbol.iterator]();!(l=(f=p.next()).done);l=!0)d()}catch(e){s=!0,u=e}finally{try{l||null==p.return||p.return()}finally{if(s)throw u}}h=Date.now()-72e6,m=[],g=[],v=!0,w=!1,y=void 0;try{for(S=i[Symbol.iterator]();!(v=(Y=S.next()).done);v=!0)A=Y.value,!a.has(A)&&(A.commit.author.date>h?m.push(A):g.push(A))}catch(e){w=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw y}}return C=Array.from(a),c(!1),[2,{active:m,stale:g,important:C,error:null}]}})}),function(e){return t.apply(this,arguments)}),[o]),d=(r=(0,y._)(function(n){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(s||(0,rz.CC)(e,n))return[2];return c(!0),[4,a.switchBranch(n)];case 1:return(t=r.sent()).error?(o(t.error),c(!1)):(a.forceRefresh(),dO("branch-switched")),[2]}})}),function(e){return r.apply(this,arguments)}),p=(i=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(s||""===e)return[2];return c(!0),[4,a.createBranch({name:e,checkout:!0})];case 1:return(n=t.sent()).error?(o(n.error),c(!1)):(a.forceRefresh(),dO("branch-created")),[2]}})}),function(e){return i.apply(this,arguments)});if((0,w.useEffect)(function(){null!==e&&(c(!1),n({type:lU.C.CURRENT_BRANCH}))},[e,n]),null===u||s)return{loading:s,active:[],stale:[],important:[],handleSwitchBranch:d,handleCreateBranch:p,error:null};if(u.error)return{loading:s,active:[],stale:[],important:[],handleSwitchBranch:d,handleCreateBranch:p,error:u.error};var f=u.active,h=u.stale,m=u.important;return{loading:s,active:null!=f?f:[],stale:null!=h?h:[],important:null!=m?m:[],handleSwitchBranch:d,handleCreateBranch:p,error:null}},ph=function(e){var n=e.branch,t=pf(n,e.switchMode),r=t.loading,i=t.active,o=t.important,a=t.stale,l=t.handleSwitchBranch,s=t.handleCreateBranch,c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1],p=(0,v._)((0,w.useState)(""),2),h=p[0],m=p[1],g=(0,v._)((0,w.useState)(!1),2),S=g[0],Y=g[1];return(0,f.Y)(pA,{isOpen:u,setIsOpen:d,important:o,active:i,stale:a,current:n,query:h,setQuery:m,onSwitchBranch:l,createBranchLoading:S,createBranch:(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return Y(!0),[4,s(h)];case 1:return e.sent(),m(""),Y(!1),[2]}})}),loading:r})},pm=function(e){var n=e.onClick,t=e.children,r=(0,w.useRef)(null),i=(0,v._)((0,s4.A9)(r,!1),4),o=i[0],a=i[1],l=i[2],s=i[3];return(0,s4.xK)(a,r),(0,f.Y)(pd,{ref:r,role:"menuitem",css:pp.menuItem,onClick:function(e){s(),n(e)},onKeyDown:l,tabIndex:o,children:t})},pg=function(e){var n=e.branch;return(0,f.FD)(F.S,{css:pp.branchMetadata,row:!0,gap:8,align:"center",children:[(0,f.Y)(ps,{name:n.commit.author.name,email:n.commit.author.email,color:"dimmer",allowPlaceholderAvatar:!0,placement:"top",showTooltip:!1,small:!0}),(0,f.Y)(I.EY,{color:"dimmer",variant:"small",children:(0,ed.ie)(n.commit.author.date)})]})},pv=function(e){var n=e.branch,t=e.current,r=e.onSwitchBranch,i=(0,w.useMemo)(function(){return(0,rz.FF)(n,t)},[n,t]);return(0,f.FD)(pm,{onClick:function(){return r(n)},children:[(0,f.Y)(I.EY,{multiline:!1,children:(0,f.Y)(lS.Yi,{name:n.name,remote:n.type===rz.xx.REMOTE?n.remote:null,current:i})}),(0,f.Y)(pg,{branch:n})]})},pw=function(e,n){return n.filter(function(n){return(0,rz.fn)(n).toLowerCase().includes(e.toLowerCase())})},py=function(e,n,t){var r=0,i=[];if(e.length+n.length+t.length===0)return i;if(e.length>0){i.push({key:"heading-important-".concat(r++),type:"heading",title:"Important"});for(var o=0;o<e.length;++o)i.push({key:"branch-important-".concat(r++),type:"branch",branch:e[o]});n.length+t.length>0&&i.push({key:"divider-important-".concat(r++),type:"divider"})}if(n.length>0){i.push({key:"heading-active-".concat(r++),type:"heading",title:"Active"});for(var a=0;a<n.length;++a)i.push({key:"branch-active-".concat(r++),type:"branch",branch:n[a]});t.length>0&&i.push({key:"divider-active-".concat(r++),type:"divider"})}if(t.length>0){i.push({key:"heading-stale-".concat(r++),type:"heading",title:"Stale"});for(var l=0;l<t.length;++l)i.push({key:"branch-stale-".concat(r++),type:"branch",branch:t[l]})}return i},pb=function(e){var n=e.item,t=e.current,r=e.onSwitchBranch;return"heading"===n.type?(0,f.Y)(F.S,{css:pp.paddedX,children:(0,f.Y)(I.EY,{multiline:!1,variant:"small",color:"dimmest",css:B.wp.fontWeight.medium,children:n.title})}):"divider"===n.type?(0,f.Y)(F.S,{css:pp.divider,children:(0,f.Y)(l5.a,{})}):(0,f.Y)(F.S,{children:(0,f.Y)(pv,{branch:n.branch,current:t,onSwitchBranch:r})})},pS=function(e){var n=e.items,t=e.current,r=e.onSwitchBranch,i=(0,w.useRef)(null),o=(0,ef.Te)({overscan:10,count:n.length,getScrollElement:function(){return i.current},estimateSize:function(e){var t,r;return null!==(t=void 0===(r=n[e])?0:"heading"===r.type?30:"branch"===r.type?65:"divider"===r.type?20:void 0)&&void 0!==t?t:0}});return(0,f.Y)(s4.Se,{options:{direction:"vertical"},children:(0,f.Y)("div",{css:pp.body,ref:i,children:(0,f.Y)("ul",{css:pp.virtualList,style:{height:"".concat(o.getTotalSize(),"px")},children:o.getVirtualItems().map(function(e){return(0,f.Y)("div",{css:pp.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:o.measureElement,children:(0,f.Y)(pb,{item:n[e.index],current:t,onSwitchBranch:r})},e.key.toString())})})})})},pY=function(e){var n=e.query,t=e.setQuery,r=e.filteredImportant,i=e.filteredActive,o=e.filteredStale,a=e.current,l=e.onSwitchBranch,s=e.createBranchLoading,c=e.createBranch,u=e.loading,d=(0,w.useMemo)(function(){return py(r,i,o)},[r,i,o]),p='Create Branch "'.concat(n,'"'),h=(0,w.useMemo)(function(){return(0,q._)(r).concat((0,q._)(i),(0,q._)(o)).some(function(e){return e.name===n})},[n,r,i,o]);return(0,f.Y)(F.S,{css:pp.menu,children:(0,f.Y)("form",{onSubmit:function(e){e.preventDefault(),c()},css:pp.form,children:u?(0,f.Y)(F.S,{css:pp.loadingContainer,children:(0,f.Y)(tn.A,{})}):(0,f.FD)(f.FK,{children:[(0,f.Y)(F.S,{css:pp.searchContainer,children:(0,f.Y)(pu.I,{value:n,onChange:function(e){t(e.target.value)},onClear:function(){t("")},loading:!1,placeholder:"Find or create a branch..."})}),(0,f.Y)(F.S,{css:pp.paddedX,children:(0,f.Y)(l5.a,{})}),d.length>0?(0,f.Y)(pS,{items:d,current:a,onSwitchBranch:l}):null,h||""===n?null:(0,f.FD)(F.S,{css:pp.padded,children:[(0,f.Y)(eg.$n,{text:p,size:"small",iconLeft:s?(0,f.Y)(tn.A,{}):(0,f.Y)(rf.A,{}),stretch:!0,css:pp.createBranchButton,disabled:s||!(0,rz.eB)(n),type:"submit"}),(0,rz.eB)(n)?null:(0,f.Y)(I.EY,{variant:"small",css:pp.errorText,multiline:!1,children:"Invalid branch name"})]})]})})})},pA=function(e){var n=e.isOpen,t=e.setIsOpen,r=e.important,i=e.active,o=e.stale,a=e.current,l=e.query,s=e.setQuery,c=e.onSwitchBranch,u=e.createBranchLoading,d=e.createBranch,p=e.loading,h=(0,w.useMemo)(function(){return pw(l,r)},[l,r]),m=(0,w.useMemo)(function(){return pw(l,i)},[l,i]),g=(0,w.useMemo)(function(){return pw(l,o)},[l,o]);return(0,f.FD)(a6.Wv,{label:"View Branches",placement:"bottom",isOpen:n,onOpenChange:function(e){t(e)},offset:16,children:[function(e){var t=e.onClick,r=(0,t8._)(e,["onClick"]);return(0,f.Y)(eg.$n,{variant:"nofill",text:(0,f.FD)(I.EY,(0,e7._)((0,K._)({multiline:!1,variant:"small",css:pp.selector},r),{children:[(0,f.Y)(lS.Yi,{name:a.name,remote:a.type===rz.xx.REMOTE?a.remote:null,icon:!0}),n?(0,f.Y)(ir.A,{}):(0,f.Y)(it.A,{})]})),size:"small",stretch:!0,alignment:"start",css:pp.fullWidth,onClick:t})},(0,f.Y)(pY,{query:l,setQuery:s,filteredImportant:h,filteredActive:m,filteredStale:g,current:a,onSwitchBranch:c,createBranchLoading:u,createBranch:d,loading:p})]})},pC=t(9974),px=(0,M.x)({container:[B.wp.height(36),B.wp.px(8),B.wp.py(4),B.wp.rowWithGap(8),B.wp.backgroundColor.backgroundDefault,B.wp.align.center,B.wp.justify.spaceBetween,B.wp.zIndex(1),{borderBottom:"1px solid ".concat(ez.LU.outlineDimmer)}],left:[B.wp.rowWithGap(4),B.wp.align.center,B.wp.flex.growAndShrink(1)],right:[B.wp.rowWithGap(8),B.wp.align.center],back:{marginLeft:-4}}),pk=function(e){var n=e.openSettings;return(0,f.FD)(F.S,{css:px.container,children:[(0,f.FD)(F.S,{css:px.left,children:[(0,f.Y)(pC.A,{size:16}),(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:"Repository"})]}),(0,f.FD)(F.S,{css:px.right,children:[(0,f.Y)(pT,{openSettings:n}),(0,f.Y)(d6,{})]})]})},p_=function(e){var n=e.branch,t=e.switchMode,r=e.openSettings;return(0,f.FD)(F.S,{css:px.container,children:[(0,f.Y)(F.S,{css:px.left,children:(0,f.Y)(ph,{branch:n,switchMode:t})}),(0,f.FD)(F.S,{css:px.right,children:[(0,f.Y)(pT,{openSettings:r}),(0,f.Y)(d6,{})]})]})},pD=function(e){var n=e.onBack;return(0,f.FD)(F.S,{css:px.container,children:[(0,f.FD)(F.S,{css:px.left,children:[(0,f.Y)(pI,{onBack:n,alt:"Back"}),(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:"Settings"})]}),(0,f.Y)(F.S,{css:px.right})]})},pE=function(e){var n=e.switchMode,t=e.openSettings;return(0,f.FD)(F.S,{css:px.container,children:[(0,f.FD)(F.S,{css:px.left,children:[(0,f.Y)(pF,{switchMode:n}),(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:"Commit"})]}),(0,f.FD)(F.S,{css:px.right,children:[(0,f.Y)(pT,{openSettings:t}),(0,f.Y)(d6,{})]})]})};function pR(e){var n=e.mode,t=e.branch,r=e.switchMode,i=e.onBack,o=function(){return r({type:lU.C.SETTINGS})};switch(n){case lU.C.DASHBOARD:return(0,f.Y)(pk,{openSettings:o});case lU.C.BRANCH:case lU.C.CURRENT_BRANCH:if(null===t)throw Error("Tried to show branch in header, but branch is null");return(0,f.Y)(p_,{branch:t,switchMode:r,openSettings:o});case lU.C.SETTINGS:return(0,f.Y)(pD,{onBack:i});case lU.C.COMMIT:return(0,f.Y)(pE,{switchMode:r,openSettings:o});default:return(0,f.FD)(F.S,{css:px.container,children:[(0,f.Y)(F.S,{css:px.left}),(0,f.Y)(F.S,{css:px.right})]})}}function pI(e){var n=e.onBack,t=e.alt;return(0,f.Y)(ev.K0,{css:px.back,alt:t,size:28,onClick:n,children:(0,f.Y)(sZ.A,{})})}function pF(e){var n=e.switchMode;return(0,f.Y)(pI,{css:px.back,onBack:function(){return n({type:lU.C.CURRENT_BRANCH})},alt:"Back to current branch"})}function pT(e){var n=e.openSettings;return(0,f.Y)(ev.K0,{alt:"Settings",size:24,onClick:n,children:(0,f.Y)(af.A,{})})}function pP(){return(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{multiline:!1,children:"Unsupported state: you are applying a mailbox patch."}),(0,f.Y)(I.EY,{multiline:!1,children:"Please finish the patch manually."})]})}function pL(){return(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{multiline:!1,children:"Unsupported state: you are in the middle of a bisect."}),(0,f.Y)(I.EY,{multiline:!1,children:"Please finish the bisect manually."})]})}function pU(){var e=(0,$._)(["\n  query PushBranchButtonIsProjectRepl($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return pU=function(){return e},e}var pN={},pO=(0,J.J1)(pU()),pM=function(e){return"repl-".concat(e)},pB=function(e){var n=e.replId,t=e.branch;return"repl-".concat(n,"/").concat(t)},pH=function(){var e=(0,y._)(function(e){var n,t,r,i,o,a,l,s;return(0,b.YH)(this,function(c){switch(c.label){case 0:return n=e.git,r=pM(t=e.replId),i="".concat(t,"@ssh.v1.replit.dev:."),[4,n.getRemotes()];case 1:if((o=c.sent()).error)return[2,o];if(!o.remotes.has(r))return[3,4];if((null===(a=o.remotes.get(r))||void 0===a?void 0:a.fetch)===i)return[3,3];return[4,n.setRemoteURL({remote:r,url:i})];case 2:if((l=c.sent()).error)return[2,l];c.label=3;case 3:return[2,{error:null,remote:{name:r,url:i}}];case 4:return[4,n.addRemote({name:r,url:i,fetch:!0})];case 5:if((s=c.sent()).error&&s.error!==rz.uA.REMOTE_ALREADY_EXISTS)return[2,s];return[2,{error:null,remote:{name:r,url:i}}]}})});return function(n){return e.apply(this,arguments)}}(),pz=t(73790),pW=(0,M.x)({statusText:[B.wp.display.flex,B.wp.flex.row,B.wp.textAlign.left],settingsButton:[B.wp.reset.button,B.wp.linkStyle,B.wp.fontWeight.medium,B.wp.textAlign.left,B.wp.ml(4)]}),pG=function(e){var n=e.onViewSettingsClick;return(0,f.Y)("button",{css:pW.settingsButton,onClick:n,children:"Settings view."})};function pV(e){var n,t,r,i,o,a,l=e.branch,s=e.onViewSettingsClick,c=e.performPaneOperation,u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1],h=(0,v._)((0,w.useState)(!1),2),m=h[0],g=h[1],S=(0,v._)((0,w.useState)(null),2),Y=S[0],C=S[1],x=(0,v._)((0,w.useState)(!1),2),k=x[0],_=x[1],D=(n={variables:{id:(0,n_.A)()}},t=(0,K._)({},pN,n),Q.I(pO,t)).data,E=(null==D?void 0:null===(i=D.repl)||void 0===i?void 0:i.__typename)==="Repl"&&(null===(o=D.repl.project)||void 0===o?void 0:o.id)||!1,R=dN(),T=(0,A.A)().git,P=(0,rG.A)((r=(0,y._)(function(e){var n,t,r,i,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:return[4,e.isInitialized()];case 1:if((n=s.sent()).error)return R(n.error),rj({context:"publish-branch-button-initialized",gitService:e,result:n}),[2,{remote:null,error:n.error}];if(!n.initialized)return[2,{remote:null,error:null}];return[4,e.getRemotes()];case 2:if((t=s.sent()).error)return rj({context:"publish-branch-button-get-remotes",gitService:e,result:t}),R(t.error),[2,t];return r=function(e){if(!e||!e.size)return null;if(e.has("origin"))return"origin";var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,v._)(i.value,2),l=a[0];if(!({url:a[1].fetch}).url.endsWith(".replit.dev:."))return l}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null}(t.remotes),[4,e.status()];case 3:if((i=s.sent()).error)return R(i.error),rj({context:"publish-branch-button-status",gitService:e,result:i}),[2,i];if(!(i.branch&&r))return[3,5];return o=(0,rz.w9)(i.branch),a="refs/remotes/".concat(r,"/").concat(o),[4,e.branchExists(a)];case 4:(l=s.sent()).error?(rj({context:"publish-branch-button-branch-exists",gitService:e,result:l,data:{upstream:o,fullRemoteRef:a}}),R(l.error)):l.exists&&C("".concat(r,"/").concat(o)),s.label=5;case 5:return[2,{remote:r,error:null}]}})}),function(e){return r.apply(this,arguments)}),[R],{keepStaleResult:!1});if((0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!(k&&Y))return[3,2];return[4,T.setBranchUpstream({upstream:Y})];case 1:(e=n.sent()).error&&(rj({context:"publish-branch-button-set-branch-upstream",gitService:T,result:e,data:{upstream:Y}}),R(e.error)),_(!1),C(null),n.label=2;case 2:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[T,R,k,Y]),null==P?void 0:P.error)return null;var L=P?P.remote:null,U=null===P,N=l.type!==rz.xx.LOCAL||!L||k;function O(){return(O=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!L||d)return[2];if(Y)return g(!0),[2];return p(!0),[4,T.push({publish:{remote:L}})];case 1:return(e=n.sent()).error?(p(!1),R(e.error),rj({context:"publish-branch-button-push",gitService:T,result:e,data:{remote:L}})):(T.forceRefresh(),dO("branch-published-to-remote")),[2]}})})).apply(this,arguments)}var M="".concat(L,"/").concat(l.name);return(a=d?"Pushing to '".concat(M,"'..."):l.type!==rz.xx.LOCAL?"Branch has already been pushed to '".concat(M,"'"):U?"Checking if branch ".concat(l.name," can be pushed..."):L?"Push branch as '".concat(M,"'"):"No remotes to push to",E&&P&&!L)?(0,f.FD)(f.FK,{children:[(0,f.Y)(eg.$n,{iconLeft:(0,f.Y)(oG.a,{text:"Beta",variant:"outline",colorway:"blue"}),text:"Collaborate in the Project pane",onClick:function(){c({operation:"open",pane:{type:"project"}})},iconRight:(0,f.Y)(av.A,{})}),(0,f.Y)(I.EY,{color:"dimmer",children:"Use the Project pane to merge your changes between repls and collaborate with your teammates. You've received early access to this feature with your Replit Teams subscription."})]}):(0,f.FD)(f.FK,{children:[Y?(0,f.Y)(lC.a,{isOpen:m,onRequestClose:function(){return g(!1)},children:(0,f.FD)(F.S,{gap:24,children:[(0,f.Y)(I.EY,{variant:"headerDefault",children:"Branch already exists"}),(0,f.Y)(I.EY,{children:"Upstream branch '".concat(Y,"' already exists.\n          To push the branch, please confirm you would like to set upstream branch to it.")}),(0,f.Y)(eg.$n,{text:"Set upstream to '".concat(Y,"'"),onClick:function(){Y&&(_(!0),g(!1))}})]})}):null,U||L?null:(0,f.Y)(tZ.N,{text:(0,f.Y)(F.S,{css:pW.statusText,children:(0,f.FD)("span",{children:["No remote repositories configured. To push your changes, add a remote repository in the",(0,f.Y)(pG,{onViewSettingsClick:s})]})}),colorway:"warning",closable:!1}),(0,f.Y)(eg.$n,{text:a,iconLeft:U||d?(0,f.Y)(tn.A,{}):(0,f.Y)(pz.A,{}),onClick:function(){return O.apply(this,arguments)},loading:U||d,disabled:N})]})}var pj=function(e,n,t){var r=new Set,i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;r.add(c.hash)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}var u=!0,d=!1,p=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;r.add(m.hash)}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}return e.filter(function(e){return!r.has(e.hash)})},pZ=t(17917),pq=t(41327),pK=t(80703),p$=t(75978),pJ={height:32,width:"100%",resize:"none",border:"none"},pQ={width:"100%",resize:"none",border:"none"},pX=(0,M.x)({surface:[B.wp.p(8),B.wp.colWithGap(12),B.wp.borderRadius(0,0,8,8)],button:[B.wp.height("auto"),B.wp.py(8),B.wp.fontWeight.medium,B.wp.borderRadius(8,8,0,0),B.wp.justify.start,B.wp.border({color:ez.LU.outlineDimmer,direction:"bottom"}),{"> span:first-child":{flexGrow:1,textAlign:"start"}}],requiredText:[B.wp.display.inlineFlex,B.wp.rowWithGap(4)],subjectFieldHeader:[B.wp.center,B.wp.justify.spaceBetween],subjectInput:pJ,bodyInput:pQ,subjectInputDisabled:[pJ,{opacity:.5}],bodyInputDisabled:[pQ,{opacity:.5}],required:[B.wp.color.accentNegativeStronger],keyCombo:[B.wp.display.inlineFlex,B.wp.rowWithGap(4),B.wp.flex.grow(1),B.wp.align.center],keyComboText:[B.wp.fontWeight.normal,B.wp.color.foregroundDimmest]});function p0(e){var n=e.message,t=e.disabled,r=void 0!==t&&t,i=e.onMessageChange,o=e.onCommitShortcut,a=(0,v._)((0,w.useState)(!0),2),l=a[0],s=a[1],c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1],p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],g=(0,w.useRef)(null),y=(0,w.useRef)(null),b=(0,tu._)(n.split("\n\n")),S=b[0],Y=void 0===S?"":S,A=b.slice(1).join("\n\n"),C=(0,c6.a)();function x(e,n){i((e=e.replaceAll("\n"," "))+(n?"\n\n"+n:""))}var k=(0,pK.Jn)(pq.Pi.gitCommit.id);return(0,p$.RD)(pq.cl,h),(0,pK.SJ)(function(){return[pq.Pi.gitCommit.id,{run:function(){null==o||o()},scope:pq.cl,bubble:!1}]},[o]),(0,f.FD)(F.S,{children:[(0,f.Y)(eg.$n,{css:pX.button,text:(0,f.FD)("span",{css:pX.requiredText,children:[(0,f.Y)("span",{children:"Message"}),l?(0,f.Y)(p4,{}):null]}),secondaryText:C||!k?void 0:(0,f.FD)("span",{css:pX.keyCombo,children:[(0,f.Y)("span",{css:pX.keyComboText,children:"Commit:"}),(0,f.Y)(pK._y,{keyCombo:k,small:!0})]}),iconRight:l?(0,f.Y)(it.A,{}):(0,f.Y)(ir.A,{}),onClick:function(){return s(function(e){return!e})},size:"small"}),(0,f.FD)(eo.ui,{css:pX.surface,elevated:!0,children:[(0,f.Y)(p1,{ref:g,value:Y,compact:l,disabled:r,onChange:function(e){x(e,A)},onNewline:function(){if(l)s(!1),d(!0);else{if(!y.current)return;y.current.focus(),y.current.setSelectionRange(0,0)}},onFocus:function(){m(!0)},onBlur:function(){m(!1)}}),l&&!A?null:(0,f.Y)(p2,{ref:y,value:A,compact:l,disabled:r,onChange:function(e){if(x(Y,e),l&&!e){var n;null===(n=g.current)||void 0===n||n.focus()}else l&&s(!1)},onBackspaceWhenEmpty:function(){g.current&&g.current.focus()},onFocus:function(){u&&d(!1),m(!0)},onBlur:function(){m(!1)},autoFocus:u})]})]})}var p1=(0,w.forwardRef)(function(e,n){var t=e.value,r=e.compact,i=void 0!==r&&r,o=e.disabled,a=void 0!==o&&o,l=e.onChange,s=e.onNewline,c=e.onFocus,u=e.onBlur,d=(0,w.useRef)(null),p=(0,pZ.A)().ref;return(0,f.FD)(F.S,{gap:8,children:[i?null:(0,f.Y)(F.S,{css:pX.subjectFieldHeader,row:!0,children:(0,f.Y)(I.EY,{variant:"small",color:"dimmer",multiline:!1,children:(0,f.FD)("span",{css:pX.requiredText,children:[(0,f.Y)("span",{children:"Summary"}),(0,f.Y)(p4,{})]})})}),(0,f.Y)(ew.ov,{ref:i?n:(0,uv.P)(n,p,d,{breadcrumb:"client/workspace/components/Git/modified/CommitMessage.tsx:322"}),css:a?pX.subjectInputDisabled:pX.subjectInput,placeholder:"Summary of your commit...",value:t,disabled:a,onChange:function(e){return null==l?void 0:l(e.currentTarget.value)},onKeyDown:function(e){"Enter"!==e.key||e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),null==s||s())},onFocus:c,onBlur:u})]})}),p2=(0,w.forwardRef)(function(e,n){var t=e.value,r=e.compact,i=void 0!==r&&r,o=e.disabled,a=void 0!==o&&o,l=e.autoFocus,s=e.onChange,c=e.onBackspaceWhenEmpty,u=e.onFocus,d=e.onBlur,p=(0,pZ.A)().ref;return(0,f.FD)(F.S,{gap:8,children:[i?null:(0,f.Y)(I.EY,{variant:"small",color:"dimmer",multiline:!1,children:"Description"}),(0,f.Y)(ew.ov,{ref:i?n:(0,uv.P)(n,p,{breadcrumb:"client/workspace/components/Git/modified/CommitMessage.tsx:385"}),css:a?pX.bodyInputDisabled:pX.bodyInput,placeholder:"Description of your commit...",value:t,disabled:a,onChange:function(e){return null==s?void 0:s(e.currentTarget.value)},onKeyDown:function(e){"Backspace"===e.key&&""===t&&(e.preventDefault(),e.stopPropagation(),null==c||c())},onFocus:u,onBlur:d,autoFocus:void 0!==l&&l})]})});function p4(){return(0,f.Y)(rc.m_,{tooltip:"This field is required.",placement:"top",children:(0,f.Y)("span",{css:pX.required,children:"*"})})}var p5=t(42217),p8=t(13005),p3=(0,M.x)({actionsIndex:[B.wp.height(24),B.wp.align.center,B.wp.borderRadius(4)],actionsWorktree:[B.wp.height(24),B.wp.flex.row,B.wp.align.center,B.wp.borderRadius(4)],unstage:[B.wp.height(24),B.wp.width(24),B.wp.borderRadius(2)],stage:[B.wp.px(12),B.wp.height(24),B.wp.width(24),B.wp.borderRadius(2)],discard:[B.wp.pl(16),B.wp.pr(12),B.wp.height(24),B.wp.width(24),B.wp.borderRadius(2)],discardIcon:{transform:"scale(0.85)"},divider:[B.wp.height("75%"),B.wp.width(1),B.wp.backgroundColor.outlineStronger]});function p6(e){var n=e.file,t=e.list,r=e.stageFiles,i=e.restoreFiles,o=e.disabled,a=void 0!==o&&o,l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1];function h(){return(h=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(a)return[2];return c(!0),[4,r({reset:[n.path]})];case 1:return e.sent(),c(!1),[2]}})})).apply(this,arguments)}function m(){return(m=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(a)return[2];return c(!0),[4,r({add:[n.path]})];case 1:return e.sent(),c(!1),[2]}})})).apply(this,arguments)}function g(){return(g=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(a||"worktree"!==t)return[2];return p(!0),[4,i(n.path)];case 1:return e.sent(),p(!1),[2]}})})).apply(this,arguments)}return a=a||d||s,"index"===t?(0,f.Y)(eo.ui,{elevated:!0,css:p3.actionsIndex,children:(0,f.Y)(ev.K0,{css:p3.unstage,alt:"Unstage changes",size:18,tooltipDelay:"long",onClick:function(){return h.apply(this,arguments)},disabled:a,children:s?(0,f.Y)(tn.A,{}):(0,f.Y)(p8.A,{})})}):(0,f.FD)(eo.ui,{elevated:!0,css:p3.actionsWorktree,children:[(0,f.Y)(ev.K0,{css:p3.discard,alt:"Discard changes",size:18,tooltipDelay:"long",onClick:function(){return g.apply(this,arguments)},disabled:a,children:d?(0,f.Y)(tn.A,{}):(0,f.Y)(oV.A,{css:p3.discardIcon})}),(0,f.Y)("div",{css:p3.divider}),(0,f.Y)(ev.K0,{css:p3.stage,alt:"Stage changes",size:18,tooltipDelay:"long",onClick:function(){return m.apply(this,arguments)},disabled:a,children:s?(0,f.Y)(tn.A,{}):(0,f.Y)(rf.A,{})})]})}var p7=(0,M.x)({modifiedFile:[B.wp.py(2),B.wp.rowWithGap(4),B.wp.align.center]});function p9(e){var n,t=e.file,r=e.list,i=e.stageFiles,o=e.restoreFiles,a=e.pathMap,l=e.disabled,s=e.onFilePathClick,c=null==a?void 0:a.get(t.path),u=null===(n=t.source)||void 0===n?void 0:n.path,d="index"===r?t.type.index:t.type.worktree,p=(0,tc.A)(function(){if(d!==rz.PX.DELETED)return function(){return s({path:t.path})}},[t.path,s,d]);return(0,f.FD)(F.S,{css:p7.modifiedFile,children:[(0,f.Y)(lA,{path:t.path,prefix:c,source:u,onClick:p}),(0,f.Y)(r6,{type:d}),(0,f.Y)(p6,{file:t,list:r,stageFiles:i,restoreFiles:o,disabled:void 0!==l&&l})]})}var fe=(0,M.x)({actions:[B.wp.backgroundColor.backgroundHighest,B.wp.borderRadius(8)],buttonDiscard:[B.wp.borderRadius(8,0,0,8)],buttonStage:[B.wp.borderRadius(0,8,8,0)],divider:[B.wp.my(8),B.wp.width(1),B.wp.backgroundColor.outlineStronger]});function fn(e){var n=e.type,t=e.stageFiles,r=e.restoreFiles,i=e.disabled,o=void 0!==i&&i,a=(0,v._)((0,w.useState)(!1),2),l=a[0],s=a[1],c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1];function p(){return h.apply(this,arguments)}function h(){return(h=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(o)return[2];return s(!0),[4,t({all:"index"!==n})];case 1:return e.sent(),s(!1),[2]}})})).apply(this,arguments)}function m(){return(m=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(o||"worktree"!==n)return[2];return d(!0),[4,r(!0)];case 1:return e.sent(),d(!1),[2]}})})).apply(this,arguments)}return o=o||u||l,"index"===n?(0,f.Y)(eg.$n,{text:"Unstage All",iconLeft:l?(0,f.Y)(tn.A,{}):(0,f.Y)(p8.A,{}),onClick:p,disabled:o,loading:l,size:"small"}):(0,f.FD)(F.S,{css:fe.actions,row:!0,gap:2,children:[(0,f.Y)(eg.$n,{css:fe.buttonDiscard,text:"Discard All",iconLeft:u?(0,f.Y)(tn.A,{}):(0,f.Y)(oV.A,{}),onClick:function(){return m.apply(this,arguments)},disabled:o,loading:u,size:"small"}),(0,f.Y)("div",{css:fe.divider}),(0,f.Y)(eg.$n,{css:fe.buttonStage,text:"Stage All",iconLeft:l?(0,f.Y)(tn.A,{}):(0,f.Y)(rf.A,{}),onClick:p,disabled:o,loading:l,size:"small"})]})}var ft=(0,M.x)({list:[B.wp.pt(4),B.wp.pb(8),B.wp.colWithGap(4)],listFolded:[B.wp.py(4)],header:[B.wp.px(8),B.wp.rowWithGap(4),B.wp.align.center],headerFoldable:[B.wp.py(4),B.wp.pl(4),B.wp.pr(8),B.wp.rowWithGap(4),B.wp.align.center],headerText:[B.wp.flex.grow(1)],body:[B.wp.px(8),B.wp.maxHeight("25vh"),B.wp.overflowY("auto")]});function fr(e){var n,t=e.files,r=e.type,i=e.stageFiles,o=e.restoreFiles,a=e.onFilePathClick,l=e.pathMap,s=e.foldable,c=void 0!==s&&s,u=e.disabled,d=void 0!==u&&u,p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],g=(0,w.useRef)(null),y=(0,w.useRef)(null),b=(0,ef.Te)({count:t.length,getScrollElement:function(){return y.current},getItemKey:function(e){return t[e].path},estimateSize:function(){return 28},overscan:20}),S=b.getVirtualItems();return c&&h?(0,f.Y)(F.S,{css:ft.listFolded,children:(0,f.FD)(F.S,{css:c?ft.headerFoldable:ft.header,children:[(0,f.Y)(fi,{files:t,type:r,setFolded:m,foldable:!0,folded:!0}),(0,f.Y)(fn,{type:r,stageFiles:i,restoreFiles:o,disabled:d})]})}):(0,f.FD)(F.S,{innerRef:g,css:ft.list,children:[(0,f.FD)(F.S,{css:c?ft.headerFoldable:ft.header,children:[(0,f.Y)(fi,{files:t,type:r,setFolded:m,foldable:c}),(0,f.Y)(fn,{type:r,stageFiles:i,restoreFiles:o,disabled:d})]}),(0,f.Y)(F.D.div,{ref:y,css:ft.body,children:(0,f.Y)("div",{style:{minHeight:b.getTotalSize()},children:(0,f.Y)("div",{style:{transform:"translateY(".concat(null===(n=S[0])||void 0===n?void 0:n.start,"px)"),willChange:"transform"},children:S.map(function(e){var n=t[e.index];return(0,f.Y)("div",{"data-index":e.index,children:(0,f.Y)(p9,{file:n,list:r,stageFiles:i,restoreFiles:o,onFilePathClick:a,pathMap:l,disabled:d},n.path)},e.key.toString())})})})})]})}function fi(e){var n=e.files,t=e.type,r=e.setFolded,i=e.foldable,o=void 0!==i&&i,a=e.folded,l=(0,tL.A)("file",n.length),s="".concat(n.length," ").concat("index"===t?"staged":"changed"," ").concat(l);return o&&void 0!==a&&a?(0,f.FD)(f.FK,{children:[(0,f.Y)(ev.K0,{alt:"Show list",onClick:function(){return r(!1)},children:(0,f.Y)(it.A,{})}),(0,f.Y)(I.EY,{css:ft.headerText,multiline:!1,children:s})]}):(0,f.FD)(f.FK,{children:[o?(0,f.Y)(ev.K0,{alt:"Hide list",onClick:function(){return r(!0)},children:(0,f.Y)(ir.A,{color:ez.LU.foregroundDimmest})}):null,(0,f.Y)(I.EY,{css:ft.headerText,color:"dimmest",multiline:!1,children:s})]})}var fo=(0,M.x)({list:[B.wp.px(4),B.wp.colWithGap(2)]});function fa(e){var n=e.show,t=e.files,r=e.pathMap,i=e.callback,o=(0,e$.A)(i),a=(0,w.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.call(o,!0)},[o]),l=(0,w.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.call(o,!1)},[o]);return(0,f.Y)(lC.a,{isOpen:n,onRequestClose:l,children:n?(0,f.FD)(F.S,{gap:8,children:[(0,f.FD)(I.Y9,{level:2,children:["Discard ",(0,tL.A)("Change",t.length)]}),(0,f.Y)(fl,{files:t,pathMap:r}),(0,f.FD)(F.S,{row:!0,gap:8,justify:"end",children:[(0,f.Y)(eg.$n,{text:"Cancel",iconLeft:(0,f.Y)(lx.A,{}),onClick:l}),(0,f.Y)(eg.$n,{text:"Discard ".concat((0,tL.A)("Change",t.length)),iconLeft:(0,f.Y)(oV.A,{}),colorway:"negative",onClick:a})]})]}):null})}function fl(e){var n=e.files,t=e.pathMap,r=[],i=[],o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;u.type.worktree===rz.PX.UNTRACKED?i.push(u):r.push(u)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return!r.length&&i.length?(0,f.FD)(F.S,{gap:4,children:[(0,f.Y)(I.EY,{children:1===i.length?"Do you want to permanently delete this file?":"Do you want to permanently delete these files?"}),(0,f.Y)(fs,{files:i,pathMap:t})]}):r.length&&!i.length?(0,f.FD)(F.S,{gap:4,children:[(0,f.Y)(I.EY,{children:1===r.length?"Do you want to undo the changes to this file?":"Do you want to undo the changes to these files?"}),(0,f.Y)(fs,{files:r,pathMap:t})]}):(0,f.FD)(F.S,{gap:12,children:[r.length?(0,f.FD)(F.S,{gap:4,children:[(0,f.FD)(I.Y9,{level:3,children:["Tracked ",(0,tL.A)("File",r.length)]}),(0,f.Y)(I.EY,{multiline:!1,children:1===r.length?"This file will have its changes undone.":"These files will have their changes undone."}),(0,f.Y)(fs,{files:r,pathMap:t})]}):null,i.length?(0,f.FD)(F.S,{gap:4,children:[(0,f.FD)(I.Y9,{level:3,children:["Untracked ",(0,tL.A)("File",i.length)]}),(0,f.Y)(I.EY,{multiline:!1,children:1===i.length?"This file will be permanently deleted.":"These files will be permanently deleted."}),(0,f.Y)(fs,{files:i,pathMap:t})]}):null]})}function fs(e){var n=e.files,t=e.pathMap,r=(0,w.useMemo)(function(){return n.length>20?n.slice(0,20):n},[n]);return(0,f.Y)(F.S,{children:(0,f.FD)("ul",{css:fo.list,children:[r.map(function(e){var n;return(0,f.Y)("li",{children:(0,f.Y)(lA,{path:e.path,prefix:t.get(e.path),source:null===(n=e.source)||void 0===n?void 0:n.path})},e.path)}),n.length<=20?null:(0,f.Y)("li",{children:(0,f.FD)(I.EY,{color:"dimmer",children:["... ",n.length-20," more"," ",(0,tL.A)("file",n.length-20)]})})]})})}function fc(e){var n=(0,v._)((0,w.useState)(function(){return{show:!1,files:[]}}),2),t=n[0],r=n[1];return{openRestoreConfirmationModal:(0,w.useCallback)(function(e){return new Promise(function(n){0===e.length&&n(!1),r({show:!0,files:e,callback:function(e){r({show:!1,files:[],callback:void 0}),n(e)}})})},[]),restoreConfirmationModal:(0,w.useMemo)(function(){return(0,f.Y)(fa,(0,e7._)((0,K._)({},t),{pathMap:e}))},[t,e])}}var fu=[{"& > span:first-child":[B.wp.flex.grow(1),B.wp.textAlign.left]},{"& > span":[B.wp.flex.shrink(1)]}],fd=(0,M.x)({buttonFolded:[fu,B.wp.height("auto"),B.wp.py(8),B.wp.fontWeight.medium],buttonUnfolded:[fu,B.wp.height("auto"),B.wp.py(8),B.wp.fontWeight.medium,B.wp.border({color:ez.LU.outlineDimmer,direction:"bottom"}),B.wp.borderRadius(8,8,0,0)],container:[B.wp.flex.grow(1),B.wp.borderRadius(8)],lists:[B.wp.borderRadius(0,0,8,8)],divider:[B.wp.height(1),B.wp.minHeight(1),B.wp.width("100%"),B.wp.backgroundColor.outlineDimmer],autoStageMessage:[B.wp.pt(4),B.wp.pb(8),B.wp.px(4),B.wp.center],noChangesMessage:[B.wp.py(16),B.wp.px(4),B.wp.center],details:[B.wp.rowWithGap(4),B.wp.fontWeight.normal,B.wp.color.foregroundDimmest]});function fp(e){var n,t,r=e.status,i=e.stageFiles,o=e.restoreFiles,a=e.onStagedFileClick,l=e.disabled,s=void 0!==l&&l,c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1],p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],g=(0,v._)((0,w.useState)(!1),2),S=g[0],Y=g[1],A=(0,w.useMemo)(function(){return(0,p5.b)(r.changes.map(function(e){return e.path}))},[r]),C=(0,v._)((0,w.useMemo)(function(){var e=[],n=[],t=!0,i=!1,o=void 0;try{for(var a,l=r.changes[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value;s.staged&&e.push(s),s.type.worktree!==rz.PX.UNMODIFIED&&n.push(s)}}catch(e){i=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}return[e,n]},[r.changes]),2),x=C[0],k=C[1],_=x.length>0&&k.length>0,D=fc(A),E=D.openRestoreConfirmationModal,R=D.restoreConfirmationModal,T=(0,w.useCallback)((n=(0,y._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!("all"in e))return[3,2];return m(!0),[4,i(e)];case 1:return n.sent(),m(!1),[3,4];case 2:return[4,i(e)];case 3:n.sent(),n.label=4;case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),[i]),P=(0,w.useCallback)((t=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(!0!==e)return[3,4];return Y(!0),[4,E(k)];case 1:if(!r.sent())return[3,3];return[4,o(e)];case 2:r.sent(),r.label=3;case 3:return Y(!1),[3,8];case 4:if("string"==typeof e){if(!(t=k.find(function(n){return n.path===e})))throw Y(!1),Error("Could not find file in worktree list");n=[t]}else n=k.filter(function(n){return e.includes(n.path)});return[4,E(n)];case 5:if(!r.sent())return[3,7];return[4,o(e)];case 6:r.sent(),r.label=7;case 7:Y(!1),r.label=8;case 8:return[2]}})}),function(e){return t.apply(this,arguments)}),[E,o,k]);return u?(0,f.Y)(ff,{setFolded:d,changeCount:k.length,stagedCount:x.length,disabled:s,folded:!0}):0===x.length&&0===k.length?(0,f.FD)(F.S,{style:{opacity:s?.725:void 0},css:fd.container,children:[(0,f.Y)(ff,{setFolded:d,changeCount:k.length,stagedCount:x.length,disabled:s}),(0,f.Y)(eo.ui,{css:fd.lists,elevated:!0,children:(0,f.Y)(F.S,{css:fd.noChangesMessage,children:(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:"No changed or staged files."})})})]}):(0,f.FD)(f.FK,{children:[(0,f.FD)(F.S,{style:{opacity:s?.725:void 0},css:fd.container,children:[(0,f.Y)(ff,{setFolded:d,changeCount:k.length,stagedCount:x.length,disabled:s}),(0,f.FD)(eo.ui,{css:fd.lists,elevated:!0,children:[0===x.length?null:(0,f.Y)(fr,{type:"index",files:x,stageFiles:T,restoreFiles:P,onFilePathClick:a,pathMap:A,foldable:_,disabled:s||h||S}),_?(0,f.Y)("div",{css:fd.divider}):null,0===k.length?null:(0,f.FD)(f.FK,{children:[(0,f.Y)(fr,{type:"worktree",files:k,stageFiles:T,restoreFiles:P,onFilePathClick:a,pathMap:A,foldable:_,disabled:s||h||S}),_?null:(0,f.Y)(F.S,{css:fd.autoStageMessage,children:(0,f.Y)(I.EY,{variant:"small",color:"dimmest",multiline:!1,children:"Committing will automatically stage your changes."})})]})]})]}),R]})}function ff(e){var n=e.folded,t=void 0!==n&&n,r=e.setFolded,i=e.changeCount,o=e.stagedCount,a=e.disabled;return(0,f.Y)(eg.$n,{css:t?fd.buttonFolded:fd.buttonUnfolded,text:"Review Changes",secondaryText:(0,f.Y)(fh,{folded:t,changeCount:i,stagedCount:o}),onClick:function(){return r(!t)},iconRight:t?(0,f.Y)(it.A,{}):(0,f.Y)(ir.A,{}),disabled:void 0!==a&&a,size:"small"})}function fh(e){var n=e.folded,t=e.changeCount,r=e.stagedCount;if(!n)return null;var i=t>0,o=r>0;return i||o?(0,f.FD)("span",{css:fd.details,children:[i?(0,f.FD)("span",{children:[t," ",(0,tL.A)("change",t)]}):null,i&&o?(0,f.Y)("span",{children:"/"}):null,o?(0,f.FD)("span",{children:[r," staged"]}):null]}):(0,f.Y)("span",{css:fd.details,children:(0,f.Y)("span",{children:"no changes"})})}function fm(e){var n=e.status,t=e.onStagedFileClick,r=e.defaultMessage,i=(0,v._)((0,w.useState)(n),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(null!=r?r:""),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(0),2),d=u[0],p=u[1],h=(0,v._)((0,w.useState)(!1),2),m=h[0],g=h[1],S=dN();(0,w.useEffect)(function(){return a(n)},[n]);var Y=(0,A.A)().git;if(!o||!o.changes.length)return(0,f.Y)(F.S,{gap:8,children:(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:"There are no changes to commit."})});var C=o.changes.length,x=o.changes.filter(function(e){return e.staged}).length;function k(){return(k=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(m)return[2];return p(function(e){return e+1}),[4,Y.stageFiles(e)];case 1:if((n=r.sent()).error)return[3,3];return[4,Y.status()];case 2:return(t=r.sent()).error?(rj({context:"commit-area-status",gitService:Y,result:t,data:{opts:e}}),S(t.error)):a(t),Y.forceRefresh(),[3,4];case 3:S(n.error),rj({context:"commit-area-stage-files",gitService:Y,result:n,data:{opts:e}}),r.label=4;case 4:return p(function(e){return e-1}),[2]}})})).apply(this,arguments)}function _(){return(_=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(m)return[2];return p(function(e){return e+1}),[4,Y.restoreFiles(e)];case 1:if((n=r.sent()).error)return[3,3];return[4,Y.status()];case 2:return(t=r.sent()).error?(rj({context:"commit-area-status",gitService:Y,result:t,data:{files:e}}),S(t.error)):a(t),Y.forceRefresh(),[3,4];case 3:rj({context:"commit-area-restore-files",gitService:Y,result:n,data:{files:e}}),S(n.error),r.label=4;case 4:return p(function(e){return e-1}),[2]}})})).apply(this,arguments)}function D(){return E.apply(this,arguments)}function E(){return(E=(0,y._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(""===s||m||0===C||d>0)return[2];if(g(!0),0!==x)return[3,2];return[4,Y.stageFiles({all:!0})];case 1:t.sent(),t.label=2;case 2:return[4,Y.commit({message:s})];case 3:if(!(e=t.sent()).error)return[3,4];return g(!1),S(e.error),rj({context:"commit-area-commit",gitService:Y,result:e,data:{message:s}}),[3,6];case 4:return dO("commit-created",{hasDescription:-1!==s.trim().indexOf("\n\n")}),[4,Y.status()];case 5:n=t.sent(),g(!1),n.error?(S(n.error),rj({context:"commit-area-status",gitService:Y,result:n,data:{message:s}})):(c(""),a(n)),Y.forceRefresh(),t.label=6;case 6:return[2]}})})).apply(this,arguments)}var R="Nothing to commit";if(m)R="Committing...";else if(x>0&&x<C){var T=(0,tL.A)("change",x);R="Commit ".concat(x," staged ").concat(T)}else C>0&&(R="Stage and commit all changes");var P=!s||0===C||d>0||m;return(0,f.FD)(F.S,{gap:8,children:[(0,f.Y)(p0,{message:s,disabled:m,onMessageChange:c,onCommitShortcut:D}),(0,f.Y)(fp,{status:o,stageFiles:function(e){return k.apply(this,arguments)},restoreFiles:function(e){return _.apply(this,arguments)},onStagedFileClick:t,disabled:m}),P?(0,f.Y)(rc.m_,{tooltip:d>0?"Changes in progress":0===C?"There are no changes to commit.":"You must enter a commit message before you can commit.",children:(0,f.Y)(eg.$n,{text:R,onClick:D,disabled:P,loading:m,colorway:"primary",iconLeft:(0,f.Y)(ap.A,{}),stretch:!0})}):(0,f.Y)(eg.$n,{text:R,onClick:D,disabled:P,loading:m,colorway:"primary",iconLeft:(0,f.Y)(ap.A,{}),stretch:!0})]})}var fg=/\s\(#(\d+)\)$/,fv=/^Revert "(.+)"/,fw=/^This reverts commit ([a-f0-9]+)(?:, reversing changes made to ([a-f0-9]+))?\./;function fy(e){var n=fv.exec(e.subject),t=fw.exec(e.body);if(n&&t){var r,i=t[1],o=n[1],a=fg.exec(o);return a&&(r=parseInt(a[1],10)),{hash:i,subject:o,pr:r}}return null}var fb=/\B#\d+\b/g,fS=/^Merged? pull request (#\d+\b)/,fY=/^Merge branch '(.+)'/,fA=/into (.+)$/;function fC(e){if("GitHub"===e.committer.name&&"noreply@github.com"===e.committer.email){var n=e.subject.match(fb);if(n){var t,r=parseInt(n[n.length-1].slice(1),10);if(r)return fg.test(e.subject)&&(t=e.subject.replace(fg,"").trim()),!t&&fS.test(e.subject)&&e.body&&-1===e.body.indexOf("\n")&&(t=e.body),{type:"pull-request",id:r,subject:t,reverts:fy(e)}}}if(fS.test(e.subject)){var i,o=fS.exec(e.subject);if(o)return e.body&&-1===e.body.indexOf("\n")&&(i=e.body),{type:"pull-request",id:parseInt(o[1].slice(1),10),subject:i,reverts:fy(e)}}if(fY.test(e.subject)){var a=fY.exec(e.subject);if(a){var l=fA.exec(e.subject);return{type:"branch",source:a[1],target:l?l[1]:null}}}return e.parents&&e.parents.length>2?{type:"octopus",parents:e.parents}:e.parents&&e.parents.length>1?{type:"simple",a:e.parents[0],b:e.parents[1]}:null}var fx={position:"absolute",top:0,height:9,width:9,border:"1px solid ".concat(ez.LU.purpleStrongest),borderRadius:"50%"},fk=(0,M.x)({markerContainer:[B.wp.display.flex,B.wp.align.center,B.wp.justify.center,B.wp.minHeight(20),B.wp.minWidth(20)],commitMarker:[B.wp.height(4),B.wp.width(4),B.wp.backgroundColor.foregroundDefault,B.wp.borderRadius("full")],collapsedMarkerIconDot:[B.wp.height(3),B.wp.width(3),B.wp.backgroundColor.foregroundDimmer,B.wp.borderRadius("full")],collapsedMarkerIconContainer:[B.wp.display.flex,B.wp.align.center,B.wp.justify.center,{"div + div":{marginLeft:1}}],collapsedMarker:[B.wp.display.flex,B.wp.align.center,B.wp.justify.center,B.wp.height(20),B.wp.width(20),B.wp.backgroundColor.backgroundHighest,B.wp.borderRadius("full")],revertMarker:[B.wp.display.flex,B.wp.height(20),B.wp.width(20),B.wp.backgroundColor.orangeDimmest,B.wp.borderRadius("full"),B.wp.align.center,B.wp.justify.center],mergeMarker:[B.wp.display.flex,B.wp.height(20),B.wp.width(20),B.wp.backgroundColor.purpleDimmest,B.wp.borderRadius("full"),B.wp.align.center,B.wp.justify.center],mergeMarkerIconContainer:[B.wp.position.relative,B.wp.height(9),B.wp.width(13)],mergeMarkerIconLeft:[(0,K._)({},fx),B.wp.left(0)],mergeMarkerIconRight:[(0,K._)({},fx),B.wp.right(0)],boundaryMarker:[B.wp.height(6),B.wp.width(6),B.wp.backgroundColor.backgroundDefault,B.wp.borderRadius("full"),{border:"1px solid ".concat(ez.LU.backgroundHighest)}]});function f_(e){var n=function(e){switch(e){case"none":default:return null;case"commit":return(0,f.Y)(fD,{});case"revert":return(0,f.Y)(fE,{});case"merge":return(0,f.Y)(fR,{});case"boundary":return(0,f.Y)(fI,{});case"collapsed":return(0,f.Y)(fF,{})}}(e.type);return n?(0,f.Y)("div",{css:fk.markerContainer,children:n}):null}function fD(){return(0,f.Y)("div",{css:fk.commitMarker})}function fE(){return(0,f.Y)("div",{css:fk.revertMarker,children:(0,f.Y)(oV.A,{size:12,color:ez.LU.orangeStrongest})})}function fR(){return(0,f.Y)("div",{css:fk.mergeMarker,children:(0,f.FD)("div",{css:fk.mergeMarkerIconContainer,children:[(0,f.Y)("div",{css:fk.mergeMarkerIconLeft}),(0,f.Y)("div",{css:fk.mergeMarkerIconRight})]})})}function fI(){return(0,f.Y)("div",{css:fk.boundaryMarker})}function fF(){return(0,f.Y)("div",{css:fk.collapsedMarker,children:(0,f.FD)("div",{css:fk.collapsedMarkerIconContainer,children:[(0,f.Y)("div",{css:fk.collapsedMarkerIconDot}),(0,f.Y)("div",{css:fk.collapsedMarkerIconDot}),(0,f.Y)("div",{css:fk.collapsedMarkerIconDot})]})})}var fT=[B.wp.position.absolute,B.wp.left(0),B.wp.width(18)],fP=(0,M.x)({connectorSegmentBorderSolid:[fT,{borderRight:"1px solid ".concat(ez.LU.outlineDimmest)}],connectorSegmentBorderDashed:[fT,{borderRight:"1px dashed ".concat(ez.LU.outlineDimmest)}]});function fL(e){var n=e.boundaryTop,t=void 0!==n&&n,r=e.boundaryBottom,i=void 0!==r&&r,o=e.joint,a=void 0===o?"top":o,l=e.hideTop,s=void 0!==l&&l,c=e.hideBottom,u=void 0!==c&&c;if(s&&u)return null;if(t===i&&!s&&!u)return(0,f.Y)(fN,{top:0,bottom:0,dashed:t&&i});var d=s?null:(0,f.Y)(fU,{start:"top",joint:a,dashed:t}),p=u?null:(0,f.Y)(fU,{start:"bottom",joint:a,dashed:i});return(0,f.FD)(f.FK,{children:[d,p]})}function fU(e){var n,t,r=e.start,i=e.joint,o=e.dashed,a="center"===i?(n={},(0,g._)(n,r,0),(0,g._)(n,"height","50%"),n):(t={},(0,g._)(t,r,0),(0,g._)(t,r===i?"height":i,8),t);return(0,f.Y)(fN,(0,e7._)((0,K._)({},a),{dashed:void 0!==o&&o}))}function fN(e){var n=e.top,t=e.bottom,r=e.height,i=e.dashed;return(0,f.Y)("div",{css:void 0!==i&&i?fP.connectorSegmentBorderDashed:fP.connectorSegmentBorderSolid,style:{top:n,bottom:t,height:r}})}var fO=(0,M.x)({container:{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"},containerInteractive:[oW.b.nofill,{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"}],nodeFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1,opacity:0,"div:hover > &":{transition:"opacity 120ms ease-out",opacity:1}},nodeUnFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1},nodeContentContainer:[B.wp.colWithGap(4),{position:"relative",paddingTop:8,paddingBottom:8,paddingRight:8}],nodeHeader:{display:"block",height:20},nodeUnfoldedContentSurface:[B.wp.mt(4),B.wp.mb(8),B.wp.p(8),B.wp.borderRadius(8),{marginLeft:36,marginRight:8,overflowX:"hidden"}],unfoldedContentContainer:[B.wp.position.relative]});function fM(e){var n=e.boundaryTop,t=e.boundaryBottom,r=void 0!==t&&t,i=e.hideConnectorTop,o=e.hideConnectorBottom,a=void 0!==o&&o,l=e.joint,s=void 0===l?"top":l,c=e.marker,u=e.header,d=e.unfoldedContent,p=e.children,h=e.className,m=(0,v._)((0,w.useState)(!0),2),g=m[0],y=m[1];return(0,f.FD)(F.S,{className:h,css:B.wp.position.relative,children:[(0,f.Y)(fL,{boundaryTop:void 0!==n&&n,boundaryBottom:r,joint:s,hideTop:void 0!==i&&i,hideBottom:a}),c?(0,f.Y)(fH,{joint:s,children:c}):null,d?(0,f.FD)(F.S,{css:fO.containerInteractive,role:"button",tabIndex:0,onClick:function(){y(!g)},onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&y(!g)},children:[g?(0,f.Y)("div",{css:fO.nodeFoldedIconContainer,children:(0,f.Y)(it.A,{})}):(0,f.Y)("div",{css:fO.nodeUnFoldedIconContainer,children:(0,f.Y)(ir.A,{})}),(0,f.FD)(F.S,{css:fO.nodeContentContainer,children:[u?(0,f.Y)(F.S,{css:fO.nodeHeader,children:u}):null,p?(0,f.Y)(F.S,{children:p}):null]})]}):(0,f.Y)(F.S,{css:fO.container,children:(0,f.FD)(F.S,{css:fO.nodeContentContainer,children:[u?(0,f.Y)(F.S,{css:fO.nodeHeader,children:u}):null,p?(0,f.Y)(F.S,{children:p}):null]})}),!d||g?null:(0,f.FD)(F.S,{css:fO.unfoldedContentContainer,children:[a?null:(0,f.Y)(fN,{top:0,bottom:0,dashed:r}),(0,f.Y)(eo.ui,{css:fO.nodeUnfoldedContentSurface,elevated:!0,children:d})]})]})}var fB=(0,M.x)({top:{position:"absolute",top:8,left:18,transform:"translateX(-50%)"},bottom:{position:"absolute",bottom:8,left:18,transform:"translateX(-50%)"},center:{position:"absolute",top:"50%",left:18,transform:"translateX(-50%) translateY(-50%)"}});function fH(e){var n=e.joint,t=e.children;return(0,f.Y)("div",{css:fB[void 0===n?"top":n],children:t})}var fz=t(76346),fW=(0,M.x)({container:[B.wp.height("100%")],textContainer:[B.wp.center],text:[B.wp.flex.shrink(0)]});function fG(e){var n=e.text,t=(0,t8._)(e,["text"]);return(0,f.Y)(fM,(0,K._)({marker:(0,f.Y)(f_,{type:"boundary"}),joint:"center",header:(0,f.FD)(F.S,{css:fW.container,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(l5.a,{}),(0,f.FD)(F.S,{css:fW.textContainer,row:!0,gap:4,children:[(0,f.Y)(fz.A,{size:12,color:ez.LU.foregroundDimmest}),(0,f.Y)(I.EY,{css:fW.text,variant:"small",color:"dimmest",multiline:!1,children:n})]}),(0,f.Y)(l5.a,{})]})},t))}var fV=(0,M.x)({definitionList:{display:"grid",gridTemplateColumns:"auto 1fr",paddingLeft:ez.LU.space4,"> dt":{display:"flex",alignItems:"center",paddingBottom:ez.LU.space2},"> dd":{marginLeft:ez.LU.space12,paddingBottom:ez.LU.space2}},listHeader:[B.wp.fontWeight.medium],commitList:[B.wp.colWithGap(2),B.wp.pl(4)]}),fj=function(e,n){var t=!e.body,r=null,i=null;return n&&"type"in n?(r=n,"pull-request"===n.type&&(n.reverts&&(i=n.reverts),n.subject&&(t=!0))):n&&(i=n),{hideBody:t,merge:r,revert:i}},fZ=function(e){var n=e.hash;return(0,f.Y)(D.i,{size:"small",iconLeft:(0,f.Y)(th.A,{}),textToCopy:n,text:n.slice(0,7),tooltipSuccessText:"Hash copied!"})},fq=function(e){var n=e.onClick,t=e.text,r=e.loading;return(0,f.Y)(rc.m_,{tooltip:"Discard current changes and restore files to time of commit",children:(0,f.Y)(eg.$n,{text:t,onClick:n,size:"small",iconLeft:void 0!==r&&r?(0,f.Y)(tn.A,{}):(0,f.Y)(oV.A,{})})})},fK=function(e,n){return e.name!==n.name||e.email!==n.email},f$=function(e,n){return!(6e4>Math.abs(e-n))};function fJ(e){var n=e.commit,t=e.info,r=fK(n.committer,n.author),i=f$(n.author.date,n.committer.date),o=fj(n,void 0===t?null:t),a=o.hideBody,l=o.merge,s=o.revert;return(0,f.FD)(F.S,{gap:8,children:[a?null:(0,f.FD)(F.S,{gap:8,children:[(0,f.Y)(I.EY,{children:(0,f.Y)(lS._g,{body:n.body})}),(0,f.Y)(l5.a,{css:B.wp.backgroundColor.outlineDimmer})]}),(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{css:fV.listHeader,multiline:!1,children:"Author"}),(0,f.FD)("dl",{css:fV.definitionList,children:[(0,f.Y)("dt",{children:"Name:"}),(0,f.Y)("dd",{children:n.author.name}),(0,f.Y)("dt",{children:"Email:"}),(0,f.Y)("dd",{children:n.author.email})]})]}),r?(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{css:fV.listHeader,multiline:!1,children:"Committer"}),(0,f.FD)("dl",{css:fV.definitionList,children:[(0,f.Y)("dt",{children:"Name:"}),(0,f.Y)("dd",{children:n.committer.name}),(0,f.Y)("dt",{children:"Email:"}),(0,f.Y)("dd",{children:n.committer.email})]})]}):null,(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{css:fV.listHeader,multiline:!1,children:"Commit"}),(0,f.FD)("dl",{css:fV.definitionList,children:[i?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Authored:"}),(0,f.Y)("dd",{children:(0,f.Y)(ed.Dc,{date:n.author.date,dateFormat:"absolute"})}),(0,f.Y)("dt",{children:"Committed:"}),(0,f.Y)("dd",{children:(0,f.Y)(ed.Dc,{date:n.committer.date,dateFormat:"absolute"})})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Date:"}),(0,f.Y)("dd",{children:(0,f.Y)(ed.Dc,{date:n.author.date,dateFormat:"absolute"})})]}),(0,f.Y)("dt",{children:"Hash:"}),(0,f.Y)("dd",{children:(0,f.Y)(fZ,{hash:n.hash})}),l&&"pull-request"===l.type?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"PR:"}),(0,f.FD)("dd",{children:["#",l.id]})]}):null,l&&"branch"===l.type?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Merged:"}),(0,f.Y)("dd",{children:l.source}),l.target?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Into:"}),(0,f.Y)("dd",{children:l.target})]}):null]}):null,s?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Reverted:"}),(0,f.Y)("dd",{children:s.hash})]}):null]})]}),l&&"simple"===l.type?(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{css:fV.listHeader,multiline:!1,children:"Merged"}),(0,f.FD)(F.S,{css:fV.commitList,children:[(0,f.Y)(I.EY,{multiline:!1,children:l.a}),(0,f.Y)(I.EY,{multiline:!1,children:l.b})]})]}):null,l&&"octopus"===l.type?(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{css:fV.listHeader,multiline:!1,children:"Merged"}),(0,f.Y)(F.S,{css:fV.commitList,children:l.parents.map(function(e,n){return(0,f.Y)(I.EY,{multiline:!1,children:e},n)})})]}):null]})}var fQ=(0,M.x)({headerText:[B.wp.rowWithGap(4),B.wp.flex.row,B.wp.align.stretch,B.wp.fontWeight.medium,{"> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}],headerContainer:[{"> span":{width:"calc(100%)"}}],button:[B.wp.reset.button,B.wp.linkStyle,B.wp.color.foregroundDefault,B.wp.fontWeight.medium,{display:"block",width:"100%",textAlign:"left"}]}),fX=function(e){var n=e.author;return(0,f.FD)(F.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(ps,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,f.Y)(ed.Dc,{date:n.date,textColor:"dimmest",textVariant:"small"})]})},f0=function(e){var n=e.children;return(0,f.Y)(I.EY,{css:fQ.headerText,multiline:!1,maxLines:1,children:n})},f1=function(e){var n=e.commit,t=e.onViewCommitClick,r=e.children;return(0,f.Y)(F.S,{css:fQ.headerContainer,gap:4,align:"start",justify:"start",children:(0,f.Y)(rc.m_,{tooltip:"View ".concat(n.hash.slice(0,7)),children:(0,f.Y)("button",{css:fQ.button,onClick:function(){return t(n.hash)},children:r})})})};function f2(e){var n=e.commit,t=(0,t8._)(e,["commit"]);return(0,f.Y)(fM,(0,e7._)((0,K._)({marker:(0,f.Y)(f_,{type:"commit"}),header:(0,f.Y)(f0,{children:(0,f.Y)(lS.mO,{subject:n.subject})}),unfoldedContent:(0,f.Y)(fJ,{commit:n})},t),{children:(0,f.Y)(fX,{author:n.author})}))}var f4=function(e){var n=e.commit,t=e.onViewCommitClick,r=(0,t8._)(e,["commit","onViewCommitClick"]);return(0,f.Y)(fM,(0,e7._)((0,K._)({marker:(0,f.Y)(f_,{type:"commit"}),header:(0,f.Y)(f1,{commit:n,onViewCommitClick:function(){return t(n.hash)},children:(0,f.Y)(f0,{children:(0,f.Y)(lS.mO,{subject:n.subject})})})},r),{children:(0,f.Y)(fX,{author:n.author})}))},f5=t(7882);function f8(e){var n,t=e.commit,r=e.info,i=(0,t8._)(e,["commit","info"]);return"branch"!==r.type&&(n="pull-request"===r.type&&r.subject?r.subject:t.subject),(0,f.Y)(fM,(0,e7._)((0,K._)({marker:(0,f.Y)(f_,{type:"merge"}),header:(0,f.FD)(f0,{children:[(0,f.Y)(lS.qW,{text:"merged"}),(0,f.Y)(f6,{info:r,hash:t.hash,subject:t.subject})]}),unfoldedContent:(0,f.Y)(fJ,{commit:t,info:r})},i),{children:(0,f.FD)(F.S,{gap:8,children:[n?(0,f.Y)(I.EY,{color:"dimmer",variant:"small",multiline:!1,children:(0,f.Y)(lS.mO,{subject:n})}):null,(0,f.Y)(fX,{author:t.author})]})}))}var f3=function(e){var n,t=e.commit,r=e.info,i=e.onViewCommitClick,o=(0,t8._)(e,["commit","info","onViewCommitClick"]);return"branch"!==r.type&&(n="pull-request"===r.type&&r.subject?r.subject:t.subject),(0,f.Y)(fM,(0,e7._)((0,K._)({marker:(0,f.Y)(f_,{type:"merge"}),header:(0,f.Y)(f1,{commit:t,onViewCommitClick:function(){return i(t.hash)},children:(0,f.FD)(f0,{children:[(0,f.Y)(lS.qW,{text:"merged"}),(0,f.Y)(f6,{info:r,hash:t.hash,subject:t.subject})]})})},o),{children:(0,f.FD)(F.S,{gap:8,children:[n?(0,f.Y)(I.EY,{color:"dimmer",variant:"small",multiline:!1,children:(0,f.Y)(lS.mO,{subject:n})}):null,(0,f.Y)(fX,{author:t.author})]})}))};function f6(e){var n=e.info,t=e.hash,r=e.subject,i=(0,f.Y)("span",{css:B.wp.fontWeight.medium,children:r});switch(n.type){case"pull-request":return(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"pull request"}),(0,f.Y)(lS.Cv,{id:n.id}),n.reverts&&n.reverts.pr?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"-"}),(0,f.Y)(lS.e0,{text:"reverts"}),(0,f.Y)(lS.Cv,{id:n.reverts.pr})]}):null]});case"branch":if(!n.target)return(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"branch"}),(0,f.Y)(lS.Yi,{name:n.source})]});return(0,f.FD)(f.FK,{children:[(0,f.Y)(lS.Yi,{name:n.source}),(0,f.Y)("span",{children:"into"}),(0,f.Y)(lS.Yi,{name:n.target})]});case"simple":return(0,f.FD)(f.FK,{children:[(0,f.Y)(lS.Vw,{hash:n.a}),(0,f.Y)(f5.A,{css:{alignSelf:"center"},size:12}),(0,f.Y)(lS.Vw,{hash:n.b})]});case"octopus":return(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"commit"}),(0,f.Y)(lS.Vw,{hash:t}),(0,f.FD)("span",{children:["(",n.parents.length," parents)"]})]});default:return i}}function f7(e){var n=e.commit,t=e.info,r=(0,t8._)(e,["commit","info"]);return(0,f.Y)(fM,(0,e7._)((0,K._)({marker:(0,f.Y)(f_,{type:"revert"}),header:(0,f.FD)(f0,{children:[(0,f.Y)(lS.e0,{text:"reverted"}),(0,f.Y)(lS.Vw,{hash:t.hash}),(0,f.Y)(lS.mO,{subject:t.subject,quoted:!0})]}),unfoldedContent:(0,f.Y)(fJ,{commit:n,info:t})},r),{children:(0,f.Y)(fX,{author:n.author})}))}var f9=function(e){var n=e.commit,t=e.info,r=e.onViewCommitClick,i=(0,t8._)(e,["commit","info","onViewCommitClick"]);return(0,f.Y)(fM,(0,e7._)((0,K._)({marker:(0,f.Y)(f_,{type:"revert"}),header:(0,f.Y)(f1,{commit:n,onViewCommitClick:function(){return r(n.hash)},children:(0,f.FD)(f0,{children:[(0,f.Y)(lS.e0,{text:"reverted"}),(0,f.Y)(lS.Vw,{hash:t.hash}),(0,f.Y)(lS.mO,{subject:t.subject,quoted:!0})]})})},i),{children:(0,f.Y)(fX,{author:n.author})}))},he=(0,M.x)({body:[B.wp.flex.growAndShrink(1)],virtualItem:[B.wp.position.absolute,B.wp.top(0),B.wp.left(0),B.wp.width("100%"),B.wp.overflow("hidden")],virtualList:[B.wp.position.relative]}),hn=function(){return 60};function ht(e){var n=e.items,t=(0,w.useRef)(null),r=(0,ef.Te)({overscan:10,count:n.length,getScrollElement:function(){return t.current},estimateSize:hn});return(0,f.Y)("div",{ref:t,css:he.body,children:(0,f.Y)("div",{css:he.virtualList,style:{height:"".concat(r.getTotalSize(),"px")},children:r.getVirtualItems().map(function(e){return(0,f.Y)("div",{css:he.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:r.measureElement,children:(0,f.Y)(hr,{items:n,index:e.index})},e.key.toString())})})})}function hr(e){var n=e.items,t=e.index,r=n[t],i=0===t,o=t===n.length-1;if("boundary"===r.type)return(0,f.Y)(fG,{text:r.text,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},r.text);var a=n[t-1]?n[t-1].type:null,l=n[t+1]?n[t+1].type:null;return(0,f.Y)(hi,{commit:r.commit,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:"commit"!==a,boundaryBottom:"commit"!==l,onViewCommitClick:r.onViewCommitClick},r.commit.hash)}function hi(e){var n=e.commit,t=e.onViewCommitClick,r=(0,t8._)(e,["commit","onViewCommitClick"]),i=fC(n);if(i)return t?(0,f.Y)(f3,(0,K._)({info:i,commit:n,onViewCommitClick:t},r)):(0,f.Y)(f8,(0,K._)({info:i,commit:n},r));var o=fy(n);return o?t?(0,f.Y)(f9,(0,K._)({info:o,commit:n,onViewCommitClick:t},r)):(0,f.Y)(f7,(0,K._)({info:o,commit:n},r)):t?(0,f.Y)(f4,(0,K._)({commit:n,onViewCommitClick:t},r)):(0,f.Y)(f2,(0,K._)({commit:n},r))}var ho=(0,M.x)({warning:[B.wp.align.start],header:[B.wp.fontWeight.bold]});function ha(){return(0,f.FD)(f.FK,{children:[(0,f.Y)(tZ.N,{css:ho.warning,icon:(0,f.Y)(o9.A,{}),colorway:"warning",text:(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:ho.header,children:"Can't push or pull from GitHub"}),(0,f.Y)("br",{}),(0,f.Y)("span",{children:"This Repl has a GitHub repository as a remote, but you are not connected to GitHub."})]})}),(0,f.Y)(dZ,{})]})}var hl=t(63005),hs=(0,M.x)({text:[B.wp.flex.shrink(1)]});function hc(e){var n=e.date,t=(0,v._)((0,w.useState)(null),2),r=t[0],i=t[1];return((0,w.useEffect)(function(){if(n){var e=function(){var e=new Date,t="just now";e.getTime()-n.getTime()>6e4&&(t=(0,hl.A)(n,e,{addSuffix:!0})),i(t=t.replace(/minutes?/,"min"))};e();var t=setInterval(e,6e4);return function(){clearInterval(t),i(null)}}},[n]),r)?(0,f.FD)(I.EY,{css:hs.text,color:"dimmest",variant:"small",multiline:!1,children:["last fetched ",r]}):null}function hu(e){var n=e.hasRemoteMergeConflict,t=e.hasUnpulledCommits,r=e.hasUnpushedCommits,i=e.workTreeDirty,o=[];return i&&t&&o.push("Can't pull: you have uncommitted changes"),n&&(t||r)&&(t&&r?(i||o.push("Warning: pulling will start a merge with conflicts"),o.push("Can't push: unpulled changes must be merged first")):t?i||o.push("Warning: pulling will start a merge with conflicts"):r&&o.push("Can't push: merge conflict with remote")),o.length?(0,f.Y)(f.FK,{children:o.map(function(e){return(0,f.Y)(tZ.N,{text:e,colorway:"warning",icon:(0,f.Y)(o9.A,{})},e)})}):null}var hd=(0,M.x)({divider:[B.wp.mx(8)]});function hp(e){var n=e.ahead,t=e.behind;if(!n&&!t)return(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:"Nothing to pull or push"});var r=null,i=null;if(t){var o=(0,tL.A)("commit",t);r="".concat(t," ").concat(o," to pull")}if(n){var a=(0,tL.A)("commit",n);i="".concat(n," ").concat(a," to push")}return(0,f.FD)(I.EY,{color:"dimmer",variant:"small",multiline:!1,children:[r?(0,f.Y)("span",{children:r}):null,r&&i?(0,f.Y)("span",{css:hd.divider,children:"•"}):null,i?(0,f.Y)("span",{children:i}):null]})}function hf(e){return hh.apply(this,arguments)}function hh(){return(hh=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return n=null,[4,Promise.race([e,new Promise(function(e){return n=setTimeout(function(){rV.v4(function(e){e.setTag("gitPane",!0),rV.Cp(Error("Remote update operation timed out"))}),e({error:rz.uA.TIMEOUT})},9e4)})])];case 1:return t=r.sent(),n&&clearTimeout(n),[2,t]}})})).apply(this,arguments)}var hm=(0,M.x)({container:[B.wp.flex.grow(1)],branch:[B.wp.mr(4),B.wp.color.foregroundDefault,B.wp.fontWeight.medium,{"&:hover":{textDecoration:"underline"}}],divider:[B.wp.color.foregroundDimmest],text:[B.wp.ml(4),B.wp.color.foregroundDimmest]});function hg(e){var n=e.upstream,t=e.remotes,r=(0,w.useMemo)(function(){return function(e,n){var t=null,r=null;if(e instanceof Map){var i=(0,rz.xM)(n),o=i[0];if(t=i[1],!o||!t)return null;var a=e.get(o);if(!a)return null;r=dJ(a)}else t=n,r=dJ(e);return r&&dK(r)?"".concat(r,"/tree/").concat(t):null}(t,n)},[n,t]);return(0,f.FD)(I.EY,{css:hm.container,variant:"small",multiline:!1,children:[r?(0,f.Y)("a",{css:hm.branch,href:r,target:"_blank",children:n}):(0,f.Y)("span",{css:hm.branch,children:n}),(0,f.Y)("span",{css:hm.divider,children:"•"}),(0,f.Y)("span",{css:hm.text,children:"upstream"})]})}var hv=t(37916),hw=(0,M.x)({container:[B.wp.borderRadius(8)],loading:[B.wp.height(64),nL.S.backgroundPulse(),B.wp.borderRadius(8)],header:[B.wp.py(4),B.wp.px(8),B.wp.rowWithGap(8),B.wp.align.center,B.wp.flex.shrink(1),B.wp.border({color:ez.LU.outlineDimmer,direction:"bottom"})],fetch:{border:"none"},body:[B.wp.px(8),B.wp.pt(8),B.wp.pb(12),B.wp.colWithGap(8)],buttons:[B.wp.flex.grow(1)],sync:[B.wp.flex.grow(1)],pull:[B.wp.pr(12),B.wp.borderRadius(8,0,0,8),B.wp.border({color:ez.LU.outlineDefault,direction:"right"})],push:[B.wp.borderRadius(0,8,8,0)]});function hy(e){var n=e.remotes,t=e.gotoPendingState,r=dN(),i=function(e){var n,t=e.onError,r=e.onPullConflicts,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1],f=(0,v._)((0,w.useState)(!1),2),h=f[0],m=f[1],g=(0,A.A)().git,S=(0,rG.A)((n=(0,y._)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v,w;return(0,b.YH)(this,function(y){switch(y.label){case 0:return i={upstream:null,hasUnpulledCommits:!1,hasUnpushedCommits:!1,hasRemoteMergeConflict:!1,pullMode:rz.Xo.FF_ONLY,canPull:!1,canPush:!1,workTreeDirty:!1,needGitHubConnection:!1,ahead:0,behind:0,lastFetched:null},[4,e.getRepositoryState()];case 1:if((o=y.sent()).error)return[2,o];if(a=o.state,o.type!==rz.UN.NORMAL)return[2,{error:rz.uA.INVALID_STATE}];return(a===rz.Gi.DIRTY_WORKTREE||a===rz.Gi.DIRTY_INDEX)&&(i.workTreeDirty=!0),[4,e.status()];case 2:if((l=y.sent()).error)return[2,l];if(s=l.branch,c=null===(n=l.upstream)||void 0===n?void 0:n.branch,d=null!==(u=null===(t=l.upstream)||void 0===t?void 0:t.ahead)&&void 0!==u?u:0,f=null!==(p=null===(r=l.upstream)||void 0===r?void 0:r.behind)&&void 0!==p?p:0,!s)return[2,{error:rz.uA.HEAD_DETACHED}];if(i.ahead=d,i.behind=f,!c)return[3,7];return i.upstream=c,i.hasUnpulledCommits=f>0,i.hasUnpushedCommits=d>0,[4,e.lastFetched()];case 3:if((h=y.sent()).error)return[2,h];return i.lastFetched=h.lastFetched,[4,e.canMergeBranches(s,c)];case 4:if((m=y.sent()).error)return[2,m];if(m.canMerge||(i.hasRemoteMergeConflict=!0),e.hasProfile(rz.HJ.GITHUB))return[3,6];if(!(g=(0,rz.z5)(c)))return[2,{error:rz.uA.INVALID_REFERENCE}];return[4,e.getRemotes()];case 5:if((v=y.sent()).error)return[2,v];if(!(w=v.remotes.get(g)))return[2,{error:rz.uA.INVALID_REFERENCE}];dK(w)&&(i.needGitHubConnection=!0),y.label=6;case 6:i.workTreeDirty||i.needGitHubConnection||(i.canPull=!0),!i.hasUnpushedCommits||i.hasUnpulledCommits||i.needGitHubConnection||(i.canPush=!0),d>0&&(i.pullMode=i.hasRemoteMergeConflict?rz.Xo.MERGE:rz.Xo.REBASE),y.label=7;case 7:return[2,(0,e7._)((0,K._)({},i),{error:null})]}})}),function(e){return n.apply(this,arguments)}));if(!S)return{type:"loading"};if(S.error||!S.upstream)return{type:"error",error:S.error};if(!S.upstream)return{type:"noUpstream"};var Y=S.upstream,C=S.hasUnpulledCommits,x=S.hasUnpushedCommits,k=S.hasRemoteMergeConflict,_=S.pullMode,D=S.canPull,E=S.canPush,R=S.workTreeDirty,I=S.needGitHubConnection,F=S.ahead,T=S.behind,P=S.lastFetched;if(I)return{type:"needGitHubConnection",upstream:Y};var L=o||s||d||h,U=!Y||I||L,N=!D||L,O=!E||L,M=!D&&!E||k||L;function B(){return(B=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(U)return[2];return a(!0),[4,hf(g.fetch())];case 1:return e=n.sent(),g.forceRefresh(),a(!1),e.error?t(e.error):dO("remote-fetched"),[2]}})})).apply(this,arguments)}function H(){return(H=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(N)return[2];return c(!0),[4,hf(g.pull({mode:_,allowConflicts:!0}))];case 1:return e=n.sent(),c(!1),e.error?t(e.error):(e.hasConflicts&&r(),g.forceRefresh(),dO("upstream-pulled")),[2]}})})).apply(this,arguments)}function z(){return(z=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(O)return[2];return p(!0),[4,hf(g.push())];case 1:return e=n.sent(),g.forceRefresh(),p(!1),e.error?t(e.error):dO("upstream-pushed"),[2]}})})).apply(this,arguments)}function W(){return(W=(0,y._)(function(){var e,n;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(M)return[2];if(m(!0),!D)return[3,2];return[4,hf(g.pull({mode:_}))];case 1:if((e=r.sent()).error)return t(e.error),m(!1),[2];dO("upstream-pulled"),r.label=2;case 2:if(!E)return[3,4];return[4,g.push()];case 3:if((n=r.sent()).error)return t(n.error),m(!1),[2];dO("upstream-pushed"),r.label=4;case 4:return g.forceRefresh(),m(!1),[2]}})})).apply(this,arguments)}return{type:"remote",fetch:function(){return B.apply(this,arguments)},fetching:o,fetchDisabled:U,lastFetched:P,pull:function(){return H.apply(this,arguments)},pulling:s,pullDisabled:N,pullMode:_,canPull:D,push:function(){return z.apply(this,arguments)},pushing:d,pushDisabled:O,canPush:E,sync:function(){return W.apply(this,arguments)},syncing:h,syncDisabled:M,upstream:Y,hasUnpulledCommits:C,hasUnpushedCommits:x,hasRemoteMergeConflict:k,workTreeDirty:R,ahead:F,behind:T}}({onError:r,onPullConflicts:t}),o="error"===i.type?i.error:null;return((0,w.useEffect)(function(){o&&r(o)},[o,r]),"loading"===i.type)?(0,f.Y)(eo.ui,{css:hw.loading,elevated:!0}):"error"===i.type||"noUpstream"===i.type?null:"needGitHubConnection"===i.type?(0,f.FD)(eo.ui,{css:hw.container,elevated:!0,children:[(0,f.FD)(F.S,{css:hw.header,children:[(0,f.Y)(hg,{upstream:i.upstream,remotes:n}),(0,f.Y)(eg.$n,{css:hw.fetch,text:"Fetch",iconLeft:(0,f.Y)(o3.A,{}),disabled:!0,variant:"outlined",size:"small"})]}),(0,f.Y)(F.S,{css:hw.body,children:(0,f.Y)(ha,{})})]}):(0,f.FD)(eo.ui,{css:hw.container,elevated:!0,children:[(0,f.FD)(F.S,{css:hw.header,children:[(0,f.Y)(hg,{upstream:i.upstream,remotes:n}),(0,f.Y)(hc,{date:i.lastFetched}),(0,f.Y)(eg.$n,{css:hw.fetch,text:"Fetch",iconLeft:i.fetching?(0,f.Y)(tn.A,{}):(0,f.Y)(o3.A,{}),onClick:i.fetch,loading:i.fetching,disabled:i.fetchDisabled,variant:"outlined",size:"small"})]}),(0,f.FD)(F.S,{css:hw.body,children:[(0,f.Y)(hu,{hasRemoteMergeConflict:i.hasRemoteMergeConflict,hasUnpulledCommits:i.hasUnpulledCommits,hasUnpushedCommits:i.hasUnpushedCommits,workTreeDirty:i.workTreeDirty}),(0,f.Y)(hp,{ahead:i.ahead,behind:i.behind}),(0,f.FD)(F.S,{css:hw.buttons,row:!0,gap:8,children:[(0,f.Y)("div",{css:hw.sync,children:(0,f.Y)(rc.m_,{tooltip:"Pull & push the latest changes",children:(0,f.Y)(eg.$n,{css:hw.sync,text:"Sync with Remote",iconLeft:i.syncing?(0,f.Y)(tn.A,{}):(0,f.Y)(f5.A,{rotate:90}),onClick:i.sync,loading:i.syncing,disabled:i.syncDisabled,size:"small"})})}),(0,f.FD)(F.S,{row:!0,children:[(0,f.Y)(eg.$n,{css:hw.pull,text:"Pull",iconLeft:i.pulling?(0,f.Y)(tn.A,{}):(0,f.Y)(eb.A,{}),onClick:i.pull,loading:i.pulling,disabled:i.pullDisabled,size:"small"}),(0,f.Y)(eg.$n,{css:hw.push,text:"Push",iconLeft:i.pushing?(0,f.Y)(tn.A,{}):(0,f.Y)(hv.A,{}),onClick:i.push,loading:i.pushing,disabled:i.pushDisabled,size:"small"})]})]})]})]})}var hb=(0,M.x)({remoteUrl:[{border:"none"},B.wp.height("auto"),B.wp.py(4),B.wp.px(8)]});function hS(e){var n=e.branch,t=e.remotes,r=(0,v._)((0,w.useMemo)(function(){if(n.type===rz.xx.LOCAL)return[null,null,null];var e=t.get(n.remote);if(!e)return[null,null,null];var r=dJ(e),i=dQ(e),o=dK(r);return[r,i,o]},[n,t]),3),i=r[0],o=r[1],a=r[2];return i&&o?(0,f.Y)(tj.v,{css:hb.remoteUrl,text:o,href:i,target:"_blank",iconLeft:a?(0,f.Y)(dj.A,{}):void 0,iconRight:(0,f.Y)(ru.A,{}),variant:"outlined",size:"small"}):null}var hY=(0,nD.i7)({from:{opacity:0},to:{opacity:1}}),hA=(0,M.x)({loadingView:[{animation:"".concat(hY," 0.125s 0.25s linear backwards")},B.wp.flex.grow(1),B.wp.display.flex,B.wp.center]});function hC(){return(0,f.Y)(F.S,{css:hA.loadingView,children:(0,f.Y)(tn.A,{size:48})})}var hx=(0,M.x)({view:[B.wp.pt(4),B.wp.pb(8),B.wp.px(4),B.wp.colWithGap(8),B.wp.flex.grow(1)],sectionContainer:[B.wp.colWithGap(8)],section:[B.wp.pt(8),B.wp.pb(16),B.wp.px(8),B.wp.colWithGap(8),B.wp.border({color:ez.LU.outlineDimmest,direction:"bottom"})],remoteUpdatesHeader:[],reviewChangesHeader:[],headerText:[B.wp.fontWeight.medium],replMergingHeader:[B.wp.rowWithGap(8),B.wp.align.center],switchToBranch:[B.wp.p(4),B.wp.flex.row,B.wp.align.center,B.wp.justify.spaceBetween,B.wp.mt(0),B.wp.mb(0)]});function hk(e){var n,t,r,i,o,a=e.status,l=e.remotes,s=e.branch,c=e.onStagedFileClick,u=e.onViewCommitClick,d=e.onViewSettingsClick,p=e.gotoPendingState,h=e.current,m=void 0!==h&&h,g=e.performPaneOperation,S=m?null==a?void 0:null===(i=a.upstream)||void 0===i?void 0:i.behind:void 0,Y=m?null==a?void 0:null===(o=a.upstream)||void 0===o?void 0:o.ahead:void 0,A=(n=dN(),r=(0,rG.A)((t=(0,y._)(function(e){var n,t,r,i,o,a,l,c,u;return(0,b.YH)(this,function(d){switch(d.label){case 0:return[4,e.isInitialized()];case 1:if((n=d.sent()).error)return rj({context:"use-branch-commits",gitService:e,result:n}),[2,{error:n.error}];if(!n.initialized)return[2,{log:[],onlyRemote:[],onlyLocal:[],error:null}];if(!s)return[2,{error:null}];if(!(!s.tracking||0===S&&0===Y))return[3,3];return t=(0,rz.qK)(s,!0),[4,e.log({max:100,revRange:t})];case 2:if((r=d.sent()).error)return rj({context:"use-branch-commits",gitService:e,result:r,data:{branch:s,behind:S,ahead:Y,revision:t}}),[2,r];return[2,{log:r.commits,error:null}];case 3:return i=(0,rz.qK)(s),[4,Promise.all([e.log({max:100,revRange:s.name}),e.log({max:100,revRange:"".concat(s.name,"..").concat(i)}),e.log({max:100,revRange:"".concat(i,"..").concat(s.name)})])];case 4:if(o=d.sent(),l=(a=(0,v._)(o,3))[0],c=a[1],u=a[2],l.error)return rj({context:"use-branch-commits-log",gitService:e,result:l,data:{branch:s,behind:S,ahead:Y,remoteBranch:i}}),[2,{error:l.error}];if(c.error)return rj({context:"use-branch-commits-only-remote",gitService:e,result:c,data:{branch:s,behind:S,ahead:Y,remoteBranch:i}}),[2,{error:c.error}];if(u.error)return rj({context:"use-branch-commits-only-local",gitService:e,result:u,data:{branch:s,behind:S,ahead:Y,remoteBranch:i}}),[2,{error:u.error}];return[2,{log:l.commits,onlyRemote:c.commits,onlyLocal:u.commits,error:null}]}})}),function(e){return t.apply(this,arguments)}),[s,S,Y]),(0,w.useMemo)(function(){if(!r)return null;if(r.error)return n(r.error),{error:r.error};var e=r.log,t=r.onlyRemote,i=r.onlyLocal;return t||i?(e&&(e=pj(e,null!=t?t:[],null!=i?i:[])),{log:e,onlyRemote:t,onlyLocal:i,error:null}):{log:e,error:null}},[n,r])),C=!!l&&l.size>0,x=(null==s?void 0:s.type)===rz.xx.LOCAL,k=(0,w.useMemo)(function(){if(!A||A.error)return[];var e=[],n=A.log,t=void 0===n?[]:n,r=A.onlyRemote,i=void 0===r?[]:r,o=A.onlyLocal,a=void 0===o?[]:o,l=t.length>0,s=i.length>0,c=a.length>0;return s&&(e.push({type:"boundary",text:"Not pulled from remote"}),e.push.apply(e,(0,q._)(h_(i,u)))),c&&(e.push({type:"boundary",text:"Not pushed to remote"}),e.push.apply(e,(0,q._)(h_(a,u)))),l&&((s||c)&&e.push({type:"boundary",text:"Up to date with remote"}),e.push.apply(e,(0,q._)(h_(t,u)))),e},[A,u]);return s?(0,f.FD)(F.S,{css:hx.view,children:[(0,f.FD)(F.S,{gap:8,children:[x?(0,f.Y)(F.S,{css:hx.section,children:(0,f.Y)(pV,{performPaneOperation:g,branch:s,onViewSettingsClick:d})}):null,m&&!x&&l&&C?(0,f.FD)(F.S,{css:hx.section,children:[(0,f.FD)(F.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(I.EY,{css:hx.headerText,multiline:!1,children:"Remote Updates"}),(0,f.Y)(hS,{branch:s,remotes:l})]}),(0,f.Y)(hy,{remotes:l,gotoPendingState:p})]}):null,m&&a?(0,f.FD)(F.S,{css:hx.section,children:[(0,f.Y)(F.S,{row:!0,gap:8,align:"center",children:(0,f.Y)(I.EY,{css:hx.headerText,multiline:!1,children:"Commit"})}),(0,f.Y)(fm,{status:a,onStagedFileClick:c})]}):null]}),A?(0,f.Y)(ht,{items:k}):(0,f.Y)(hC,{})]}):(0,f.Y)("div",{children:"No branch"})}function h_(e,n){return e.map(function(e){return{type:"commit",commit:e,onViewCommitClick:n}})}function hD(){return(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{multiline:!1,children:"Unsupported state: you are in the middle of a cherry-pick."}),(0,f.Y)(I.EY,{multiline:!1,children:"Please finish the cherry-pick manually."})]})}let hE=function(e){var n,t=(0,rG.A)((n=(0,y._)(function(n){var t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,n.isInitialized()];case 1:if((t=o.sent()).error)return[2,{error:t.error}];if(!t.initialized)return[2,{error:rz.uA.NOT_INITIALIZED}];return[4,n.log({max:1,revRange:e})];case 2:if((r=o.sent()).error)return[2,{error:r.error}];if(0===r.commits.length)return[2,{error:rz.uA.NO_COMMITS}];return[2,{commit:null!==(i=r.commits[0])&&void 0!==i?i:null,error:null}]}})}),function(e){return n.apply(this,arguments)}),[e]);return(0,w.useMemo)(function(){return t?t.error?{error:t.error}:t:null},[t])},hR=function(e){var n,t=dN(),r=(0,rG.A)((n=(0,y._)(function(n){var t,r,i,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:return i=e.hash,[4,n.getFilesForCommit(i)];case 1:if(null==(o=s.sent())?void 0:o.error)return rj({context:"use-commit-diffs",gitService:n,result:o,data:{commit:e}}),[2,{error:o.error,diffs:[]}];return a=(null==o?void 0:null===(t=o.files)||void 0===t?void 0:t.filter(function(e){return["ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],l=(null==o?void 0:null===(r=o.files)||void 0===r?void 0:r.filter(function(e){return["DELETED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],[2,{error:null,diffs:Array.from(new Set((0,q._)(a).concat((0,q._)(l)))).map(function(e){var n,t;return{id:(0,nF.A)(),status:e.type,loading:!1,initial:{filename:(0,n7.WP)(null!==(n=e.originalPath)&&void 0!==n?n:e.path),path:(0,n7._6)(null!==(t=e.originalPath)&&void 0!==t?t:e.path),content:""},final:{filename:(0,n7.WP)(e.path),path:(0,n7._6)(e.path),content:""}}})}]}})}),function(e){return n.apply(this,arguments)}),[e]);return(0,w.useMemo)(function(){return r?r.error?(t(r.error),null):r:null},[t,r])};var hI=function(){var e=(0,y._)(function(e,n,t,r){var i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:return i=""===n?t:"".concat(n,"/").concat(t),[4,e.getFileContents({path:i,revision:r,convertToBase64:(0,n7.FN)(i)})];case 1:if((o=l.sent()).error)throw o.error;return[2,null!==(a=null==o?void 0:o.content)&&void 0!==a?a:""]}})});return function(n,t,r,i){return e.apply(this,arguments)}}(),hF=function(){var e=(0,y._)(function(e,n,t){var r,i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:return i=n.hash,[4,hI(e,t.final.path,t.final.filename,i)];case 1:if(o=l.sent(),a="",!(!n.grafted&&(null===(r=n.parents)||void 0===r?void 0:r.length)))return[3,3];return[4,hI(e,t.initial.path,t.initial.filename,"".concat(i,"^"))];case 2:a=l.sent(),l.label=3;case 3:return[2,(0,e7._)((0,K._)({},t),{loading:!1,initial:(0,e7._)((0,K._)({},t.initial),{content:a}),final:(0,e7._)((0,K._)({},t.final),{content:o})})]}})});return function(n,t,r){return e.apply(this,arguments)}}(),hT=t(5408),hP=t(74130),hL=(0,M.x)({splitOrUnisonContainer:[B.wp.flex.wrap],emphasizedText:[B.wp.fontWeight.medium],buttonGroupItem:[B.wp.width(64),B.wp.height(32)],textContainer:[B.wp.mt(8),B.wp.overflow("break-all")]}),hU=function(e){var n=e.children;return(0,f.Y)(F.S,{css:hL.splitOrUnisonContainer,gap:8,align:"center",justify:"space-between",row:!0,children:n})},hN=function(e){var n=e.value,t=e.onChange;return(0,f.FD)(ie.e2,{name:"SplitOrUnifiedDiff",value:n,onChange:t,row:!0,children:[(0,f.Y)(F.S,{css:hL.buttonGroupItem,children:(0,f.Y)(ie.$O,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,f.Y)(F.S,{css:hL.buttonGroupItem,children:(0,f.Y)(ie.$O,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},hO=function(e){var n=e.value,t=e.onChange;return(0,f.Y)(ev.K0,{alt:"Markdown"===n?"View Source":"View Markdown",onClick:function(){return t("Markdown"===n?"Source":"Markdown")},children:"Markdown"===n?(0,f.Y)(hT.A,{}):(0,f.Y)(hP.A,{})})},hM=function(e){var n=e.files,t=e.totalFiles;return n===t?(0,f.FD)(I.EY,{css:hL.textContainer,children:["Showing"," ",(0,f.FD)("span",{css:hL.emphasizedText,children:[t," changed ",(0,tL.A)("file",t),"."]})]}):(0,f.FD)(I.EY,{css:hL.textContainer,children:["Showing"," ",(0,f.FD)("span",{css:hL.emphasizedText,children:[n," of ",t," changed ",(0,tL.A)("file",t),"."]})]})},hB=function(e){var n=e.query,t=e.setQuery,r=e.totalDiffs,i=e.diffs,o=e.splitOrUnified,a=e.setSplitOrUnified,l=e.folded,s=e.setFolded,c=(0,w.useMemo)(function(){return i.filter(function(e){var t="".concat(e.final.path,"/").concat(e.final.filename),r="".concat(e.initial.path,"/").concat(e.initial.filename);return t.toLowerCase().includes(n.toLowerCase())||r.toLowerCase().includes(n.toLowerCase())})},[n,i]);return(0,f.FD)(F.S,{gap:16,children:[(0,f.Y)(pu.I,{value:n,onChange:function(e){t(e.target.value)},onClear:function(){t("")},loading:!1,placeholder:"Filter changed files"}),(0,f.FD)(hU,{children:[(0,f.Y)(hM,{files:c.length,totalFiles:r}),i.length>0?(0,f.Y)(hN,{value:o,onChange:function(e){return a(e)}}):null]}),c.map(function(e){var n;return(0,f.Y)(ip,{folded:null===(n=l[e.id])||void 0===n||n,setFolded:function(n){return s(e.id,n)},diff:e,splitOrUnified:o},e.id)})]})},hH=(0,M.x)({metaContainer:[B.wp.flex.wrap]});let hz=function(e){var n=e.author,t=e.committer,r=fK(t,n),i=f$(t.date,n.date);return(0,f.FD)(F.S,{css:hH.metaContainer,row:!0,gap:4,align:"center",children:[r&&i?(0,f.FD)(f.FK,{children:[(0,f.Y)(ps,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,f.Y)(I.EY,{variant:"small",children:"authored"}),(0,f.Y)(ed.Dc,{date:n.date,textColor:"dimmest",textVariant:"small"}),(0,f.Y)(I.EY,{variant:"small",children:"and"})]}):null,r&&!i?(0,f.FD)(f.FK,{children:[(0,f.Y)(ps,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,f.Y)(I.EY,{variant:"small",children:"authored"}),(0,f.Y)(I.EY,{variant:"small",children:"and"})]}):null,(0,f.Y)(ps,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),!r&&i?(0,f.FD)(f.FK,{children:[(0,f.Y)(I.EY,{variant:"small",children:"authored "}),(0,f.Y)(ed.Dc,{date:n.date,textColor:"dimmest",textVariant:"small"}),(0,f.Y)(I.EY,{variant:"small",children:"and "})]}):null,(0,f.Y)(I.EY,{variant:"small",children:"committed"}),(0,f.Y)(ed.Dc,{date:t.date,textColor:"dimmest",textVariant:"small"})]})};var hW=(0,M.x)({dullText:[B.wp.color.foregroundDimmest],tooltipContainer:[B.wp.display.inlineBlock]}),hG=function(e){var n=e.onViewCommitClick,t=e.hash;return(0,f.Y)("span",{css:hW.tooltipContainer,children:(0,f.Y)(rc.m_,{tooltip:"View commit",children:(0,f.Y)("button",{css:[B.wp.reset.button,B.wp.linkStyle,B.wp.fontWeight.medium],onClick:function(){return n(t)},children:t.slice(0,7)})})})};let hV=function(e){var n=e.parents,t=e.grafted,r=e.onViewCommitClick;return(0,f.FD)(I.EY,{variant:"small",children:[(0,f.FD)("span",{css:hW.dullText,children:[t?"Grafted with ":null,n.length," ",(0,tL.A)("parent",n.length)," "]}),0===n.length?null:n.map(function(e,t){return(0,f.FD)(w.Fragment,{children:[(0,f.Y)(hG,{hash:e,onViewCommitClick:r}),t===n.length-1?"":(0,f.Y)("span",{css:hW.dullText,children:", "})]},e)})]})},hj=function(e){var n=e.source,t=e.target;return t?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"branch"}),(0,f.Y)(lS.Yi,{name:n}),(0,f.Y)("span",{children:" into "}),(0,f.Y)(lS.Yi,{name:t})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"branch"}),(0,f.Y)(lS.Yi,{name:n})]})};var hZ="gitCommitSubject",hq=(0,nD.AH)([B.wp.display.inline,{fontSize:"inherit",fontWeight:"inherit",lineHeight:"inherit"}]),hK=(0,M.x)({header:[(u={},(0,g._)(u,"& .".concat(hZ),hq),(0,g._)(u,"& .".concat(hZ," > div"),hq),(0,g._)(u,"& .".concat(hZ," p"),hq),u)],markerContainer:[B.wp.display.inlineFlex,B.wp.mr(4)],mergeContainer:[B.wp.rowWithGap(4),B.wp.flex.row,B.wp.flex.wrap,B.wp.align.stretch,B.wp.flex.shrink(0)]});let h$=function(e){var n=e.merge,t=e.revert,r=e.subject,i=e.remotes,o=e.onViewCommitClick,a=(0,w.useMemo)(function(){var e,r=null;if((null==n?void 0:n.type)==="pull-request"?r=n.id:t&&(null==t?void 0:t.pr)&&(r=t.pr),r&&i){var o=i.get("origin");if(!o){var a=Array.from(i.values());if(1!==a.length)return;o=a[0]}return null!==(e=dQ(o))&&void 0!==e?e:void 0}},[n,i,t]);return(0,f.FD)(I.Y9,{level:2,variant:"subheadDefault",multiline:!0,css:hK.header,children:[n?(0,f.FD)("span",{css:hK.mergeContainer,children:[(0,f.Y)("span",{css:hK.markerContainer,children:(0,f.Y)(f_,{type:"merge"})}),(0,f.Y)(lS.qW,{text:"merged"}),(null==n?void 0:n.type)==="pull-request"?(0,f.FD)(f.FK,{children:["PR ",(0,f.Y)(lS.Cv,{id:n.id,hash:!0}),(null==t?void 0:t.pr)?(0,f.FD)(f.FK,{children:[(0,f.Y)(lS.e0,{text:"reverts"})," ",(0,f.Y)(lS.Cv,{id:t.pr,hash:!0})]}):null]}):null,(null==n?void 0:n.type)==="branch"?(0,f.Y)(f.FK,{children:(0,f.Y)(hj,{source:n.source,target:n.target})}):null]}):null,t&&!n?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:hK.markerContainer,children:(0,f.Y)(f_,{type:"revert"})}),(0,f.Y)(lS.e0,{text:"reverted"})," ",(0,f.Y)("button",{css:[B.wp.reset.button,B.wp.linkStyle,B.wp.fontWeight.medium],onClick:function(){(null==t?void 0:t.hash)!==void 0&&o(t.hash)},children:t.hash.slice(0,7)})," - "]}):null,(0,f.Y)(lS.mO,{className:hZ,subject:r,remoteName:a})]})};var hJ=(0,M.x)({content:[B.wp.p(16)],splitContainer:[B.wp.display.flex,B.wp.flex.row,B.wp.flex.shrink(1),B.wp.flex.wrap,B.wp.justify.spaceBetween,B.wp.maxWidth("100%"),B.wp.border({color:ez.LU.outlineDimmest,direction:"bottom"}),B.wp.pb(16)]});let hQ=function(e){var n,t,r=e.git,i=e.commit,o=e.info,a=e.onViewCommitClick,l=void 0===a?function(){}:a,s=e.remotes,c=e.status,u=(0,w.useMemo)(function(){return(0,p5.b)(c?c.changes.map(function(e){return e.path}):[])},[c]),d=(0,w.useMemo)(function(){if(!c)return[];var e=[],n=!0,t=!1,r=void 0;try{for(var i,o=c.changes[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;a.type.worktree!==rz.PX.UNMODIFIED&&e.push(a)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e},[c]),p=(0,nT.A)().showConfirm,h=dN(),m=(0,v._)((0,w.useState)(!1),2),g=m[0],S=m[1],Y=(0,v._)((0,w.useState)(""),2),A=Y[0],C=Y[1],x=(0,v._)((0,w.useState)("Split"),2),k=x[0],_=x[1],D=(0,v._)((0,w.useState)("Markdown"),2),E=D[0],R=D[1],T=(0,v._)((0,w.useState)({}),2),P=T[0],L=T[1],U=(0,v._)((0,w.useState)([]),2),N=U[0],O=U[1],M=fj(i,o),H=M.hideBody,z=M.merge,W=M.revert,G=i.hash,V=i.subject,j=i.body,Z=i.committer,$=i.author,J=i.grafted,Q=null!==(t=i.parents)&&void 0!==t?t:[],X=hR(i),ee=(0,w.useCallback)((0,y._)(function(){var e,n,t,o=arguments;return(0,b.YH)(this,function(a){switch(a.label){case 0:return e=!(o.length>0)||void 0===o[0]||o[0],[4,r.restoreFiles(e,i.hash)];case 1:if((n=a.sent()).error)return[3,3];return[4,r.status()];case 2:return(t=a.sent()).error?(h(t.error),rj({context:"commit-view",gitService:r,result:t,data:{files:e,commit:i.hash}})):p("Restored commit!"),r.forceRefresh(),[3,4];case 3:h(n.error),rj({context:"commit-view",gitService:r,result:n,data:{files:e,commit:i.hash}}),a.label=4;case 4:return[2]}})}),[i.hash,r,h,p]),en=fc(u),et=en.openRestoreConfirmationModal,er=en.restoreConfirmationModal,ei=(0,w.useCallback)((0,y._)(function(){var e,n,t,r=arguments;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(!0!==(e=!(r.length>0)||void 0===r[0]||r[0]))return[3,6];if(S(!0),0!==d.length)return[3,2];return[4,ee()];case 1:return i.sent(),S(!1),[2];case 2:return[4,et(d)];case 3:if(!i.sent())return[3,5];return[4,ee()];case 4:i.sent(),i.label=5;case 5:return S(!1),[3,10];case 6:if("string"==typeof e){if(!(t=d.find(function(n){return n.path===e})))throw S(!1),Error("Could not find file in worktree list");n=[t]}else n=d.filter(function(n){return e.includes(n.path)});return[4,et(n)];case 7:if(!i.sent())return[3,9];return[4,ee(e)];case 8:i.sent(),i.label=9;case 9:S(!1),i.label=10;case 10:return[2]}})}),[et,ee,d]);(0,w.useEffect)(function(){var e;O(null!==(e=null==X?void 0:X.diffs.map(function(e){return(0,e7._)((0,K._)({},e),{loading:!0})}))&&void 0!==e?e:[])},[X]),(0,w.useEffect)(function(){null!==X&&X.error&&h(X.error)},[X,h]);var eo=(n=(0,y._)(function(e,n){var t,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:if(L(function(t){var r=(0,K._)({},t);return r[e]=n,r}),!(t=N.find(function(n){return n.id===e})))return h(rz.uA.INVALID_STATE),rj({context:"commit-view",gitService:r,result:{error:rz.uA.INVALID_STATE},data:{diffId:e}}),[2];if(!(!n&&t.loading))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,hF(r,i,t)];case 2:return o=l.sent(),O(function(n){var t=(0,q._)(n),r=t.findIndex(function(n){return n.id===e});return t[r]=o,t}),[3,4];case 3:return rj({context:"commit-view",gitService:r,result:a=l.sent(),data:{diffId:e}}),h(a),[2];case 4:return[2]}})}),function(e,t){return n.apply(this,arguments)});return(0,f.FD)(F.S,{css:hJ.content,gap:16,children:[(0,f.Y)(h$,{remotes:s,merge:z,revert:W,subject:V,onViewCommitClick:l}),(0,f.FD)(hU,{children:[(0,f.FD)(F.S,{row:!0,gap:8,css:[B.wp.flex.shrink(1)],align:"start",children:[(0,f.Y)(fZ,{hash:G}),(0,f.Y)(fq,{onClick:function(){return ei()},text:"Restore All",loading:g})]}),H?null:(0,f.Y)(hO,{value:E,onChange:function(e){R(e)}})]}),H?null:(0,f.Y)(lS._g,{body:j,view:E}),(0,f.FD)(F.S,{css:hJ.splitContainer,children:[(0,f.Y)(hz,{author:$,committer:Z}),(0,f.Y)(hV,{parents:Q,grafted:J,onViewCommitClick:l})]}),null!==z?(0,f.Y)(I.EY,{variant:"small",color:"dimmest",children:"There is more than one parent, diffing against the first parent."}):null,null===X?(0,f.Y)(hC,{}):(0,f.Y)(hB,{query:A,setQuery:C,totalDiffs:X.diffs.length,diffs:N,splitOrUnified:k,setSplitOrUnified:_,folded:P,setFolded:eo}),er]})};function hX(e){var n=e.hash,t=e.remotes,r=e.onViewCommitClick,i=e.switchMode,o=e.status,a=(0,A.A)().git,l=dN(),s=hE(null!=n?n:"");if(null===s)return(0,f.Y)(hC,{});if(s.error)return s.error===rz.uA.NOT_INITIALIZED?i({type:lU.C.CURRENT_BRANCH}):(l(s.error),(s.error===rz.uA.UNKNOWN||s.error===rz.uA.UNKNOWN_NOT_GIT)&&rj({context:"commit-view",gitService:a,result:s,data:{hash:n}})),null;if(null===s.commit)return l(rz.uA.UNKNOWN),null;var c=s.commit,u=fC(c)||fy(c);return(0,f.Y)(hQ,{git:a,commit:c,info:u,onViewCommitClick:r,remotes:t,status:o})}var h0=(0,M.x)({branch:[oW.b.nofill,B.wp.py(12),B.wp.px(8),B.wp.colWithGap(2),B.wp.justify.center,B.wp.borderRadius(8),B.wp.flex.shrink(1)],branchMetadata:[B.wp.flex.shrink(1)]});function h1(e){var n=e.branch,t=e.current,r=e.onClick;return(0,f.FD)(F.S,{css:h0.branch,tabIndex:0,role:"button","aria-label":"Switch to branch ".concat((0,rz.qK)(n,!0)),onClick:r,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==r||r())},children:[(0,f.Y)(I.EY,{multiline:!1,children:(0,f.Y)(lS.Yi,{name:n.name,remote:n.type===rz.xx.REMOTE?n.remote:null,current:void 0!==t&&t,onClick:r,icon:!0})}),(0,f.Y)(h2,{branch:n})]})}function h2(e){var n=e.branch;return(0,f.FD)(F.S,{css:h0.branchMetadata,row:!0,gap:8,align:"center",children:[(0,f.Y)(ps,{name:n.commit.author.name,email:n.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0}),(0,f.Y)(ed.Dc,{date:n.commit.author.date,textColor:"dimmest",textVariant:"small"})]})}var h4=(0,M.x)({expandButton:[{verticalAlign:"middle"},B.wp.justify.spaceBetween],branchListContainer:[B.wp.display.flex],topRow:[B.wp.p(4),B.wp.flex.row,B.wp.align.center,B.wp.justify.spaceBetween],topRowInteractive:[{verticalAlign:"middle"},B.wp.justify.spaceBetween,B.wp.borderRadius(8,8,0,0)],branchList:[B.wp.borderRadius(8)],branchListFoldable:[B.wp.borderRadius(0,0,8,8)]});function h5(e){var n=e.name,t=e.branches,r=e.current,i=void 0===r?null:r,o=e.foldable,a=void 0!==o&&o,l=e.folded,s=e.switchBranch,c=(0,v._)((0,w.useState)(!!a&&void 0!==l&&l),2),u=c[0],d=c[1],p=(0,w.useMemo)(function(){return t.map(function(e){return(0,f.Y)(h1,{branch:e,current:(0,rz.FF)(e,i),onClick:function(){return s(e)}},(0,rz.fn)(e))})},[t,i,s]);return u?(0,f.Y)(eg.$n,{css:h4.expandButton,text:n,iconRight:(0,f.Y)(it.A,{}),onClick:function(){return d(!1)},size:"big"}):a?(0,f.FD)(F.S,{css:h4.branchListContainer,children:[(0,f.Y)(eg.$n,{css:h4.topRowInteractive,text:n,iconRight:(0,f.Y)(ir.A,{}),onClick:function(){return d(!0)},size:"big"}),(0,f.Y)(eo.ui,{css:h4.branchListFoldable,elevated:!0,children:p})]}):(0,f.FD)(F.S,{css:h4.branchListContainer,children:[(0,f.Y)(F.S,{css:h4.topRow,children:(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:n})}),(0,f.Y)(eo.ui,{css:h4.branchList,elevated:!0,children:p})]})}var h8=(0,M.x)({container:[B.wp.p(8),B.wp.colWithGap(8),B.wp.borderRadius(8)],button:[B.wp.flex.grow(1)],inputDisabled:[{opacity:.75}]});function h3(){var e=(0,v._)((0,w.useState)(!0),2),n=e[0],t=e[1],r=(0,v._)((0,w.useState)(""),2),i=r[0],o=r[1],a=(0,v._)((0,w.useState)(!1),2),l=a[0],s=a[1],c=dN(),u=(0,A.A)().git;function d(){t(!0),o("")}function p(){return h.apply(this,arguments)}function h(){return(h=(0,y._)(function(){var e;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(n||!i||l)return[2];return s(!0),[4,u.createBranch({name:i,checkout:!0})];case 1:return(e=r.sent()).error?(c(e.error),s(!1)):(u.forceRefresh(),s(!1),o(""),t(!0),dO("branch-created")),[2]}})})).apply(this,arguments)}if(n)return(0,f.Y)(eg.$n,{text:"Create Branch",iconLeft:(0,f.Y)(rf.A,{}),onClick:function(){return t(!1)}});var m=!i||!(0,rz.eB)(i);return(0,f.FD)(eo.ui,{css:h8.container,elevated:!0,children:[(0,f.Y)(h6,{value:i,onChange:o,onSubmit:p,onCancel:d,disabled:l}),(0,f.FD)(F.S,{row:!0,gap:4,children:[(0,f.Y)(eg.$n,{css:h8.button,text:"Cancel",onClick:d,disabled:l}),(0,f.Y)(eg.$n,{css:h8.button,text:"Create Branch",colorway:"primary",iconLeft:(0,f.Y)(rf.A,{}),onClick:p,loading:l,disabled:m})]})]})}function h6(e){var n=e.value,t=e.disabled,r=e.onChange,i=e.onSubmit,o=e.onCancel;function a(e){(0,rz.Uy)(e)&&(null==r||r(e))}return(0,f.Y)(ew.pd,{value:n,css:t?h8.inputDisabled:void 0,disabled:t,placeholder:"Enter a name for your new branch",onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){return function(e,t){switch(e){case"Enter":null==i||i(),t();break;case"Escape":null==o||o(),t();break;case" ":if(""===n){t();break}a(n+"-"),t()}}(e.key,function(){return e.preventDefault()})},onBlur:function(){""===n&&(null==o||o())},autoFocus:!0})}function h7(e){var n,t,r=e.currentBranch,i=e.switchMode,o=dN(),a=(0,A.A)().git,l=(0,v._)((0,w.useState)(null),2),s=l[0],c=l[1],u=(0,rG.A)((n=(0,y._)(function(e){var n,t,r,i,a,l,s,c,u,d,p,f,h,m,g,v,w,y,S;return(0,b.YH)(this,function(b){switch(b.label){case 0:return[4,e.listBranches()];case 1:if((n=b.sent()).error)return o(n.error),rj({context:"dashboard-view",gitService:e,result:n}),[2,n];return[4,e.findDefaultBranches()];case 2:if((t=b.sent()).error)return o(t.error),[2,t];r=n.branches,i=new Set,a=!0,l=!1,s=void 0;try{for(c=function(){var e=d.value,n=r.find(function(n){return(0,rz.CC)(n,e)});n&&i.add(n)},u=t.refs[Symbol.iterator]();!(a=(d=u.next()).done);a=!0)c()}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}p=Date.now()-5184e6,f=[],h=[],m=!0,g=!1,v=void 0;try{for(w=r[Symbol.iterator]();!(m=(y=w.next()).done);m=!0)S=y.value,!i.has(S)&&(S.commit.author.date>p?f.push(S):h.push(S))}catch(e){g=!0,v=e}finally{try{m||null==w.return||w.return()}finally{if(g)throw v}}return[2,{active:f,stale:h,important:Array.from(i),error:null}]}})}),function(e){return n.apply(this,arguments)}),[o]),d=(t=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(null!==s)return[2];return(0,rz.CC)(r,e)&&i({type:lU.C.CURRENT_BRANCH}),c(e),[4,a.switchBranch(e)];case 1:return(n=t.sent()).error?(o(n.error),rj({context:"dashboard-view",gitService:a,result:n,data:{branch:e.name}}),c(null)):(a.forceRefresh(),dO("branch-switched")),[2]}})}),function(e){return t.apply(this,arguments)});if((0,w.useEffect)(function(){null!==s&&(0,rz.CC)(r,s)&&(c(null),i({type:lU.C.CURRENT_BRANCH}))},[r,s,i]),!u||null!==s)return(0,f.Y)(hC,{});if(u.error)return(0,f.Y)("div",{children:u.error});var p=u.active,h=u.stale,m=u.important;return(0,f.Y)(F.S,{gap:8,children:(0,f.FD)(F.S,{css:[B.wp.pb(8),B.wp.px(8),B.wp.colWithGap(16)],children:[r?(0,f.FD)(F.S,{gap:8,children:[(0,f.Y)(h5,{branches:[r],current:r,name:"Current Branch",switchBranch:d}),(0,f.Y)(h3,{})]}):null,(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,css:hx.switchToBranch,children:"Switch Branch"}),0===m.length?null:(0,f.Y)(h5,{branches:m,current:r,name:"Important",switchBranch:d,foldable:!0}),0===p.length?null:(0,f.Y)(h5,{branches:p,current:r,name:"Active",switchBranch:d,foldable:!0}),0===h.length?null:(0,f.Y)(h5,{branches:h,current:r,name:"Stale",switchBranch:d,foldable:!0,folded:!0})]})})}function h9(){return(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{multiline:!1,children:"Unsupported state: your HEAD is currently detached."}),(0,f.Y)(I.EY,{multiline:!1,children:"Please checkout a branch."})]})}function me(){return(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{multiline:!0,children:"Unsupported state: your index is currently locked. This can happen if multiple git processes are running operations at the same time."}),(0,f.Y)(I.EY,{multiline:!0,children:"Please resolve the issue. If you are sure you do not have git operations running, you can delete your .git/index.lock file."})]})}var mn=(0,M.x)({fileLeft:[B.wp.flex.grow(1),B.wp.align.center]});function mt(e){var n=e.files,t=e.uniquePathMap,r=e.onFileClick,i=[];if(n instanceof Map){var o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=(0,v._)(s.value,2),d=u[0],p=u[1],h=t.get(d);i.push({path:d,prefix:h,resolved:p})}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}else{var m=!0,g=!1,w=void 0;try{for(var y,b=n[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var S=y.value,Y=t.get(S);i.push({path:S,prefix:Y,resolved:!0})}}catch(e){g=!0,w=e}finally{try{m||null==b.return||b.return()}finally{if(g)throw w}}}return(0,f.Y)(F.S,{gap:4,children:i.map(function(e){var n=e.path,t=e.prefix,i=e.resolved;return(0,f.FD)(F.S,{row:!0,gap:8,align:"center",children:[(0,f.FD)(F.S,{css:mn.fileLeft,row:!0,gap:8,children:[(0,f.Y)(te.A,{path:n}),(0,f.Y)(I.EY,{multiline:!1,children:(0,f.Y)(lS.mi,{path:n,prefix:t,onClick:function(){return r({path:n,type:"conflict"})}})})]}),i?(0,f.Y)(ap.A,{color:ez.LU.greenStronger}):(0,f.Y)(o9.A,{color:ez.LU.orangeStronger})]},n)})})}function mr(e){var n=e.hasConflicts?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:B.wp.fontWeight.medium,children:"Resolve all conflicts to complete merge."}),(0,f.Y)("br",{}),(0,f.Y)("span",{children:"You can't do anything else until the merge has been completed or aborted."})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:B.wp.fontWeight.medium,children:"You are in the middle of a merge."}),(0,f.Y)("br",{}),(0,f.Y)("span",{children:"You can't do anything else until the merge has been completed or aborted. You have no conflicts to resolve, so the merge can be completed without any further action."})]});return(0,f.Y)(tZ.N,{colorway:"warning",icon:(0,f.Y)(o9.A,{}),text:n})}var mi=(0,M.x)({left:[{flexBasis:0,flexGrow:1},B.wp.colWithGap(8)],right:{flexBasis:0,flexGrow:1},branch:[B.wp.p(8),B.wp.rowWithGap(4),B.wp.flex.grow(1),B.wp.center,B.wp.borderRadius(8)]});function mo(e){var n,t=e.branch,r=e.refs,i=e.refsAreBranches,o=e.isUpstreamPull;if(!r.length)return null;if(o){var a=(0,v._)((0,rz.xM)(r[0]),2),l=a[0],s=a[1];l&&s&&(n=(0,f.Y)(eo.ui,{css:mi.branch,elevated:!0,children:(0,f.Y)(lS.Yi,{remote:l,name:s,icon:!0,heading:!0})}))}return n||(n=r.map(function(e){return(0,f.Y)(eo.ui,{css:mi.branch,elevated:!0,children:(0,f.Y)(lS.Yi,{name:e,icon:!!i||(0,f.Y)(im.A,{size:16}),heading:!0})},e)})),(0,f.FD)(F.S,{row:!0,gap:4,align:"center",justify:"space-between",children:[(0,f.Y)(F.S,{css:mi.left,children:n}),(0,f.Y)(tf.A,{size:24,color:ez.LU.foregroundDimmest}),(0,f.Y)(F.S,{css:mi.right,children:(0,f.Y)(eo.ui,{css:mi.branch,elevated:!0,children:(0,f.Y)(lS.Yi,{name:t,icon:!0,current:!0,heading:!0})})})]})}function ma(e){return(0,f.Y)(n$.Ay,(0,e7._)((0,K._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M6 3.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM2.25 6a3.75 3.75 0 1 1 4.527 3.67 8.25 8.25 0 0 0 7.554 7.553A3.751 3.751 0 0 1 21.75 18a3.75 3.75 0 0 1-7.43.726 9.75 9.75 0 0 1-7.57-4.53V21a.75.75 0 0 1-1.5 0V9.675A3.751 3.751 0 0 1 2.25 6ZM18 15.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z",clipRule:"evenodd"})}))}var ml=(0,M.x)({container:[B.wp.pt(16),B.wp.pb(8),B.wp.px(8)],fakePaneHeader:[B.wp.p(8),B.wp.rowWithGap(8),B.wp.backgroundColor.backgroundDefault,B.wp.align.center,{borderBottom:"1px solid ".concat(ez.LU.outlineDimmer)}],listContainer:[B.wp.p(8),B.wp.colWithGap(8),B.wp.borderRadius(8)],list:[B.wp.pb(8),B.wp.colWithGap(8)],listDisabled:[{opacity:.5},B.wp.pb(8),B.wp.colWithGap(8)],listHeader:[B.wp.pb(4),B.wp.flex.grow(1),B.wp.border({color:ez.LU.outlineDimmer,direction:"bottom"})],listFiles:[B.wp.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},B.wp.rowWithGap(8)]});function ms(e){var n,t=e.onFileClick,r=e.gotoPendingState,i=(0,v._)((0,w.useState)(!0),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1],h=s||d,m=dN(),g=(0,A.A)().git,S=(0,w.useId)(),Y=(0,rG.A)((n=(0,y._)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,w,y,S,Y;return(0,b.YH)(this,function(b){switch(b.label){case 0:return[4,e.status()];case 1:if((n=b.sent()).error)return rj({context:"use-merging-view-state-status",gitService:e,result:n}),[2,n];if(!(t=n.branch))return[2,{error:rz.uA.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((r=b.sent()).error)return[2,r];return i=r.files,[4,e.getMergingRefs()];case 3:if((o=b.sent()).error)return rj({context:"use-merging-view-state-merging-refs",gitService:e,result:o,data:{status:n,conflictingFiles:i}}),[2,o];a=o.commits,c=(s=(l=o.branches).length>0)?l:a,u=n.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),d=!0,p=!0,f=!1,h=void 0;try{for(m=i[Symbol.iterator]();!(p=(g=m.next()).done);p=!0)if(!(0,v._)(g.value,2)[1]){d=!1;break}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}return w=(0,p5.b)(n.changes.map(function(e){return e.path})),y=i.size>0,S=u.length>0,Y=null!==n.upstream&&1===l.length&&l[0]===n.upstream.branch,[2,{refs:c,branch:t,conflictingFiles:i,otherChangedFiles:u,refsAreBranches:s,allIsResolved:d,uniquePathMap:w,hasConflicts:y,hasOtherChanges:S,isUpstreamPull:Y,error:null}]}})}),function(e){return n.apply(this,arguments)}));if((0,w.useEffect)(function(){(null==Y?void 0:Y.error)&&m(Y.error)},[null==Y?void 0:Y.error,m]),!Y)return(0,f.Y)(hC,{});if(Y.error)return null;var C=Y.refs,x=Y.branch,k=Y.conflictingFiles,_=Y.otherChangedFiles,D=Y.refsAreBranches,E=Y.allIsResolved,R=Y.uniquePathMap,T=Y.hasConflicts,P=Y.hasOtherChanges,L=Y.isUpstreamPull;function U(){return(U=(0,y._)(function(){var e,n,t,i,a,l,s,u,d,p,f;return(0,b.YH)(this,function(v){switch(v.label){case 0:if(!E||h)return[2];c(!0),e=[],n=!0,t=!1,i=void 0;try{for(a=k.keys()[Symbol.iterator]();!(n=(l=a.next()).done);n=!0)s=l.value,e.push(s)}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}return o&&(u=e).push.apply(u,(0,q._)(_)),[4,g.stageFiles({all:!1})];case 1:if((d=v.sent()).error)return m(d.error),c(!1),[2];return[4,g.stageFiles({add:e})];case 2:if((p=v.sent()).error)return m(p.error),c(!1),[2];return[4,g.mergeContinue()];case 3:if(!(f=v.sent()).error)return[3,5];return[4,g.stageFiles({all:!1})];case 4:return v.sent(),m(f.error),c(!1),[3,6];case 5:r(),g.forceRefresh(),v.label=6;case 6:return[2]}})})).apply(this,arguments)}function N(){return(N=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(h)return[2];return p(!0),[4,g.mergeAbort()];case 1:return(e=n.sent()).error?(m(e.error),p(!1),rj({context:"merging-view-abort",gitService:g,result:e,data:{branch:x}})):(r(),g.forceRefresh()),[2]}})})).apply(this,arguments)}var O=L?"Complete in-progress pull":"Complete in-progress merge";return T&&(O=L?"Resolve pull conflicts":"Resolve merge conflicts"),(0,f.FD)(F.S,{children:[(0,f.FD)(F.S,{css:ml.fakePaneHeader,children:[(0,f.Y)(ma,{}),(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:O})]}),(0,f.FD)(F.S,{css:ml.container,gap:12,children:[(0,f.Y)(mo,{branch:x,refs:C,refsAreBranches:D,isUpstreamPull:L}),(0,f.Y)(mr,{hasConflicts:T}),(0,f.FD)(eo.ui,{css:ml.listContainer,elevated:!0,children:[(0,f.FD)(F.S,{css:ml.list,children:[(0,f.Y)(F.S,{css:ml.listHeader,children:(0,f.Y)(I.EY,{css:B.wp.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,f.Y)(F.S,{css:ml.listFiles,children:T?(0,f.Y)(mt,{files:k,uniquePathMap:R,onFileClick:t}):(0,f.Y)(I.EY,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this merge."})})]}),P?(0,f.FD)(F.S,{css:o?ml.list:ml.listDisabled,children:[(0,f.Y)(F.S,{css:ml.listHeader,children:(0,f.Y)(I.EY,{css:B.wp.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,f.Y)(F.S,{css:ml.listFiles,children:(0,f.Y)(mt,{files:_,uniquePathMap:R,onFileClick:t})})]}):null]}),(0,f.FD)(F.S,{css:ml.includeOtherFiles,tag:"label",children:[(0,f.Y)(nN.S,{id:S,checked:o,onChange:function(e){return a(e)}}),(0,f.Y)(I.EY,{multiline:!1,children:"Include other changed files in commit"})]}),(0,f.FD)(F.S,{gap:8,children:[(0,f.Y)(eg.$n,{text:L?"Complete pull":"Complete merge and commit",colorway:"primary",iconLeft:s?(0,f.Y)(tn.A,{}):(0,f.Y)(ma,{}),disabled:!E||h,loading:s,onClick:function(){return U.apply(this,arguments)}}),(0,f.Y)(eg.$n,{text:L?"Abort pull":"Abort merge",colorway:"negative",iconLeft:d?(0,f.Y)(tn.A,{}):(0,f.Y)(lx.A,{}),disabled:h,loading:d,onClick:function(){return N.apply(this,arguments)}})]})]})]})}var mc=(0,M.x)({container:[B.wp.pt(16),B.wp.pb(8),B.wp.px(8)],fakePaneHeader:[B.wp.p(8),B.wp.rowWithGap(8),B.wp.backgroundColor.backgroundDefault,B.wp.align.center,{borderBottom:"1px solid ".concat(ez.LU.outlineDimmer)}],listContainer:[B.wp.p(8),B.wp.colWithGap(8),B.wp.borderRadius(8)],list:[B.wp.pb(8),B.wp.colWithGap(8)],listDisabled:[{opacity:.5},B.wp.pb(8),B.wp.colWithGap(8)],listHeader:[B.wp.pb(4),B.wp.flex.grow(1),B.wp.border({color:ez.LU.outlineDimmer,direction:"bottom"})],listFiles:[B.wp.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},B.wp.rowWithGap(8)]});function mu(e){var n,t=e.onFileClick,r=e.gotoPendingState,i=(0,v._)((0,w.useState)(!0),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1],h=s||d,m=dN(),g=(0,A.A)().git,S=(0,w.useId)(),Y=(0,rG.A)((n=(0,y._)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h;return(0,b.YH)(this,function(m){switch(m.label){case 0:return[4,e.status()];case 1:if((n=m.sent()).error)return rj({context:"use-rebasing-view-state-status",gitService:e,result:n}),[2,n];if(!(t=n.branch))return[2,{error:rz.uA.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((r=m.sent()).error)return[2,r];i=r.files,o=n.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),a=!0,l=!0,s=!1,c=void 0;try{for(u=i[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)if(!(0,v._)(d.value,2)[1]){a=!1;break}}catch(e){s=!0,c=e}finally{try{l||null==u.return||u.return()}finally{if(s)throw c}}return p=(0,p5.b)(n.changes.map(function(e){return e.path})),f=i.size>0,h=o.length>0,[2,{branch:t,conflictingFiles:i,otherChangedFiles:o,allIsResolved:a,uniquePathMap:p,hasConflicts:f,hasOtherChanges:h,error:null}]}})}),function(e){return n.apply(this,arguments)}));if((0,w.useEffect)(function(){(null==Y?void 0:Y.error)&&m(Y.error)},[null==Y?void 0:Y.error,m]),!Y)return(0,f.Y)(hC,{});if(Y.error)return null;var C=Y.branch,x=Y.conflictingFiles,k=Y.otherChangedFiles,_=Y.allIsResolved,D=Y.uniquePathMap,E=Y.hasConflicts,R=Y.hasOtherChanges;function T(){return(T=(0,y._)(function(){var e,n,t,i,a,l,s,u,d,p,f;return(0,b.YH)(this,function(v){switch(v.label){case 0:if(!_||h)return[2];c(!0),e=[],n=!0,t=!1,i=void 0;try{for(a=x.keys()[Symbol.iterator]();!(n=(l=a.next()).done);n=!0)s=l.value,e.push(s)}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}return o&&(u=e).push.apply(u,(0,q._)(k)),[4,g.stageFiles({all:!1})];case 1:if((d=v.sent()).error)return m(d.error),c(!1),[2];return[4,g.stageFiles({add:e})];case 2:if((p=v.sent()).error)return m(p.error),c(!1),[2];return[4,g.escapeHatchGitExecWrite("git rebase --continue")];case 3:if(!(f=v.sent()).error)return[3,5];return[4,g.stageFiles({all:!1})];case 4:return v.sent(),m(f.error),c(!1),[3,6];case 5:r(),g.forceRefresh(),v.label=6;case 6:return[2]}})})).apply(this,arguments)}function P(){return(P=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(h)return[2];return p(!0),[4,g.escapeHatchGitExecWrite("git rebase --abort")];case 1:return(e=n.sent()).error?(m(e.error),p(!1),rj({context:"rebasing-view-abort",gitService:g,result:e,data:{branch:C}})):(r(),g.forceRefresh()),[2]}})})).apply(this,arguments)}var L="Complete in-progress rebase";return E&&(L="Resolve conflicts"),(0,f.FD)(F.S,{children:[(0,f.FD)(F.S,{css:mc.fakePaneHeader,children:[(0,f.Y)(ma,{}),(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:L})]}),(0,f.FD)(F.S,{css:mc.container,gap:12,children:[(0,f.Y)(mr,{hasConflicts:E}),(0,f.FD)(eo.ui,{css:mc.listContainer,elevated:!0,children:[(0,f.FD)(F.S,{css:mc.list,children:[(0,f.Y)(F.S,{css:mc.listHeader,children:(0,f.Y)(I.EY,{css:B.wp.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,f.Y)(F.S,{css:mc.listFiles,children:E?(0,f.Y)(mt,{files:x,uniquePathMap:D,onFileClick:t}):(0,f.Y)(I.EY,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this step."})})]}),R?(0,f.FD)(F.S,{css:o?mc.list:mc.listDisabled,children:[(0,f.Y)(F.S,{css:mc.listHeader,children:(0,f.Y)(I.EY,{css:B.wp.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,f.Y)(F.S,{css:mc.listFiles,children:(0,f.Y)(mt,{files:k,uniquePathMap:D,onFileClick:t})})]}):null]}),(0,f.FD)(F.S,{css:mc.includeOtherFiles,tag:"label",children:[(0,f.Y)(nN.S,{id:S,checked:o,onChange:function(e){return a(e)}}),(0,f.Y)(I.EY,{multiline:!1,children:"Include other changed files in commit"})]}),(0,f.FD)(F.S,{gap:8,children:[(0,f.Y)(eg.$n,{text:"commit and continue rebase",colorway:"primary",iconLeft:s?(0,f.Y)(tn.A,{}):(0,f.Y)(ma,{}),disabled:!_||h,loading:s,onClick:function(){return T.apply(this,arguments)}}),(0,f.Y)(eg.$n,{text:"Abort rebase",colorway:"negative",iconLeft:d?(0,f.Y)(tn.A,{}):(0,f.Y)(lx.A,{}),disabled:h,loading:d,onClick:function(){return P.apply(this,arguments)}})]})]})]})}function md(){return(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{multiline:!1,children:"Unsupported state: you are in the middle of a rebase."}),(0,f.Y)(I.EY,{multiline:!1,children:"Please finish the rebase manually."})]})}function mp(){return(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{multiline:!1,children:"Unsupported state: you are in the middle of a revert."}),(0,f.Y)(I.EY,{multiline:!1,children:"Please finish the revert manually."})]})}function mf(e){var n=e.username,t=e.avatar,r=e.fullName;return(0,f.FD)(F.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(po.e,{src:null!=t?t:null,username:n,fullName:r}),(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:n})]})}var mh=(0,M.x)({list:{"> div:first-child":B.wp.borderRadius(8,8,0,0),"> div:last-child":[B.wp.borderRadius(0,0,8,8),{border:"none"}]},profile:[oW.b.filled,B.wp.flex.row,B.wp.justify.spaceBetween,B.wp.p(12),B.wp.borderRadius(0),B.wp.border({color:ez.LU.outlineDefault,direction:"bottom"})],information:[B.wp.flex.shrink(1)],email:[B.wp.flex.shrink(1)],connectToGithubContainer:[B.wp.p(12),B.wp.backgroundColor.backgroundHigher],notConnectedText:[B.wp.pb(4)],settingsButton:{background:"transparent",border:"none","&:hover":{textDecoration:"underline"}},radio:{pointerEvents:"none"}});function mm(e){var n=e.profiles,t=e.current,r=e.showConnectToGithub,i=e.onSelectProvider,o=(0,iX.useRouter)(),a=(0,i2.Po)(o),l=(0,w.useId)();return(0,f.FD)(ey.z,{name:l,css:mh.list,value:null!=t?t:"",children:[n.map(function(e){var n=e.provider===rz.HJ.GITHUB?"GitHub":"Default Profile",r=void 0;return e.provider===rz.HJ.GITHUB&&(r=a?"/mobile/auth/github/app_permissions":"/auth/github/app_permissions?close=1"),(0,f.Y)(mg,{profile:e,providerName:n,current:e.provider===t,onSelectProvider:i,settingsURL:r},e.provider)}),r?(0,f.FD)(F.S,{css:mh.connectToGithubContainer,gap:4,children:[(0,f.Y)(F.S,{row:!0,gap:4,align:"center",children:(0,f.Y)(mf,{username:"GitHub Account",fullName:"GitHub Account"})}),(0,f.Y)(I.EY,{color:"dimmest",css:mh.notConnectedText,multiline:!1,children:"Your GitHub account is not connected."}),(0,f.Y)(dZ,{})]}):null]})}function mg(e){var n=e.profile,t=e.current,r=e.providerName,i=e.settingsURL,o=e.onSelectProvider,a=n.provider,l=n.name,s=n.username,c=n.email,u=n.avatar,d=(0,w.useId)();return(0,f.FD)(F.S,{onClick:function(){return o(a)},css:mh.profile,children:[(0,f.FD)(F.S,{css:mh.information,gap:4,children:[(0,f.FD)(F.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(mf,{username:s,avatar:u,fullName:l}),i?(0,f.Y)(tj.v,{css:mh.settingsButton,text:"".concat(r," Settings"),iconRight:(0,f.Y)(ru.A,{}),href:i,target:"_blank",variant:"outlined",size:"small"}):(0,f.Y)(I.EY,{color:"dimmest",variant:"small",multiline:!1,children:r})]}),(0,f.FD)(I.EY,{color:"dimmest",css:mh.email,multiline:!1,children:[l," <",c,">"]})]}),(0,f.Y)(ey.s,{css:mh.radio,id:d,checked:t,value:a})]})}var mv=(0,M.x)({profileContainer:[B.wp.flex.column]});function mw(){var e,n=(0,A.A)().git,t=(0,rG.A)((e=(0,y._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){return n=e.getCurrentProfile(),t=e.getProfiles(),[2,{profiles:t,current:null!==(r=null==n?void 0:n.provider)&&void 0!==r?r:null,hasGitHub:!e.hasProfile(rz.HJ.GITHUB),error:null}]})}),function(n){return e.apply(this,arguments)}));if(!t)return null;if(null!==t.error)return rj({context:"git-profiles",gitService:n,result:{error:t.error}}),null;var r=t.profiles,i=t.current,o=t.hasGitHub;return(0,f.Y)(F.S,{css:mv.profileContainer,children:(0,f.Y)(mm,{profiles:r,current:i,showConnectToGithub:o,onSelectProvider:function(e){n.setCurrentProfile(e),e===rz.HJ.REPLIT_DEFAULT?dO("profile-changed",{profile:"replit"}):e===rz.HJ.GITHUB&&dO("profile-changed",{profile:"github"})}})})}var my=t(34951);function mb(){var e=(0,$._)(["\n  query GithubRemoteConfigRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        description\n        isPrivate\n        slug\n        url\n      }\n    }\n  }\n"]);return mb=function(){return e},e}function mS(){var e=(0,$._)(["\n  query GithubRemoteConfigUser {\n    currentUser {\n      ... on CurrentUser {\n        id\n        gitHubInfo {\n          accessToken\n        }\n      }\n    }\n  }\n"]);return mS=function(){return e},e}function mY(){var e=(0,$._)(["\n  mutation GithubRemoteConfigCreateGithubRepo($input: CreateGithubRepoInput!) {\n    createGithubRepo(input: $input) {\n      ... on CreateGithubRepoResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return mY=function(){return e},e}var mA={},mC=(0,J.J1)(mb()),mx=(mS(),(0,J.J1)(mY())),mk=t(91168),m_=t(13278),mD=(0,M.x)({errorText:[B.wp.color.accentNegativeStronger,B.wp.pl(4)]});function mE(e){var n,t,r,i,o=e.remoteName,a=e.updateRemote,l=(0,nT.A)().showConfirm,s=(0,A.A)().git,c=(0,iI.A)(),u=dG(),d=(0,nU.c)(),p=(0,n_.A)(),h=(0,w.useRef)(null),m=(0,w.useRef)(null),g=(0,v._)((0,w.useState)(),2),S=g[0],Y=g[1],C=(n=(0,K._)({},mA,{variables:{replId:p}}),Q.I(mC,n)).data,x=(null==C?void 0:C.repl.__typename)==="Repl"?C.repl:{slug:void 0,description:void 0,isPrivate:void 0,url:void 0},k=x.slug,_=x.description,D=x.isPrivate,E=x.url,R=(0,v._)((t=(0,K._)({},mA,void 0),l3.n(mx,t)),2),T=R[0],P=R[1].loading,L=(0,dW.P)({onAuth:function(){dO("github-user-connected")}}),U=(0,v._)((0,w.useState)(null==D||D),2),N=U[0],O=U[1],M=(0,v._)((0,w.useState)(k),2),H=M[0],z=M[1],W=(0,v._)((0,w.useState)(),2),G=W[0],V=W[1],j=(0,v._)((0,w.useState)(null!=_?_:E&&"Repository for https://replit.com".concat(E)),2),Z=j[0],q=j[1],$=(0,v._)((0,w.useState)(),2),J=$[0],X=$[1],ee=function(){V(void 0),X(void 0),Y(void 0)},en=(r=(0,y._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return[4,s.getRemotes()];case 1:if((n=i.sent()).error)return Y("Error finding current remotes, ".concat(n.error)),[2];if(!n.remotes.has(o))return[3,3];return[4,s.setRemoteURL({remote:o,url:e})];case 2:if((t=i.sent()).error)return Y("Error (".concat(t.error,") setting ").concat(o," to use ").concat(e," as a remote.")),[2];return a(e),dO("remote-edited"),[2];case 3:return[4,s.addRemote({name:o,url:e})];case 4:if((r=i.sent()).error)return Y("Error (".concat(r.error,") adding ").concat(o," ").concat(e," as a remote.")),[2];return a(e),dO("remote-added"),[2]}})}),function(e){return r.apply(this,arguments)}),et=(i=(0,y._)(function(){var e,n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(ee(),!H)return[2];if(!(0,rz.em)(H))return V("Invalid remote name."),[2];return[4,T({variables:{input:{name:H,description:null!=_?_:null,homepage:"replit.com".concat(E),isPrivate:N,ownerType:my.nr.User}}})];case 1:if((null===(e=(r=i.sent()).data)||void 0===e?void 0:e.createGithubRepo.__typename)==="UnauthorizedError"||(null===(n=r.data)||void 0===n?void 0:n.createGithubRepo.__typename)==="UserError")return Y(r.data.createGithubRepo.message),[2];return(null===(t=r.data)||void 0===t?void 0:t.createGithubRepo.__typename)==="CreateGithubRepoResult"&&(en(r.data.createGithubRepo.remoteUrl),dO("github-repository-published"),l("Created repository on Github")),[2]}})}),function(){return i.apply(this,arguments)});return u?(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:"Repository name"}),(0,f.Y)(ew.pd,{ref:h,placeholder:"Enter repository name",value:H,onChange:function(e){V(void 0),z(e.target.value)},onKeyDown:function(e){if("Enter"===e.key){var n;e.preventDefault(),null===(n=m.current)||void 0===n||n.focus()}}}),(0,f.Y)(I.EY,{css:mD.errorText,multiline:!1,children:G}),(0,f.Y)(mk.A,{height:1}),(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:"Repository description"}),(0,f.Y)(ew.ov,{ref:m,maxLength:350,name:"Repository description",placeholder:"Enter repository description",value:null!=Z?Z:void 0,onChange:function(e){X(void 0),q(e.target.value)}}),(0,f.Y)(I.EY,{css:mD.errorText,multiline:!1,children:J}),(0,f.Y)(mk.A,{height:1}),(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:"Privacy"}),(0,f.FD)(ie.e2,{tag:"fieldset",id:d("privacy"),name:d("privacy"),value:N,onChange:function(e){return O(e)},row:!0,css:[B.wp.width("100%")],children:[(0,f.Y)(ie.$O,{id:d("false"),value:!1,text:"Public",icon:(0,f.Y)(m_.A,{})}),(0,f.Y)(ie.$O,{id:d("true"),value:!0,text:"Private",icon:(0,f.Y)(iZ.A,{})})]}),(0,f.Y)(mk.A,{height:2}),(0,f.Y)(eg.$n,{text:P?"Creating Repository on GitHub…":"Create Repository on GitHub",colorway:"primary",iconLeft:(0,f.Y)(dj.A,{}),onClick:et,loading:P}),S?(0,f.Y)(I.EY,{css:mD.errorText,maxLines:2,multiline:!1,children:S}):null]}):c?(0,f.Y)(F.S,{children:(0,f.Y)(eg.$n,{colorway:"primary",iconLeft:(0,f.Y)(dj.A,{}),text:"Open Account page to connect to GitHub",onClick:function(){dz.M.openExternalUrl("/account#connected-services")}})}):(0,f.Y)(F.S,{children:(0,f.Y)(eg.$n,{colorway:"primary",iconLeft:(0,f.Y)(dj.A,{}),text:"Connect to GitHub",onClick:L})})}var mR=(0,nD.AH)(B.wp.border({width:1,color:ez.LU.outlineDimmer}),B.wp.borderRadius(8)),mI=(0,nD.AH)(oW.b.filled,B.wp.flex.row,B.wp.justify.spaceBetween,B.wp.align.center,B.wp.px(8),B.wp.py(4),B.wp.borderRadius(8,8,0,0)),mF=(0,nD.AH)(B.wp.borderRadius(8,8,0,0)),mT=(0,nD.AH)(B.wp.borderRadius(8)),mP=(0,nD.AH)(B.wp.p(8)),mL=(0,nD.AH)(B.wp.flex.growAndShrink(1));function mU(e){var n=e.title,t=e.expanded,r=e.content,i=e.onClick;return(0,f.FD)(F.S,{css:mR,children:[(0,f.FD)(F.S,{css:[mI,t?mF:mT],onClick:i,children:[(0,f.Y)(F.S,{css:mL,children:(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:n})}),t?(0,f.Y)(ir.A,{size:20}):(0,f.Y)(it.A,{size:20})]}),t?(0,f.Y)(F.S,{css:mP,children:r}):null]})}var mN=(0,nD.AH)(B.wp.rowWithGap(4)),mO=(0,nD.AH)(B.wp.flex.growAndShrink(1)),mM=(0,nD.AH)(B.wp.color.accentNegativeStronger,B.wp.pl(4));function mB(e){var n,t=e.initialRemoteUrl,r=e.remoteName,i=e.updateRemote,o=(0,A.A)().git,a=(0,v._)((0,w.useState)(),2),l=a[0],s=a[1];(0,w.useEffect)(function(){s(void 0)},[t]);var c=(0,v._)((0,w.useState)(),2),u=c[0],d=c[1],p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],g=(n=(0,y._)(function(){var e,n,t;return(0,b.YH)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,5,6,7]),!l)return[2];if(m(!0),!(0,rz.C2)(l))throw Error("Invalid remote url.");return[4,o.getRemotes()];case 1:if((e=a.sent()).error)throw Error("Error finding current remotes, ".concat(e.error));if(!e.remotes.has(r))return[3,3];return[4,o.setRemoteURL({remote:r,url:l})];case 2:if((n=a.sent()).error)throw rj({context:"remote-input",gitService:o,result:n,data:{remote:r,url:l}}),Error("Error (".concat(n.error,") setting ").concat(r," to use ").concat(l," as a remote."));return dO("remote-edited"),i(l),[2];case 3:return[4,o.addRemote({name:r,url:l})];case 4:if((t=a.sent()).error)throw rj({context:"remote-input",gitService:o,result:t,data:{remote:r,url:l}}),Error("Error (".concat(t.error,") adding ").concat(r," ").concat(l," as a remote."));return dO("remote-added"),[3,7];case 5:return d(a.sent().message),[3,7];case 6:return m(!1),[7];case 7:return[2]}})}),function(){return n.apply(this,arguments)});return(0,f.FD)(F.S,{children:[(0,f.Y)(ew.pd,{name:"Remote URL",placeholder:"Enter Remote URL",value:null!=l?l:t,autoComplete:"off",autoCorrect:"off",onChange:function(e){d(void 0),s(e.target.value)},inputMode:"url","aria-label":"Remote URL",onKeyDown:function(e){"Enter"===e.key&&g()}}),u?(0,f.Y)(I.EY,{variant:"small",css:mM,multiline:!1,children:u}):null,l&&l!==t?(0,f.FD)(f.FK,{children:[(0,f.Y)(mk.A,{height:1}),(0,f.FD)(F.S,{css:mN,children:[(0,f.Y)(eg.$n,{css:mO,text:"Cancel",iconLeft:(0,f.Y)(dX.A,{}),onClick:function(){return s(void 0)}}),(0,f.Y)(eg.$n,{css:mO,text:h?"Saving…":"Save",loading:h,colorway:"primary",iconLeft:(0,f.Y)(ap.A,{}),onClick:g})]})]}):null]})}var mH="origin",mz=function(e){return e[e.GitHub=0]="GitHub",e}(mz||{});function mW(){var e,n=(0,rG.A)((e=(0,y._)(function(e){var n,t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,e.getRemotes()];case 1:if((n=o.sent()).error)return rj({context:"remote-config",gitService:e,result:n}),[2,{url:void 0,name:mH,error:n.error}];if(!(r=(0,v._)(null!==(t=n.remotes.values())&&void 0!==t?t:void 0,1)[0]))return[2,{url:void 0,name:mH,error:null}];return[2,{url:r.push||r.fetch,name:null!==(i=r.name)&&void 0!==i?i:mH,error:null}]}})}),function(n){return e.apply(this,arguments)}));return null==n?(0,f.FD)(F.S,{css:B.wp.center,children:[(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:"Loading remote information."}),(0,f.Y)(hC,{})]}):(null==n?void 0:n.error)?null:(0,f.Y)(mG,{initialRemoteUrl:null==n?void 0:n.url,remoteName:null==n?void 0:n.name})}function mG(e){var n=e.initialRemoteUrl,t=e.remoteName,r=(0,v._)((0,w.useState)(n),2),i=r[0],o=r[1],a=(0,v._)((0,w.useState)(""===n||void 0===n?0:void 0),2),l=a[0],s=a[1],c=function(e){o(e)};return(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:"Remote"}),(0,f.Y)(mk.A,{height:1}),(0,f.Y)(mB,{remoteName:t,initialRemoteUrl:i,updateRemote:c}),(0,f.Y)(mk.A,{height:2}),(0,f.Y)(mU,{title:"GitHub",expanded:0===l,onClick:function(){return s(function(e){return 0===e?void 0:0})},content:(0,f.Y)(mE,{remoteName:t,updateRemote:c})})]})}var mV=(0,nD.AH)(B.wp.px(16));function mj(){return(0,f.FD)(F.S,{css:mV,children:[(0,f.Y)(mk.A,{height:2}),(0,f.Y)(mW,{}),(0,f.Y)(mk.A,{height:2}),(0,f.Y)(mZ,{})]})}function mZ(){return(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:"Commit author"}),(0,f.Y)(mk.A,{height:1}),(0,f.Y)(mw,{})]})}function mq(){return(0,f.Y)(F.S,{children:(0,f.Y)(I.EY,{multiline:!0,children:"Something went wrong. Please refresh the page and try again."})})}var mK=(0,M.x)({container:[B.wp.p(8),B.wp.pt(16)],fakePaneHeader:[B.wp.px(8),B.wp.py(4),B.wp.rowWithGap(8),B.wp.backgroundColor.backgroundDefault,B.wp.align.center,{borderBottom:"1px solid ".concat(ez.LU.outlineDimmer)}]});function m$(e){var n=e.onFileClick,t=e.status;return(0,f.FD)(F.S,{children:[(0,f.Y)(mJ,{}),(0,f.FD)(F.S,{css:mK.container,gap:16,children:[(0,f.Y)(tZ.N,{colorway:"orange",icon:(0,f.Y)(o9.A,{}),text:"Your current branch doesn't have any commits. You need to make an initial commit before continuing."}),(0,f.FD)(F.S,{css:hx.section,children:[(0,f.Y)(F.S,{css:hx.reviewChangesHeader,children:(0,f.Y)(I.EY,{css:hx.headerText,multiline:!1,children:"Commit"})}),(0,f.Y)(fm,{status:t,onStagedFileClick:n,defaultMessage:"Initial commit"})]})]})]})}function mJ(){var e,n=dN(),t=(0,rG.A)((e=(0,y._)(function(e){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,e.status()];case 1:return(t=r.sent()).error&&(rj({context:"unborn-branch-view-status",gitService:e,result:t}),n(t.error)),[2,t]}})}),function(n){return e.apply(this,arguments)}),[n]);return(null==t?void 0:t.error)?null:(0,f.Y)(F.S,{css:mK.fakePaneHeader,children:(null==t?void 0:t.branch)?(0,f.Y)(lS.Yi,{name:t.branch,current:!0,heading:!0}):null})}var mQ=(0,M.x)({gitPane:[B.wp.position.relative,B.wp.display.flex,B.wp.minHeight("100%")],gitPaneContent:[B.wp.flex.growAndShrink(1),B.wp.overflow("auto")]});function mX(e){var n,t=e.isActive,r=e.performPaneOperation,i=e.mode,o=void 0===i?{type:lU.C.CURRENT_BRANCH}:i,a=(0,w.useRef)(),l=(0,w.useCallback)(function(e){r({operation:"replace",pane:{type:"git",data:{mode:e}}})},[r]),s=(0,v._)((0,w.useState)(!1),2),c=s[0],u=s[1];m4(void 0!==t&&t);var d=(0,rG.A)((n=(0,y._)(function(e){var n,t,r,i,o,a,l,s,c,u;return(0,b.YH)(this,function(d){switch(d.label){case 0:return[4,e.getRepositoryState()];case 1:if((n=d.sent()).error)return[2,n];if(t=n.state,r=n.type,i=null,o=null,a=null,r===rz.UN.INITIALIZING)return[3,6];return[4,e.status()];case 2:if((l=d.sent()).error)return rj({context:"git-pane-status",gitService:e,result:l,data:{state:t,type:r}}),[2,l];return i=l,[4,e.getRemotes()];case 3:if((s=d.sent()).error)return rj({context:"git-pane-remotes",gitService:e,result:s,data:{state:t,type:r}}),[2,s];if(o=s.remotes,!i.branch)return[3,5];return[4,e.getBranch(i.branch)];case 4:if((c=d.sent()).error)return rj({context:"git-pane-branch",gitService:e,result:c,data:{state:t,type:r}}),[2,c];a=c.branch,d.label=5;case 5:return[3,8];case 6:return[4,e.status()];case 7:if((u=d.sent()).error)return rj({context:"git-pane-status-initializing",gitService:e,result:u,data:{state:t,type:r}}),[2,{state:t,type:r,status:i,remotes:o,currentBranch:a,error:null}];i=u,d.label=8;case 8:return[2,{state:t,type:r,status:i,remotes:o,currentBranch:a,error:null}]}})}),function(e){return n.apply(this,arguments)})),p=!d||d.error?null:d.currentBranch,h=(0,w.useCallback)(function(e){switch(l(e),e.type){case lU.C.DASHBOARD:dO("pane-mode-changed",{mode:"dashboard"});break;case lU.C.BRANCH:dO("pane-mode-changed",{mode:"branch"});break;case lU.C.CURRENT_BRANCH:dO("pane-mode-changed",{mode:"current-branch"});break;case lU.C.SETTINGS:dO("pane-mode-changed",{mode:"settings"})}},[l]),m=(0,w.useCallback)(function(){a.current?(h(a.current),a.current=void 0):h({type:lU.C.CURRENT_BRANCH})},[h]),g=(0,e$.A)(o),S=(0,w.useCallback)(function(e){var n=function(e){a.current=g.current,h(e)};switch(e.type){case lU.C.DASHBOARD:n(e);break;case lU.C.BRANCH:if((0,rz.FF)(e.branch,p)){n({type:lU.C.CURRENT_BRANCH});break}n(e);break;case lU.C.CURRENT_BRANCH:case lU.C.SETTINGS:case lU.C.COMMIT:n(e)}},[h,p,g]),Y=(0,w.useCallback)(function(e){var n=e.path,t=e.type,i=(0,nq.QY)({path:n});if("codeEditor"!==i){r({operation:"open",pane:{type:i,data:{path:n}},secondary:!0});return}"conflict"===(void 0===t?"change":t)?r({operation:"open",pane:{type:"codeEditor",data:{path:n}},secondary:!0}):r({operation:"open",pane:{type:"diff",data:{left:{path:n,data:{type:"git",revision:"HEAD"}},right:{path:n,data:{type:"fs"}}}},secondary:!0})},[r]),A=(0,w.useCallback)(function(e){S({type:lU.C.COMMIT,hash:e})},[S]),C=(0,w.useCallback)(function(){u(!0)},[]);if(o.type===lU.C.BRANCH&&(0,rz.FF)(o.branch,p)&&h({type:lU.C.CURRENT_BRANCH}),(0,w.useEffect)(function(){return u(!1)},[d]),c||!d||d.error)return(0,f.Y)(m0,{children:(null==d?void 0:d.error)?(0,f.Y)(tV.A,{pane:{type:"git"},headerText:"Git pane is unavailable.",bodyText:(0,f.FD)(f.FK,{children:["Something went wrong. Error: ",(0,f.Y)("code",{children:d.error})]}),asciiArt:"Computer"}):(0,f.Y)(hC,{})});switch(d.type){case rz.UN.INITIALIZING:case rz.UN.INTERMEDIATE:case rz.UN.DETACHED_HEAD:return(0,f.Y)(m0,{children:(0,f.Y)(m1,{state:d.state,status:d.status,onFileClick:Y,gotoPendingState:C})});case rz.UN.NORMAL:if(o.type===lU.C.BRANCH&&!o.branch||o.type===lU.C.CURRENT_BRANCH&&!p)return(0,f.Y)(m0,{header:(0,f.Y)(pR,{mode:lU.C.DASHBOARD,branch:null,switchMode:S,onBack:m}),children:(0,f.Y)(h7,{currentBranch:null,switchMode:S})});var x=null;return o.type===lU.C.CURRENT_BRANCH?x=p:o.type===lU.C.BRANCH&&(x=o.branch),(0,f.Y)(m0,{header:(0,f.Y)(pR,{mode:o.type,branch:x,switchMode:S,onBack:m}),children:(0,f.Y)(m2,{performPaneOperation:r,mode:o,status:d.status,remotes:d.remotes,currentBranch:p,switchMode:S,onStagedFileClick:Y,onViewCommitClick:A,onViewSettingsClick:function(){return S({type:lU.C.SETTINGS})},gotoPendingState:C})})}}function m0(e){var n=e.header,t=e.children,r=(0,v._)((0,w.useState)(function(){return(0,eN.y$)()}),1)[0];return(0,f.Y)(dT.Provider,{value:r,children:(0,f.FD)(F.S,{css:mQ.gitPane,children:[(0,f.Y)(d3,{}),n,(0,f.Y)(F.S,{css:mQ.gitPaneContent,children:t})]})})}function m1(e){var n=e.state,t=e.status,r=e.onFileClick,i=e.gotoPendingState,o=(0,i$._P)({controlName:"flag-new-rebase-editor",logFlagToAnalytics:!1,default:!1});switch(n){case rz.Gi.NOT_INITIALIZED:return(0,f.Y)(tV.A,{pane:{type:"git"},action:(0,f.Y)(dH,{})});case rz.Gi.ON_UNBORN_BRANCH:return(0,f.Y)(m$,{onFileClick:r,status:t});case rz.Gi.MERGING:return(0,f.Y)(ms,{onFileClick:r,gotoPendingState:i});case rz.Gi.REBASING:return o?(0,f.Y)(mu,{gotoPendingState:i,onFileClick:r}):(0,f.Y)(md,{});case rz.Gi.REVERTING:return(0,f.Y)(mp,{});case rz.Gi.CHERRY_PICKING:return(0,f.Y)(hD,{});case rz.Gi.APPLYING_MAILBOX:return(0,f.Y)(pP,{});case rz.Gi.BISECTING:return(0,f.Y)(pL,{});case rz.Gi.DETACHED_HEAD:return(0,f.Y)(h9,{});case rz.Gi.INDEX_LOCKED:return(0,f.Y)(me,{});case rz.Gi.CLEAN:case rz.Gi.DIRTY_INDEX:case rz.Gi.DIRTY_WORKTREE:return(0,f.Y)(mq,{});default:(0,aK.A)(n)}}function m2(e){var n=e.mode,t=e.status,r=e.remotes,i=e.currentBranch,o=e.switchMode,a=e.onStagedFileClick,l=e.onViewCommitClick,s=e.onViewSettingsClick,c=e.gotoPendingState,u=e.performPaneOperation;switch(n.type){case lU.C.DASHBOARD:return(0,f.Y)(h7,{currentBranch:i,switchMode:o});case lU.C.BRANCH:return(0,f.Y)(hk,{performPaneOperation:u,status:t,branch:n.branch,remotes:r,onStagedFileClick:a,onViewCommitClick:l,onViewSettingsClick:s,gotoPendingState:c});case lU.C.CURRENT_BRANCH:return(0,f.Y)(hk,{performPaneOperation:u,status:t,remotes:r,branch:i,onStagedFileClick:a,onViewCommitClick:l,onViewSettingsClick:s,gotoPendingState:c,current:!0});case lU.C.SETTINGS:return(0,f.Y)(mj,{});case lU.C.COMMIT:return(0,f.Y)(hX,{status:t,remotes:r,onViewCommitClick:l,hash:n.hash,switchMode:o});default:(0,aK.A)(n)}}function m4(e){var n=(0,A.A)().git;(0,w.useEffect)(function(){e&&setTimeout(function(){n.forceRefresh()},100)},[e,n])}var m5=h.ZU.Object({type:h.ZU.Literal("git"),data:h.ZU.Optional(h.ZU.Object({mode:lU.$}))}),m8={Content:function(e){var n,t=e.options,r=t.isActive,i=t.performPaneOperation,o=e.pane;return(0,f.Y)(mX,{isActive:r,performPaneOperation:i,mode:null===(n=o.data)||void 0===n?void 0:n.mode})},Icon:function(e){var n=e.size;return(0,f.Y)(n$.Vx.Provider,{value:{color:ez.LU.greenStrongest,size:n},children:(0,f.Y)(dM.A,{})})},getTitle:function(){return"Git"},description:"Version control for your App",category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(m5,e)}};function m3(){var e=(0,nM.iO)();return(0,w.useCallback)(function(n,t,r){e({origin:"History2: useHistoryBSOD",error:n,tags:{source:"ws-history2",type:t},extras:(0,K._)({state:ec.pX.current()},r)})},[e])}function m6(e){(0,t7.u4)(t4.AZ.HISTORY_USED,{action:e,which:"ws"})}function m7(e){var n=e.onClose;return(0,f.Y)(eg.$n,{text:"Cancel",onClick:function(){m6("historyExplicitlyClosed"),n()}})}function m9(){var e,n="/replEnvironmentMobile"===(0,iX.useRouter)().pathname,t=(0,ec.N_)(),r=(0,ec.DH)(),i=!t||0===t.count;return(0,f.Y)(V.d,{isDisabled:i,onChange:function(e){return r({comparing:e})},isSelected:null!==(e=null==t?void 0:t.comparing)&&void 0!==e&&e,children:n?"Compare":"Compare Latest"})}function ge(){var e=(0,ec.N_)();if(!e||0===e.count)return null;var n=e.changes[e.version].timestamp;return(0,f.Y)(ed.Dc,{textColor:"dimmer",dateFormat:"switch",date:n})}function gn(e){var n=e.reversed,t=void 0!==n&&n,r=e.hideName,i=void 0!==r&&r,o=e.color,a=void 0===o?"default":o,l=(0,ec.N_)(),s=(0,w.useMemo)(function(){return[t?B.wp.rowReverseWithGap(4):B.wp.rowWithGap(4),B.wp.align.center]},[t]);if(!l)return null;if(0===l.count)return(0,f.FD)(F.S,{css:s,children:[(0,f.Y)(rD.A,{size:24}),(0,f.Y)(I.EY,{color:a,multiline:!1,children:"Server Authored"})]});var c=l.changes[l.version];if(!l.users)return(0,f.FD)(F.S,{css:s,children:[(0,f.Y)(po.e,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,f.Y)(I.EY,{color:a,multiline:!1,children:"Unknown"})]});var u=l.users[c.userId];return u?(0,f.FD)(F.S,{css:s,children:[(0,f.Y)(po.e,{size:24,src:u.image,username:u.username}),i?null:(0,f.Y)(I.EY,{color:a,multiline:!1,children:u.username})]}):c.timestamp>16546464e5?(0,f.FD)(F.S,{css:s,children:[(0,f.Y)(rD.A,{size:24}),i?null:(0,f.Y)(I.EY,{color:a,multiline:!1,children:"Server Authored"})]}):(0,f.FD)(F.S,{css:s,children:[(0,f.Y)(po.e,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,f.Y)(I.EY,{color:a,multiline:!1,children:"Unknown"})]})}var gt=t(71672);function gr(){var e=(0,$._)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return gr=function(){return e},e}function gi(){var e=(0,$._)(["\n  query WorkspaceHistory2CurrentUserDate {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return gi=function(){return e},e}var go=(0,J.J1)(gr()),ga=(gi(),t(51939)),gl=t(89264),gs=function(e){function n(e){var t;return(0,u0._)(this,n),(t=(0,uX._)(this,n,[e])).name="UserError",t}return(0,u1._)(n,e),n}((0,gl._)(Error));function gc(e,n,t){return new Promise(function(r,i){try{var o,a=e.watchTextFile(n,{onReady:(o=(0,y._)(function(e){var n,o;return(0,b.YH)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,t(e)];case 1:return n=l.sent(),r(n),[3,3];case 2:return o=l.sent(),i(o),[3,3];case 3:return a(),[2]}})}),function(e){return o.apply(this,arguments)})})}catch(e){i(e)}})}var gu=ga.Ry;function gd(){return(gd=(0,y._)(function(e,n){var t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v,w,y;return(0,b.YH)(this,function(b){switch(b.label){case 0:t=new Set,r=!0,i=!1,o=void 0;try{for(a=n[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)(s=l.value).userId&&t.add(s.userId)}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(0===t.size)return[2,{}];if(t.size>=gu)return[2,"too_many_users"];return[4,e.query({query:go,variables:{ids:Array.from(t)}})];case 1:if(u=(c=b.sent()).data,d=c.error)throw d;p=u.currentUser?[u.currentUser].concat((0,q._)(u.usersByIds)):u.usersByIds,f={},h=!0,m=!1,g=void 0;try{for(v=p[Symbol.iterator]();!(h=(w=v.next()).done);h=!0)f[(y=w.value).id]={id:y.id,username:y.username,image:y.image}}catch(e){m=!0,g=e}finally{try{h||null==v.return||v.return()}finally{if(m)throw g}}return[2,f]}})})).apply(this,arguments)}function gp(){return(gp=(0,y._)(function(e,n,t){var r,i,o;return(0,b.YH)(this,function(a){switch(a.label){case 0:var l;return[4,gc(e,t,(l=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){return(n=e.fetchChanges,0===(t=e.version))?[2,{isDisposed:!1,result:[]}]:[2,n(1,t,"")]})}),function(e){return l.apply(this,arguments)}))];case 1:if((r=a.sent()).isDisposed)return[2,{data:null,handledError:"File deleted or removed."}];return[4,function(e,n){return gd.apply(this,arguments)}(n,i=r.result)];case 2:if("too_many_users"===(o=a.sent()))return[2,{data:{changes:i,users:null},handledError:null}];return[2,{data:{changes:i,users:o},handledError:null}]}})})).apply(this,arguments)}var gf=t(87208),gh=t(35809),gm=(0,nD.AH)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function gg(e){var n=e.onCloseHistory,t=(0,nT.A)().showError,r=(0,v._)((0,w.useState)(!1),2),i=r[0],o=r[1],a=(0,v._)((0,w.useState)(!1),2),l=a[0],s=a[1],c=(0,A.A)().fs,u=(0,ec.N_)(),d=m3(),p=(0,i$._P)({controlName:"flag-draft-buffers"}),h=(0,gf.UI)(),m="Reset",g=!0;function S(){return(S=(0,y._)(function(){var e,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(!u||!c||l)return[2];i.label=1;case 1:var a,f;return i.trys.push([1,3,4,5]),s(!0),m6("versionRestored"),e=u.filePath,[4,(a=u.version+1,gc(c,e,(f=(0,y._)(function(n){var t,r,i,o,l,s,u,d;return(0,b.YH)(this,function(f){switch(f.label){case 0:if(t=n.fetchChanges,r=n.writeChange,a>(i=n.version))throw Error("Cannot reset to a version that does not exist");if(a===i)return[2];o=null,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,t(1,i,"")];case 2:if((l=f.sent()).isDisposed)throw new gs("File deleted or removed.");return o=l.result,[3,4];case 3:throw f.sent(),new gs("Something went wrong while resetting the file. It is possible that a bad connection is to blame. Please try again.");case 4:u=(s=(0,tu._)(o.slice(a,o.length).reverse()))[0],d=s.slice(1).reduce(function(e,n){return e.compose(n.invertedChanges)},u.invertedChanges);try{r(d)}catch(e){throw rV.Cp(e),new gs("Something went wrong while resetting the file. Maybe the file changed while you were restoring it? Please try again.")}if(!(!p||h))return[3,6];return[4,c.flush(new Set([e]))];case 5:f.sent(),f.label=6;case 6:return[2]}})}),function(e){return f.apply(this,arguments)})))];case 2:return i.sent(),n(),[3,5];case 3:if((r=i.sent())instanceof gs)return t(r.message),[2];return d(r,"restore"),[3,5];case 4:return o(!1),s(!1),[7];case 5:return[2]}})})).apply(this,arguments)}return u?0===u.count?(m="No history",g=!0):l||i?(m="Resetting...",g=!0):u.playing?(m="Playing...",g=!0):u.version===u.count-1?(m="Viewing latest",g=!0):(m="Reset editor to here",g=!1):(m="Loading...",g=!0),(0,f.FD)(f.FK,{children:[(0,f.Y)(eg.$n,{text:m,disabled:g,onClick:function(){return o(!0)},colorway:"primary",iconLeft:(0,f.Y)(gh.A,{})}),u&&0!==u.count&&(0,f.Y)(lC.a,{isOpen:i,onRequestClose:function(){l||o(!1)},children:(0,f.FD)(F.S,{gap:24,children:[(0,f.Y)(I.Y9,{variant:"headerDefault",level:2,children:"Reset file version"}),(0,f.Y)(eo.ui,{elevated:!0,css:[B.wp.px(16),B.wp.py(12),B.wp.borderRadius(8)],children:(0,f.FD)("dl",{css:gm,children:[(0,f.Y)("dt",{children:"File"}),(0,f.Y)("dd",{children:u.filePath}),(0,f.Y)("dt",{children:"Version"}),(0,f.FD)("dd",{children:[u.version+1,(0,f.FD)("span",{css:[B.wp.color.foregroundDimmest],children:[(0,f.Y)("span",{css:B.wp.mx(8),children:"/"}),u.count]})]}),(0,f.Y)("dt",{children:"Date"}),(0,f.Y)("dd",{children:(0,f.Y)(ed.Dc,{date:u.changes[u.version].timestamp,dateFormat:"absolute"})}),(0,f.Y)("dt",{children:"Author"}),(0,f.Y)("dd",{children:(0,f.Y)(gn,{})})]})}),(0,f.Y)(tZ.N,{icon:(0,f.Y)(rd.A,{}),colorway:"positive",text:"Resetting is non-destructive. The reset content will become a new version at the end of history. You can always go back to the version you just had."}),(0,f.FD)(F.S,{row:!0,gap:8,justify:"end",children:[(0,f.Y)(eg.$n,{text:"Cancel",disabled:l,onClick:function(){return o(!1)}}),(0,f.Y)(eg.$n,{text:l?"Resetting Version...":"Reset Version",disabled:l,colorway:"primary",onClick:function(){return S.apply(this,arguments)},iconLeft:(0,f.Y)(gh.A,{})})]})]})})]})}let gv=(0,w.forwardRef)(function(e,n){var t=(0,ec.N_)(),r=(0,w.useRef)(null);(0,w.useImperativeHandle)(n,function(){return r.current}),t&&r.current&&(r.current.setAttribute("aria-valuemin","1"),r.current.setAttribute("aria-valuemax",String(t.count)),r.current.setAttribute("aria-valuenow",String(t.version+1)));var i=(0,w.useMemo)(function(){return(0,f.Y)("div",{ref:r,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:ez.LU.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat(ez.LU.foregroundDefault," inset")}}})},[]);return t&&t.count>1?i:null}),gw=(0,w.forwardRef)(function(e,n){var t=(0,ec.N_)(),r=(0,w.useMemo)(function(){return(0,f.FD)(f.FK,{children:[(0,f.Y)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,f.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:ez.LU.backgroundHighest,borderRadius:"2px"},children:(0,f.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:ez.LU.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})},[n]),i=(0,w.useMemo)(function(){return(0,f.Y)("div",{ref:n,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,f.Y)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:ez.LU.backgroundHighest,borderRadius:"2px"}})})},[n]);return t&&t.count>1?r:i});var gy=["ArrowLeft","ArrowRight","Home","End"];function gb(){var e=(0,ec.N_)(),n=(0,ec.DH)(),t=(0,v._)((0,w.useState)(!1),2),r=t[0],i=t[1],o=(0,w.useRef)(null),a=(0,w.useRef)(null),l=(0,w.useRef)(null),s=function(e){(0,uw.U)(o,"--scrubber-transition-time",e)},c=function(e){(0,uw.U)(o,"--scrubber-progress",e.toString())};return e&&!r&&(c(e.version/(e.count-1)),e.playing?s("50ms"):s("100ms")),(0,w.useEffect)(function(){if(e&&a.current&&l.current&&!r){var t=a.current,o=l.current,u=function(r){if(0===r.button){i(!0),o.focus();var a=t.getBoundingClientRect(),l=o.getBoundingClientRect(),u=a.width,d=l.width,p=r.target===t?d/2:r.clientX-l.left,f=null,h=function(t){var r=Math.max(0,Math.min(1,(t-a.left-p)/(u-d)));r!==f&&(f=r,c(r),n({version:Math.round(r*(e.count-1)),playing:!1}))};h(r.clientX);var m=function(e){s("0ms"),h(e.clientX),e.preventDefault(),e.stopPropagation()},g=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),s("100ms"),i(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",g),window.addEventListener("pointercancel",g),r.preventDefault(),r.stopPropagation()}};return t.addEventListener("pointerdown",u),o.addEventListener("pointerdown",u),function(){t.removeEventListener("pointerdown",u),o.removeEventListener("pointerdown",u)}}},[e,n,r]),(0,w.useEffect)(function(){if(e&&l.current&&!r){var t=l.current,i=function(t){if(e&&gy.includes(t.key)){var r=t.shiftKey?10:1,i=e.version,o=e.count-1,a=Math.max(0,i-r),l=Math.min(o,i+r),s=null;switch(t.key){case"ArrowLeft":s=a;break;case"ArrowRight":s=l;break;case"Home":s=0;break;case"End":s=o}null!==s&&(n({version:s,playing:!1}),t.preventDefault(),t.stopPropagation())}};return t.addEventListener("keydown",i),function(){t.removeEventListener("keydown",i)}}},[e,n,r]),(0,w.useMemo)(function(){return(0,f.FD)(F.S,{innerRef:o,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,f.Y)(gw,{ref:a}),(0,f.Y)(gv,{ref:l})]})},[])}function gS(){var e=(0,ec.N_)(),n=0,t=0;e&&0!==e.count&&(n=e.version+1,t=e.count);var r=e?"default":"dimmer";return(0,f.FD)(F.S,{row:!0,gap:4,justify:"space-between",children:[(0,f.Y)(I.EY,{css:{minWidth:"2ch",textAlign:"right"},color:r,multiline:!1,children:n}),(0,f.Y)(I.EY,{css:{width:"1ch",textAlign:"center"},color:"dimmer",multiline:!1,children:"/"}),(0,f.Y)(I.EY,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",multiline:!1,children:t})]})}function gY(e){if(e<0)throw Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}var gA=t(92647);function gC(){var e,n,t,r,i=(0,ec.N_)(),o=(0,ec.DH)(),a=(null!==(n=null==i?void 0:null===(e=i.changes)||void 0===e?void 0:e.length)&&void 0!==n?n:1)-1,l=null!==(t=null==i?void 0:i.version)&&void 0!==t?t:0,s=null!==(r=null==i?void 0:i.playing)&&void 0!==r&&r,c=!i||0===i.count,u=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:gY,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,w.useCallback)(function(){n(1)},[n]),s=(0,w.useCallback)(function(){if(e+1>t){a(!1);return}n(e+1)},[n,e,t]);return(0,w.useEffect)(function(){if(o){var e=setTimeout(function(){s()},r(t));return function(){return clearTimeout(e)}}},[o,s,r,t]),{isPlaying:o,start:function(){a(!0)},stop:function(){a(!1)},reset:l}}(l,function(e){return o({version:e})},a),d=u.isPlaying,p=u.start,h=u.stop;(0,w.useEffect)(function(){d&&!s?h():!d&&s&&p()},[s,d,p,h]);var m="Loading...";return i&&(d?m="Pause":i.version===i.count-1?m="Play file history from beginning":0===i.version?m="Play file history":i.version>0&&(m="Play file history from here")),(0,f.Y)(ev.K0,{alt:m,size:24,disabled:c,onClick:function(){l===a?o({version:0,playing:!0}):o({playing:!s})},children:d?(0,f.Y)(gA.A,{}):(0,f.Y)(o8.A,{})})}var gx=t(1018);function gk(){return(0,f.FD)(F.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(gC,{}),(0,f.Y)(g_,{}),(0,f.Y)(gS,{}),(0,f.Y)(gD,{})]})}function g_(){var e=(0,ec.N_)(),n=(0,ec.DH)(),t=!e||0===e.version||0===e.count;return(0,f.Y)(ev.K0,{alt:"Move backwards one version",size:24,disabled:t,onClick:function(){e&&e.version>0&&n({version:e.version-1})},children:(0,f.Y)(sZ.A,{})})}function gD(){var e=(0,ec.N_)(),n=(0,ec.DH)(),t=!e||e.version===e.count-1||0===e.count;return(0,f.Y)(ev.K0,{alt:"Move forwards one version",size:24,disabled:t,onClick:function(){e&&e.version<e.count-1&&n({version:e.version+1})},children:(0,f.Y)(gx.A,{})})}function gE(e){var n,t,r,i,o,a=e.filePath,l=e.onCloseHistory,s="/replEnvironmentMobile"===(0,iX.useRouter)().pathname,c=s?B.wp.borderRadius(0):B.wp.borderRadius(0,0,8,8),u=(0,ec.N_)(),d=(0,ec.DH)(),p=(0,ec.s7)(),h=m3(),m=(t=(n=(0,v._)((0,w.useState)({data:null,loading:!0,error:null,handledError:null}),2))[0],r=n[1],i=(0,A.A)().fs,o=(0,gt.m)(),(0,w.useEffect)(function(){if(!a){r({data:null,loading:!1,error:null,handledError:null});return}r({data:null,loading:!0,error:null,handledError:null});var e=!1;return(function(e,n,t){return gp.apply(this,arguments)})(i,o,a).then(function(n){var t=n.data,i=n.handledError;if(!e){if(i){r({data:null,loading:!1,error:null,handledError:i});return}r({data:t,loading:!1,error:null,handledError:null})}}).catch(function(n){e||(n instanceof Error||(n=Error(n)),r({data:null,loading:!1,error:n,handledError:null}))}),function(){e=!0}},[a,i,o]),t),g=m.data,y=m.loading,b=m.error;return(0,w.useEffect)(function(){if(b){h(b,"history2-index",{filePath:a});return}if(g&&!y)return d({filePath:a,changes:g.changes,users:g.users}),m6("historyLoaded"),function(){p()}},[a,g,y,b,h,d,p]),(0,f.FD)(F.S,{css:[B.wp.p(8),B.wp.zIndex(3),B.wp.overflow("hidden"),c,B.wp.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat(ez.LU.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],gap:8,children:[(0,f.FD)(eo.ui,{css:[B.wp.position.relative,B.wp.colWithGap(4),B.wp.px(12),B.wp.pt(8),B.wp.pb(8),B.wp.align.center,B.wp.borderRadius(8),B.wp.overflow("hidden")],elevated:!0,children:[(0,f.Y)(gb,{}),(0,f.FD)(F.S,{css:[B.wp.display.flex,B.wp.flex.row,B.wp.align.center,B.wp.justify.spaceBetween,B.wp.width("100%")],children:[(0,f.Y)(gk,{}),u&&u.count>0?(0,f.FD)(F.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(ge,{}),y||s?null:(0,f.Y)(I.EY,{color:"dimmer",multiline:!1,children:"•"}),(0,f.Y)(gn,{color:"dimmer",hideName:s,reversed:!0})]}):null]})]}),(0,f.FD)(F.S,{css:[B.wp.display.flex,B.wp.flex.row],children:[(0,f.Y)(gR,{justify:"flex-start",children:(0,f.Y)(m9,{})}),(0,f.FD)(gR,{justify:"flex-end",children:[(0,f.Y)(m7,{onClose:l}),(0,f.Y)(gg,{onCloseHistory:l})]})]})]})}function gR(e){var n=e.children,t=e.justify;return(0,f.Y)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:t,columnGap:ez.LU.space8,minWidth:0},children:n})}var gI=t(44725),gF=t(95866),gT=t(61116),gP=(0,t(32898).D)();function gL(e){if(!(e instanceof ne.ZX))return{compareTo:e.field(gP.state,!1),changed:!1};var n=e.state.field(gP.state,!1),t=e.startState.field(gP.state,!1)!==n;return{compareTo:n,changed:t}}function gU(e,n){e.state.field(gP.state,!1)!==n&&e.dispatch({effects:gP.effect.of(n)})}var gN=ne.sU.define({create:function(){return null},update:function(e,n){var t=gL(n),r=t.compareTo,i=t.changed;if(!r)return null;if(!n.docChanged&&!i)return e;var o=n.state.doc.toString();return new gT.PF(o,r)}}),gO=null!==(d=globalThis.requestIdleCallback)&&void 0!==d?d:globalThis.requestAnimationFrame,gM=null!==(p=globalThis.cancelIdleCallback)&&void 0!==p?p:globalThis.cancelAnimationFrame,gB=nn.NZ.line({class:"cm-diff-deleted"}),gH=function(e){function n(e,t){var r;return(0,u0._)(this,n),(r=(0,uX._)(this,n)).insertion=e,r.highlight=t,r}(0,u1._)(n,e);var t=n.prototype;return t.destroy=function(){this.pendingHighlight&&gM(this.pendingHighlight)},t.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e},t.eq=function(e){return!e.pendingHighlight&&this.insertion===e.insertion},t.updateDOM=function(e){var n=this;return this.pendingHighlight&&(gM(this.pendingHighlight),this.pendingHighlight=null),this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",this.highlight&&this.insertion.length&&(this.pendingHighlight=gO(function(){if(n.highlight){n.pendingHighlight=null;try{var t=n.highlight();e.innerHTML="",e.append(t)}catch(e){}}})),!0},n}(nn.xO),gz=ne.sU.define({create:function(){return nn.NZ.none},update:function(e,n){var t=n.state.field(gN,!1);if(!t)return nn.NZ.none;var r=gL(n).changed;if(!n.docChanged&&!r)return e.map(n.changes);var i=[],o=function(e,n){i.push({from:e,to:e,value:n})},a=t.startInsertions();if(a){var l=!0,s=!1,c=void 0;try{for(var u,d=a[Symbol.iterator]();!(l=(u=d.next()).done);l=!0)!function(){var e=u.value,t=new gH(e.content,function(){return gW(n.state,e.content)});o(0,nn.NZ.widget({widget:t,side:-1,block:!0}))}()}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}}var p=!0,f=!1,h=void 0;try{for(var m,g=t.lines()[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=m.value;if(v.isDeleted&&o(v.from,gB),v.insertions){var w=!0,y=!1,b=void 0;try{for(var S,Y=v.insertions[Symbol.iterator]();!(w=(S=Y.next()).done);w=!0)!function(){var e=S.value,t=new gH(e.content,function(){return gW(n.state,e.content)});o(v.to,nn.NZ.widget({widget:t,side:1,block:!0}))}()}catch(e){y=!0,b=e}finally{try{w||null==Y.return||Y.return()}finally{if(y)throw b}}}}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}return nn.NZ.set(i,!0)},provide:function(e){return nn.Lz.decorations.from(e)}});function gW(e,n){var t,r=document.createDocumentFragment(),i=null===(t=e.facet(gI.BH))||void 0===t?void 0:t.parser;if(!i){var o=document.createElement("span");return o.textContent=n,r.append(o),r}var a=i.parse(n),l=0;if((0,gF.DM)(a,{style:function(n){return(0,gI.GY)(e,n)}},function(e,t,i){if(e>l){var o=document.createElement("span");o.textContent=n.slice(l,e),r.append(o)}var a=document.createElement("span");a.className=i,a.textContent=n.slice(e,t),r.append(a),l=t}),l<n.length){var s=document.createElement("span");s.textContent=n.slice(l),r.append(s)}return r}var gG=function(e){function n(e){var t;return(0,u0._)(this,n),(t=(0,uX._)(this,n)).line=e,t}(0,u1._)(n,e);var t=n.prototype;return t.eq=function(e){return this.line===e.line},t.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e},n}(nn.wJ),gV=function(e){function n(e,t){var r;return(0,u0._)(this,n),(r=(0,uX._)(this,n)).elementClass="cm-diff-gutter-block",r.lines=e,t&&(r.preceding=t),r}(0,u1._)(n,e);var t=n.prototype;return t.eq=function(e){var n,t,r,i;if((null===(n=this.lines)||void 0===n?void 0:n.length)!==(null==e?void 0:null===(t=e.lines)||void 0===t?void 0:t.length)||(null===(r=this.preceding)||void 0===r?void 0:r.length)!==(null==e?void 0:null===(i=e.preceding)||void 0===i?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var o=0;o<this.preceding.length;o++){var a=this.preceding[o],l=e.preceding[o];if(a.height!==l.height||a.left!==l.left||a.right!==l.right)return!1}if(this.lines&&e.lines)for(var s=0;s<this.lines.length;s++){var c=this.lines[s],u=e.lines[s];if(c.height!==u.height||c.left!==u.left||c.right!==u.right)return!1}return!0},t.toDOM=function(){var e=this,n=document.createElement("div");if(this.preceding){var t=this.preceding.slice().reverse(),r=0,i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;r+=c.height;var u=this.piece(c);u.style.position="absolute",u.style.top="-".concat(r,"px"),n.prepend(u)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}var d=this.lines.map(function(n){return e.piece(n)});return n.append.apply(n,(0,q._)(d)),n},t.piece=function(e){var n=e.height,t=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==t&&(i.innerText=t.toString());var o=document.createElement("span");o.className="cm-diff-gutter-part",null!==r&&(o.innerText=r.toString());var a=document.createElement("div");return a.className="cm-diff-gutter-element",a.style.height="".concat(n,"px"),a.append(i,o),(null===t||null===r)&&(null===r&&a.classList.add("cm-diff-gutter-deleted"),null===t&&a.classList.add("cm-diff-gutter-inserted")),a},n}(nn.wJ),gj=(0,nn.cU)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var n=e.viewportLineBlocks,t=[],r=gL(e.state).compareTo,i=e.state.field(gN,!1),o=function(e,n){t.push({from:e,to:e,value:n})};if(!r||!i){var a=!0,l=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,p=e.state.doc.lineAt(d.from).number;if(d.type===nn._B.Text)o(d.from,new gG(p));else if(Array.isArray(d.type)){var f=!0,h=!1,m=void 0;try{for(var g,v=d.type[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var w=g.value;if(w.type===nn._B.Text){o(w.from,new gG(p));break}}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return ne.om.of(t,!0)}var y=!0,b=!1,S=void 0;try{for(var Y,A=n[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0){var C=Y.value,x=[],k=e.state.doc.lineAt(C.from).number,_=i.line(k);if(_){var D=e.defaultLineHeight,E=_.offset,R=_.isDeleted,I=_.insertions,F=1===k?i.startInsertions():null,T=F?F.length:0,P=F?[]:null;if(!(Array.isArray(C.type)&&C.type.length>=T+(null!==(O=null==I?void 0:I.length)&&void 0!==O?O:0)+1)){if(F&&P){var L=!0,U=!1,N=void 0;try{for(var O,M,B=F[Symbol.iterator]();!(L=(M=B.next()).done);L=!0){var H=M.value;P.push({height:D,left:null,right:H.number})}}catch(e){U=!0,N=e}finally{try{L||null==B.return||B.return()}finally{if(U)throw N}}}if(x.push({height:C.height,left:k,right:R?null:k+E}),I){var z=!0,W=!1,G=void 0;try{for(var V,j=I[Symbol.iterator]();!(z=(V=j.next()).done);z=!0){var Z=V.value;x.push({height:D,left:null,right:Z.number})}}catch(e){W=!0,G=e}finally{try{z||null==j.return||j.return()}finally{if(W)throw G}}}o(C.from,new gV(x,P));continue}for(var q=0;q<C.type.length;q++){var K=C.type[q];if((null==K?void 0:K.type)===nn._B.Text){if(F&&P)for(var $=0;$<F.length;$++){var J,Q=F[$],X=C.type[q-$-1];P.push({height:null!==(J=null==X?void 0:X.height)&&void 0!==J?J:D,left:null,right:Q.number})}if(x.push({height:K.height,left:k,right:R?null:k+E}),I)for(var ee=0;ee<I.length;ee++){var en,et=I[ee],er=C.type[q+ee+1];x.push({height:null!==(en=null==er?void 0:er.height)&&void 0!==en?en:D,left:null,right:et.number})}break}}o(C.from,new gV(x,P))}}}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}return ne.om.of(t,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var n=!0,t=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(gL(a).changed)return!0}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!1},initialSpacer:function(e){return new gG(e.state.doc.lines)},updateSpacer:function(e,n){var t=n.state.doc.lines;return gL(n.state).compareTo?new gV([{height:0,left:t,right:t}]):new gG(t)}}),gZ="#0053A644",gq="#c93c3733",gK=[nn.Lz.theme({".cm-diff-inserted":{backgroundColor:gZ},".cm-diff-deleted":{backgroundColor:gq},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:gZ,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:gq,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),gP.state,gN,gz,gj,(0,gI.Lv)({openText:"▼",closedText:"▶︎"})],g$=t(48122),gJ=function(e){return e[e.Insertion=0]="Insertion",e[e.Deletion=1]="Deletion",e}({}),gQ=function(){function e(n){(0,u0._)(this,e),this.map=new Map,this.duration=n}var n=e.prototype;return n.set=function(e,n,t,r,i){var o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),o.set(n,{from:e,to:n,time:t,type:r,cursor:i})},n.get=function(e,n){var t=this.map.get(e);if(t)return t.get(n)},n.update=function(n){var t=Date.now(),r=new e(this.duration),i=!0,o=!1,a=void 0;try{for(var l,s=this[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;if(!(t-c.time>this.duration)){var u=n.changes.mapPos(c.from,-1,ne.iR.TrackDel),d=n.changes.mapPos(c.to,-1,ne.iR.TrackDel);if(null!==u&&null!==d){var p=c.cursor;n.docChanged&&(p=!1),r.set(u,d,c.time,c.type,p)}}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return n.changes.iterChangedRanges(function(e,n,i,o){r.set(i,o,t,+(i===o),!0)},!0),r},n.cursors=function(){var e,n,t,r,i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:e=!0,n=!1,t=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),r=this[Symbol.iterator](),l.label=2;case 2:if(e=(i=r.next()).done)return[3,5];if(!(o=i.value).cursor)return[3,4];return[4,{type:o.type,pos:o.to}];case 3:l.sent(),l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),n=!0,t=a,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 8:return[2]}})},n[Symbol.iterator]=function(){var e=[],n=!0,t=!1,r=void 0;try{for(var i,o=this.map.values()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=!0,s=!1,c=void 0;try{for(var u,d=a.values()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value;e.push(p)}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e[Symbol.iterator]()},e}(),gX=function(){function e(n){var t=this;(0,u0._)(this,e),this.view=n,this.overlay=document.createElement("div"),this.overlay.className="cm-overlay-generic",this.overlay.style.pointerEvents="none",this.overlay.style.contain="size style",this.overlay.setAttribute("aria-hidden","true"),this.view.scrollDOM.appendChild(this.overlay),this.elements=new Map,this.measureRequest={key:this,read:function(){var e=[],n=t.view.scrollDOM.getBoundingClientRect(),r=t.view.scrollDOM.scrollTop,i=t.view.scrollDOM.scrollLeft,o=!0,a=!1,l=void 0;try{for(var s,c=t.elements.values()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value,d=u.dom,p=u.pos,f=u.offsetX,h=u.offsetY,m=t.view.coordsAtPos(p),g=t.view.lineBlockAt(p);if(!m){e.push({dom:d,x:null,y:null});continue}var v=g.top-r+n.top+t.view.documentPadding.top,w=Math.round((m.top-v)/t.view.defaultLineHeight)*t.view.defaultLineHeight+v,y=i+m.left-n.left+f,b=r+w-n.top+h;e.push({dom:d,x:y,y:b})}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return e},write:function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0)!function(){var e=i.value,n=e.dom,t=e.x,r=e.y;if(null===t||null===r)return n.style.visibility="hidden",n.style.transition="none";n.style.visibility="",n.style.transform="translate(".concat(t,"px, ").concat(r,"px)"),n.style.transition.startsWith("none")&&requestAnimationFrame(function(){n.style.transition=""})}()}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}}}var n=e.prototype;return n.destroy=function(){this.view.scrollDOM.removeChild(this.overlay)},n.map=function(e){if(e.geometryChanged||e.viewportChanged){if(e.docChanged){var n=Array.from(this.elements.values()),t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,s=e.changes.mapPos(l.pos,-1,ne.iR.TrackDel);if(!s){this.removeElement(l.dom);continue}l.pos=s}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}}this.view.requestMeasure(this.measureRequest)}},n.addElement=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.elements.has(e)){var i={dom:e,pos:n,offsetX:t,offsetY:r};return this.elements.set(e,i),this.overlay.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.willChange="transform",e.style.transition="none",this.view.requestMeasure(this.measureRequest),i}},n.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),e.parentNode===this.overlay&&this.overlay.removeChild(e))},n.updateElement=function(e,n){var t=n.pos,r=n.offsetX,i=n.offsetY,o=this.elements.get(e);o&&(void 0!==t&&(o.pos=t),void 0!==r&&(o.offsetX=r),void 0!==i&&(o.offsetY=i),this.view.requestMeasure(this.measureRequest))},n.clear=function(){this.elements.clear(),this.overlay.innerHTML=""},e}(),g0="cm-flash-insertion",g1="cm-flash-deletion",g2="cm-flash-element",g4=nn.Lz.theme((0,g._)({},".".concat(g0,", .").concat(g1),{display:"inline-block"})),g5=function(e){function n(){return(0,u0._)(this,n),(0,uX._)(this,n,arguments)}(0,u1._)(n,e);var t=n.prototype;return t.isNested=function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if(e instanceof n&&e.type===this.type)return!0;e=e.parentElement}return!1},t.stop=function(){var e,n;null===(n=this.animation)||void 0===n||null===(e=n.cancel)||void 0===e||e.call(n)},t.play=function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var n=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(n>1e3)){var t=this.type===gJ.Insertion?"rgba(100, 255, 0, 0.3)":"rgba(255, 32, 32, 0.25)";this.animate&&(this.animation=this.animate({backgroundColor:e?[t,t,"transparent"]:["transparent",t,"transparent"],offset:[0,.05,1]},{id:"cm-flash-anim",duration:1e3,easing:"ease-in-out",delay:-n}))}}},t.connectedCallback=function(){this.play()},t.attributeChangedCallback=function(e,n,t){"data-time"===e&&t&&this.play()},(0,g$._)(n,[{key:"type",get:function(){return this.classList.contains(g0)?gJ.Insertion:gJ.Deletion}},{key:"isPlaying",get:function(){var e;return(null===(e=this.animation)||void 0===e?void 0:e.playState)==="running"}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),n}((0,gl._)(HTMLElement));customElements.get(g2)||customElements.define(g2,g5);var g8=function(){function e(n){(0,u0._)(this,e),this.view=n,this.prevFlashes=new gQ(1e3),this.decorations=nn.NZ.set([]),this.hasRenderedOnce=!1,this.overlay=new gX(n)}var n=e.prototype;return n.destroy=function(){this.overlay.destroy()},n.update=function(e){if(!this.hasRenderedOnce){e.docChanged&&(this.hasRenderedOnce=!0);return}var n=this.prevFlashes.update(e),t=[],r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;switch(s.type){case gJ.Insertion:t.push({from:s.from,to:s.to,value:(c=s.time,nn.NZ.mark({class:g0,tagName:g2,attributes:{"data-time":c.toString()}}))});break;case gJ.Deletion:var c,u,d=e.state.wordAt(s.from);d&&t.push({from:d.from,to:s.to,value:(u=s.time,nn.NZ.mark({class:g1,tagName:g2,attributes:{"data-time":u.toString()}}))})}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}this.overlay.clear();var p=this.view.defaultLineHeight.toString()+"px",f=!0,h=!1,m=void 0;try{for(var g,v=n.cursors()[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var w=g.value,y=w.type,b=w.pos,S=function(e,n){var t=e===gJ.Insertion?"rgba(0, 100, 255, 1)":"rgba(255, 32, 32, 1)",r=document.createElement("div");return r.style.width="3px",r.style.height=n,r.style.borderRadius="1px",r.style.backgroundColor=t,r.animate&&r.animate({opacity:[1,0]},{duration:500,delay:400,fill:"forwards"}),r}(y,p);this.overlay.addElement(S,b)}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}this.prevFlashes=n,this.decorations=nn.NZ.set(t,!0)},e}(),g3=nn.Z9.fromClass(g8,{decorations:function(e){return e.decorations}}),g6=ne.Nb.lowest([g4,g3]),g7=t(72618),g9=function(){function e(n){(0,u0._)(this,e),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var t=!0,r=!1,i=void 0;try{for(var o,a,l=n[Symbol.iterator]();!(t=(a=l.next()).done);t=!0)o=this,function(){var e=a.value,n=e.changes,t=e.invertedChanges,r=null,i=!1;n.iterChangedRanges(function(e,n,t,o){i||(r||(r=o),t===o||(i=!0))}),o.forward.push(n),o.inverted.push(t),o.locations.push(r)}()}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}}var n=e.prototype;return n.slice=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(n>this.length||t>this.length||n<0||t<0)throw Error("Invalid version range");if(n===t){if(0===this.length)return[ne.VR.empty(0),null];var r=this.forward[n].newLength;return[ne.VR.empty(r),null]}var i=n<t?ve(this.forward.slice(n,t)):ve(this.inverted.slice(t,n).reverse()),o=n<t?n:t-1,a=null!==(e=this.locations[o])&&void 0!==e?e:null;return null!==a&&a>i.newLength&&(a=i.newLength),[i,a]},n.get=function(e){if(e>this.length||e<0)throw Error("Invalid version");return this.changes[e]},n.documentFor=function(e){if(e>this.length||e<0)throw Error("Invalid version");if(0===this.length)return"";var n=(0,v._)(this.slice(0,e),1)[0],t=ne.EY.of([""]);return n.apply(t).sliceString(0)},(0,g$._)(e,[{key:"length",get:function(){return this.forward.length}}]),e}();function ve(e){if(0===e.length)return ne.VR.empty(0);if(1===e.length)return e[0];var n=(0,tu._)(e),t=n[0],r=n.slice(1),i=t,o=!0,a=!1,l=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;i=i.compose(u)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return i}var vn=t(20160),vt=new nl.k(function(){return(0,nn.BE)()}),vr=[g6,gK];function vi(e){var n,t,r,i=e.filePath,o=(0,ec.N_)(),a=(0,na.A)(),l=a.ref,s=a.view;(0,vn.Hn)(s),(0,ec.sC)(s);var c=m3();n=(0,w.useMemo)(function(){return(null==o?void 0:o.changes)?new g9(o.changes):null},[null==o?void 0:o.changes]),t=(0,w.useMemo)(function(){return n?n.documentFor(n.length):null},[n]),r=(0,w.useRef)({current:-1,next:0,pending:!1}),(0,w.useEffect)(function(){if(s)return function(){r.current.pending=!1,r.current={current:-1,next:0,pending:!1}}},[s]),(0,w.useEffect)(function(){if(s&&o&&n){o.comparing?gU(s,t):gU(s,null);var e=r.current;e.next=o.version,!e.pending&&e.current!==e.next&&(e.pending=!0,requestAnimationFrame(function(){if(!1!==e.pending)e.pending=!1,s&&n&&e.current!==e.next&&(function(e,n,t,r){var i=(0,v._)(n.slice(t+1,r+1),2),o=i[0],a=i[1];if(o.length!==e.state.doc.length){var l=(0,v._)(n.slice(0,r+1),1)[0];if(l.length!==e.state.doc.length)throw Error("Unresolvable mismatch between changes and document");e.dispatch({changes:{from:0,to:e.state.doc.length}}),e.dispatch({changes:l});return}e.dispatch({changes:o,effects:a?nn.Lz.scrollIntoView(a,{yMargin:10}):void 0})}(s,n,e.current,e.next),e.current=e.next)}))}},[s,o,n,t]);var u=vt.use();return(0,f.Y)("div",{css:g7.jy,children:(0,f.Y)("div",{css:g7.mV,children:o&&0===o.count?(0,f.Y)(vo,{}):(0,f.Y)("div",{css:g7.mV,children:(0,f.Y)(ni.Ay,{ref:l,css:g7.$1,filePath:i,extensions:[u,vr],initializing:!o,onException:function(e){c(e,"viewer-codemirror")},readOnly:!0,noHistory:!0,hideGutter:!0})})})})}function vo(){return(0,f.Y)("div",{css:[g7.mV,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,f.Y)("span",{children:"This file has no history."})})}var va=h.ZU.Object({type:h.ZU.Literal("history"),data:h.ZU.Object({path:h.ZU.Union([h.ZU.String(),h.ZU.Null()])})}),vl={Content:function(e){var n=e.pane,t=e.options;return(0,f.Y)(vs,(0,e7._)((0,K._)({},n.data),{performPaneOperation:t.performPaneOperation}))},Icon:function(e){var n=e.size;return(0,f.Y)(gh.A,{size:n})},getTitle:function(e){return e.data.path?"History - ".concat((0,n7.WP)(e.data.path)):"History - no file open"},category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(va,e)}};function vs(e){var n=e.path,t=e.performPaneOperation,r=(0,v._)((0,w.useState)(function(){return(0,eN.y$)()}),1)[0],i=(0,v._)((0,w.useState)(function(){return(0,eN.y$)()}),1)[0],o=(0,n0.KA)({path:n,performPaneOperation:t});(0,n9.Qt)(function(){if(o)return{commands:[{commands:o}]}},[o]);var a=(0,tc.A)(function(){return function(){t({operation:"replace",pane:{type:"codeEditor",data:{path:n}}})}},[n,t]);return n?(0,f.Y)(vn.dz.Provider,{value:r,children:(0,f.Y)(ec.GK.Provider,{value:i,children:(0,f.FD)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,f.Y)(n0.ou,{path:n,performPaneOperation:t}),(0,f.Y)(vi,{filePath:n}),(0,f.Y)(gE,{filePath:n,onCloseHistory:a})]})})}):null}var vc=t(59510),vu=t(69945),vd=t.n(vu),vp=t(14166),vf=t(55343),vh=t(23718),vm=t(4983),vg=t(26969),vv=t(76089),vw=t(6264),vy=t(86417),vb=(0,w.memo)(vm.A),vS=(0,M.x)({bodyRoot:[B.wp.flex.growAndShrink(1),B.wp.overflowY("auto")],contentRoot:[B.wp.height("100%"),B.wp.width("100%"),B.wp.overflow("auto"),B.wp.zIndex(2),B.wp.align.center,B.wp.py(16),B.wp.px(16),B.wp.borderRadius(8),(0,g._)({margin:"0 auto"},"@media only screen and (min-width: ".concat(vy.LO.tabletMin,"px)"),B.wp.px(32))],emptyState:[{"& button":[{color:ez.LU.foregroundDimmer}]}],markdownContainer:[B.wp.width("100%"),{"& .rendered-markdown":[B.wp.flex.column,B.wp.center],"& .rendered-markdown > *":[B.wp.maxWidth(840),B.wp.width("100%")],"& .rendered-markdown > table":B.wp.maxWidth("100%")}],paneRoot:[B.wp.position.relative,B.wp.display.flex,B.wp.flex.column,B.wp.overflowY("hidden"),B.wp.height("100%"),B.wp.width("100%")]});function vY(e){var n,t,r=(0,A.A)().fs,i=(0,v._)((n=(0,w.useRef)(!1),t=(0,w.useRef)(null),[(0,t6.A)(function(){n.current=!0,t.current&&clearTimeout(t.current),t.current=setTimeout(function(){n.current=!1},150)},{type:"throttle",wait:37.5}),n]),2),o=i[0],a=i[1],l=(0,w.useRef)(null),s=(0,vp.j)(),c=e.path,u=e.performPaneOperation,d=(0,w.useCallback)(function(){u({operation:"replace",pane:{type:"codeEditor",data:{path:c}}}),u({operation:"commit"})},[u,c]);(0,n9.Qt)(function(){return{commands:[{commands:[{match:vh.G2,data:{label:"Open in Editor",icon:(0,f.Y)(hT.A,{}),type:"action",run:d}}]}]}},[d]);var p=e.isHidden,h=(0,vw.Af)();(0,w.useEffect)(function(){if(!p){var e=vd()(function(e){(0,vf.A)(e,{behavior:s?"auto":"smooth",scrollMode:"if-needed"})},100),n=vd()(function(n){if(c===(null==n?void 0:n.path)&&n&&!a.current){var t=l.current?function(e,n){var t=e.querySelectorAll(".rendered-markdown [data-sourcepos]");if(!(null==t?void 0:t.length))return null;var r=Array.from(t).reverse(),i=n.line,o=n.column,a=!0,l=!1,s=void 0;try{for(var c,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,p=d.dataset.sourcepos;if(!p)throw Error("Expected data source pos on selected element");var f=(0,v._)(p.split("-"),2),h=f[0],m=f[1],g=(0,v._)(h.split(":").map(Number),2),w=g[0],y=g[1],b=(0,v._)(m.split(":").map(Number),2),S=b[0],Y=b[1];if(i>=w&&o>=y&&(i<S||i===S&&o<=Y))return d}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}}(l.current,n.position):null;t&&e(t)}},200),t=h.subscribe(n);return function(){n.cancel(),e.cancel(),t()}}},[h,p,s,c]);var m=(0,v._)((0,w.useState)(null),2),g=m[0],y=m[1];return(0,w.useEffect)(function(){return y(null),r.watchTextFile(c,{onReady:function(e){y(e.initialContent.toString())},onChange:function(e){y(e.latestContent)},onMoveOrDelete:function(e){e.eventType===eK.dV.Delete&&u({operation:"replace",pane:{type:"commands",data:{autoFocus:!0}}})}})},[c,r,u]),(0,f.FD)(F.S,{css:vS.paneRoot,children:[(0,f.Y)(n0.ou,{path:e.path,performPaneOperation:u,children:g&&g.trim().length?(0,f.Y)(vg.k,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:d,icon:(0,f.Y)(hT.A,{})}):null}),(0,f.Y)(F.S,{css:vS.bodyRoot,children:(0,f.Y)(vA,{ref:o,content:g,fs:r,markdownContainerRef:l,openInEditor:d,path:c})})]})}var vA=(0,w.forwardRef)(function(e,n){var t=e.content,r=e.fs,i=e.markdownContainerRef,o=e.openInEditor,a=e.path;return null===t?(0,f.Y)(vC,{}):(0,f.Y)(F.S,{css:vS.contentRoot,gap:8,innerRef:n,children:(0,f.Y)(F.S,{innerRef:i,css:vS.markdownContainer,children:t.trim().length?(0,f.Y)(vb,{path:a,source:t,fs:r,sourcePos:!0}):(0,f.Y)("div",{className:"rendered-markdown rendered-markdown-empty",children:(0,f.FD)(F.S,{css:vS.emptyState,gap:4,align:"center",innerRef:n,children:[(0,f.Y)(I.EY,{color:"dimmer",children:(0,f.Y)("i",{children:"This file is empty"})}),(0,f.Y)(eg.$n,{text:"Open in Editor",iconLeft:(0,f.Y)(hT.A,{}),onClick:o,variant:"nofill"})]})})})})});function vC(){var e=(0,v._)((0,w.useState)(!1),2),n=e[0],t=e[1];return(0,w.useEffect)(function(){var e=setTimeout(function(){return t(!0)},500);return function(){clearTimeout(e)}},[]),n?(0,f.Y)(vv.A,{}):null}var vx=t(19632),vk=h.ZU.Object({type:h.ZU.Literal("markdown"),data:h.ZU.Object({path:h.ZU.String({minLength:1})})}),v_={Content:function(e){var n=e.pane,t=e.options;return(0,f.Y)(vY,{path:n.data.path,isHidden:!!t.isHidden,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.size;return(0,f.Y)(vx.A,{fill:"currentColor",size:n})},getTitle:function(e){return e.data.path?(0,n7.WP)(e.data.path):"Markdown"},category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(vk,e)}},vD=h.ZU.Object({type:h.ZU.Literal("media"),data:h.ZU.Object({path:h.ZU.String()})}),vE={Content:function(e){var n=e.pane,t=e.options;return(0,f.Y)(vR,{path:n.data.path,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.pane,t=e.size;return(0,f.Y)(te.A,{path:n.data.path,size:t})},getTitle:function(e){return(0,n7.WP)(e.data.path)},category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(vD,e)}};function vR(e){var n=e.path,t=e.performPaneOperation,r=(0,A.A)().fs,i=(0,n0.KA)({path:n,performPaneOperation:t}),o=i?(0,q._)(i):[],a=(0,w.useCallback)(function(){t({operation:"replace",pane:{type:"codeEditor",data:{path:n}}})},[t,n]),l={match:vh.G2,data:{label:"Open in Editor",icon:(0,f.Y)(hT.A,{}),type:"action",run:function(){a()}}};return(0,n7.Z7)(n)&&o.push(l),(0,n9.Qt)(function(){if(i)return{commands:[{commands:o}]}},[i]),(0,f.FD)(f.FK,{children:[(0,f.Y)(n0.ou,{path:n,performPaneOperation:t,children:(0,f.Y)(vg.k,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:a,icon:(0,f.Y)(hT.A,{})})}),(0,f.Y)(n0.UC,{centered:!0,children:(0,f.Y)(r9.Ay,{filePath:n,fs:r})})]})}var vI="DATABASE_URL",vF="PGDATABASE",vT="PGHOST",vP="PGPORT",vL="5432",vU="PGUSER",vN="PGPASSWORD",vO=function(e){var n=e.connectionString,t=e.databaseName,r=new URL(n.replace("postgres://","https://").replace("postgresql://","https://"));return new Map([[vI,n],[vF,t],[vT,r.host],[vP,vL],[vU,r.username],[vN,r.password]])};function vM(){return(vM=(0,y._)(function(e){var n,t;function r(){return(r=(0,y._)(function(){var e,r,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:return[4,n.read()];case 1:e=p.sent(),r=new Map,i=!0,o=!1,a=void 0;try{for(l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u=(c=(0,v._)(s.value,2))[0],d=c[1],e.get(u)!==d&&r.set(u,d)}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return r.size>0&&n.addEntries(r),[2]}})})).apply(this,arguments)}return(0,b.YH)(this,function(i){switch(i.label){case 0:return n=e.secrets,t=vO({connectionString:e.connectionString,databaseName:e.databaseName}),[4,function(){return r.apply(this,arguments)}()];case 1:return i.sent(),[2]}})})).apply(this,arguments)}var vB=t(46258),vH=function(e){(0,t7.u4)(t7.AZ.DATABASE_USED,(0,K._)({type:"PostgreSQL",provider:"neon"},e))},vz=t(38565),vW=function(e){var n=e.envVarKey,t=e.envVarValue,r=e.isSecret,i=(0,nU.c)()("db-env-var-".concat(n)),o=(0,v._)((0,w.useState)(!1),2),a=o[0],l=o[1];return(0,f.FD)(F.S,{css:[B.wp.flex.wrap,B.wp.align.end,B.wp.pb(8),{gap:ez.LU.space8}],row:!0,children:[(0,f.FD)(F.S,{css:[{flexBasis:250},B.wp.flex.grow(0),B.wp.flex.shrink(1)],gap:8,children:[(0,f.Y)("label",{css:B.wp.color.foregroundDimmer,htmlFor:i,children:n}),(0,f.Y)(ew.pd,{id:i,type:!r||a?"text":"password",readOnly:!0,value:t})]}),(0,f.Y)(eg.$n,{text:"Copy",iconLeft:(0,f.Y)(eF.A,{}),onClick:function(){(0,eE.default)(t),vH({action:"envVarCopied",envVarKey:n,envVarType:"value"})}}),r?(0,f.Y)(eg.$n,{text:a?"Hide":"View",iconLeft:a?(0,f.Y)(vz.A,{}):(0,f.Y)(hP.A,{}),onClick:function(){return l(function(e){return!e})}}):null]})},vG=function(e){return(0,w.useCallback)(function(n){return function(e){return vM.apply(this,arguments)}({secrets:e,connectionString:n.connectionString,databaseName:n.databaseName})},[e])},vV=function(e){var n=e.connectionString,t=e.databaseName,r=(0,tc.A)(function(){return vO({connectionString:n,databaseName:t})},[n,t]),i=r.get(vT),o=r.get(vU),a=r.get(vN);if("string"!=typeof i||"string"!=typeof o||"string"!=typeof a)throw Error("Expected all envVars to exist");var l=vG((0,A.A)().secrets);return(0,w.useEffect)(function(){l({connectionString:n,databaseName:t})},[n,t,l]),(0,f.FD)(F.S,{gap:8,children:[(0,f.Y)(vW,{envVarKey:vI,envVarValue:n,isSecret:!0}),(0,f.Y)(vW,{envVarKey:vF,envVarValue:t}),(0,f.Y)(vW,{envVarKey:vT,envVarValue:i}),(0,f.Y)(vW,{envVarKey:vP,envVarValue:vL}),(0,f.Y)(vW,{envVarKey:vU,envVarValue:o}),(0,f.Y)(vW,{envVarKey:vN,envVarValue:a,isSecret:!0})]})};function vj(){var e=(0,$._)(["\n  fragment CurrentUserUsageBasedBillingSummary on CurrentUser {\n    __typename\n    usageBasedBilling {\n      __typename\n      ... on UserUsageBasedBillingSummary {\n        capabilities {\n          canUseUsageBasedBilling\n          explanation\n          hasPaymentMethod\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return vj=function(){return e},e}var vZ=(0,J.J1)(vj());function vq(){var e=(0,$._)(["\n  query DatabaseFrozen {\n    currentUser {\n      id\n      userSubscriptionType\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n"]);return vq=function(){return e},e}var vK={},v$=(0,J.J1)(vq(),vZ),vJ=t(22606),vQ=t(98899),vX=t(33371),v0=t(38169),v1=t(11406),v2=(0,M.x)({cta:[B.wp.width("100%")],ctaStatusBanner:[B.wp.textAlign.left]});function v4(e){var n=e.loading,t=e.ubbExplanation,r=e.hasPaymentMethod,i=e.handleOnUnpause,o=e.refetchUbbCapabilitiesQueryData,a=e.setShowPaymentMethodForm,l=e.showPaymentMethodForm,s=e.setShowSupportForm,c=e.replId,u=(0,i2.m6)();return t===my.sb.NeedsSubscription||t===my.sb.NeedsSubscriptionOrPaymentMethod?u?(0,f.Y)(tZ.N,{text:"You need a subscription to use PostgreSQL databases. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,f.Y)(o9.A,{}),css:v2.ctaStatusBanner}):(0,f.FD)(f.FK,{children:[(0,f.Y)(i8.A,{context:"workspace_postgresql_pane",text:"Upgrade your plan to unpause database",css:v2.cta,colorway:"primary",variant:"outlined",disabled:l,onPlanCheckoutComplete:o}),(0,f.Y)(eg.$n,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:v2.cta,disabled:l,loading:n,iconLeft:(0,f.Y)(cy.A,{}),onClick:function(){return a()}})]}):t===my.sb.NeedsSmsVerification?(0,f.Y)(vQ.A,{context:my.SG.Neon,onSuccess:o}):t===my.sb.NeedsPaymentMethod?u?(0,f.Y)(tZ.N,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,f.Y)(o9.A,{}),css:v2.ctaStatusBanner}):(0,f.Y)(eg.$n,{colorway:"primary",text:"Add a payment method",css:v2.cta,disabled:l,loading:n,iconLeft:(0,f.Y)(cy.A,{}),onClick:function(){return a()}}):t===my.sb.NeedsUnbanning?(0,f.Y)(uF.d,{text:"Your account currently has restrictions on use PostgreSQL databases. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,f.Y)(o9.A,{}),css:v2.ctaStatusBanner,onClick:function(){return s()}}):t===my.sb.InsufficientBudget?(0,f.FD)(f.FK,{children:[(0,f.Y)(tZ.N,{text:"You've reached your monthly usage budget. Increase your budget to unpause your database.",colorway:"warning",icon:(0,f.Y)(o9.A,{}),css:v2.ctaStatusBanner}),(0,f.Y)(v0.h,{onUpdateSuccess:o,replId:c})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)(eg.$n,{colorway:"primary",onClick:i,text:"Unpause database",loading:n,css:v2.cta}),!1===r?(0,f.Y)(uF.d,{text:"Add a payment method to avoid downtime",colorway:"warning",iconLeft:(0,f.Y)(o9.A,{}),css:v2.ctaStatusBanner,onClick:function(){return u?null:a()}}):null]})}function v5(e){var n=e.neonDatabase,t=e.currentUser,r=e.replId;return n.isEphemeral?(0,f.Y)(vX.To,{isFrozen:n.isFrozen,scheduledFreezeTime:n.scheduledFreezeTime,scheduledDeletionTime:n.scheduledDeletionTime,currentUser:t}):(0,f.Y)(v8,{replId:r,neonProjectId:n.projectId})}function v8(e){var n,t,r=e.replId,i=e.neonProjectId,o=(0,v._)((0,w.useState)(!1),2),a=o[0],l=o[1],s=(0,v._)((0,w.useState)(!1),2),c=s[0],u=s[1],d=(0,nT.A)().showError,p=(n=(0,K._)({},vK,{notifyOnNetworkStatusChange:!0,onError:function(e){d(e.message)}}),Q.I(v$,n)),h=p.loading,m=p.data,g=p.refetch,y=(0,v._)((0,vJ.Yc)({refetchQueries:[{query:vJ.Or,variables:{input:{replId:r}}}],onError:function(e){d("Error when unfreezing Neon database: ".concat(e.message)),vH({action:"unfreeze",success:!1})},update:function(e,n){var t,o=n.data,a=e.readQuery({query:vJ.Or,variables:{input:{replId:r}}});(null==o?void 0:o.unfreezeNeonDatabase.__typename)==="UnfreezeNeonDatabaseResult"&&(null==a?void 0:null===(t=a.getNeonDatabases)||void 0===t?void 0:t.__typename)==="GetNeonDatabasesResult"&&e.writeQuery({query:vJ.Or,variables:{input:{replId:r}},data:{__typename:"RootQueryType",getNeonDatabases:{__typename:"GetNeonDatabasesResult",databases:a.getNeonDatabases.databases.map(function(e){return e.projectId===i?(0,e7._)((0,K._)({},e),{isFrozen:!1}):e})}}})},onCompleted:function(e){if((null==e?void 0:e.unfreezeNeonDatabase.__typename)!=="UnfreezeNeonDatabaseResult"){d("Error: Unfreezes Neon Database failed."),vH({action:"unfreeze",success:!1});return}(null==e?void 0:e.unfreezeNeonDatabase.success)?vH({action:"unfreeze",success:!0}):(d("Error: Unfreezes Neon Database failed."),vH({action:"unfreeze",success:!1}))}}),2),b=y[0],S=y[1].loading,Y=(null==m?void 0:null===(t=m.currentUser)||void 0===t?void 0:t.usageBasedBilling.__typename)==="UserUsageBasedBillingSummary"?m.currentUser.usageBasedBilling.capabilities:null;return(0,f.FD)(f.FK,{children:[(0,f.Y)(lC.a,{isOpen:c,onRequestClose:function(){return u(!1)},children:(0,f.Y)(v1.A,{onRequestClose:function(){return u(!1)}})}),(0,f.Y)(F.S,{gap:8,children:(0,f.Y)(v4,{replId:r,loading:h||S,ubbExplanation:null==Y?void 0:Y.explanation,hasPaymentMethod:null==Y?void 0:Y.hasPaymentMethod,handleOnUnpause:function(){b({variables:{input:{replId:r,neonProjectId:i}}})},refetchUbbCapabilitiesQueryData:g,setShowPaymentMethodForm:function(){return l(!0)},showPaymentMethodForm:a,setShowSupportForm:function(){return u(!0)}})})]})}var v3=t(99767),v6=t(85004),v7=t(15737),v9=t(92286),we=t(43886),wn=t(50370),wt=t(69104),wr=t(44981),wi=t(40246),wo=t(87774),wa=t(80906),wl=t(56161),ws=t(23163),wc=t(38751),wu=t(435),wd={"td,th":{border:"1px solid "+ez.LU.outlineDefault}},wp={"td,th":{paddingLeft:8,paddingTop:8,paddingBottom:8,paddingRight:8,whiteSpace:"nowrap"},"td:first-of-type,th:first-of-type":{paddingLeft:8}},wf={outline:"2px solid ".concat(ez.LU.accentPrimaryDefault),outlineOffset:"-2px"},wh=(0,nD.AH)({":focus:focus-visible":wf}),wm=(0,nD.AH)(wf),wg=(0,nD.AH)([wp,wd,wh]),wv=(0,nD.AH)([B.wp.fontWeight.medium,wp,wd,wh]),ww=(0,nD.AH)({"tbody > tr:hover":{backgroundColor:ez.LU.backgroundHigher,cursor:"pointer"}});function wy(e){var n=e.type,t=e.style,r=e.children,i=(0,wr.rs)().rowGroupProps;return(0,f.Y)(n,(0,e7._)((0,K._)({},i),{style:t,children:r}))}function wb(e){var n=e.item,t=e.state,r=e.children,i=(0,w.useRef)(null),o=(0,wi.x)({node:n},t,i).rowProps;return(0,f.Y)("tr",(0,e7._)((0,K._)({css:wv},o),{ref:i,children:r}))}function wS(e){var n,t=e.column,r=e.state,i=(0,w.useRef)(null),o=(0,wo.f)({node:t},r,i).columnHeaderProps,a=(0,wa.o)(),l=a.isFocusVisible,s=a.focusProps;return(0,f.Y)("th",(0,e7._)((0,K._)({},(0,wl.v)(o,s)),{css:[l&&wm,wh],colSpan:t.colspan,style:{textAlign:(null!==(n=t.colspan)&&void 0!==n?n:1)>1?"center":"left"},ref:i,children:t.rendered}))}function wY(e){var n=e.item,t=e.children,r=e.state,i=(0,w.useRef)(null),o=(0,ws.A)({node:n},r,i).rowProps,a=(0,wa.o)(),l=a.isFocusVisible,s=a.focusProps;return(0,f.Y)("tr",(0,e7._)((0,K._)({css:[l&&wm,wg]},(0,wl.v)(o,s)),{ref:i,children:t}))}function wA(e){var n=e.cell,t=e.state,r=(0,w.useRef)(null),i=(0,wc.a)({node:n},t,r).gridCellProps,o=(0,wa.o)(),a=o.isFocusVisible,l=o.focusProps;return(0,f.Y)("td",(0,e7._)((0,K._)({},(0,wl.v)(i,l)),{css:[a&&wm,wh],ref:r,children:n.rendered}))}function wC(e){var n=e.selectionMode,t=e.selectionBehavior,r=(0,v6.j)((0,e7._)((0,K._)({},e),{showSelectionCheckboxes:"multiple"===n&&"replace"!==t})),i=(0,w.useRef)(null),o=r.collection,a=(0,wu.K)(e,r,i).gridProps;return(0,f.FD)("table",(0,e7._)((0,K._)({},a),{ref:i,css:[(null==e?void 0:e.onRowAction)&&ww],style:{borderCollapse:"collapse"},children:[(0,f.Y)(wy,{type:"thead",children:o.headerRows.map(function(e){return(0,f.Y)(wb,{item:e,state:r,children:(0,q._)(e.childNodes).map(function(e){return(0,f.Y)(wS,{column:e,state:r},e.key)})},e.key)})}),(0,f.Y)(wy,{type:"tbody",children:(0,q._)(o.body.childNodes).map(function(e){return(0,f.Y)(wY,{item:e,state:r,children:(0,q._)(e.childNodes).map(function(e){return(0,f.Y)(wA,{cell:e,state:r},e.key)})},e.key)})})]}))}var wx=function(e){var n=e.ariaTableProps,t=e.rows,r=e.columns;return(0,f.FD)(wC,(0,e7._)((0,K._)({},n),{children:[(0,f.Y)(v7.A,{columns:r,children:function(e){return(0,f.Y)(v9.V,{children:e.value})}}),(0,f.Y)(we.B,{items:t,children:function(e){return(0,f.Y)(wn.f,{children:function(n){return(0,f.Y)(wt.f,{children:e[n]})}})}})]}))};function wk(e){var n=e.headerColumns,t=e.bodyData,r=e.ariaLabel,i=e.scrollRef,o=e.onRowAction,a=n.map(function(e,n){return{key:"string"==typeof e?e:"".concat(n),value:e}}),l=t.map(function(e,t){for(var r={id:t},i=0;i<e.length;i++){var o=n[i];r["string"==typeof o?o:"".concat(i)]=e[i]}return r});return(0,f.Y)(wx,{ariaTableProps:{selectionMode:"none","aria-label":void 0===r?"Database Table":r,onRowAction:o,scrollRef:i},columns:a,rows:l})}var w_=t(4989),wD=(0,M.x)({self:[B.wp.flex.column,B.wp.height("100%")],header:[B.wp.pb(8),B.wp.align.center],title:[B.wp.fontSize(14),B.wp.ml(8),B.wp.flex.growAndShrink(1)],main:[B.wp.overflow("auto"),B.wp.height("calc(100% - 60px)")]}),wE=function(e){var n=e.headerTitle,t=e.onGoBack,r=e.refresh,i=e.children;return(0,f.FD)(F.S,{css:wD.self,children:[(0,f.FD)(F.S,{css:wD.header,row:!0,children:[(0,f.Y)(ev.K0,{alt:"Go back",size:24,type:"button",onClick:t,children:(0,f.Y)(w_.A,{})}),(0,f.Y)(I.EY,{css:wD.title,multiline:!1,children:n}),"function"==typeof r?(0,f.Y)(ev.K0,{alt:"Refresh",size:24,type:"button",onClick:r,children:(0,f.Y)(o3.A,{})}):null]}),(0,f.Y)(F.S,{css:wD.main,children:i})]})},wR=(0,eN.eU)(["databaseManager"]),wI=(0,eN.eU)(null,function(e,n,t){var r=e(wR);n(wR,(0,q._)(r).concat([t])),vH({action:"pageNav",databasePage:t})}),wF=(0,eN.eU)(null,function(e,n){var t=e(wR);n(wR,t.slice(0,t.length-1))}),wT=(0,eN.eU)(function(e){var n=e(wR);return n[n.length-1]}),wP=function(){return(0,eO.Xr)(wI)},wL=function(){return(0,eO.Xr)(wF)},wU=function(e,n){var t,r=(0,A.A)().psql,i=(0,v._)((0,w.useState)(),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,w.useCallback)((t=(0,y._)(function(){return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!e)return[2];t.label=1;case 1:return t.trys.push([1,,3,4]),c(!0),[4,r.run({query:e,connectionString:n})];case 2:return a(t.sent()),[3,4];case 3:return c(!1),[7];case 4:return[2]}})}),function(){return t.apply(this,arguments)}),[n,r,e]);return(0,w.useEffect)(function(){u()},[n,r,e,u]),{data:o,loading:s,refetch:u}},wN=function(e){var n=e.rows,t=e.columns;return!Array.isArray(n)||n.length<1?null:{headerColumns:null!=t?t:[],bodyData:n.map(function(e){return Object.values(e)})}},wO=function(e){return wU("SELECT n.nspname as \"Schema\",\n  c.relname as \"Name\",\n  CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'm' THEN 'materialized view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' WHEN 'f' THEN 'foreign table' WHEN 'p' THEN 'partitioned table' WHEN 'I' THEN 'partitioned index' END as \"Type\",\n  pg_catalog.pg_get_userbyid(c.relowner) as \"Owner\",\n  pg_catalog.pg_size_pretty(pg_catalog.pg_total_relation_size(c.oid)) as \"Size\",\n  pg_catalog.obj_description(c.oid, 'pg_class') as \"Description\"\nFROM pg_catalog.pg_class c\n     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\nWHERE c.relkind IN ('r','p','v','m','S','f','')\n      AND n.nspname <> 'pg_catalog'\n      AND n.nspname <> 'information_schema'\n      AND n.nspname !~ '^pg_toast'\n  AND pg_catalog.pg_table_is_visible(c.oid)\nORDER BY 1,2;",e.connectionString)},wM=(0,eN.eU)(void 0),wB=(0,eN.eU)(function(e){var n=e(wM);return null==n?void 0:n.rows.reduce(function(e,n){var t=n.table_name,r=n.column_name;return e[t]||(e[t]=[]),e[t].push(r),e},{})}),wH=function(e){var n=wU("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public';",e.connectionString).data,t=(0,eO.Xr)(wM);(0,w.useEffect)(function(){t(n)},[n,t])},wz=function(e){var n=e.tableName,t=e.connectionString;return wU("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public' AND table_name = '".concat(n.replace(/"/g,'""'),"';"),t).data},wW=function(e){var n=e.tableData,t=e.scrollRef,r=n.headerColumns,i=n.bodyData,o=wP(),a=(0,w.useCallback)(function(e){var n=parseInt(String(e),10);if(!isNaN(n)){var t=i[n][r.indexOf("Name")];o("table/".concat(t))}},[o,r,i]);return(0,f.Y)(wk,{headerColumns:r,bodyData:i,onRowAction:a,scrollRef:t})},wG=function(e){var n=e.psqlQueryResult,t=e.scrollRef,r=n.data;if(n.loading)return(0,f.Y)(F.S,{css:[B.wp.p(32)],row:!0,justify:"center",children:(0,f.Y)(tn.A,{})});if(null==r?void 0:r.error)return(0,f.Y)(F.S,{css:[B.wp.p(32)],row:!0,justify:"center",children:(0,f.Y)(I.EY,{css:[B.wp.color.accentNegativeDefault,B.wp.maxWidth("100%")],children:null==r?void 0:r.error})});var i=r?wN(r):null;return i?(0,f.Y)(wW,{tableData:i,scrollRef:t}):(0,f.Y)(F.S,{css:[B.wp.p(32)],row:!0,justify:"center",children:(0,f.Y)(I.EY,{css:[B.wp.color.accentPositiveDefault,B.wp.maxWidth("100%")],children:"No tables found"})})},wV=function(e){var n=e.connectionString,t=wL(),r=(0,w.useRef)(null),i=wO({connectionString:n}),o=i.refetch;return(0,f.Y)(wE,{headerTitle:"All tables",onGoBack:t,refresh:o,children:(0,f.Y)(F.S,{css:[B.wp.flex.growAndShrink(1),B.wp.overflow("auto")],innerRef:r,children:(0,f.Y)(wG,{psqlQueryResult:i,scrollRef:r})})})},wj="1px solid "+ez.LU.outlineDefault,wZ=(0,nD.AH)([B.wp.p(8),B.wp.backgroundColor.backgroundDefault,B.wp.align.center,B.wp.borderRadius(0),{borderLeft:wj,borderRight:wj,borderBottom:wj},{":not([disabled])":{":focus":{boxShadow:"none",outline:"2px solid ".concat(ez.LU.accentPrimaryDefault),outlineOffset:"-2px"},":hover":{backgroundColor:ez.LU.backgroundHigher}}}]),wq=function(e){var n=wO({connectionString:e.connectionString}),t=n.data,r=n.loading,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,w.useCallback)(function(){a(!0)},[]),s=t?wN(t):null,c=(0,w.useRef)(null);if(!s||r)return null;var u=s.bodyData.length,d=s.headerColumns,p=s.bodyData;return(0,f.Y)(f.FK,{children:(0,f.FD)(F.S,{css:[B.wp.overflow("auto"),B.wp.display.grid],innerRef:c,children:[(0,f.Y)(wW,{tableData:{headerColumns:d,bodyData:o?p:p.slice(0,5)},scrollRef:c}),u-5>0&&!o?(0,f.Y)(eg.$n,{text:"".concat(u-5," more"),css:wZ,onClick:l}):null]})})};function wK(e){var n=e.textAtom,t=e.variant,r=e.className,i=useAtomValue(n);return i?_jsx(Text,{className:r,variant:t,multiline:!1,children:i}):null}function w$(e){var n=e.title,t=e.doWarnAtom,r=e.inactive,i=(0,eO.md)(t);return(0,f.FD)(F.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(I.EY,{variant:"small",css:B.wp.color.foregroundDimmer,multiline:!1,children:void 0!==r&&r?n+" last run":n}),i?(0,f.Y)(o9.A,{color:ez.LU.orangeStronger}):null]})}function wJ(e){var n=e.title,t=e.totalAtom,r=e.currentAtom,i=e.countAtom,o=e.measure,a=e.limitText,l=e.inactive,s=void 0!==l&&l,c=(0,tc.A)(function(){return(0,eN.eU)(function(e){return wX(e(r),e(t))})},[r,t]),u=(0,tc.A)(function(){return(0,eN.eU)(function(e){return a||function(e,n,t,r,i){return"empty"===e||void 0===n?void 0:"vCPU"===i?w0(100*Math.min(1,n/t))+"% of "+r+" vCPUs":w0(n).toLocaleString()+"/"+w0(t).toLocaleString()+" "+i}(e(c),e(r),e(t),i&&e(i),o)})},[a,c,r,t,i,o]),d=(0,tc.A)(function(){return(0,eN.eU)(function(e){var n=e(c);return"At limit"===n||"Close to limit"===n})},[c]);return(0,f.FD)(F.S,{css:[B.wp.flex.growAndShrink(2),{flexBasis:32}],gap:4,children:[n?(0,f.Y)(w$,{title:n,doWarnAtom:d,inactive:s}):null,(0,f.Y)(wQ,{currentAtom:r,totalAtom:t,inactive:s,limitTextAtom:u,mini:!0})]})}function wQ(e){var n=e.currentAtom,t=e.totalAtom,r=e.limitTextAtom,i=e.inactive,o=e.mini,a=(0,eO.md)(t),l=(0,eO.md)(n),s=(0,eO.md)(r),c=function(e){switch(e){case"empty":case"fine":default:return;case"At limit":return ez.LU.accentNegativeDefault;case"Close to limit":return ez.LU.orangeDefault}}(wX(l,a));return(0,f.Y)(tU.W,{css:o&&B.wp.height(8),total:a,current:l,color:c,disabled:i,tooltip:s})}function wX(e,n){if(void 0===e)return"empty";var t=e/n;return t>=1?"At limit":t>=.9?"Close to limit":"fine"}function w0(e){return Math.round((e+Number.EPSILON)*100)/100}var w1="https://docs.replit.com/cloud-services/storage-and-databases/postgresql-on-replit",w2="https://docs.replit.com/cloud-services/about-usage-based-billing#1-postgresql-usage-metrics";function w4(e){return(0,f.Y)(n$.Ay,(0,e7._)((0,K._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M2.25 6A3.75 3.75 0 0 1 6 2.25h12A3.75 3.75 0 0 1 21.75 6v12A3.75 3.75 0 0 1 18 21.75H6A3.75 3.75 0 0 1 2.25 18V6ZM6 3.75A2.25 2.25 0 0 0 3.75 6v2.25h10.5v-4.5H6Zm9.75 0v4.5h4.5V6A2.25 2.25 0 0 0 18 3.75h-2.25Zm4.5 6h-4.5v4.5h4.5v-4.5Zm0 6h-4.5v4.5H18A2.25 2.25 0 0 0 20.25 18v-2.25Zm-6 4.5v-4.5H3.75V18A2.25 2.25 0 0 0 6 20.25h8.25Zm-10.5-6h10.5v-4.5H3.75v4.5Z",clipRule:"evenodd"})}))}var w5=(0,M.x)({loadingGhost:[B.wp.borderRadius(6),{outline:"1px solid transparent"},B.wp.height(22)],storage:B.wp.rowWithGap(8)}),w8=function(e){var n=e.dbSize,t=e.totalSize,r=(0,v3.z)(n),i=(0,v3.z)(t),o=(0,tc.A)(function(){return(0,eN.eU)(n)},[n]),a=(0,tc.A)(function(){return(0,eN.eU)(t)},[t]);return(0,f.FD)(f.FK,{children:[(0,f.FD)(I.EY,{css:B.wp.color.foregroundDimmer,multiline:!1,children:[r,"/",i]}),(0,f.Y)(wJ,{totalAtom:a,currentAtom:o,limitText:"".concat(r," / ").concat(i),inactive:!1,measure:"MB"})]})},w3=function(e){var n,t,r=e.connectionString,i=e.quotaLogicalSizeBytes,o=wU("SELECT sum(pg_database_size(datname)) FROM pg_database;",r),a=o.data,l=o.loading,s=wU("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' ORDER BY table_name;",r),c=s.data,u=s.loading,d=parseInt(null!==(t=null==a?void 0:null===(n=a.rows[0])||void 0===n?void 0:n.sum)&&void 0!==t?t:"0",10),p=null==c?void 0:c.rows.length;return l||u?(0,f.Y)(eo.ui,{elevated:!0,css:w5.loadingGhost,justify:"center",align:"center",row:!0,children:(0,f.Y)(tn.A,{})}):(0,f.FD)(F.S,{css:w5.storage,children:[(0,f.FD)(I.EY,{multiline:!1,children:[p," ",1===p?"table":"tables"]}),(0,f.Y)(w8,{dbSize:d,totalSize:i?parseInt(i,10):0x280000000})]})},w6=function(e){var n=e.neonDatabase,t=e.connectionString,r=e.onOpenDatabaseViewerClick,i=(0,i$._P)({controlName:"flag-detective-pikachu"}),o=(0,aV.Z)("drizzle-studio-announcement"),a=o.setAsDone,l=o.isLoading,s=o.isDone;return(0,f.FD)(F.S,{gap:8,children:[(0,f.Y)(F.S,{children:(0,f.Y)(w3,{connectionString:t,quotaLogicalSizeBytes:n.quotaLogicalSizeBytes})}),(0,f.Y)(wq,{connectionString:t}),(0,f.Y)(eg.$n,{text:"See my data",iconLeft:(0,f.Y)(w4,{}),onClick:function(){r(),i&&a()}}),!i||l||s?null:(0,f.Y)(tZ.N,{colorway:"primary",closable:!0,closeAction:a,title:"New: Database Studio",text:'Click "See my data" to launch the new Database editor. Modify, query, and visualize your data in an easy-to-use interface.'})]})},w7=(0,sE.v)(["databaseStatusColor"]),w9=w7.cssVars,ye=w7.styleTokens,yn=(0,M.x)({statusDot:[B.wp.width(8),B.wp.height(8),B.wp.backgroundColor.accentPositiveStronger,B.wp.borderRadius("full"),{filter:"drop-shadow(0 0 6px ".concat(ye.databaseStatusColor,")"),backgroundColor:ye.databaseStatusColor}],text:{color:ye.databaseStatusColor}});function yt(e){var n=e.isFrozen;return(0,f.FD)(F.S,{row:!0,gap:8,align:"center",style:(0,g._)({},w9.databaseStatusColor,n?ez.LU.foregroundDimmest:ez.LU.accentPositiveStronger),children:[n?null:(0,f.Y)(F.S,{css:yn.statusDot}),(0,f.FD)(I.EY,{css:yn.text,multiline:!1,children:["Database ",n?"paused":"connected"]}),n?(0,f.Y)(iZ.A,{css:yn.text}):null]})}var yr=function(e){var n=e.psqlQueryResult,t=e.tableName,r=e.connectionString,i=e.scrollRef,o=n.data,a=n.loading,l=wz({tableName:t,connectionString:r});if(a)return(0,f.Y)(F.S,{css:[B.wp.p(32)],row:!0,justify:"center",children:(0,f.Y)(tn.A,{})});if(null==o?void 0:o.error)return(0,f.Y)(F.S,{css:[B.wp.p(32)],row:!0,justify:"center",children:(0,f.Y)(I.EY,{css:[B.wp.color.accentNegativeDefault,B.wp.maxWidth("100%")],children:null==o?void 0:o.error})});var s=o?wN(o):null;if(!s)return(0,f.Y)(F.S,{css:[B.wp.p(32)],row:!0,justify:"center",children:(0,f.Y)(I.EY,{css:[B.wp.color.accentPositiveDefault,B.wp.maxWidth("100%")],children:"No rows"})});var c=s.headerColumns,u=s.bodyData;return(0,f.Y)(wk,{headerColumns:c.map(function(e,n){var t,r=null==l?void 0:null===(t=l.rows)||void 0===t?void 0:t.find(function(n){return n.column_name===e}),i=null==r?void 0:r.data_type,o=i?(0,f.Y)(oG.a,{text:i}):null;return(0,f.FD)(F.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(I.EY,{multiline:!1,children:e}),o]},n)}),bodyData:u,scrollRef:i})},yi=function(e){var n=e.tableName,t=e.connectionString,r=wL(),i=(0,w.useRef)(null),o=wU('SELECT * FROM "'.concat(n.replace(/"/g,'""'),'" LIMIT ').concat(500),t),a=o.refetch;return(0,f.Y)(wE,{headerTitle:n,onGoBack:r,refresh:a,children:(0,f.Y)(F.S,{css:[B.wp.flex.growAndShrink(1),B.wp.overflow("auto")],innerRef:i,children:(0,f.Y)(yr,{psqlQueryResult:o,tableName:n,connectionString:t,scrollRef:i})})})},yo=h.ZU.Literal("overview"),ya=h.ZU.Literal("commands"),yl=h.ZU.Literal("settings"),ys=h.ZU.Literal("drizzle-studio");h.ZU.Union([yo,ya,yl,ys]);var yc=h.ZU.Object({restoreToCommitId:h.ZU.Optional(h.ZU.String())}),yu=h.ZU.Union([h.ZU.Object({type:yl,data:h.ZU.Optional(yc)})]),yd=h.ZU.Optional(yu);function yp(e){if(e&&m.WT.Check(yd,e))return e}var yf=(0,w.createContext)(void 0),yh=function(){var e=(0,w.useContext)(yf);if(!e)throw Error("useNeonPaneTabs must be used within a TabProvider");return e},ym=function(e){var n=e.children,t=e.initialOpenAtTab,r=e.performPaneOperation,i=(0,v._)((0,w.useState)(function(){return t?t.type:"overview"}),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(function(){return yp(t)}),2),s=l[0],c=l[1],u=(0,w.useRef)(t);(0,w.useEffect)(function(){t&&t!==u.current&&(u.current=t,a(t.type),c(yp(t)))},[t]);var d=(0,w.useCallback)(function(e){a(e),s&&(u.current=void 0,c(void 0),r({operation:"replace",pane:{type:"neon"}}))},[s,r]),p=(0,w.useMemo)(function(){return{selectedTab:o,openAtTab:s,selectTab:d}},[o,s,d]);return(0,f.Y)(yf.Provider,{value:p,children:n})},yg=t(15423),yv=t(27299),yw=t(52334),yy=t(19884),yb=t(50781),yS=t(6219),yY=t(48326),yA=(0,eN.eU)(""),yC=(0,eN.eU)(null),yx=(0,eN.eU)(null,function(e,n,t){var r=t.query;r&&n(yA,r);var i=e(yC);i&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:r}})}),yk=t(68820),y_=t(50140),yD=(0,yk.tG)("replDatabasesQueryHistory",[]),yE=function(e,n){return!e.isPinned&&n.isPinned?1:e.isPinned&&!n.isPinned?-1:"number"==typeof e.pinnedTimestamp&&"number"==typeof n.pinnedTimestamp?e.pinnedTimestamp-n.pinnedTimestamp:n.timestamp-e.timestamp},yR=function(e,n){var t=e.findIndex(function(e){return!e.isPinned&&e.data===n.data});-1!==t?e.splice(t,1,n):e.push(n),e.sort(yE);var r=e.filter(function(e){return!e.isPinned}).length;if(r>=5){var i=r-5;e.splice(e.length-i,i)}},yI=t(95758),yF=t(30778),yT=t(90384),yP=t(46047),yL=function(e){var n=e.id,t=e.data,r=e.isPinned,i=(0,y_.yF)((0,w.useCallback)(function(e,t){var r=e(yD).find(function(e){return e.id===n}),i=(null==r?void 0:r.data)||"";i&&(t(yx,{query:i}),vH({action:"queryHistoryItemSelected"}))},[n])),o=(0,y_.yF)((0,w.useCallback)(function(e,t){var r=e(yD);t(yD,(0,a$.jM)(r,function(e){var t=e.find(function(e){return e.id===n});t&&(t.isPinned=!t.isPinned,t.isPinned?t.pinnedTimestamp=Date.now():t.pinnedTimestamp=void 0),e.sort(yE)})),vH({action:"queryHistoryItemPinned"})},[n]));return(0,f.FD)(F.S,{css:[{borderTop:"1px solid ".concat(ez.LU.outlineDefault),":hover":{background:ez.LU.backgroundHigher}},B.wp.flex.row,B.wp.p(8),B.wp.color.foregroundDimmer,B.wp.align.center,B.wp.cursor.pointer],onClick:i,children:[(0,f.Y)(I.EY,{css:[B.wp.flex.growAndShrink(1)],multiline:!1,children:t}),(0,f.Y)(ev.K0,{alt:"Pin query",onClick:o,children:r?(0,f.Y)(yP.A,{fill:ez.LU.accentPrimaryDefault}):(0,f.Y)(yT.A,{})})]})},yU=function(e){var n=e.onExpand,t=(0,eO.md)(yD);return(0,f.Y)(_.A,{onClick:n,headerContent:(0,f.FD)(F.S,{row:!0,gap:8,css:[B.wp.p(2)],align:"center",children:[(0,f.Y)(gh.A,{}),(0,f.Y)(I.EY,{css:[B.wp.color.foregroundDimmest],multiline:!1,children:"Query History"})]}),children:(0,f.Y)(F.S,{gap:8,css:[B.wp.height("100%")],children:0===t.length?(0,f.Y)(F.S,{css:[B.wp.p(8)],children:(0,f.Y)(I.EY,{css:[B.wp.color.foregroundDimmer],multiline:!1,children:"No query history"})}):(0,f.Y)(F.S,{children:t.map(function(e){return(0,f.Y)(yL,(0,K._)({},e),e.id)})})})})},yN=new nt.L(function(){return(0,nn.qf)((0,no.J)((0,f.Y)("div",{css:[{fontFamily:ez.LU.fontFamilyCode},B.wp.color.foregroundDimmest],children:"Type PostgreSQL queries here to use the database."})))}),yO=new nl.k(function(e){return nn.Lz.domEventHandlers({keydown:function(n){"Enter"===n.key&&n.metaKey&&(n.stopPropagation(),e())}})}),yM=new nl.k(function(e){return ne.Nb.high((0,yg.ll)((0,K._)({dialect:yg.Rv},e)))}),yB=function(e){var n=e.queryResult,t=e.scrollRef;if(null==n?void 0:n.error)return(0,f.Y)(F.S,{css:B.wp.px(8),children:(0,f.Y)(I.EY,{css:[B.wp.color.accentNegativeDefault],children:null==n?void 0:n.error})});if(!(null==n?void 0:n.rows))return null;var r=wN(n);if(!r)return(0,f.Y)(F.S,{css:B.wp.px(8),children:(0,f.Y)(I.EY,{css:[B.wp.color.accentPositiveDefault],children:"Query successful, no rows returned"})});var i=r.headerColumns,o=r.bodyData;return(0,f.Y)(F.S,{css:B.wp.px(8),children:(0,f.Y)(wk,{headerColumns:i,bodyData:o,scrollRef:t})})},yH=(0,nD.AH)([B.wp.height("100%"),B.wp.position.relative,B.wp.overflow("auto")]),yz=(0,nD.AH)([B.wp.position.sticky,B.wp.top(0),B.wp.left(0),B.wp.zIndex(1),B.wp.backgroundColor.backgroundDefault]),yW=function(e){var n=e.connectionString,t=e.performPaneOperation,r=(0,v._)((0,eO.fp)(yA),2),i=r[0],o=r[1],a=(0,na.A)(),l=a.ref,s=a.view,c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1];(0,w.useEffect)(function(){return function(){var e;o(null!==(e=null==s?void 0:s.state.doc.toString())&&void 0!==e?e:"")}},[o,null==s?void 0:s.state.doc]);var p=(0,eO.Xr)(yC);(0,w.useEffect)(function(){p(s)},[p,s]),wH({connectionString:n});var h=(0,eO.md)(wB),m=yy.u4,g=(0,yv.A)({filePath:m}),S=(0,A.A)().psql,Y=(0,v._)((0,w.useState)(),2),C=Y[0],x=Y[1],k=(0,v._)((0,w.useState)(!1),2),_=k[0],D=k[1],E=(0,y_.yF)((0,w.useCallback)(function(e,n,t){if(t){var r={id:(0,nF.A)(),data:t,timestamp:Date.now()},i=e(yD);n(yD,(0,a$.jM)(i,function(e){yR(e,r)}))}},[])),R=(0,w.useCallback)(function(){function e(){return(e=(0,y._)(function(){var e;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!s)return[2];t.label=1;case 1:return t.trys.push([1,,3,4]),D(!0),E(e=null==s?void 0:s.state.doc.toString()),[4,S.run({query:e,connectionString:n})];case 2:return x(t.sent()),vH({action:"queryRan"}),[3,4];case 3:return D(!1),[7];case 4:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[n,S,E,s]),I=wP(),T=(0,w.useCallback)(function(){I("databaseManager")},[I]),P=(0,w.useCallback)(function(){I("tableSchemas")},[I]),L=(0,w.useRef)(null),U=yM.use({schema:h}),N=(0,i$._P)({controlName:"flag-postgresql-pane-inline-ai"}),O=(0,i2.m5)(),M=(0,yb.MC)({path:m}),H=(0,yb.r9)({path:m}),z=(0,yb.o0)({path:m}),W=(0,yY.C)({generateCode:M,editCode:H,explainCode:z,onMoreClick:void 0}),G=(0,w.useCallback)(function(){s&&M(s,"unknown")},[s,M]),V=(0,w.useCallback)(function(e){return t({operation:"open",pane:e,secondary:!0})},[t]),j=(0,w.useCallback)(function(){V({type:"ghostwriterChat"})},[V]),Z=(0,yw.m)({onGenerateCode:G,onReplyInChat:j}),q=(0,yS.U)({isMobile:O,generateCode:M,filePath:m}),K=yO.use(R),$=(0,yI.Kg)();return(0,f.Y)(wE,{headerTitle:"Database Contents",onGoBack:T,children:(0,f.FD)(F.S,{css:[yH],gap:8,innerRef:L,children:[(0,f.FD)(F.S,{css:[B.wp.pb(8),u?null:yz],gap:8,children:[(0,f.FD)(F.S,{css:[{border:"1px solid ".concat(ez.LU.outlineDefault)},B.wp.borderRadius(2)],children:[(0,f.Y)(ni.Ay,{ref:l,filePath:m,css:[g7.$1,B.wp.backgroundColor.backgroundDefault,B.wp.borderRadius(8),B.wp.overflow("auto"),B.wp.minHeight(100),B.wp.maxHeight(500),{".cm-panel":{zIndex:1}}],initialDoc:i,extensions:[N?[]:yN,U,g,N&&!O?W:[],N?Z:[],N?q:[],K]}),(0,f.Y)(yU,{expanded:u,onExpand:function(){d(function(e){return!e})}})]}),(0,f.Y)(rc.m_,{placement:"top",tooltip:(0,f.Y)(yF._y,{keyCombo:"".concat($,"Enter"),fontSize:12}),children:(0,f.Y)(eg.$n,{text:"Run Query",iconLeft:_?(0,f.Y)(tn.A,{}):(0,f.Y)(ap.A,{}),onClick:R,disabled:_})})]}),(0,f.Y)(yB,{queryResult:C,scrollRef:L}),(0,f.Y)(F.S,{gap:8,css:[B.wp.py(8)],children:(0,f.Y)(eg.$n,{css:B.wp.backgroundColor.backgroundDefault,text:"Show All Contents",iconLeft:(0,f.Y)(w4,{}),onClick:P})})]})})},yG=(0,M.x)({header:[B.wp.pt(1)]});function yV(e){var n=e.neonDatabase,t=e.currentUser,r=e.replId,i=e.connectionString,o=e.performPaneOperation,a=(0,i$._P)({controlName:"flag-detective-pikachu"}),l=(0,eO.md)(wT),s=wP(),c=yh().selectTab,u=(0,w.useCallback)(function(){if(a){c("drizzle-studio");return}s("queryEditor")},[s,a,c]);if("queryEditor"===l)return(0,f.Y)(yW,{connectionString:i,performPaneOperation:o});if("tableSchemas"===l)return(0,f.Y)(wV,{connectionString:i});if(l.startsWith("table/")){var d=l.slice(l.indexOf("/")+1);return(0,f.Y)(yi,{tableName:d,connectionString:i})}return(0,f.FD)(f.FK,{children:[n.isEphemeral&&!n.isFrozen?(0,f.Y)(vX.To,{isFrozen:n.isFrozen,scheduledFreezeTime:n.scheduledFreezeTime,scheduledDeletionTime:n.scheduledDeletionTime,currentUser:t}):null,(0,f.FD)(F.S,{gap:8,children:[(0,f.Y)(F.S,{css:yG.header,row:!0,gap:8,align:"center",justify:"space-between",children:(0,f.Y)(yt,{isFrozen:n.isFrozen})}),n.isFrozen?(0,f.Y)(v5,{neonDatabase:n,currentUser:t,replId:r}):(0,f.Y)(w6,{neonDatabase:n,connectionString:i,onOpenDatabaseViewerClick:u})]})]})}var yj=t(45981),yZ=t.n(yj);function yq(){var e=(0,$._)(["\n  query DatabaseUsageSectionCurrentUser {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          startDate\n          endDate\n          resources {\n            neonComputeTime {\n              usage\n            }\n            neonDataStorage {\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return yq=function(){return e},e}function yK(){var e=(0,$._)(["\n  mutation RollbackNeonDatabase($input: RollbackNeonDatabaseInput!) {\n    rollbackNeonDatabase(input: $input) {\n      __typename\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on RollbackNeonDatabaseResult {\n        database {\n          id\n        }\n      }\n    }\n  }\n"]);return yK=function(){return e},e}function y$(){var e=(0,$._)(["\n  mutation SetNeonHistoryRetentionPeriod(\n    $input: SetNeonDatabaseConfigurationInput!\n  ) {\n    setNeonDatabaseConfiguration(input: $input) {\n      __typename\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on SetNeonDatabaseConfigurationResult {\n        database {\n          id\n          historyRetentionSeconds\n        }\n      }\n    }\n  }\n"]);return y$=function(){return e},e}var yJ={},yQ=(0,J.J1)(yq()),yX=(0,J.J1)(yK()),y0=(0,J.J1)(y$()),y1=t(77581),y2=t(53668),y4=t(47784),y5=t(81319),y8=t(57576),y3=t(99498);function y6(e,n,t){return rV.v4(function(r){r.setTag("neon-pane",!0),r.setTag("context",n),t&&r.setExtras(t),rV.Cp(e)}),e}var y7=(0,M.x)({title:B.wp.pb(8),card:[B.wp.p(8),B.wp.borderRadius(8),{outline:"1px solid transparent"}],error:[B.wp.color.accentNegativeStronger],dialogMessage:[B.wp.flex.growAndShrink(1)],dialogButtonContainer:[B.wp.display.flex,B.wp.flex.row,B.wp.justify.end],list:[B.wp.fontSize(12),{li:[B.wp.pt(1),{"&:before":[B.wp.mr(4),{content:'"•"'}]}]}],statusDateInput:[{margin:"4px -4px 0"}]}),y9=new y2.p("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0,timeZoneName:"short"});function be(e){var n=e.timeZone,t=e.validationError,r=e.commitError;return t?(0,f.Y)(I.EY,{css:y7.error,children:t}):r?(0,f.Y)(I.EY,{css:y7.error,children:"Could not determine timestamp from agent rollback"}):(0,f.Y)(I.EY,{color:"dimmest",children:n})}function bn(e){var n=e.value,t=e.loading,r=e.restored,i=e.error,o=e.validationError,a=e.onRestore,l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1];return(0,f.FD)(f.FK,{children:[(0,f.Y)(eg.$n,{text:t?"":r?"Restored":"Restore",loading:t,iconLeft:t?(0,f.Y)(tn.A,{}):void 0,disabled:!!i||!!o||!n||t||r,onClick:function(){return c(!0)},colorway:r?"positive":"primary"}),i&&(0,f.Y)(I.EY,{css:y7.error,children:i}),(0,f.Y)(lC.a,{isOpen:s,onRequestClose:function(){return c(!1)},children:(0,f.FD)(F.S,{gap:16,children:[(0,f.FD)(F.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(tQ.A,{size:20}),(0,f.Y)(I.Y9,{variant:"subheadDefault",level:1,children:"Restoring your database"})]}),(0,f.FD)(F.S,{gap:8,children:[(0,f.Y)(I.EY,{multiline:!0,css:y7.dialogMessage,children:"Your database will be restored to it's past state at:"}),(0,f.Y)(tZ.N,{text:n?y9.format(n.toDate()):"Could not determine restore date"}),(0,f.Y)(tZ.N,{icon:(0,f.Y)(o9.A,{}),colorway:"warning",text:(0,f.FD)(f.FK,{children:["This action cannot be undone.",(0,f.Y)("br",{}),(0,f.FD)("ul",{css:y7.list,children:[(0,f.Y)("li",{children:"All current data will be replaced with data from this backup"}),(0,f.Y)("li",{children:"Any changes made after this backup point will be lost"}),(0,f.Y)("li",{children:"Connected services may need to be reconfigured"}),(0,f.Y)("li",{children:"If you've deployed, any production data changed after this time will be lost"})]})]})})]}),(0,f.Y)(F.S,{css:y7.dialogButtonContainer,children:(0,f.Y)(eg.$n,{colorway:"primary",onClick:function(){c(!1),a(n)},text:"Continue"})})]})})]})}function bt(e){var n=e.value,t=e.loading,r=e.restored,i=e.error,o=e.minValue,a=e.maxValue,l=e.isFrozen,s=e.validationError,c=e.timeZone,u=e.onChange,d=e.onRestore;return(0,f.FD)(f.FK,{children:[(0,f.Y)(y3.A,{granularity:"second",hourCycle:24,minValue:o,maxValue:a,value:n?(0,y4.tR)(n):void 0,onChange:u,"aria-labelledby":"restore-timestamp",isDisabled:l||t}),(0,f.Y)(be,{timeZone:c,validationError:s}),(0,f.Y)(bn,{value:n,loading:t,onRestore:d,restored:r,error:i,validationError:s})]})}function br(e){var n,t=e.restoreToCommitId,r=e.value,i=e.loading,o=e.restored,a=e.error,l=e.minValue,s=e.maxValue,c=e.isFrozen,u=e.validationError,d=e.timeZone,p=e.onChange,h=e.onRestore,m=(0,rG.A)((n=(0,y._)(function(e){var n;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,e.getCommit({commit:t})];case 1:if((n=r.sent()).error)return[2,n];return[2,{timestamp:n.committer.date,error:null}]}})}),function(e){return n.apply(this,arguments)}),[t]),g=(0,w.useMemo)(function(){if(m&&!m.error)return(0,y5.TL)(new Date(m.timestamp).toISOString(),d)},[m,d]),v=!r||(null==g?void 0:g.compare(r))===0;return((0,w.useEffect)(function(){!r&&g&&p((0,y4.tR)(g))},[r,g,p]),m&&m.error)?(0,f.Y)(tZ.N,{text:m.error,colorway:"negative"}):(0,f.FD)(f.FK,{children:[(0,f.Y)(tZ.N,{colorway:v?"blurple":void 0,text:(0,f.FD)(f.FK,{children:[v?"Restoring database to time of agent rollback":(0,f.FD)(F.S,{row:!0,gap:4,children:["Restoring database to selected timestamp,"," ",(0,f.Y)(eg.$n,{text:"restore to agent rollback",variant:"underlined",size:"small",onClick:function(){g&&p((0,y4.tR)(g))}})]}),(0,f.Y)(F.S,{css:y7.statusDateInput,children:(0,f.Y)(y3.A,{granularity:"second",hourCycle:24,minValue:l,maxValue:s,value:r?(0,y4.tR)(r):void 0,onChange:p,"aria-labelledby":"restore-timestamp",isDisabled:c||i||!r})})]})}),(0,f.Y)(be,{timeZone:d,validationError:u,commitError:null==m?void 0:m.error}),(0,f.Y)(bn,{value:r||g,loading:i,onRestore:h,restored:o,error:a,validationError:u})]})}function bi(e){return(0,f.FD)(f.FK,{children:[(0,f.Y)(c7.J,{variant:"text","aria-label":"restore-timestamp",children:"Timestamp"}),"restoreToCommitId"in e&&e.restoreToCommitId?(0,f.Y)(br,(0,K._)({},e)):(0,f.Y)(bt,(0,K._)({},e))]})}function bo(e){var n,t=e.neonDatabase,r=e.restoreToCommitId,i=(0,n_.A)(),o=(0,y8.Xj)(),a=(0,y8.tB)(o),l=t.historyRetentionSeconds,s=0===l,c=(0,y5.TL)(new Date(t.timeCreated).toISOString(),o).add({minutes:1}),u=a.subtract({seconds:l}),d=u>c?u:c,p=(0,v._)((0,w.useState)(),2),h=p[0],m=p[1],g=(0,v._)((0,w.useState)(),2),y=g[0],b=g[1],S=(0,v._)((0,w.useState)(!1),2),Y=S[0],A=S[1],C=(0,v._)((0,w.useState)(),2),x=C[0],k=C[1],_=(0,v._)((n=(0,K._)({},yJ,{onError:function(e){y6(e,"rollbackNeonDatabase",{replId:i,neonProjectId:t.projectId}),k("Something went wrong.")},onCompleted:function(e){if("RollbackNeonDatabaseResult"!==e.rollbackNeonDatabase.__typename){k(e.rollbackNeonDatabase.message);return}A(!0)}}),l3.n(yX,n)),2),D=_[0],E=_[1].loading;return(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{variant:"subheadDefault",css:y7.title,children:"Restore"}),(0,f.FD)(eo.ui,{elevated:!0,css:y7.card,gap:4,children:[(0,f.Y)(F.S,{children:(0,f.Y)(I.EY,{color:"dimmer",children:"Quickly restore a branch to a point within it's history retention period."})}),t.isFrozen||s?(0,f.Y)(tZ.N,{text:t.isFrozen?"Database is frozen. You cannot restore a database that has been frozen.":"History retention is disabled. You cannot restore a database with history retention disabled.",colorway:"warning",icon:(0,f.Y)(o9.A,{})}):(0,f.Y)(bi,{restoreToCommitId:r,value:h,loading:E,restored:Y,error:x,minValue:d,maxValue:a,isFrozen:t.isFrozen,validationError:y,timeZone:o,onChange:function(e){Y&&(A(!1),k(void 0));var n=(0,y4.uB)(e,o);m(n);var t=(0,y4.uB)(d,o),r=(0,y4.uB)(a,o);if(0>n.compare(t)){var i=y9.format(t.toDate());b("Timestamp is before the databases history retention period (".concat(i,")"));return}if(n.compare(r)>0){b("Timestamp is in the future");return}b(void 0)},onRestore:function(e){if(!e){k("Could not determine restore date");return}D({variables:{input:{neonProjectId:t.projectId,replId:i,timestamp:e.toAbsoluteString()}}})}})]})]})}var ba=[{value:0,title:"Disabled"},{value:21600,title:"6 Hours"},{value:43200,title:"12 Hours"},{value:86400,title:"1 Day"},{value:172800,title:"2 Days"},{value:432e3,title:"5 Days"},{value:604800,title:"7 Days"}];function bl(e){var n=e.currentRetentionPeriod,t=e.loading,r=e.success,i=e.disabled,o=e.onClick,a=e.error,l=(0,v._)((0,w.useState)(n),2),s=l[0],c=l[1],u=r||s!==n;return(0,f.FD)(F.S,{gap:12,children:[(0,f.FD)(F.S,{gap:8,children:[(0,f.Y)(c7.J,{htmlFor:"history-retention-period",children:(0,f.Y)(I.EY,{children:"History Retention Period"})}),(0,f.Y)(R.l,{id:"history-retention-period","aria-labelledby":"history-retention-period",selectedKey:s,onSelectionChange:function(e){c(parseInt(String(e),10))},items:ba,isDisabled:i,children:function(e){return(0,f.Y)(E.nh,{id:e.value,label:e.title},e.value)}})]}),u?(0,f.FD)(f.FK,{children:[(0,f.Y)(tZ.N,{text:"Increasing your retention window will increase your project's storage usage. Decreasing your retention window will prevent you from restoring to a point in time older than the new retention window and will delete any historical data that was being retained beyond it.",colorway:"warning",icon:(0,f.Y)(o9.A,{})}),(0,f.Y)(eg.$n,{text:t?"":r?"Updated":"Confirm",loading:t,iconLeft:t?(0,f.Y)(tn.A,{}):void 0,disabled:!!a||t||r,onClick:function(){return o(s)},colorway:r?"positive":"primary"}),a&&(0,f.Y)(I.EY,{css:y7.error,children:a})]}):null]})}function bs(e){var n,t=e.neonDatabase,r=(0,n_.A)(),i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(),2),s=l[0],c=l[1],u=(0,v._)((n=(0,K._)({},yJ,{onError:function(e){y6(e,"setNeonHistoryRetentionPeriod",{replId:r,neonProjectId:t.projectId}),c("Something went wrong.")},onCompleted:function(e){if("SetNeonDatabaseConfigurationResult"!==e.setNeonDatabaseConfiguration.__typename){c(e.setNeonDatabaseConfiguration.message);return}a(!0)}}),l3.n(y0,n)),2),d=u[0],p=u[1].loading;return(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{variant:"subheadDefault",css:y7.title,children:"History Retention"}),(0,f.FD)(eo.ui,{elevated:!0,css:y7.card,gap:4,children:[(0,f.Y)(F.S,{children:(0,f.Y)(I.EY,{color:"dimmer",children:"Maintain a history of changes for a period of time, enabling features like point-in-time restore and restoring a database back to an agent checkpoint."})}),t.isFrozen||t.isEphemeral?(0,f.Y)(tZ.N,{text:t.isFrozen?"Database is frozen. You cannot update the history retention of a frozen database.":"Temporary databases created on the free Starter plan do not support configurable history retention.",colorway:"warning",icon:(0,f.Y)(o9.A,{})}):null,(0,f.Y)(bl,{currentRetentionPeriod:t.historyRetentionSeconds,loading:p,success:o,disabled:p||t.isFrozen||t.isEphemeral,onClick:function(e){d({variables:{input:{neonProjectId:t.projectId,replId:r,historyRetentionSeconds:e}}})},error:s})]})]})}var bc=t(25584),bu=t(57642),bd=(0,M.x)({link:[B.wp.hover(B.wp.color.accentPrimaryStrongest)],title:B.wp.pb(8),wrapper:[B.wp.flex.grow(1)],card:[B.wp.colWithGap(4),B.wp.p(8),B.wp.borderRadius(8),{outline:"1px solid transparent"}],projectId:[{p:B.wp.color.foregroundDimmer}],remove:[B.wp.py(8)],removeConfirm:[B.wp.p(8),B.wp.colWithGap(8)]});function bp(){var e=(0,sx.ET)(),n=e.orgId,t=e.orgSlug,r=n&&t?"".concat((0,sk.EG)({slug:t}).usage.href,"#postgres-storage"):"/usage#postgres-storage";return(0,f.Y)(yZ(),{legacyBehavior:!0,href:r,passHref:!0,children:(0,f.Y)("a",{css:bd.link,children:(0,f.Y)(I.EY,{children:"View account resource limits"})})})}var bf=function(e){var n=e.replId,t=e.neonDatabase,r=(0,nT.A)().showError,i=(0,v._)((0,vJ.BI)({refetchQueries:[{query:vJ.Or,variables:{input:{replId:n}}}],update:function(e,t,r){var i=t.data,o=r.variables;if(null==i||!i.deleteNeonDatabase||"success"in i.deleteNeonDatabase){var a=e.readQuery({query:vJ.Or,variables:{input:{replId:n}}});o&&(null==a?void 0:a.getNeonDatabases.__typename)==="GetNeonDatabasesResult"&&e.writeQuery({query:vJ.Or,variables:{input:{replId:n}},data:{__typename:"RootQueryType",getNeonDatabases:{__typename:"GetNeonDatabasesResult",databases:a.getNeonDatabases.databases.filter(function(e){return e.databaseId!==o.input.databaseId})}}})}}}),2),o=i[0],a=i[1].loading,l=(0,w.useCallback)(function(){d(!0)},[]),s=(0,w.useCallback)((0,y._)(function(){var e,i,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:return[4,o({variables:{input:{replId:n,databaseId:t.databaseId}}})];case 1:if(i=(e=l.sent()).data,a=e.errors,d(!1),a&&a.length>0)return r("Error when deleting Neon database: ".concat(null==a?void 0:a.join())),vH({action:"removed",success:!1}),[2];if((null==i?void 0:i.deleteNeonDatabase.__typename)!=="DeleteNeonDatabaseResult")return r("Error: ".concat(null==i?void 0:i.deleteNeonDatabase.message)),vH({action:"removed",success:!1}),[2];return(null==i?void 0:i.deleteNeonDatabase.success)?vH({action:"removed",success:!0}):(r("Error: Delete Neon Database failed."),vH({action:"removed",success:!1})),[2]}})}),[o,t.databaseId,n,r]),c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1];return{isPendingDelete:u,cancelDelete:(0,w.useCallback)(function(){d(!1)},[]),removeDatabase:s,deleteLoading:a,handleRemoveDatabaseClick:l}},bh=function(e){var n=bf({replId:e.replId,neonDatabase:e.neonDatabase}),t=n.isPendingDelete,r=n.cancelDelete,i=n.removeDatabase,o=n.deleteLoading,a=n.handleRemoveDatabaseClick;return(0,f.Y)(f.FK,{children:t||o?(0,f.FD)(eo.ui,{css:bd.removeConfirm,elevated:!0,children:[(0,f.Y)(I.EY,{children:"Removing this database will permanently destroy all the data."}),(0,f.Y)(tZ.N,{icon:(0,f.Y)(o9.A,{}),colorway:"warning",text:"This action cannot be undone."}),(0,f.Y)(eg.$n,{text:"Yes, Remove Database",colorway:"negative",disabled:o,iconLeft:(0,f.Y)(rh.A,{}),onClick:i}),(0,f.Y)(eg.$n,{autoFocus:!0,text:"Cancel",disabled:o,onClick:r})]}):(0,f.Y)(eg.$n,{css:bd.remove,text:"Remove Database",disabled:o,iconLeft:(0,f.Y)(rh.A,{}),onClick:a})})};function bm(e){var n,t=e.neonDatabase,r=e.openAtTabData,i=(0,n_.A)(),o=(n=(0,K._)({},yJ,void 0),Q.I(yQ,n)).data,a=(0,w.useMemo)(function(){return function(e){var n,t,r=e.data;if((null==r?void 0:null===(n=r.currentUser)||void 0===n?void 0:n.__typename)==="CurrentUser"){var i=null==r?void 0:null===(t=r.currentUser)||void 0===t?void 0:t.usageInterval;if(i&&"UsageInterval"===i.__typename){var o=i.resources.neonComputeTime.usage,a=i.resources.neonDataStorage.usage,l=(0,bu.h7)(o,{resourceUsageType:"Hours"}),s=(0,bu.h7)(a,{resourceUsageType:"GiB"}),c=new Date(i.endDate).toLocaleString("default",{month:"short",day:"numeric"});return{computeTimeUsageFormatted:"".concat(l," of compute time used this billing period"),storageUsageFormatted:"".concat(s," of storage used this billing period"),renewalInfo:"Renews ".concat(c," ")}}}}({data:o})},[o]),l=(0,i$._P)({controlName:y1.g5,logFlagToAnalytics:!1}),s=(0,i$._P)({controlName:y1.vA,logFlagToAnalytics:!1});return(0,f.FD)(F.S,{justify:"space-between",css:bd.wrapper,children:[(0,f.FD)(F.S,{gap:12,children:[(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{variant:"subheadDefault",css:bd.title,children:"Database ID"}),(0,f.Y)(eo.ui,{elevated:!0,css:bd.card,children:(0,f.Y)(bc.Ay,{css:bd.projectId,children:"".concat(t.projectId)})})]}),(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{variant:"subheadDefault",css:bd.title,children:"Account resource usage"}),(0,f.Y)(eo.ui,{elevated:!0,css:bd.card,children:a?(0,f.FD)(f.FK,{children:[(0,f.FD)(F.S,{children:[(0,f.Y)(I.EY,{color:"dimmer",multiline:!1,children:null==a?void 0:a.computeTimeUsageFormatted}),(0,f.Y)(I.EY,{color:"dimmer",multiline:!1,children:null==a?void 0:a.storageUsageFormatted}),(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:null==a?void 0:a.renewalInfo})]}),(0,f.Y)(bp,{})]}):(0,f.Y)(F.S,{justify:"center",row:!0,children:(0,f.Y)(tn.A,{})})})]}),l?(0,f.Y)(bo,{neonDatabase:t,restoreToCommitId:null==r?void 0:r.restoreToCommitId}):null,s?(0,f.Y)(bs,{neonDatabase:t}):null]}),(0,f.Y)(bh,{replId:i,neonDatabase:t})]})}var bg=function(e){var n=e.size;return(0,f.FD)("svg",{viewBox:"0 0 128 36",preserveAspectRatio:"xMidYMin",height:void 0===n?16:n,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"#12FFF7"}),(0,f.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#a)"}),(0,f.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#b)"}),(0,f.Y)("path",{d:"M29.793 0A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36a.62.62 0 0 0 .62-.62v-19.2c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V1.241C31.035.556 30.479 0 29.793 0Z",fill:"#B9FFB3"}),(0,f.Y)("path",{d:"M60.686 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L61.082 26h3.938V10.6h-4.334ZM73.054 22.568V19.84h9.702v-3.278h-9.702v-2.53h11.77V10.6H68.632V26h16.434v-3.432H73.054ZM96.583 26.506c6.094 0 10.054-2.992 10.054-8.206 0-5.214-3.96-8.206-10.054-8.206S86.551 13.086 86.551 18.3c0 5.214 3.938 8.206 10.032 8.206Zm0-3.652c-3.388 0-5.478-1.65-5.478-4.554 0-2.904 2.112-4.554 5.478-4.554 3.388 0 5.478 1.65 5.478 4.554 0 2.904-2.09 4.554-5.478 4.554ZM123.249 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L123.645 26h3.938V10.6h-4.334Z",fill:"currentColor"}),(0,f.FD)("defs",{children:[(0,f.FD)("linearGradient",{id:"a",x1:"36",y1:"36",x2:"4.345",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,f.Y)("stop",{stopColor:"#B9FFB3"}),(0,f.Y)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,f.FD)("linearGradient",{id:"b",x1:"36",y1:"36",x2:"14.617",y2:"27.683",gradientUnits:"userSpaceOnUse",children:[(0,f.Y)("stop",{stopColor:"#1A1A1A",stopOpacity:".9"}),(0,f.Y)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})},bv=(0,nD.AH)([B.wp.color.foregroundDimmest,{textDecoration:"underline"}]),bw=function(){return(0,f.Y)(F.S,{gap:8,css:[B.wp.py(8),B.wp.width("100%")],children:(0,f.FD)(F.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)("a",{target:"_blank",href:w1,css:bv,children:"Docs"}),(0,f.FD)(F.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(I.EY,{css:[B.wp.fontSize(14)],multiline:!1,children:"Powered by"}),(0,f.Y)(bg,{})]})]})})},by=t(85014);function bb(){return(0,f.Y)("div",{children:"Loading..."})}var bS=t.n(by)()(function(){return Promise.all([t.e(1768),t.e(1974),t.e(2469)]).then(t.bind(t,72469)).then(function(e){return e.DrizzleStudio_DO_NOT_USE_OR_YOU_WILL_BE_FIRED})},{loadableGenerated:{webpack:function(){return[72469]}},ssr:!1,loading:function(){return(0,f.Y)(bb,{})}}),bY=function(e){var n,r=(0,v._)((0,w.useState)((0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,t.e(8017).then(t.bind(t,98017))];case 1:return[2,e.sent().neon]}})})),1)[0];return(0,w.useCallback)((n=(0,y._)(function(n){var t,i,o=arguments;return(0,b.YH)(this,function(a){switch(a.label){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:[],i=o.length>2?o[2]:void 0,[4,r];case 1:return[4,a.sent()(e)(n,t,{arrayMode:(null==i?void 0:i.mode)==="array"})];case 2:return[2,a.sent()]}})}),function(e){return n.apply(this,arguments)}),[r,e])};function bA(e){var n=e.connectionString,t=e.databaseId,r=bY(n);return(0,t5.M)(t4.AZ.DRIZZLE_STUDIO_USED,{action:"opened"}),(0,f.Y)(bS,{databaseId:"".concat(t.toString(),"-").concat(n),queryFn:r})}var bC=t(1376),bx=t(5839),bk=t(53077),b_=t.n(bk),bD=t(34921),bE={tab:{color:"--tab-color",borderBottomColor:"--tab-border-bottom-color"},tabList:{boxShadow:"--tab-list-box-shadow"}},bR=function(e){return"var(".concat(e,")")},bI=(0,M.x)({tab:[B.wp.display.flex,B.wp.reset.button,B.wp.position.relative,B.wp.rowWithGap(8),B.wp.p(8),B.wp.borderRadius(4,4,0,0),B.wp.align.center,{marginBottom:-1,color:bR(bE.tab.color),userSelect:"none"},oW.b.listItem,{paddingBottom:7,borderWidth:0,borderBottomWidth:"1px",borderBottomColor:bR(bE.tab.borderBottomColor)},{".with-dividers &":{"&:not(:last-child)":{marginRight:1},"&:not(:last-child)::after":{content:'""',position:"absolute",display:"block",width:1,height:16,backgroundColor:ez.LU.outlineDefault,right:-1}}}],tabSpan:[{display:"inline-block",lineHeight:1}],tabList:[B.wp.display.flex,B.wp.flex.grow(0),B.wp.flex.row,B.wp.align.stretch,{paddingBottom:1,boxShadow:bR(bE.tabList.boxShadow)}],tabPanel:[B.wp.focusRing,{'&[data-inert="true"]':{display:"none"}}]}),bF=function(e){var n,t=e.isSelected,r=e.isFocused,i=e.isDisabled,o="transparent";r?o=ez.LU.accentPrimaryDefault:t&&(o=ez.LU.foregroundDefault);var a=ez.LU.foregroundDimmer;return t?a=ez.LU.foregroundDefault:i&&(a=ez.LU.foregroundDimmest),n={},(0,g._)(n,bE.tab.color,a),(0,g._)(n,bE.tab.borderBottomColor,o),n},bT=function(e){var n=e.withUnderline;return(0,g._)({},bE.tabList.boxShadow,n?"inset 0 -1px 0 ".concat(ez.LU.outlineDimmest):"none")};function bP(e){var n=e.children,t=e.onSelectionChange,r=e.defaultSelectedKey,i=(0,t8._)(e,["children","onSelectionChange","defaultSelectedKey"]);return(0,bC.wR)()?null:(0,f.Y)(sJ.tU,(0,e7._)((0,K._)({},i),{onSelectionChange:t,defaultSelectedKey:r,children:n}))}var bL=(0,w.forwardRef)(function(e,n){var t=e.children,r=e.withUnderline,i=e.withDividers,o=e.className,a=(0,t8._)(e,["children","withUnderline","withDividers","className"]);return(0,f.Y)(sJ.wb,(0,e7._)((0,K._)({ref:n},a),{className:b_()(o,void 0!==i&&i&&"with-dividers"),css:bI.tabList,style:bT({withUnderline:void 0===r||r}),children:t}))}),bU=(0,w.forwardRef)(function(e,n){var t=e.children,r=e.id,i=(0,t8._)(e,["children","id"]);return(0,f.Y)(sJ.Kp,(0,e7._)((0,K._)({id:r,ref:n},i),{css:bI.tabPanel,children:t}))}),bN=(0,w.forwardRef)(function(e,n){var t=e.children,r=e.iconLeft,i=e.iconRight,o=e.as,a=e.href,l=e.shallow,s=e.scroll,c=(0,t8._)(e,["children","iconLeft","iconRight","as","href","shallow","scroll"]),u=(0,K._)((0,e7._)((0,K._)({},c),{css:bI.tab,style:function(e){return bF({isSelected:e.isSelected,isFocused:e.isFocusVisible,isDisabled:e.isDisabled})}}),(0,bD.J)({as:o,href:a,shallow:l,scroll:s}));return"function"==typeof t?(0,f.Y)(sJ.oz,(0,e7._)((0,K._)({ref:n},u),{children:function(e){return(0,f.FD)(f.FK,{children:[r,(0,f.Y)("span",{css:bI.tabSpan,children:t(e)}),i]})}})):(0,f.FD)(sJ.oz,(0,e7._)((0,K._)({ref:n},u),{children:[r,(0,f.Y)("span",{css:bI.tabSpan,children:t}),i]}))});function bO(e){var n=e.children;return"function"==typeof n?(0,f.Y)(bx.pM,{children:n}):(0,f.Y)(f.FK,{children:n})}var bM=(0,M.x)({wrapper:[B.wp.flex.column,B.wp.flex.grow(1)],studioTabPanel:[B.wp.flex.column,B.wp.flex.grow(1)],overviewTabPanel:[B.wp.colWithGap(8),B.wp.flex.column,B.wp.flex.grow(1),B.wp.p(12)],docs:[vB.h,B.wp.maxWidth("100%")],footer:[B.wp.pt(16),B.wp.px(8)],settingsTabPanel:[B.wp.flex.column,B.wp.flex.grow(1),B.wp.p(12)],title:[B.wp.py(8),B.wp.my(8),{borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:ez.LU.outlineDefault}]}),bB=function(e){var n,t=e.neonDatabases,r=e.currentUser,i=e.performPaneOperation,o=(0,i$._P)({controlName:"flag-detective-pikachu"}),a=t[0],l=(0,n_.A)(),s=yh(),c=s.selectedTab,u=s.selectTab,d=s.openAtTab,p=(0,eO.md)(eB);if("string"!=typeof vO({connectionString:a.connectionString,databaseName:a.databaseName}).get(vT))throw Error("Expected host to be set");var h=p||((n=new URL(a.connectionString.replace("postgres://","https://").replace("postgresql://","https://"))).pathname="/".concat(a.databaseName),n.search="?sslmode=require",n.toString().replace("https://","postgresql://"));return(0,f.FD)(bP,{css:bM.wrapper,onSelectionChange:u,selectedKey:c,children:[(0,f.FD)(bL,{withDividers:!1,children:[(0,f.Y)(bN,{id:"overview",iconLeft:(0,f.Y)(rd.A,{}),children:"Overview"}),o?(0,f.Y)(bN,{id:"drizzle-studio",iconLeft:(0,f.Y)(tQ.A,{}),isDisabled:a.isFrozen,children:"My Data"}):null,(0,f.Y)(bN,{id:"commands",iconLeft:(0,f.Y)(hT.A,{}),children:"Commands"}),(0,f.Y)(bN,{id:"settings",iconLeft:(0,f.Y)(af.A,{}),children:"Settings"})]}),(0,f.FD)(bO,{children:[(0,f.Y)(bU,{id:"overview",css:bM.overviewTabPanel,children:(0,f.Y)(yV,{neonDatabase:a,currentUser:r,replId:l,connectionString:h,performPaneOperation:i})}),o?(0,f.Y)(bU,{id:"drizzle-studio",css:bM.studioTabPanel,children:a.isFrozen?(0,f.Y)(tZ.N,{text:"This database is frozen and cannot be used.",colorway:"warning",icon:(0,f.Y)(o9.A,{})}):(0,f.Y)(bA,{connectionString:h,databaseId:a.databaseId})}):null,(0,f.FD)(bU,{id:"commands",css:bM.overviewTabPanel,children:[(0,f.Y)(bc.Ay,{css:bM.docs,children:"\nPostgreSQL is a powerful open source relational database system that is widely used in web applications and other software development projects. You can easily create a production-ready PostgreSQL database directly within Replit. For more information on PostgreSQL, visit the [official documentation](https://www.postgresql.org/docs/). Repls use PostgreSQL version 15.\n\nHere is some information to help you get started:\n\n1. Replit databases are backed by [Neon](https://neon.tech/). The [Neon documentation](https://neon.tech/docs/connect/connect-from-any-app#connection-examples) provides guides on how to connect various frameworks, such as Django, to your PostgreSQL database.\n\n1. Environment Variables: We provided environment variables `DATABASE_URL`, `PGDATABASE`, `PGHOST`, `PGHOST`, `PGPORT`, `PGUSER`, `PGPASSWORD`. Provide these values to your framework of choice to connect to your database.\n\n1. Connection pooling: See [Neon documentation](https://neon.tech/docs/connect/connection-pooling) for connection pooling.\n\n1. Compute lifecycle: Neon databases go to sleep after 5 minutes of inactivity. You may experience disconnects or reconnects depending on your client.\n"}),(0,f.Y)(F.S,{css:bM.title,children:(0,f.Y)(I.EY,{variant:"subheadBig",multiline:!1,children:"Environment variables"})}),(0,f.Y)(vV,{connectionString:h,databaseName:a.databaseName})]}),(0,f.Y)(bU,{id:"settings",css:bM.settingsTabPanel,children:(0,f.Y)(bm,{neonDatabase:a,openAtTabData:(null==d?void 0:d.type)==="settings"&&(null==d?void 0:d.data)?d.data:void 0})})]}),(0,f.Y)(F.S,{css:bM.footer,children:(0,f.Y)(bw,{})})]})};function bH(){var e=(0,$._)(["\n  query NeonStartPage($replId: String!) {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          resources {\n            neonComputeTime {\n              allotment\n              usage\n            }\n            neonDataStorage {\n              allotment\n              usage\n            }\n          }\n        }\n      }\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          createDatabase {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return bH=function(){return e},e}var bz={},bW=(0,J.J1)(bH()),bG=t(28113),bV=t(9816),bj=(0,M.x)({cta:[B.wp.width("100%"),B.wp.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[B.wp.colWithGap(8),B.wp.align.center],ctaStatusBanner:[B.wp.textAlign.left],payment:[B.wp.p(16),B.wp.borderRadius(12),B.wp.textAlign.left,B.wp.shadow(2)],detailsItem:[B.wp.display.grid,B.wp.gap(16),{gridTemplateColumns:"56px auto",gap:16}],detailsText:[B.wp.flex.growAndShrink(1),B.wp.textAlign.left]});function bZ(e){var n=e.loading,t=e.createDatabaseAuthz,r=e.handleOnCreate,i=e.refetchUbbCapabilitiesQueryData,o=e.setShowPaymentMethodForm,a=e.showPaymentMethodForm,l=e.setShowSupportForm,s=e.replId,c=(0,i2.m6)();if(!t)return(0,f.Y)(F.S,{css:bj.ctaContainer,children:(0,f.Y)(tn.A,{})});if(!t.isAuthorized&&c)return(0,f.Y)(tZ.N,{text:t.message,colorway:"warning",icon:(0,f.Y)(o9.A,{}),css:bj.ctaStatusBanner});switch(t.code){case my.S4.RequiresPaymentMethodOrSubscription:case my.S4.RequiresActiveSubscription:return(0,f.FD)(F.S,{css:bj.ctaContainer,children:[(0,f.Y)(i8.A,{context:"workspace_postgresql_pane",text:"Upgrade your plan to create a database",css:bj.cta,colorway:"primary",variant:"outlined",disabled:a,onPlanCheckoutComplete:i}),(0,f.Y)(eg.$n,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:bj.cta,disabled:a,loading:n,iconLeft:(0,f.Y)(cy.A,{}),onClick:function(){return o()}})]});case my.S4.RequiresSmsVerification:return(0,f.Y)(vQ.A,{context:my.SG.Neon,onSuccess:i});case my.S4.RequiresPaymentMethod:return(0,f.Y)(eg.$n,{colorway:"primary",text:"Add a payment method",css:bj.cta,disabled:a,loading:n,iconLeft:(0,f.Y)(cy.A,{}),onClick:function(){return o()}});case my.S4.RequiresUnbanning:return(0,f.Y)(uF.d,{text:"Your account currently has restrictions on creating a database. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,f.Y)(o9.A,{}),css:bj.ctaStatusBanner,onClick:function(){return l()}});case my.S4.InsufficientBudget:return(0,f.FD)(f.FK,{children:[(0,f.Y)(tZ.N,{text:"You've reached your monthly usage budget. Increase your budget to create a database.",colorway:"warning",icon:(0,f.Y)(o9.A,{}),css:bj.ctaStatusBanner}),(0,f.Y)(v0.h,{onUpdateSuccess:i,replId:s})]});case my.S4.FeatureDisabled:case my.S4.FeatureUnsupportedForReplitTeams:case my.S4.FeatureUnsupportedForTeamsEdu:case my.S4.FeatureUnsupportedForTeamsFree:case my.S4.FeatureUnsupportedForTeamsPro:case my.S4.InsufficientPermissions:case my.S4.InsufficientQuota:case my.S4.RequiresActiveTeamsSubscription:case my.S4.RequiresEmailVerification:return(0,f.Y)(tZ.N,{text:t.message,colorway:"warning",icon:(0,f.Y)(o9.A,{}),css:bj.ctaStatusBanner});case my.S4.Authorized:case my.S4.AuthorizedQuota:return(0,f.Y)(eg.$n,{colorway:"primary",onClick:r,css:bj.cta,text:n?"":"Create a database",iconLeft:n?(0,f.Y)(tn.A,{}):(0,f.Y)(f.FK,{}),loading:n});default:(0,aK.A)(t.code)}}var bq=function(){var e,n=(0,v._)((0,w.useState)(!1),2),t=n[0],r=n[1],i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,n_.A)(),s=(0,nT.A)().showError,c=(e=(0,K._)({},bz,{notifyOnNetworkStatusChange:!0,variables:{replId:l},onError:function(e){s(e.message)}}),Q.I(bW,e)),u=c.loading,d=c.data,p=c.refetch,h=(0,A.A)(),m=h.psql,g=vG(h.secrets),S=(0,v._)((0,vJ.ou)({refetchQueries:[{query:vJ.Or,variables:{input:{replId:l}}}],onError:function(e){s("Error when creating Neon database: ".concat(e.message)),vH({action:"created",success:!1})},update:function(e,n){var t=n.data;(null==t?void 0:t.createNeonDatabase.__typename)==="CreateNeonDatabaseResult"&&e.writeQuery({query:vJ.Or,variables:{input:{replId:l}},data:{__typename:"RootQueryType",getNeonDatabases:{__typename:"GetNeonDatabasesResult",databases:[t.createNeonDatabase.database]}}})},onCompleted:function(e){return(0,y._)(function(){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if((null==e?void 0:e.createNeonDatabase.__typename)!=="CreateNeonDatabaseResult")return[3,5];if(!(0,bV.I)(e.createNeonDatabase.database))return s("Error: could not create database, please try again"),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,m.ensureNixPsqlModuleInstalled(!0)];case 2:return r.sent(),g({connectionString:(n=e.createNeonDatabase.database).connectionString,databaseName:n.databaseName}),vH({action:"created",success:!0}),[3,4];case 3:return t=r.sent(),s("Error: ".concat(t.message)),[3,4];case 4:return[3,6];case 5:return s("Error: ".concat(null==e?void 0:e.createNeonDatabase.message)),vH({action:"created",success:!1}),[2];case 6:return[2]}})})()}}),2),Y=S[0],C=S[1].loading,x=(null==d?void 0:d.repl.__typename)==="Repl"?d.repl.authorizations.createDatabase:void 0;return(0,f.FD)(f.FK,{children:[(0,f.Y)(lC.a,{isOpen:o,onRequestClose:function(){return a(!1)},children:(0,f.Y)(v1.A,{onRequestClose:function(){return a(!1)}})}),(0,f.Y)(tV.A,{pane:{type:"neon"},maxWidth:450,body:(0,f.FD)(F.S,{gap:16,children:[(0,f.FD)(F.S,{css:bj.detailsItem,children:[(0,f.Y)(bG.Y9,{}),(0,f.FD)(I.EY,{css:bj.detailsText,children:["Get charged for what you use across compute time and storage (",(0,f.Y)("a",{href:w2,target:"_blank",rel:"noopener",children:"see pricing"}),")."]})]}),(0,f.FD)(F.S,{css:bj.detailsItem,children:[(0,f.Y)(bG.iw,{}),(0,f.FD)(I.EY,{css:bj.detailsText,children:["Replit ",i5.en," members receive $",aG.Qz,"/month in credits to offset expenses (",(0,f.Y)("a",{href:w2,target:"_blank",rel:"noopener",children:"see allocations"}),")."]})]})]}),action:(0,f.FD)(F.S,{gap:8,children:[(0,f.Y)(tj.v,{href:w1,variant:"nofill",target:"_blank",rel:"noopener",iconLeft:(0,f.Y)(tq.A,{}),text:"Learn more"}),(0,f.Y)(bZ,{replId:l,loading:u||C,createDatabaseAuthz:x,handleOnCreate:function(){Y({variables:{input:{replId:l}}})},refetchUbbCapabilitiesQueryData:p,setShowPaymentMethodForm:function(){return r(!0)},showPaymentMethodForm:t,setShowSupportForm:function(){return a(!0)}}),t?(0,f.Y)(eo.ui,{elevated:!0,css:bj.payment,children:(0,f.Y)(cG.y,{onSuccess:(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return r(!1),[4,p()];case 1:return e.sent(),[2]}})}),context:"workspace_postgresql_pane"})}):null]})})]})},bK=t(16902);let b$=function(e){var n=e.performPaneOperation,t=(0,bK.q)(),r=t.loading,i=t.neonDatabases,o=t.currentUser,a=(0,eO.md)(eM);return a&&o?(0,f.Y)(bB,{neonDatabases:[a],currentUser:o,performPaneOperation:n}):0===i.length&&r?(0,f.Y)(tV.A,{pane:{type:"neon"},maxWidth:450,loading:!0}):i.length>0&&o?(0,f.Y)(bB,{neonDatabases:i,currentUser:o,performPaneOperation:n}):(0,f.Y)(bq,{})};var bJ=t(27344),bQ=h.ZU.Object({type:h.ZU.Literal("neon"),data:h.ZU.Optional(h.ZU.Object({openAtTab:yu}))}),bX={Content:function(e){var n=e.pane.data,t=e.options;return(0,f.Y)(ym,{initialOpenAtTab:null==n?void 0:n.openAtTab,performPaneOperation:t.performPaneOperation,children:(0,f.Y)(b$,{performPaneOperation:t.performPaneOperation})})},Icon:function(e){var n=e.size;return(0,f.Y)(n$.Vx.Provider,{value:{color:ez.LU.blueStrongest,size:n},children:(0,f.Y)(bJ.A,{})})},getTitle:function(){return"Database"},description:"Fully-managed, usage-based PostgreSQL database with 10GB of fast read/write storage",category:nq.bY.CloudServices,decode:function(e){return m.WT.Decode(bQ,e)}},b0=t(77167),b1=t(83353),b2=t(61937),b4=t(99091),b5=t(57667),b8="VNC ports do not require external port",b3=(0,M.x)({self:[B.wp.p(12),B.wp.colWithGap(16)],secondaryUrl:[B.wp.color.foregroundDimmest,B.wp.fontSize("small"),B.wp.focusRing,{"&:hover":[B.wp.cursor.pointer,B.wp.color.accentPrimaryStrongest]}],portHeader:[B.wp.align.baseline],openPort:[B.wp.color.accentPositiveStronger],localPortIcon:[B.wp.color.foregroundDefault,B.wp.px(4),{flex:"0 0 auto",marginLeft:"auto"}],portStatus:[B.wp.py(0),B.wp.px(4),B.wp.overflow("hidden")],newPort:[B.wp.color.foregroundDefault,B.wp.rowWithGap(4),B.wp.align.center,B.wp.my(1),B.wp.borderRadius(16),B.wp.height(20)],externalPortButton:[{"&":[B.wp.height(20),B.wp.borderRadius(16),B.wp.color.foregroundDefault]}],textButton:[B.wp.cursor.pointer,B.wp.reset.button,B.wp.color.accentPrimaryStronger,B.wp.focusRing,B.wp.hover(B.wp.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],newPortInput:[B.wp.height(20),B.wp.my(1)],newPortClose:B.wp.mr(4),vncTooltip:[B.wp.flex.growAndShrink(1)]});function b6(e){var n,t,r,i=e.localPort,o=e.externalPort,a=e.isLocalhost,l=e.onPortChange,s=(0,A.A)().ports.updateDotReplitPortsMapping,c=(n=(0,A.A)().ports,r=new Set(null==(t=(0,et.A)(n.portsState))?void 0:t.map(function(e){var n;return null!==(n=(0,b1.Zd)(e.configuration))&&void 0!==n&&n}).filter(Boolean)),Array.from(b1.ZA).sort(function(e,n){return e-n}).map(function(e){return{isAvailable:!r.has(e),externalPort:e}}));return(0,f.Y)(F.S,{row:!0,children:void 0!==o&&0!==o?(0,f.Y)(eg.$n,{css:b3.externalPortButton,iconRight:(0,f.Y)(dX.A,{}),text:":".concat(o),size:"small",onClick:function(){i&&(s(i,void 0,a),null==l||l())}}):(0,f.Y)(b5.in,{label:"Set external port",onAction:function(e){if(i){var n=c.find(function(n){return String(n.externalPort)===e});n&&n.isAvailable&&(s(i,n.externalPort,a),null==l||l())}},children:c.map(function(e){var n=e.isAvailable,t=e.externalPort;return(0,f.Y)(b5.Dr,{id:String(t),"aria-label":String(t),isDisabled:!n,label:":".concat(t)},String(t))})})})}function b7(e){var n=e.portState,t=null;switch(n.configuration.type){case b1.gH.MISCONFIGURED:t=(0,f.Y)(rc.m_,{tooltip:"Port misconfigured",delay:"default",children:(0,f.Y)(o9.A,{})});break;case b1.gH.CONFIG_MISSING:t=(0,f.Y)(rc.m_,{tooltip:"Configuration missing",delay:"default",children:(0,f.Y)(o9.A,{})});break;case b1.gH.NO_MORE_EXTERNAL_PORTS_AVAILABLE:t=(0,f.Y)(o9.A,{});break;case b1.gH.FORWARDED:t=(0,f.Y)(tf.A,{});case b1.gH.INTERNAL_ONLY:}return(0,f.Y)("span",{css:b3.localPortIcon,children:t})}function b9(e){var n=e.portState,t=e.width,r=(0,b1.s$)(n.configuration)?"localhost":"0.0.0.0";return(0,f.FD)(b2.VP,{width:t||130,children:[(0,f.FD)(I.EY,{css:n.isOpen&&b3.openPort,children:[r,":",n.configuration.localPort]}),(0,f.Y)(b7,{portState:n})]})}function Se(e){var n=e.portState,t=e.openWebview,r=e.openVncOutput,i=e.width;if(n.configuration.type===b1.gH.NO_MORE_EXTERNAL_PORTS_AVAILABLE)return(0,f.Y)(b2.VP,{width:i||180,children:(0,f.Y)(tZ.N,{css:b3.portStatus,icon:(0,f.Y)(o9.A,{}),text:"No ports available"})});var o=!!r&&n.configuration.isVnc,a=!o&&!!t&&n.isOpen&&n.configuration.type===b1.gH.FORWARDED;return(0,f.FD)(b2.VP,{width:i||180,children:[n.configuration.isVnc?(0,f.Y)(rc.m_,{tooltip:b8,css:b3.vncTooltip,children:(0,f.Y)(tZ.N,{css:b3.portStatus,icon:(0,f.Y)(rd.A,{}),text:b8})}):(0,f.Y)(b6,{localPort:n.configuration.localPort,externalPort:(0,b1.Zd)(n.configuration),isLocalhost:(0,b1.s$)(n.configuration)}),a?(0,f.Y)(ev.K0,{alt:"Open in Webview",onClick:t,css:B.wp.color.foregroundDefault,children:(0,f.Y)(rM.A,{})}):null,o?(0,f.Y)(ev.K0,{alt:"View VNC output",onClick:r,css:B.wp.color.foregroundDefault,children:(0,f.Y)(rM.A,{})}):null]})}function Sn(e){var n,t=e.portState;return t.isOpen?(0,f.FD)(f.FK,{children:[(0,f.Y)(b2.VP,{width:100,children:(n=t.processInfo.cmdline[0].split("/"))[n.length-1]}),(0,f.Y)(b2.VP,{width:100,children:t.processInfo.pid})]}):(0,f.Y)(b2.VP,{width:100})}var St=function(e){return e.OPEN_WEBVIEW="OPEN_WEBVIEW",e.OPEN_VNC_OUTPUT="OPEN_VNC_OUTPUT",e.EXTERNAL_LINK="EXTERNAL_LINK",e.REMOVE="REMOVE",e}(St||{});function Sr(e){var n=e.portState,t=e.onAction,r=[{label:"Open external link",key:"EXTERNAL_LINK",icon:(0,f.Y)(ru.A,{})},{label:"Remove port config",key:"REMOVE",icon:(0,f.Y)(rh.A,{})}];return n.configuration.isVnc?r.unshift({label:"View VNC output",key:"OPEN_VNC_OUTPUT",icon:(0,f.Y)(rM.A,{})}):r.unshift({label:"Open webview",key:"OPEN_WEBVIEW",icon:(0,f.Y)(rM.A,{})}),(0,f.Y)(b2.VP,{width:30,last:!0,children:(0,f.Y)(b5.in,{trigger:(0,f.Y)(ev.K0,{alt:"More",children:(0,f.Y)(cn.A,{})}),items:r,onAction:function(e){switch(e){case"OPEN_WEBVIEW":case"OPEN_VNC_OUTPUT":case"EXTERNAL_LINK":case"REMOVE":t({type:e,payload:{portState:n}})}},children:function(e){return(0,f.Y)(b5.Dr,{label:e.label,icon:e.icon},e.key)}})})}function Si(e){var n=e.portState,t=e.portAction;return(0,f.FD)(b2.fI,{children:[(0,f.Y)(b9,{portState:n}),(0,f.Y)(Se,{portState:n,openWebview:function(){t({type:"OPEN_WEBVIEW",payload:{portState:n}})},openVncOutput:function(){t({type:"OPEN_VNC_OUTPUT",payload:{portState:n}})}}),(0,f.Y)(Sn,{portState:n}),(0,f.Y)(Sr,{portState:n,onAction:t})]},n.configuration.localPort)}var So=function(e){var n=e.text,t=e.onClick;return(0,f.Y)("button",{css:b3.textButton,onClick:t,children:n})};function Sa(e){var n,t=e.openDotReplit,r=(0,v._)((0,w.useState)(!1),2),i=r[0],o=r[1],a=(0,v._)((0,w.useState)(),2),l=a[0],s=a[1],c=null===(n=(0,A.A)().ports.portsState.current)||void 0===n?void 0:n.some(function(e){return e.configuration.localPort===l});return i?(0,f.FD)(b2.fI,{children:[(0,f.FD)(b2.VP,{width:130,children:[(0,f.Y)(ev.K0,{css:b3.newPortClose,alt:"Close",onClick:function(){return o(!1)},size:18,children:(0,f.Y)(dX.A,{})}),(0,f.Y)(ew.pd,{css:b3.newPortInput,value:(null==l?void 0:l.toString())||"",onChange:function(e){return s(e.target.value?parseInt(e.target.value,10):void 0)}})]}),(0,f.Y)(b2.VP,{children:c?(0,f.Y)(tZ.N,{css:b3.portStatus,colorway:"warning",text:"Local port already exists"}):(0,f.Y)(b6,{localPort:l,isLocalhost:!1,onPortChange:function(){return o(!1)}})})]}):(0,f.FD)(b2.fI,{children:[(0,f.Y)(b2.VP,{width:130,children:(0,f.Y)(eg.$n,{css:b3.newPort,iconLeft:(0,f.Y)(rf.A,{size:12}),text:"New port",size:"small",onClick:function(){return o(!0)}})}),(0,f.Y)(b2.VP,{children:(0,f.FD)(I.EY,{variant:"small",children:["This port config is saved in the"," ",(0,f.Y)(So,{text:".replit file",onClick:t}),"."," "]})})]})}function Sl(e){var n,t=e.openDotReplit,r=e.openWebview,i=e.openVncOutput,o=e.ports,a=e.container,l=(0,iI.A)(),s=(0,b0.Ik)({container:a,ports:o,addDevToolsSuffix:!l}),c=(0,nT.A)().showError,u=(0,A.A)().ports,d=u.portsState,p=u.removeDotReplitPortsMapping,h=function(e){switch(e.type){case"OPEN_WEBVIEW":r(e.payload.portState.configuration.localPort);break;case"OPEN_VNC_OUTPUT":i();break;case"EXTERNAL_LINK":var n=(0,b1.Zd)(e.payload.portState.configuration);if(!(null==s?void 0:s.presentationUrl)){c("URL not available.");return}var t=(0,b0.jq)(null==s?void 0:s.presentationUrl,n).toString();window.open(t,"_blank");break;case"REMOVE":p(e.payload.portState.configuration.localPort,(0,b1.Zd)(e.payload.portState.configuration))}};return(0,f.FD)(F.S,{css:b3.self,children:[(null==s?void 0:s.presentationUrl)?(0,f.FD)(f.FK,{children:[(0,f.Y)(b4.A,{url:s.presentationUrl}),(0,f.Y)(l5.a,{})]}):null,(0,f.FD)(F.S,{gap:4,children:[(0,f.FD)(F.S,{css:b3.portHeader,row:!0,gap:8,children:[(0,f.Y)(I.EY,{children:"Ports"}),(0,f.Y)(yZ(),{legacyBehavior:!0,href:"https://docs.replit.com/replit-workspace/workspace-features/webview",passHref:!0,children:(0,f.Y)("a",{css:b3.secondaryUrl,target:"_blank",children:"Learn more"})})]}),(0,f.FD)(b2.XI,{children:[(0,f.FD)(b2.fI,{children:[(0,f.Y)(b2.VP,{header:!0,width:130,children:"Internal Port"}),(0,f.Y)(b2.VP,{header:!0,width:180,children:"External Port"}),(0,f.Y)(b2.VP,{header:!0,width:100,children:"Name"}),(0,f.Y)(b2.VP,{header:!0,width:100,children:"Pid"})]}),d.current&&(null===(n=d.current)||void 0===n?void 0:n.length)>0?d.current.map(function(e){return(0,f.Y)(Si,{portState:e,portAction:h},e.configuration.localPort)}):null,(0,f.Y)(Sa,{openDotReplit:t})]})]})]})}var Ss=t(35121),Sc=h.ZU.Object({type:h.ZU.Literal("networking")}),Su={Content:function(e){var n,t=e.options.performPaneOperation,r=(0,nT.A)().showError,i=(0,A.A)(),o=i.fs,a=i.container,l=i.ports;return(0,f.Y)(Sl,{openDotReplit:(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,o.stat(".replit")];case 1:if(!e.sent().exists)return r("Could not find .replit configuration file."),[2];return t({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:".replit"}}}),[2]}})}),openWebview:(n=(0,y._)(function(e){return(0,b.YH)(this,function(n){return t({operation:"open",pane:{type:"webview",data:{ports:e?{type:"local",port:e}:void 0}},secondary:!0}),[2]})}),function(e){return n.apply(this,arguments)}),openVncOutput:(0,y._)(function(){return(0,b.YH)(this,function(e){return t({operation:"open",pane:{type:"vnc"},secondary:!0}),[2]})}),container:a,ports:l})},Icon:function(e){var n=e.size;return(0,f.Y)(Ss.A,{size:n})},getTitle:function(){return"Networking"},description:"Configure web server ports for your App",category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(Sc,e)}},Sd=t(92395),Sp=t(25757),Sf=h.ZU.Object({type:h.ZU.Literal("objectStorage")}),Sh={Content:Sd.A,Icon:function(e){var n=e.size;return(0,f.Y)(n$.Vx.Provider,{value:{color:ez.LU.tealStrongest,size:n},children:(0,f.Y)(Sp.A,{})})},getTitle:function(){return"Object Storage"},description:"Persistent, shared file storage which can be accessed programmatically in your App",category:nq.bY.CloudServices,decode:function(e){return m.WT.Decode(Sf,e)}},Sm=t(98810),Sg=t.n(Sm),Sv=t(64112),Sw=t(15666),Sy=(0,M.x)({create:[B.wp.p(8)],canvas:{width:"100%",height:"100%",outline:"none",position:"absolute",top:0,left:0}});function Sb(e){var n=e.data,t=e.onSave,r=(0,w.useRef)(null),i=(0,w.useRef)(null),o=(0,A.A)().fs,a=(0,nT.A)(),l=a.showError,s=a.showConfirm,c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1],p=(0,t6.A)(function(){var e=r.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var n=e.getContext("2d");n&&(n.imageSmoothingEnabled=!1)},{type:"debounce",wait:100});return(0,w.useEffect)(function(){var e=r.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var o=Sg()({canvas:e,data:n}),a=function(){return t(o.save())};return o.on("change",a),o.on("save",a),o.on("export",function(){return d(!0)}),i.current=o,e.focus(),function(){o&&o.cleanUp(),i.current&&(i.current=null)}}},[n,t,r]),(0,f.FD)(f.FK,{children:[(0,f.Y)("canvas",{css:Sy.canvas,ref:function(e){r.current=e,p(e)},tabIndex:0}),(0,f.Y)(lC.a,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,f.Y)(Sw.A,{prompt:"Export",desc:"What name to give to the exported file?",placeholder:"filename",type:"text",onCancel:function(){return d(!1)},onConfirm:function(e){if(!i.current){d(!1);return}var n="".concat(e,".png"),t=i.current.curFrame().toPNG();o.writeFile(n,eZ.A.from(t)).then(function(e){if(e.error){l("Failed to write to file ".concat(n));return}s("Successfully exported to ".concat(n)),d(!1)})}})})]})}function SS(e){var n,t=e.activeFile,r=(0,A.A)().fs,i=(0,v._)((0,w.useState)(!0),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(null),2),s=l[0],c=l[1],u=(0,nT.A)().showError,d=t.endsWith(".kbmsprite");(0,w.useEffect)(function(){var e=!1;function n(){return(n=(0,y._)(function(){var n,i,o;return(0,b.YH)(this,function(l){switch(l.label){case 0:return[4,r.readFile(t)];case 1:if(n=l.sent(),a(!1),e)return[2];if(n.error)return u("failed to read ".concat(t)),[2];return o=(i=n.content.toString())&&JSON.parse(i),c(d?(0,Sv.L)(o):o),[2]}})})).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){e=!0}},[r,t,u,d]);var p=(0,w.useCallback)((n=(0,y._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!d)return[3,2];return[4,(0,Sv.t)(e)];case 1:e=n.sent(),n.label=2;case 2:return[4,r.writeFile(t,eZ.A.from(JSON.stringify(e)))];case 3:return n.sent().error&&u("Failed to save ".concat(t,", please try again")),[2]}})}),function(e){return n.apply(this,arguments)}),[r,t,u,d]);return o?(0,f.Y)(tn.A,{}):s?(0,f.Y)(Sb,{data:s,onSave:p}):(0,f.Y)(SY,{onCreate:function(e){return c(e)}})}function SY(e){var n=e.onCreate,t=(0,v._)((0,w.useState)(""),2),r=t[0],i=t[1],o=(0,v._)((0,w.useState)(""),2),a=o[0],l=o[1],s=Number(r),c=Number(a);return(0,f.FD)(F.S,{css:Sy.create,gap:8,children:[(0,f.Y)(I.EY,{variant:"subheadDefault",multiline:!1,children:"Create a Pedit file"}),(0,f.Y)(ew.pd,{placeholder:"width",value:r,onChange:function(e){return i(e.target.value)}}),(0,f.Y)(ew.pd,{placeholder:"height",value:a,onChange:function(e){return l(e.target.value)}}),(0,f.Y)(eg.$n,{text:"Create",disabled:!(s>0&&c>0),onClick:function(){n({width:Math.ceil(s),height:Math.ceil(c)})}})]})}var SA=t(48795),SC=h.ZU.Object({type:h.ZU.Literal("pedit"),data:h.ZU.Object({path:h.ZU.String()})}),Sx={Content:function(e){var n=e.pane,t=e.options.performPaneOperation;return(0,f.Y)(Sk,{path:n.data.path,performPaneOperation:t})},Icon:function(e){var n=e.size;return(0,f.Y)(SA.A,{size:n})},getTitle:function(e){return(0,n7.WP)(e.data.path)},category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(SC,e)}};function Sk(e){var n=e.path,t=e.performPaneOperation,r=(0,n0.KA)({path:n,performPaneOperation:t});return(0,n9.Qt)(function(){if(r)return{commands:[{commands:r}]}},[r]),(0,f.FD)(f.FK,{children:[(0,f.Y)(n0.ou,{path:n,performPaneOperation:t}),(0,f.Y)(n0.UC,{children:(0,f.Y)(SS,{activeFile:n})})]})}var S_=t(17258),SD=(0,M.x)({badge:[B.wp.backgroundColor.backgroundHighest,B.wp.borderRadius(4),{padding:"0 0.35em"}],container:[B.wp.p(8),B.wp.colWithGap(8)],header:[B.wp.py(4),B.wp.justify.spaceBetween,B.wp.flex.grow(1),B.wp.pr(16),B.wp.height(24)],result:[B.wp.borderRadius(4),B.wp.overflow("hidden")],problems:[B.wp.px(6),B.wp.py(6)]});function SE(e){var n=e.isActive,t=e.performPaneOperation,r=(0,v._)((0,w.useState)({}),2),i=r[0],o=r[1],a=(0,O.t3)(),l=(0,n9.gB)(),s=(0,w.useCallback)(function(){var e=!0,n=!1,t=void 0;try{for(var r,i=a()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)!function(){var e,n=r.value;if("codeEditor"===n[1].type){var t=l(n[0]);if(t&&"codeEditor"===t.type){var i=n[1].data.path,a=null===(e=t.fetchProblems)||void 0===e?void 0:e.call(t);i&&a&&o(function(e){return(0,e7._)((0,K._)({},e),(0,g._)({},i,a))})}}}()}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}},[l,a]);return((0,w.useEffect)(function(){n&&s()},[n,s]),(0,n9.Qt)(function(){return{type:"problems",updateProblems:function(e,n){o(function(t){return(0,e7._)((0,K._)({},t),(0,g._)({},e,n))})}}},[o]),Object.values(i).some(function(e){return e.length>0}))?(0,f.Y)(F.S,{css:SD.container,children:Object.keys(i).map(function(e){return 0===i[e].length?null:(0,f.Y)(eo.ui,{elevated:!0,css:SD.result,children:(0,f.Y)(_.A,{chevron:"end",defaultExpanded:!0,headerContent:(0,f.FD)(F.S,{css:SD.header,row:!0,gap:8,align:"center",children:[(0,f.FD)(F.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(te.A,{path:e}),(0,f.Y)(I.EY,{children:e})]}),(0,f.Y)(F.S,{css:SD.badge,children:i[e].length>99?"99+":i[e].length})]}),children:(0,f.Y)(F.S,{css:SD.problems,children:i[e].map(function(n,r){var i=n.range.start.line+1,o=n.range.start.character;return(0,f.Y)(S_.A,{problem:n,onClick:function(){t({operation:"open",pane:{type:"codeEditor",data:{path:e,line:i,col:o}},secondary:!0})}},"".concat(i,"-").concat(o,"-").concat(r))})})},e)},e)})}):(0,f.Y)(tV.A,{pane:{type:"problems"},maxWidth:450,bodyText:"No problems found in your workspace \uD83C\uDF89"})}function SR(e){return(0,f.Y)(n$.Ay,(0,e7._)((0,K._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14.19l2.72-2.72a.75.75 0 0 1 .53-.22h12A1.25 1.25 0 0 0 20.25 15V5A1.25 1.25 0 0 0 19 3.75H5Zm-1.945-.695A2.75 2.75 0 0 1 5 2.25h14A2.75 2.75 0 0 1 21.75 5v10A2.75 2.75 0 0 1 19 17.75H7.31l-3.78 3.78A.75.75 0 0 1 2.25 21V5c0-.73.29-1.429.805-1.945Zm7.225 4.496a.75.75 0 0 1-.153 1.05L8.254 10l1.873 1.399a.75.75 0 1 1-.897 1.202l-2.679-2a.75.75 0 0 1 0-1.202l2.679-2a.75.75 0 0 1 1.05.152Zm3.44 0a.75.75 0 0 1 1.05-.152l2.679 2a.75.75 0 0 1 0 1.202l-2.679 2a.75.75 0 1 1-.897-1.202L15.746 10l-1.873-1.399a.75.75 0 0 1-.152-1.05Z",clipRule:"evenodd"})}))}var SI=h.ZU.Object({type:h.ZU.Literal("problems")}),SF={Content:function(e){var n=e.options,t=n.isActive,r=n.performPaneOperation;return(0,f.Y)(SE,{isActive:t,performPaneOperation:r})},Icon:function(e){var n=e.size;return(0,f.Y)(SR,{size:n})},getTitle:function(){return"Problems"},description:"View problems in your code detected by static analysis tools like type checkers and linters",category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(SI,e)}},ST=t(25237);function SP(){var e=(0,$._)(["\n  fragment ProjectMergeSectionRepl on Repl {\n    id\n    title\n  }\n"]);return SP=function(){return e},e}function SL(){var e=(0,$._)(["\n  fragment ProjectMergeSectionCurrentUser on CurrentUser {\n    id\n  }\n"]);return SL=function(){return e},e}var SU=(0,J.J1)(SP()),SN=(0,J.J1)(SL());function SO(){var e=(0,$._)(["\n  fragment ReplToReplMergeOrg on Org {\n    id\n    slug\n  }\n"]);return SO=function(){return e},e}function SM(){var e=(0,$._)(["\n  fragment ReplMergeRelatedRepl on Repl {\n    id\n    url\n    nextPagePathname\n    ...ReplSelectorRepl\n  }\n  ","\n"]);return SM=function(){return e},e}function SB(){var e=(0,$._)(["\n  fragment ReplToReplMergeProject on Project {\n    id\n    mainRepl {\n      id\n      ...ReplMergeRelatedRepl\n    }\n  }\n  ","\n"]);return SB=function(){return e},e}function SH(){var e=(0,$._)(["\n  fragment ReplToReplMergeCurrentRepl on Repl {\n    id\n    ...ProjectMergeSectionRepl\n  }\n  ","\n"]);return SH=function(){return e},e}function Sz(){var e=(0,$._)(["\n  query ReplToReplMergeGetRelatedRepls($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n          repls {\n            items {\n              ...ReplMergeRelatedRepl\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Sz=function(){return e},e}var SW=(0,J.J1)(SO()),SG=(0,J.J1)(SM(),ST.a$),SV=(0,J.J1)(SB(),SG),Sj=(0,J.J1)(SH(),SU);function SZ(){var e=(0,$._)(["\n  query ProjectPane($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        ...ReplToReplMergeCurrentRepl\n        project {\n          ...ReplToReplMergeProject\n          org {\n            ...ReplToReplMergeOrg\n          }\n        }\n      }\n    }\n    currentUser {\n      ...ProjectMergeSectionCurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return SZ=function(){return e},e}Sz();var Sq={},SK=(0,J.J1)(SZ(),Sj,SV,SW,SN),S$=t(9246),SJ=t(23081),SQ=function(){var e=(0,v._)((0,w.useReducer)(function(){return Math.random()},Math.random()),2);return[e[0],e[1]]},SX=function(e){var n,t=e.ours,r=e.theirs,i=(0,v._)(SQ(),2),o=i[0],a=i[1],l=(0,rG.A)((n=(0,y._)(function(e){var n,i,o,a,l,s,c;return(0,b.YH)(this,function(u){switch(u.label){case 0:return[4,Promise.all([e.log({max:100,revRange:t}),null!==r?e.log({max:100,revRange:"".concat(t,"..").concat(r)}):null,null!==r?e.log({max:100,revRange:"".concat(r,"..").concat(t)}):null])];case 1:if(n=u.sent(),o=(i=(0,v._)(n,3))[0],a=i[1],l=i[2],o.error)return[2,o];if(null==a?void 0:a.error)return[2,a];if(null==l?void 0:l.error)return[2,l];return[2,{error:null,both:o.commits,theirs:null!==(s=null==a?void 0:a.commits)&&void 0!==s?s:[],ours:null!==(c=null==l?void 0:l.commits)&&void 0!==c?c:[]}]}})}),function(e){return n.apply(this,arguments)}),[t,r,o]);return[(0,w.useMemo)(function(){return null===l?{error:null}:l.error?l:{error:null,both:pj(l.both,l.theirs,l.ours),theirs:l.theirs,ours:l.ours}},[l]),a]},S0=function(){var e,n=(0,A.A)().git,t=(0,v._)((0,w.useState)({loading:!1,error:null}),2),r=t[0],i=t[1];return[(0,w.useCallback)((e=(0,y._)(function(e){var t,r,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:return t=e.remote,r=e.branch,a=void 0!==(o=e.allowConflicts)&&o,i({loading:!0,error:null}),[4,n.pull({mode:rz.Xo.MERGE,allowConflicts:a,experimental_override_remote:{name:t,branch:r}})];case 1:return(l=s.sent()).error?i({loading:!1,error:l.error}):(i({loading:!1,error:null}),n.forceRefresh()),[2]}})}),function(n){return e.apply(this,arguments)}),[n]),r]},S1=function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,S,Y,A,C,x,k=e.selectedReplId,_=(n=null!=k?k:null,(r=(0,rG.A)((t=(0,y._)(function(e){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(!n)return[2,{hasStarted:!1,error:null,remote:null}];return[4,pH({git:e,replId:n})];case 1:if((t=r.sent()).error)return[2,{hasStarted:!0,error:t.error}];return[2,{hasStarted:!0,error:null,remote:t.remote}]}})}),function(e){return t.apply(this,arguments)}),[n]))&&r.hasStarted?r.error?{state:"Error",error:r.error}:{state:"Success",error:null,remote:r.remote}:{state:"Loading",error:null}),D=(0,v._)(S0(),2),E=D[0],R=D[1],I=(0,v._)((o=(i=(0,v._)(SQ(),2))[0],a=i[1],[(0,rG.A)((l=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.getRepositoryState()];case 1:return(n=t.sent()).error,[2,n]}})}),function(e){return l.apply(this,arguments)}),[o]),a]),2),F=I[0],T=I[1],P=(0,v._)((c=(s=(0,v._)(SQ(),2))[0],u=s[1],[(0,rG.A)((d=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.status()];case 1:return(n=t.sent()).error,[2,n]}})}),function(e){return d.apply(this,arguments)}),[c]),u]),1)[0],L=(0,v._)(SX({ours:"main",theirs:k?pB({replId:k,branch:"main"}):null}),2),U=L[0],N=L[1],O=(0,v._)((f=(p={remoteName:k?pM(k):null,onCompleted:function(){T(),N()}}).remoteName,h=p.onCompleted,g=(m=(0,v._)((0,w.useState)(!1),2))[0],S=m[1],A=(Y=(0,v._)(SQ(),2))[0],C=Y[1],(0,rG.A)((x=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!f)return[2,{error:null}];return S(!0),[4,e.fetch({remote:f})];case 1:return n=t.sent(),S(!1),null==n.error&&h(),[2,n]}})}),function(e){return x.apply(this,arguments)}),[f,A]),[g,C]),2);return{state:F,status:P,commits:U,isFetching:O[0],refetch:O[1],remote:_,pull:{state:R,doPull:function(e){"Success"===_.state&&E((0,e7._)((0,K._)({},e),{remote:_.remote.name}))}}}},S2=(0,w.createContext)(null);function S4(){var e=(0,w.useContext)(S2);if(null===e)throw Error("useProjectGitState must be used inside a ProjectGitStateProvider");return e}var S5=t(13692);function S8(){var e=(0,$._)(["\n  fragment ProjectReplsComboBoxRepl on Repl {\n    id\n    ...ReplMergeRelatedRepl\n  }\n  ","\n"]);return S8=function(){return e},e}function S3(){var e=(0,$._)(["\n  query ProjectReplsComboBox($id: String!, $replsInput: ProjectReplsInput!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n          mainRepl {\n            ...ProjectReplsComboBoxRepl\n          }\n          repls(input: $replsInput) {\n            items {\n              ...ProjectReplsComboBoxRepl\n            }\n            pageInfo {\n              nextCursor\n              hasNextPage\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return S3=function(){return e},e}var S6={},S7=(0,J.J1)(S8(),SG),S9=(0,J.J1)(S3(),S7),Ye=t(11438),Yn=t(98215),Yt=(0,M.x)({replSelector:[B.wp.minWidth(300)],item:[B.wp.display.grid,B.wp.overflow("hidden"),{gap:4,gridAutoRows:"min-content",gridAutoFlow:"row",whiteSpace:"nowrap",textOverflow:"ellipsis"}]}),Yr={username:"Unknown User",image:""},Yi=function(e){var n,t,r=e.replId,i=e.onSelect,o=e.selectedReplId,a=(0,t8._)(e,["replId","onSelect","selectedReplId"]),l=(0,v._)((0,w.useState)(""),2),s=l[0],c=l[1],u=(0,Ye.A)(s,250),d=(0,nT.A)().showError,p=(0,v._)((0,w.useState)({options:[],mainRepl:null,nextCursor:null}),2),h=p[0],m=p[1],g=(n=(0,K._)({},S6,{variables:{id:r,replsInput:{count:10,filters:{title:{search:u}}}},ssr:!1,fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,onCompleted:function(e){var n,t,r,i=e&&"Repl"===e.repl.__typename&&(null===(n=e.repl.project)||void 0===n?void 0:n.__typename)==="Project"?e.repl.project:null,o=(null==i?void 0:i.repls.__typename)==="ReplConnection"?i.repls:null;i&&o||d("Something went wrong loading Apps - please try again."),m({mainRepl:null!==(t=null==i?void 0:i.mainRepl)&&void 0!==t?t:null,nextCursor:(null==o?void 0:o.pageInfo.hasNextPage)&&o.pageInfo.nextCursor?o.pageInfo.nextCursor:null,options:null!==(r=null==o?void 0:o.items)&&void 0!==r?r:[]})}}),Q.I(S9,n)),S=g.loading,Y=g.refetch,A=g.networkStatus,C=(t=(0,y._)(function(){var e,n,t,i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:if(!(h.nextCursor&&A!==S5.p.fetchMore))return[3,2];return n=h.options,[4,Y({id:r,replsInput:{count:10,filters:{title:{search:u}},cursor:h.nextCursor}})];case 1:(i=(t=l.sent())&&"Repl"===t.data.repl.__typename&&(null===(e=t.data.repl.project)||void 0===e?void 0:e.__typename)==="Project"&&"ReplConnection"===t.data.repl.project.repls.__typename?t.data.repl.project.repls:null)||d("Something went wrong loading Apps - please try again."),a=null!==(o=null==i?void 0:i.items)&&void 0!==o?o:[],m((0,e7._)((0,K._)({},h),{nextCursor:(null==i?void 0:i.pageInfo.hasNextPage)&&i.pageInfo.nextCursor?i.pageInfo.nextCursor:null,options:n.concat(a)})),l.label=2;case 2:return[2]}})}),function(){return t.apply(this,arguments)}),x=(0,tc.A)(function(){var e=h.mainRepl,n=h.options.filter(function(e){return e.id!==r});return""===u&&e&&e.id!==r?[e].concat((0,q._)(n.filter(function(n){return n.id!==e.id}))):n},[h,r,u]),k=(0,v._)((0,w.useState)(!1),2),_=k[0],D=k[1];(0,w.useEffect)(function(){if(!_){var e=x.find(function(e){return e.id===o});e&&(D(!0),""===s&&c(e.title))}},[_,s,o,x]);var R=(0,e$.A)(i),T=(0,w.useCallback)(function(e){var n=x.find(function(n){return n.id===e});n&&(R.current(n),c(n.title))},[x,R]);return(0,f.Y)(Yn.a,(0,e7._)((0,K._)({menuTrigger:"focus",inputValue:s,onInputChange:function(e){c(e)},onSelectionChange:T,items:x,selectedKey:o,css:Yt.replSelector,isLoading:S,allowsEmptyCollection:!0,onLoadMore:C,emptyMessage:"No Apps found",maxHeight:200},a),{children:function(e){var n,t,r,i;return(0,f.FD)(E.if,{textValue:e.title,children:[(0,f.Y)(po.e,{src:null!==(r=null===(n=e.owner)||void 0===n?void 0:n.image)&&void 0!==r?r:Yr.image,username:null!==(i=null===(t=e.owner)||void 0===t?void 0:t.username)&&void 0!==i?i:Yr.username,size:24}),(0,f.FD)(F.S,{css:Yt.item,children:[(0,f.Y)(I.EY,{children:e.title}),(0,f.FD)(F.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(I.EY,{children:e.owner?"@".concat(e.owner.username):""}),h.mainRepl&&h.mainRepl.id===e.id?(0,f.Y)(oG.a,{text:"Main Repl",variant:"filled"}):null]})]})]})}}))},Yo=t(42462),Ya=t(64254).hp,Yl=[{"& > span:first-child-of-type":[B.wp.flex.grow(1),B.wp.textAlign.left]},{"& > span":[B.wp.flex.shrink(1)]},B.wp.height("auto"),B.wp.p(8),B.wp.fontWeight.medium,B.wp.backgroundColor.backgroundHigher,B.wp.flex.row,B.wp.align.center,B.wp.justify.spaceBetween,B.wp.overflow("hidden"),B.wp.cursor.pointer],Ys=(0,M.x)({buttonFolded:[Yl,B.wp.borderRadius(8)],buttonUnfolded:[Yl,B.wp.borderRadius(8,8,0,0)],rowContainer:[B.wp.position.relative,B.wp.zIndex(1),B.wp.overflow("hidden")],diffContainer:[B.wp.flex.grow(1),B.wp.borderRadius(8)],bodyContainer:[B.wp.borderRadius(0,0,8,8),B.wp.p(8),B.wp.display.flex,B.wp.flex.row,B.wp.flex.wrap,B.wp.align.center,B.wp.justify.center,B.wp.backgroundColor.backgroundDefault,B.wp.border({color:ez.LU.outlineDimmer,direction:"bottom"}),B.wp.border({color:ez.LU.outlineDimmer,direction:"left"}),B.wp.border({color:ez.LU.outlineDimmer,direction:"right"})],bodyLoading:[B.wp.p(8)],noChangesContainer:[B.wp.py(8),B.wp.px(8),B.wp.center,B.wp.width("100%")],innerContainer:[B.wp.display.flex,B.wp.align.center],splitContainer:[B.wp.p(8),B.wp.display.flex,B.wp.flex.row,B.wp.justify.spaceBetween,B.wp.maxWidth("100%"),B.wp.align.center],splitChild:[{flexBasis:"50%"}]}),Yc=function(e){var n=e.folded,t=void 0!==n&&n,r=e.setFolded,i=e.diff,o="".concat(i.initial.path,"/").concat(i.initial.filename),a="".concat(i.final.path,"/").concat(i.final.filename);return(0,f.FD)(F.S,{css:t?Ys.buttonFolded:Ys.buttonUnfolded,onClick:function(){return r(!t)},children:[(0,f.FD)(F.S,{css:[Ys.rowContainer,B.wp.flex.shrink(1)],align:"center",row:!0,gap:8,children:["RENAMED"===i.status||"COPIED"===i.status?(0,f.FD)(f.FK,{children:[(0,f.Y)(te.A,{path:o}),(0,f.Y)(I.EY,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,f.Y)(I.EY,{multiline:!1,color:"dimmest",css:[B.wp.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,f.Y)(tf.A,{}),(0,f.Y)(te.A,{path:a}),(0,f.Y)(I.EY,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,f.Y)(I.EY,{multiline:!1,color:"dimmest",css:[B.wp.fontWeight.normal],children:i.final.path})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)(te.A,{path:a}),(0,f.Y)(I.EY,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,f.Y)(I.EY,{multiline:!1,color:"dimmest",css:[B.wp.fontWeight.normal],children:i.final.path})]}),(0,f.Y)(D.r,{textToCopy:a,tooltipText:"Copy Full Path",tooltipPlacement:"bottom-end"})]}),(0,f.FD)(F.S,{css:Ys.rowContainer,align:"center",row:!0,gap:8,children:[(0,f.Y)(r7,{type:i.status}),(0,f.Y)(ev.K0,{alt:t?"Collapse diff":"Expand diff",onClick:function(){return r(!t)},children:t?(0,f.Y)(it.A,{}):(0,f.Y)(ir.A,{})})]})]})},Yu=function(e){var n=e.diff,t=e.splitOrUnified,r=e.extensions;return"Split"===t?(0,f.Y)(r5,{a:{filePath:n.initial.filename,doc:n.initial.content},b:{filePath:n.final.filename,doc:n.final.content,extensions:r},collapseUnchanged:{},style:{width:"100%"}}):(0,f.Y)(ni.Ay,{filePath:n.final.filename,initialDoc:n.final.content,extensions:[rK.X.of(ne.EY.of(n.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},Yd=function(e){return(0,n7.FN)(e)?"media":(0,n7.m6)(e)?"ot":"binary"},Yp=function(e){var n=e.content,t=e.type,r=e.filename,i=e.extensions;switch(t){case"media":return(0,f.Y)(F.S,{css:[{display:"flex",height:"100%"}],children:(0,f.Y)(r9.jM,{src:(0,r9.p4)(n,(0,n7.P7)(r)),fileName:r,mime:(0,n7.P7)(r)})});case"ot":return(0,f.Y)(ni.Ay,{filePath:r,initialDoc:n,readOnly:!0,style:{width:"100%"},extensions:i});default:return(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},Yf=function(e){var n=e.diff,t=e.splitOrUnified,r=e.extensions;if(n.initial.content===n.final.content)return(0,f.Y)(F.S,{css:Ys.noChangesContainer,children:(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===n.status)return(0,f.Y)(F.S,{css:Ys.noChangesContainer,children:(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var i=(0,Yo.A)(Ya.from(n.initial.content))?"binary":Yd(n.initial.filename),o=(0,Yo.A)(Ya.from(n.final.content))?"binary":Yd(n.final.filename);if("binary"===i||"binary"===o)return(0,f.Y)(F.S,{css:Ys.noChangesContainer,children:(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:"This binary file has changed."})});if("ADDED"===n.status)switch(o){case"media":return(0,f.Y)(F.S,{css:Ys.noChangesContainer,children:(0,f.Y)(F.S,{css:Ys.innerContainer,children:(0,f.Y)(r9.jM,{src:(0,r9.p4)(n.final.content,(0,n7.P7)(n.final.filename)),fileName:n.final.filename,mime:(0,n7.P7)(n.final.filename)})})});case"ot":return(0,f.Y)(F.S,{css:Ys.noChangesContainer,children:(0,f.Y)(ni.Ay,{filePath:n.final.filename,initialDoc:n.final.content,readOnly:!0,style:{width:"100%"},extensions:r})});default:return(0,f.Y)(F.S,{css:Ys.noChangesContainer,children:(0,f.Y)(I.EY,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"ot"===i&&"ot"===o?(0,f.Y)(Yu,{diff:n,splitOrUnified:t,extensions:r}):(0,f.FD)(F.S,{css:Ys.splitContainer,children:[(0,f.Y)(F.S,{css:Ys.splitChild,align:"center",justify:"center",children:(0,f.Y)(Yp,{content:n.initial.content,type:i,filename:n.initial.filename,extensions:r})}),(0,f.Y)(F.S,{css:Ys.splitChild,children:(0,f.Y)(Yp,{content:n.final.content,type:o,filename:n.final.filename,extensions:r})})]})},Yh=function(e){var n,t=e.diff,r=e.fetchDiffFileContents,i=e.splitOrUnified,o=(0,v._)((0,w.useState)({expanded:!1,loading:!1,content:null,error:null}),2),a=o[0],l=o[1],s=(n=(0,y._)(function(e){var n;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(l((0,e7._)((0,K._)({},a),{expanded:!e,loading:null==a.content})),e)return[3,2];return[4,r(t)];case 1:n=i.sent(),l(function(e){return(0,e7._)((0,K._)({},e),{loading:!1,error:n.error?n.error:null,content:null==n.error?{initial:n.content.base,final:n.content.head}:null})}),i.label=2;case 2:return[2]}})}),function(e){return n.apply(this,arguments)});return(0,f.FD)(F.S,{css:Ys.diffContainer,children:[(0,f.Y)(Yc,{folded:!a.expanded,setFolded:s,diff:t}),a.expanded?(0,f.FD)(eo.ui,{css:Ys.bodyContainer,elevated:!0,children:[a.error?(0,f.Y)(tZ.N,{colorway:"negative",icon:(0,f.Y)(o9.A,{}),text:a.error}):null,a.loading?(0,f.Y)(F.S,{css:Ys.bodyLoading,children:(0,f.Y)(tn.A,{})}):null,a.content?(0,f.Y)(Yf,{diff:(0,e7._)((0,K._)({},t),{initial:(0,e7._)((0,K._)({},t.initial),{content:a.content.initial}),final:(0,e7._)((0,K._)({},t.final),{content:a.content.final})}),splitOrUnified:i}):null]}):null]},t.id)},Ym=function(e){return e.Git="Git",e.Fs="Fs",e}({});function Yg(){return(Yg=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return n=e.path,[4,e.fs.readFile(n,{fromDisk:!0})];case 1:if((t=r.sent()).error)return[2,{content:null,error:t.error}];return[2,{content:t.content.toString("utf8"),error:null}]}})})).apply(this,arguments)}function Yv(e){return Yw.apply(this,arguments)}function Yw(){return(Yw=(0,y._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(n=e.file,t=e.fs,r=e.git,"Fs"!==n.type)return[3,2];return[4,function(e){return Yg.apply(this,arguments)}({path:n.path,fs:t})];case 1:case 3:return[2,i.sent()];case 2:return[4,r.getFileContents({path:n.path,revision:n.revision,convertToBase64:(0,n7.FN)(n.path)})]}})})).apply(this,arguments)}function Yy(e){return Yb.apply(this,arguments)}function Yb(){return(Yb=(0,y._)(function(e){var n,t,r,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:return n=e.fs,t=e.git,r=e.base,i=e.head,s=Promise.all,[4,Yv({git:t,fs:n,file:i})];case 1:return c=[p.sent()],[4,Yv({git:t,fs:n,file:r})];case 2:return[4,s.apply(Promise,[c.concat([p.sent()])])];case 3:if(a=(o=v._.apply(void 0,[p.sent(),2]))[0],(l=o[1]).error)return[2,{error:"fetchFileContentsForDiff could not fetch base file from ".concat(r.type," for ").concat(r.path),content:null}];if(a.error)return[2,{error:"fetchFileContentsForDiff could not fetch base file from ".concat(i.type," for ").concat(i.path),content:null}];return[2,{error:null,content:{base:null!==(u=l.content)&&void 0!==u?u:"",head:null!==(d=a.content)&&void 0!==d?d:""}}]}})})).apply(this,arguments)}var YS={z:!0,findCopies:!0,findCopiesHarder:!0,findRenames:!0,nameStatus:!0},YY={z:"-z",findCopies:"--find-copies",findCopiesHarder:"--find-copies-harder",findRenames:"--find-renames",nameStatus:"--name-status"};function YA(e){switch(e){case rz.PX.UNMODIFIED:return null;case rz.PX.MODIFIED:return rz.Os.MODIFIED;case rz.PX.TYPE_CHANGED:return rz.Os.TYPE_CHANGED;case rz.PX.DELETED:return rz.Os.DELETED;case rz.PX.RENAMED:return rz.Os.RENAMED;case rz.PX.COPIED:return rz.Os.COPIED;case rz.PX.UNTRACKED:case rz.PX.UNMERGED:case rz.PX.ADDED:return rz.Os.ADDED;default:(0,aK.A)(e)}}var YC=function(e,n){return""===e?n:"".concat(e,"/").concat(n)};function Yx(e,n){return n.filter(function(n){var t="".concat(n.final.path,"/").concat(n.final.filename),r="".concat(n.initial.path,"/").concat(n.initial.filename);return t.toLowerCase().includes(e.toLowerCase())||r.toLowerCase().includes(e.toLowerCase())})}function Yk(e){var n=e.children,t=e.headerContent;return(0,f.FD)(F.S,{gap:16,children:[(0,f.FD)(F.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(I.Y9,{level:2,variant:"subheadDefault",children:"Changed Files"}),t]}),n]})}function Y_(e){var n,t,r,i,o,a,l,s,c,u=(0,A.A)(),d=u.fs,p=u.git,h=(0,v._)((0,w.useState)(""),2),m=h[0],g=h[1],S=(0,v._)((0,w.useState)("Split"),2),Y=S[0],C=S[1],x=(n={type:"revisionToRevisionDiff",head:e.head,base:e.base},t=(0,e7._)((0,K._)({},n),{flags:(0,e7._)((0,K._)({},YS),{nameStatus:!0})}),i=(0,rG.A)((r=(0,y._)(function(e){var n,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return n=function(e){var n,t=e.base,r=null!==(n=e.flags)&&void 0!==n?n:YS,i=["git","diff"];switch(Object.keys(r).forEach(function(e){YY[e]&&i.push(YY[e])}),e.type){case"revisionToRevisionDiff":i.push("".concat(t,"...").concat(e.head));break;case"revisionToIndexDiff":i.push("--staged",t);break;default:(0,aK.A)(e)}return i}(t),[4,e.escapeHatchGitExecRead(n.join(" "),{serviceMethod:"useGitDiff"})];case 1:if((r=i.sent()).error||null===r.output)return[2,{error:rz.uA.UNKNOWN}];return[2,{diff:r.output,error:null}]}})}),function(e){return r.apply(this,arguments)})),o=(0,tc.A)(function(){return null==i?{loading:!0,error:null,data:null}:i.error?{loading:!1,error:i.error,data:null}:{loading:!1,error:null,data:i.diff}},[i]),(0,tc.A)(function(){if(null==o||o.loading)return{loading:!0,error:null,data:null};if(o.error)return{loading:!1,error:o.error,data:null};var e,n=null!==(e=o.data)&&void 0!==e?e:"",t=(0,rz.By)(n),r=(0,rz.GM)(n);return{loading:!1,error:null,data:Array.from(new Set((0,q._)(t).concat((0,q._)(r)))).filter(function(e){return["DELETED","ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}).map(function(e){var n,t;return{id:(0,nF.A)(),status:e.type,initial:{filename:(0,n7.WP)(null!==(n=e.originalPath)&&void 0!==n?n:e.path),path:(0,n7._6)(null!==(t=e.originalPath)&&void 0!==t?t:e.path)},final:{filename:(0,n7.WP)(e.path),path:(0,n7._6)(e.path)}}})}},[o])),k=(0,tc.A)(function(){var e;return Yx(m,null!==(e=x.data)&&void 0!==e?e:[])},[m,x]),_=(a=(0,y._)(function(n){return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,Yy({git:p,fs:d,base:{type:Ym.Git,revision:e.base,path:YC(n.initial.path,n.initial.filename)},head:{type:Ym.Git,revision:e.head,path:YC(n.final.path,n.final.filename)}})];case 1:return[2,t.sent()]}})}),function(e){return a.apply(this,arguments)}),D=(l=S4().status,s=(0,tc.A)(function(){return l&&null==l.error?l.changes:[]},[l]),(0,tc.A)(function(){return s.map(function(e){var n,t,r,i,o=null!==(r=null!==(t=YA(e.type.worktree))&&void 0!==t?t:YA(e.type.index))&&void 0!==r?r:rz.Os.UNKNOWN,a=null!==(i=null===(n=e.source)||void 0===n?void 0:n.path)&&void 0!==i?i:e.path;return{id:(0,nF.A)(),status:o,initial:{filename:(0,n7.WP)(a),path:(0,n7._6)(a)},final:{filename:(0,n7.WP)(e.path),path:(0,n7._6)(e.path)}}})},[s])),E=(0,tc.A)(function(){return Yx(m,D)},[m,D]),R=(c=(0,y._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:return[4,Yy({git:p,fs:d,base:{type:Ym.Git,revision:"HEAD",path:YC(e.initial.path,e.initial.filename)},head:{type:Ym.Fs,path:YC(e.final.path,e.final.filename)}})];case 1:return[2,n.sent()]}})}),function(e){return c.apply(this,arguments)});return x.loading?(0,f.Y)(Yk,{children:(0,f.Y)(tn.A,{})}):x.error||null==x.data?(0,f.Y)(Yk,{children:(0,f.Y)(I.EY,{children:"Something went wrong. Please try another Repl."})}):0===x.data.length&&0===D.length?(0,f.Y)(Yk,{children:(0,f.FD)(F.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(ln.A,{}),(0,f.Y)(I.EY,{children:"No changes to merge"})]})}):(0,f.Y)(Yk,{headerContent:(0,f.FD)(F.S,{row:!0,gap:8,children:[(0,f.Y)(ia,{value:Y,onChange:C}),(0,f.Y)(pu.I,{value:m,onChange:function(e){g(e.target.value)},onClear:function(){g("")},loading:!1,placeholder:"Filter changed files"})]}),children:(0,f.FD)(F.S,{gap:12,children:[E.length?(0,f.FD)(F.S,{gap:8,children:[(0,f.Y)(I.Y9,{level:3,variant:"text",color:"dimmer",children:"Uncommitted Changes"}),E.map(function(e){return(0,f.Y)(Yh,{diff:e,splitOrUnified:Y,fetchDiffFileContents:R},e.id)})]}):null,k.length?(0,f.FD)(F.S,{gap:8,children:[(0,f.Y)(I.Y9,{level:3,variant:"text",color:"dimmer",children:"Committed Changes"}),k.map(function(e){return(0,f.Y)(Yh,{diff:e,splitOrUnified:Y,fetchDiffFileContents:_},e.id)})]}):null]})})}var YD=function(e){var n=e.selectedRepl,t=e.isMainRepl,r=pB({replId:n.id,branch:"main"}),i="HEAD";return(0,f.Y)(Y_,{base:t?i:r,head:t?r:i})};function YE(){var e=(0,v._)((0,w.useState)(!1),2),n=e[0],t=e[1],r=(0,A.A)().fs;return(0,w.useEffect)(function(){var e=!1,n=r.watchPathStat(".gitignore",{onNewStat:function(n){!e&&t(!n.exists)},onError:function(){}});return function(){e=!0,n()}},[r]),n?(0,f.Y)(tZ.N,{icon:(0,f.Y)(rd.A,{}),text:(0,f.FD)(I.EY,{children:["This project does not have a .gitignore file. It is recommended that all projects have a .gitignore file. You can find templates for .gitignore files for different languages"," ",(0,f.Y)("a",{href:"https://github.com/github/gitignore",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]})}):null}var YR=t(4999);function YI(e){var n,t=e.selectedRepl,r=(0,rG.A)((n=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.getRepositoryState()];case 1:if((n=t.sent()).error)return[2,{error:null,message:"Something went wrong, this Repl's git state could not be read. Please make sure there is still a .git folder."}];if(n.state!==rz.Gi.CLEAN)return[2,{error:null,message:"This Repl has uncommitted changes. This will prevent any merges. Please undo or commit your changes before leaving the Repl."}];return[2,{error:null,message:null}]}})}),function(e){return n.apply(this,arguments)})),i=null==r?void 0:r.message;return(0,f.FD)(F.S,{gap:12,children:[(0,f.Y)(I.Y9,{level:2,variant:"subheadDefault",children:"Main Repl"}),(0,f.FD)(I.EY,{children:["You are in the main Repl for the project. If you want to merge in changes, head to"," ",t?(0,f.Y)(yZ(),(0,e7._)((0,K._)({target:"_blank"},(0,YR.q1)(t,{initialPaneType:"project"})),{children:t.title})):"a fork","."]}),i?(0,f.Y)(tZ.N,{icon:(0,f.Y)(rd.A,{}),colorway:"negative",text:i}):null]})}var YF=t(48055),YT=t(77381);function YP(){var e=(0,$._)(["\n  query PushToRemoteRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return YP=function(){return e},e}var YL={},YU=(0,J.J1)(YP(),YT.c,YT.N),YN=t(31930),YO=t(10990),YM=t(32826),YB=t(94372);function YH(){return(YH=(0,y._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return n=e.git,t=e.commitMessage,[4,n.stageFiles({all:!0})];case 1:if(i.sent().error)return[2,{success:!1,error:"Could not commit your changes"}];return[4,n.getRepositoryState()];case 2:if((r=i.sent()).error)return[2,{success:!1,error:"Could not commit your changes"}];if(r.state!==rz.Gi.DIRTY_INDEX)return[3,4];return[4,n.commit({message:t})];case 3:if(i.sent().error)return[2,{success:!1,error:"Could not commit your changes"}];i.label=4;case 4:return[2,{success:!0,error:null}]}})})).apply(this,arguments)}var Yz=(0,M.x)({infoIcon:[B.wp.color.foregroundDimmer,{marginTop:3}],infoMessage:{flex:1}}),YW=function(e){return e.CannotMerge="CannotMerge",e.NothingToMerge="NothingToMerge",e.OnlyUncommittedChanges="OnlyUncommittedChanges",e.UncommittedAndCommittedChanges="UncommittedAndCommittedChanges",e.OnlyCommittedChanges="OnlyCommittedChanges",e}(YW||{}),YG=function(){var e,n,t=S4(),r=t.commits,i=t.state;if((null==i?void 0:i.error)!=null||!(null==i?void 0:i.type)||i.type!==rz.UN.NORMAL||(null==i?void 0:i.state)==null||null!=r.error||!(null==r?void 0:r.ours))return"CannotMerge";var o=i.state===rz.Gi.DIRTY_WORKTREE||i.state===rz.Gi.DIRTY_INDEX,a=!!((null==r?void 0:null===(e=r.ours)||void 0===e?void 0:e.length)&&(null==r?void 0:null===(n=r.ours)||void 0===n?void 0:n.length)>0);return o&&!a?"OnlyUncommittedChanges":o&&a?"UncommittedAndCommittedChanges":!o&&a?"OnlyCommittedChanges":"NothingToMerge"};function YV(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,g,S,Y,C,x,k,_,D,E,R=e.sourceRepl,T=e.destinationRepl,P=e.projectId,L=e.mainReplId,U=e.orgId,N=e.currentUser,O=(0,nT.A)().showError,M=(0,nU.c)()("includeUncommittedChanges"),B=(0,v._)((0,w.useState)(!1),2),H=B[0],z=B[1],W=(0,v._)((t=(n={destinationReplId:T.id,sourceReplId:R.id,onSuccess:function(e){var n=e.didAutoCommit;(0,SJ.L)({action:"merge",orgId:U,projectId:P,autoCommitEnabled:n,sourceReplType:R.id===L?"mainRepl":"devRepl",destinationReplType:T.id===L?"mainRepl":"devRepl"})}}).sourceReplId,r=n.destinationReplId,i=n.onSuccess,o=(0,A.A)().git,a=(0,w.useRef)(null),s=(l=(0,v._)((0,w.useState)(!1),2))[0],c=l[1],d=(u=(0,nT.A)()).showError,p=u.showConfirm,h=(0,K._)({},YL,{variables:{id:r}}),m=Q.I(YU,h),g=(0,w.useCallback)(function(){if(!m.data)return null;var e=m.data,n=e.repl,t=e.currentUser;if(!t||"Repl"!==n.__typename)return null;if(a.current){if(a.current.replId===n.id&&a.current.currentUserId===t.id)return a.current;a.current.container.close()}var r=(0,YN.Ay)({onUnrecoverableError:function(e){rV.Cp(e,{tags:{projects:!0},extra:{replid:n.id}})}});r.connect({context:(0,YO.O)({repl:n,currentUser:t}),getMinimumRetryDelayMs:function(){return 0}});var i=(0,yy.Ay)({container:r}),o=(0,YM.A)({container:r,fs:i}),l=(0,YB.Ay)({container:r,fs:i,enableReplspaceSshTokenPassthrough:!0});return a.current={container:r,git:o,fs:i,replspace:l,replId:n.id,currentUserId:t.id},a.current},[m.data]),(0,w.useEffect)(function(){if(a.current){var e=a.current.container;return function(){e.close()}}},[]),[(0,w.useCallback)((0,y._)(function(){var e,n,r,a,l,s,u,f,h,v,w=arguments;return(0,b.YH)(this,function(y){switch(y.label){case 0:if(e=(w.length>0&&void 0!==w[0]?w[0]:{autoCommit:!1}).autoCommit,null==(r=(null===(n=m.data)||void 0===n?void 0:n.repl.__typename)==="Repl"?m.data.repl:null))return d("Please try again."),[2];a=r.title,c(!0),y.label=1;case 1:if(y.trys.push([1,7,8,9]),!e)return[3,3];return[4,function(e){return YH.apply(this,arguments)}({git:o,commitMessage:e.message})];case 2:if((l=y.sent()).error)return d(l.error),[2];y.label=3;case 3:if(!(s=g()))return d('Could not merge: the "'.concat(a,'" Repl could not be reached, please try again.')),[2];return[4,(u=s.git).getRepositoryState()];case 4:if((f=y.sent()).error)return d('Could not merge: the "'.concat(a,"\" Repl's git state could not be read, please try again.")),[2];if(f.state!==rz.Gi.CLEAN)return d('Could not merge: the "'.concat(a,'" Repl has uncommitted changes, please open that repl and commit or reset any changes.')),[2];return[4,pH({git:u,replId:t})];case 5:if(y.sent().error)return d('Could not merge: the "'.concat(a,'" Repl could not be reached, please try again.')),[2];return[4,u.pull({experimental_override_remote:{name:pM(t),branch:"main"},allowConflicts:!1,mode:rz.Xo.REBASE})];case 6:if((h=y.sent()).error){switch(h.error){case rz.uA.MERGE_CONFLICT:v="this would result in a merge conflict. Get the latest changes in your repl, then try again.";break;case rz.uA.DIRTY_WORKTREE:v='the "'.concat(a,'" Repl has uncommitted changes, please open that repl and commit or reset any changes.');break;case rz.uA.HEAD_DETACHED:v='the "'.concat(a,'" Repl is on an unknown branch, please open that repl and checkout a branch before merging.');break;default:v='please check the "'.concat(a,'" Repl or try again.')}return d("Could not merge: ".concat(v)),[2]}return p("Changes pushed!"),o.forceRefresh(),null==i||i({didAutoCommit:!!e}),[3,9];case 7:return y.sent(),d("Could not merge: something went wrong, please try again."),[3,9];case 8:return c(!1),[7];case 9:return[2]}})}),[m,g,t,d,p,o,i]),{loading:s}]),2),G=W[0],V=W[1].loading,j=(C=(S={replId:T.id,orgId:U,projectId:P,currentUserId:N.id}).replId,x=S.orgId,k=S.projectId,_=S.currentUserId,Object.values(null!==(Y=(0,YF.Si)({orgId:x,projectId:k})[C])&&void 0!==Y?Y:{}).filter(function(e){return e.id!==_})),Z=YG(),q="NothingToMerge"===Z||"CannotMerge"===Z||V,$="Automatic commit for ".concat(R.title);switch(Z){case"NothingToMerge":E="You do not have any commits to merge in yet";break;case"CannotMerge":E="You cannot merge right now";break;case"OnlyUncommittedChanges":case"UncommittedAndCommittedChanges":case"OnlyCommittedChanges":E="Your changes will be pulled into ".concat(T.title);break;default:(0,aK.A)(Z)}var J=(D=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:switch(Z){case"NothingToMerge":return[3,1];case"CannotMerge":return[3,2];case"OnlyCommittedChanges":return[3,3];case"UncommittedAndCommittedChanges":return[3,5];case"OnlyUncommittedChanges":return[3,7]}return[3,9];case 1:return O("No changes to merge"),[3,10];case 2:return O("You cannot merge right now"),[3,10];case 3:return[4,G({autoCommit:!1})];case 4:case 6:case 8:return e.sent(),[3,10];case 5:return[4,G({autoCommit:!!H&&{message:$}})];case 7:return[4,G({autoCommit:{message:$}})];case 9:(0,aK.A)(Z),e.label=10;case 10:return[2]}})}),function(){return D.apply(this,arguments)});return(0,f.FD)(F.S,{gap:8,children:[j.length>0?(0,f.Y)(tZ.N,{icon:(0,f.Y)(o9.A,{}),colorway:"orange",text:"".concat(T.title," has active coders (@").concat(j[0].username).concat(j.length>1?" and others":"","). Merging may disrupt ongoing work.")}):null,(0,f.Y)(rc.m_,{tooltip:E,isDisabled:null===E,placement:"top",maxWidth:300,children:(0,f.Y)(eg.$n,{colorway:"primary",text:"Merge changes into ".concat(T.title),disabled:q,onClick:J,loading:V,iconLeft:V?(0,f.Y)(tn.A,{}):void 0})}),"OnlyUncommittedChanges"===Z?(0,f.FD)(F.S,{row:!0,gap:6,children:[(0,f.Y)(rd.A,{css:Yz.infoIcon}),(0,f.Y)(I.EY,{color:"dimmer",css:Yz.infoMessage,children:"All changes are uncommitted, so they will be automatically committed when you merge"})]}):null,"UncommittedAndCommittedChanges"===Z?(0,f.FD)(F.S,{row:!0,gap:6,children:[(0,f.Y)(nN.S,{id:M,checked:H,onChange:z}),(0,f.Y)(c7.J,{htmlFor:M,children:(0,f.Y)(I.EY,{color:"dimmer",children:"Include uncommitted changes in merge"})}),(0,f.Y)(rc.m_,{tooltip:"Any changes you have not committed will be automatically committed and merged",delay:"default",children:(0,f.Y)(rd.A,{css:Yz.infoIcon})})]}):null]})}function Yj(){var e=(0,$._)(["\n  query ProjectCommitGraphRemoteRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return Yj=function(){return e},e}var YZ={},Yq=(0,J.J1)(Yj()),YK=t(11305),Y$=(0,M.x)({input:[B.wp.py(0),B.wp.minHeight(24),B.wp.pl(12)]}),YJ=function(){var e,n=(0,A.A)().git;return(0,w.useCallback)((e=(0,y._)(function(e){return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,n.stageFiles({all:!0})];case 1:return t.sent(),[4,n.commit({message:e,allowEmpty:!1})];case 2:return t.sent(),n.forceRefresh(),[2]}})}),function(n){return e.apply(this,arguments)}),[n])},YQ=function(e){var n,t=e.onDone,r=(0,v._)((0,w.useState)(""),2),i=r[0],o=r[1],a=YJ(),l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(n=(0,y._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!("Enter"===e.key&&e.metaKey))return[3,2];return e.stopPropagation(),e.preventDefault(),c(!0),[4,a(i)];case 1:n.sent(),c(!1),n.label=2;case 2:return"Escape"===e.key&&(o(""),t()),[2]}})}),function(e){return n.apply(this,arguments)});return(0,f.Y)(ew.pd,{autoFocus:!0,autoCapitalize:"off","aria-label":"Commit message",placeholder:"cmd+enter to commit",onKeyDown:u,onChange:function(e){o(e.target.value)},disabled:s,onBlur:t,css:Y$.input})},YX=(0,sE.v)(["commit-text-foreground","commit-extended-text-foreground","commit-graph-color","segment-grid-area"]),Y0=YX.cssVars,Y1=YX.styleTokens,Y2=[B.wp.position.absolute,{top:6,left:3,width:10,height:10,borderRadius:"50%"}],Y4=(0,M.x)({graph:[B.wp.display.grid,{gridTemplateAreas:'\n        "title-left title-left"\n        "action-left action-left"\n        "left left"\n        "spacer title-right"\n        "spacer action-right"\n        "spacer right"\n        "split-left split-right"\n        "common common"',gridTemplateColumns:"minmax(16px, min-content) 1fr",gridTemplateRows:"min-content ".repeat(8).trim()},(0,g._)({},B.kL.min("tabletMin"),{gridTemplateAreas:'\n          "title-left title-right"\n          "action-left action-right"\n          "left right" \n          "split-left split-right"  \n          "common common"',gridTemplateColumns:"1fr 1fr",gridTemplateRows:"min-content ".repeat(5).trim()})],segment:[B.wp.flex.column,B.wp.align.start,B.wp.justify.end,{listStyleType:"none",gridArea:Y1["segment-grid-area"],minWidth:0,maxWidth:"100%"}],action:[B.wp.py(4),B.wp.rowWithGap(8),{gridArea:Y1["segment-grid-area"]}],title:[{gridArea:Y1["segment-grid-area"]}],commit:[B.wp.pr(8),{minWidth:0,maxWidth:"100%"},{'&[data-interactive="true"]':[oW.b.nofill,B.wp.border({width:0})]}],decoration:[B.wp.position.relative,{height:"100%",width:16}],commitDot:[Y2,{backgroundColor:Y1["commit-graph-color"]}],commitDotUntracked:[Y2,{"&:before":[Y2,{boxSizing:"border-box",top:-2,left:-2,content:'""',border:"2px dashed ".concat(Y1["commit-graph-color"])}],border:"2px solid ".concat(ez.LU.accentPrimaryStronger)}],line:[{marginLeft:"auto",marginRight:"auto",position:"absolute",width:"2px",left:"calc(50% - ".concat(1,"px)"),height:"calc(100% - ".concat(8,"px)"),backgroundColor:Y1["commit-graph-color"],transform:"translateY(".concat(15,"px)")},{background:"linear-gradient(to top, transparent 0%,  ".concat(Y1["commit-graph-color"]," ").concat(10,"px)")},{"li:last-child  &":{height:"calc(100% - ".concat(15,"px)"),background:"none",backgroundColor:Y1["commit-graph-color"]}}],commitColumn:[B.wp.viewStyle,B.wp.colWithGap(8),B.wp.minHeight(24),{minWidth:0,maxWidth:"calc(100% - ".concat(16,"px)"),overflow:"hidden"}],commitMessage:[{color:Y1["commit-text-foreground"]}],commitDescription:[{color:Y1["commit-extended-text-foreground"]}],splitLeft:[{gridArea:"split-left",position:"relative",height:16,width:"100%"}],splitRight:[{gridArea:"split-right",position:"relative",height:16,width:16}],curveRight:[B.wp.position.absolute,{bottom:0,left:7,borderRadius:"100% 0 0 0",borderTop:"2px solid ".concat(Y1["commit-graph-color"]),borderLeft:"2px solid ".concat(Y1["commit-graph-color"]),height:9,width:9}],curveUp:[B.wp.position.absolute,{top:0,left:0,borderRadius:"0 0 100% 0",borderBottom:"2px solid ".concat(Y1["commit-graph-color"]),borderRight:"2px solid ".concat(Y1["commit-graph-color"]),height:9,width:9}],fullLine:[{position:"absolute",width:2,height:"100%",left:7,backgroundColor:Y1["commit-graph-color"]}],sidewaysLine:[{position:"absolute",width:"calc(100% - ".concat(16,"px)"),height:2,left:16,top:7,backgroundColor:Y1["commit-graph-color"]}],compactLine:[B.wp.height("100%"),B.wp.position.relative,{gridArea:"spacer"},(0,g._)({},B.kL.min("tabletMin"),{display:"none"})]}),Y5=function(e){var n=e.children,t=e.hasLeft,r=e.hasRight;return(0,f.FD)(F.S,{css:Y4.graph,children:[n,(0,f.Y)(Y7,{hasLeft:t,hasRight:r}),(0,f.Y)("div",{css:Y4.compactLine,children:(0,f.Y)("div",{css:Y4.decoration,children:(0,f.Y)("div",{css:Y4.fullLine,style:t?(0,g._)({},Y0["commit-graph-color"],ez.LU.accentPrimaryDefault):{}})})})]})},Y8=function(e){var n,t,r=e.children,i=e.area,o=e.title,a=e.action;if(!w.Children.count(r))return null;var l="common"===i?(n={},(0,g._)(n,Y0["segment-grid-area"],i),(0,g._)(n,Y0["commit-graph-color"],ez.LU.outlineDefault),(0,g._)(n,Y0["commit-text-foreground"],ez.LU.foregroundDimmer),(0,g._)(n,Y0["commit-extended-text-foreground"],ez.LU.foregroundDimmest),n):(t={},(0,g._)(t,Y0["segment-grid-area"],i),(0,g._)(t,Y0["commit-graph-color"],ez.LU.accentPrimaryDefault),(0,g._)(t,Y0["commit-text-foreground"],ez.LU.accentPrimaryStrongest),(0,g._)(t,Y0["commit-extended-text-foreground"],ez.LU.foregroundDimmest),t);return(0,f.FD)(f.FK,{children:["common"===i?null:(0,f.Y)(Y6,{area:i,children:o}),"common"===i?null:(0,f.Y)(Y3,{area:i,children:a}),(0,f.Y)(F.S,{style:l,tag:"ol",css:Y4.segment,"aria-label":i,children:r})]})},Y3=function(e){var n=e.children,t=e.area,r=(0,g._)({},Y0["segment-grid-area"],"action-".concat(t));return(0,f.Y)(F.S,{style:r,css:Y4.action,row:!0,children:n})},Y6=function(e){var n=e.children,t=e.area,r=(0,g._)({},Y0["segment-grid-area"],"title-".concat(t));return(0,f.Y)(F.S,{style:r,css:Y4.title,children:"string"==typeof n?(0,f.Y)(I.Y9,{level:3,variant:"subheadDefault",color:"dimmer",children:n}):n})},Y7=function(e){var n=e.hasLeft,t=e.hasRight,r=(0,g._)({},Y0["commit-graph-color"],n?ez.LU.accentPrimaryDefault:"transparent"),i=(0,g._)({},Y0["commit-graph-color"],t?ez.LU.accentPrimaryDefault:"transparent");return n||t?(0,f.FD)(f.FK,{children:[(0,f.FD)("div",{css:Y4.splitLeft,children:[(0,f.FD)("div",{css:Y4.decoration,children:[(0,f.Y)("div",{css:Y4.line,"data-line":!0,style:r}),(0,f.Y)("div",{css:Y4.fullLine,"data-full-line":!0,style:r})]}),(0,f.Y)("div",{css:Y4.curveRight,style:i}),(0,f.Y)("div",{css:Y4.sidewaysLine,style:i})]}),(0,f.Y)("div",{css:Y4.splitRight,style:i,children:(0,f.Y)("div",{css:Y4.curveUp})})]}):null},Y9=function(e){var n=e.onClick,t=e.children,r=e.className;return n?(0,f.Y)(eg.SC,{className:r,onPress:n,css:B.wp.reset.button,children:t}):(0,f.Y)("div",{className:r,children:t})},Ae=function(e){var n=e.message,t=e.description,r=e.type,i=e.onClick;return(0,f.FD)(F.S,{tag:"li",css:Y4.commit,row:!0,align:"start",justify:"start","data-interactive":!!i,children:[(0,f.FD)("div",{css:Y4.decoration,children:[(0,f.Y)("div",{css:Y4.line}),(0,f.Y)("div",{css:"working"===r?Y4.commitDotUntracked:Y4.commitDot})]}),(0,f.FD)(Y9,{onClick:i,css:Y4.commitColumn,children:[(0,f.Y)(I.EY,{multiline:!1,css:Y4.commitMessage,style:"working"===r?(0,g._)({},Y0["commit-text-foreground"],ez.LU.accentPrimaryStronger):{},children:n}),t?(0,f.Y)(I.EY,{css:Y4.commitDescription,children:t}):null]})]})},An=function(){var e=(0,v._)((0,w.useState)(!1),2),n=e[0],t=e[1];return n?(0,f.Y)("li",{children:(0,f.Y)(YQ,{onDone:function(){return t(!1)}})}):(0,f.Y)(Ae,{type:"working",message:"uncommitted changes",onClick:function(){return t(!0)}})},At=function(e){var n,t,r,i,o,a,l,s,c,u,d,p=(u={variables:{id:e.selectedRepl.id}},d=(0,K._)({},YZ,u),Q.I(Yq,d)).data,h=S4(),m=h.state,g=h.commits,v=(null==m?void 0:m.error)?null:null!==(l=null==m?void 0:m.state)&&void 0!==l?l:null,w=(null==m?void 0:m.error)?null:null!==(s=null==m?void 0:m.type)&&void 0!==s?s:null,y=(null==p?void 0:null===(n=p.repl)||void 0===n?void 0:n.__typename)==="Repl"&&p.repl.title||"Remote",b=c=w===rz.UN.NORMAL&&v!==rz.Gi.CLEAN;if(null==g?void 0:g.error)return(0,f.Y)(I.EY,{children:g.error});var S=!!(null==g?void 0:null===(t=g.theirs)||void 0===t?void 0:t.length),Y=!!(null==g?void 0:null===(r=g.ours)||void 0===r?void 0:r.length)||b;return(0,f.FD)(Y5,{hasLeft:S,hasRight:Y,children:[S?(0,f.Y)(Y8,{area:"left",title:y,children:null==g?void 0:null===(i=g.theirs)||void 0===i?void 0:i.map(function(e){return(0,f.Y)(Ae,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,YK.K)(e.author.date))},e.hash)})}):null,Y?(0,f.FD)(Y8,{area:"right",title:"My workspace",children:[b?(0,f.Y)(An,{}):null,null==g?void 0:null===(o=g.ours)||void 0===o?void 0:o.map(function(e){return(0,f.Y)(Ae,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,YK.K)(e.author.date))},e.hash)})]}):null,(0,f.Y)(Y8,{area:"common",children:null==g?void 0:null===(a=g.both)||void 0===a?void 0:a.map(function(e){return(0,f.Y)(Ae,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,YK.K)(e.author.date))},e.hash)})})]})},Ar=function(e){var n=(0,v._)((0,w.useState)(function(){return(0,eN.y$)()}),1)[0];return(0,f.FD)(dT.Provider,{value:n,children:[(0,f.Y)(d3,{}),(0,f.Y)(At,(0,K._)({},e))]})},Ai=(0,M.x)({header:[B.wp.p(8),B.wp.rowWithGap(2),B.wp.border({color:ez.LU.outlineDimmest,direction:"bottom"})],headerLeft:[B.wp.flex.wrap,B.wp.align.center,{flex:1}],comboBoxAndActions:[B.wp.flex.wrap,B.wp.flex.shrink(1)],iconButton:[B.wp.color.foregroundDimmer,B.wp.hover(B.wp.color.foregroundDefault)],headerRight:[B.wp.pt(4)],swapIcon:[B.wp.color.foregroundDimmest,{rotate:"90deg"}],warnings:[B.wp.p(8),{"&:empty":B.wp.display.none}],toggle:[B.wp.minWidth(123)],errorView:[B.wp.rowWithGap(8),B.wp.justify.center],viewSection:[B.wp.px(8),B.wp.py(12),{":not(:last-of-type)":B.wp.border({color:ez.LU.outlineDimmest,direction:"bottom"})}]}),Ao=function(e){var n=e.selectedRepl,t=e.currentRepl,r=e.remoteResult,i=e.tab,o=e.isMainRepl;return n?"Loading"===r.state?(0,f.Y)(tn.A,{}):"Error"===r.state?(0,f.Y)(I.EY,{children:"Something went wrong, please try again."}):"changes"===i?(0,f.Y)(YD,{selectedRepl:n,isMainRepl:o}):(0,f.Y)(Ar,{selectedRepl:n,currentRepl:t}):(0,f.Y)(I.EY,{children:"Select a Repl to compare against your current Repl."})},Aa=(0,w.forwardRef)(function(e,n){var t,r,i,o,a,l=e.repl,s=e.project,c=e.openGitPane,u=e.org,d=e.currentUser,p=!!s.mainRepl&&l.id===s.mainRepl.id,h=(0,v._)((0,w.useState)(p?null:null!==(r=s.mainRepl)&&void 0!==r?r:null),2),m=h[0],g=h[1],y=(0,v._)((0,w.useState)("changes"),2),b=y[0],S=y[1],Y=function(){return S("changes"===b?"commits":"changes")};(0,w.useEffect)(function(){(0,SJ.L)({action:"tabOpened",orgId:u.id,projectId:s.id,tab:b,replType:p?"mainRepl":"devRepl"})},[b,s,u,p]);var A=S1({selectedReplId:null!==(i=null==m?void 0:m.id)&&void 0!==i?i:null}),C=A.isFetching,x=A.refetch,k=A.state,_=A.remote,D=A.pull,E=D.doPull,R=D.state,T=R.error,P=R.loading,L=(null==k?void 0:k.error)?null:null!==(o=null==k?void 0:k.state)&&void 0!==o?o:null;return(0,f.Y)(S2.Provider,{value:A,children:(0,f.FD)(F.S,{innerRef:n,children:[(0,f.FD)(F.S,{css:Ai.header,children:[(0,f.FD)(F.S,{css:Ai.headerLeft,row:!0,gap:8,children:["changes"===b?(0,f.Y)(eg.$n,{css:Ai.toggle,text:"Changes",iconLeft:(0,f.Y)(ln.A,{}),iconRight:(0,f.Y)(f5.A,{css:Ai.swapIcon}),onClick:Y},"toggle"):(0,f.Y)(eg.$n,{css:Ai.toggle,text:"Commits",iconLeft:(0,f.Y)(im.A,{}),iconRight:(0,f.Y)(f5.A,{css:Ai.swapIcon}),onClick:Y},"toggle"),(0,f.Y)(I.EY,{color:"dimmer",multiline:!0,children:"compared against"}),(0,f.FD)(F.S,{css:Ai.comboBoxAndActions,row:!0,gap:8,children:[(0,f.Y)(Yi,{"aria-label":"Select a Repl",replId:l.id,selectedReplId:null!==(a=null==m?void 0:m.id)&&void 0!==a?a:null,onSelect:g}),(0,f.FD)(F.S,{row:!0,gap:0,align:"center",children:[(0,f.Y)(ev.K0,{alt:"Pull",onClick:function(){E({branch:"main"}),(0,SJ.L)({action:"pull",orgId:u.id,projectId:s.id,replType:p?"mainRepl":"devRepl"})},disabled:P||p,css:Ai.iconButton,children:C?(0,f.Y)(tn.A,{}):(0,f.Y)(fz.A,{})}),m?(0,f.Y)(sL.A,(0,e7._)((0,K._)({alt:"Go to ".concat(m.title),target:"_blank"},(0,YR.q1)(m,{initialPaneType:"project"})),{css:Ai.iconButton,children:(0,f.Y)(ru.A,{})})):null]})]})]}),(0,f.Y)(F.S,{css:Ai.headerRight,row:!0,gap:8,children:(0,f.Y)(ev.K0,{alt:"Fetch",onClick:x,disabled:"Success"!==_.state,css:Ai.iconButton,children:C?(0,f.Y)(tn.A,{}):(0,f.Y)(o3.A,{})})})]}),(0,f.FD)(F.S,{css:Ai.warnings,gap:12,children:[T===rz.uA.DIRTY_WORKTREE?(0,f.Y)(F.S,{css:Ai.errorView,children:(0,f.Y)(tZ.N,{colorway:"negative",icon:(0,f.Y)(o9.A,{}),text:"You have uncommitted changes. Please commit them before pulling."})}):null,T===rz.uA.MERGE_CONFLICT?(0,f.FD)(F.S,{css:Ai.errorView,children:[(0,f.Y)(tZ.N,{colorway:"negative",icon:(0,f.Y)(o9.A,{}),text:"There were conflicts in the changes you are trying to pull. Click to resolve them."}),(0,f.Y)(eg.$n,{text:"Resolve Manually",onClick:function(){c(),E({branch:"main",allowConflicts:!0}),(0,SJ.L)({projectId:s.id,orgId:u.id,action:"pullWithConflicts",replType:p?"mainRepl":"devRepl"})},colorway:"negative"})]}):null,L===rz.Gi.MERGING?(0,f.Y)(tZ.N,{colorway:"primary",text:"Merge in progress"}):null,L===rz.Gi.REBASING?(0,f.Y)(tZ.N,{colorway:"primary",text:"Rebase in progress"}):null,(0,f.Y)(YE,{})]}),p?(0,f.Y)(F.S,{css:Ai.viewSection,children:(0,f.Y)(YI,{selectedRepl:null!=m?m:void 0})}):null,!p&&m?(0,f.Y)(F.S,{css:Ai.viewSection,children:(0,f.Y)(YV,{destinationRepl:m,sourceRepl:l,projectId:s.id,mainReplId:null===(t=s.mainRepl)||void 0===t?void 0:t.id,orgId:u.id,currentUser:d})}):null,(0,f.Y)(F.S,{css:Ai.viewSection,children:(0,f.Y)(Ao,{currentRepl:l,selectedRepl:m,remoteResult:_,isMainRepl:p,tab:b})})]})})}),Al=t(41956),As=(0,M.x)({container:[B.wp.p(8)],loading:[B.wp.p(16)]});function Ac(e){var n,t,r,i=e.isActive,o=e.performPaneOperation,a=(0,ub.Jw)(S$.X.id,S$.F.ProjectPane),l=(0,n_.A)(),s=(0,Al.Q)(),c=(n=(0,K._)({},Sq,{variables:{id:l}}),Q.I(SK,n)),u=c.data,d=c.loading,p=c.error,h=(null==u?void 0:u.repl.__typename)==="Repl"?u.repl:null,m=(null==u?void 0:u.currentUser)?u.currentUser:null,g=(null==h?void 0:null===(t=h.project)||void 0===t?void 0:t.__typename)==="Project"?h.project:null,v=(null==g?void 0:null===(r=g.org)||void 0===r?void 0:r.__typename)==="Org"?g.org:null,y=(0,nT.A)().showError,b="error"===s.state?s.error:null;return((0,w.useEffect)(function(){b&&y(b)},[y,b]),m4(i),d||"loading"===s.state)?(0,f.Y)(F.S,{css:As.loading,row:!0,gap:8,justify:"center",children:(0,f.Y)(tn.A,{})}):v&&g?!p&&h&&m?(0,f.Y)(Aa,{ref:a,repl:h,project:g,org:v,openGitPane:function(){return o({operation:"open",pane:{type:"git"}})},currentUser:m}):(0,f.Y)(F.S,{css:As.container,children:(0,f.Y)(I.EY,{children:"Something went wrong, please try again."})}):(0,f.Y)(F.S,{css:As.container,children:(0,f.Y)(I.EY,{children:"This Repl is not a project!"})})}function Au(e){return(0,f.Y)(n$.Ay,(0,e7._)((0,K._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M6 3.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM2.25 6a3.75 3.75 0 1 1 4.5 3.675V21a.75.75 0 0 1-1.5 0V9.675A3.751 3.751 0 0 1 2.25 6Zm10 0a.75.75 0 0 1 .75-.75h3A2.75 2.75 0 0 1 18.75 8v6.325A3.751 3.751 0 0 1 18 21.75a3.75 3.75 0 0 1-.75-7.425V8A1.25 1.25 0 0 0 16 6.75h-3a.75.75 0 0 1-.75-.75ZM18 15.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z",clipRule:"evenodd"})}))}var Ad=h.ZU.Object({type:h.ZU.Literal("project")}),Ap={Content:function(e){var n=e.options,t=n.isActive,r=n.performPaneOperation;return(0,f.Y)(Ac,{isActive:t,performPaneOperation:r})},Icon:function(){return(0,f.Y)(Au,{})},getTitle:function(){return"Project"},description:"Manage changes in your Project and sync or merge changes across Apps in the Project",category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(Ad,e)}},Af=t(11580),Ah=t(95969),Am=t(78044),Ag=t(66892),Av=t(83472),Aw=t(94668),Ay=t(94869),Ab=t(2197),AS=t(35225),AY=t(47099),AA=(0,eN.eU)(0),AC=(0,eN.eU)(function(e){return e(AA)<=AY.bX?"compact":"normal"}),Ax={CURSOR_SAVE:"\x1b[s",CURSOR_RESTORE:"\x1b[u",ERASE_TO_END_OF_SCREEN:"\x1b[0J",COLOR_RESET:"\x1b[0m",COLOR_BRIGHT_BLACK:"\x1b[0;90m"},Ak=(0,nD.AH)([B.wp.position.absolute,B.wp.left(8),B.wp.right(0),B.wp.zIndex(5)]);function A_(e){var n=e.lineNumber,t=e.paneHeight,r=e.shell,i=e.sendToShellChannel,o=e.onClose,a=(0,w.useMemo)(function(){return null==r?void 0:r._term},[r]),l=(0,w.useMemo)(function(){var e,n=null==a?void 0:a._core;return null!==(e=null==n?void 0:n._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[a]),s=(0,w.useRef)(""),c=(0,w.useRef)(!1),u=(0,w.useRef)(null),d=(0,v._)((0,w.useState)(64),2),p=d[0],h=d[1],m=(0,w.useRef)(null),g=(0,w.useCallback)(function(e){return h(e.height)},[h]),y=(0,S.Jc)({onCode:function(e){if(null===e){s.current="";return}s.current!==e&&(c.current&&(r.write(Ax.CURSOR_RESTORE),r.write(Ax.ERASE_TO_END_OF_SCREEN)),r.write(Ax.CURSOR_SAVE),r.write(Ax.COLOR_BRIGHT_BLACK),r.write(e.replaceAll("\n","\r\n")),r.write(Ax.COLOR_RESET),c.current=!0,s.current=e)}}),b=y.sendMessage,Y=y.stopMessage,A=y.getCode,C=y.loading,x=y.completed,k=y.error,_=y.clearError,D=(0,w.useCallback)(function(){(0,t7.u4)(t7.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell"}),Y(),c.current&&(r.write(Ax.CURSOR_RESTORE),r.write(Ax.ERASE_TO_END_OF_SCREEN),r.write(Ax.COLOR_RESET)),o()},[r,Y,o]);(0,w.useEffect)(function(){return r.onData(function(){Y(),o()}).dispose},[r,Y,o]);var E=(0,AY.D3)({id:(0,nF.A)(),inputRef:m,loading:C,onSubmit:function(){U?L():((0,t7.u4)(t7.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:R}),N())},onClose:D}),R=E.value,I=E.setValue,T=E.onKeyDown,P=E.escPressed,L=(0,w.useCallback)(function(){var e,n=null===(e=A())||void 0===e?void 0:e.code;if(!c.current||!n){D();return}r.write(Ax.CURSOR_RESTORE),r.write(Ax.ERASE_TO_END_OF_SCREEN),r.write(Ax.COLOR_RESET),i(n),(0,t7.u4)(t7.AZ.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",source:"shell"}),o()},[r,A,o,D,i]),U=x&&u.current===R,N=(0,w.useCallback)(function(){u.current=R,(0,t7.u4)(t7.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:R}),b({message:R})},[b,R]),O=l.height*(n+1)+8,M="top";O+p>t&&(M="bottom",O=t-l.height*(n+1)+4);var B=(0,S.Gk)(),H=(0,v._)((0,w.useState)(function(){return(0,eN.y$)()}),1)[0],z=(0,eO.Xr)(AA,{store:H}),W=(0,eO.md)(AC,{store:H}),G=(0,t6.A)(function(e){return z(e.width)});return(0,f.Y)(F.S,{css:Ak,style:{top:"top"===M?O:void 0,bottom:"bottom"===M?O:void 0},children:(0,f.FD)(AY.y1,{requestMeasure:g,type:"generateCode",isCodeMirrorPocket:!1,error:k,clearError:_,innerRef:G,children:[(0,f.Y)(AY.pd,{value:R,inputRef:m,onChange:function(e){return I(e.currentTarget.value)},placeholder:"Enter a prompt to generate a shell command",onKeyDown:T,autoFocus:!0}),(0,f.FD)(AY.wi,{children:[(0,f.FD)(f.FK,{children:[(0,f.Y)(AY.sb,{type:"generateCode"}),x?(0,f.Y)(ev.K0,{alt:"Rerun the same prompt",onClick:function(){return N()},size:12,colorway:"grey",children:(0,f.Y)(o3.A,{})}):null]}),U?(0,f.FD)(f.FK,{children:[(0,f.Y)(eg.$n,{variant:"outlined",size:"small",text:"Reject",onClick:function(){(0,t7.u4)(t7.AZ.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",source:"shell"}),D()}}),(0,f.Y)(eg.$n,{size:"small",text:"Accept",colorway:"blurple",onClick:L,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,f.Y)(AY.XT,{escPressed:P,connecting:!B,loading:C,disabled:!R||!R.trim(),promptPresentation:"normal"===W,onClick:function(){C?((0,t7.u4)(t7.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell",message_content:R}),Y()):((0,t7.u4)(t7.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:R}),N())}})]})]})})}var AD=t(49905);function AE(e){var n=e.portsOpenedByThisShell,t=e.performPaneOperation,r=e.onClose,i=(0,A.A)().ports,o=(0,w.useCallback)(function(e){i.updateDotReplitPortsMapping(e,void 0)},[i]),a=(0,w.useCallback)(function(e){i.tryExposingPortAutomatically(e)},[i]);return(0,f.Y)(AD.yN,{configurations:n.map(function(e){return e.configuration}),openWebview:function(){t({operation:"open",secondary:!0,pane:{type:"webview",data:{ports:n.length>0?{type:"local",port:n[0].configuration.localPort}:void 0}}})},openNetworkingTool:function(){t({operation:"open",secondary:!0,pane:{type:"networking"}})},onClose:function(){null==r||r()},onDontExposePort:function(){1===n.length&&o(n[0].configuration.localPort)},onDoExposePort:function(){1===n.length&&a(n[0].configuration.localPort)}})}var AR=t(47535),AI=t(27549),AF=(0,nD.AH)([B.wp.height("100%"),B.wp.overflow("hidden"),{"& .xterm":[B.wp.pl(8),B.wp.pt(8),B.wp.pb(4),B.wp.height("100%")]}]),AT=(0,M.x)({container:[B.wp.height("100%"),{"&:focus-within .controls":{opacity:1}}],xterm:AF,xtermWithBorderRadius:[AF,{"& .xterm-viewport":[B.wp.borderRadius(0,0,8,8)]}]}),AP=(0,nD.AH)([B.wp.position.absolute,B.wp.flex.row,B.wp.top(8),B.wp.right(8),B.wp.height(30),B.wp.align.center,B.wp.zIndex(8),{opacity:0}]);function AL(e){var n,t,r=e.shell,i=e.shellMetadata,o=e.sendToShellChannel,a=e.shellRef,l=e.className,s=e.openSearchAndReplace,c=e.openAIWithMessage,u=e.performPaneOperation,d=e.isGeneratePromptVisible,p=e.currentPromptLineNumber,h=e.onOpenGeneratePrompt,m=e.onCloseGeneratePrompt,g=e.searchState,y=e.setSearchState,b=(0,nX.gc)("accessibleTerminal").preferences.accessibleTerminal,S=(0,Ay.kP)(null!==(n=null==i?void 0:i.cgroup)&&void 0!==n?n:void 0);r&&g.isSearching&&(t=(0,f.Y)(AR.p,{searchValue:g.searchText,setSearchValue:function(e){y({isSearching:!0,searchText:e})},findPrevious:r.findPrevious,findNext:r.findNext,exit:function(){return y({isSearching:!1})}}));var Y=(0,i2.m5)(),A=(0,Ab.EF)().onContextMenu,C=(0,AS.P)({xterm:r,isOutputsTerminal:!1,openAIWithMessage:c,openShellSearch:function(e){y({isSearching:!0,searchText:e})},openSearchAndReplace:s,openGeneratePrompt:h});(0,AI.Z)({xterm:r,onAskAssistant:function(e){c((0,Av.yt)(e))}}),(0,w.useEffect)(function(){null==r||r.fit()},[r,S]);var x=(0,v._)((0,w.useState)(0),2),k=x[0],_=x[1],D=(0,t6.A)(function(e){_(e.height)},{type:"throttle",wait:200});return(0,f.FD)(F.S,{className:l,innerRef:D,css:AT.container,onKeyDown:function(e){"f"===e.key&&(0,Aw.T$)(e)&&(y({isSearching:!0,searchText:""}),e.preventDefault())},children:[!b&&(0,f.Y)(Ag.s,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the shell.'}),(0,f.FD)(F.S,{css:[B.wp.coverContainer,B.wp.flex.column],onClick:function(){d&&(m(),null==r||r.focus())},children:[(0,f.Y)(F.S,{css:[Y?AT.xterm:AT.xtermWithBorderRadius,B.wp.flex.growAndShrink(1),d?{pointerEvents:"none",filter:"opacity(0.75)"}:null],innerRef:a,onContextMenu:function(e){return A(e,{command:C})}}),(0,f.Y)(AE,{portsOpenedByThisShell:S,performPaneOperation:u,onClose:function(){null==r||r.focus(),null==r||r.fit()}})]}),r&&d?(0,f.Y)(A_,{lineNumber:p,paneHeight:k,shell:r,sendToShellChannel:o,onClose:function(){m(),r.focus()}}):null,r?(0,f.Y)(F.S,{className:"controls",css:AP,children:t}):null]})}var AU=t(64254).hp,AN=(0,nD.AH)([B.wp.position.relative,B.wp.height("100%")]);function AO(e){var n,t,r=e.shellId,i=e.paneId,o=e.performPaneOperation,a=e.userId,l=e.xterm,s=e.xtermRef,c=e.currentPromptLineNumber,u=e.isGeneratePromptVisible,d=e.onOpenGeneratePrompt,p=e.onCloseGeneratePrompt,h=e.searchState,m=e.setSearchState,g=(0,v._)((0,w.useState)(void 0),2),Y=g[0],A=g[1],C=(0,w.useCallback)(function(e){o({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[o]),x=(0,S.Au)({onSession:function(e){o({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:e}}})}}).sendMessage,k=(0,S.dm)(),_=k.assistantMode,D=k.getAssistantMessageModel,E=k.getAssistantMessageIntent,R=(0,cF.L)().authorizations,I=(0,dy.T)({mode:_,authz:R}),T=(0,w.useCallback)(function(e){var n=D(I);(0,t7.u4)(t7.AZ.ASSISTANT_USED,{action:"message_sent",assistant_mode:_,model:n,message_content:e,message_source:"shell"}),x({kind:"message",message:e,intent:E(),model:n})},[x,D,E,I,_]),P=(0,w.useRef)(null);(0,nc.b)((n=(0,y._)(function(e,n){var t,o,s,c,u,d,p;return(0,b.YH)(this,function(f){var h;return(t=n.signal,l)?(s=(o=e.shellExec.connect.stream({id:r,userId:a,processViewId:i,size:l.getSize()},{signal:t})).reqWritable,c=o.resReadable,P.current=u=function(e){s.write({$kind:"stdin",stdin:new Uint8Array(AU.from(e))})},d=l.onResize((h=(0,y._)(function(n){return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.shellExec.resize.rpc({id:r,userId:a,processViewId:i,size:n})];case 1:return t.sent(),[2]}})}),function(e){return h.apply(this,arguments)})),p=l.onData(u),l.write("\x1bc"),(0,y._)(function(){var e,n,t,r,i,o,a;return(0,b.YH)(this,function(s){switch(s.label){case 0:e=!1,n=!1,s.label=1;case 1:s.trys.push([1,6,7,12]),r=(0,e6._)(c),s.label=2;case 2:return[4,r.next()];case 3:if(!(e=!(i=s.sent()).done))return[3,5];if(!(o=i.value).ok)return l.clear(),[2];"output"===o.payload.$kind&&l.write(o.payload.output),s.label=4;case 4:return e=!1,[3,2];case 5:return[3,12];case 6:return a=s.sent(),n=!0,t=a,[3,12];case 7:if(s.trys.push([7,,10,11]),!(e&&null!=r.return))return[3,9];return[4,r.return()];case 8:s.sent(),s.label=9;case 9:return[3,11];case 10:if(n)throw t;return[7];case 11:return[7];case 12:return[2]}})})(),[2,function(){P.current=null,s.close(),d.dispose(),p.dispose()}]):[2]})}),function(e,t){return n.apply(this,arguments)}),[l,r,a,i]),(0,nc.b)((t=(0,y._)(function(e,n){var t,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:t=n.signal,i=e.shellExec.monitor.subscribe({id:r},{signal:t}).resReadable,o=!1,a=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),s=(0,e6._)(i),p.label=2;case 2:return[4,s.next()];case 3:if(!(o=!(c=p.sent()).done))return[3,5];if(!(u=c.value).ok){if("NO_PROCESS_MATCHING_ID"===u.payload.code)return[3,4];return[3,5]}"NotStarted"!==u.payload.state&&u.payload.cgroupPath&&A({cgroup:u.payload.cgroupPath}),p.label=4;case 4:return o=!1,[3,2];case 5:return[3,12];case 6:return d=p.sent(),a=!0,l=d,[3,12];case 7:if(p.trys.push([7,,10,11]),!(o&&null!=s.return))return[3,9];return[4,s.return()];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(a)throw l;return[7];case 11:return[7];case 12:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[r]);var L=(0,w.useCallback)(function(e){return!!P.current&&(P.current(e),!0)},[P]);return(0,Am.A)({sendInput:L,paste:function(e){return!!l&&(l.paste(e),!0)}}),(0,f.Y)(F.S,{css:AN,children:(0,f.Y)(AL,{shell:l,shellMetadata:Y,shellRef:s,performPaneOperation:o,currentPromptLineNumber:c,isGeneratePromptVisible:u,sendToShellChannel:L,openSearchAndReplace:C,openAIWithMessage:T,onOpenGeneratePrompt:d,onCloseGeneratePrompt:p,searchState:h,setSearchState:m})})}var AM=t(90298),AB=t(15278),AH=t(38200),Az=(0,M.x)({wrapper:[B.wp.height("100%"),B.wp.flex.column],headerWrapper:[B.wp.flex.growAndShrink(0),B.wp.align.center,B.wp.justify.spaceBetween,B.wp.rowWithGap(4),B.wp.px(4),B.wp.border({direction:"bottom",color:ez.LU.outlineDimmest}),B.wp.height(28)],headerGroupLeft:[B.wp.flex.growAndShrink(1)],headerGroupRight:[B.wp.flex.shrink(0)],failureWrapper:[B.wp.p(8),B.wp.color.accentNegativeStronger],avatarWrapper:[B.wp.flex.growAndShrink(0),B.wp.rowWithGap(4),B.wp.align.center],terminalWrapper:[B.wp.height("100%"),B.wp.flex.growAndShrink(1)],shellListButton:[B.wp.viewStyle,B.wp.reset.button,B.wp.p(2),B.wp.height(22),B.wp.rowWithGap(8),B.wp.align.center,oW.b.nofill,B.wp.flex.shrink(1),{transitionProperty:"background-color, box-shadow, opacity",opacity:.8}],shellListButtonLabel:[B.wp.display.flex,B.wp.align.center,B.wp.rowWithGap(8),B.wp.flex.shrink(1)],shellListItem:[B.wp.display.flex,B.wp.rowWithGap(8),B.wp.borderRadius(),B.wp.px(6),B.wp.py(4),B.wp.align.center,B.wp.color.foregroundDefault,B.wp.cursor.pointer,{transitionProperty:"background-color, box-shadow",backgroundColor:"transparent",borderWidth:1,borderStyle:"solid",borderColor:"transparent",outline:"2px solid ".concat(ez.LU.accentPrimaryDefault),outlineOffset:"-2px",outlineColor:"transparent"},{"&[data-hovered],&[data-focused]":{backgroundColor:ez.LU.interactiveBackground},"&[data-selected]":{backgroundColor:ez.LU.interactiveBackgroundActive},"&[aria-disabled]":{color:ez.LU.foregroundDimmest,cursor:"not-allowed"}}],shellListItemText:[B.wp.font.code,B.wp.fontSize(ez.LU.fontSizeSmall),B.wp.flex.growAndShrink(1),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],shellListItemCommand:[B.wp.font.code,B.wp.fontSize(ez.LU.fontSizeSmall)],shellListCurrentText:[B.wp.fontSize(ez.LU.fontSizeSmall),B.wp.color.greyDefault],shellListNotRunningText:[B.wp.fontSize(ez.LU.fontSizeSmall),B.wp.color.greyDefault],runningShellsCountBadge:[B.wp.width(18),B.wp.height(18),B.wp.align.center,B.wp.justify.center,B.wp.backgroundColor.backgroundHighest,B.wp.borderRadius("full"),B.wp.fontSize(ez.LU.fontSizeSmall)]});function AW(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,y,b,S,Y,C,x,k,_,D,E,R,I,T,P,L,U,N,O,M,B,H,z,W,G=e.paneId,V=e.performPaneOperation,j=e.emitPaneMetrics,Z=e.initialPwd,q=e.initialCmd,$=e.isActive,J=(0,v._)((0,w.useState)({state:"not-connected"}),2),Q=J[0],X=J[1],ee="connected"===Q.state?Q.id:void 0,en=(0,ac.T)(),et=(0,w.useCallback)(function(e){return X({state:"connected",id:e})},[X]),er=(r=(n={isActive:$,performPaneOperation:V,emitPaneMetrics:j}).performPaneOperation,i=n.emitPaneMetrics,o=n.isActive,a=(0,w.useCallback)(function(e){r({operation:"open",secondary:!0,pane:{type:(0,nq.QY)(e),data:e}})},[r]),l=(0,w.useCallback)(function(e,n){r({operation:"open",secondary:!0,pane:{type:"webview",data:{ports:{type:"local",path:e,port:n}}}})},[r]),s=(0,A.A)().fs,c=(0,n_.A)(),u=(0,Ah.j)(),d=(0,w.useRef)(null),p=(0,w.useRef)(""),m=(h=(0,v._)((0,w.useState)(0),2))[0],y=h[1],S=(b=(0,v._)((0,w.useState)(!1),2))[0],Y=b[1],C=(0,w.useRef)(!1),x=(0,AM.QU)({onFTCSState:function(e){var n=e.state;n===AM.Od.CommandExecuted&&(C.current=!0),n===AM.Od.CommandFinished&&(C.current=!1),d.current=n},onOpenGeneratePrompt:function(){!C.current&&Y(!0)},onUpdateCurrentPromptLineNumber:y}),k=(0,w.useCallback)(function(e,n){if(n.startsWith("A")){var t=n.replace(/^A;/,"");u("user:shell:exec",{command:t}),(0,t7.u4)(t7.AZ.SHELL_COMMAND_EVALED,{context:t,replId:c,api:"pid2",pwd:p.current})}n.startsWith("B")&&(p.current=n.replace(/^B;/,""))},[u,c]),_=(0,w.useCallback)(function(e){return r({operation:"open",pane:e,secondary:!0})},[r]),E=(D=(0,v._)((0,AB.A)({openFile:a,listFiles:s.listFiles,openWebview:l,onInBandOSCMessages:(t={},(0,g._)(t,AM.n8,x),(0,g._)(t,82,k),t),openPane:_,emitPaneMetrics:i}),2))[0],R=D[1],I=(0,w.useCallback)(function(){!C.current&&((0,t7.u4)(t7.AZ.AI_SHELL_CONTEXT_MENU_GENERATE_CLICKED),Y(!0))},[]),T=(0,w.useCallback)(function(){Y(!1)},[]),P=(0,w.useId)(),L="scope-shell-".concat(P),(0,p$.RD)(L,o),(0,p$.SJ)(function(){return[AM.Ws.id,{run:function(){!C.current&&Y(!0)},scope:L,bubble:!1}]},[Y]),(0,n9.HP)(function(){return E},[E]),N=(U=(0,v._)((0,w.useState)({isSearching:!1}),2))[0],O=U[1],M=(0,w.useCallback)(function(){var e;O({isSearching:!0,searchText:null!==(e=null==E?void 0:E._term.getSelection())&&void 0!==e?e:""})},[E]),B=(0,w.useCallback)(function(){O({isSearching:!1})},[]),H=(0,w.useCallback)(function(){N.isSearching?B():M()},[M,B,N]),z=(0,w.useCallback)(function(){null==E||E.clear()},[E]),W=(0,w.useMemo)(function(){return[{match:vh.G2,data:{type:"action",label:"Clear Shell",icon:(0,f.Y)(rh.A,{}),run:z}},{match:vh.G2,data:{type:"action",label:"Find in Shell",icon:(0,f.Y)(uU.A,{}),run:M}}]},[M,z]),(0,n9.Qt)(function(){return{commands:[{commands:W}],type:"shell"}},[W]),{xterm:E,xtermRef:R,searchState:N,setSearchState:O,toggleSearch:H,isGeneratePromptVisible:S,currentPromptLineNumber:m,onOpenGeneratePrompt:I,onCloseGeneratePrompt:T,clearShell:z});return(0,f.FD)(F.S,{css:Az.wrapper,children:[(0,f.Y)(AG,{step:Q,setStep:X,shellId:ee,initialCmd:q,initialPwd:Z,switchShellSession:et,toggleSearch:er.toggleSearch,clearShell:er.clearShell}),(0,f.FD)(F.S,{css:Az.terminalWrapper,children:[en&&void 0!==ee?(0,f.Y)(AO,(0,K._)({shellId:ee,paneId:G,performPaneOperation:V,userId:en},er)):null,"errored"===Q.state?(0,f.Y)(F.S,{css:Az.failureWrapper,children:"Failed to load the Shell."}):null]})]})}function AG(e){var n=e.shellId,t=e.step,r=e.setStep,i=e.initialPwd,o=e.initialCmd,a=e.switchShellSession,l=e.toggleSearch,s=e.clearShell,c=(0,w.useRef)(!1),u=(0,e5.I)(function(e){var n;return n=(0,y._)(function(n){var t;return(0,b.YH)(this,function(a){switch(a.label){case 0:if(c.current)return[2];return c.current=!0,[4,e.shellExec.spawn.rpc({cmd:"bash",cwd:(null==n?void 0:n.restoreFromPaneState)?i:void 0,initialCmd:(null==n?void 0:n.restoreFromPaneState)?o:void 0,autoCleanup:!0})];case 1:return(t=a.sent()).ok?r({state:"connected",id:t.payload.id}):"UNEXPECTED_DISCONNECT"===t.payload.code?r({state:"not-connected"}):r({state:"errored"}),c.current=!1,[2]}})}),function(e){return n.apply(this,arguments)}},[r,i,o]),d=(0,e5.I)(function(e){return(0,y._)(function(){return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!n)return[3,2];return[4,e.shellExec.kill.rpc({id:n})];case 1:t.sent(),t.label=2;case 2:return[2]}})})},[n]);return(0,f.FD)(F.S,{css:Az.headerWrapper,children:[(0,f.Y)(F.S,{css:Az.headerGroupLeft,row:!0,gap:2,align:"center",children:(0,f.Y)(AV,{shellId:n,spawnShell:u,switchShellSession:a,step:t})}),(0,f.FD)(F.S,{css:Az.headerGroupRight,row:!0,gap:4,align:"center",children:[(0,f.Y)(ev.K0,{alt:"Search in Shell",onClick:function(){l()},children:(0,f.Y)(uU.A,{color:ez.LU.foregroundDimmest})}),(0,f.Y)(ev.K0,{alt:"Clear Output",onClick:function(){s()},children:(0,f.Y)(rh.A,{color:ez.LU.foregroundDimmest})}),(0,f.Y)(ev.K0,{alt:"Kill Shell",disabled:void 0===d,onClick:function(){null==d||d()},children:(0,f.Y)(dX.A,{color:ez.LU.foregroundDimmest})})]})]})}function AV(e){var n,t=e.step,r=e.shellId,i=e.spawnShell,o=e.switchShellSession,a=(0,v._)((0,w.useState)([]),2),l=a[0],s=a[1],c=l.find(function(e){return e.id===r});(0,nc.b)((n=(0,y._)(function(e,n){var t,r,i,o,a,l,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:t=n.signal,r=e.shellExec.monitorAll.subscribe({},{signal:t}).resReadable,i=!1,o=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),l=(0,e6._)(r),p.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(c=p.sent()).done))return[3,5];if(!(u=c.value).ok)return[2];s(u.payload.processes.filter(function(e){return"Running"===e.state})),p.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return d=p.sent(),o=!0,a=d,[3,12];case 7:if(p.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[]),(0,w.useEffect)(function(){"not-connected"===t.state&&(null==i||i({restoreFromPaneState:!0}))},[i,t.state]),(0,w.useEffect)(function(){!("connected"!==t.state||l.find(function(e){return e.id===r}))&&(l.length>0?o(l[0].id):null==i||i())},[r,l,i,t.state,o]);var u=c&&"Running"===c.state&&c.isInRecoveryMode;return c&&"Running"===c.state?(0,f.FD)(f.FK,{children:[(0,f.FD)(b5.in,{trigger:(0,f.FD)(c5.$,{css:Az.shellListButton,children:[(0,f.Y)(it.A,{size:12}),(0,f.Y)(F.S,{css:Az.shellListButtonLabel,children:(0,f.Y)(AZ,{shellState:c})}),(0,f.Y)(Aj,{userIdsToProcessViewIds:c.userIdsToProcessViewIds}),l.length>1?(0,f.Y)(rc.m_,{tooltip:"".concat(l.length," Shells are running"),children:(0,f.Y)(F.S,{css:Az.runningShellsCountBadge,children:l.length})}):null]}),children:[l.filter(function(e){return"Running"===e.state}).sort(function(e,n){var t,r;return("Running"===e.state&&null!==(t=e.idx)&&void 0!==t?t:0)-("Running"===n.state&&null!==(r=n.idx)&&void 0!==r?r:0)}).map(function(e){var n,t=null!==(n=e.command)&&void 0!==n?n:e.previousCommand,r=e.cwd.replace(/^\/home\/runner/,"~"),i="".concat(r).concat(t?": ".concat(t):""),a=e.id===c.id;return(0,f.FD)(uD.Dr,{css:Az.shellListItem,onAction:function(){o(e.id)},textValue:i,children:[(0,f.Y)(AZ,{shellState:e}),a?(0,f.Y)(I.EY,{css:Az.shellListCurrentText,children:"Current"}):null,(0,f.Y)(Aj,{userIdsToProcessViewIds:e.userIdsToProcessViewIds})]},e.id)}),(0,f.Y)(b5.wv,{}),(0,f.Y)(b5.Dr,{label:"New Shell",icon:(0,f.Y)(rf.A,{}),onAction:function(){null==i||i()}})]}),u?(0,f.Y)(rc.m_,{tooltip:"The nix environment failed to build. Check if your replit.nix is configured properly. For more information look into /run/replit/env/error.",children:(0,f.Y)(o9.A,{color:ez.LU.accentNegativeDefault})}):null]}):null}function Aj(e){var n=e.userIdsToProcessViewIds,t=(0,tp.Q4)(),r=(0,w.useMemo)(function(){var e;return null!==(e=Object.keys(null!=n?n:{}).map(function(e){return parseInt(e,10)}).map(function(e){return t.find(function(n){return n.id===e})}).filter(Boolean))&&void 0!==e?e:[]},[n,t]);return 0===r.length?null:(0,f.Y)(F.S,{css:Az.avatarWrapper,children:r.map(function(e){return(0,f.Y)(AH.A,{user:e,size:16},e.id)})})}function AZ(e){var n,t=e.shellState;if("Running"!==t.state)return(0,f.Y)(I.EY,{css:Az.shellListNotRunningText,children:"Not Running"});var r=void 0!==t.command||void 0!==t.previousCommand;return(0,f.Y)(f.FK,{children:(0,f.FD)(I.EY,{children:[(0,f.Y)(I.EY,{css:Az.shellListItemText,children:t.cwd.replace(/^\/home\/runner/,"~")}),r?(0,f.FD)(f.FK,{children:[":\xa0",(0,f.Y)(I.EY,{css:Az.shellListItemCommand,style:{color:void 0===t.command?ez.LU.greyDefault:void 0},children:null!==(n=t.command)&&void 0!==n?n:t.previousCommand})]}):null]})})}var Aq=h.ZU.Object({type:h.ZU.Literal("shell"),data:h.ZU.Optional(h.ZU.Object({initialPwd:h.ZU.Optional(h.ZU.String()),initialCmd:h.ZU.Optional(h.ZU.String())}))}),AK={Content:function(e){var n,t,r=e.pane,i=e.options;return(0,f.Y)(AW,{paneId:i.paneId,isActive:i.isActive,initialPwd:null===(n=r.data)||void 0===n?void 0:n.initialPwd,initialCmd:null===(t=r.data)||void 0===t?void 0:t.initialCmd,performPaneOperation:i.performPaneOperation,emitPaneMetrics:i.emitPaneMetrics})},Icon:function(e){var n=e.size;return(0,f.Y)(n$.Vx.Provider,{value:{color:ez.LU.blueStrongest,size:n},children:(0,f.Y)(o6.A,{})})},getTitle:function(){return"Shell"},description:"Directly access your App through a command line interface (CLI)",category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(Aq,e)}};function A$(){var e=(0,$._)(["\n  query SshPane($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          connectUsingSsh {\n            isAuthorized\n            message\n            code\n          }\n        }\n        org {\n          id\n          type\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n"]);return A$=function(){return e},e}function AJ(){var e=(0,$._)(["\n  query SshPaneCurrentUser {\n    currentUser {\n      id\n      __typename\n      publicSshKeys {\n        ... on PublicSshKeysOutput {\n          keys {\n            id\n            key\n            label\n            timeCreated\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n  }\n"]);return AJ=function(){return e},e}var AQ={},AX=(0,J.J1)(A$()),A0=(0,J.J1)(AJ()),A1=t(23905),A2=t(31813),A4=t(25846),A5=t(18271),A8=t(1606),A3=t(48768),A6=t(40650),A7=t(30938),A9=t(23423),Ce=t(37977),Cn=t(79183),Ct=t(74967),Cr=t(60576),Ci=t(14854);function Co(e){return(0,f.FD)(Ci.A,(0,e7._)((0,K._)({},e),{children:[(0,f.FD)("g",{clipPath:"url(#clip0_6530_283)",children:[(0,f.Y)("mask",{id:"mask0_6530_283",width:"24",height:"24",x:"0",y:"0",maskUnits:"userSpaceOnUse",children:(0,f.Y)("path",{fill:"#fff",fillRule:"evenodd",d:"M17.019 23.836c.378.147.809.138 1.19-.046l4.942-2.377A1.5 1.5 0 0 0 24 20.06V3.939a1.5 1.5 0 0 0-.85-1.352L18.21.21a1.494 1.494 0 0 0-1.705.29l-9.46 8.63-4.12-3.128a.999.999 0 0 0-1.276.057L.327 7.261a1 1 0 0 0-.001 1.48L3.899 12 .326 15.26a1 1 0 0 0 .001 1.479L1.65 17.94a.999.999 0 0 0 1.276.057l4.12-3.128 9.46 8.63c.15.15.325.262.514.336Zm.985-17.284L10.826 12l7.178 5.448V6.552Z",clipRule:"evenodd"})}),(0,f.FD)("g",{mask:"url(#mask0_6530_283)",children:[(0,f.Y)("path",{fill:"#0065A9",d:"M23.15 2.591 18.207.211A1.495 1.495 0 0 0 16.5.5L.312 15.26a1 1 0 0 0 0 1.479l1.323 1.202a1 1 0 0 0 1.277.057l19.495-14.79A.993.993 0 0 1 24 4v-.057a1.5 1.5 0 0 0-.85-1.352Z"}),(0,f.Y)("g",{filter:"url(#filter0_d_6530_283)",children:(0,f.Y)("path",{fill:"#007ACC",d:"m23.15 21.409-4.944 2.38A1.495 1.495 0 0 1 16.5 23.5L.312 8.74a1 1 0 0 1 0-1.479L1.636 6.06a1 1 0 0 1 1.277-.057l19.495 14.79A.993.993 0 0 0 24 20v.058a1.5 1.5 0 0 1-.85 1.35Z"})}),(0,f.Y)("g",{filter:"url(#filter1_d_6530_283)",children:(0,f.Y)("path",{fill:"#1F9CF0",d:"M18.206 23.79a1.495 1.495 0 0 1-1.706-.29c.553.553 1.5.162 1.5-.621V1.12C18 .34 17.053-.054 16.5.5a1.496 1.496 0 0 1 1.706-.29l4.944 2.377c.52.25.85.776.85 1.352v16.122a1.5 1.5 0 0 1-.85 1.352l-4.944 2.377Z"})}),(0,f.Y)("path",{fill:"url(#paint0_linear_6530_283)",fillRule:"evenodd",d:"M17.004 23.836c.378.147.81.138 1.19-.046l4.942-2.377a1.5 1.5 0 0 0 .85-1.352V3.939a1.5 1.5 0 0 0-.85-1.352L18.195.21A1.494 1.494 0 0 0 16.49.5L7.03 9.13 2.91 6.002a.999.999 0 0 0-1.276.057L.313 7.261a1 1 0 0 0-.002 1.48L3.885 12 .31 15.26a1 1 0 0 0 .002 1.479l1.321 1.202a.999.999 0 0 0 1.276.057l4.12-3.128 9.46 8.63c.15.15.325.263.514.336Zm.985-17.284L10.812 12l7.177 5.448V6.552Z",clipRule:"evenodd",opacity:".25"})]})]}),(0,f.FD)("defs",{children:[(0,f.FD)("filter",{id:"filter0_d_6530_283",width:"28.015",height:"22.139",x:"-2.015",y:"3.799",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[(0,f.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.Y)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,f.Y)("feOffset",{}),(0,f.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,f.Y)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,f.Y)("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_6530_283"}),(0,f.Y)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_6530_283",result:"shape"})]}),(0,f.FD)("filter",{id:"filter1_d_6530_283",width:"11.5",height:"27.876",x:"14.5",y:"-1.938",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[(0,f.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.Y)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,f.Y)("feOffset",{}),(0,f.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,f.Y)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,f.Y)("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_6530_283"}),(0,f.Y)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_6530_283",result:"shape"})]}),(0,f.FD)("linearGradient",{id:"paint0_linear_6530_283",x1:"11.985",x2:"11.985",y1:".062",y2:"23.938",gradientUnits:"userSpaceOnUse",children:[(0,f.Y)("stop",{stopColor:"#fff"}),(0,f.Y)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,f.Y)("clipPath",{id:"clip0_6530_283",children:(0,f.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})]})]}))}function Ca(){return(0,f.Y)(Ct.A,{src:"/public/images/cursor-ide-logo.png",width:24,height:24,alt:"Cursor Logo"})}function Cl(e){var n=e.editor,t=e.disabled,r=(0,A9.A)(n),i=r.openEditor,o=r.onConfirmConfig,a=r.isConfigModalOpen,l=r.closeConfigModal;return(0,f.FD)(eo.ui,{css:Cu.connectInstructions,elevated:!0,children:[(0,f.FD)(F.S,{css:Cu.connectHeader,children:[(0,f.FD)(I.Y9,{level:3,children:["Connect to ","vscode"===n?"VS Code":"Cursor"]}),(0,f.FD)(I.EY,{color:"dimmer",children:["One-click SSH setup will launch"," ","vscode"===n?"VS Code":"Cursor"," and configure keys for you."]})]}),(0,f.Y)(eg.$n,{text:t?"SSH Key Setup Required":"Launch ".concat("vscode"===n?"VS Code":"Cursor"),iconLeft:"vscode"===n?(0,f.Y)(Co,{}):(0,f.Y)(Ca,{}),css:Cu.launchEditorButton,disabled:t,onClick:function(){(0,t7.u4)(t7.AZ.OPEN_IN_VSCODE_CLICKED,{source:"ssh_pane",editor:n}),i()}}),(0,f.Y)(lC.a,{isOpen:a,onRequestClose:l,centered:!0,children:(0,f.Y)(A3.A,{onConfirm:o})})]})}function Cs(e){var n=e.sshHostname,t=e.sshUser,r=e.sshPort,i=(0,A7.A)(),o="ssh -i ".concat(i,"/.ssh/replit -p ").concat(r," ").concat(t,"@").concat(n);return(0,f.FD)(eo.ui,{css:Cu.connectInstructions,elevated:!0,children:[(0,f.FD)(F.S,{css:Cu.connectHeader,children:[(0,f.Y)(I.Y9,{level:3,children:"Connect manually"}),(0,f.Y)(I.EY,{color:"dimmer",children:"Use the command below to connect via CLI or another IDE."})]}),(0,f.Y)(A8.A,{code:o,header:"Shell command",multiline:!1,onCopy:function(){(0,t7.u4)(t7.AZ.COPY_SSH_KEY_COMMAND_CLICKED,{source:"ssh_pane"})}})]})}function Cc(e){var n=e.onPurchaseComplete,t=e.org,r=e.sshAuthz,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1];return r.code===my.S4.RequiresActiveSubscription&&(null==t?void 0:t.type)!==my.NT.Team?(0,f.FD)(F.S,{gap:16,children:[(0,f.FD)(I.Y9,{level:3,variant:"subheadDefault",children:["SSH is only available to Replit ",i5.en," Members."]}),(0,f.FD)(I.EY,{children:["With SSH, you can access your App's shell remotely. SSH enables workflows like easy file transfer or using your favorite local IDE to edit your code on Replit."," ",(0,f.Y)("a",{href:"https://docs.replit.com/replit-workspace/ssh",target:"_blank",children:"Learn more here"})]}),(0,f.Y)(eg.$n,{onClick:function(){return a(!0)},text:"Join Replit ".concat(i5.en),iconLeft:(0,f.Y)(c9.A,{}),colorway:"blurple"}),(0,f.Y)(i4.A,{isOpen:o,onClose:function(){return a(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",onPurchaseComplete:n,analyticsContext:{upgrade:{context:"workspace_ssh_pane"}}})]}):(0,f.Y)(tZ.N,{colorway:"warning",text:r.message})}var Cu=(0,M.x)({tabContainer:[B.wp.colWithGap(8),B.wp.p(8)],connectEmptyState:[B.wp.center,B.wp.border({color:ez.LU.outlineDefault,width:1,style:"dashed"}),B.wp.borderRadius(4),B.wp.py(24),B.wp.px(12)],connectHeader:[B.wp.colWithGap(4)],connectInstructions:[B.wp.colWithGap(12),B.wp.p(8),B.wp.borderRadius(4)],connectContainer:[B.wp.py(8)],launchEditorButton:[B.wp.borderRadius(8)]});function Cd(e){var n=e.legacyKeys,t=e.openFile,r=(0,n_.A)(),i="legacy-ssh-keys-warning-".concat(r),o=(0,v._)((0,w.useState)(function(){return!eL.A.get(i,"boolean")}),2),a=o[0],l=o[1],s=(0,w.useRef)(!1);return((0,w.useEffect)(function(){return eL.A.get(i,"boolean")||l(!0),function(){s.current&&eL.A.set(i,!0)}},[i]),n&&0!==n.length&&a)?(0,f.Y)(F.S,{children:(0,f.Y)(uF.d,{colorway:"warning",iconLeft:(0,f.Y)(o9.A,{}),text:"Don't see your SSH keys here? We're moving from App-level keys to user-level keys. Click here to view your existing keys and re-add them using the 'New SSH Key' button above.",onClick:function(){t(A5.L),s.current=!0}})}):null}function Cp(e){var n,t,r,i,o,a,l=(o=(0,K._)({},AQ,void 0),Q.I(A0,o)),s=l.data,c=l.loading,u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1],h=(0,v._)((0,w.useState)(0),2),m=h[0],g=h[1],S=(t=(n=(0,v._)((0,w.useState)(null),2))[0],r=n[1],i=(0,A.A)().fs,(0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:return[4,i.readFile(A5.L)];case 1:if((e=n.sent()).error===eK.Tr.NotFound||e.error===eK.Tr.IsDirectory)return[2];if(e.error)throw Error("Unexpected error reading authorized keys");return r(e.content.toString().split("\n").map(function(e){return e.startsWith("#")||(0,A2.A)(e)?null:e}).filter(Boolean)),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[i]),t),Y=(0,Cn.A)();if(c||!Y)return(0,f.Y)(tV.A,{pane:{type:"ssh"},loading:!0,maxWidth:450});var C=Y.sshHostname,x=Y.sshUser,k=Y.sshPort,_=s&&(null===(a=s.currentUser)||void 0===a?void 0:a.__typename)==="CurrentUser"&&"PublicSshKeysOutput"===s.currentUser.publicSshKeys.__typename?s.currentUser.publicSshKeys.keys:[],D=_.length>=A1.L,E=0===_.length;return(0,f.FD)(H.tU,{selectedIndex:m,onSelectionChange:g,children:[(0,f.FD)(H.wb,{children:[(0,f.Y)(H.oz,{iconLeft:(0,f.Y)(c9.A,{}),children:"Connect"}),(0,f.Y)(H.oz,{iconLeft:(0,f.Y)(Cr.A,{}),children:"Keys"})]}),(0,f.FD)(H.T2,{children:[(0,f.Y)(H.Kp,{children:(0,f.FD)(F.S,{css:Cu.tabContainer,children:[(0,f.Y)(I.Y9,{variant:"subheadDefault",level:2,children:"Use Replit with another editor"}),(0,f.Y)(I.EY,{color:"dimmer",children:"SSH allows you to connect to an App from another machine or IDE."}),(0,f.FD)(F.S,{css:Cu.connectContainer,gap:16,children:[(0,f.Y)(Cl,{editor:"vscode",disabled:E}),(0,f.Y)(Cl,{editor:"cursor",disabled:E}),E?(0,f.FD)(F.S,{css:Cu.connectEmptyState,gap:8,children:[(0,f.Y)(Cr.A,{size:24,color:ez.LU.foregroundDimmest}),(0,f.Y)(I.EY,{color:"dimmer",children:"You need to add an SSH key to your account before connecting"}),(0,f.Y)(eg.$n,{text:"Manage SSH keys",colorway:"primary",size:"small",onClick:function(){g(1)}})]}):(0,f.Y)(Cs,{sshHostname:C,sshPort:k,sshUser:x})]}),(0,f.Y)(A6.p,{})]})}),(0,f.Y)(H.Kp,{children:(0,f.FD)(F.S,{css:Cu.tabContainer,children:[(0,f.FD)(F.S,{row:!0,justify:"space-between",children:[(0,f.Y)(I.Y9,{variant:"subheadDefault",level:2,children:"Manage SSH Keys"}),(0,f.Y)(rc.m_,{tooltip:"You are over the SSH key limit. Please remove some of your keys to add more.",isDisabled:!D,children:(0,f.Y)(eg.$n,{text:"Add SSH key",colorway:"primary",size:"small",disabled:D,iconLeft:(0,f.Y)(rf.A,{}),onClick:function(){return p(!0)}})})]}),(0,f.Y)(I.EY,{color:"dimmer",children:"Add authorized keys to configure SSH access to this App."}),(0,f.Y)(Cd,{legacyKeys:S,openFile:e.openFile}),(0,f.Y)(Ce.f,{keys:_}),(0,f.Y)(lC.a,{isOpen:d,onRequestClose:function(){return p(!1)},centered:!0,children:(0,f.Y)(A4.P,{onConfirm:function(){return p(!1)}})})]})})]})]})}function Cf(e){var n,t,r,i=(t={variables:{replId:(0,n_.A)()}},r=(0,K._)({},AQ,t),Q.I(AX,r)),o=i.data,a=i.loading,l=i.refetch;if(!o||a)return(0,f.Y)(tV.A,{pane:{type:"ssh"},loading:!0,maxWidth:450});if("ReplRedirect"===o.repl.__typename)throw Error("Got repl redirect for replId query");if("SubscriptionExpiredError"===o.repl.__typename)return(0,f.Y)(F.S,{children:(0,f.Y)(I.EY,{children:"This App is private and your subscription expired. Please reload for further action."})});var s=o.repl.authorizations.connectUsingSsh;return s.isAuthorized?(0,f.Y)(Cp,(0,K._)({},e)):(0,f.Y)(Cc,{sshAuthz:s,org:null!==(n=o.repl.org)&&void 0!==n?n:void 0,onPurchaseComplete:function(){l()}})}var Ch=t(12544),Cm=h.ZU.Object({type:h.ZU.Literal("ssh")}),Cg=(0,M.x)({root:[B.wp.height("100%"),B.wp.overflowY("auto"),nq.tK],container:[B.wp.flex.grow(1)],wrapper:[B.wp.flex.grow(1),B.wp.py(8),B.wp.position.relative]}),Cv={Content:function(e){var n=e.options;return(0,f.Y)(F.S,{css:Cg.root,children:(0,f.Y)(F.S,{css:Cg.container,gap:8,children:(0,f.Y)(F.S,{css:Cg.wrapper,children:(0,f.Y)(Cf,{openFile:function(e){return n.performPaneOperation({operation:"open",pane:(0,n0.af)(e),secondary:!0})}})})})})},Icon:function(e){var n=e.size;return(0,f.Y)(n$.Vx.Provider,{value:{color:ez.LU.yellowStrongest,size:n},children:(0,f.Y)(Ch.A,{})})},getTitle:function(){return"SSH"},description:"Configure remote access to connect to this Repl from another machine or IDE",category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(Cm,e)}},Cw=t(43573),Cy=t(82891),Cb=t(12120),CS=(0,M.x)({toolButton:[B.wp.display.inlineBlock],actionContent:[B.wp.width(450),B.wp.maxWidth("100%"),B.wp.colWithGap(16)],diagnosisContent:[B.wp.p(8),B.wp.colWithGap(8)]});function CY(e){var n=e.vncUrl,t=e.onRetry,r=e.openNetworkingTool,i=null!=(0,Ay.ff)(Cy.wF),o=(0,f.Y)(eg.$n,{iconLeft:(0,f.Y)(o3.A,{}),text:"Refresh connection",onClick:t});return i?(0,f.Y)(tV.A,{pane:{type:"vnc"},action:(0,f.FD)(F.S,{css:CS.actionContent,children:[(0,f.Y)(tZ.N,{colorway:"warning",text:(0,f.FD)(f.FK,{children:["There was an error connecting to the server",n?(0,f.FD)(f.FK,{children:[" at ",(0,f.Y)("br",{}),n]}):""]})}),n?(0,f.Y)(_.A,{headerContent:"Diagnosis",children:(0,f.Y)(F.S,{css:CS.diagnosisContent,children:(0,f.Y)(bc.Ay,{children:"If you see a connection error, it's possible that your internet service provider (ISP) has security settings blocking the URL shown above.\n\nPlease contact your ISP and ask them to unblock the URL. Here are the support links for common ISPs:\n\n- [Xfinity](https://www.xfinity.com/support/articles/report-blocked-website)\n- [Spectrum.net](https://www.spectrum.net/support/forms/unblock_site)\n      "})})}):null,o]})}):(0,f.Y)(tV.A,{pane:{type:"vnc"},bodyText:(0,f.FD)(I.EY,{multiline:!0,children:["No VNC server is currently running with compatible ports available to view. Try running your App, and check the"," ",(0,f.Y)(eg.$n,{css:CS.toolButton,text:"Networking tool",iconLeft:(0,f.Y)(Ss.A,{}),size:"small",onClick:r})," ","to ensure ports are being forwarded correctly."]}),action:o})}var CA=function(e){return e.Connecting="Connecting",e.Connected="Connected",e.Disconnected="Disconnected",e.Errored="Errored",e}(CA||{}),CC=(0,M.x)({root:[B.wp.position.relative,B.wp.height("100%"),B.wp.width("100%")],target:[B.wp.height("100%"),B.wp.width("100%")],overlay:[B.wp.coverContainer,B.wp.backgroundColor.backgroundDefault,{"&:empty":[B.wp.display.none]}],audio:[B.wp.position.absolute,B.wp.bottom(0),B.wp.right(0),{padding:"0.2em"}]});function Cx(e){var n,r,i,o,a=e.fs,l=e.secrets,s=e.container,c=e.openNetworkingTool,u=(0,v._)((0,w.useState)(null),2),d=u[0],p=u[1],h=(0,v._)((0,w.useState)(void 0),2),m=h[0],g=h[1],S=(0,v._)((0,w.useState)(!1),2),Y=S[0],A=S[1],C=(0,v._)((0,w.useState)("Connecting"),2),x=C[0],k=C[1],_=(0,v._)((0,w.useState)(null),2),D=_[0],E=_[1],R=(0,v._)((0,w.useState)(!1),2),I=R[0],F=R[1],T=(0,v._)((0,w.useState)(!1),2),P=T[0],L=T[1],U=(0,w.useRef)(0),N=(0,w.useRef)(!1),O=(r=(n=(0,v._)((0,w.useState)(null),2))[0],i=n[1],o=(0,Cb.A)(s),(0,w.useEffect)(function(){if(!r){if(s.getConnectionState()===Cy.KN.CONNECTED){if(!o)return;i((0,b0.jq)(o.replace("http","ws"),Cy.wF).toString());return}return s.onConnectionStateChanged(function(e){e===Cy.KN.CONNECTED&&o&&i((0,b0.jq)(o.replace("http","ws"),Cy.wF).toString())})}},[o,r,s]),{vncUrl:r}).vncUrl;(0,t7.u4)(t7.AZ.VNC_OPENED),(0,w.useEffect)(function(){return N.current=!0,function(){N.current=!1}},[]);var M=(0,v._)((0,w.useState)(null),2),B=M[0],H=M[1],z=(0,w.useRef)(function(){return null});(0,w.useEffect)(function(){z.current()},[B]);var W=(0,t6.A)(function(e){return H(e.width&&e.height?{width:e.width,height:e.height}:null)},{type:"throttle",wait:100}),G=(0,w.useRef)(function(e){});(0,w.useEffect)(function(){G.current(P)},[P]),(0,w.useEffect)(function(){if(!d){var e=!1;return t.e(8635).then(t.bind(t,38635)).then(function(n){!e&&p(n)}),function(){e=!0}}},[d]),(0,w.useEffect)(function(){"Disconnected"===x&&setTimeout(function(){k("Connecting")},Math.random()*(Math.pow(2,U.current)-1)*1e3)},[x]),(0,w.useEffect)(function(){if("Disconnected"===x){var e=setTimeout(function(){k("Connecting")},Math.random()*(Math.pow(2,U.current)-1)*1e3);return function(){clearTimeout(e)}}},[x]);var V=(0,n_.A)();return(0,w.useEffect)(function(){if(O&&D&&d&&"Connecting"===x){U.current++;var e=d.default,n=s.getConnectionMetadata(),t={credentials:{username:null==n?void 0:n.token,password:null!=m?m:""}};(0,t7.u4)(t7.AZ.VNC_CONNECTED);var r=new e(D,O,t);r.scaleViewport=!0,r.resizeSession=!0;var i=function(){U.current=0,k("Connected")},o=function(e){var n=e.detail.capabilities.audio;F(void 0!==window.MediaSource&&!!n)},a=function(e){if(z.current=function(){return null},G.current=function(e){},r.removeEventListener("securityfailure",c),r.removeEventListener("disconnect",a),r.removeEventListener("capabilities",o),r.removeEventListener("connect",i),!e.detail.clean){var n=s.getConnectionMetadata(),t=n?(0,eR.pI)(n.token):null;(0,t7.u4)(t7.AZ.VNC_ERRORED,{vncUrl:O,replId:V,cluster:null==t?void 0:t.cluster}),k("Errored");return}k("Disconnected")},c=function(){var e,n=function(){A(!0)};(e=(0,y._)(function(){var e;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,l.read()];case 1:if(!(e=t.sent().get("VNC_PASSWORD")))return n(),[2];return g(e),[2]}})}),function(){return e.apply(this,arguments)})().catch(function(e){return rV.Cp(e)})};return r.addEventListener("connect",i),r.addEventListener("capabilities",o),r.addEventListener("disconnect",a),r.addEventListener("securityfailure",c),z.current=function(){return r._windowResize()},F(!1),L(!1),G.current=function(n){n?((0,t7.u4)(t7.AZ.VNC_AUDIO_ENABLED),r.enableAudio(2,window.MediaSource.isTypeSupported("audio/webm;codecs=opus")?e.audioCodecs.OpusWebM:e.audioCodecs.MP3,32768)):r.disableAudio()},function(){!N.current&&(z.current=function(){return null},G.current=function(e){},r.removeEventListener("securityfailure",c),r.removeEventListener("disconnect",a),r.removeEventListener("capabilities",o),r.removeEventListener("connect",i),r.disconnect())}}},[d,D,s,O,a,m,x,V,l]),(0,f.FD)("div",{"data-cy":"vnc",css:CC.root,children:[I?(0,f.FD)("label",{css:CC.audio,children:["\uD83C\uDFA7"," ",(0,f.Y)("input",{type:"checkbox",checked:P,onChange:function(e){return L(e.target.checked)}})]}):null,(0,f.Y)("div",{ref:function(e){W(e),E(e)},css:CC.target,"data-cy":"vnc-output-".concat(x.toLowerCase())}),(0,f.FD)("div",{css:CC.overlay,children:["Connecting"===x?(0,f.Y)(tV.A,{pane:{type:"vnc"},loading:!0}):null,"Disconnected"===x?(0,f.Y)(tV.A,{pane:{type:"vnc"},bodyText:"Disconnected"}):null,"Errored"===x?(0,f.Y)(CY,{vncUrl:O,onRetry:function(){return k("Connecting")},openNetworkingTool:c}):null]}),(0,f.Y)(lC.a,{isOpen:Y,onRequestClose:function(){return A(!1)},children:(0,f.Y)(Sw.A,{prompt:"Password",desc:"The output is password protected, please input it",placeholder:"password",type:"text",onCancel:function(){return A(!1)},onConfirm:function(e){g(e),A(!1)}})})]})}var Ck=h.ZU.Object({type:h.ZU.Literal("vnc")}),C_=(0,M.x)({container:[B.wp.flex.growAndShrink(1)]}),CD={Content:function(e){var n=e.options.performPaneOperation,t=(0,A.A)(),r=t.fs,i=t.container,o=t.secrets,a=(0,w.useCallback)(function(){return n({operation:"open",secondary:!0,pane:{type:"networking"}})},[n]);return(0,f.Y)(F.S,{css:C_.container,children:(0,f.Y)(Cx,{fs:r,container:i,secrets:o,openNetworkingTool:a})})},Icon:function(e){var n=e.size;return(0,f.Y)(rM.A,{size:n})},getTitle:function(){return"Output"},description:"View your App's desktop screen output",category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(Ck,e)}},CE=t(95583),CR=t(78932),CI=t(64039),CF=(0,M.x)({unavailable:[B.wp.p(8)]}),CT=h.ZU.Object({type:h.ZU.Literal("workflows")}),CP={Content:function(e){var n=e.options.isActive;return(0,CR.g)()?(0,f.Y)(F.S,{css:CF.unavailable,children:(0,f.Y)(I.EY,{children:"Workflows is not available."})}):(0,f.Y)(CI.A,{isActive:n})},Icon:function(e){var n=e.size;return(0,f.Y)(n$.Vx.Provider,{value:{color:ez.LU.greenStrongest,size:n},children:(0,f.Y)(a1.A,{})})},getTitle:function(){return"Workflows"},description:"Configure different ways to run your App",category:nq.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(CT,e)}};function CL(){return{codeEditor:ta.N,webview:CE.QS,media:vE,binary:ti,pedit:Sx,vnc:CD,adminPanel:nQ,runnerOutput:Af.a,shell:AK,dependencies:rO,envEditor:iK,draw:iG,git:m8,diff:ix,history:vl,database:t0,neon:bX,markdown:v_,csvPreview:tl.J,ssh:Cv,ghostwriterChat:dF,problems:SF,networking:Su,objectStorage:Sh,workflows:CP,project:Ap,devdocs:rH,agentFiles:n6,integrations:vc.u,videoPlayer:Cw.Rd}}},1052:(e,n,t)=>{"use strict";t.d(n,{s:()=>i});var r=t(6680),i="color-mix(in srgb, ".concat(r.LU.interactiveBackground," 60%, ").concat(r.LU.surfaceBackground,")")},1503:(e,n,t)=>{"use strict";t.d(n,{_:()=>s});var r=t(29935),i=t(82643),o=t(8300),a=t(80481),l=t(94146);function s(){var e,n,t,s=(0,a.gc)("showFileTreeGitStatus").preferences.showFileTreeGitStatus,c=(0,l.A)((t=(0,r._)(function(e){var n,t;return(0,i.YH)(this,function(r){switch(r.label){case 0:if(!s)return[2,{status:null,error:null}];return[4,e.getRepositoryState()];case 1:if((n=r.sent()).error)return[2,n];if(n.type!==o.UN.NORMAL)return[2,{status:null,error:null}];return[4,e.status()];case 2:if((t=r.sent()).error)return[2,t];return[2,{status:t,error:null}]}})}),function(e){return t.apply(this,arguments)}),[s]);return c&&!c.error&&(null===(e=c.status)||void 0===e?void 0:e.changes)?function(e){var n=new Map,t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.set(l.path,{index:l.type.index,worktree:l.type.worktree})}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}(null===(n=c.status)||void 0===n?void 0:n.changes):null}},1542:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7.026 3.243c-.245.269-.388.756-.388 1.767v3.083c0 .922-.208 1.894-.948 2.72-.429.48-1.006.876-1.751 1.187.745.312 1.323.708 1.752 1.189.74.828.947 1.803.947 2.729V19c0 1.005.142 1.49.388 1.756.232.254.732.493 1.974.493a.75.75 0 0 1 0 1.5c-1.346 0-2.403-.241-3.08-.978-.663-.723-.782-1.738-.782-2.77v-3.084c0-.7-.153-1.268-.566-1.73-.426-.478-1.22-.946-2.717-1.24a.75.75 0 0 1-.605-.737v-.422a.75.75 0 0 1 .605-.736c1.497-.295 2.291-.764 2.717-1.24.413-.462.566-1.026.566-1.72V5.01c0-1.038.119-2.056.782-2.78.677-.739 1.734-.98 3.08-.98a.75.75 0 0 1 0 1.5c-1.242 0-1.741.24-1.974.493ZM14.25 2a.75.75 0 0 1 .75-.75c1.346 0 2.403.241 3.08.98.663.724.782 1.742.782 2.78v3.083c0 .694.153 1.258.566 1.72.426.476 1.22.945 2.717 1.24a.75.75 0 0 1 .605.736v.422a.75.75 0 0 1-.605.736c-1.497.295-2.291.763-2.717 1.24-.413.463-.566 1.03-.566 1.73v3.084c0 1.033-.12 2.048-.783 2.771-.677.737-1.733.978-3.079.978a.75.75 0 0 1 0-1.5c1.242 0 1.742-.24 1.974-.492.246-.268.388-.752.388-1.757v-3.083c0-.926.208-1.901.947-2.73.43-.48 1.007-.876 1.752-1.188-.745-.311-1.322-.707-1.751-1.187-.74-.826-.948-1.798-.948-2.72V5.01c0-1.011-.142-1.498-.388-1.767-.233-.254-.732-.493-1.974-.493a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}},2197:(e,n,t)=>{"use strict";t.d(n,{tz:()=>Q,SF:()=>S,EF:()=>V});var r=t(83846),i=t(17844),o=t(1889),a=t(21462),l=t(93707),s=t(72e3),c=t(79891),u=t(35992),d=t(44370),p=t(68820),f=t(12694),h=t(69338),m=t(17843),g=(0,a.createContext)(null);function v(){var e=(0,a.useContext)(g);if(!e)throw Error("Expected store in context");return e}function w(e){return(0,h.md)(e,{store:v()})}function y(e){return(0,m.k)(e,v())}var b=function(e){return(0,h.Xr)(e,{store:v()})};function S(e){var n=(0,f._)((0,a.useState)(function(){return(0,d.y$)()}),1)[0];return(0,o.Y)(g.Provider,{value:n,children:e.children})}var Y=(0,t(22498).v)(["display","visibility","transform","maxHeight","width"]),A=Y.cssVars,C=Y.styleTokens,x=t(6680),k=t(2527),_=(0,d.eU)(null),D=(0,d.eU)("default"),E=(0,d.eU)({command:null,offset:{x:0,y:0},visible:!1}),R=(0,p.mg)(E,function(e){return e.offset}),I=(0,p.mg)(E,function(e){return e.command}),F=(0,p.mg)(E,function(e){return e.visible}),T=(0,p.mg)(E,function(e){return e.onKeyDownHandler}),P=(0,p.mg)(_,function(e){var n;return null!==(n=null==e?void 0:e.initial)&&void 0!==n?n:null}),L=(0,d.eU)(function(e){var n=e(R);if(!n)return null;var t=n.y,r=window.innerHeight-t,i=e(P),o=null!==i?i-r:0;return o>0&&(t=Math.max(16,t-Math.min(200,o))),t}),U=(0,d.eU)(function(e){var n=e(R);if(!n)return null;var t=n.x,r=window.innerWidth,i=e(O),o=t+(null!=i?i:M)-r+16;return o>0&&(t=Math.max(16,t-o)),t}),N=(0,d.eU)(function(e){var n=e(U),t=e(L);return null==n||null===t?null:(0,r._)({},A.transform,"translate(".concat(n,"px, ").concat(t,"px)"))}),O=(0,d.eU)(null),M=180,B=(0,d.eU)(function(e){var n=e(O);return(0,r._)({},A.width,(null===n?M:n)+"px")}),H=(0,d.eU)(function(e){var n=e(L);return null===n?null:(0,r._)({},A.maxHeight,"calc(100vh - ".concat(x.LU.space16," - ").concat(n,"px)"))}),z=(0,d.eU)(null,function(e,n){n(_,null),n(O,null),n(W,null),n(E,function(e){return(0,u.jM)(e,function(e){e.visible=!1,e.command=null})})}),W=(0,d.eU)(null),G=(0,d.eU)(null,function(e,n,t){if(n(D,t.background),t.width&&n(O,t.width),t.target){var r=t.target.getBoundingClientRect(),i={x:r.x,y:r.y+r.height+8};n(W,r),n(E,function(e){return(0,u.jM)(e,function(e){e.command=t.command,e.offset=i,e.visible=!0,e.onKeyDownHandler=t.onKeyDownHandler})});return}n(E,function(e){return(0,u.jM)(e,function(e){e.command=t.command,e.offset=t.offset,e.visible=!0,e.onKeyDownHandler=t.onKeyDownHandler})})});function V(){var e=b(G),n=b(z),t=y(F),r=(0,k.X$)({elevated:!0});return{openContextMenu:(0,a.useCallback)(function(n){e(n.target instanceof HTMLElement?{command:n.command,target:n.target,width:n.width,background:r,onKeyDownHandler:n.onKeyDownHandler}:{command:n.command,offset:n.target,target:null,width:n.width,background:r,onKeyDownHandler:n.onKeyDownHandler})},[e,r]),closeContextMenu:n,isVisible:t,onContextMenu:(0,a.useCallback)(function(n,t){var i=t.command,o=t.width,a=t.onKeyDownHandler;n.preventDefault(),e({command:i,offset:{x:n.clientX,y:Math.min(window.innerHeight-64,n.clientY)},target:null,width:o,background:r,onKeyDownHandler:a})},[e,r])}}var j=t(61234),Z=t(43974),q=t(87860),K=t(42074),$=(0,j.x)({surface:[Z.wp.shadow(3),Z.wp.borderRadius(8),Z.wp.position.absolute,{top:0,left:0,border:"1px solid",borderColor:x.LU.outlineDefault,maxWidth:"min(500px, calc(100vw - ".concat(x.LU.space16,"))"),minWidth:"min(100px, calc(100vw - ".concat(x.LU.space16,"))"),maxHeight:C.maxHeight,width:C.width,transform:C.transform,visibility:C.visibility,display:C.display}]});function J(){var e=w(W);return e?(0,o.Y)("div",{style:{position:"fixed",width:e.width,height:e.height,top:e.y,left:e.x}}):null}var Q=(0,a.memo)(function(){var e=b(z),n=w(I),t=w(T),u=y(F),d=(0,a.useRef)(function(){});(0,a.useEffect)(function(){var e=function(e){if(e){var n;null===(n=d.current)||void 0===n||n.call(d);return}};return e(u.current),u.subscribe(e)},[u]);var p=b(_),f=(0,a.useRef)(null);(0,a.useEffect)(function(){var n=function(n){var t;!(n.target instanceof HTMLElement&&(null===(t=f.current)||void 0===t?void 0:t.contains(n.target)))&&e()},t=function(){e()},r=function(e){e?(window.addEventListener("blur",t),document.addEventListener("pointerdown",n)):(window.removeEventListener("blur",t),document.removeEventListener("pointerdown",n))},i=u.subscribe(r);return function(){i(),r(!1)}},[u,e]);var h=y(N);(0,c.d)(f,h),(0,c.d)(f,y(H)),(0,c.d)(f,u,function(e){var n;return n={},(0,r._)(n,A.visibility,e?"visible":"hidden"),(0,r._)(n,A.display,e?"flex":"none"),n});var m=y(B);(0,c.d)(f,m);var g=(0,s.A)(),v=w(F)&&!g,S=w(D),Y=(0,i._)({},h.current,m.current);return n?(0,o.FD)(q.Z,{children:[(0,o.Y)(J,{}),(0,o.Y)(l.n1,{autoFocus:v,restoreFocus:!0,contain:!0,children:(0,o.Y)(k.ui,{onKeyDown:function(n){"Escape"===n.key&&e()},innerRef:f,css:$.surface,style:Y,background:S,children:(0,o.Y)(K.r,{iconBreadcrumbs:!0,command:n,onAction:e,onSelect:e,onTotalHeightChange:p,onKeyDown:t,focusRef:d,compact:!0})})})]}):null})},2385:(e,n,t)=>{"use strict";t.d(n,{P:()=>r,k:()=>i});var r=function(e){return e.Intro="intro",e.Deployment="deployment",e.DeploymentInProgress="deployment_in_progress",e.Analytics="analytics",e.Logs="logs",e.Settings="settings",e.Schedule="schedule",e.ResourceMonitoring="resource_monitoring",e.ReservedVMTierSelection="reserved_vm_tier_selection",e.AutoscaleMachineConfiguration="autoscale_machine_configuration",e}({}),i=function(e){return e.SendDeploymentLifecycleCommand="send_deployment_lifecycle_command",e.ChangeView="change_view",e.OpenPane="open_pane",e}({})},2545:(e,n,t)=>{"use strict";t.d(n,{u:()=>p});var r=t(1889),i=t(45981),o=t.n(i),a=t(61234),l=t(47258),s=t(43974),c=t(3910),u=t(65558),d=(0,a.x)({self:[{marginLeft:"auto",marginRight:"auto",flex:"0 1 auto"}],link:[s.wp.color.foregroundDefault,l.b.underlinedOnHover]});function p(){return(0,r.Y)(c.N,{css:d.self,icon:(0,r.Y)(u.A,{}),text:(0,r.Y)(o(),{css:d.link,target:"_blank",href:"https://docs.replit.com/billing/deployment-repricing",children:"We've updated deployment pricing—see what's new."})})}},3402:(e,n,t)=>{"use strict";t.d(n,{sx:()=>p});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  fragment AiChatMessageUser on User {\n    id\n    username\n    fullName\n    image\n    url\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  query AiChatMessageUserData($id: Int!) {\n    user(id: $id) {\n      ...AiChatMessageUser\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(l()),d=(0,o.J1)(s(),u);function p(e){var n=(0,r._)({},c,e);return a.I(d,n)}},3528:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{d:"M22.334 3.589 17.805 20.41h-1.482L20.853 3.59h1.482ZM12.285 12.15l.11-3.018-2.553 1.62-.658-1.153 2.69-1.4-2.69-1.4.658-1.152 2.553 1.619-.11-3.019h1.317l-.11 3.019 2.553-1.62.658 1.154-2.69 1.4 2.69 1.399-.658 1.152-2.553-1.619.11 3.019h-1.317ZM7.676 3.589 3.148 20.41H1.666L6.194 3.59h1.482Z"})}))}},4092:(e,n,t)=>{"use strict";t.d(n,{A:()=>ew,x:()=>ev});var r=t(29935),i=t(12694),o=t(82643),a=t(1889),l=t(21462),s=t(17844),c=t(12584),u=t(41114),d=t(86997);function p(){var e=(0,c._)(["\n  query ReplAuth($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        config {\n          isServer\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,u.J1)(p()),m=t(88184),g=t(67668),v=t(11741),w=t(25868),y=t(75641),b=t(16907),S=t(63892),Y=t(67337),A=t(96866),C=t(33078),x="Import HTML package",k=[{title:"Get user info",content:[{type:"code",value:'<script type="module">const user = await getUserInfo() <\/script>'}]}],_=[{title:x,content:[{type:"code",value:'<script src="https://replit.com/public/js/repl-auth-v2.js"><\/script>'}]}],D=[{title:"Insert custom button",content:[{type:"code",value:'<button onclick="LoginWithReplit()"> Login </button>'}]}],E=t(86105),R=t(52097),I=t(82871),F=t(2904),T="Import Node package",P=[{title:"Get user info",content:[{type:"code",value:"const user = getUserInfo("},{type:"input",placeholder:"req"},{type:"code",value:")"}]}],L=[{title:T,content:[{type:"code",value:'const { getUserInfo } = require("@replit/repl-auth")'}]}],U=t(41502),N=t(49937),O=t(61234),M=t(43974),B=t(93682),H=t(26705),z=t(31618),W=t(2527),G=t(40043),V=t(35869),j=t(44144),Z=t(85280),q=t(20627),K=(0,O.x)({templateContainer:[M.wp.backgroundColor.backgroundRoot,M.wp.borderRadius(4),M.wp.p(4),M.wp.align.center],input:[M.wp.minWidth(64),M.wp.flex.growAndShrink(1)],codeExampleContainer:[M.wp.borderRadius(4),M.wp.flex.shrink(1)],codeExampleText:[M.wp.font.code,M.wp.color.foregroundDimmer,M.wp.py(4),M.wp.flex.growAndShrink(1)]}),$=function(e){var n=e.title,t=e.content,r=(0,i._)((0,l.useState)(t),2),o=r[0],s=r[1];return(0,a.FD)(V.S,{gap:4,children:[(0,a.FD)(V.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(G.EY,{variant:"subheadDefault",children:n}),"Get user info"===n?(0,a.Y)(H.K0,{disabled:!0,tooltipPlacement:"top",alt:"User object contains 'id', 'name', 'roles', and 'teams'",children:(0,a.Y)(q.A,{})}):null]}),(0,a.FD)(V.S,{gap:4,children:[(0,a.Y)(V.S,{css:K.templateContainer,row:!0,gap:4,justify:"center",children:t.map(function(e,t){var r=e.type;switch(r){case"input":return(0,a.Y)(z.pd,{onChange:function(e){var n=(0,E._)(o);n[t].value=e.target.value,s(n)},placeholder:e.placeholder,value:e.value||"",css:K.input},"".concat(n,"-").concat(t));case"code":return(0,a.Y)(V.S,{css:K.codeExampleContainer,children:(0,a.Y)(G.EY,{multiline:!1,css:K.codeExampleText,children:e.value})},"".concat(n,"-").concat(t));default:(0,R.A)(r)}})}),(0,a.Y)(J,{code:o.reduce(function(e,n){return"input"===n.type?e+(n.value||n.placeholder):e+n.value},""),packageImport:n===T||n===x})]})]})},J=function(e){var n=e.code,t=e.packageImport,r=(0,N.rM)(),i=(0,U.A)(r),o=(0,Y.A)().fs,l=(0,N.vO)();return i?(0,a.Y)(W.ui,{children:(0,a.Y)(B.$n,{size:"small",variant:"outlined",onClick:function(){var e,a;if(t&&r&&o){if("html"!==(0,g.an)(r)){i({code:n,insertAt:0});return}o.readFile(r).then(function(e){if(e.error)throw e.error;var t=I.A.from(e.content).toString(),r=t.indexOf("</head>")-1;-1===r&&(r=t.indexOf("<script")),-1===r&&(r=t.indexOf("</body>")),-1===r&&(r=t.length),i({code:n,insertAt:r})});return}i({code:n,insertAt:null!==(a=null===(e=l())||void 0===e?void 0:e.position.offset)&&void 0!==a?a:0})},text:t?"Auto add":"Insert",iconRight:(0,a.Y)(j.A,{}),css:{width:"fit-content"}})}):(0,a.Y)(W.ui,{children:(0,a.Y)(B.$n,{size:"small",variant:"outlined",onClick:function(){return(0,F.default)(n)},text:"Copy",iconLeft:(0,a.Y)(Z.A,{}),css:{width:"fit-content"}})})},Q=function(e){var n=e.examples;return(0,a.Y)(V.S,{gap:16,children:n.map(function(e,n){return(0,a.Y)($,{title:e.title,content:e.content},n)})})};let X=function(e){var n=e.langKey;return(0,a.FD)(V.S,{gap:8,children:[" ","html"!==n&&(0,a.Y)(Q,{examples:_}),(0,a.Y)(Q,{examples:D})]})};var ee=[{title:"Fetch from client",content:[{type:"code",value:"CURL /__replauthuser"}]},{title:"Or access server request headers",content:[{type:"code",value:"X-Replit-User-Id"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Name"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Teams"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Roles"}]}],en=t(45771),et=(0,en.AH)([M.wp.colWithGap(16)]);let er=function(){return(0,a.Y)(V.S,{css:et,children:ee.map(function(e,n){return(0,a.Y)($,{title:e.title,content:e.content},n)})})};var ei=(0,en.AH)([M.wp.colWithGap(8)]);let eo=function(e){var n=e.langKey,t=(0,a.Y)(er,{});switch(n){case"html":t=(0,a.Y)(Q,{examples:k});break;case"nodejs":t=(0,a.Y)(Q,{examples:P})}return(0,a.Y)(V.S,{css:ei,children:t})},ea=function(e){var n=e.langKey,t=null;switch(n){case"html":t=_;break;case"nodejs":t=L}return t?(0,a.Y)(V.S,{gap:8,children:(0,a.Y)(Q,{examples:t})}):null};var el=t(51895),es=t(6680),ec=t(4930),eu=t(74863),ed=t(3910),ep=t(28080),ef=t(15647),eh=t(36433),em=t(32633),eg=(0,O.x)({link:[M.wp.color.accentPrimaryStronger,M.wp.cursor.pointer],errorContainer:[M.wp.textAlign.center,M.wp.colWithGap(4)],usageSectionTitleText:[{color:es.LU.foregroundDimmest,textTransform:"uppercase",fontWeight:es.LU.fontWeightMedium}],divider:[M.wp.backgroundColor.outlineDimmer]}),ev=function(){var e=(0,Y.A)(),n=e.dotReplit,t=e.fs,a=(0,i._)((0,l.useState)(),2),s=a[0],c=a[1],u=(0,i._)((0,l.useState)(!1),2),d=u[0],p=u[1],f=(0,i._)((0,l.useState)(!1),2),h=f[0],m=f[1],g=(0,i._)((0,l.useState)(!0),2),w=g[0],b=g[1],S=(0,i._)((0,l.useState)(!0),2),A=S[0],C=S[1],x=(0,l.useCallback)((0,r._)(function(){var e,t,r,i,a;return(0,o.YH)(this,function(o){switch(o.label){case 0:c(void 0),b(!0),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,n.getConfig({bypassCache:!0})];case 2:switch((a=o.sent()).error){case y.DO.ParseError:throw Error("An error occurred parsing the .replit file, please ensure the syntax is valid");case y.DO.Disconnected:throw Error("Disconnected, cannot read .replit file.");case y.DO.NotFound:return C(!1),[2]}return p(!!(null==a?void 0:null===(t=a.config)||void 0===t?void 0:null===(e=t.auth)||void 0===e?void 0:e.buttonEnabled)),m(!!(null==a?void 0:null===(i=a.config)||void 0===i?void 0:null===(r=i.auth)||void 0===r?void 0:r.pageEnabled)),[3,5];case 3:return c(o.sent().message),[3,5];case 4:return b(!1),[7];case 5:return[2]}})}),[n,c,b,C,p,m]);return(0,l.useEffect)(function(){var e;(e=(0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:if(!t)return[2];return[4,x()];case 1:return e.sent(),[2]}})}),function(){return e.apply(this,arguments)})()},[t,x]),(0,l.useEffect)(function(){if(t){var e=t.watchTextFile(v.v,{onChange:(0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return[4,x()];case 1:return e.sent(),[2]}})})});return function(){e(),m(!1),p(!1),b(!1)}}},[t,m,x]),{error:s,isDotReplitAuthButtonEnabled:d,isDotReplitAuthPageEnabled:h,isDotReplitAuthLoading:w,hasDotReplit:A,setError:c,setIsDotReplitAuthLoading:b,isDotReplitAuthEnabled:d||h}};function ew(){var e,n,t,c,u,p=(0,b.A)(),v=(0,Y.A)().dotReplit,y=(0,N.rM)(),x=y?(0,g.an)(y):null,k=(0,A.J)().configs,_=(0,i._)((0,l.useState)(""),2),D=_[0],E=_[1],R=(e=(0,s._)({},f,{variables:{replID:p}}),d.I(h,e)),I=R.data,F=R.error,T=R.loading,P=(null==I?void 0:I.repl.__typename)==="Repl"&&(null==I?void 0:null===(t=I.repl)||void 0===t?void 0:null===(n=t.config)||void 0===n?void 0:n.isServer),L=null!==(u=null==I?void 0:null===(c=I.currentUser)||void 0===c?void 0:c.isLoggedIn)&&void 0!==u&&u,U=ev(),O=U.error,H=U.isDotReplitAuthButtonEnabled,z=U.isDotReplitAuthPageEnabled,W=U.isDotReplitAuthLoading,j=U.hasDotReplit,Z=U.setError,q=U.setIsDotReplitAuthLoading,K=U.isDotReplitAuthEnabled;(0,l.useEffect)(function(){if(k.find(function(e){return"react"===e.language})||"jsx"===x||"tsx"===x){E("react");return}k.length>0&&E(k[0].language)},[x,D,E,k]);var $=(0,l.useCallback)((0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return q(!0),(0,S.u4)(S.AZ.AUTH_SIDEBAR_USED,{action:"Login Page Enabled"}),[4,v.updateDotReplit([(0,w.qG)(!0),(0,w.D8)(!1)])];case 1:return e.sent().error&&(Z("Couldn't enable login page, please try again"),q(!1)),[2]}})}),[q,v,Z]),J=(0,l.useCallback)((0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return q(!0),(0,S.u4)(S.AZ.AUTH_SIDEBAR_USED,{action:"Login Button Enabled"}),[4,v.updateDotReplit([(0,w.qG)(!1),(0,w.D8)(!0)])];case 1:return e.sent().error&&(Z("Couldn't enable login button, please try again"),q(!1)),[2]}})}),[q,v,Z]),Q=(0,l.useCallback)((0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return q(!0),(0,S.u4)(S.AZ.AUTH_SIDEBAR_USED,{action:"Repl auth disabled"}),[4,v.updateDotReplit([(0,w.qG)(!1),(0,w.D8)(!1)])];case 1:return e.sent().error&&(Z("Couldn't disable Log in with Replit, please try again"),q(!1)),[2]}})}),[q,v,Z]),ee=(0,l.useMemo)(function(){return L?j?F?(0,a.Y)(V.S,{css:eg.errorContainer,children:(0,a.Y)(ed.N,{colorway:"warning",text:"An error ocurred retrieving auth for this App. Please try again later."})}):"html"===D||P?void 0:(0,a.Y)(V.S,{css:eg.errorContainer,children:(0,a.Y)(ed.N,{colorway:"warning",text:"Run your web app to use Log in with Replit"})}):(0,a.FD)(V.S,{css:eg.errorContainer,children:[(0,a.Y)(ed.N,{colorway:"warning",text:"Please create a .replit file to use Log in with Replit"}),(0,a.Y)(G.EY,{children:(0,a.Y)("a",{href:"https://docs.replit.com/replit-workspace/configuring-repl",target:"_blank",rel:"noopener",children:"Learn more about the .replit file"})})]}):(0,a.Y)(V.S,{css:eg.errorContainer,children:(0,a.Y)(ey,{})})},[F,j,L,P,D]),en="html"===D||"nodejs"===D,et=(0,a.Y)(G.EY,{color:"dimmer",children:"You can use Log in with Replit with all web Apps. We have language clients for Nodejs and HTML - switch to an App that uses that language to see how to use it."}),er=(0,a.FD)(V.S,{gap:24,children:[(0,a.FD)(V.S,{gap:8,children:[z?(0,a.FD)(G.EY,{color:"dimmer",children:["Your App will automatically direct users to a prebuilt login page. Start by importing the package below"," ",(0,a.FD)("span",{onClick:J,css:eg.link,onKeyDown:J,role:"button",tabIndex:0,children:[" ","or use your own custom button."]}),(0,a.Y)("br",{}),"Repl Auth is not intended for API authentication."]}):(0,a.FD)(G.EY,{color:"dimmer",children:["Your users can log in to your App using a custom button. Start by importing the package below"," ",(0,a.FD)("span",{onClick:$,css:eg.link,onKeyDown:$,role:"button",tabIndex:0,children:[" ","or use a prebuilt login page."]})]}),en?void 0:et]}),(0,a.FD)(V.S,{children:["nodejs"===D&&H?null:(0,a.Y)(ea,{langKey:D}),H?(0,a.Y)(X,{langKey:D}):null]}),(0,a.FD)(V.S,{gap:8,children:[(0,a.FD)(V.S,{gap:2,children:[(0,a.Y)(G.EY,{multiline:!1,variant:"small",css:eg.usageSectionTitleText,children:"Usage"}),(0,a.Y)(eu.a,{css:eg.divider})]}),(0,a.Y)(V.S,{children:(0,a.FD)(V.S,{gap:12,children:[" ","nodejs"===D&&H?(0,a.Y)(ea,{langKey:D}):null,(0,a.Y)(eo,{langKey:D})]})})]}),(0,a.Y)(B.$n,{onClick:Q,text:"Disable Auth",colorway:"negative",variant:"outlined",loading:W||T})]}),ei=(0,el.Vv)().getDescription({type:"replAuth"}),es=(0,a.FD)(V.S,{gap:8,children:[(0,a.Y)(G.EY,{css:M.wp.textAlign.center,children:ei}),(0,a.Y)(B.$n,{colorway:"primary",onClick:$,text:"Enable Login Page",loading:W||T,disabled:!!O,iconLeft:(0,a.Y)(eh.A,{})}),(0,a.FD)(G.EY,{color:"dimmer",css:M.wp.textAlign.center,children:["Alternatively,"," ",(0,a.Y)("span",{onClick:J,css:eg.link,onKeyDown:J,role:"button",tabIndex:0,children:"use a custom login button"}),".",(0,a.Y)("br",{}),"Repl Auth is not intended for API authentication."]})]}),ef=(0,a.Y)(ec.v,{href:m.ik.REPL_AUTH,variant:"nofill",target:"_blank",rel:"noopener",iconLeft:(0,a.Y)(ep.A,{}),text:"Learn more"});return(0,a.Y)(C.A,{pane:{type:"replAuth"},maxWidth:K?600:450,headerText:"Login with Replit",body:(0,a.FD)(a.FK,{children:[O?(0,a.Y)(ed.N,{text:O,colorway:K?void 0:"warning",icon:(0,a.Y)(em.A,{})}):null,null!=ee?ee:K?er:es]}),action:ee?void 0:ef})}var ey=function(){return(0,a.FD)(V.S,{gap:16,children:[(0,a.FD)(G.EY,{children:[(0,a.Y)("a",{href:m.ik.REPL_AUTH,target:"_blank",rel:"noopener",css:eg.link,children:"Replit Authentication"})," ","is the fastest and easiest way to set up authentication in your App. Try it out by logging in or signing up."]}),(0,a.Y)(ec.v,{href:"/auth",as:"/signup",colorway:"primary",text:"Sign up",iconLeft:(0,a.Y)(ef.A,{})})]})}},4325:(e,n,t)=>{"use strict";t.d(n,{V:()=>et,W:()=>ee});var r=t(1889),i=t(21462),o=t(72004),a=t(26496),l=t(77581),s=t(317),c=t(46762),u=t(80865),d=t(29935),p=t(12694),f=t(82643),h=t(71672),m=t(17844),g=t(12584),v=t(41114),w=t(50175);function y(){var e=(0,g._)(["\n  mutation CreateAgentRollbackPreview(\n    $input: CreateAgentRollbackPreviewInput!\n  ) {\n    createAgentRollbackPreview(input: $input) {\n      ... on CreateAgentRollbackPreviewResult {\n        preview {\n          id\n          url\n          expiresAt\n        }\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return y=function(){return e},e}var b={},S=(0,v.J1)(y()),Y=t(29824),A=t(96354),C=t(18960),x=t(81239),k=t(16907),_=t(94146),D=t(16902),E=t(93682),R=t(56185),I=t(58127);function F(e){var n,t,o,a=e.commitId,l=(0,k.A)(),s=(0,Y.g$)(),c=(0,h.m)(),u=(0,D.q)(),g=u.neonDatabases,v=u.loading,y=g[0]?g[0].projectId:null,F=(0,x.A)().showError,T=function(e,n){(0,C.Q)({context:"PreviewAgentCheckpointButton",error:null!=n?n:Error(e),extras:{replId:l}}),F(e)},P=(0,p._)((n=(0,m._)({},b,{onError:function(e){return T("Something went wrong.",e)},onCompleted:function(e){if("CreateAgentRollbackPreviewResult"!==e.createAgentRollbackPreview.__typename){T(e.createAgentRollbackPreview.message);return}var n=e.createAgentRollbackPreview.preview;window.open(n.url,"_blank")}}),w.n(S,n)),2),L=P[0],U=P[1].loading,N=v||U,O=(t=(0,d._)(function(e){return(0,f.YH)(this,function(n){switch(n.label){case 0:if(N)return[2];return[4,(0,A.n9)({secrets:s,replId:l,apolloClient:c})];case 1:return[4,L({variables:{input:{replId:l,neonProjectId:y,timestamp:e,envVars:n.sent()}}})];case 2:return n.sent(),[2]}})}),function(e){return t.apply(this,arguments)}),M=(0,_.A)((o=(0,d._)(function(e){var n;return(0,f.YH)(this,function(t){switch(t.label){case 0:return[4,e.getCommit({commit:a})];case 1:if((n=t.sent()).error)return[2,n];return[2,{timestamp:n.committer.date,error:null}]}})}),function(e){return o.apply(this,arguments)}),[a]),B=(0,i.useMemo)(function(){if(M&&!M.error){var e=new Date(M.timestamp);return e.setSeconds(e.getSeconds()+30),e.toISOString()}},[M]);return B?(0,r.Y)(E.$n,{size:"small",onClick:function(){return O(B)},iconLeft:N?(0,r.Y)(R.A,{}):(0,r.Y)(I.A,{}),disabled:N,variant:"outlined",text:"Preview",stretch:!0}):null}var T=t(84031),P=t(28456),L=t(32788),U=t(73978),N=t(6680),O=t(61234),M=t(43974),B=t(3910),H=t(2527),z=t(40043),W=t(88654),G=t(37407),V=t(35869),j=t(74967),Z=t(38828),q=t(5968),K=t(81207),$=t(30094),J=t(32633),Q=(0,O.x)({root:[M.wp.mx(32),M.wp.mb(16),M.wp.borderRadius(),M.wp.p(8)],commitIcon:{alignSelf:"start",position:"relative",top:2},screenshotContainer:[M.wp.width(64),M.wp.height(64),M.wp.position.relative,M.wp.center],screenshot:[M.wp.borderRadius(4)],flexGrowAndShrink:[M.wp.flex.growAndShrink(1)]});function X(e){if(!e)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var t=n.agentTimelineEventContents.toolData;return(null==t?void 0:t.$kind)!=="commitData"?null:{description:t.commitData.description,screenshotUrl:t.commitData.screenshotUrl,sessionId:e.sessionId,created:e.created,commitId:t.commitData.commitId,isPaid:t.commitData.billingRate===o.pSr.NORMAL}}var ee=(0,i.memo)(function(e){var n,t=e.eventId,i=e.onOpenCommit,l=e.usageIndicatorVariant,s=(0,a.Al)(t,X),c=(0,a.Au)({initialSessionId:null==s?void 0:s.sessionId}).sendMessage,u=(0,L.P)(null!==(n=null==s?void 0:s.sessionId)&&void 0!==n?n:null),d=(0,a.nY)(t).isReverting;return s?(0,r.Y)(et,{eventId:t,description:s.description,commitId:s.commitId,onOpenCommit:i,date:s.created,isReverting:d,isPaid:s.isPaid,isReadOnly:u,usageIndicatorVariant:l,onRevert:function(){if(u)throw Error("Cannot revert in readonly session");c({kind:"revert",model:o.e3q.MODEL_TYPE_UNKNOWN,commitHash:s.commitId,commitMessage:"Reverting to task: '".concat(s.description,"'"),eventIdBeforeRevert:t}),(0,U.pI)({action:"revert_started",messageText:"Reverting to task: '".concat(s.description,"'"),sessionId:s.sessionId})}}):null});function en(e,n){return e?n===T.G.Starter?"This used 1 of your ".concat(s.Lm," plan Agent checkpoints."):"This checkpoint cost ".concat(c.ri,"\xa2."):n===T.G.Starter?"This didn't use any of your ".concat(s.Lm," plan Agent checkpoints. No significant changes were made."):"This checkpoint didn't cost you anything. No significant changes were made."}function et(e){var n=e.description,t=e.date,i=e.screenshot,o=e.commitId,a=e.onRevert,s=e.onOpenCommit,c=e.isReverting,d=e.isPaid,p=e.eventId,f=e.isReadOnly,h=e.usageIndicatorVariant,m=o.slice(0,8),g=en(d,h),v=(0,u._P)({controlName:l.eC}),w=(0,P.M)();return""===o?(0,r.Y)(er,{date:t,isPaid:d,eventId:p,usageIndicatorVariant:h}):(0,r.FD)(H.ui,{style:w?{borderRadius:8,marginLeft:0,marginRight:0,marginTop:16,paddingLeft:12,paddingRight:12,marginBottom:8}:void 0,elevated:!0,css:Q.root,"data-event-id":p,row:!0,gap:6,children:[(0,r.Y)(q.A,{css:Q.commitIcon,color:N.LU.foregroundDimmest}),(0,r.FD)(V.S,{gap:6,css:Q.flexGrowAndShrink,children:[(0,r.FD)(V.S,{gap:4,row:!0,css:Q.flexGrowAndShrink,children:[(0,r.FD)(V.S,{gap:4,row:!0,align:"center",css:Q.flexGrowAndShrink,children:[(0,r.Y)(z.EY,{multiline:!1,variant:"small",color:"dimmer",style:{flexShrink:"1"},children:"Checkpoint made"}),(0,r.Y)(W.Dc,{textVariant:"small",textColor:"dimmest",live:!0,date:t}),(0,r.Y)(z.EY,{variant:"small",multiline:!1,color:"dimmer",children:"•"}),(0,r.Y)(E.$n,{variant:"underlinedOnHover",text:m,size:"small",onClick:function(){return s(o)}})]}),(0,r.Y)(G.m_,{tooltip:g,placement:"top",children:d?(0,r.Y)($.A,{}):(0,r.Y)(z.EY,{style:{color:N.LU.accentPositiveStronger},children:"Free"})})]}),n?(0,r.FD)(V.S,{row:!0,gap:8,children:[i?(0,r.Y)(V.S,{css:Q.screenshotContainer,children:(0,r.Y)(j.A,{css:Q.screenshot,layout:"fill",src:i,alt:"Screenshot",objectFit:"cover"})}):null,(0,r.Y)(V.S,{style:{flex:"1 1 auto"},children:(0,r.Y)(z.EY,{style:{flex:"1 1 auto"},maxLines:5,children:n})})]}):null,(0,r.FD)(V.S,{row:!0,gap:4,children:[v?(0,r.Y)(F,{commitId:o}):null,(0,r.Y)(E.$n,{size:"small",css:Q.flexGrowAndShrink,onClick:a,iconLeft:c?(0,r.Y)(R.A,{}):f?(0,r.Y)(Z.A,{}):(0,r.Y)(K.A,{}),disabled:c||f,variant:"outlined",text:f?"Session has ended - cannot rollback":"Rollback to here",stretch:!0})]})]})]})}function er(e){var n=e.date,t=e.isPaid,i=e.eventId,o=en(t,e.usageIndicatorVariant);return(0,r.FD)(H.ui,{elevated:!0,css:Q.root,"data-event-id":i,row:!0,gap:6,children:[(0,r.Y)(q.A,{color:N.LU.foregroundDimmest}),(0,r.FD)(V.S,{gap:6,style:{flex:"1 1 auto"},children:[(0,r.FD)(V.S,{gap:4,row:!0,style:{flex:"1 1 auto"},children:[(0,r.FD)(V.S,{gap:4,row:!0,style:{flex:"1 1 auto",alignItems:"center"},children:[(0,r.Y)(z.EY,{multiline:!1,variant:"small",color:"dimmer",style:{flexShrink:"1"},children:"Checkpoint reached"}),(0,r.Y)(W.Dc,{textVariant:"small",textColor:"dimmest",live:!0,date:n}),(0,r.Y)(z.EY,{variant:"small",multiline:!1,color:"dimmer",children:"•"}),(0,r.Y)(z.EY,{variant:"small",color:"dimmest",children:"no commit"})]}),(0,r.Y)(G.m_,{tooltip:o,placement:"top",children:t?(0,r.Y)($.A,{}):(0,r.Y)(z.EY,{style:{color:N.LU.accentPositiveStronger},children:"Free"})})]}),(0,r.Y)(B.N,{colorway:"warning",text:(0,r.FD)(V.S,{gap:8,children:[(0,r.FD)(V.S,{gap:8,row:!0,align:"center",children:[(0,r.Y)(J.A,{size:16}),(0,r.Y)(z.EY,{variant:"small",children:"Rollback is disabled for this checkpoint"})]}),(0,r.Y)(z.EY,{variant:"small",children:"An unexpected error occurred while creating a commit for this checkpoint. This prevents you from rolling back to this point. This is most likely an issue with Replit."})]})}),(0,r.Y)(E.$n,{size:"small",disabled:!0,variant:"outlined",iconLeft:(0,r.Y)(Z.A,{}),text:"Rollback to here",stretch:!0})]})]})}},4479:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(21462),i=t(96116),o=t.n(i);function a(e){return(0,r.useMemo)(function(){if(!e||e.length>40)return"Unknown License";var n=o()(e,{upgrade:!1});return n||"Unknown License"},[e])}},4505:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M18 2.5H6A1.5 1.5 0 0 0 4.5 4v16A1.5 1.5 0 0 0 6 21.5h12a1.5 1.5 0 0 0 1.5-1.5V4A1.5 1.5 0 0 0 18 2.5ZM6 1a3 3 0 0 0-3 3v16a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V4a3 3 0 0 0-3-3H6Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M16 17.25c0 .414-.316.75-.706.75H8.706c-.39 0-.706-.336-.706-.75s.316-.75.706-.75h6.588c.39 0 .706.336.706.75ZM16 9.5c0 .414-.316.75-.706.75H8.706c-.39 0-.706-.336-.706-.75s.316-.75.706-.75h6.588c.39 0 .706.336.706.75Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M12 13.5c-.414 0-.75-.316-.75-.706V6.206c0-.39.336-.706.75-.706s.75.316.75.706v6.588c0 .39-.336.706-.75.706Z",clipRule:"evenodd"})]}))}},4630:(e,n,t)=>{"use strict";t.d(n,{U:()=>d});var r=t(29935),i=t(82643),o=t(82871),a=t(67668),l=t(39416),s=t(44441),c=RegExp("_(?<num>\\d+)$");function u(){return(u=(0,r._)(function(e,n){var t,r,o,l;return(0,i.YH)(this,function(i){switch(i.label){case 0:return t=(0,a._6)(n),[4,e.readDir(t||s.Dl)];case 1:if((r=i.sent()).error)return[2,n];return l=(o=function(e){if(r.children.find(function(n){return"FILE"===n.type&&n.filename===e})){var n,t=(0,a.J)(e),i=(0,a.an)(e),l=t.match(c);if(null==l?void 0:null===(n=l.groups)||void 0===n?void 0:n.num){var s=Number(l.groups.num);return o("".concat(t.replace(c,""),"_").concat(s+1,".").concat(i))}return o("".concat(t,"_2.").concat(i))}return e})((0,a.WP)(n)),[2,t?t+"/"+l:l]}})})).apply(this,arguments)}var d=function(){var e=(0,r._)(function(e,n,t){var r,s,c,d,p,f;return(0,i.YH)(this,function(i){switch(i.label){case 0:return r=encodeURI(e.name),[4,function(e,n){return u.apply(this,arguments)}(n,(s=(0,a._6)(t))?s+"/"+r:r)];case 1:return c=i.sent(),[4,(0,l.g6)(e)];case 2:return d=i.sent(),[4,n.writeFile(c,o.A.from(d))];case 3:return i.sent(),p=(0,a.J)(e.name),f=(0,a.WP)(c),[2,"![".concat(p,"](").concat(f,")")]}})});return function(n,t,r){return e.apply(this,arguments)}}()},4761:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(14854);function l(e){return(0,o.FD)(a.A,(0,i._)((0,r._)({},e),{children:[(0,o.FD)("g",{clipPath:"url(#clip0_7378_478)",children:[(0,o.Y)("path",{fill:"#E01E5A",d:"M5.14 15.118a2.492 2.492 0 0 1-2.494 2.495A2.492 2.492 0 0 1 .15 15.118a2.492 2.492 0 0 1 2.495-2.494H5.14v2.494Zm1.247 0a2.492 2.492 0 0 1 2.495-2.494 2.492 2.492 0 0 1 2.494 2.494v6.236a2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495v-6.236Z"}),(0,o.Y)("path",{fill:"#36C5F0",d:"M8.882 5.102a2.492 2.492 0 0 1-2.495-2.494A2.492 2.492 0 0 1 8.882.113a2.492 2.492 0 0 1 2.494 2.495v2.494H8.882Zm0 1.267a2.492 2.492 0 0 1 2.494 2.494 2.492 2.492 0 0 1-2.494 2.495H2.627A2.492 2.492 0 0 1 .132 8.863a2.492 2.492 0 0 1 2.495-2.494h6.255Z"}),(0,o.Y)("path",{fill:"#2EB67D",d:"M18.879 8.863a2.492 2.492 0 0 1 2.494-2.494 2.492 2.492 0 0 1 2.495 2.494 2.492 2.492 0 0 1-2.495 2.495H18.88V8.863Zm-1.248 0a2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495V2.608A2.492 2.492 0 0 1 15.138.113a2.492 2.492 0 0 1 2.494 2.495v6.255Z"}),(0,o.Y)("path",{fill:"#ECB22E",d:"M15.137 18.86a2.492 2.492 0 0 1 2.494 2.494 2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495V18.86h2.495Zm0-1.247a2.492 2.492 0 0 1-2.495-2.495 2.492 2.492 0 0 1 2.495-2.494h6.255a2.492 2.492 0 0 1 2.495 2.494 2.492 2.492 0 0 1-2.495 2.495h-6.255Z"})]}),(0,o.Y)("defs",{children:(0,o.Y)("clipPath",{id:"clip0_7378_478",children:(0,o.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))}},4792:(e,n,t)=>{"use strict";t.d(n,{Z:()=>r});var r=[{value:"FULLSTACK_JS",title:"Web application",description:"Javascript web app with React, Express, Tailwind"},{value:"STREAMLIT",title:"Data Dashboard",description:"Python with Streamlit"},{value:"BEST_EFFORT_FALLBACK",title:"Scripts & automation",description:"Any other app"},{value:"FLASK_VANILLA_JS",title:"Flask app",description:"Python backend with Flask & vanilla JavaScript"}]},4804:(e,n,t)=>{"use strict";t.d(n,{Sv:()=>i,_3:()=>l,xC:()=>a});var r=t(46762),i={autoscaleDeploymentCostDetails:r.jc,rvmDeploymentCostDetails:r.N3,scheduledDeploymentCostDetails:r.$S,staticDeploymentCostDetails:r.uE},o={autoscaleDeploymentCostDetails:r.xz,rvmDeploymentCostDetails:r.D6,scheduledDeploymentCostDetails:r.VH,staticDeploymentCostDetails:r.uE};function a(e){return e.hasDeploymentRepricing?o:i}function l(e,n){switch(e){case"e2-micro":case"e2-small":case"e2-medium":case"n1-custom-1-4096":case"e2-standard-2":case"e2-standard-4":return n.rvmDeploymentCostDetails[e];default:return{costPerHour:null,costPerMonth:null}}}},4835:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M18.469 2.466a.75.75 0 0 1 .292 1.019l-.75 1.352a.75.75 0 1 1-1.312-.727l.75-1.352a.75.75 0 0 1 1.02-.292Zm3.882 2.798a.75.75 0 0 1-.274 1.024l-1.837 1.06a.75.75 0 1 1-.75-1.298l1.837-1.06a.75.75 0 0 1 1.024.274ZM7.157 18.098a3 3 0 0 0 5.883-.917l-5.883.916Zm-1.49.23-1.618.254a2.1 2.1 0 0 1-2.14-1.024l-.425-.734a2.085 2.085 0 0 1 .176-2.356l9.028-11.26a2.1 2.1 0 0 1 3.454.263l5.661 9.772a2.093 2.093 0 0 1-1.49 3.117l-3.784.588a4.5 4.5 0 0 1-8.863 1.38Zm16.513-8.68-1.45-.388a.75.75 0 0 0-.387 1.449l1.448.388a.75.75 0 0 0 .389-1.449ZM11.86 4.147 2.83 15.405a.585.585 0 0 0-.05.667l.426.735a.6.6 0 0 0 .611.292l14.264-2.222a.592.592 0 0 0 .423-.881l-5.658-9.774a.6.6 0 0 0-.984-.078"}),(0,o.Y)("path",{d:"M18.469 2.466a.75.75 0 0 1 .292 1.019l-.75 1.352a.75.75 0 1 1-1.312-.727l.75-1.352a.75.75 0 0 1 1.02-.292Zm3.882 2.798a.75.75 0 0 1-.274 1.024l-1.837 1.06a.75.75 0 1 1-.75-1.298l1.837-1.06a.75.75 0 0 1 1.024.274ZM7.157 18.098a3 3 0 0 0 5.883-.917l-5.883.916Zm-1.49.23-1.618.254a2.1 2.1 0 0 1-2.14-1.024l-.425-.734a2.085 2.085 0 0 1 .176-2.356l9.028-11.26a2.1 2.1 0 0 1 3.454.263l5.661 9.772a2.093 2.093 0 0 1-1.49 3.117l-3.784.588a4.5 4.5 0 0 1-8.863 1.38Zm16.513-8.68-1.45-.388a.75.75 0 0 0-.387 1.449l1.448.388a.75.75 0 0 0 .389-1.449ZM11.86 4.147 2.83 15.405a.585.585 0 0 0-.05.667l.426.735a.6.6 0 0 0 .611.292l14.264-2.222a.592.592 0 0 0 .423-.881l-5.658-9.774a.6.6 0 0 0-.984-.078"})]}))}},5074:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(1889),i=t(4124),o=t(21462),a=t(41661),l=t(11733),s=t(6326),c=t(4999);function u(e,n){return!!e&&("ReplRedirect"===e.__typename||"ReplSubscriptionExpired"===e.__typename||!e.authorizations.editFileContents.isAuthorized||!e.org&&!e.authorizations.connectToWorkspace.isAuthorized||!(0,l.Rq)(n.query.skipNixMigration,"boolean")&&(0,a.A)(e))}function d(e){var n=e.replResponse,t=e.replUrl,a=e.children,l=(0,i.useRouter)();if((0,o.useEffect)(function(){if(u(n,l)){if("ReplSubscriptionExpired"===n.__typename){var e=n.replId,r=n.isOwner,i=t.split("/")[1].slice(1),o=l.asPath.indexOf("#"),a=o<0?l.asPath:l.asPath.slice(0,o);l.replace({pathname:"/expiredPrivateRepl",query:{isOwner:r,ownerUsername:i,replId:e}},a);return}if("ReplRedirect"===n.__typename){window.location.href=n.replUrl;return}if("Repl"===n.__typename&&!n.org&&!n.authorizations.connectToWorkspace.isAuthorized){var s=n.isOwner,d=n.id,p=n.url,f=l.asPath.indexOf("#"),h=f<0?l.asPath:l.asPath.slice(0,f);l.replace({pathname:"/replMinutesLimit",query:{isOwner:s,replId:d,replUrl:p}},h);return}if(!n.authorizations.editFileContents.isAuthorized){var m=(0,c.z9)(n),g=m.href,v=m.as;l.replace(g,v);return}window.location.reload()}},[n,t,l]),u(n,l)){var d="";return"ReplRedirect"===n.__typename?d="Repl moved, redirecting":"ReplSubscriptionExpired"===n.__typename?d="Subscription expired, redirecting":n.org||n.authorizations.connectToWorkspace.isAuthorized?n.authorizations.editFileContents.isAuthorized&&(d="Your Repl requires an upgrade, please wait"):d="Repl minutes exceeded, redirecting",(0,r.Y)(s.A,{reason:d})}return(0,r.Y)(r.FK,{children:a})}},5814:(e,n,t)=>{"use strict";t.d(n,{N:()=>o,h:()=>i});var r=t(21462),i=50;function o(e){var n=e.usage,t=e.limit,i=e.percentThreshold,o=e.onHitThreshold,a=(0,r.useRef)(void 0);(0,r.useEffect)(function(){if(void 0!==n&&void 0!==t){var e=n/t*100;void 0!==a.current&&a.current/t*100<i&&e>=i&&o(),a.current=n}},[n,t,i,o])}},5968:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 8.75a3.25 3.25 0 1 0 0 6.5 3.25 3.25 0 0 0 0-6.5Zm-4.7 2.562a4.751 4.751 0 0 1 9.401.004.748.748 0 0 1 .309-.066h5.95a.75.75 0 1 1 0 1.5h-5.95a.748.748 0 0 1-.309-.066 4.751 4.751 0 0 1-9.402.004.747.747 0 0 1-.299.062H1.05a.75.75 0 0 1 0-1.5H7c.106 0 .208.022.3.062Z",clipRule:"evenodd"})}))}},6113:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 .25a.75.75 0 0 1 .53.22l5 5a.75.75 0 0 1-1.06 1.06l-3.72-3.72V10a.75.75 0 0 1-1.5 0V2.81L7.53 6.53a.75.75 0 0 1-1.06-1.06l5-5A.75.75 0 0 1 12 .25Zm0 13a.75.75 0 0 1 .75.75v7.19l3.72-3.72a.75.75 0 1 1 1.06 1.06l-5 5a.75.75 0 0 1-1.06 0l-5-5a.75.75 0 1 1 1.06-1.06l3.72 3.72V14a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},6152:(e,n,t)=>{"use strict";t.d(n,{u:()=>l});var r=t(1889),i=t(21462),o=t(72542),a=t(4835);function l(e,n,t){var l=(0,o.K)(e,t,n),s=l.openFeedbackModal,c=l.FeedbackModal,u=(0,i.useMemo)(function(){return e?{data:{type:"action",icon:(0,r.Y)(a.A,{}),label:"Share feedback",run:s}}:null},[s,e]),d=(0,i.useMemo)(function(){return{name:"Feedback",commands:u?[u]:[]}},[u]);return{FeedbackModal:c,feedbackCommand:u,feedbackCommandGroup:d}}},6164:(e,n,t)=>{"use strict";t.d(n,{F:()=>l,_:()=>s});var r=t(1889),i=t(88676),o=t(40043),a=t(37407);function l(e){var n=(0,i.e)(e.sessionId);return null===n?null:(0,r.Y)(s,{cents:n})}function s(e){return(0,r.Y)(a.m_,{tooltip:"Usage for this chat",children:(0,r.FD)(o.EY,{color:"dimmer",variant:"small",children:["$",(e.cents/100).toFixed(2)]})})}},6219:(e,n,t)=>{"use strict";t.d(n,{U:()=>em});var r,i=t(12694),o=t(1889),a=t(21462),l=t(17844),s=t(12584),c=t(41114),u=t(86997);function d(){var e=(0,s._)(["\n  query ReplCodeExamples($language: String!) {\n    languageExamples(language: $language) {\n      ... on LanguageExamples {\n        examples {\n          ... on LanguageExample {\n            mainFile\n            name\n            code\n          }\n        }\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,c.J1)(d());function h(e){var n=(0,l._)({},p,e);return u.I(f,n)}var m=t(49069),g=t(82431),v=t(92537),w=t(50522),y=t(67668),b=t(60799),S=t(63892),Y=t(10908),A=t(14545),C=t(83846),x=t(74340),k=t(45771),_=t(86417),D=t(47258),E=t(43974),R=t(40043),I=t(35869),F=t(56185),T=I.D.button;function P(e){var n=e.name,t=e.children,r=e.onClick;return(0,o.FD)(T,{onClick:function(){return r()},css:[D.b.nofill,E.wp.p(8),E.wp.focusRing,E.wp.textAlign.left],children:[(0,o.Y)(R.EY,{variant:"subheadDefault",css:E.wp.pb(16),multiline:!1,children:n}),(0,o.Y)(I.S,{css:[E.wp.backgroundColor.backgroundDefault,E.wp.p(8),E.wp.borderRadius(8)],children:t})]})}var L="@media (min-width: ".concat(_.LO.tabletMax,"px)"),U=(0,k.AH)([E.wp.colWithGap(16),(0,C._)({},L,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function N(e){var n=e.children;return(0,o.Y)(I.S,{css:[(0,C._)({},L,[E.wp.rowWithGap(16)])],children:n})}function O(e){var n=e.mainFile,t=e.examples,r=e.onSelect;return(0,o.FD)(I.S,{gap:24,children:[(0,o.Y)(R.Y9,{level:1,variant:"headerDefault",children:"Code examples"}),(0,o.Y)(R.EY,{children:"Get started with some program examples."}),(0,o.FD)(N,{css:[E.wp.colWithGap(16)],children:[(0,o.Y)(I.S,{css:U,children:t.slice(0,(t.length+1)/2).map(function(e){return(0,o.Y)(P,{name:e.name,onClick:function(){return r(e)},children:(0,o.Y)(x.A,{code:e.code,filePath:n,fontSize:12,disableCursorStyling:!0})},e.name)})}),(0,o.Y)(I.S,{css:U,children:t.slice((t.length+1)/2).map(function(e){return(0,o.Y)(P,{name:e.name,onClick:function(){return r(e)},children:(0,o.Y)(x.A,{code:e.code,filePath:n,fontSize:12,disableCursorStyling:!0})},e.name)})})]})]})}function M(e){var n=e.filePath,t=e.language,r=e.onSelect,i=h({variables:{language:t}}),a=i.data,l=i.loading,s=i.error;if(l)return(0,o.Y)(I.S,{css:[E.wp.pt(32),E.wp.pb(32)],gap:0,justify:"center",align:"center",children:(0,o.Y)(F.A,{})});if(s)return(0,o.Y)(I.S,{css:[E.wp.pt(32),E.wp.pb(32)],gap:0,justify:"center",align:"center",children:s.message});var c=(null==a?void 0:a.languageExamples.__typename)==="LanguageExamples"?a.languageExamples.examples:null;return(null==c?void 0:c.length)?(null==c?void 0:c.length)?(0,o.Y)(O,{mainFile:n,examples:c,onSelect:r}):(0,o.Y)(I.S,{css:[E.wp.pt(32),E.wp.pb(32)],gap:0,justify:"center",align:"center",children:(0,o.FD)(R.EY,{children:["Sorry, this language doesn’t have any examples. Want to add some? Contact us at ",(0,o.Y)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})}):null}var B=t(37743),H=t(23099),z=t.n(H),W=t(45773),G=t(23244),V=t(99395),j=t(65029),Z=t(64774),q=t(99672),K=t(68842),$=t(80703),J=t(6680),Q=(0,t(61234).x)({root:[E.wp.p(16),E.wp.align.center,E.wp.colWithGap(8),{marginTop:"10%",pointerEvents:"none","*":{pointerEvents:"all"}}],button:[E.wp.reset.button,E.wp.rowWithGap(6),E.wp.align.center,E.wp.color.foregroundDimmest,E.wp.cursor.pointer,{fontFamily:J.LU.fontFamilyDefault,"*":{borderColor:J.LU.foregroundDimmest,color:J.LU.foregroundDimmest},":hover *":{borderColor:J.LU.foregroundDefault,color:J.LU.foregroundDefault}}]}),X={layer:"cm-empty-state-layer",dom:"cm-empty-state-dom"},ee=W.Lz.theme((r={},(0,C._)(r,".".concat(X.layer),{width:"100%",height:"100%",pointerEvents:"none",zIndex:"201 !important"}),(0,C._)(r,".".concat(X.dom),{position:"absolute",width:"100%",pointerEvents:"none",display:"flex",justifyContent:"center"}),r)),en=function(){function e(n){(0,B._)(this,e),this.options=n}var n=e.prototype;return n.draw=function(){var e=this.options,n=e.ctas,t=e.view,r=e.width,i=(0,Z.J)((0,o.Y)(I.S,{css:Q.root,children:n.map(function(e){return(0,o.FD)(I.S,{css:Q.button,onClick:function(){return e.onClick(t)},children:[(0,o.FD)(I.S,{row:!0,gap:4,children:[e.icon,(0,o.Y)(R.EY,{variant:"small",children:e.text})]}),e.shortcut?(0,o.Y)($._y,{keyCombo:e.shortcut,fontSize:12}):null]},e.text)})}));return i.className=X.dom,i.style.width=r+"px",i.style.visibility=r>240?"visibile":"hidden",i.style.left="0px",i},n.eq=function(e){return z()(e.options,this.options)},e}(),et=new q.k(function(e){var n=function(e){var n;return!(e.doc.length>0||e.field(V.z)||(null===(n=e.field(j.dz,!1))||void 0===n?void 0:n.size)||e.field(K.dg,!1))},t=m.sU.define({create:n,update:function(e,t){return n(t.state)}}),r=(0,W.qd)({above:!0,class:X.layer,update:function(e){return(0,G.$H)(e,t)},markers:function(n){if(!n.state.field(t,!1))return[];var r=n.dom.getBoundingClientRect();return[new en({ctas:e,width:Math.round(n.contentDOM.getBoundingClientRect().right-r.left),view:n})]}});return[ee,t,r]}),er=t(47207),ei=t(48326),eo=t(41502),ea=t(44885),el=t(25796),es=t(67169),ec=t(83861);function eu(e){var n=e.cta,t=e.version;(0,S.u4)(S.AZ.EDITOR_EMPTY_STATE_CLICKED,{cta:n,version:t})}var ed=m.Pe.define(),ep=m.sU.define({create:function(){return null},update:function(e,n){var t=e;return(0,v.C)(n,ed,function(e){t=e.value}),t}}),ef=g.X.from(ep,function(e){if(!e)return null;var n=e.language,t=e.filePath;return{key:"examplesModal",node:function(e){var r=function(){e.dispatch({effects:ed.of(null)})};return(0,o.Y)(ea.a,{maxWidth:872,isOpen:!0,onRequestClose:r,children:(0,o.Y)(eg,{onRequestClose:r,language:n,filePath:t})})}}}),eh=[ep,ef];function em(e){var n,t,r,i,l,s=e.isMobile,c=e.filePath,u=e.generateCode,d=(0,$.Jn)(ei.G.id),p=null!==(i=null===(n=w.Jh.from(c))||void 0===n?void 0:n.id)&&void 0!==i?i:null,f=(0,b.f)().isTeamWithAiDisabled,m=h({variables:{language:p},skip:!p}).data,g=(null!==(l=null==m?void 0:null===(r=m.languageExamples)||void 0===r?void 0:null===(t=r.examples)||void 0===t?void 0:t.length)&&void 0!==l?l:0)>=1,v=(0,a.useMemo)(function(){var e=[];return(0,y.e$)(c)||f||e.push({icon:(0,o.Y)(el.A,{}),text:"Generate Code with AI",shortcut:s?void 0:d,onClick:function(e){eu({cta:"generate",version:"new"}),u(e,"shortcut")}}),p&&g&&e.push({icon:(0,o.Y)(ec.A,{}),text:"Start with a code example",onClick:function(e){eu({cta:"examples",version:"new"}),e.dispatch({effects:ed.of({language:p,filePath:c})})}}),e.push({icon:(0,o.Y)(es.A,{}),text:"Add powerful Integrations",onClick:function(e){(0,er.zw)(e.state,{pane:{type:"integrations"},secondary:!0}),eu({cta:"integrations",version:"new"}),(0,S.u4)(S.AZ.TOOL_OPENED,{source:"fileEditorEmptyState",tool:"integrations"})}}),e},[c,f,p,g,s,d,u]);return[et.use(v),eh]}function eg(e){var n=e.onRequestClose,t=e.language,r=e.filePath,l=(0,A.Os)(Y.C.id,Y.j.Examples),s=(0,A.Os)(Y.C.id,Y.j.Editor),c=(0,i._)((0,a.useState)(!1),2),u=c[0],d=c[1],p=(0,eo.A)(r),f=(0,a.useRef)(null==l?void 0:l.isActive),h=(0,a.useRef)();h.current=null==l?void 0:l.isActive;var m=(0,a.useRef)(null==l?void 0:l.goto);return(m.current=null==l?void 0:l.goto,(0,a.useEffect)(function(){return function(){var e;h.current&&(null===(e=m.current)||void 0===e||e.call(m,Y.j.Editor))}},[]),(0,a.useEffect)(function(){if((null==s?void 0:s.isActive)&&!f.current){if(!u){d(!0);return}s.goto(Y.j.Examples)}},[s,n,u]),(0,a.useEffect)(function(){if(null==l?void 0:l.isActive){f.current=!0;return}f.current&&n(null)},[n,null==l?void 0:l.isActive]),p)?(0,o.Y)("div",{ref:null==l?void 0:l.tourRef,children:(0,o.Y)(M,{filePath:r,language:t,onSelect:function(e){p({code:e.code,insertAt:0}),n({exampleName:e.name})}})}):(0,o.Y)("div",{children:"Please make sure you have a file open"})}},6326:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(1889),i=t(93158),o=t(61234),a=t(43974),l=t(91384),s=t(87860),c=t(40043),u=t(35869),d=(0,o.x)({overlay:[a.wp.position.fixed,a.wp.flex.row,a.wp.align.center,a.wp.justify.center,a.wp.backgroundColor.backgroundOverlay,{top:0,bottom:0,left:0,right:0,zIndex:a.U3+1,cursor:"not-allowed"}],animationWrapper:[a.wp.center,a.wp.minWidth(225),a.wp.height(225),a.wp.p(16),a.wp.color.foregroundDefault,a.wp.borderRadius(8),a.wp.backgroundColor.backgroundOverlay,a.wp.zIndex(a.U3+1),{cursor:"not-allowed"}],lockText:a.wp.mt(32)});function p(e){var n=e.reason;return(0,r.Y)(s.Z,{children:(0,r.Y)(u.S,{css:d.overlay,children:(0,r.Y)(i.Ay,{children:(0,r.FD)(u.S,{css:d.animationWrapper,tabIndex:-1,children:[(0,r.Y)(l.A,{height:80}),(0,r.Y)(c.EY,{multiline:!1,variant:"subheadBig",css:d.lockText,dataCy:"lock-screen",children:n})]})})})})}},6431:(e,n,t)=>{"use strict";t.d(n,{y:()=>x});var r=t(83846),i=t(17844),o=t(93629),a=t(12694),l=t(1889),s=t(45981),c=t.n(s),u=t(21462),d=t(74370),p=t(81239),f=t(16907),h=t(28896),m=t(31464),g=t(61234),v=t(43974),w=t(93682),y=t(4930),b=t(44885),S=t(40043),Y=t(35869),A=(0,g.x)({self:[v.wp.container("root")],actions:[(0,r._)({},v.kL.max(475,"root"),[v.wp.colWithGap(8),v.wp.align.end])],buttons:[(0,r._)({},v.kL.max(350,"root"),[v.wp.colWithGap(8),v.wp.align.end])]}),C=function(){var e=(0,f.A)(),n=(0,d.DY)({variables:{id:e},ssr:!1,context:{noBatch:!0},pollInterval:6e4}),t=n.data,r=n.previousData,s=(0,p.A)(),g=s.showConfirm,v=s.showError,C=(0,a._)((0,m.B)({onFork:function(){g("Repl forked, redirecting...")},onError:function(){v("Error creating fork - please try again")}}),2),x=C[0],k=C[1].loading,_=(null==t?void 0:t.getRepl.__typename)==="Repl"?t.getRepl:null,D=(null==r?void 0:r.getRepl.__typename)==="Repl"?r.getRepl:null,E=(null==_?void 0:_.org)?_.org:null,R=(null==_?void 0:_.project)?_.project:null,I=(0,a._)((0,u.useState)(!1),2),F=I[0],T=I[1];return((0,u.useEffect)(function(){var n,t,r,i;if((null==_?void 0:null===(n=_.project)||void 0===n?void 0:n.mainRepl)&&D&&_.project.mainRepl.id===e)return(null===(r=D.project)||void 0===r?void 0:null===(t=r.mainRepl)||void 0===t?void 0:t.id)&&D.project.mainRepl.id===e||(i=setTimeout(function(){T(!0)},6e3)),function(){i&&clearTimeout(i)}},[e,_,D]),_&&E&&R)?(0,l.Y)(b.a,{isOpen:F,onRequestClose:function(){return T(!1)},centered:!0,children:(0,l.FD)(Y.S,{css:A.self,gap:16,children:[(0,l.Y)(S.Y9,{level:2,variant:"subheadBig",children:"This Repl is now part of a Project"}),(0,l.FD)(S.EY,{children:["This Repl is now the source of truth for a Project called"," ",R.title,". Continued development in this Repl may lead to unexpected changes."]}),(0,l.FD)(Y.S,{css:A.actions,row:!0,gap:8,justify:"space-between",align:"center",children:[(0,l.Y)(c(),{href:"https://docs.replit.com/teams/projects/overview",target:"_blank",children:(0,l.Y)(S.EY,{children:"Learn more"})}),(0,l.FD)(Y.S,{css:A.buttons,row:!0,gap:8,children:[(0,l.Y)(w.$n,{text:"Work in a new fork",onClick:function(){k||x({orgId:E.id,repl:_,forkSource:"convertedToProjectModal"})},disabled:k,loading:k}),(0,l.Y)(y.v,(0,o._)((0,i._)({colorway:"primary"},(0,h.gm)({org:E,projectId:R.id})),{text:"Visit Project dashboard"}))]})]})]})}):null},x=function(e){return e.repl.org?(0,l.Y)(C,{}):null}},6495:(e,n,t)=>{"use strict";t.d(n,{A:()=>Y});var r=t(12694),i=t(1889),o=t(21462),a=t(40049),l=t(69543),s=t(19968),c=t(6680),u=t(61234),d=t(43974),p=t(93682),f=t(31618),h=t(44885),m=t(3910),g=t(40043),v=t(35869),w=t(19915),y=t(32633),b=(0,u.x)({repls:[d.wp.maxHeight("60vh"),d.wp.overflow("auto"),{"& > div":[d.wp.py(8),{borderTop:"1px solid "+c.LU.outlineDimmest}],"& > div:last-of-type":{borderBottom:"1px solid "+c.LU.outlineDimmest}}],row:[d.wp.colWithGap(8)]}),S=function(e){var n,t=e.repl,l=e.onConfirmedChange,c=(0,r._)((0,o.useState)(""),2),u=c[0],d=c[1],p=(null===(n=t.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"?t.hostingDeployment:null,h=(0,o.useRef)(!1),w=(null==p?void 0:p.replitAppSubdomain)?p.replitAppSubdomain:t.title;return(0,i.FD)(v.S,{gap:8,children:[(0,i.FD)(v.S,{row:!0,gap:8,align:"center",children:[(0,i.Y)(s.Ay,{size:24,iconUrl:t.iconUrl,alt:""}),(0,i.Y)(g.EY,{height:"singleLine",multiline:!1,children:t.title}),p?(0,i.Y)(a.y,{deployment:p}):null]},t.id),p?(0,i.FD)(i.FK,{children:[(0,i.Y)(m.N,{icon:(0,i.Y)(y.A,{}),colorway:"red",text:"This App has been deployed. If you delete this App, the associated\nproduction deployment will also be shut down and deleted. To\nproceed, please type: ".concat(w)}),(0,i.Y)(f.pd,{placeholder:"Type here",value:u,onChange:function(e){var n=e.currentTarget.value;d(n);var t=n.trim()===w;t!==h.current&&l(t),h.current=t}})]}):null]})};let Y=function(e){var n=e.selectedRepls,t=e.isOpen,a=e.onClose,s=e.onDelete,c=e.deleting,u=n.length,d=(0,l.A)("Repl",u),f=n.filter(function(e){var n;return(null===(n=e.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"}).length,m=(0,l.A)("Deployment",f),y=f>0?" & ".concat(f>1?f+" ":""," ").concat(m):"",Y=(0,r._)((0,o.useState)(0),2),A=Y[0],C=Y[1];return(0,o.useEffect)(function(){!t&&C(0)},[t]),(0,i.Y)(h.a,{isOpen:t,onRequestClose:a,children:(0,i.FD)(v.S,{gap:16,children:[(0,i.FD)(g.Y9,{variant:"subheadBig",level:2,children:["Delete ",d,f>0?" & ".concat(m):"","?"]}),(0,i.Y)(g.EY,{color:"dimmer",children:"Are you sure? This cannot be undone. Some Apps may take a few minutes to finish deleting."}),(0,i.Y)(v.S,{css:b.repls,children:n.map(function(e){return(0,i.Y)(S,{css:b.row,repl:e,onConfirmedChange:function(e){return C(function(n){return n+(e?1:-1)})}},e.id)})}),(0,i.FD)(v.S,{row:!0,gap:12,justify:"end",children:[(0,i.Y)(p.$n,{text:"Cancel",onClick:a,disabled:c}),(0,i.Y)(p.$n,{iconLeft:(0,i.Y)(w.A,{}),onClick:s,disabled:c||A<f,text:"Yes, delete ".concat(u>1?u+" ":""," ").concat(d).concat(y),colorway:"negative"})]})]})})}},6558:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(14854);function l(e){return(0,o.FD)(a.A,(0,i._)((0,r._)({},e),{children:[(0,o.FD)("g",{fillRule:"evenodd",clipPath:"url(#clip0_7378_479)",clipRule:"evenodd",children:[(0,o.Y)("path",{fill:"#635BFF",d:"M0 2a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v20a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Z"}),(0,o.Y)("path",{fill:"#fff",d:"M11.064 9.33c0-.564.462-.786 1.23-.786 1.104 0 2.496.336 3.6.93V6.066C14.688 5.586 13.5 5.4 12.3 5.4c-2.946 0-4.902 1.536-4.902 4.104 0 4.002 5.514 3.366 5.514 5.094 0 .666-.582.882-1.392.882-1.206 0-2.742-.492-3.96-1.158v3.45c1.35.582 2.712.828 3.96.828 3.018 0 5.094-1.494 5.094-4.092-.024-4.32-5.55-3.552-5.55-5.178Z"})]}),(0,o.Y)("defs",{children:(0,o.Y)("clipPath",{id:"clip0_7378_479",children:(0,o.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))}},6620:(e,n,t)=>{"use strict";t.d(n,{BL:()=>R,D6:()=>x,E2:()=>k,Ff:()=>U,Gg:()=>G,H_:()=>P,Ou:()=>b,PY:()=>g,Vr:()=>m,bO:()=>I,cW:()=>D,d_:()=>h,h:()=>S,hF:()=>L,hQ:()=>E,hq:()=>z,n5:()=>F,ob:()=>y,ov:()=>C,q3:()=>B,rD:()=>O,tB:()=>v,wy:()=>_,xB:()=>A});var r=t(83846),i=t(17844),o=t(93629),a=t(12694),l=t(56902),s=t(21462),c=t(35992),u=t(44370),d=t(69338),p=t(50140),f=t(9406),h=function(e){return e.Uninitialized="Uninitialized",e.Initializing="Initializing",e.Installing="Installing",e.Uninstalling="Uninstalling",e.Idle="Idle",e}({}),m=function(e){return e.Install="Install",e.Uninstall="Uninstall",e}({});function g(){return(0,a._)((0,s.useState)(function(){return(0,u.y$)()}),1)[0]}var v=(0,s.createContext)(null);function w(){var e=(0,s.useContext)(v);if(!e)throw Error("Expected store in context");return e}var y=function(e){return(0,d.Xr)(e,{store:w()})};function b(e){return(0,p.yF)((0,s.useCallback)(function(n){return n(e)},[e]),{store:w()})}function S(e){return(0,d.md)(e,{store:w()})}var Y=(0,u.eU)({});function A(e){var n,t=S(Y);return e&&null!==(n=t[e])&&void 0!==n?n:[]}function C(){var e=y(Y);return function(n,t){e(function(e){return(0,c.jM)(e,function(e){var r=e[n];if(!r||0===r.length){e[n]=t;return}var i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)!function(){var e=l.value;r.find(function(n){return n.name===e.name})||r.push(e)}()}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}})})}}function x(){var e=y(Y);return function(n,t){e(function(e){return(0,c.jM)(e,function(e){var r=e[n];if(r&&0!==r.length){var i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)!function(){var e=l.value,n=r.findIndex(function(n){return n.name===e.name});-1!==n&&r.splice(n,1)}()}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}})})}}var k=(0,u.eU)({});function _(){var e=b(k);return function(n){var t;return null!==(t=e()[n])&&void 0!==t?t:null}}function D(){var e=y(k);return function(n,t){e(function(e){return(0,o._)((0,i._)({},e),(0,r._)({},n,t))})}}var E=(0,u.eU)(null);function R(){return S(E)}var I=(0,u.eU)([]);function F(){return S(I)}var T=(0,u.eU)({});function P(e){var n,t=S(T);return e&&null!==(n=t[e])&&void 0!==n?n:[]}function L(){var e=b(T);return function(n){var t;return null!==(t=e()[n])&&void 0!==t?t:[]}}function U(){var e=y(T);return function(n,t){e(function(e){return(0,o._)((0,i._)({},e),(0,r._)({},n,t.map(function(e){return"nix"===n?(0,o._)((0,i._)({},e),{name:(0,f.y)(e.name)}):e})))})}}var N=(0,u.eU)(null,function(e,n,t){var r=t.id,i=t.pkg;if(!i.name)throw Error("Package does not have a name.");n(I,function(e){return(0,c.jM)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(n){return e.id===r&&n.name===i.name})})){var n=e.find(function(e){return"Install"===e.kind});n?n.pkgs.push(i):e.push({kind:"Install",id:r,pkgs:[i]})}})})});function O(){return y(N)}var M=(0,u.eU)(null,function(e,n,t){var r=t.id,i=t.pkg;if(!i.name)throw Error("Package does not have a name.");n(I,function(e){return(0,c.jM)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(n){return e.id===r&&n.name===i.name})})){var n=e.find(function(e){return"Uninstall"===e.kind});n?n.pkgs.push(i):e.push({kind:"Uninstall",id:r,pkgs:[i]})}})})});function B(){return y(M)}var H=(0,u.eU)(null,function(e,n,t){var r=(0,l._)(e(I)),i=r[0],o=r.slice(1);t===i&&(n(I,o),n(E,t))});function z(){return y(H)}var W=(0,u.eU)(null,function(e,n,t){n(I,function(e){return(0,c.jM)(e,function(e){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,s=l.pkgs.findIndex(function(e){return e.name===t});-1!==s&&l.pkgs.splice(s,1)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}})})});function G(){return y(W)}},6659:(e,n,t)=>{"use strict";t.d(n,{A:()=>A});var r=t(29935),i=t(12694),o=t(82643),a=t(1889),l=t(5839),s=t(17844),c=t(12584),u=t(41114),d=t(51026);function p(){var e=(0,c._)(["\n  query AiSessionDebugInfoCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,u.J1)(p()),m=t(26496),g=t(81239),v=t(16907),w=t(2904),y=t(6680),b=t(26705),S=t(57667),Y=t(42795);function A(e){var n,t,c,u,p,A=e.sessionId,C=e.sessionType,x=(0,v.A)(),k=(0,g.A)().showConfirm,_=(n=A,t=C,u=(0,v.A)(),p=(0,i._)((c=(0,s._)({},f,void 0),d._(h,c)),1)[0],(0,r._)(function(){var e,r,i,a,l,s,c,d;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,p()];case 1:if(i=null==(r=o.sent())?void 0:null===(e=r.data)||void 0===e?void 0:e.currentUser,!n||!i)return[2,""];return a=(0,m.Yd)(n,t),l=(0,m.nv)(u,n),s=(0,m.Ds)(n),[2,"\n• User ID: ".concat(null!==(c=null==i?void 0:i.id)&&void 0!==c?c:"N/A","\n• Username: ").concat(null!==(d=null==i?void 0:i.username)&&void 0!==d?d:"N/A","\n• Repl ID: ").concat(null!=u?u:"N/A","\n• Session ID: ").concat(null!=n?n:"N/A","\n• \uD83D\uDD25 traceforge URL: ").concat(l,"\n• LangSmith URL: ").concat(null!=a?a:"N/A","\n• Temporal URL: ").concat(null!=s?s:"N/A","\n    ").trim()]}})}));return(0,a.Y)(S.in,{trigger:(0,a.Y)(b.K0,{alt:"[Staff] Debug tools",children:(0,a.Y)(Y.A,{color:y.LU.foregroundDimmer})}),children:(0,a.FD)(l.wn,{children:[(0,a.Y)(S.j,{text:"[Staff] Debug tools"}),(0,a.Y)(S.Dr,{label:"Copy debug info",onAction:(0,r._)(function(){var e;return(0,o.YH)(this,function(n){switch(n.label){case 0:return[4,_()];case 1:return e=n.sent(),(0,w.default)(e),k("Copied debug info to clipboard"),[2]}})})}),(0,a.Y)(S.Dr,{href:(0,m.nv)(x,A),label:"Go to \uD83D\uDD25 traceforge",target:"_blank"}),(0,a.Y)(S.Dr,{href:(0,m.Yd)(A,C),label:"Go to LangSmith",target:"_blank"}),(0,a.Y)(S.Dr,{href:(0,m.Ds)(A),label:"Go to Temporal",target:"_blank"})]})})}},6886:(e,n,t)=>{"use strict";t.d(n,{F:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(50175);function l(){var e=(0,i._)(["\n  mutation MarkMessagesAsSeen(\n    $replId: String!\n    $threadId: String\n    $messageIds: [String!]\n  ) {\n    markMessagesAsSeen(\n      replId: $replId\n      threadId: $threadId\n      messageIds: $messageIds\n    ) {\n      ... on AnnotationMessageList {\n        messages {\n          id\n          seen\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n=(0,r._)({},s,e);return a.n(c,n)}},7118:(e,n,t)=>{"use strict";t.d(n,{A:()=>d,C:()=>m});var r=t(29935),i=t(17844),o=t(12694),a=t(82643);function l(){return(l=(0,r._)(function(e){return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){return setTimeout(function(){return n()},e)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}var s=t(94668),c=t(39075),u=new RegExp(/(file:\/\/)?\/home\/runner\/[^/]+\/(.*)/);function d(e,n,t,r){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e,n,t,i){var l,u,d;return(0,a.YH)(this,function(p){switch(p.label){case 0:return u=(l=(0,o._)((0,c.z)(e-1,!1,n),2))[0],d=l[1]+1,[4,m(u,(0,r._)(function(){var e;return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,i()];case 1:return[2,null===(e=n.sent())||void 0===e?void 0:e.files]}})}))];case 1:return[2,p.sent().map(function(e){var r=e.from,i=e.to,o=e.file,a=e.line,l=e.col;return{range:(0,c.W)(d,r,i,n),text:o,activate:function(e,n){(0,s.T$)(e)&&t({path:n,line:a,col:l})}}})]}})})).apply(this,arguments)}var f=/[a-zA-Z0-9_\-.[\]$@()]+/,h='", line ';function m(e,n){return g.apply(this,arguments)}function g(){return(g=(0,r._)(function(e,n){var t,r,o,s,c,d,p,m,g;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,Promise.race([n(),(function(e){return l.apply(this,arguments)})(5e3).then(function(){return[]})])];case 1:if(!(t=a.sent())||0===t.length)return[2,[]];for(r=[],o=0,s=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e[o+n]},c=function(){var n=e[o];return o++,n},d=function(){var n=o;c();for(var t="";/\d/.test(s());)t+=c();if(0===t.length)return o=n,null;if(":"!==s())return{line:parseInt(t,10),col:0};c();for(var r="";o<e.length&&/\d/.test(s());)r+=c();return 0===r.length?(o--,{line:parseInt(t,10),col:0}):{line:parseInt(t,10),col:parseInt(r,10)}},p=function(){for(var n=o,t=0;t<h.length;t++)c();for(var r="";o<e.length&&/\d/.test(s());)r+=c();return 0===r.length?(o=n,null):{line:parseInt(r,10),col:0}},m=function(){var n=o,r="";for("."===s()&&"/"===s(1)&&(r+=c(),r+=c()),("("===s()||"["===s())&&c();o<e.length;){var a=s();if(f.test(a))r+=c();else if("/"===a){if("/"===r[r.length-1])break;r+=c()}else break}var l={line:1,col:0};if(":"===s()){var m=d();m&&(l=m)}else if(e.substring(o,o+h.length)===h){var g=p();g&&(l=g,n--)}(r.startsWith("a/")||r.startsWith("b/"))&&(e.indexOf("diff --git ")>=0||e.indexOf("--- a/")>=0||e.indexOf("+++ b/")>=0)&&t.indexOf(r.substring(2))>=0&&(r=r.substring(2),n+=2);var v=r.replace(u,"$2").replace(/^\.?\//,"").trim();return v&&t.find(function(e){return e===v||e.substring(e.lastIndexOf("/")+1)===v})?(0,i._)({file:v,from:n,to:o},l):null};o<e.length;)(g=m())?r.push(g):c();return[2,r]}})})).apply(this,arguments)}},7405:(e,n,t)=>{"use strict";t.d(n,{mb:()=>g,dL:()=>m,cL:()=>v});var r=t(12584),i=t(41114),o=t(52592),a=t(77381);function l(){var e=(0,r._)(["\n  fragment PageTitleRepl on Repl {\n    id\n    title\n    project {\n      id\n      title\n    }\n  }\n"]);return l=function(){return e},e}var s=(0,i.J1)(l()),c=t(74370),u=t(67203),d=t(77999);function p(){var e=(0,r._)(['\n  fragment ReplEnvironmentDesktopCurrentUser on CurrentUser {\n    id\n    image\n    email\n    isAdmin: hasRole(role: ADMIN)\n    ...CrosisContextCurrentUser\n    workspacePreferences\n    ...ReplEnvironmentHeaderLeftCurrentUser\n    ...ReplEnvironmentTourCurrentUser\n    ...LayoutHeaderAvatarDropdownCurrentUser\n    canMigrateRepls: gate(feature: "migrate2nix-killswitch")\n  }\n  ',"\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,r._)(["\n  fragment ReplAiAuthorizations on ReplAuthorizations {\n    useBasicChat: useAiChat(model: basic) {\n      isAuthorized\n      code\n      message\n    }\n    useAdvancedChat: useAiChat(model: advanced) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,r._)(["\n  fragment ReplEnvironmentDesktopRepl on Repl {\n    id\n    title\n    layoutState\n    description\n    multiplayers {\n      id\n    }\n    origin {\n      id\n    }\n    config {\n      isVnc\n      isServer\n      isExtension\n      isAgentRepl\n      isInPlanningPhase\n    }\n    lesson {\n      id\n    }\n    rootOriginReplUrl\n    source {\n      release {\n        id\n        repl {\n          id\n        }\n      }\n    }\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n    ...PageTitleRepl\n    authorizations {\n      ...ReplAiAuthorizations\n    }\n    ...ConvertedToProjectModalRepl\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}var m=(0,i.J1)(p(),a.N,u.n,d.f,o.yL),g=(0,i.J1)(f()),v=(0,i.J1)(h(),a.c,u.c,s,g,c.LM)},7524:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(12694),i=t(21462),o=t(67337);function a(){var e=(0,o.A)().presence,n=(0,r._)((0,i.useState)(e.getFollowedUser()),2),t=n[0],a=n[1];return(0,i.useEffect)(function(){return a(e.getFollowedUser()),e.onFollowedUserChanged(a)},[e]),t}},7771:(e,n,t)=>{"use strict";t.d(n,{D:()=>a});var r=t(75152),i=t(24998),o=r.ZU.Object({type:r.ZU.Literal("preferences")}),a=function(e){return i.WT.Decode(o,e)}},7882:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7.387 2.47a.75.75 0 0 1 0 1.06L4.811 6.107h13.618a.75.75 0 0 1 0 1.5H4.81l2.576 2.577a.75.75 0 1 1-1.06 1.06L2.47 7.388a.75.75 0 0 1 0-1.06L6.327 2.47a.75.75 0 0 1 1.06 0Zm9.226 10.285a.75.75 0 0 1 1.06 0l3.857 3.858a.75.75 0 0 1 0 1.06l-3.857 3.857a.75.75 0 0 1-1.06-1.06l2.576-2.577H5.571a.75.75 0 0 1 0-1.5H19.19l-2.576-2.577a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}},7992:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 21.75a.75.75 0 0 0 .75-.75V10.81l3.72 3.72a.75.75 0 1 0 1.06-1.06l-5-5a.75.75 0 0 0-1.06 0l-5 5a.75.75 0 1 0 1.06 1.06l3.72-3.72V21c0 .414.336.75.75.75Zm-9-12A.75.75 0 0 0 3.75 9V5A1.25 1.25 0 0 1 5 3.75h14A1.25 1.25 0 0 1 20.25 5v4a.75.75 0 0 0 1.5 0V5A2.75 2.75 0 0 0 19 2.25H5A2.75 2.75 0 0 0 2.25 5v4c0 .414.336.75.75.75Z",clipRule:"evenodd"})}))}},8038:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r="file://";function i(e){var n=e;return e.startsWith(r)&&(n=e.slice(r.length)),n.startsWith("/")&&(n=n.slice(1)),n}},8319:(e,n,t)=>{"use strict";t.d(n,{x:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query GetIsGuestInStarterPlanUserRepl($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          __typename\n          id\n        }\n        owner {\n          __typename\n          ... on User {\n            id\n            isSubscribed\n          }\n        }\n        isOwner\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l()),u=t(16907);function d(){var e,n,t,i,o=(t={variables:{replId:(0,u.A)()}},i=(0,r._)({},s,t),a.I(c,i)).data,l=(null==o?void 0:o.getRepl.__typename)==="Repl"&&null!==(e=o.getRepl.org)&&void 0!==e&&!!e.id;return(null==o?void 0:o.getRepl.__typename)==="Repl"&&(null===(n=o.getRepl.owner)||void 0===n?void 0:n.__typename)==="User"&&!o.getRepl.owner.isSubscribed&&!o.getRepl.isOwner&&!l}},8481:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(12694),i=t(86105),o=t(21462),a=t(11438),l=t(17844),s=t(93629),c=function(e){return/\s/.test(e)};function u(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=(0,r._)((0,o.useState)(null),2),a=i[0],u=i[1],d=(0,o.useCallback)(u,[u]),p=(0,o.useRef)(n);(0,o.useEffect)(function(){p.current=n},[n]);var f=(0,r._)((0,o.useState)(null),2),h=f[0],m=f[1];return(0,o.useEffect)(function(){if(a){var e=function(){var e=a.value,n=a.selectionStart;if(!n){m(null);return}var t=1===n||c(e[n-2]||""),r=e.length?e[n-1]:null;m(function(i){if(i&&(n<i.index||0===n))return null;if(!r||!i&&!t)return i;var o=p.current.includes(r);return i||o?i?c(r)?null:(0,s._)((0,l._)({},i),{text:e.slice(i.index,n)}):{index:n,text:"",match:r}:i})},n=function(){m(null)};return a.addEventListener("focus",e),a.addEventListener("keyup",e),a.addEventListener("blur",n),function(){m(null),a.removeEventListener("focus",e),a.removeEventListener("keyup",e),a.removeEventListener("blur",n)}}},[a,m]),[h,d]}function d(e){var n=(0,o.useRef)(e);(0,o.useEffect)(function(){n.current=e},[e]);var t=(0,r._)((0,o.useState)(!1),2),l=t[0],s=t[1],c=(0,r._)((0,o.useState)(null),2),d=c[0],p=c[1],f=(0,r._)(u.apply(void 0,(0,i._)(Object.keys(e))),2),h=f[0],m=f[1],g=(0,o.useRef)(h);(0,o.useEffect)(function(){g.current=h},[h]);var v=(0,a.A)(h,100);return(0,o.useEffect)(function(){if(!v){p(null);return}var e=v.match,t=v.text,r=n.current[e]?n.current[e]:null;if(!r){p(null);return}var i=!1;return s(!0),r(t).then(function(e){!i&&g.current===v&&(s(!1),p({textTrigger:v,results:e,applySuggestion:function(e){var n=e.targetValue,t=e.suggestionValue,r=n.slice(0,v.index),i=t,o=n.slice(v.index+v.text.length);o&&o.startsWith(" ")||(i+=" ");var a=r+i+o;return{cursorIndex:(r+i).length+(o&&o.startsWith(" ")?1:0),fullValue:a}}}))}),function(){i=!0}},[v,p]),[{isLoading:l,suggestions:d},m]}},8753:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(4124),i=t(21462),o=t(67201),a=t(67337),l=t(55675);function s(){var e=(0,r.useRouter)(),n=(0,a.A)().container,t=(0,l.lY)(),s=(0,l.nZ)(),c=(0,l.hr)();(0,i.useEffect)(function(){e.query.debug&&"undefined"!==e.query.debug&&s(!0)},[s,e.query.debug]),(0,i.useEffect)(function(){if(t)return n.client().onDebugLog(function(e){if("log"===e.type){var t={name:e.log.channel.name,service:null};if("string"==typeof e.log.channel.service)t.service=e.log.channel.service;else if(e.log.channel.service){var r=n.getContext();r&&(t.service=e.log.channel.service(r))}c({id:(0,o.A)(),channel:t,dir:e.log.direction,cmd:e.log.cmd,stringifiedCmd:JSON.stringify(e.log.cmd),timestamp:window.performance.now()})}})},[t,n,c])}},9022:(e,n,t)=>{"use strict";t.d(n,{A:()=>T});var r=t(29935),i=t(12694),o=t(56902),a=t(86105),l=t(82643),s=t(1889),c=t(21462),u=t(17844),d=t(12584),p=t(41114),f=t(86997);function h(){var e=(0,d._)(["\n  query BSODComponent {\n    currentUser {\n      id\n      username\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return h=function(){return e},e}var m={},g=(0,p.J1)(h()),v=t(49705),w=t(45771),y=t(61234),b=t(43974),S=t(29253),Y=t(93682),A=t(44885),C=t(40043),x=t(54258),k=t(13240),_=(0,w.AH)({".sentry-error-embed-wrapper":{zIndex:"".concat(b.U3," !important")}}),D=(0,y.x)({errorStack:[b.wp.p(16),b.wp.width("100%"),b.wp.backgroundColor.backgroundHigher,b.wp.borderRadius(8),b.wp.overflowY("hidden"),{whiteSpace:"pre"}],errorStackContent:[b.wp.font.code,b.wp.fontSize(12)],error:[b.wp.font.code]}),E=/at (.+) \((https:\/\/.+\.js):(\d+):(\d+)\)/,R=/at (https:\/\/.+\.js):(\d+):(\d+)/;function I(){return(I=(0,r._)(function(e){var n,s,c,u,d,p,f,h;function m(){return(m=(0,r._)(function(e){var t,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:if(t=n.get(e))return[2,t];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(e).then(function(e){return e.json()})];case 2:return r=o.sent(),i=new s.SourceMapConsumer(r),n.set(e,i),[2,i];case 3:return o.sent(),[2,null];case 4:return[2]}})})).apply(this,arguments)}return(0,l.YH)(this,function(g){switch(g.label){case 0:n=new Map,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,t.e(3248).then(t.t.bind(t,33248,19))];case 2:return s=g.sent(),[3,4];case 3:throw g.sent(),Error("source-map not available");case 4:var v;if(!(c=e.stack))throw Error("expected error.stack to be defined");return u=c.split("\n").map(function(e){return e.trim()}).filter(function(e){return!!e}),p=(d=(0,o._)(u))[0],[4,Promise.all(d.slice(1).map((v=(0,r._)(function(e){var n,t,r,o,a,s,c,u,d,p;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(E.test(e)){if(!(a=E.exec(e)))throw Error("expected result");t=(s=(0,i._)(a.slice(2),3))[0],r=s[1],o=s[2]}else{if(!R.test(e))return[2,e];if(!(c=R.exec(e)))throw Error("expected result");t=(u=(0,i._)(c.slice(1),3))[0],r=u[1],o=u[2]}return[4,function(e){return m.apply(this,arguments)}("".concat(t,".map"))];case 1:if(!(d=l.sent()))return[2,"    ".concat(e)];if(p=d.originalPositionFor({line:Number(r),column:Number(o)}),n)return[2,"    at ".concat(p.name," (").concat(p.source,":").concat(p.line,":").concat(p.column,")")];return[2,"    at ".concat(p.source,":").concat(p.line,":").concat(p.column)]}})}),function(e){return v.apply(this,arguments)})))];case 5:return f=g.sent(),Object.assign(h=Error(),{name:e.name,stack:[p].concat((0,a._)(f)).join("\n"),message:e.message},e),[2,h]}})})).apply(this,arguments)}var F=function(e){var n=e.bsod,t=(0,i._)((0,c.useState)(null),2),o=t[0],a=t[1];(0,c.useEffect)(function(){(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,function(e){return I.apply(this,arguments)}(n.error)];case 1:return a(e.sent()),[3,3];case 2:return e.sent(),[2];case 3:return[2]}})})()},[n.error]);var u=(0,c.useMemo)(function(){var e,t,r,i;return o?null!==(r=null===(t=o.stack)||void 0===t?void 0:t.split("\n"))&&void 0!==r?r:[]:null!==(i=null===(e=n.error.stack)||void 0===e?void 0:e.split("\n"))&&void 0!==i?i:[]},[o,n.error.stack]);return(0,s.Y)("div",{css:D.errorStack,children:(0,s.Y)(k.T,{spacing:1,children:(0,s.FD)("div",{css:D.errorStackContent,children:[(0,s.FD)("div",{children:["Origin: ",n.origin]}),null==u?void 0:u.map(function(e,n){var t=e.replace("webpack-internal:///./",""),r=t.includes("node_modules");return(0,s.Y)("div",{css:r&&b.wp.color.foregroundDimmest,children:t},n)})]})})})};let T=function(){var e,n,t,r=(0,i._)((0,v.eY)(),1)[0],o=(e=(0,u._)({},m,{skip:!r}),f.I(g,e)),a=o.data,l=o.loading;if((0,v.ZM)(),!r)return null;var c=(null==a?void 0:null===(n=a.currentUser)||void 0===n?void 0:n.isStaff)||(null==a?void 0:null===(t=a.currentUser)||void 0===t?void 0:t.isAdmin);return(0,s.FD)(A.a,{isOpen:!0,preventClose:!0,onRequestClose:function(){},maxWidth:872,children:[(0,s.FD)(k.T,{spacing:2,align:"center",children:[(0,s.Y)(x.A,{level:2,children:" Your app is having a bit of trouble."}),(0,s.Y)("div",{className:"spacer"}),(0,s.Y)(C.EY,{variant:"text",multiline:!0,children:"The issue has been logged and the Replit team will look into it. Try reloading the page to get back to coding."}),(0,s.Y)("div",{css:[b.wp.p(16),b.wp.width("100%"),b.wp.backgroundColor.backgroundHigher,b.wp.borderRadius(8)],children:(0,s.FD)(k.T,{spacing:1,children:[!l&&(null==a?void 0:a.currentUser)?(0,s.FD)(k.z,{spacing:2,align:"center",children:[(0,s.Y)(S.e,{src:a.currentUser.image,username:a.currentUser.username,size:48}),(0,s.Y)(C.EY,{variant:"text",multiline:!1,children:a.currentUser.username})]}):null,(0,s.FD)("div",{css:D.error,children:["Error: ",r.eventId]})]})}),c?(0,s.Y)(F,{bsod:r}):null,(0,s.Y)("div",{className:"spacer"}),(0,s.Y)(Y.$n,{onClick:function(){return window.location.reload()},colorway:"primary",stretch:!0,text:"reload"}),!1]}),(0,s.Y)(w.mL,{styles:[_]})]})}},9073:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(21462);let i=function(e,n,t){(0,r.useEffect)(function(){var n=setTimeout(e,t);return function(){clearTimeout(n)}},n)}},9246:(e,n,t)=>{"use strict";t.d(n,{F:()=>r,X:()=>i});var r=function(e){return e.Welcome="Welcome",e.Forks="Forks",e.ProjectPane="ProjectPane",e}({}),i={id:"workspace-repo-projects-tour",steps:[{title:"Welcome to your Project",id:"Welcome",content:"Click here to see all forks inside this Project and navigate between them.",hideOverlay:!0},{title:"Project Forks",id:"Forks",content:"Move to a different Repl within this Project, or create a new one",hideTooltip:!0,hideOverlay:!0},{title:"Project Pane",id:"ProjectPane",content:"View your changes, and merge them back into the main Repl when you're ready.",hideOverlay:!0}]}},9358:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(1889),i=t(67668),o=t(93682),a=t(40043),l=t(35869),s=t(24205);function c(e){var n,t=e.paths,c=e.onCancel,u=e.onConfirm;return(0,r.FD)(l.S,{gap:24,children:[(0,r.Y)(a.Y9,{level:1,variant:"headerDefault",children:t.length>1?"Overwrite files?":"Overwrite file?"}),(0,r.FD)(a.EY,{children:[(n=(n=t).map(i.WP)).length<2?n[0]:"".concat(n.slice(0,-1).join(", ")," and ").concat(n.slice(-1))," already"," ",t.length>1?"exist":"exists"," in the destination, are you sure you want to overwrite ",t.length>1?"them":"it","? This cannot be undone."]}),(0,r.FD)(l.S,{row:!0,gap:12,justify:"end",children:[(0,r.Y)(o.$n,{onClick:function(){return c()},text:"Cancel"}),(0,r.Y)(o.$n,{colorway:"negative",onClick:function(){return u()},text:"Yes, overwrite ".concat(t.length>1?"these files":"this file"),iconLeft:(0,r.Y)(s.A,{})})]})]})}},9406:(e,n,t)=>{"use strict";t.d(n,{A:()=>a,y:()=>o});var r=t(29935),i=t(82643);function o(e){return null==e?void 0:e.replace(/^pkgs\./,"")}let a={name:"nix",getInstalledPackages:function(e){var n=e.services.nixService;return(0,r._)(function(){var e;return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,n.listPackages()];case 1:if(null!==(e=t.sent()).error)return[2,[]];return[2,e.packages.filter(function(e){return!!e.name}).map(function(e){return{name:e.name,version:e.version}})]}})})()},getPackageInfo:function(e){var n=e.name,t=e.services.nixService;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,t.packageInfo(n)];case 1:if(null!==(e=r.sent()).error)return[2,{}];return[2,e.package]}})})()},search:function(e){var n=e.query,t=e.services.nixService,o=e.nixOpts;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,t.searchPackages(n,o)];case 1:if(null!==(e=r.sent()).error)throw Error("Could not search Nix packages");return[2,e.packages.map(function(e){var n,t;return{name:e.name,version:e.version,description:e.description,homepageURL:null!==(n=e.homepageURL[0])&&void 0!==n?n:null,license:null!==(t=e.licenses[0])&&void 0!==t?t:null}})]}})})()},install:function(e){var n=e.pkgs,t=e.services.nixService;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return e=n.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,t.addPackages(e)];case 1:return r.sent(),[2]}})})()},uninstall:function(e){var n=e.pkgs,t=e.services.nixService;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return e=n.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,t.removePackages(e)];case 1:return r.sent(),[2]}})})()}}},9469:(e,n,t)=>{"use strict";t.d(n,{A:()=>p,r:()=>m});var r=t(12694),i=t(1889),o=t(21462),a=t(6680),l=t(43974),s=t(93682),c=t(54258),u=t(13240),d=t(26020);function p(e){var n=(0,r._)((0,o.useState)(!1),2),t=n[0],a=n[1],l=[],d=[];if(e.variables.length>0){var p=e.variables[0].parentVariableReference,f=!0,h=!1,g=void 0;try{for(var v,w=e.variables[Symbol.iterator]();!(f=(v=w.next()).done);f=!0){var y=v.value;y.parentVariableReference===p?l.push(y):d.push(y)}}catch(e){h=!0,g=e}finally{try{f||null==w.return||w.return()}finally{if(h)throw g}}}return(0,i.FD)(i.FK,{children:[(0,i.Y)(c.A,{truncate:!0,level:5,children:"Variables"}),(0,i.FD)(u.T,{align:"stretch",constrainWidth:!0,children:[l.map(function(n){return(0,i.Y)(m,{depth:0,variable:n,client:e.client},n.parentVariableReference+"/"+n.name)}),d.length>0&&(0,i.FD)(i.FK,{children:[(0,i.Y)(s.$n,{variant:"nofill",onClick:function(){return a(function(e){return!e})},text:"See ".concat(t?"Less":"More")}),t&&d.map(function(n){return(0,i.Y)(m,{depth:0,variable:n,client:e.client},n.parentVariableReference+"/"+n.name)})]})]})]})}function f(e){var n=e.variable,t=e.expanded;return n.variablesReference>0?(0,i.Y)("div",{css:[l.wp.transition.snappy,{transform:"rotate(".concat(t?0:-90,"deg)")}],children:(0,i.Y)(d.A,{})}):null}function h(e){var n=e.expanded,t=e.depth,r=e.variable;return 0!==t||"parentVariableReference"in r?(0,i.Y)("div",{css:[l.wp.flex.grow(0),l.wp.flex.shrink(0),l.wp.width(a.LU.space16),l.wp.display.flex,l.wp.align.center,l.wp.justify.end],children:(0,i.Y)(f,{expanded:n,variable:r})}):(0,i.Y)(f,{expanded:n,variable:r})}function m(e){var n=e.depth,t=e.variable,l=e.client,s=(0,r._)((0,o.useState)(!1),2),c=s[0],d=s[1],p=(0,r._)((0,o.useState)([]),2),f=p[0],g=p[1];return(0,o.useEffect)(function(){c&&l.fetchVariables(t.variablesReference).then(function(e){return g(e)},function(){return d(!1)})},[c,l,t.variablesReference]),(0,i.FD)(i.FK,{children:[(0,i.FD)("div",{className:"variable",onClick:function(){t.variablesReference>0&&d(function(e){return!e})},css:{"&":{display:"flex",alignItems:"center",maxWidth:"100%",height:a.LU.space32,minHeight:a.LU.space32,cursor:"pointer",color:a.LU.foregroundDimmer,borderRadius:a.LU.borderRadius4,fontSize:a.LU.fontSizeDefault,paddingLeft:"calc(".concat(n," * ").concat(a.LU.space16,")"),fontFamily:a.LU.fontFamilyCode},"&:hover":{backgroundColor:a.LU.backgroundHigher,color:a.LU.foregroundDefault},".label":{fontSize:a.LU.fontSizeDefault,paddingLeft:a.LU.space8,paddingRight:a.LU.space8,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:"1 0 auto"},".type":{opacity:"0.5"},".value":{textAlign:"right",flexShrink:1}},children:[(0,i.Y)(h,{expanded:c,variable:t,depth:n}),(0,i.FD)("div",{className:"label",children:[t.name,t.type?(0,i.FD)("span",{className:"type",children:[" ",t.type]}):null,""!==t.value&&": "]}),(0,i.Y)("div",{className:"label value",children:(0,i.Y)("pre",{children:t.value})})]}),c?(0,i.Y)(u.T,{align:"stretch",constrainWidth:!0,children:f.map(function(e){return(0,i.Y)(m,{depth:n+1,variable:e,client:l},"parentVariableReference"in e?e.parentVariableReference+"/"+e.name:e.name)})}):null]})}},9487:(e,n,t)=>{"use strict";t.d(n,{l:()=>p});var r=t(1889),i=t(6680),o=t(61234),a=t(43974),l=t(2527),s=t(40043),c=t(35869),u=t(70761),d=(0,o.x)({targetedElementWrapper:[a.wp.mt(8),a.wp.width("100%"),a.wp.flex.row,a.wp.align.center,a.wp.justify.end],targetedElement:[a.wp.p(4),a.wp.borderRadius(),a.wp.colorMixBg(i.LU.accentPrimaryStronger,"transparent",.2)]});function p(e){var n=e.targetedElement;return n.componentName?(0,r.Y)(c.S,{css:d.targetedElementWrapper,children:(0,r.FD)(l.ui,{css:d.targetedElement,row:!0,align:"center",gap:4,children:[(0,r.Y)(u.A,{size:16}),(0,r.Y)(s.EY,{variant:"small",children:n.componentName})]})}):null}},9816:(e,n,t)=>{"use strict";t.d(n,{I:()=>r});var r=function(e){return null!=e.connectionString&&null!=e.databaseId&&null!=e.databaseName&&null!=e.projectId}},9853:(e,n,t)=>{"use strict";t.d(n,{Y:()=>p});var r=t(1889),i=t(34951),o=t(61234),a=t(43974),l=t(3910),s=t(19706),c=t(32633),u=t(65558),d=(0,o.x)({bannerButton:{span:[a.wp.textAlign.left]}});function p(e){var n=e.deployability,t=e.isRedeploy,o=n.deploy,a=n.redeploy,p=t?a:o;return p.isAuthorized?null:p.code===i.S4.RequiresActiveTeamsSubscription?(0,r.Y)(s.d,{href:"/teams/new",target:"_blank",text:"".concat(p.message," Click here to get started by creating a new organization."),colorway:"warning",iconLeft:(0,r.Y)(c.A,{}),iconRight:(0,r.Y)(u.A,{}),css:d.bannerButton}):(0,r.Y)(l.N,{text:p.message,colorway:"warning",icon:(0,r.Y)(c.A,{})})}},10073:(e,n,t)=>{"use strict";t.d(n,{D:()=>b,V:()=>y});var r=t(1889),i=t(26496),o=t(68209),a=t(67668),l=t(29787),s=t(34145),c=t(69098),u=t(4792),d=t(662),p=t(2527),f=t(40043),h=t(35869),m=t(81879),g=t(45492),v=t.n(g);function w(e){if(!e)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="startRapidBuildEventContents")return null;var t=n.startRapidBuildEventContents,r=t.mvpObjective,i=t.followupSteps,o=t.stack,l=t.uploadedFiles;return{mvpObjective:r,stack:o,followupSteps:i.length?i:null,attachments:l.map(function(e){var n;return{url:e.downloadUrl,mimeType:null!==(n=(0,a.P7)(e.fileName))&&void 0!==n?n:"",name:e.fileName}})}}function y(e){var n=(0,l.U)(),t=(0,i.Al)(e.eventId,w),a=(0,i.NC)(),c=(0,o.J2)(a.sessions.lobby);return n&&t?(0,r.FD)(r.FK,{children:[c?(0,r.Y)(s.qo,{session:c}):null,(0,r.Y)(h.S,{clsx:v().startRapidBuild,children:(0,r.Y)(b,{followupSteps:t.followupSteps,mvpObjective:t.mvpObjective,stack:t.stack,attachments:t.attachments})})]}):null}function b(e){var n,t=u.Z.find(function(n){return n.value===e.stack});return(0,r.FD)(p.ui,{elevated:!0,clsx:v().root,gap:16,children:[(0,r.FD)(h.S,{gap:8,children:[(0,r.FD)(h.S,{row:!0,gap:6,align:"center",children:[(0,r.Y)(m.A,{}),(0,r.Y)(f.EY,{variant:"subheadDefault",children:"Proposed App"})]}),(0,r.Y)(f.EY,{children:e.mvpObjective})]}),t?(0,r.FD)(h.S,{gap:8,children:[(0,r.Y)(f.EY,{variant:"small",color:"dimmer",children:"App type"}),(0,r.FD)(p.ui,{elevated:!0,clsx:v().stackSurface,children:[(0,r.FD)(h.S,{row:!0,gap:6,align:"center",children:[(0,r.Y)(c.m1,{stack:t.value}),(0,r.Y)(f.EY,{children:t.title})]}),(0,r.Y)(f.EY,{variant:"small",color:"dimmer",children:t.description})]})]}):null,e.attachments&&(null===(n=e.attachments)||void 0===n?void 0:n.length)>0?(0,r.Y)(c.Tr,{files:e.attachments}):null,e.followupSteps?(0,r.Y)(d.k,{features:e.followupSteps.map(function(e){return"- "+e}).join("\n")}):null]})}},10154:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(21462),i=t(40208);function o(){(0,r.useEffect)(function(){var e=null;return function n(){if(window.performance.memory){var t=window.performance.memory,r=t.jsHeapSizeLimit,o=t.totalJSHeapSize,a=t.usedJSHeapSize,l=window.performance.now();i.vF.info("perf:browser_memory",{jsHeapSizeLimit:r,totalJSHeapSize:o,usedJSHeapSize:a,timeElapsed:l}),e=setTimeout(n,-(3e5*Math.log(Math.random())))}}(),function(){e&&clearTimeout(e)}},[])}},10173:(e,n,t)=>{"use strict";t.d(n,{SS:()=>v});var r=t(17844),i=t(93629),o=t(1889),a=t(21462),l=t(39695),s=t(80865),c=t(6680),u=t(47258),d=t(43974),p=t(2527),f=t(40043),h=t(35869),m=t(49115),g=t(60274),v={AddFile:{type:"AddFile",text:"Add file"},AddFolder:{type:"AddFolder",text:"Add folder"},UploadFile:{type:"UploadFile",text:"Upload files"},UploadFolder:{type:"UploadFolder",text:"Upload folder"},DownloadZip:{type:"DownloadZip",text:"Download as zip"},Duplicate:{type:"Duplicate",text:"Duplicate file"},ShowHiddenFiles:{type:"ShowHiddenFiles",text:"Show hidden files"},HideHiddenFiles:{type:"HideHiddenFiles",text:"Hide hidden files"},OpenTab:{type:"OpenTab",text:"Open tab"},OpenPane:{type:"OpenPane",text:"Open pane"},CopyFilePath:{type:"CopyFilePath",text:"Copy file path"},CopyFolderPath:{type:"CopyFolderPath",text:"Copy folder path"},CopyLink:{type:"CopyLink",text:"Copy link"},OpenShellHere:{type:"OpenShellHere",text:"Open shell here"},Rename:{type:"Rename",text:"Rename"},Download:{type:"Download",text:"Download"},Delete:{type:"Delete",text:"Delete"}},w={self:[d.wp.position.relative,d.wp.width(20),d.wp.height("100%"),d.wp.justify.center,{"& span":{height:"100%"}}],self2:[d.wp.position.relative,d.wp.width(16),d.wp.height("100%"),d.wp.justify.center,d.wp.pr(1)],button:[d.wp.display.flex,d.wp.align.center,d.wp.justify.center,d.wp.py(2),d.wp.top(0),d.wp.width("100%"),d.wp.border({width:0,color:"none"}),d.wp.cursor.pointer,d.wp.color.foregroundDimmest,d.wp.borderRadius(4),u.b.filled,d.wp.position.relative,{top:-1,right:-1,height:"calc(100% + 2px)",backgroundColor:"transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}],button2:[d.wp.display.flex,d.wp.align.center,d.wp.py(2),d.wp.width("100%"),d.wp.height("100%"),d.wp.cursor.pointer,d.wp.color.foregroundDimmest,d.wp.focusRing,d.wp.borderRadius(4),{backgroundColor:"transparent",":hover":{color:c.LU.foregroundDefault}}],list:[d.wp.flex.column,d.wp.justify.center,d.wp.borderRadius(8),d.wp.zIndex(1),d.wp.backgroundColor.backgroundDefault,{listStyle:"none"},{":focus":{outline:"none"}}],option:function(e,n){return[d.wp.color.foregroundDefault,d.wp.p(8),d.wp.fontWeight.normal,d.wp.cursor.pointer,{whiteSpace:"nowrap"},n&&[d.wp.backgroundColor.backgroundHigher],e&&[{":hover":{backgroundColor:c.LU.accentNegativeDefault},":hover .option-label":{color:c.LU.white}}]]},optionLabel:function(e){return e?[d.wp.color.accentNegativeStronger]:[]}};function y(e){var n=e.isNegative,t=e.isHighlighted,r=e.children;return(0,o.Y)(h.S,{css:w.option(n,t),children:(0,o.Y)(f.EY,{className:"option-label",css:w.optionLabel(n),multiline:!1,children:r})})}var b=h.D.ul,S=h.D.li,Y=h.D.button,A=h.D.div;(0,a.forwardRef)(function(e,n){var t=e.isActive,u=e.actions,C=e.onAction,x=e.onOpenChange,k=(0,a.useRef)(!1),_=(0,l.WM)({items:u,onSelectedItemChange:function(e){var n=e.selectedItem;n&&(k.current||C(n),P())}}),D=_.isOpen,E=_.getToggleButtonProps,R=_.getMenuProps,I=_.highlightedIndex,F=_.getItemProps,T=_.openMenu,P=_.reset;(0,a.useImperativeHandle)(n,function(){return{open:T}}),(0,a.useEffect)(function(){x&&x(D)},[D,x]);var L=E(),U=(0,s._P)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1});return(0,o.Y)(h.S,{css:U?w.self2:w.self,children:(0,o.FD)(m.A,{elevated:!0,showArrow:!0,isOpen:D,placement:"right-start",padding:0,onClickOutside:P,children:[(0,o.Y)(p.ui,{background:t?"default":"root",css:[d.wp.height("100%"),{background:t?c.LU.backgroundHigher:"transparent",borderTopRightRadius:8,borderBottomRightRadius:8}],children:(0,o.Y)(Y,(0,i._)((0,r._)({},L),{css:U?w.button2:w.button,size:20,onClick:function(e){e.stopPropagation(),L.onClick(e)},children:(0,o.Y)(g.A,{})}))}),(0,o.Y)(A,(0,i._)((0,r._)({},R({},{suppressRefError:!0})),{children:D?(0,o.Y)(b,{css:w.list,children:u.map(function(e,n){return(0,o.Y)(S,(0,i._)((0,r._)({"data-cy":"filetree-node-action-".concat(e.type)},F({item:e,index:n,onClick:function(n){k.current=!0,setTimeout(function(){k.current=!1}),C(e),n.stopPropagation()}})),{children:(0,o.Y)(y,{isHighlighted:I===n,isNegative:e.type===v.Delete.type,children:(0,o.FD)(h.S,{row:!0,gap:8,align:"center",children:[(0,o.Y)(f.EY,{multiline:!1,children:e.text}),"icon"in e?e.icon:null]})})}),e.text)})}):null}))]})})}).displayName="NodeActionsMenu"},10251:e=>{e.exports={root:"StatusBar_root__eefWa",bar:"StatusBar_bar__EDR_4",text:"StatusBar_text__zHrxo"}},10688:(e,n,t)=>{"use strict";t.d(n,{A:()=>m});var r=t(1889),i=t(17844),o=t(12584),a=t(41114),l=t(86997);function s(){var e=(0,o._)(["\n  query GetIsOptedIntoAgentV2EarlyAccess {\n    currentUser {\n      id\n      isExplorer: hasRole(role: EXPLORER)\n    }\n  }\n"]);return s=function(){return e},e}var c={},u=(0,a.J1)(s()),d=t(80865),p=t(96842),f=t(18063),h=t(37407);function m(e){var n,t,o=e.small,a=(0,d._P)({controlName:"flag-agent-v2-web-ui"}),s=(n=(0,i._)({},c,void 0),l.I(u,n)).data,m=null==s?void 0:null===(t=s.currentUser)||void 0===t?void 0:t.isExplorer,g=(0,p.F)();return a&&m&&!g?(0,r.Y)(h.m_,{tooltip:"Agent v2 is enabled for explorers. It can be disabled from Account > Roles.",children:(0,r.Y)(f.a,{text:o?"v2":"v2 early access",colorway:"blue",compact:!0})}):null}},10825:(e,n,t)=>{"use strict";t.d(n,{U:()=>O,O:()=>U});var r=t(83846),i=t(17844),o=t(93629),a=t(12694),l=t(86105),s=t(1889),c=t(21462),u=t(18879),d=t(28504),p=t(93501),f=t(155),h=t(43565),m=t(49937),g=t(6680),v=t(43974),w=t(35899),y=t(53723),b=t(67197),S=t(26705),Y=t(31618),A=t(7146),C=t(40043),x=t(35869),k=t(42795),_=t(6761),D=t(28365),E=t(13307),R=t(74130),I=t(24705),F=t(84296);function T(e){return(0,s.Y)(F.Ay,(0,o._)((0,i._)({},e),{children:(0,s.Y)("path",{fillRule:"evenodd",d:"M1.25 6A.75.75 0 0 1 2 5.25h20a.75.75 0 0 1 0 1.5H2A.75.75 0 0 1 1.25 6Zm0 6a.75.75 0 0 1 .75-.75h20a.75.75 0 0 1 0 1.5H2a.75.75 0 0 1-.75-.75Zm0 6a.75.75 0 0 1 .75-.75h20a.75.75 0 0 1 0 1.5H2a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}var P=t(20627),L=t(56185),U=function(e){var n,t,u,g,k,_,D=e.isHidden,E=(t=(n=(0,a._)((0,c.useState)(null),2))[0],u=n[1],g=(0,m.rM)(),(0,c.useEffect)(function(){g!==t&&null!=g&&u(g)},[g,t]),t),F=(0,p.A)(E||""),T=(0,a._)((0,c.useState)(null===(k=F[0])||void 0===k?void 0:k.clientId),2),P=T[0],L=T[1];P&&!F.find(function(e){return P===e.clientId})&&L(null===(_=F[0])||void 0===_?void 0:_.clientId),!P&&F.length&&L(F[0].clientId);var U=(0,w.c)(),O=(0,a._)((0,f.A)(!0),2),B=O[0],H=O[1],z=(0,a._)((0,c.useState)(""),2),W=z[0],G=z[1],V=(0,a._)((0,c.useState)(function(){return{}}),2),j=V[0],Z=V[1],q=(0,a._)((0,f.A)(!0),2),K=q[0],$=q[1],J=(0,a._)((0,f.A)(!0),2),Q=J[0],X=J[1],ee=(0,c.useCallback)(function(e,n){Z(function(t){var a;return(0,o._)((0,i._)({},t),(0,r._)({},e,[n].concat((0,l._)(null!==(a=t[e])&&void 0!==a?a:[])).slice(0,100)))})},[]),en=(0,c.useCallback)(function(e,n,t){Z(function(r){if(r[e]){for(var o=0;o<r[e].length;o++)if(r[e][o].id===n){r[e][o]=t(r[e][o]);break}r[e]=r[e].slice(0,100)}return(0,i._)({},r)})},[]),et=(0,c.useCallback)(function(){P&&Z(function(e){return(0,o._)((0,i._)({},e),(0,r._)({},P,[]))})},[P]),er=(0,c.useMemo)(function(){return F.find(function(e){return e.clientId===P})},[F,P]),ei=null==er?void 0:er.isOpen(E||""),eo=(0,c.useCallback)(function(){var e=null==er?void 0:er.clientId;e&&ee(e,{canceled:!1,notification:{method:"probe",params:{filePath:E,state:null==er?void 0:er.getServerState(),capabilities:null==er?void 0:er.getServerCapabilities(),diagnostics:ei?null==er?void 0:er.getDiagnostics(E||""):[],isOpen:ei,isSupportedFile:null==er?void 0:er.isSupportedFile(E||"")}},requestTime:new Date,type:"probe"})},[ee,E,er,ei]),ea=(0,c.useMemo)(function(){if(!P)return[];var e,n,t=W.split(",").map(function(e){return e.trim()}).filter(Boolean);if(!t.length)return null!==(e=j[P])&&void 0!==e?e:[];var r=null!==(n=j[P])&&void 0!==n?n:[];return K||(r=r.filter(function(e){return null==e.notification})),Q||(r=r.filter(function(e){return null==e.request})),W&&(r=r.filter(function(e){return t.some(function(n){var t;return null===(t=e.request||e.notification)||void 0===t?void 0:t.method.toLowerCase().includes(n.toLowerCase())})})),r},[W,j,P,K,Q]);return((0,c.useEffect)(function(){return(0,d.xW)(F.flatMap(function(e){return[e.onRequest(function(n){B&&ee(e.clientId,{id:n.id,canceled:!1,request:n.data,requestTime:new Date})}),e.onResponse(function(n){B&&en(e.clientId,n.id,function(e){return(0,i._)((0,o._)((0,i._)({},e),{responseTime:new Date}),void 0!==n.result?{response:n.result}:{error:n.error})})}),e.onCancelRequest(function(n){B&&en(e.clientId,n,function(e){return(0,o._)((0,i._)({},e),{canceled:!0})})}),e.onDiagnostics(function(n){var t=n.path,r=n.diagnostics;B&&ee(e.clientId,{canceled:!1,notification:{method:"textDocument/publishDiagnostics for "+t,params:r},requestTime:new Date,type:"diagnostics"})}),e.onServerStateChange(function(n){B&&ee(e.clientId,{canceled:!1,notification:{method:"state",params:{serverState:n}},requestTime:new Date,type:"state"})}),e.onServerCapabilitiesChange(function(n){B&&ee(e.clientId,{canceled:!1,notification:{method:"capabilities",params:{serverCapabilities:n}},requestTime:new Date,type:"capabilities"})}),e.onSendNotification(function(n){B&&ee(e.clientId,{canceled:!1,notification:n,requestTime:new Date})}),e.onReceiveNotification(function(n){B&&ee(e.clientId,{canceled:!1,notification:n,requestTime:new Date})})]}))},[ee,en,B,F]),D)?null:(0,s.FD)(x.S,{css:[v.wp.flex.column],children:[(0,s.FD)(x.S,{css:[v.wp.m(4),v.wp.position.sticky,v.wp.top(0),v.wp.backgroundColor.backgroundDefault,v.wp.zIndex(1)],row:!0,align:"center",children:[(0,s.Y)(C.EY,{multiline:!1,children:P?(0,s.FD)(s.FK,{children:[(0,s.Y)(M,{})," logs for ",(0,s.Y)("code",{children:E})]}):"No LSP client available"}),(0,s.Y)(S.K0,{alt:"Probe LSP",onClick:eo,children:(0,s.Y)(R.A,{})}),(0,s.Y)(x.S,{css:v.wp.flex.grow(1)}),(0,s.Y)(A.d,{"aria-label":"Enable LSP Logs",isSelected:B,onChange:H})]}),(0,s.Y)(x.S,{children:(0,s.Y)(y.e2,{name:"Visible LSP Client",value:P,onChange:L,row:!0,children:F.map(function(e){return(0,s.Y)(y.$O,{id:e.clientId,text:e.clientName,value:e.clientId},e.clientId)})})}),(0,s.FD)(x.S,{row:!0,gap:8,css:[v.wp.m(4),v.wp.mb(8)],children:[(0,s.FD)(x.S,{row:!0,gap:4,children:[(0,s.Y)(I.A,{}),(0,s.Y)(C.EY,{multiline:!1,children:"Show"})]}),(0,s.FD)(x.S,{row:!0,gap:4,children:[(0,s.Y)(b.S,{name:"showNotifications",id:U("showNotifications"),checked:K,onChange:$}),(0,s.Y)("label",{htmlFor:U("showNotifications"),children:" Notifications"})]}),(0,s.FD)(x.S,{row:!0,gap:4,children:[(0,s.Y)(b.S,{name:"showRequests",id:U("showRequests"),checked:Q,onChange:X}),(0,s.Y)("label",{htmlFor:U("showRequests"),children:" Requests"})]}),(0,s.Y)(x.S,{css:v.wp.flex.growAndShrink(1)}),(0,s.Y)(x.S,{row:!0,gap:4,children:(0,s.Y)(h.D,{onClick:et})})]}),(0,s.Y)(x.S,{row:!0,gap:4,children:(0,s.Y)(Y.pd,{id:U("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return G(e.target.value)},value:W})}),(0,s.FD)(x.S,{css:[v.wp.flex.grow(1),v.wp.flex.column,v.wp.overflow("auto")],children:[ea.map(function(e,n){var t;return(0,s.Y)(N,{log:e},null!==(t=e.id)&&void 0!==t?t:e.requestTime.valueOf()+""+n)}),!ea.length&&(0,s.Y)(x.S,{css:v.wp.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},N=(0,c.memo)(function(e){var n,t,r,i,o,l,c=e.log,u=c.requestTime,d=c.responseTime,p=c.request,h=c.response,m=c.notification,g=c.id,w=(0,a._)((0,f.A)(!0),2),y=w[0],b=w[1];return(0,s.FD)(x.S,{css:[v.wp.my(4),v.wp.mx(4)],children:[(0,s.FD)(x.S,{role:"button",onClick:b,onKeyDown:b,tabIndex:0,css:[{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],row:!0,gap:4,children:[(0,s.FD)(x.S,{css:[v.wp.flex.grow(1),v.wp.rowWithGap(2)],children:[(0,s.Y)(C.EY,{className:"lspLog-emoji",multiline:!1,children:(t=(n=c).type,r=n.canceled,i=n.response,o=n.notification,"state"===t?(0,s.Y)(E.A,{}):"diagnostics"===t?(0,s.Y)(k.A,{}):"capabilities"===t?(0,s.Y)(T,{}):"probe"===t?(0,s.Y)(R.A,{}):r?(0,s.Y)(D.A,{}):o?(0,s.Y)(P.A,{}):void 0!==i?(0,s.Y)(_.A,{}):(0,s.Y)(L.A,{}))}),(0,s.FD)(C.EY,{className:"lspLog-requestMethod",multiline:!1,children:[(0,s.Y)("code",{children:null===(l=p||m)||void 0===l?void 0:l.method}),null!=g&&(0,s.FD)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",g]})]})]}),(0,s.Y)(x.S,{css:{opacity:.5},children:null!=d&&(0,s.FD)(C.EY,{css:v.wp.fontSize(13),multiline:!1,children:[d.valueOf()-u.valueOf(),"ms"]})})]}),!y&&(0,s.FD)(s.FK,{children:[void 0!==p&&(0,s.Y)(O,{name:"request.params",src:p.params}),void 0!==m&&(0,s.Y)(O,{name:"notification.params",src:m.params}),void 0!==h&&(0,s.Y)(O,{name:"response",src:h})]})]})}),O=(0,c.memo)(function(e){var n=e.name,t=e.src;return(0,s.Y)(x.S,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,s.Y)(u.A,{json:(0,r._)({},n,t)})})}),M=function(){return(0,s.Y)(C.EY,{multiline:!1,css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(g.LU.redDimmer," 2px 2px")},children:"LSP"})}},10908:(e,n,t)=>{"use strict";t.d(n,{C:()=>p,j:()=>c});var r=t(1889),i=t(34555),o=t(61234),a=t(43974),l=t(40043),s=t(35869),c=function(e){return e.Welcome="Welcome",e.Editor="Editor",e.Examples="Examples",e.Run="Run",e.Output="Output",e.Sidepane="Sidepane",e.Share="Share",e}({}),u=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},d=(0,o.x)({welcome:[a.wp.maxWidth(400)],tooltipContainer:[a.wp.width("100%"),a.wp.center,a.wp.position.relative],textContainer:[a.wp.colWithGap(8),a.wp.width("100%"),a.wp.py(8)]}),p={id:"workspace-desktop-new-user-tour",steps:[{id:"Welcome",isModal:!0,title:"Welcome to the Workspace",content:function(){return(0,r.Y)(s.S,{"data-cy":"workspace-tour-welcome",css:d.welcome,children:(0,r.FD)(l.EY,{children:["The Workspace is where you create projects on Replit. These are called"," ",(0,r.Y)("strong",{children:"Apps."}),(0,r.Y)("br",{}),"Let's explore around!"]})})}},{id:"Editor",title:"Code Editor",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("editor"),autoPlay:!0,loop:!0}),(0,r.Y)(s.S,{css:d.textContainer,children:(0,r.Y)(l.EY,{children:"This is where you write code. The editor helps you by giving you suggestions and coloring your code."})})]})}},{id:"Examples",title:"Examples",content:"Click on one of these examples to insert into your editor",autoSkipIfNoTarget:!0},{id:"Run",title:"Run Button",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("run-button"),autoPlay:!0,loop:!0}),(0,r.Y)(s.S,{css:d.textContainer,children:(0,r.Y)(l.EY,{children:"Tap the Run button to “run” your code and see its output."})})]})},advanceOnTargetClick:!0},{id:"Output",title:"Output",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("output"),autoPlay:!0,loop:!0}),(0,r.Y)(s.S,{css:d.textContainer,children:(0,r.Y)(l.EY,{children:"This is where your run output appears. This can be text, websites, games, and more depending on the template you’re using."})})]})}},{id:"Sidepane",title:"Sidebar",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("sidebar"),autoPlay:!0,loop:!0}),(0,r.FD)(s.S,{css:d.textContainer,children:[(0,r.FD)(l.EY,{children:[(0,r.Y)("strong",{children:"Files"})," is where all of your App’s code is."]}),(0,r.FD)(l.EY,{children:[(0,r.Y)("strong",{children:"Tools"})," is where Packages, Debugger, Chat, Git, and more can be found."]}),(0,r.Y)(l.EY,{children:"You can drag and drop any file or tool. All tools open as tabs instead of opening in the sidebar."})]})]})}},{id:"Share",title:"Invite & Collaborate",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("invite-multiplayer"),autoPlay:!0,loop:!0}),(0,r.Y)(s.S,{css:d.textContainer,children:(0,r.Y)(l.EY,{children:"Invite others to your App to collaborate and work together at the same time."})})]})}}]}},11116:(e,n,t)=>{"use strict";t.d(n,{k:()=>_,T:()=>D});var r=t(17844),i=t(1889),o=t(10274),a=t(93629),l=t(17459),s=t(9907),c=t(80703),u=t(45771),d=t(43974),p=t(18063),f=t(40043),h=(0,u.AH)([d.wp.fontSize(13)]);function m(e){var n=e.name,t=(0,l._)(e,["name"]),o=(0,c.Jn)(n.id),u=(0,s.vm)();if(!o)return null;var d=(0,c.LH)(o,u);return""===d.trim()?null:(0,i.Y)(p.a,(0,a._)((0,r._)({},t),{text:(0,i.Y)(f.EY,{css:h,color:"dimmest",children:d})}))}var g=t(54540),v=t(51895),w=t(49937),y=t(6680),b=t(61234),S=t(35869),Y=t(67929),A=t(24864),C=t(79626),x=t(28023),k=(0,b.x)({root:[d.wp.flex.growAndShrink(1),{paddingInline:A.eQ.inputBarPadding,"&:hover .icon":{backgroundColor:"var(".concat(y.qo.interactiveBackground,")")}}],iconAndIndicator:[d.wp.position.relative],iconContainer:[d.wp.position.relative,A.Ef,{width:A.eQ.iconSize,height:A.eQ.iconSize}],textContent:[d.wp.flex.growAndShrink(1)],aliasContainer:[d.wp.color.foregroundDimmest,d.wp.align.center,d.wp.flex.growAndShrink(1)],descriptionText:[{fontSize:"0.9em"}]});function _(e){var n=e.pane,t=e.active,o=e.labelHighlights,a=(0,v.Vv)(),l=a.Icon({pane:n}),s=a.getTitle(n),c=(0,v.qo)(n,{short:!0}),u=a.getTitlePill(n),d=(0,w.F9)({paneType:n.type}),h=(0,Y.mg)();return(0,i.FD)(S.S,{css:k.root,row:!0,align:"center",gap:A.eQ.inputBarPadding,style:h?{paddingTop:A.eQ.inputBarPadding,paddingBottom:A.eQ.inputBarPadding}:void 0,children:[(0,i.FD)(S.S,{css:k.iconAndIndicator,children:[(0,i.Y)(S.S,{css:k.iconContainer,style:{opacity:e.active?1:.7},children:l}),d?(0,i.Y)(g.b,{color:d}):null]}),(0,i.FD)(S.S,{css:k.textContent,gap:2,children:[(0,i.FD)(S.S,{row:!0,gap:4,justify:"space-between",children:[e.alias?(0,i.FD)(S.S,{row:!0,gap:8,css:k.textContent,children:[(0,i.Y)(f.EY,{children:s}),(0,i.FD)(S.S,{css:k.aliasContainer,row:!0,gap:4,children:["(",e.aliasPrefix?(0,i.FD)(f.EY,{color:"dimmest",children:[e.aliasPrefix," "]}):null,(0,i.Y)(x.e,{dimmed:!0,text:e.alias,highlight:o}),")"]})]}):(0,i.Y)(x.e,{dimmed:!t,text:s,highlight:o}),h&&null!=u?(0,i.Y)(p.a,(0,r._)({},u)):null]}),h&&null!=c?(0,i.Y)(x.e,{dimmed:!t,text:c,highlight:e.descriptionHighlights,multiline:!0,css:k.descriptionText}):null]}),e.shortcutCommand?(0,i.Y)(m,{name:e.shortcutCommand}):null]})}function D(e){var n=e.pane,t=e.aliases,r=void 0===t?[]:t;return function(e){var t=e.searchQuery,a=e.data,l=e.active;if("group"===a.type)return null;if(!t)return{score:1,render:{content:(0,i.Y)(_,{pane:n})}};var s=(0,o.w2)(t,a.label,{filterLowMatchScores:!0}),c=null;if(null!=a.description&&(c=(0,o.w2)(t,a.description,{filterLowMatchScores:!0,fuzzy:!1}))&&(c.score*=C.B.toolDescription),null!=s||null!=c)return{score:null!==(h=null!==(f=null==s?void 0:s.score)&&void 0!==f?f:null==c?void 0:c.score)&&void 0!==h?h:0,render:{content:(0,i.Y)(_,{pane:n,labelHighlights:null!==(m=null==s?void 0:s.ranges)&&void 0!==m?m:[],descriptionHighlights:null!==(g=null==c?void 0:c.ranges)&&void 0!==g?g:[],active:l})}};var u=!0,d=!1,p=void 0;try{for(var f,h,m,g,v,w=r[Symbol.iterator]();!(u=(v=w.next()).done);u=!0){var y=v.value,b="string"==typeof y?{alias:y,prefix:void 0}:y,S=b.alias,Y=b.prefix,A=(0,o.w2)(t,S,{filterLowMatchScores:!0});if(A)return{score:A.score,render:{content:(0,i.Y)(_,{pane:n,active:l,alias:S,aliasPrefix:Y,labelHighlights:A.ranges})}}}}catch(e){d=!0,p=e}finally{try{u||null==w.return||w.return()}finally{if(d)throw p}}return null}}},11465:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(29935),i=t(82643),o=t(67668),a=t(44441),l=/\(copy\)( \d+)?$/,s=/\d+$/;function c(e,n){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e,n){var t,r,c,u,d,p;return(0,i.YH)(this,function(i){switch(i.label){case 0:return t=(0,o._6)(e),[4,n.readDir(0===t.length?a.Dl:t)];case 1:if((r=i.sent()).error)throw r.error;return c=new Set(r.children.map(function(e){return e.filename})),u=function(e,n){var t=(0,o.an)(e),r=(0,o.J)(e);if(!r&&e.startsWith(".")){var i=e.lastIndexOf(".");r=i>0?e.slice(0,i):e}for(var a=l.test(r)?e:"".concat(r," (copy)").concat(t.length>0?".".concat(t):""),c=1;c<=n.size&&n.has(a);c++){var u=(0,o.J)(a),d=u.split(" ");s.test(u)&&d.pop(),a="".concat(d.join(" ")," ").concat(c),t.length>0&&(a+=".".concat(t))}return a}((0,o.WP)(e),c),d=t?"".concat(t,"/").concat(u):u,[4,n.copyFile(e,d)];case 2:if((p=i.sent()).error)throw p.error;return[2,d]}})})).apply(this,arguments)}},11580:(e,n,t)=>{"use strict";t.d(n,{B:()=>nk,a:()=>nE});var r,i=t(29935),o=t(12694),a=t(82643),l=t(1889),s=t(21462),c=t(75152),u=t(24998),d=t(26496),p=t(63892),f=t(96497),h=t(67337),m=t(23718),g=t(83846),v=t(17844),w=t(93629),y=t(86105),b=t(35992),S=t(33105),Y=t(11438),A=t(32039),C=t(90001),x=t(38687),k=t(93415),_=t(10908),D=t(94869),E=t(52690),R=t(14545),I=t(78044),F=t(50683),T=t(83472),P=t(52097),L=t(69543),U=t(83353),N=t(88654),O=t(37407);function M(e){var n,t,r,i,a,c,u=e.startTime,d=e.endTime,p=(t=!d,i=(r=(0,o._)((0,s.useState)(function(){return Date.now()}),2))[0],a=r[1],(0,s.useEffect)(function(){if(t){var e=setInterval(function(){a(Date.now())},100);return function(){clearInterval(e)}}},[t]),i);u&&d?c=d-u:d||(c=p-u);var f=c?(0,l.Y)(O.m_,{tooltip:"".concat(Math.round(c).toLocaleString(),"ms"),children:(n=c)<1e3?"".concat(Math.floor(n),"ms"):n<6e4?"".concat(Math.floor(n/1e3),"s"):"".concat(Math.floor(n/6e4),"m")}):null,h=(0,l.Y)(N.Dc,{live:!0,date:u,textVariant:"small",textColor:"dimmer",textTransform:"first-letter-capitalized"});return(0,l.Y)(l.FK,{children:f?(0,l.FD)(l.FK,{children:[f,B,h]}):h})}var B="\xa0•\xa0",H=t(6680),z=t(61234),W=t(43974),G=t(93682),V=t(26705),j=t(18063),Z=t(40043),q=t(35869),K=t(6761),$=t(54572),J=t(1018),Q=t(38828),X=t(81975),ee=t(49019),en=t(32633);function et(e){return e&&0!==e.length?e[0].toUpperCase()+e.substring(1).toLowerCase():""}var er=(0,z.x)({outputBlockMetadataWrapper:[{containerType:"size"},W.wp.pl(4),W.wp.pr(8),W.wp.rowWithGap(4),W.wp.align.center,W.wp.justify.spaceBetween,W.wp.height(28),W.wp.backgroundColor.backgroundDefault,W.wp.border({direction:"bottom",width:1,style:"solid",color:H.LU.backgroundHigher}),W.wp.position.sticky,W.wp.top(0),W.wp.zIndex(1)],outputBlockMetadataWrapperLeft:[W.wp.flex.shrink(1)],outputBlockMetadataWrapperRight:[],outputMetadataTooltip:[W.wp.pl(4),W.wp.pr(4)],executionPill:[W.wp.flex.shrink(0),W.wp.display.flex,{"@container (max-width: 120px)":[W.wp.display.none]}],lastLineTextWrapper:[W.wp.flex.shrink(1)],lastLineText:[W.wp.display.block,W.wp.maxWidth("100%"),W.wp.overflow("hidden"),W.wp.font.code,W.wp.flex.shrink(1),{textOverflow:"ellipsis",whiteSpace:"nowrap"}],askAIButton:[W.wp.display.flex,W.wp.flex.row,W.wp.align.center,W.wp.m(0),{"@container (max-width: 120px)":[W.wp.display.none]}],aiButtonWithoutPorts:[{"@container (max-width: 320px)":{padding:"0 4px","& > span":[W.wp.display.none]}}],aiButtonWithPorts:[{"@container (max-width: 420px)":{padding:"0 4px","& > span":[W.wp.display.none]}}],dateText:[W.wp.flex.row,W.wp.align.center,W.wp.textAlign.right,W.wp.flex.shrink(1),{marginLeft:"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],dateContainer:[W.wp.overflow("hidden"),W.wp.width(155),W.wp.flex.shrink(0),{"@container (max-width: 480px)":[W.wp.display.none]}],verticalDivider:[W.wp.mx(6),{width:1,height:28,background:H.LU.backgroundHigher}],portInfoDomain:[W.wp.display.flex,W.wp.flex.row,W.wp.align.center,W.wp.m(0),{"@container (max-width: 400px)":W.wp.display.none}],portInfoPorts:[W.wp.display.flex,W.wp.flex.row,W.wp.align.center,W.wp.m(0),{"@container (max-width: 320px)":W.wp.display.none}],portTooltipHeader:[W.wp.color.foregroundDimmer,W.wp.fontWeight.normal,W.wp.px(2),W.wp.pb(2)],portTooltipColumnLeft:[W.wp.textAlign.right],portTooltipColumnMiddle:[W.wp.textAlign.center,W.wp.px(4)],portInfoText:[W.wp.mr(0)]}),ei=[er.askAIButton,er.aiButtonWithoutPorts],eo=[er.askAIButton,er.aiButtonWithPorts],ea=(r={},(0,g._)(r,E._B.DEBUGGER,"debugger"),(0,g._)(r,E._B.PACKAGER,"packager"),(0,g._)(r,E._B.UNIT_TEST,"tests"),(0,g._)(r,E._B.EXECUTION,"run"),(0,g._)(r,E._B.PORT_INFO,"port"),(0,g._)(r,E._B.FORMATTER,"formatter"),(0,g._)(r,E._B.SAVE,"save"),r);function el(e){var n=e.onClick,t=e.showingPorts;return(0,l.FD)(q.S,{css:t?eo:ei,children:[(0,l.Y)(Z.EY,{color:"dimmer",children:(0,l.Y)(G.$n,{size:"small",variant:"underlinedOnHover",iconLeft:(0,l.Y)(ee.A,{}),text:"Ask ".concat(d.BP),onClick:void 0===n?function(){}:n})}),(0,l.Y)(q.S,{css:er.verticalDivider})]})}function es(e){var n=e.openedPorts;return(0,l.Y)(q.S,{children:(0,l.FD)("table",{children:[(0,l.FD)("tr",{children:[(0,l.Y)("th",{css:er.portTooltipHeader,children:"Internal"}),(0,l.Y)("th",{}),(0,l.Y)("th",{css:er.portTooltipHeader,children:"External"})]}),(0,l.Y)("tbody",{children:n.map(function(e){var n=e.configuration,t=!0,r=null;switch(n.type){case U.gH.FORWARDED:t=!0,r=":".concat(n.externalPort);break;case U.gH.INTERNAL_ONLY:t=!1,r=null;break;case U.gH.NO_MORE_EXTERNAL_PORTS_AVAILABLE:case U.gH.MISCONFIGURED:case U.gH.CONFIG_MISSING:t=!0,r=(0,l.Y)(en.A,{})}return(0,l.FD)("tr",{children:[(0,l.FD)("td",{css:er.portTooltipColumnLeft,children:[":",n.localPort]}),(0,l.Y)("td",{css:er.portTooltipColumnMiddle,children:t?"→":null}),(0,l.Y)("td",{children:r})]},n.localPort)})})]})})}function ec(e){var n=e.openPane,t=e.openedPorts,r=void 0!==t&&t.length>0,i=r?"{...}.replit.dev":"",o=(0,s.useMemo)(function(){return r?1===t.length?":".concat(t[0].configuration.localPort):"".concat(t.length," ").concat((0,L.A)("port",t.length)):""},[r,t]),a=(0,s.useCallback)(function(){n({type:"webview",data:{ports:r?{type:"local",port:t[0].configuration.localPort}:void 0}},!0)},[r,n,t]),c=(0,s.useCallback)(function(){n({type:"networking"},!0)},[n]);return r?(0,l.FD)(l.FK,{children:[(0,l.FD)(q.S,{css:er.portInfoDomain,children:[(0,l.Y)(Z.EY,{color:"dimmer",css:er.portInfoText,children:(0,l.Y)(O.m_,{tooltip:"Open Webview",children:(0,l.Y)(G.$n,{size:"small",variant:"underlinedOnHover",text:i,onClick:a})})}),(0,l.Y)(q.S,{css:er.verticalDivider})]}),(0,l.FD)(q.S,{css:er.portInfoPorts,children:[(0,l.Y)(Z.EY,{color:"dimmer",css:er.portInfoText,children:(0,l.Y)(O.m_,{tooltip:(0,l.Y)(es,{openedPorts:t}),children:(0,l.Y)(G.$n,{size:"small",variant:"underlinedOnHover",iconLeft:(0,l.Y)(Q.A,{color:H.LU.accentPositiveStronger}),text:o,onClick:c})})}),(0,l.Y)(q.S,{css:er.verticalDivider})]})]}):null}function eu(e){var n=e.isDone,t=e.error,r=e.finishedTooltipText,i=e.executionPillText,o=e.runningTooltipText,a=e.circleColor,s=void 0===a?H.LU.accentPositiveDefault:a,c=e.startTime,u=e.endTime,d=e.openPane,p=e.isCollapsed,f=e.setIsCollapsed,h=e.lastMeaningfullLine,m=e.openedPorts,g=e.onAiChatClick;return(0,l.FD)(q.S,{css:er.outputBlockMetadataWrapper,onDoubleClick:function(){return f(!p)},children:[(0,l.FD)(q.S,{css:er.outputBlockMetadataWrapperLeft,row:!0,gap:4,align:"center",onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.Y)(V.K0,{alt:p?"Expand":"Collapse",onClick:function(){return f(!p)},children:p?(0,l.Y)(J.A,{}):(0,l.Y)($.A,{})}),(0,l.Y)(j.a,{color:"grey",text:et(i),css:er.executionPill}),(0,l.Y)(q.S,{css:er.lastLineTextWrapper,children:p?(0,l.Y)(Z.EY,{css:er.lastLineText,variant:"small",children:h}):null})]}),(0,l.FD)(q.S,{row:!0,gap:4,align:"center",onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.Y)(el,{showingPorts:!!m&&m.length>0,onClick:g}),(0,l.Y)(ec,{openPane:d,openedPorts:m}),(0,l.FD)(q.S,{css:er.dateContainer,row:!0,justify:"space-between",children:[(0,l.Y)(Z.EY,{color:"dimmer",variant:"small",css:er.dateText,children:(0,l.Y)(M,{startTime:c,endTime:u})}),(0,l.Y)(q.S,{css:er.verticalDivider})]}),(0,l.Y)(q.S,{css:er.outputMetadataTooltip,children:n?(0,l.Y)(O.m_,{tooltip:r,children:void 0!==t?(0,l.Y)(en.A,{}):(0,l.Y)(K.A,{})}):(0,l.Y)(O.m_,{tooltip:void 0===o?"Running...":o,children:(0,l.Y)(X.A,{color:s})})})]})]})}function ed(e){var n,t=e.isCollapsed,r=e.setIsCollapsed,i=e.openPane,o=e.startTime,a=e.endTime,s=e.localStartTime,c=e.localEndTime,u=e.isDone,d=e.data,p=e.error,f=e.openedPorts,h=e.onAiChatClick,m=ef(d.onMessage),g="Finished";return void 0!==p&&(g=void 0!==p?et(p):"Finished with error"),(0,l.Y)(eu,{isDone:u,error:p,finishedTooltipText:g,executionPillText:null!==(n=d.executionMode)&&void 0!==n?n:"unknown",startTime:null!=o?o:s,endTime:u?null!=a?a:c:void 0,lastMeaningfullLine:m,openPane:i,isCollapsed:t,setIsCollapsed:r,openedPorts:f,onAiChatClick:h})}function ep(e){var n=e.isCollapsed,t=e.setIsCollapsed,r=e.openPane,i=e.localStartTime,o=e.localEndTime,a=e.isDone,s=e.type,c=e.error,u=e.data,d=e.onAiChatClick,p=ef(u.onMessage),f=ea[s],h=c?(0,l.FD)(Z.EY,{multiline:!0,children:[et(ea[s])," error",(0,l.Y)("br",{}),c]}):"Finished",m=H.LU.accentPositiveDefault,g="Running...";if(s===E._B.DEBUGGER){var v=u.debugState;m="paused"===v?H.LU.yellowDefault:H.LU.accentPositiveDefault,g="paused"===v?"Paused":"Running..."}return(0,l.Y)(eu,{isCollapsed:n,setIsCollapsed:t,openPane:r,isDone:a,finishedTooltipText:h,executionPillText:f,startTime:i,endTime:a?o:void 0,circleColor:m,runningTooltipText:g,lastMeaningfullLine:p,error:c,onAiChatClick:d})}function ef(e){var n=(0,o._)((0,s.useState)(""),2),t=n[0],r=n[1];return(0,s.useEffect)(function(){return e(function(e){var n,t=null===(n=(0,F.A)(e).split("\n").reverse().find(function(e){return e.trim().length>0}))||void 0===n?void 0:n.trim();t&&r(t)})}),t}function eh(e){var n,t,r=e.isCollapsed,i=e.setIsCollapsed,o=e.openPane,a=e.isDone,c=e.type,u=e.data,d=e.error,p=e.localStartTime,f=e.localEndTime,h=e.startTime,m=e.endTime,g=e.openedPorts,v=e.openAIWithMessage,w=(n=u.onMessage,t=(0,s.useRef)(""),(0,s.useEffect)(function(){return n(function(e){var n=(0,F.A)(e);t.current=(t.current+n).slice(-T.ZJ)})},[n]),t.current),y=function(){w&&(null==v||v((0,T.kq)(w)))};switch(c){case E._B.EXECUTION:return(0,l.Y)(ed,{isCollapsed:r,setIsCollapsed:i,openPane:o,isDone:a,type:c,startTime:h,endTime:m,localStartTime:p,localEndTime:f,data:u,error:d,openedPorts:g,onAiChatClick:y});case E._B.DEBUGGER:case E._B.PACKAGER:case E._B.UNIT_TEST:case E._B.FORMATTER:case E._B.SAVE:return(0,l.Y)(ep,{isCollapsed:r,setIsCollapsed:i,openPane:o,isDone:a,type:c,localStartTime:p,localEndTime:f,data:u,error:d,openedPorts:g,onAiChatClick:y});default:(0,P.A)(c)}}var em=t(25782),eg=t(64039),ev=t(38349),ew=t(74863),ey=t(84185),eb=t(31412),eS=(0,z.x)({emptyStateWrapper:[W.wp.p(8),W.wp.display.block,{lineHeight:"32px"}]}),eY=(0,z.x)({root:[W.wp.p(8),W.wp.colWithGap(8)],header:[W.wp.pt(4),W.wp.pb(8)]});function eA(e){var n,t=e.runner,r=e.openPane,i=(0,o._)((0,s.useState)(function(){return t.getRunState()}),2),a=i[0],c=i[1],u=(0,ev.g3)(),d=!!(null==u?void 0:u.workflowId),f=function(){if(null==u?void 0:u.run){u.run(E.QG.RUN_BUTTON_CLICKED),(0,p.u4)(p.AZ.WORKFLOW_RAN,{source:"console"});return}var e=t.getRunState();(e===E.ll.IDLE||e===E.ll.STOPPING)&&t.run(E.QG.RUN_BUTTON_CLICKED)};return((0,s.useEffect)(function(){var e=t.onStateChanged(function(e){c(e)});return function(){return e()}},[t]),a===E.ll.OFFLINE)?(0,l.Y)(q.S,{css:eS.emptyStateWrapper,children:"The Repl is booting..."}):a===E.ll.RUNNING||a===E.ll.BEFORE_RUN?(0,l.Y)(q.S,{css:eS.emptyStateWrapper,children:"Running..."}):(0,l.FD)(q.S,{css:eY.root,children:[(0,l.Y)(Z.EY,{children:"Results of your code will appear here when you run"}),(0,l.Y)(ew.a,{}),(0,l.FD)(q.S,{css:eY.header,gap:6,align:"start",children:[(0,l.Y)(Z.EY,{variant:"small",color:"dimmer",children:"Default"}),(0,l.Y)(G.$n,{size:"small",text:null!==(n=null==u?void 0:u.workflowId)&&void 0!==n?n:em.Ov,iconLeft:(0,l.Y)(ey.A,{}),colorway:"positive",onClick:function(){(0,p.u4)(p.AZ.RUN_BUTTON_CLICKED,{source:"emptyConsole",runner:d?"workflows":"pid1"}),f()}})]}),(0,l.Y)(ew.a,{}),(0,l.FD)(q.S,{gap:6,children:[(0,l.FD)(q.S,{row:!0,gap:4,align:"center",children:[(0,l.Y)(Z.EY,{variant:"small",color:"dimmer",children:"Workflows"}),(0,l.Y)(V.K0,{alt:"Configure",onClick:function(){r({type:"workflows"})},children:(0,l.Y)(eb.A,{size:12})})]}),(0,l.Y)(eg.O,{})]})]})}var eC=t(80865),ex=t(94668),ek=t(95969),e_=t(17966),eD=t(2197),eE=t(35225),eR=t(47535),eI=t(27549),eF={noScroll:!0},eT=(0,z.x)({terminal:{gridRow:1,gridColumn:1,position:"sticky",top:e_.eQ.topOffset,"& .xterm":[W.wp.py(e_.Ww),W.wp.pl(e_.Ww),W.wp.height("100%"),W.wp.overflow("hidden")],"& .xterm-viewport":[W.wp.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:e_.eQ.topOffset,height:30,margin:"2px 0 0 auto",zIndex:4}});function eP(e){var n=e.onMessage,t=e.onInput,r=e.openAIWithMessage,i=e.openSearchAndReplace,a=e.autoFocus,c=e.maxHeight,u=e.onResizeTerminal,d=e.scrollPosition,p=e.scrollParent,f=e.openPane,h=(0,e_.Ui)({maxHeight:c,openPane:f}),m=h.visibleHeight,g=h.visibleLines,v=h.bufferHeight,w=h.bufferLines,y=h.wrapperResizeRef,b=h.xterm,S=h.xtermRef,Y=h.hasScrollback,A=(0,s.useMemo)(function(){return null==b?void 0:b._term},[b]),C=(0,s.useMemo)(function(){var e,n=null==A?void 0:A._core;return null!==(e=null==n?void 0:n._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[A]),x=(0,o._)((0,s.useState)(!1),2),k=x[0],_=x[1],D=(0,o._)((0,s.useState)(""),2),E=D[0],R=D[1],I=(0,o._)((0,s.useState)(!1),2),F=I[0],P=I[1],L=(0,s.useRef)(null),U=(0,eC._P)({controlName:"flag-output-userevents",logFlagToAnalytics:!1}),N=(0,ek.j)();(0,s.useEffect)(function(){return function(){null!==L.current&&clearTimeout(L.current)}},[L]),(0,s.useEffect)(function(){if(A){if(d<1||!Y){A.scrollToLine(0);return}var e=v-m,n=w-g;if(e<1){A.scrollToLine(0);return}var t=Math.round(d/e*n);A.scrollToLine(t)}},[v,w,Y,d,A,m,g]);var O=(0,s.useCallback)(function(){if(A){var e=A.getSelectionPosition();e&&p(e.start.y*C.height-c/2)}},[A,c,p,C.height]);(0,s.useEffect)(function(){if(U)return n(function(e){return N("repl:run:output",{output:e})})},[n,U,N]);var M=(0,eD.EF)().onContextMenu,B=(0,eE.P)({xterm:b,isOutputsTerminal:!0,openAIWithMessage:r,openShellSearch:function(e){_(!0),R(e)},openSearchAndReplace:i});return(0,eI.Z)({xterm:b,onAskAssistant:function(e){null==r||r((0,T.kq)(e))}}),(0,l.FD)(e_._x,{onInput:t,xterm:b,wrapperResizeRef:y,bufferHeight:v,setOnMessage:n,onResizeTerminal:u,autoFocus:a,style:{pointerEvents:F?"none":"all"},onWheel:function(){P(!0),L.current&&clearTimeout(L.current),L.current=setTimeout(function(){P(!1)},200)},onKeyDown:function(e){"f"===e.key&&(0,ex.T$)(e)&&(_(!0),e.preventDefault())},children:[k?(0,l.Y)(q.S,{css:eT.searchWidget,children:(0,l.Y)(eR.p,{searchValue:E,setSearchValue:R,findPrevious:function(e){(null==b?void 0:b.findPrevious(e,eF))&&O()},findNext:function(e){(null==b?void 0:b.findNext(e,eF))&&O()},exit:function(){return _(!1)}})}):null,(0,l.Y)(e_.DJ,{xtermRef:S,visibleHeight:m,maxHeight:c,css:eT.terminal,onContextMenu:function(e){return M(e,{command:B})}})]})}var eL=t(62493),eU=(0,z.x)({terminalLoadingWrapper:[W.wp.p(8)],terminalLoadingLine:[W.wp.borderRadius(2),eL.S.foregroundPulse(),W.wp.height(16),W.wp.mb(4)]});function eN(e){var n=e.targetHeight,t=Math.min(Math.floor((n-8)/20),4),r=(0,s.useMemo)(function(){return Array.from({length:t}).map(function(e,n){return(0,l.Y)(q.S,{css:eU.terminalLoadingLine,style:{width:100*Math.random()+"%"}},n)})},[t]);return(0,l.Y)(q.S,{css:eU.terminalLoadingWrapper,style:{height:n+"px"},children:(0,l.Y)(q.S,{style:{position:"sticky",top:36},children:r})})}var eO=t(68221);function eM(e){var n=e.visualState,t=e.onSetVisualState,r=e.maxHeight,i=(0,o._)((0,s.useState)(n===E.p$.EXPANDED?0:void 0),2),a=i[0],l=i[1],c=(0,s.useRef)(null),u=(0,o._)((0,s.useState)(n===E.p$.EXPANDED?"expanded":"collapsed"),2),d=u[0],p=u[1],f=(0,o._)((0,s.useState)(n===E.p$.COLLAPSED?0:void 0),2),h=f[0],m=f[1],g=(0,s.useCallback)(function(e){e&&l(e.getBoundingClientRect().height)},[]),v=(0,C.A)(function(e){var n=e.height;"expanded"===d&&l(n)},{type:"debounce",wait:200});(0,s.useEffect)(function(){if(c.current)switch(d){case"start-collapsing":p("is-collapsing");break;case"is-collapsing":m(0);break;case"start-expanding":p("is-expanding");break;case"is-expanding":m(a);break;case"expanded":m(void 0)}},[d,a]);var w="expanded"!==d&&"is-expanding"!==d,y=(0,s.useCallback)(function(e){t(e?E.p$.COLLAPSED:E.p$.EXPANDED)},[t]),b=(0,s.useRef)(n);(0,s.useEffect)(function(){b.current===E.p$.EXPANDED&&n===E.p$.COLLAPSED&&c.current&&(p("start-collapsing"),m(Math.min(c.current.getBoundingClientRect().height,r)),p("start-collapsing")),b.current===E.p$.COLLAPSED&&n===E.p$.EXPANDED&&p("start-expanding"),b.current=n},[r,n]);var S=(0,s.useCallback)(function(){"is-collapsing"===d&&p("collapsed"),"is-expanding"===d&&p("expanded")},[d]),Y=(0,s.useMemo)(function(){return{style:{height:h,transition:"height 120ms ease-out",overflow:"expanded"===d||"start-collapsing"===d?"visible":"hidden"},onTransitionEnd:S}},[h,d,S]);return{collapsedStep:d,isCollapsed:w,setIsCollapsed:y,blockWrapperRef:c,blockWrapperProps:Y,blockResizeRef:(0,s.useMemo)(function(){return(0,eO.P)(v,g)},[v,g]),measuredBlockHeight:a}}var eB=t(26969),eH=t(49905),ez=t(46434),eW=t(40208),eG=t(60990),eV=t(39593),ej=t(49937),eZ=t(17602),eq=t(22498),eK=t(38200),e$=t(42330),eJ=t(19706),eQ=(0,z.x)({button:[W.wp.textAlign.left]});let eX=function(e){var n=e.onClick;return(0,e$.A)()?(0,l.Y)(eJ.d,{text:"Missing required secrets. Click here to add them.",onClick:n,iconRight:(0,l.Y)(eb.A,{}),colorway:"warning",css:eQ.button}):null};var e0=t(13278),e1=t(5445),e2=t(64254).hp,e4=(0,eq.v)(["blockMinHeight","terminalBackgroundColor","previewHeight"]),e5=e4.cssVars,e8=e4.styleTokens,e3=(0,z.x)({outputBlockMetadataWrapper:[{containerType:"size"},W.wp.pl(4),W.wp.pr(8),W.wp.rowWithGap(4),W.wp.align.center,W.wp.justify.spaceBetween,W.wp.height(28),W.wp.backgroundColor.backgroundDefault,W.wp.border({direction:"bottom",width:1,style:"solid",color:H.LU.backgroundHigher}),W.wp.position.sticky,W.wp.top(0),W.wp.zIndex(1)],outputBlockMetadataWrapperLeft:[W.wp.rowWithGap(4),W.wp.align.center],outputBlockMetadataWrapperRight:[W.wp.rowWithGap(4),W.wp.align.center],taskNamePill:[W.wp.maxWidth(100),W.wp.flex.shrink(0),W.wp.display.flex,{"> span":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"@container (max-width: 120px)":[W.wp.display.none],"&:hover":{maxWidth:"none","> span":{overflow:"visible",textOverflow:"clip"}}}],dateText:[W.wp.flex.row,W.wp.align.center,W.wp.textAlign.right,W.wp.flex.shrink(1),{marginLeft:"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],dateContainer:[W.wp.overflow("hidden"),W.wp.width(120),W.wp.flex.shrink(0),{"@container (max-width: 510px)":[W.wp.display.none]}],outputBlockClosingBorder:[W.wp.height(1),W.wp.zIndex(1),W.wp.border({direction:"bottom",width:1,style:"solid",color:H.LU.backgroundHigher}),{marginTop:-1}],outputBlockTerminalWrapper:[W.wp.minHeight(e8.blockMinHeight)],terminal:{gridRow:1,gridColumn:1,position:"sticky",top:e_.eQ.topOffset,"& .xterm":[W.wp.py(e_.Ww),W.wp.pl(e_.Ww),W.wp.height("100%"),W.wp.overflow("hidden")],"& .xterm-viewport":[W.wp.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},errorMessage:[{gridRow:1,gridColumn:1,position:"sticky",top:e_.eQ.topOffset},W.wp.py(e_.Ww),W.wp.pl(e_.Ww),W.wp.height("100%"),W.wp.overflow("hidden")],searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:e_.eQ.topOffset,height:30,margin:"2px 0 0 auto",zIndex:4},avatarWrapper:[W.wp.flex.growAndShrink(0),W.wp.rowWithGap(4),W.wp.align.center],outputMetadataTooltip:[W.wp.pl(4),W.wp.pr(4)],verticalDivider:[W.wp.mx(6),{width:1,height:28,background:H.LU.backgroundHigher}]});function e6(e){var n=e.isDone,t=e.hasError,r=e.errorMessage,i=e.finishedMessage,o=e.stopTask;return n?(0,l.Y)(O.m_,{css:e3.outputMetadataTooltip,tooltip:t?"Error".concat(r?": ".concat(r):""):"Finished".concat(i?": ".concat(i):""),children:t?(0,l.Y)(en.A,{}):(0,l.Y)(K.A,{})}):void 0!==o?(0,l.Y)(V.K0,{alt:"Stop",onClick:o,children:(0,l.Y)(X.A,{color:H.LU.accentPositiveDefault})}):(0,l.Y)(O.m_,{tooltip:"Running...",children:(0,l.Y)(X.A,{color:H.LU.accentPositiveDefault})})}function e7(e){var n=e.isInRecoveryMode,t=e.isCollapsed,r=e.setIsCollapsed,i=e.taskName,o=e.isDone,a=e.hasError,c=e.errorMessage,u=e.startTime,d=e.endTime,p=e.activeUsers,f=e.openPane,h=e.openedPorts,m=e.onAIChatClick,g=e.stopTask,v="packager.installForAll"===i||"packager.installForLanguage"===i,w=(0,s.useCallback)(function(){f({type:"dependencies"})},[f]);return(0,l.FD)(q.S,{css:e3.outputBlockMetadataWrapper,onDoubleClick:function(){return r(!t)},children:[v?(0,l.FD)(q.S,{css:e3.outputBlockMetadataWrapperLeft,children:[(0,l.Y)(V.K0,{alt:"Open Packager",onClick:w,children:(0,l.Y)(e1.A,{})}),(0,l.Y)(j.a,{color:"grey",text:"Packager",css:e3.taskNamePill})]}):(0,l.FD)(q.S,{css:e3.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.Y)(V.K0,{alt:t?"Expand":"Collapse",onClick:function(){return r(!t)},children:t?(0,l.Y)(J.A,{}):(0,l.Y)($.A,{})}),(0,l.Y)(j.a,{color:"grey",text:i,css:e3.taskNamePill})]}),(0,l.FD)(q.S,{css:e3.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.Y)(el,{showingPorts:!!h&&h.length>0,onClick:m}),(0,l.Y)(ec,{openPane:f,openedPorts:h}),(0,l.FD)(q.S,{css:e3.dateContainer,row:!0,justify:"space-between",children:[(0,l.Y)(Z.EY,{color:"dimmer",variant:"small",css:e3.dateText,children:(0,l.Y)(M,{startTime:u,endTime:d})}),(0,l.Y)(q.S,{css:e3.verticalDivider})]}),p.length>0?(0,l.Y)(q.S,{css:e3.avatarWrapper,children:p.map(function(e){return(0,l.Y)(eK.A,{user:e,size:16},e.id)})}):null,(0,l.Y)(e6,{isDone:o,stopTask:g,hasError:a,errorMessage:c}),!0===n?(0,l.Y)(O.m_,{tooltip:"The nix environment failed to build. Check if your .replit and replit.nix files are configured properly. For more information look into /run/replit/env/error.",children:(0,l.Y)(en.A,{color:H.LU.accentNegativeDefault})}):null]})]})}function e9(){}var ne={noScroll:!0};function nn(e){var n,t,r,c,u,d=e.taskIdx,p=e.runId,f=e.currentUserId,h=e.maxHeight,m=e.scrollParent,g=e.scrollPosition,v=e.openPane,w=e.openAIWithMessage,y=(0,e_.Ui)({maxHeight:h,openPane:v}),b=y.visibleHeight,S=y.visibleLines,Y=y.bufferHeight,A=y.bufferLines,C=y.wrapperResizeRef,x=y.hasScrollback,k=y.xterm,_=y.xtermRef,D=(0,s.useMemo)(function(){return null==k?void 0:k._term},[k]),E=(0,s.useMemo)(function(){var e,n=null==D?void 0:D._core;return null!==(e=null==n?void 0:n._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[D]),R=(0,o._)((0,s.useState)(null),2),I=R[0],F=R[1],P=(0,o._)((0,s.useState)(!1),2),L=P[0],U=P[1],N=(0,s.useRef)(null);(0,s.useEffect)(function(){return function(){null!==N.current&&clearTimeout(N.current)}},[N]),(0,s.useEffect)(function(){if(D){if(g<1||!x){D.scrollToLine(0);return}var e=Y-b,n=A-S;if(e<1){D.scrollToLine(0);return}var t=Math.round(g/e*n);D.scrollToLine(t)}},[Y,A,x,g,D,b,S]);var O=(0,o._)((0,s.useState)(null),2),M=O[0],B=O[1];(0,eG.b)((n=(0,i._)(function(e,n){var t,r,i,o,l,s,c,u,h,m,g;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t=n.signal,!k||!I)return[2];i=(r=e.workflows.connectToTask.stream({runId:p,taskIdx:d,userId:f,processViewId:"outputs"},{signal:t})).reqWritable,o=r.resReadable,B({onInput:function(e){if(i.isWritable()){var n=new Uint8Array(e2.from(e));i.write({$kind:"stdin",stdin:n})}},onResizeTerminal:function(e){i.isWritable()&&i.write({$kind:"resize",size:e})},onFocus:function(){i.isWritable()&&i.write({$kind:"focused"})},onBlur:function(){i.isWritable()&&i.write({$kind:"blurred"})}}),i.write({$kind:"resize",size:k.getSize()}),l=!1,s=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),u=(0,ez._)(o),a.label=2;case 2:return[4,u.next()];case 3:if(!(l=!(h=a.sent()).done))return[3,5];if(!(m=h.value).ok){if("UNEXPECTED_DISCONNECT"===m.payload.code||"CANCEL"===m.payload.code||"NO_MATCHING_TASK_STATE"===m.payload.code)return[3,5];if("TASK_ERROR"===m.payload.code)return eW.vF.info("[".concat(m.payload.code,"] ").concat(m.payload.message," in workflow outputs")),[3,4];throw Error("[".concat(m.payload.code,"] ").concat(m.payload.message))}"output"===m.payload.$kind&&I(m.payload.chunk),a.label=4;case 4:return l=!1,[3,2];case 5:return[3,12];case 6:return g=a.sent(),s=!0,c=g,[3,12];case 7:if(a.trys.push([7,,10,11]),!(l&&null!=u.return))return[3,9];return[4,u.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(s)throw c;return[7];case 11:return[7];case 12:return B(null),i.close(),[2]}})}),function(e,t){return n.apply(this,arguments)}),[p,d,I,k,f]);var H=(0,s.useCallback)(function(e){return F(function(){return e}),function(){}},[]),z=(0,o._)((0,s.useState)(!1),2),W=z[0],G=z[1],V=(0,o._)((0,s.useState)(""),2),j=V[0],Z=V[1],K=(0,s.useCallback)(function(e){v({type:"searchReplace",data:{initialQuery:e}},!0)},[v]),$=(0,eD.EF)().onContextMenu,J=(0,eE.P)({xterm:k,isOutputsTerminal:!0,openAIWithMessage:w,openShellSearch:function(e){G(!0),Z(e)},openSearchAndReplace:K});(0,eI.Z)({xterm:k,onAskAssistant:function(e){null==w||w((0,T.kq)(e))}});var Q=(0,s.useCallback)(function(){if(D){var e=D.getSelectionPosition();e&&m(e.start.y*E.height-h/2)}},[D,h,m,E.height]);return(0,l.FD)(e_._x,{xterm:k,wrapperResizeRef:C,bufferHeight:Y,setOnMessage:H,onInput:null!==(t=null==M?void 0:M.onInput)&&void 0!==t?t:e9,onResizeTerminal:null!==(r=null==M?void 0:M.onResizeTerminal)&&void 0!==r?r:e9,onFocus:null!==(c=null==M?void 0:M.onFocus)&&void 0!==c?c:e9,onBlur:null!==(u=null==M?void 0:M.onBlur)&&void 0!==u?u:e9,style:{pointerEvents:L?"none":"all"},onWheel:function(){U(!0),N.current&&clearTimeout(N.current),N.current=setTimeout(function(){U(!1)},200)},onKeyDown:function(e){"f"===e.key&&(0,ex.T$)(e)&&(G(!0),e.preventDefault())},children:[W?(0,l.Y)(q.S,{css:e3.searchWidget,children:(0,l.Y)(eR.p,{searchValue:j,setSearchValue:Z,findPrevious:function(e){(null==k?void 0:k.findPrevious(e,ne))&&Q()},findNext:function(e){(null==k?void 0:k.findNext(e,ne))&&Q()},exit:function(){return G(!1)}})}):null,(0,l.Y)(e_.DJ,{xtermRef:_,visibleHeight:b,maxHeight:h,css:e3.terminal,onContextMenu:function(e){return $(e,{command:J})}})]})}function nt(e){var n,t=e.runId,r=e.taskIdx,i=e.task,o=e.config,a=e.isInRecoveryMode,c=e.isCollapsed,u=e.setIsCollapsed,d=e.openPane,p=e.openedPorts,h=e.onAIChatClick,m="ERROR"===i.state||"FAILED"===i.state,g="ERROR"===i.state||"FAILED"===i.state?null===(n=i.result)||void 0===n?void 0:n.message:void 0,v="RUNNING"!==i.state,w=(0,ej.Q4)(),y=(0,s.useMemo)(function(){return i.userIds.map(function(e){return w.find(function(n){return n.id===e})}).filter(Boolean)},[i,w]),b="shell.exec"===o.task&&"args"in o?(0,em.ZM)(o.args):o.task,S=(0,f.I)(function(e){return function(){e.workflows.stopTask.rpc({runId:t,taskIdx:r})}},[t,r]);return(0,l.Y)(e7,{isCollapsed:c,setIsCollapsed:u,taskName:b,isInRecoveryMode:a,isDone:v,hasError:m,errorMessage:g,startTime:i.startTime,endTime:v?i.endTime:void 0,activeUsers:y,openPane:d,openedPorts:p,stopTask:null!=S?S:void 0,onAIChatClick:h})}function nr(e){var n,t,r,c,u,d=e.task,p=e.taskIdx,h=e.runId,m=e.config,y=e.maxHeight,b=e.rootRef,S=e.currentUser,A=e.ports,k=e.openAIWithMessage,_=e.openPane,R=e.onDoExposePort,I=e.onDontExposePort,P=(0,s.useRef)(null),L=(0,o._)((0,s.useState)(!0),2),U=L[0],N=L[1],O=(0,o._)((0,s.useState)(!1),2),M=O[0],B=O[1],H=(0,o._)((0,s.useState)(0),2),z=H[0],W=H[1],G=(0,eZ.V)(),V=(0,Y.A)(U,M?6e4:500),j=null!==(c=(null===(n=d.metadata)||void 0===n?void 0:n.task)==="shell.exec"&&d.metadata.isInRecoveryMode)&&void 0!==c&&c,Z=(0,D.LO)(A,(null===(t=d.metadata)||void 0===t?void 0:t.task)==="shell.exec"?null===(r=d.metadata)||void 0===r?void 0:r.cgroupPath:void 0),K=(0,o._)((0,s.useState)(E.p$.EXPANDED),2),$=eM({maxHeight:y,visualState:K[0],onSetVisualState:K[1]}),J=$.collapsedStep,Q=$.isCollapsed,X=$.setIsCollapsed,ee=$.blockWrapperRef,en=$.blockWrapperProps,et=$.blockResizeRef,er=$.measuredBlockHeight;(0,s.useEffect)(function(){if(b.current){var e,n=b.current,t=function(){var t,r;W(Math.max(0,n.scrollTop-(null!==(r=null===(t=P.current)||void 0===t?void 0:t.offsetTop)&&void 0!==r?r:0))),B(!0),e&&clearTimeout(e),e=setTimeout(function(){B(!1)},500)};return n.addEventListener("scroll",t),function(){clearInterval(e),n.removeEventListener("scroll",t)}}},[b,P]),(0,s.useEffect)(function(){if(P.current&&b.current)return(0,x.l)(P.current,function(){return N(!0),function(){N(!1)}},{root:b.current,threshold:0})},[b,P]);var ei=(0,f.I)(function(e){return(0,i._)(function(){var n,t,r,i,o,l,s,c,u,d;return(0,a.YH)(this,function(a){switch(a.label){case 0:n=e.workflows.readTaskBuffer.subscribe({runId:h,taskIdx:p}).resReadable,t=new Uint8Array([]),r=!1,i=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),l=(0,ez._)(n),a.label=2;case 2:return[4,l.next()];case 3:if(!(r=!(s=a.sent()).done))return[3,5];if(!(c=s.value).ok)throw Error(c.payload.code+": "+c.payload.message);"output"===c.payload.$kind&&(t=e2.concat([t,c.payload.chunk])),"finished"===c.payload.$kind&&(u=(0,F.A)(t.toString()),k((0,T.kq)(u))),a.label=4;case 4:return r=!1,[3,2];case 5:return[3,12];case 6:return d=a.sent(),i=!0,o=d,[3,12];case 7:if(a.trys.push([7,,10,11]),!(r&&null!=l.return))return[3,9];return[4,l.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(i)throw o;return[7];case 11:return[7];case 12:return[2]}})})}),eo=(0,o._)((0,s.useState)(0),2),ea=eo[0],el=eo[1],es=(0,C.A)(function(e){var n=e.height;"expanded"===J&&el(n)},{type:"debounce",wait:200}),ec=(0,s.useCallback)(function(){_({type:"networking"})},[_]),eu=(0,s.useCallback)(function(e,n){_({type:"webview",data:{ports:{type:"local",path:e,port:n}}})},[_]),ed=(0,s.useCallback)(function(){_({type:"envEditor"})},[_]),ep="FINISHED"===d.state||"FAILED"===d.state,ef=!1;return"collapsed"===J?ef=!1:(!ep||V)&&(ef=!0),(0,l.FD)(q.S,{innerRef:P,children:[(0,l.Y)(nt,{runId:h,taskIdx:p,task:d,config:m,isInRecoveryMode:j,isCollapsed:Q,setIsCollapsed:X,openPane:_,openedPorts:Z,onAIChatClick:function(){return null==ei?void 0:ei()}}),(0,l.FD)(q.S,{innerRef:es,style:{position:"sticky",top:28},children:[(0,l.Y)(eX,{onClick:ed}),(0,l.Y)(eH.yN,{configurations:Z.map(function(e){return e.configuration}),openWebview:function(){eu("/",Z[0].configuration.localPort)},openNetworkingTool:ec,onDontExposePort:function(){1===Z.length&&I(Z[0].configuration.localPort)},onDoExposePort:function(){1===Z.length&&R(Z[0].configuration.localPort)}})]}),(0,l.Y)("div",(0,w._)((0,v._)({ref:ee},en),{children:(0,l.Y)(q.S,{css:e3.outputBlockTerminalWrapper,style:(u={},(0,g._)(u,e5.blockMinHeight,er+"px"),(0,g._)(u,e5.terminalBackgroundColor,null==G?void 0:G.background),(0,g._)(u,e_.O3.topOffset,28+ea+"px"),u),children:ef?(0,l.Y)(q.S,{innerRef:et,children:(0,l.Y)(nn,{taskIdx:p,runId:h,maxHeight:y-28-ea,currentUserId:S.id,scrollParent:function(e){var n,t,r,i=e+(null!==(r=null===(n=P.current)||void 0===n?void 0:n.offsetTop)&&void 0!==r?r:0);null===(t=b.current)||void 0===t||t.scrollTo({top:i})},scrollPosition:z,openPane:_,openAIWithMessage:k})}):(0,l.Y)(eN,{targetHeight:null!=er?er:0})})})),(0,l.Y)(q.S,{css:e3.outputBlockClosingBorder})]})}function ni(e){var n,t,r=(0,s.useCallback)(function(){e.openPane({type:"dependencies"})},[e]),i=e.task.metadata;if(((null==i?void 0:i.task)==="packager.installForAll"||(null==i?void 0:i.task)==="packager.installForLanguage")&&(null==i?void 0:i.hasUserFacingOutput)===!0)return(0,l.Y)(nr,(0,v._)({},e));var o="ERROR"===e.task.state||"FAILED"===e.task.state,a="ERROR"===e.task.state||"FAILED"===e.task.state?null===(n=e.task.result)||void 0===n?void 0:n.message:void 0,c="FINISHED"===e.task.state?null===(t=e.task.result)||void 0===t?void 0:t.message:void 0,u="RUNNING"!==e.task.state;return(0,l.FD)(q.S,{children:[(0,l.FD)(q.S,{css:e3.outputBlockMetadataWrapper,children:[(0,l.FD)(q.S,{css:e3.outputBlockMetadataWrapperLeft,children:[(0,l.Y)(V.K0,{alt:"Open Packager",onClick:r,children:(0,l.Y)(e1.A,{})}),(0,l.Y)(j.a,{color:"grey",text:"Packager",css:e3.taskNamePill})]}),(0,l.FD)(q.S,{css:e3.outputBlockMetadataWrapperRight,children:[(0,l.Y)(Z.EY,{color:"dimmer",variant:"small",css:e3.dateText,children:(0,l.Y)(M,{startTime:e.task.startTime,endTime:"RUNNING"!==e.task.state?e.task.endTime:void 0})}),(0,l.Y)(q.S,{css:e3.verticalDivider}),(0,l.Y)(e6,{isDone:u,hasError:o,errorMessage:a,finishedMessage:c})]})]}),(0,l.Y)(q.S,{css:e3.outputBlockTerminalWrapper,children:(0,l.Y)(q.S,{css:e3.errorMessage,style:{color:H.LU.accentNegativeStronger},children:a})})]})}function no(e){var n=e.task,t=e.config,r=e.openPane,i=t.args,o=(0,s.useCallback)(function(){r({type:"webview",data:{ports:{type:"local",port:i}}},!0)},[r,i]);return(0,l.FD)(q.S,{css:e3.outputBlockMetadataWrapper,children:[(0,l.FD)(q.S,{css:e3.outputBlockMetadataWrapperLeft,children:[(0,l.Y)(V.K0,{alt:"Open Webview",onClick:o,children:(0,l.Y)(e0.A,{})}),(0,l.Y)(j.a,{color:"grey",text:":".concat(i),css:e3.taskNamePill})]}),(0,l.FD)(q.S,{css:e3.outputBlockMetadataWrapperRight,children:[(0,l.Y)(Z.EY,{color:"dimmer",variant:"small",css:e3.dateText,children:(0,l.Y)(M,{startTime:n.startTime})}),(0,l.Y)(q.S,{css:e3.verticalDivider}),(0,l.Y)(O.m_,{tooltip:"Finished",css:e3.outputMetadataTooltip,children:(0,l.Y)(K.A,{})})]})]})}function na(e){var n=(0,eV.i)();if(!n)return null;var t=e.config.task;switch(t){case"shell.exec":case"dummy.echo":case"dummy.print":case"dummy.sleep":case"dummy.pass":case"dummy.fail":return(0,l.Y)(nr,(0,w._)((0,v._)({},e),{currentUser:n}));case"packager.installForLanguage":case"packager.installForAll":return(0,l.Y)(ni,(0,w._)((0,v._)({},e),{currentUser:n}));case"workspace.openWebview":return(0,l.Y)(no,(0,w._)((0,v._)({},e),{config:e.config}));case"workflow.run":return null;default:(0,P.A)(t)}}var nl=t(51895),ns=t(47258),nc=t(68837),nu=t(19915),nd=(0,eq.v)(["blockMinHeight","terminalBackgroundColor"]),np=nd.cssVars,nf=nd.styleTokens,nh=(0,z.x)({outputsListParent:[W.wp.flex.growAndShrink(1),W.wp.overflow("hidden"),W.wp.borderRadius(0,0,8,8)],outputsListWrapper:[W.wp.height("100%")],outputsList:[W.wp.height("auto"),W.wp.overflowY("scroll"),W.wp.flex.growAndShrink(1)],outputsListSnapToBottom:{scrollSnapType:"y mandatory"},scrollSnap:[W.wp.height(1),{marginTop:-1,pointerEvents:"none",scrollSnapAlign:"end"}],outputBlockCollapsingWrapper:[W.wp.minHeight(nf.blockMinHeight)],outputBlockTerminalWrapper:[W.wp.minHeight(nf.blockMinHeight),{backgroundColor:nf.terminalBackgroundColor}],outputBlockClosingBorder:[W.wp.height(1),W.wp.zIndex(1),W.wp.border({direction:"bottom",width:1,style:"solid",color:H.LU.backgroundHigher}),{marginTop:-1}],workflowsListButton:[W.wp.viewStyle,W.wp.reset.button,W.wp.p(2),W.wp.height(22),W.wp.rowWithGap(8),W.wp.align.center,ns.b.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8}],workflowsListButtonText:[{fontSize:H.LU.fontSizeSmall}]});function nm(e){var n,t=e.onInput,r=e.openPane,i=e.openAIWithMessage,a=e.openSearchAndReplace,c=e.openSecretsPane,u=e.autoFocus,d=e.rootRef,p=e.maxHeight,f=e.onResizeTerminal,h=e.isDone,m=e.data,y=e.error,b=e.localStartTime,S=e.localEndTime,A=e.startTime,k=e.endTime,_=e.type,R=e.visualState,F=e.onSetVisualState,T=e.ports,P=e.onDontExposePort,L=e.onDoExposePort,U=(0,s.useRef)(null),N=(0,o._)((0,s.useState)(!0),2),O=N[0],M=N[1],B=(0,o._)((0,s.useState)(!1),2),H=B[0],z=B[1],W=(0,o._)((0,s.useState)(0),2),G=W[0],V=W[1],j=(0,eZ.V)(),Z=(0,Y.A)(O,H?6e4:500),K=(0,D.LO)(T,_===E._B.EXECUTION?m.cgroup:void 0),$=(0,o._)((0,s.useState)(0),2),J=$[0],Q=$[1],X=(0,s.useCallback)(function(e,n){r({type:"webview",data:{ports:{type:"local",path:e,port:n}}})},[r]),ee=eM({maxHeight:p,visualState:R,onSetVisualState:F}),en=ee.collapsedStep,et=ee.isCollapsed,er=ee.setIsCollapsed,ei=ee.blockWrapperRef,eo=ee.blockWrapperProps,ea=ee.blockResizeRef,el=ee.measuredBlockHeight;(0,I.A)({sendInput:function(e){return t(e),!0},paste:function(){return!1}}),(0,s.useEffect)(function(){if(d.current){var e,n=d.current,t=function(){var t,r;V(Math.max(0,n.scrollTop-(null!==(r=null===(t=U.current)||void 0===t?void 0:t.offsetTop)&&void 0!==r?r:0))),z(!0),e&&clearTimeout(e),e=setTimeout(function(){z(!1)},500)};return n.addEventListener("scroll",t),function(){clearInterval(e),n.removeEventListener("scroll",t)}}},[d,U]),(0,s.useEffect)(function(){if(U.current&&d.current)return(0,x.l)(U.current,function(){return M(!0),function(){M(!1)}},{root:d.current,threshold:0})},[d,U]);var es=(0,C.A)(function(e){var n=e.height;"expanded"===en&&Q(n)},{type:"debounce",wait:200}),ec=!1;return"collapsed"===en?ec=!1:(!h||Z)&&(ec=!0),(0,l.FD)(q.S,{innerRef:U,children:[(0,l.Y)(eh,{isCollapsed:et,setIsCollapsed:er,openPane:r,isDone:h,data:m,localStartTime:b,localEndTime:S,startTime:A,endTime:k,type:_,error:y,openedPorts:K,openAIWithMessage:i}),(0,l.FD)(q.S,{innerRef:es,style:{position:"sticky",top:28},children:[(0,l.Y)(eX,{onClick:c}),(0,l.Y)(eH.yN,{configurations:K.map(function(e){return e.configuration}),openWebview:function(){X("/",K[0].configuration.localPort)},openNetworkingTool:function(){r({type:"networking"})},onDontExposePort:function(){1===K.length&&P(K[0].configuration.localPort)},onDoExposePort:function(){1===K.length&&L(K[0].configuration.localPort)}})]}),(0,l.Y)("div",(0,w._)((0,v._)({ref:ei},eo),{children:(0,l.Y)(q.S,{css:nh.outputBlockTerminalWrapper,style:(n={},(0,g._)(n,np.blockMinHeight,el+"px"),(0,g._)(n,np.terminalBackgroundColor,null==j?void 0:j.background),(0,g._)(n,e_.O3.topOffset,28+J+"px"),n),children:ec?(0,l.Y)(q.S,{innerRef:ea,children:(0,l.Y)(eP,{onMessage:m.onMessage,onInput:t,openAIWithMessage:i,openSearchAndReplace:a,maxHeight:p-28-J,onResizeTerminal:f,scrollPosition:G,scrollParent:function(e){var n,t,r,i=e+(null!==(r=null===(n=U.current)||void 0===n?void 0:n.offsetTop)&&void 0!==r?r:0);null===(t=d.current)||void 0===t||t.scrollTo({top:i})},autoFocus:u,openPane:r})}):(0,l.Y)(eN,{targetHeight:null!=el?el:0})})})),(0,l.Y)(q.S,{css:nh.outputBlockClosingBorder})]})}function ng(e){var n=e.openPane,t=e.isActive,r=e.runner,i=e.ports,a=e.sessionId,c=e.openAIWithMessage,u=e.onClear,d=e.onDontExposePort,p=e.onDoExposePort,f=(0,o._)((0,s.useState)([]),2),h=f[0],m=f[1],g=(0,o._)((0,s.useState)(0),2),v=g[0],w=g[1],Y=(0,o._)((0,s.useState)(!0),2),x=Y[0],D=Y[1],I=(0,s.useRef)(null),F=(0,R.Jw)(_.C.id,_.j.Output),T=(0,o._)((0,s.useState)(!1),2),P=T[0],L=T[1],U=(0,s.useRef)(0),N=(0,k.m5)(),O=(0,o._)((0,A.A)("show-only-latest-console-runs",!0),2),M=O[0],B=O[1],H=(0,ev.If)(),z=(0,s.useMemo)(function(){return H?Object.entries(H).flatMap(function(e){var n=(0,o._)(e,2),t=n[0],r=n[1];return r.tasks.filter(function(e){return e.state===S.Dr.RUNNING||e.state===S.Dr.FINISHED||e.state===S.Dr.FAILED||e.state===S.Dr.ERROR}).map(function(e,n){return{task:e,taskIdx:n,runId:t,config:r.workflow.tasks[n]}})}):[]},[H]),W=(0,C.A)(function(e){w(e.height)},{type:"throttle",wait:200}),G=(0,s.useCallback)(function(e){return n({type:(0,nl.QY)(e),data:e})},[n]),V=(0,s.useCallback)(function(){n({type:"envEditor"})},[n]),j=(0,s.useCallback)(function(e){n({type:"searchReplace",data:{initialQuery:e}})},[n]),Z=(0,s.useCallback)(function(e){c(e),a&&n({type:"ghostwriterChat",data:{sessionId:a}})},[n,c,a]);(0,s.useEffect)(function(){return r.onStateChanged(function(e){L(e===E.ll.BEFORE_RUN)})},[r]),(0,s.useEffect)(function(){m(r.getOutputBlocks())},[r]),(0,s.useEffect)(function(){var e=r.onAllBlocksChanged(function(e){m(e)}),n=r.onBlockChanged(function(e){!h.find(function(n){return n.id===e.id})&&I.current&&(I.current.scrollTo(0,I.current.scrollHeight),D(!0)),m((0,b.jM)(function(n){var t=n.findIndex(function(n){return n.id===e.id});t>=0?n[t]=e:n.push(e)}))});return function(){n(),e()}},[r,h,I]);var K=(0,s.useMemo)(function(){var e=(0,y._)(h.map(function(e){return{type:"OutputBlock",data:e}})).concat((0,y._)(z.map(function(e){return{type:"WorkflowsTask",data:e}}))).sort(function(e,n){var t,r;return("OutputBlock"===e.type?null!==(t=e.data.startTime)&&void 0!==t?t:-1/0:e.data.task.startTime)-("OutputBlock"===n.type?null!==(r=n.data.startTime)&&void 0!==r?r:-1/0:n.data.task.startTime)}),n=e.filter(function(e){var n=e.type,t=e.data;return!M||("OutputBlock"===n?!1===t.isDone:"RUNNING"===t.task.state)});return 0===n.length&&e.length>0?[e[e.length-1]]:n},[h,M,z]),$=0===K.length;return(0,l.FD)(q.S,{css:nh.outputsListParent,innerRef:F,children:[P?(0,l.Y)(nc.A,{}):null,(0,l.FD)(q.S,{css:nh.outputsListWrapper,innerRef:W,children:[(0,l.Y)(nw,{onClear:u,showOnlyLatest:M,setShowOnlyLatest:B,isEmpty:$,openPane:n}),$?(0,l.Y)(eA,{runner:r,openPane:n}):(0,l.FD)(q.S,{css:[nh.outputsList,x&&nh.outputsListSnapToBottom],innerRef:I,onScroll:function(){I.current&&(I.current.scrollTop<U.current?D(!1):D(I.current.scrollHeight-I.current.scrollTop-20<v),U.current=I.current.scrollTop)},children:[K.map(function(e,o){var a=e.type,s=e.data;if("WorkflowsTask"===a)return(0,l.Y)(na,{task:s.task,taskIdx:s.taskIdx,runId:s.runId,config:s.config,maxHeight:v,rootRef:I,ports:i,openPane:n,openAIWithMessage:Z,onDoExposePort:p,onDontExposePort:d},s.runId+"-"+s.taskIdx);var c=o===h.length-1;return(0,l.Y)(nm,{rootRef:I,maxHeight:v,onInput:function(e){var n=r.getRunState();(n===E.ll.IDLE||n===E.ll.RUNNING)&&r.sendInput(e)},openFile:G,openAIWithMessage:Z,openSearchAndReplace:j,openPane:n,openSecretsPane:V,onResizeTerminal:function(e){!s.isDone&&s.type===E._B.EXECUTION&&r.resizeTerminalForBlock(s.id,e)},autoFocus:t&&c&&!N,isDone:s.isDone,type:s.type,error:s.error,visualState:s.visualState,onSetVisualState:function(e){return r.setBlockVisualState(s.id,e)},localStartTime:s.localStartTime,localEndTime:s.localEndTime,startTime:s.startTime,endTime:s.endTime,data:s.data,ports:i,onDontExposePort:d,onDoExposePort:p},s.id)}),x?(0,l.Y)(q.S,{css:nh.scrollSnap}):null]})]})]})}var nv=(0,z.x)({header:[W.wp.height(28),W.wp.flex.row,W.wp.align.center,W.wp.justify.end,{borderBottom:"1px solid ".concat(H.LU.backgroundHigher),opacity:.8,":hover":{opacity:1}}],groupRight:[W.wp.height("100%"),W.wp.rowWithGap(4),W.wp.px(2)]});function nw(e){return(0,l.Y)(q.S,{css:nv.header,align:"end",children:(0,l.FD)(q.S,{css:nv.groupRight,align:"center",children:[(0,l.Y)(eB.g,{text:"Show Only Latest",isSelected:e.showOnlyLatest,onChange:e.setShowOnlyLatest}),(0,l.Y)(eB.k,{altText:"Clear History",buttonText:"Clear History",icon:(0,l.Y)(nu.A,{}),onClick:e.onClear,disabled:e.isEmpty})]})})}var ny=t(48568),nb=t(16836),nS=t(80703),nY=t(1566),nA=t(84296),nC=t(97003),nx=c.ZU.Object({type:c.ZU.Literal("runnerOutput")}),nk={id:"outputs.clear",name:"Clear console history",default:void 0};function n_(e){var n,t,r,c,u,g,v,w=e.runner,y=e.options,b=(t=(n=(0,h.A)()).fs,r=n.ports,c=(0,f.I)(function(e){return function(){return e.workflows.clearHistory.rpc({})}},[]),u=(0,s.useCallback)(function(){c&&c(),w.clearBlockHistory()},[w,c]),(0,nY.Qt)(function(){return{commands:[{commands:[{match:m.G2,data:{type:"action",label:"Clear History",icon:(0,l.Y)(nu.A,{}),run:function(){return u()}}}]}],type:"runnerOutput",startBlock:w.startBlock,endBlock:w.endBlock,writeOutputToBlock:w.writeOutputToBlock,writeErrorToBlock:w.writeErrorToBlock}},[w,u]),(0,nS.SJ)(function(){return[nk.id,w.clearBlockHistory]},[w]),g=(0,s.useCallback)(function(e){r.updateDotReplitPortsMapping(e,void 0)},[r]),{onClear:u,onDoExposePort:(0,s.useCallback)(function(e){r.tryExposingPortAutomatically(e)},[r]),onDontExposePort:g,ports:r,fs:t}),S=b.ports,Y=b.onDontExposePort,A=b.onDoExposePort,C=b.onClear,x=(0,o._)((0,s.useState)(""),2),k=x[0],_=x[1],D=y.performPaneOperation,E=(0,s.useCallback)(function(e){D({operation:"open",secondary:"ghostwriterChat"===e.type,pane:e})},[D]),R=(0,d.Au)({onSession:function(e){_(e),E({type:"ghostwriterChat",data:{sessionId:e}})}}).sendMessage,I=(0,d.dm)(),F=I.assistantMode,T=I.getAssistantMessageModel,P=I.getAssistantMessageIntent,L=(0,ny.L)().authorizations,U=(0,nb.T)({mode:F,authz:L}),N=(0,s.useCallback)((v=(0,i._)(function(e){var n;return(0,a.YH)(this,function(t){return n=T(U),(0,p.u4)(p.AZ.ASSISTANT_USED,{action:"message_sent",assistant_mode:F,model:n,user_model_selection:n,message_content:e,message_source:"console"}),R({kind:"message",message:e,intent:P(),model:n}),[2]})}),function(e){return v.apply(this,arguments)}),[R,T,P,U,F]);return(0,l.Y)(ng,{runner:w,ports:S,isActive:y.isActive,openPane:E,sessionId:k,openAIWithMessage:N,onClear:C,onDontExposePort:Y,onDoExposePort:A})}var nD=(0,z.x)({unavailable:[W.wp.p(8)]}),nE={Content:function(e){var n=e.options,t=(0,h.A)().runner;return"outputs"!==t.mode?(0,l.Y)(q.S,{css:nD.unavailable,children:(0,l.Y)(Z.EY,{children:"Console is not available."})}):(0,l.Y)(n_,{options:n,runner:t})},Icon:function(e){var n=e.size;return(0,l.Y)(nA.Vx.Provider,{value:{color:H.LU.yellowStrongest,size:n},children:(0,l.Y)(nC.A,{})})},getTitle:function(){return"Console"},description:"View the terminal output after running your code",category:nl.bY.WorkspaceFeatures,decode:function(e){return u.WT.Decode(nx,e)}}},11764:(e,n,t)=>{"use strict";t.d(n,{P:()=>f});var r=t(1889),i=t(6680),o=t(61234),a=t(47258),l=t(43974),s=t(93682),c=t(18063),u=t(2527),d=t(35869),p=(0,o.x)({root:[{borderBottom:"1px solid ".concat(i.LU.outlineDimmest)}],inner:[l.wp.position.relative,{"::before":{content:'""',display:"block",position:"absolute",left:0,width:8,height:"100%",background:"linear-gradient(90deg, ".concat(i.LU.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1},"::after":{content:'""',display:"block",position:"absolute",right:0,width:8,height:"100%",background:"linear-gradient(270deg, ".concat(i.LU.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1}}],tabs:[l.wp.overflowX("auto"),l.wp.pl(8)],tab:[a.b.nofill,l.wp.borderRadius(0),l.wp.px(12),l.wp.position.relative,{transition:"none",height:38,marginRight:1,"::after":{content:'""',display:"block",position:"absolute",right:-2,width:1,height:16,backgroundColor:i.LU.outlineDimmest},"&:last-child":{marginRight:0,"::after":{display:"none"}}}],dot:[l.wp.position.absolute,l.wp.borderRadius(16),l.wp.width(8),l.wp.height(8),l.wp.backgroundColor.accentPrimaryStronger,{top:8,right:8}]}),f=function(e){var n=e.tabs,t=e.value,o=e.onClick;return(0,r.Y)(u.ui,{css:p.root,children:(0,r.Y)(d.S,{css:p.inner,children:(0,r.Y)(d.S,{css:p.tabs,row:!0,align:"center",children:n.map(function(e){return(0,r.FD)(d.S,{css:l.wp.position.relative,children:[(0,r.Y)(s.$n,{style:{borderBottom:"1px solid "+(t===e.value?i.LU.foregroundDefault:"transparent")},css:p.tab,text:e.label,iconLeft:e.icon,iconRight:e.beta?(0,r.Y)(c.a,{text:"Beta",colorway:"grey"}):void 0,onClick:function(){return o(e)}}),e.showDot?(0,r.Y)(d.S,{css:p.dot}):null]},e.value)})})})})}},12408:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M4 3.75A1.25 1.25 0 0 0 2.75 5v14A1.25 1.25 0 0 0 4 20.25h16A1.25 1.25 0 0 0 21.25 19V8A1.25 1.25 0 0 0 20 6.75h-9a.75.75 0 0 1-.624-.334L8.599 3.75H4Zm-1.945-.695A2.75 2.75 0 0 1 4 2.25h5a.75.75 0 0 1 .624.334l1.777 2.666H20A2.75 2.75 0 0 1 22.75 8v11A2.75 2.75 0 0 1 20 21.75H4A2.75 2.75 0 0 1 1.25 19V5c0-.73.29-1.429.805-1.945ZM12 10.25a.75.75 0 0 1 .75.75v2.25H15a.75.75 0 0 1 0 1.5h-2.25V17a.75.75 0 0 1-1.5 0v-2.25H9a.75.75 0 0 1 0-1.5h2.25V11a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},12494:(e,n,t)=>{"use strict";t.d(n,{A:()=>v});var r=t(46434),i=t(29935),o=t(12694),a=t(82643),l=t(1889),s=t(21462),c=t(60990),u=t(17966),d=t(17602),p=t(61234),f=t(43974),h=t(35869);function m(){}var g=(0,p.x)({terminalWrapper:[{"> div":[f.wp.borderRadius(4)],"& .xterm":[f.wp.borderRadius(4)]}]});function v(e){var n,t=e.processId,p=e.openPane,f=e.maxHeight,v=(0,d.V)(),w=(0,u.Ui)({maxHeight:f,openPane:p}),y=w.visibleHeight,b=w.bufferHeight,S=w.wrapperResizeRef,Y=w.xterm,A=w.xtermRef,C=(0,o._)((0,s.useState)(null),2),x=C[0],k=C[1],_=(0,s.useCallback)(function(e){return k(function(){return e}),function(){}},[]);return(0,c.b)((n=(0,i._)(function(e,n){var i,o,l,s,c,u,d,p,f;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(i=n.signal,!x)return[2];o=e.agentToolPackager.connectToInstallPackages.subscribe({processId:t},{signal:i}).resReadable,l=!1,s=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),u=(0,r._)(o),a.label=2;case 2:return[4,u.next()];case 3:if(!(l=!(d=a.sent()).done))return[3,5];if(!(p=d.value).ok){if("UNEXPECTED_DISCONNECT"===p.payload.code||"CANCEL"===p.payload.code||"NO_PROCESS_MATCHING_ID"===p.payload.code)return[3,5];throw Error("[".concat(p.payload.code,"]: ").concat(p.payload.message))}"output"===p.payload.$kind&&x(p.payload.output),a.label=4;case 4:return l=!1,[3,2];case 5:return[3,12];case 6:return f=a.sent(),s=!0,c=f,[3,12];case 7:if(a.trys.push([7,,10,11]),!(l&&null!=u.return))return[3,9];return[4,u.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(s)throw c;return[7];case 11:return[7];case 12:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[x,t]),(0,l.Y)(h.S,{css:g.terminalWrapper,style:{height:y,background:null==v?void 0:v.background},children:(0,l.Y)(u._x,{onInput:m,xterm:Y,wrapperResizeRef:S,bufferHeight:b,setOnMessage:_,onResizeTerminal:m,children:(0,l.Y)(u.DJ,{xtermRef:A,visibleHeight:y,maxHeight:f})})})}},12544:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M1.25 6A2.75 2.75 0 0 1 4 3.25h16A2.75 2.75 0 0 1 22.75 6v12A2.75 2.75 0 0 1 20 20.75H4A2.75 2.75 0 0 1 1.25 18V6ZM4 4.75c-.69 0-1.25.56-1.25 1.25v12c0 .69.56 1.25 1.25 1.25h16c.69 0 1.25-.56 1.25-1.25V6c0-.69-.56-1.25-1.25-1.25H4ZM4.25 8A.75.75 0 0 1 5 7.25h2a.75.75 0 0 1 0 1.5H5A.75.75 0 0 1 4.25 8Zm5 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5h-1A.75.75 0 0 1 9.25 8Zm4 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5h-1a.75.75 0 0 1-.75-.75Zm4 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5h-1a.75.75 0 0 1-.75-.75Zm-13 4a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5H5a.75.75 0 0 1-.75-.75Zm4 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75Zm4 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5h-1a.75.75 0 0 1-.75-.75Zm4 0a.75.75 0 0 1 .75-.75h2a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1-.75-.75Zm-9 4a.75.75 0 0 1 .75-.75h8a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}},12549:(e,n,t)=>{"use strict";t.d(n,{L:()=>l}),t(1889);var r=t(72004),i=t(26496),o=t(68209),a=t(46762);function l(e){var n=(0,i.NC)(),t=(0,o.Rj)(function(){return e?n.sessions.get(e):null},[n,e]);return(0,o.Rj)(function(){return null==t?void 0:t.reduce(s,"global").result.map(function(e){return e.cents})},[t])}t(6164);var s={direction:"forward",state:{cents:0},reducer:function(e,n){(0,r.ka6)(e)&&(n.cents+=a.a7)}}},13307:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M9 .25a.75.75 0 0 1 .75.75v2.25h4.5V1a.75.75 0 0 1 1.5 0v2.25H18A2.75 2.75 0 0 1 20.75 6v2.25H23a.75.75 0 0 1 0 1.5h-2.25v3.5H23a.75.75 0 0 1 0 1.5h-2.25V18A2.75 2.75 0 0 1 18 20.75h-2.25V23a.75.75 0 0 1-1.5 0v-2.25h-4.5V23a.75.75 0 0 1-1.5 0v-2.25H6A2.75 2.75 0 0 1 3.25 18v-3.25H1a.75.75 0 0 1 0-1.5h2.25v-3.5H1a.75.75 0 0 1 0-1.5h2.25V6A2.75 2.75 0 0 1 6 3.25h2.25V1A.75.75 0 0 1 9 .25Zm-3 4.5c-.69 0-1.25.56-1.25 1.25v12c0 .69.56 1.25 1.25 1.25h12c.69 0 1.25-.56 1.25-1.25V6c0-.69-.56-1.25-1.25-1.25H6ZM8.25 9A.75.75 0 0 1 9 8.25h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75V9Zm1.5.75v4.5h4.5v-4.5h-4.5Z",clipRule:"evenodd"})}))}},13337:(e,n,t)=>{"use strict";t.d(n,{X:()=>q});var r,i=t(49069),o=t(62019),a=t(37743),l=t(48122),s=t(1833),c=t(23099),u=t.n(c),d=t(45773),p=t(44725),f=t(18254),h=t(60275),m=t(51978),g=i.sj.define({combine:function(e){var n;return null!==(n=e.filter(Boolean)[0])&&void 0!==n?n:null}}),v=i.sU.define({create:function(){return{diff:null,tree:f.PH.empty}},update:function(e,n){var t,r,i=n.state.facet(g),o=null===(t=n.state.facet(p.BH))||void 0===t?void 0:t.parser;if(!i)return null===e.diff&&e.tree===f.PH.empty?e:{diff:null,tree:f.PH.empty};var a=e.diff,l=e.tree;return(a&&a.a.eq(i)?n.docChanged&&(a=a.updateB(n.newDoc,n.changes)):(a=h.o.create(i,n.newDoc),l=f.PH.empty),(null===(r=n.startState.facet(p.BH))||void 0===r?void 0:r.parser)!==o&&(l=f.PH.empty),o&&l.length!==a.a.length)?(l=(0,m.B)({parser:o,text:a.a,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),w=t(83846),y=t(6680),b="cm-inline-diff-line-deletion-base",S="cm-inline-diff-line-deletion",Y="cm-inline-diff-text-deletion",A="cm-inline-diff-line-insertion-base",C="cm-inline-diff-line-insertion",x="cm-inline-diff-text-insertion",k="rgba(180, 0, 0, 0.075)",_="rgba(180, 0, 0, 0.125)",D="rgba(0, 180, 0, 0.075)",E="rgba(0, 180, 0, 0.125)",R="cm-inline-diff-marker",I="cm-inline-diff-marker-left",F="cm-inline-diff-marker-right";function T(e,n){var t="linear-gradient(to right, ".concat(e,", ").concat(e,")");return n&&(t+=", linear-gradient(to right, ".concat(n,", ").concat(n,")")),t}var P=d.Lz.theme((r={},(0,w._)(r,".".concat(b,", .").concat(S),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(y.LU.accentPrimaryDimmest," !important")}}),(0,w._)(r,".".concat(b),{background:T(k)}),(0,w._)(r,".".concat(S),{background:T(k,_)}),(0,w._)(r,".".concat(A),{background:T(D)}),(0,w._)(r,".".concat(C),{background:T(D,E)}),(0,w._)(r,".".concat(x),{display:"inline-block",background:E,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(E),paddingLeft:"3px",marginLeft:"-6px"}}),(0,w._)(r,".".concat(Y),{display:"inline-block",background:_,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(_),paddingLeft:"3px",marginLeft:"-6px"}}),(0,w._)(r,".".concat(R),{display:"flex",width:"100%",justifyContent:"space-between"}),(0,w._)(r,".".concat(I),{width:"calc(50% - 1ch)",textAlign:"right"}),(0,w._)(r,".".concat(F),{width:"50%",textAlign:"right"}),r)),L=t(11813),U=t(73510),N=function(e){function n(e,t,r){var i;return(0,a._)(this,n),(i=(0,o._)(this,n)).line=e,i.index=t,i.changed=r,i}(0,s._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=this,n=document.createElement("div");if(n.className=this.changed?"cm-line ".concat(b):"cm-line ".concat(S),!this.changed||!this.changed.length){var t=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,s=l.text,c=l.tags,u=document.createElement("span");u.textContent=s||"\xa0",u.className=null!=c?c:"",n.appendChild(u)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}for(var d=0,p=0,f=null,h=null,m=function(n,t){if(!f)throw Error("range is null");var r=e.line[p],i=r.text,o=r.tags,a=i.slice(d-f.from,t-f.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",n.appendChild(l),d+=a.length};p<this.line.length;){if(!f){var g=this.line[p].text;f={from:d,to:d+g.length}}if(!h){var v=!0,w=!1,y=void 0;try{for(var A,C=this.changed[Symbol.iterator]();!(v=(A=C.next()).done);v=!0){var x=A.value;if(!(x.from>=f.to)&&!(x.to<=d)){var k=document.createElement("span");k.className=Y,h={from:x.from,to:x.to,dom:k},d<h.from&&m(n,h.from),n.appendChild(k);break}}}catch(e){w=!0,y=e}finally{try{v||null==C.return||C.return()}finally{if(w)throw y}}}h?(d<h.to&&m(h.dom,h.to),d>=h.to&&(h=null)):m(n,f.to),d>=f.to&&(f=null,p++)}return n},t.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&u()(this.line,e.line)&&u()(this.changed,e.changed)},t.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,l._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(d.xO),O=d.NZ.line({class:A}),M=d.NZ.line({class:C}),B=d.NZ.mark({class:x}),H=d.Lz.decorations.compute([v],function(e){var n=function(e,n){if(r.getLineChangeType(e.number,L.mn.B)===L.DE.COVERED)o.push(M.range(e.from));else{o.push(O.range(e.from));var t=!0,i=!1,a=void 0;try{for(var l,s=(0,L.QG)(e,n,L.mn.B,!1)[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var c=l.value;o.push(B.range(c.from,c.to))}}catch(e){i=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw a}}}},t=e.field(v,!1);if(!t||!t.diff)return d.NZ.none;var r=t.diff,i=t.tree,o=[],a=!0,l=!1,s=void 0;try{for(var c,u=r.chunks[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var p=c.value;if(p.fromB!==p.endB)for(var f=r.b.lineAt(p.fromB),h=r.b.lineAt(p.endB),m=f.number;m<=h.number;m++)n(r.b.line(m),p);else p.fromA===p.endA&&n(r.b.lineAt(p.fromB),p);if(p.fromA!==p.toA)for(var g=r.a.lineAt(p.fromA),w=(0,U.A7)(i,r.a,e,p.fromA,p.endA),y=0;y<w.length;y++){var b=w[y],S=r.a.line(g.number+y),Y=r.getLineChangeType(S.number,L.mn.A)===L.DE.COVERED?null:(0,L.QG)(S,p,L.mn.A,!0),A=d.NZ.widget({widget:new N(b,S.number,Y),block:!0,side:-(w.length-y)});o.push(A.range(p.fromB))}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return d.NZ.set(o,!0)}),z=t(44964),W=(0,d.cU)({class:z.n1,renderEmptyElements:!0,lineMarker:function(e,n){var t=e.state.field(v,!1);if(!t||!t.diff||!t.diff.hasChanges())return null;if(0===t.diff.a.length)return z.CI;var r=e.state.doc.lineAt(n.from);switch(t.diff.getLineChangeType(r.number,L.mn.B)){case L.DE.COVERED:case L.DE.MODIFIED:return z.CI;default:return null}},widgetMarker:function(e,n){if(!(n instanceof N))return null;var t=e.state.field(v,!1);if(!t||!t.diff||!t.diff.hasChanges())return null;switch(t.diff.getLineChangeType(n.index,L.mn.A)){case L.DE.COVERED:case L.DE.MODIFIED:return z.RC;default:return null}},initialSpacer:function(e){var n=e.state.field(v,!1);return(null==n?void 0:n.diff)?z.CI:z.jn},updateSpacer:function(e,n){var t=n.state.field(v,!1),r=(null==t?void 0:t.diff)?z.CI:z.jn;return e===r?e:r}}),G=t(5556),V=function(e){function n(e,t){var r;return(0,a._)(this,n),(r=(0,o._)(this,n)).left=e,r.right=t,r}(0,s._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=e.state.doc.lines.toString().length,t=document.createElement("div"),r=document.createElement("span"),i=document.createElement("span");return t.className=R,r.className=I,i.className=F,t.style.width="".concat(2*n+1,"ch"),null!==this.left&&(r.textContent=this.left.toString()),null!==this.right&&(i.textContent=this.right.toString()),t.appendChild(r),t.appendChild(i),t},t.eq=function(e){return e instanceof n&&this.left===e.left&&this.right===e.right},n}(d.wJ),j=G.DY.of(function(e,n){if(n instanceof N)return new V(n.index,null)}),Z=[G.RG.of(function(e,n){var t,r=e.state.field(v,!1);if(r&&r.diff&&r.diff.hasChanges()){var i=e.state.doc.lineAt(n.from),o=r.diff.getCorrespondingLine(i.number,L.mn.B);return new V(null!==(t=null==o?void 0:o.number)&&void 0!==t?t:null,i.number)}}),j],q=i.sj.define({enables:function(e){return[g.computeN([e],function(n){return n.facet(e)}),z.s,v,P,H,Z,W]}})},13576:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(21462),i=t(10990),o=t(46838);function a(e){var n=e.repl,t=e.currentUser,a=e.container,l=(0,o.L)(),s=(0,i.$)(n&&t?{repl:n,currentUser:t}:null);(0,r.useEffect)(function(){if(a&&s)return a.connect({context:s,getMinimumRetryDelayMs:l}),function(){a.close()}},[s,a,l])}},13982:(e,n,t)=>{"use strict";t.d(n,{E:()=>s,w:()=>l});var r=t(21462),i=t(72004),o=t(26496),a=t(68209);function l(){var e=(0,o.NC)(),n=(0,a.J2)(e.sessions.agent);return(0,r.useMemo)(function(){return null==n?void 0:n.reduce(c,1).result},[n])}function s(e){var n=l(),t=(0,r.useMemo)(function(){return null==n?void 0:n.scan(function(e,n){var t,r=n.toPresent;return{prev:null!==(t=e.current)&&void 0!==t?t:e.prev,current:r}},{prev:void 0,current:void 0})},[n]);(0,a.q3)(t,{next:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.prev,r=n.current;if(r){if("deployData"===r.toolData.$kind&&(null==t?void 0:t.toolData.$kind)==="presentResultsToolData"){e({$kind:"presentDeployData"},r.eventId);return}e(r.toolData,r.eventId)}}})}var c={direction:"reverse",state:{toPresent:void 0},reducer:function(e,n){if(e.sender.type!==i.utd.AI)return!1;var t=e.contents.contents;if((null==t?void 0:t.$kind)==="agentTimelineEventContents"){var r=t.agentTimelineEventContents.toolData;switch(null==r?void 0:r.$kind){case"presentResultsToolData":return n.toPresent={toolData:{$kind:"presentResultsToolData",data:r.presentResultsToolData},eventId:e.id},!1;case"deployData":return n.toPresent={toolData:{$kind:"deployData",data:r.deployData},eventId:e.id},!1}}}}},14075:(e,n,t)=>{"use strict";t.d(n,{G:()=>s});var r=t(29935),i=t(82643),o=t(30391),a=t(40208),l=t(67337);function s(){var e=(0,l.A)().toolchain;function n(){return(n=(0,r._)(function(n){return(0,i.YH)(this,function(t){return[2,e.setModuleConfig(n)]})})).apply(this,arguments)}function t(){return(t=(0,r._)(function(n){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,e.addModule(n).catch(function(e){a.vF.error("Toolchain: failed to add Nix module: "+e.message)})];case 1:return t.sent(),[2]}})})).apply(this,arguments)}function s(){return(s=(0,r._)(function(n){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,e.removeModule(n).catch(function(e){a.vF.error("Toolchain: failed to remove Nix module: "+e.message)})];case 1:return t.sent(),[2]}})})).apply(this,arguments)}function c(){return(c=(0,r._)(function(n,t){return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,e.upgradeModule(n,t).catch(function(e){a.vF.error("Toolchain: failed to upgrade Nix module: "+e.message)})];case 1:return r.sent(),[2]}})})).apply(this,arguments)}return{modules:(0,o.A)(e.modules),configs:(0,o.A)(e.configs),moduleConfig:(0,o.A)(e.moduleConfig),setModuleConfig:function(e){return n.apply(this,arguments)},addModule:function(e){return t.apply(this,arguments)},removeModule:function(e){return s.apply(this,arguments)},upgradeModule:function(e,n){return c.apply(this,arguments)}}}},14804:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M11.063 14.918V9.021h.875v.921h.077c.122-.315.32-.56.595-.733.274-.177.603-.265.987-.265.389 0 .712.088.97.265.262.174.466.418.611.733h.062c.15-.305.377-.546.68-.726.301-.181.664-.272 1.086-.272.527 0 .959.165 1.294.495.335.328.503.838.503 1.532v3.947h-.906v-3.947c0-.435-.12-.746-.357-.933a1.321 1.321 0 0 0-.841-.28c-.415 0-.736.125-.964.376-.228.248-.342.563-.342.945v3.84h-.921v-4.04c0-.335-.109-.605-.326-.81-.218-.208-.498-.311-.841-.311-.236 0-.456.062-.66.188a1.42 1.42 0 0 0-.492.522c-.123.22-.184.475-.184.764v3.686h-.906ZM6.706 15.056c-.374 0-.713-.07-1.018-.21a1.746 1.746 0 0 1-.726-.62c-.179-.27-.268-.598-.268-.982 0-.338.066-.612.2-.822.132-.212.31-.379.533-.499.223-.12.468-.21.737-.268.271-.062.544-.11.818-.146.358-.046.649-.081.872-.104.225-.026.389-.068.491-.127.105-.059.157-.161.157-.307v-.03c0-.38-.103-.674-.31-.884-.205-.21-.516-.315-.934-.315-.432 0-.771.095-1.017.284-.246.19-.419.392-.518.607l-.86-.307c.153-.358.358-.637.614-.837.258-.202.54-.343.845-.422.307-.082.609-.123.906-.123.19 0 .407.023.652.069.249.043.488.134.718.272.233.139.427.347.58.626.154.28.23.653.23 1.122v3.885h-.906v-.799h-.046a1.595 1.595 0 0 1-.307.411c-.143.146-.334.27-.572.373-.238.102-.528.153-.871.153Zm.138-.814c.358 0 .66-.07.906-.21a1.437 1.437 0 0 0 .752-1.249v-.829c-.038.046-.122.088-.253.127a4.271 4.271 0 0 1-.445.096 20.362 20.362 0 0 1-.868.115c-.236.03-.456.08-.66.15a1.138 1.138 0 0 0-.492.303c-.123.133-.184.315-.184.545 0 .315.116.553.35.714.235.159.533.238.894.238Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M4.15 4.75A1.65 1.65 0 0 0 2.5 6.4v11.2c0 .911.739 1.65 1.65 1.65h15.2A1.65 1.65 0 0 0 21 17.6V6.4a1.65 1.65 0 0 0-1.65-1.65H4.15ZM1 6.4a3.15 3.15 0 0 1 3.15-3.15h15.2A3.15 3.15 0 0 1 22.5 6.4v11.2a3.15 3.15 0 0 1-3.15 3.15H4.15A3.15 3.15 0 0 1 1 17.6V6.4Z",clipRule:"evenodd"})]}))}},14856:(e,n,t)=>{"use strict";t.d(n,{YY:()=>nO,QJ:()=>nH,Eo:()=>nM});var r=t(29935),i=t(83846),o=t(17844),a=t(93629),l=t(12694),s=t(82643),c=t(1889),u=t(21462),d=t(85788),p=t(51578),f=t(96241),h=t(80865),m=t(2960),g=t(16907),v=t(78932),w=t(90001),y=t(16878),b=t(63892),S=t(96497),Y=t(77167),A=t(83353),C=t(94869),x=t(38027),k=t(6680),_=t(61234),D=t(43974),E=t(40043),R=t(35869),I=t(20627),F=(0,_.x)({root:[D.wp.p(6),D.wp.flex.row,D.wp.align.center,D.wp.justify.center,D.wp.zIndex(1),{color:k.LU.accentPrimaryStrongest,backgroundColor:k.LU.accentPrimaryDimmest,containerType:"inline-size"}],content:[D.wp.width("100%"),D.wp.flex.row,D.wp.align.center],textWrapper:[D.wp.width("100%"),{flexShrink:1,textWrap:"wrap"}]});function T(){return(0,c.Y)(R.S,{css:F.root,children:(0,c.FD)(R.S,{css:F.content,gap:8,children:[(0,c.Y)(I.A,{size:16}),(0,c.Y)(E.EY,{variant:"small",css:F.textWrapper,children:"This is a visual preview of your app. The agent is currently creating a fully interactive version."})]})})}var P=t(9907),L=t(17459);function U(e){var n=e.actionType,t=(0,L._)(e,["actionType"]);(0,b.u4)(b.AZ.WS_WEBVIEW_USED,(0,o._)({type:n},t))}function N(){U({actionType:"open_new_window"})}var O=t(80703),M=t(45771),B=t(4930),H=t(26705),z=t(31618),W=t(2527),G=t(37407),V=t(4989),j=t(44144),Z=t(65558),q=t(56185),K=t(36672),$=(0,M.AH)([D.wp.borderRadius(6),D.wp.color.foregroundDimmer,D.wp.height(24),{borderColor:k.LU.outlineDimmer}]),J=(0,_.x)({root:[D.wp.border({color:k.LU.outlineDimmest,direction:"bottom"}),D.wp.p(2),D.wp.container("root"),D.wp.zIndex(1),D.wp.p(4),D.wp.gap(4),D.wp.height(40)],devControls:[D.wp.gap(4)],navControls:[D.wp.flex.growAndShrink(1)],navButton:[D.wp.p(6),D.wp.borderRadius(4),D.wp.flex.shrink(0),{border:"none"}],urlWrapper:[D.wp.position.relative,D.wp.flex.row,D.wp.flex.growAndShrink(1)],urlPath2:[D.wp.py(0),D.wp.fontSize(12),D.wp.flex.grow(1),D.wp.borderRadius(8)],goButton:[D.wp.position.absolute,D.wp.right(4),D.wp.top("50%"),{transform:"translateY(-50%)"}],buttons:[(0,i._)({},D.kL.max(500,"root"),{"svg + span":{display:"none"},svg:{marginRight:0}})],fakeUrl:[D.wp.fontSize(12),D.wp.border(),{boxSizing:"content-box"},D.wp.borderRadius(6),D.wp.px(8),D.wp.py(2),D.wp.flex.grow(1),D.wp.rowWithGap(4),D.wp.align.center]});function Q(e){var n=e.webviewPageState,t=e.navigationState;return(0,c.FD)(W.ui,{css:J.root,row:!0,align:"center",justify:"space-between",children:["active"===n.state?(0,c.Y)(X,{navigationState:t}):(0,c.Y)(ee,{}),(0,c.Y)(R.S,{row:!0,children:(0,c.Y)(R.S,{css:J.buttons,row:!0,align:"center",children:(0,c.Y)(R.S,{css:J.devControls,row:!0,children:(0,c.Y)(B.v,{size:"small",variant:"outlined",css:$,href:t.getExternalUrl(),target:"_blank",iconLeft:(0,c.Y)(Z.A,{}),text:"New tab",onClick:function(){N()},noNextLink:!0})})})})]})}function X(e){var n=e.navigationState,t=n.canNavigateBack,r=n.navigateBack,i=n.canNavigateForward,o=n.navigateForward,a=n.canNavigateToInputRelativeUrl,l=n.navigateToInputRelativeUrl,s=n.inputRelativeUrl,u=n.setInputRelativeUrl,d=n.refresh,p=(0,P.vm)(),f=(0,O.Jn)("webviewpane.reload");return(0,c.FD)(R.S,{css:J.navControls,row:!0,gap:4,children:[(0,c.Y)(H.K0,{alt:"Back",tooltipDelay:"long",onClick:r,disabled:!t,css:J.navButton,children:(0,c.Y)(V.A,{})}),(0,c.Y)(H.K0,{alt:"Forward",tooltipDelay:"long",onClick:o,disabled:!i,css:J.navButton,children:(0,c.Y)(j.A,{})}),(0,c.Y)(H.K0,{alt:"Refresh".concat(f?" (".concat((0,O.LH)(f,p),")"):""),tooltipDelay:"long",onClick:d,css:J.navButton,children:n.isRefreshing?(0,c.Y)(q.A,{}):(0,c.Y)(K.A,{})}),(0,c.FD)(R.S,{css:J.urlWrapper,row:!0,children:[(0,c.Y)(z.pd,{css:J.urlPath2,value:s,onKeyDown:function(e){"Enter"===e.key&&a&&l()},onChange:function(e){if(""===e.currentTarget.value){u("/");return}u(e.target.value)}}),(0,c.Y)(W.ui,{elevated:!0,css:J.goButton,children:(0,c.Y)(H.K0,{alt:"Go to URL",disabled:!a,onClick:l,size:18,tooltipContents:(0,c.Y)(O._y,{keyCombo:"Enter"}),children:(0,c.Y)(j.A,{})})})]})]})}function ee(){return(0,c.Y)(R.S,{css:J.navControls,align:"center",row:!0,gap:4,children:(0,c.FD)(W.ui,{elevated:!0,css:J.fakeUrl,children:[(0,c.Y)(G.m_,{tooltip:"Page is loading, please wait.",delay:"none",placement:"auto",children:(0,c.Y)(q.A,{})}),(0,c.Y)(E.EY,{variant:"small",color:"dimmer",children:"Loading your page"})]})})}var en=t(44885),et=(0,_.x)({modalContent:[D.wp.p(16),D.wp.flex.column,D.wp.gap(16)],modalTitle:[D.wp.fontWeight.bold],modalSection:[D.wp.flex.column,D.wp.gap(8)],modalSectionTitle:[D.wp.fontWeight.medium,{fontSize:k.LU.fontSizeSubheadDefault}],modalText:[{fontSize:k.LU.fontSizeDefault,lineHeight:1.5}],bulletList:[D.wp.flex.column,D.wp.gap(8),{paddingLeft:k.LU.space16}],bulletItem:[{position:"relative",paddingLeft:k.LU.space8,"&::before":{content:'"•"',position:"absolute",left:"-12px",color:k.LU.yellowStrongest}}]});function er(e){var n=e.isOpen,t=e.onRequestClose;return(0,c.Y)(en.a,{isOpen:n,onRequestClose:t,centered:!0,maxWidth:500,children:(0,c.FD)(R.S,{css:et.modalContent,children:[(0,c.Y)(E.EY,{variant:"headerDefault",css:et.modalTitle,children:"Cookie Restrictions in Webview"}),(0,c.FD)(R.S,{css:et.modalSection,children:[(0,c.Y)(E.EY,{css:et.modalSectionTitle,children:"Why are cookies restricted?"}),(0,c.Y)(E.EY,{css:et.modalText,multiline:!0,children:"Browser security policies limit cookie access in iframes like Webview to protect user privacy and prevent cross-site tracking."})]}),(0,c.FD)(R.S,{css:et.modalSection,children:[(0,c.Y)(E.EY,{css:et.modalSectionTitle,children:"How does this affect my app?"}),(0,c.Y)(E.EY,{css:et.modalText,multiline:!0,children:"In Webview, your app may not be able to set or read cookies, affecting authentication, sessions, and user preferences. Your app works normally in a regular browser tab."})]}),(0,c.FD)(R.S,{css:et.modalSection,children:[(0,c.Y)(E.EY,{css:et.modalSectionTitle,children:"What can I do?"}),(0,c.FD)(R.S,{css:et.bulletList,children:[(0,c.Y)(R.S,{css:et.bulletItem,children:(0,c.Y)(E.EY,{css:et.modalText,children:'Use "New tab" to test cookie functionality in a regular browser environment.'})}),(0,c.Y)(R.S,{css:et.bulletItem,children:(0,c.Y)(E.EY,{css:et.modalText,children:"Try Chrome browser."})}),(0,c.Y)(R.S,{css:et.bulletItem,children:(0,c.FD)(E.EY,{css:et.modalText,children:["Try"," ",(0,c.Y)("a",{href:"https://replit.com/desktop",target:"_blank",rel:"noopener noreferrer",style:{color:k.LU.accentPrimaryStronger,textDecoration:"none"},children:"Replit Desktop App"}),"."]})}),(0,c.Y)(R.S,{css:et.bulletItem,children:(0,c.Y)(E.EY,{css:et.modalText,children:"Adjust your browser settings to allow cross-site tracking cookies (could be risky)."})})]})]})]})})}var ei=t(28365),eo=t(32633),ea=(0,_.x)({root:[D.wp.p(4),D.wp.pl(8),D.wp.flex.growAndShrink(0),D.wp.border({width:0}),{color:k.LU.orangeStrongest,backgroundColor:k.LU.orangeDimmest,containerType:"inline-size"}],content:[D.wp.width("100%")],closeButton:[{color:k.LU.orangeStrongest},D.wp.hover({backgroundColor:k.LU.orangeDimmer})],tooltipText:[D.wp.flex.shrink(1)],textAndActions:[D.wp.flex.growAndShrink(1)],newTabButton:[{color:k.LU.orangeStrongest,backgroundColor:k.LU.orangeDimmest,borderColor:k.LU.orangeStrongest,borderWidth:1,marginLeft:"8px"},D.wp.borderRadius(6),D.wp.height(24),D.wp.hover({backgroundColor:k.LU.orangeDimmer})],learnMoreButton:[{color:k.LU.orangeStrongest,backgroundColor:"transparent",marginLeft:"8px",padding:0,border:"none",textDecoration:"underline"},D.wp.hover({fontWeight:"bolder",backgroundColor:"transparent"})]});function el(e){var n=e.navigationState,t=e.onDismiss,r=(0,l._)((0,u.useState)(!1),2),i=r[0],o=r[1],a=function(){o(!0)};return(0,c.FD)(c.FK,{children:[(0,c.Y)(R.S,{css:ea.root,gap:4,align:"start",children:(0,c.FD)(R.S,{css:ea.content,row:!0,gap:6,align:"center",justify:"space-between",children:[(0,c.Y)(eo.A,{}),(0,c.FD)(R.S,{row:!0,gap:4,align:"center",css:ea.textAndActions,children:[(0,c.Y)(E.EY,{css:ea.tooltipText,variant:"small",children:"We recommend opening a new tab to test authentication and cookie-related features."}),(0,c.Y)(B.v,{size:"small",variant:"outlined",css:ea.newTabButton,href:n.getExternalUrl(),target:"_blank",iconLeft:(0,c.Y)(Z.A,{}),text:"New tab",onClick:function(){N()},noNextLink:!0}),(0,c.Y)(B.v,{size:"small",variant:"outlined",css:ea.learnMoreButton,href:"#",onClick:function(e){e.preventDefault(),a()},text:"Learn more"})]}),(0,c.Y)(H.K0,{onClick:t,alt:"Dismiss",css:ea.closeButton,children:(0,c.Y)(ei.A,{})})]})}),(0,c.Y)(er,{isOpen:i,onRequestClose:function(){return o(!1)}})]})}var es=t(12584),ec=t(41114),eu=t(86997);function ed(){var e=(0,es._)(["\n  query WebviewDeployBanner($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n        authorizations {\n          viewDeploymentConfig {\n            isAuthorized\n          }\n        }\n      }\n    }\n  }\n"]);return ed=function(){return e},e}var ep={},ef=(0,ec.J1)(ed()),eh=t(93682),em=t(6761),eg=t(99054),ev=(0,_.x)({root:[D.wp.px(6),D.wp.py(4),D.wp.flex.growAndShrink(1),{color:k.LU.accentPrimaryStrongest,backgroundColor:k.LU.accentPrimaryDimmest,containerType:"inline-size"}],content:[D.wp.width("100%")],tooltipText:[D.wp.flex.growAndShrink(1)],closeButton:[{marginLeft:"auto"}]}),ew=function(e){var n=e.onClick,t=e.onDismiss,r="function"==typeof t;return(0,c.Y)(R.S,{css:ev.root,gap:4,align:"start",children:(0,c.FD)(R.S,{css:ev.content,row:!0,gap:6,align:"center",justify:"space-between",children:[(0,c.FD)(R.S,{row:!0,gap:8,align:"center",children:[(0,c.Y)(G.m_,{tooltip:(0,c.Y)(R.S,{gap:4,justify:"start",align:"start",children:["Deploy to any URL","Configurable machine","Always on"].map(function(e,n){return(0,c.FD)(R.S,{row:!0,gap:8,align:"center",justify:"center",children:[(0,c.Y)(em.A,{size:12}),(0,c.Y)(E.EY,{variant:"small",multiline:!1,children:e})]},n)})}),delay:"none",children:(0,c.Y)(I.A,{})}),(0,c.Y)(E.EY,{css:ev.tooltipText,variant:"small",children:"Ready to share with the world?"})]}),(0,c.Y)(eh.$n,{size:"small",colorway:"primary",iconLeft:(0,c.Y)(eg.A,{}),text:"Deploy",onClick:n}),r?(0,c.Y)(R.S,{css:ev.closeButton,children:(0,c.Y)(H.K0,{alt:"Dismiss",onClick:t,children:(0,c.Y)(ei.A,{})})}):null]})})},ey=t(24373),eb=t(57198),eS=t(73978),eY=t(49937),eA=t(33977);function eC(e){var n,t,r=e.replId,i=e.shouldShowAgentDeployBanner,a=e.onClick,s=(0,l._)((0,u.useState)(!i),2),d=s[0],p=s[1],f=(n=(0,o._)({},ep,{variables:{id:r}}),eu.I(ef,n)).data,h=(0,eA.AU)("workspaceTourGuide"),m=(0,eY.eg)(),g=(0,eb.Q)(),v=(0,ey.A)("workspace","workspace-deployments-webview-banner"),w=v.shouldDisplay,y=v.register,S=v.dismiss;(0,u.useEffect)(function(){y()},[y]);var Y=function(){p(!0),S()};if(h||m)return null;var A=(null==f?void 0:f.getRepl.__typename)==="Repl"?f.getRepl:null;if(!A)return null;var C=A.authorizations.viewDeploymentConfig.isAuthorized,x=(null===(t=A.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"&&A.hostingDeployment.currentBuild;return C&&!x&&w||i&&!d?(0,c.Y)(R.S,{children:(0,c.Y)(ew,{onClick:function(){(0,b.u4)(b.AZ.DEPLOY_PROJECT_SELECTED,{source:"workspace_webview_deploy_banner",has_agent_session:!0,is_agent_suggesting_deployment:!0}),i&&(0,eS.pI)({action:"open_deployments_from_banner",sessionId:g}),Y(),a()},onDismiss:Y})}):null}var ex=t(11597),ek=t(84789),e_=t(69543),eD=t(67337),eE=t(99091),eR=t(55482),eI=t(35899),eF=t(95525),eT=t(57667),eP=t(6553),eL=t(71991),eU=t(58127),eN=t(13344),eO=t(31412),eM=t(90417),eB=(0,M.AH)([D.wp.borderRadius(6),D.wp.color.foregroundDimmer,D.wp.height(24),{borderColor:k.LU.outlineDimmer}]),eH=[D.wp.reset.button,z.cO,D.wp.rowWithGap(0),D.wp.flex.grow(0),D.wp.color.accentPositiveStronger,D.wp.fontSize("small"),D.wp.focusRing,{"&:hover":[D.wp.cursor.pointer,D.wp.color.accentPositiveStrongest]},{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},D.wp.align.center,D.wp.py(0),D.wp.px(4)],ez=(0,_.x)({root:[D.wp.border({color:k.LU.outlineDimmest,direction:"bottom"}),D.wp.p(2),D.wp.container("root"),D.wp.zIndex(1),D.wp.p(4),D.wp.gap(4)],devControls:[D.wp.gap(4)],navControls:[D.wp.align.center,D.wp.rowWithGap(4),D.wp.flex.growAndShrink(1)],urlWrapper:[D.wp.position.relative,D.wp.flex.row,D.wp.flex.growAndShrink(1)],urlOptionsRoot:[D.wp.flex.growAndShrink(1),D.wp.overflow("hidden")],urlOptions:[D.wp.p(8),D.wp.colWithGap(6),D.wp.borderRadius(4)],urlOptionsSection:[D.wp.pb(8),D.wp.border({direction:"bottom"}),{":last-child":{paddingBottom:0,borderBottom:0}}],urlOptionsTitle:[D.wp.flex.grow(1)],portRadioGroup:[D.wp.colWithGap(8)],portOption:[D.wp.rowWithGap(8),D.wp.color.foregroundDimmer],portOptionSelected:[D.wp.rowWithGap(8),D.wp.color.foregroundDefault],portOptionLabel:[{"&:hover":[D.wp.cursor.pointer,D.wp.color.foregroundDefault]}],url:eH,urlSelected:[eH,D.wp.backgroundColor.backgroundHighest,{borderBottomLeftRadius:0}],urlPath2:[D.wp.py(0),D.wp.fontSize(12),D.wp.flex.grow(1),{borderTopLeftRadius:0,borderBottomLeftRadius:0}],urlDots:[D.wp.backgroundColor.greenDimmer,D.wp.borderRadius(4),D.wp.p(2),{lineHeight:1,"&:hover":[D.wp.cursor.pointer,D.wp.backgroundColor.greenDefault]}],goButton:[D.wp.position.absolute,D.wp.right(4),D.wp.top("50%"),{transform:"translateY(-50%)"}],buttons:[(0,i._)({},D.kL.max(500,"root"),{"svg + span":{display:"none"},svg:{marginRight:0}})],navButton:[D.wp.p(6),D.wp.borderRadius(4),D.wp.flex.shrink(0),{border:"none"}],fakeUrl:[D.wp.fontSize(12),D.wp.border(),{boxSizing:"content-box"},D.wp.borderRadius(6),D.wp.px(8),D.wp.py(2),D.wp.flex.grow(1),D.wp.rowWithGap(4),D.wp.align.center],devtoolsErrorsBadge:[D.wp.position.absolute,D.wp.center,D.wp.textAlign.center,D.wp.backgroundColor.accentNegativeStronger,D.wp.color.accentNegativeDimmest,D.wp.right(0),D.wp.top(-2),D.wp.p(2),D.wp.minWidth(14),D.wp.height(14),D.wp.borderRadius(16),D.wp.fontSize(10)],screenSizeMenuWrapper:[D.wp.p(4)]});function eW(e){var n=e.children;return(0,c.Y)(G.m_,{tooltip:"Dev URLs are only active when someone is in the workspace. The dev URL is also subject to change. For production hosting, use Deployments.",children:n})}function eG(e){var n,t,r,i,o,a=e.url,s=e.webviewPageState,d=e.navigationState,p=e.forwardedPorts,m=e.devtoolsErrorCount,g=e.onToggleDevtools,v=e.onOpenPortSettings,w=e.onToggleAgentTheming,y=e.screenSize,b=e.setScreenSize,S=(0,f.A)(),Y=(0,h._P)({controlName:"flag-bufo-artist"}),A=(n=Y?"theme.json":null,t=(0,eD.A)().fs,i=(r=(0,l._)((0,u.useState)(!1),2))[0],o=r[1],(0,u.useEffect)(function(){if(!n){o(!1);return}var e=t.watchPathStat(n,{onNewStat:function(e){if(!e.exists||e.type===ex.pt.Directory){o(!1);return}o(!0)},onError:function(){o(!1)}});return function(){e(),o(!1)}},[t,n]),i),C=Y&&A,x=(0,l._)((0,u.useState)(!1),2),k=x[0],_=x[1],I=(0,c.Y)(eq,{});"external-page"===s.state?I=(0,c.Y)(eZ,{backToLocal:function(){return d.refresh()}}):"active"===s.state&&(I=(0,c.Y)(ej,{url:a,navigationState:d,forwardedPorts:p,onOpenPortSettings:v}));var F=(0,ek.a)();return(0,c.FD)(W.ui,{css:ez.root,row:!0,align:"center",justify:"space-between",children:[I,(0,c.Y)(R.S,{row:!0,children:(0,c.Y)(R.S,{css:ez.buttons,row:!0,align:"center",children:(0,c.FD)(R.S,{css:ez.devControls,row:!0,children:["active"===s.state?(0,c.FD)(c.FK,{children:[F?null:(0,c.FD)(eP.Wv,{isOpen:k,onOpenChange:function(e){_(e)},label:"Screen size",background:"higher",children:[(0,c.Y)(H.K0,{alt:"Screen size",css:eB,children:(0,c.Y)(eU.A,{size:12})}),(0,c.Y)(eK,{screenSize:y,setScreenSize:b})]}),C?(0,c.Y)(eh.$n,{size:"small",variant:"outlined",onClick:w,css:eB,text:"Theme",iconLeft:(0,c.Y)(eN.A,{})}):null,(0,c.FD)(R.S,{css:D.wp.position.relative,children:[C?(0,c.Y)(H.K0,{alt:"Devtools",css:eB,onClick:g,children:(0,c.Y)(eM.A,{size:12})}):(0,c.Y)(eh.$n,{size:"small",variant:"outlined",onClick:g,css:eB,text:"Devtools",iconLeft:(0,c.Y)(eM.A,{})}),m>0?(0,c.Y)(R.S,{css:ez.devtoolsErrorsBadge,children:(0,c.Y)(E.EY,{variant:"small",multiline:!1,children:m>99?"99+":m.toString()})}):null]})]}):null,(0,c.Y)(eW,{children:C?(0,c.Y)(eF.A,{css:eB,href:d.getExternalUrl(),target:"_blank",alt:"Open in the browser",onClick:function(){N()},children:(0,c.Y)(Z.A,{size:12})}):(0,c.Y)(B.v,{size:"small",variant:"outlined",css:eB,href:d.getExternalUrl(),target:"_blank",iconLeft:(0,c.Y)(Z.A,{}),text:S?"Open in the browser":"New tab",onClick:function(){N()},noNextLink:!0})})]})})})]})}function eV(e){var n=e.url,t=e.navigationState,r=e.forwardedPorts,i=e.onOpenPortSettings,o=t.canNavigateToInputRelativeUrl,a=t.navigateToInputRelativeUrl,s=t.inputRelativeUrl,d=t.setInputRelativeUrl,p=t.selectedPort,f=t.setPort,h=(0,l._)((0,u.useState)(!1),2),m=h[0],g=h[1],v=(0,eI.c)(),w=v("radioGroup");return(0,c.FD)(R.S,{css:ez.urlOptionsRoot,row:!0,gap:0,children:[(0,c.FD)(eP.Wv,{isOpen:m,onOpenChange:g,label:"Show URL Options",background:"higher",children:[(0,c.FD)("button",{css:m?ez.urlSelected:ez.url,children:[(0,c.Y)(eW,{children:(0,c.Y)(R.S,{css:ez.urlDots,children:"{...}"})}),".".concat(n.includes("replit.dev")?"replit.dev":"repl.co").concat((0,Y.r$)(p)?"":":"+p)]}),(0,c.FD)(W.ui,{css:ez.urlOptions,children:[(0,c.FD)(R.S,{css:ez.urlOptionsSection,gap:4,children:[(0,c.FD)(R.S,{css:ez.urlOptionsTitle,row:!0,gap:0,justify:"space-between",children:[(0,c.FD)(E.EY,{children:["Listening on ",(0,e_.A)("port",r.length),":"]}),(0,c.Y)(H.K0,{alt:"Networking tool",onClick:i,children:(0,c.Y)(eO.A,{})})]}),(0,c.Y)(eL.z,{tag:"fieldset",css:ez.portRadioGroup,name:w,value:p.toString(),onChange:function(e){f(parseInt(e.target.value,10)),g(!1)},children:r.map(function(e,n){return(0,c.FD)(R.S,{css:p===e.configuration.externalPort?ez.portOptionSelected:ez.portOption,children:[(0,c.Y)(eL.s,{id:v(e.configuration.externalPort),value:e.configuration.externalPort.toString()}),(0,c.Y)("label",{htmlFor:v(e.configuration.externalPort),css:ez.portOptionLabel,children:":".concat(e.configuration.localPort," → :").concat(e.configuration.externalPort)})]},"".concat(n,"-").concat(e.configuration.externalPort,":").concat(e.configuration.localPort))})})]}),(0,c.Y)(eE.A,{url:n})]})]}),(0,c.Y)(z.pd,{css:ez.urlPath2,style:m?{borderBottomRightRadius:0}:{},value:s,onKeyDown:function(e){"Enter"===e.key&&o&&a()},onChange:function(e){if(""===e.currentTarget.value){d("/");return}d(e.target.value)}})]})}function ej(e){var n=e.url,t=e.navigationState,r=e.forwardedPorts,i=e.onOpenPortSettings,o=t.canNavigateBack,a=t.navigateBack,l=t.canNavigateForward,s=t.navigateForward,u=t.canNavigateToInputRelativeUrl,d=t.navigateToInputRelativeUrl,p=t.refresh,f=(0,P.vm)(),h=(0,O.Jn)("webviewpane.reload");return(0,c.FD)(R.S,{css:ez.navControls,children:[(0,c.Y)(H.K0,{alt:"Back",tooltipDelay:"long",onClick:a,disabled:!o,css:ez.navButton,children:(0,c.Y)(V.A,{})}),(0,c.Y)(H.K0,{alt:"Forward",tooltipDelay:"long",onClick:s,disabled:!l,css:ez.navButton,children:(0,c.Y)(j.A,{})}),(0,c.Y)(H.K0,{alt:"Refresh".concat(h?" (".concat((0,O.LH)(h,f),")"):""),tooltipDelay:"long",onClick:p,css:ez.navButton,children:t.isRefreshing?(0,c.Y)(q.A,{}):(0,c.Y)(K.A,{})}),(0,c.FD)(R.S,{css:ez.urlWrapper,children:[(0,c.Y)(eV,{url:n,navigationState:t,forwardedPorts:r,onOpenPortSettings:i}),(0,c.Y)(W.ui,{elevated:!0,css:ez.goButton,children:(0,c.Y)(H.K0,{alt:"Go to URL",disabled:!u,onClick:d,size:18,tooltipContents:(0,c.Y)(O._y,{keyCombo:"Enter"}),children:(0,c.Y)(j.A,{})})})]})]})}function eZ(e){var n=e.backToLocal,t=(0,l._)((0,u.useState)(!1),2),r=t[0],i=t[1];return(0,c.FD)(R.S,{css:ez.navControls,children:[(0,c.Y)(eh.$n,{size:"small",variant:"outlined",onClick:function(){n(),i(!0)},loading:r,css:eB,text:"Back to my page",iconLeft:r?(0,c.Y)(q.A,{}):(0,c.Y)(V.A,{})}),(0,c.FD)(W.ui,{elevated:!0,css:ez.fakeUrl,children:[(0,c.Y)(G.m_,{tooltip:"The URL bar is not supported when navigating to external pages. You can open in a new tab to use your browser instead.",delay:"none",placement:"auto",children:(0,c.Y)(eo.A,{})}),(0,c.Y)(E.EY,{variant:"small",color:"dimmer",children:"External page"})]})]})}function eq(){return(0,c.Y)(R.S,{css:ez.navControls,children:(0,c.FD)(W.ui,{elevated:!0,css:ez.fakeUrl,children:[(0,c.Y)(G.m_,{tooltip:"Page is loading, please wait.",delay:"none",placement:"auto",children:(0,c.Y)(q.A,{})}),(0,c.Y)(E.EY,{variant:"small",color:"dimmer",children:"Loading your page"})]})})}function eK(e){var n=e.screenSize,t=e.setScreenSize;return(0,c.FD)(eT.W1,{"aria-label":"Screen size menu",onAction:function(e){if("Full size"===e)null==t||t(void 0);else{var n=eR.U.find(function(n){return n.title===e});if(!n)return;null==t||t(n)}},css:ez.screenSizeMenuWrapper,children:[(0,c.Y)(e$,{isSelected:void 0===n,title:"Full size"}),(0,c.Y)(eT.wv,{}),eR.U.map(function(e){return(0,c.Y)(e$,{isSelected:(null==n?void 0:n.title)===e.title,title:e.title},e.title)})]})}function e$(e){var n=e.isSelected,t=e.title;return(0,c.FD)(eT.iy,{id:t,textValue:t,children:[(0,c.Y)(E.EY,{children:t}),n?(0,c.Y)(em.A,{}):null]})}var eJ=t(22531),eQ=t(90629),eX=t(37743),e0=t(70906),e1=function e(n){var t=this,r=n.initialRelativeUrl,i=n.initialPort,o=n.onChange,a=n.navigateTo;(0,eX._)(this,e),this.history=[],this.historyIndex=-1,this.init=function(e,n){t.history.push({relativeUrl:e,port:n}),t.historyIndex=t.history.length-1,t.notifyChanges()},this.notifyChanges=function(){t.onChange(t.canGoBack(),t.canGoForward(),t.getCurrentRelativeUrl(),t.getCurrentPort(),t.isRefreshing)},this.canGoBack=function(){return t.historyIndex>0},this.canGoForward=function(){return t.historyIndex<t.history.length-1},this.getCurrentRelativeUrl=function(){return t.history[t.historyIndex].relativeUrl},this.getCurrentPort=function(){return t.history[t.historyIndex].port},this.push=function(e,n){(e!==t.getCurrentRelativeUrl()||n!==t.getCurrentPort())&&(t.history=t.history.slice(0,t.historyIndex+1),t.history.push({relativeUrl:e,port:n}),t.historyIndex=t.history.length-1),t.notifyChanges()},this.relativeUrlUpdate=function(e){t.push(e,t.getCurrentPort())},this.back=function(){U({actionType:"history_back"}),t.canGoBack()&&(t.historyIndex-=1,t.navigate(t.getCurrentRelativeUrl(),t.getCurrentPort()))},this.forward=function(){U({actionType:"history_forward"}),t.canGoForward()&&(t.historyIndex+=1,t.navigate(t.getCurrentRelativeUrl(),t.getCurrentPort()))},this.navigate=function(e,n){var r=null!=n?n:t.getCurrentPort();t.navigateTo.current(e,r),t.push(e,r)},this.refresh=function(){var e,n;U({actionType:"refresh"}),t.isRefreshing=!0,t.notifyChanges(),t.navigateTo.current(null!==(e=t.getCurrentRelativeUrl())&&void 0!==e?e:"/",null!==(n=t.getCurrentPort())&&void 0!==n?n:80).finally(function(){t.isRefreshing=!1,t.notifyChanges()})},this.setPort=function(e){var n=t.getCurrentRelativeUrl();t.navigate(n,e)},this.onChange=o,this.isRefreshing=!1,this.navigateTo=a,this.init(r,i)};function e2(e){var n,t=e.iframeSrc,r=e.port,i=e.path,o=e.id;if(e.navigateThroughWorkspaceDevtools){var a=(0,Y.jq)(t,r);a.searchParams.set("initialPath",i),a.searchParams.set("id",o),n=a.href}else{var l=new URL(i,t);r&&(l=(0,Y.jq)(l.toString(),r)),n=l.toString()}return n}var e4=t(35482),e5=t(86105),e8=t(32253),e3=t(13128),e6=t(51408),e7=t(95570),e9=e8.ZU.Object({primary:e8.ZU.String(),variant:e8.ZU.Union([e8.ZU.Literal("professional"),e8.ZU.Literal("tint"),e8.ZU.Literal("vibrant")]),appearance:e8.ZU.Union([e8.ZU.Literal("light"),e8.ZU.Literal("dark"),e8.ZU.Literal("system")]),radius:e8.ZU.Number()}),ne=function(e){try{var n=JSON.parse(e),t=e3.oj(e9,n);return new e6.A(t.primary),t}catch(e){return e7.error(e),null}},nn=t(94146),nt=t(15817),nr=t(76400),ni=t(84296);function no(e){return(0,c.Y)(ni.Ay,(0,a._)((0,o._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M15 3.75H5v-1.5h10A4.75 4.75 0 0 1 19.75 7v10A4.75 4.75 0 0 1 15 21.75H5v-1.5h10A3.25 3.25 0 0 0 18.25 17V7A3.25 3.25 0 0 0 15 3.75Z",clipRule:"evenodd"})}))}var na=t(90735),nl=[{label:"Light",value:"light",icon:(0,c.Y)(na.A,{})},{label:"Dark",value:"dark",icon:(0,c.Y)(nr.A,{})},{label:"System",value:"system",icon:(0,c.Y)(eO.A,{})}],ns=[{label:"None",value:0,icon:(0,c.Y)(function(e){return(0,c.Y)(ni.Ay,(0,a._)((0,o._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M18.25 3.75H5v-1.5h14.75v19.5H5v-1.5h13.25V3.75Z",clipRule:"evenodd"})}))},{})},{label:"Small",value:.5,icon:(0,c.Y)(no,{})},{label:"Big",value:1,icon:(0,c.Y)(function(e){return(0,c.Y)(ni.Ay,(0,a._)((0,o._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M10 3.75H5v-1.5h5c5.385 0 9.75 4.365 9.75 9.75s-4.365 9.75-9.75 9.75H5v-1.5h5a8.25 8.25 0 0 0 0-16.5Z",clipRule:"evenodd"})}))},{})}],nc={variant:"professional",primary:"hsl(222.2 47.4% 11.2%)",appearance:"light",radius:.5},nu={variant:[{label:"Professional",value:"professional"},{label:"Tint",value:"tint"},{label:"Vibrant",value:"vibrant"}],primary:[{value:"oklch(70% 0.1 20)",label:"Red",hex:"#d68585"},{value:"oklch(70% 0.1 50)",label:"Orange",hex:"#d18c65"},{value:"oklch(70% 0.1 ".concat(87,")"),label:"Yellow",hex:"#b99a51"},{value:"oklch(70% 0.1 ".concat(120,")"),label:"Lime",hex:"#96a85e"},{value:"oklch(70% 0.1 140)",label:"Green",hex:"#7dae72"},{value:"oklch(70% 0.1 170)",label:"Teal",hex:"#55b395"},{value:"oklch(70% 0.1 200)",label:"Cyan",hex:"#40b1b7"},{value:"oklch(70% 0.1 230)",label:"Blue",hex:"#54aad1"},{value:"oklch(70% 0.1 260)",label:"Indigo",hex:"#7a9fdd"},{value:"oklch(70% 0.1 290)",label:"Violet",hex:"#9d94d9"},{value:"oklch(70% 0.1 320)",label:"Magenta",hex:"#ba8ac5"},{value:"oklch(70% 0.1 350)",label:"Pink",hex:"#ce84a7"}],appearance:nl,radius:ns},nd=t(32986),np=t(67020),nf=t(22498),nh=(0,nf.v)(["size"]),nm=nh.cssVars,ng=nh.styleTokens,nv=(0,u.forwardRef)(function(e,n){var t=e.size,r=(0,L._)(e,["size"]);return(0,c.Y)(np.q,(0,a._)((0,o._)({style:(0,i._)({},nm.size,"".concat(null!=t?t:16,"px")),css:nw},r),{ref:n}))}),nw=(0,M.AH)([{width:ng.size,height:ng.size},D.wp.borderRadius("default"),{boxShadow:"inset 0 0 0 1px rgba(0, 0, 0, 0.1)"}]),ny=t(34231),nb=t(95949),nS=t(12966),nY=t(81207);function nA(e){return(0,c.FD)(ni.Ay,(0,a._)((0,o._)({},e),{children:[(0,c.FD)("g",{clipPath:"url(#clip0_7288_367)",children:[(0,c.Y)("path",{fill:k.LU.backgroundDefault,d:"M0 2a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v20a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Z"}),(0,c.Y)("path",{fill:k.LU.white,d:"M7.5 5.25a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0ZM9 5.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H9.75A.75.75 0 0 1 9 5.25Z",opacity:".3"}),(0,c.Y)("path",{fill:k.LU.white,d:"M3 19.5A1.5 1.5 0 0 1 4.5 18h3a1.5 1.5 0 0 1 0 3h-3A1.5 1.5 0 0 1 3 19.5Z",opacity:".7"}),(0,c.Y)("path",{fill:k.LU.accentPrimaryDefault,d:"M10.5 19.5A1.5 1.5 0 0 1 12 18h7.5a1.5 1.5 0 0 1 0 3H12a1.5 1.5 0 0 1-1.5-1.5Z"}),(0,c.Y)("rect",{width:"18",height:"6",x:"3",y:"9",fill:"#fff",opacity:".3",rx:".75"})]}),(0,c.Y)("defs",{children:(0,c.Y)("clipPath",{id:"clip0_7288_367",children:(0,c.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))}function nC(e){return(0,c.FD)(ni.Ay,(0,a._)((0,o._)({},e),{children:[(0,c.FD)("g",{clipPath:"url(#clip0_7288_368)",children:[(0,c.Y)("path",{fill:k.LU.foregroundDefault,d:"M0 2a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v20a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Z"}),(0,c.Y)("path",{fill:"#74767A",d:"M7.5 5.25a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0ZM9 5.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H9.75A.75.75 0 0 1 9 5.25Z",opacity:".3"}),(0,c.Y)("path",{fill:k.LU.outlineStrongest,d:"M3 19.5A1.5 1.5 0 0 1 4.5 18h3a1.5 1.5 0 0 1 0 3h-3A1.5 1.5 0 0 1 3 19.5Z"}),(0,c.Y)("path",{fill:k.LU.accentPrimaryDefault,d:"M10.5 19.5A1.5 1.5 0 0 1 12 18h7.5a1.5 1.5 0 0 1 0 3H12a1.5 1.5 0 0 1-1.5-1.5Z"}),(0,c.Y)("rect",{width:"18",height:"6",x:"3",y:"9",fill:"#74767A",opacity:".3",rx:".75"})]}),(0,c.Y)("defs",{children:(0,c.Y)("clipPath",{id:"clip0_7288_368",children:(0,c.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))}function nx(e){return(0,c.FD)(ni.Ay,(0,a._)((0,o._)({},e),{children:[(0,c.FD)("g",{clipPath:"url(#clip0_7288_369)",children:[(0,c.Y)("path",{fill:k.LU.accentPrimaryStrongest,d:"M0 2a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v20a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Z"}),(0,c.Y)("path",{fill:k.LU.accentPrimaryDefault,d:"M7.5 5.25a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0ZM9 5.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H9.75A.75.75 0 0 1 9 5.25Z",opacity:".5"}),(0,c.Y)("path",{fill:k.LU.white,d:"M3 19.5A1.5 1.5 0 0 1 4.5 18h3a1.5 1.5 0 0 1 0 3h-3A1.5 1.5 0 0 1 3 19.5Z",opacity:".7"}),(0,c.Y)("path",{fill:k.LU.accentPrimaryDefault,d:"M10.5 19.5A1.5 1.5 0 0 1 12 18h7.5a1.5 1.5 0 0 1 0 3H12a1.5 1.5 0 0 1-1.5-1.5Z"}),(0,c.Y)("rect",{width:"18",height:"6",x:"3",y:"9",fill:k.LU.accentPrimaryDefault,opacity:".5",rx:".75"})]}),(0,c.Y)("defs",{children:(0,c.Y)("clipPath",{id:"clip0_7288_369",children:(0,c.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))}function nk(e){return(0,c.FD)(ni.Ay,(0,a._)((0,o._)({},e),{children:[(0,c.FD)("g",{clipPath:"url(#clip0_7288_370)",children:[(0,c.Y)("path",{fill:k.LU.accentPrimaryDefault,d:"M0 2a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v20a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Z"}),(0,c.Y)("path",{fill:"#fff",d:"M7.5 5.25a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0ZM9 5.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H9.75A.75.75 0 0 1 9 5.25Z",opacity:".5"}),(0,c.Y)("path",{fill:"#fff",d:"M3 19.5A1.5 1.5 0 0 1 4.5 18h3a1.5 1.5 0 0 1 0 3h-3A1.5 1.5 0 0 1 3 19.5Z",opacity:".6"}),(0,c.Y)("path",{fill:"#fff",d:"M10.5 19.5A1.5 1.5 0 0 1 12 18h7.5a1.5 1.5 0 0 1 0 3H12a1.5 1.5 0 0 1-1.5-1.5Z"}),(0,c.Y)("rect",{width:"18",height:"6",x:"3",y:"9",fill:"#fff",opacity:".5",rx:".75"})]}),(0,c.Y)("defs",{children:(0,c.Y)("clipPath",{id:"clip0_7288_370",children:(0,c.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))}var n_=function(e){var n=e.appearance,t=e.onChange;return(0,c.Y)(nS.l,{items:nu.appearance,selectedKey:null!=n?n:null,onSelectionChange:function(e){return t(e)},"aria-label":"Appearance",children:function(e){return(0,c.Y)(nb.nh,{label:e.label,icon:e.icon,id:e.value},e.value)}})},nD=function(e){var n=e.primary,t=e.onChange,r=!nu.primary.find(function(e){return e.value===n});return(0,c.FD)(nS.l,{onSelectionChange:function(e){return t(e)},selectedKey:r?"custom":null!=n?n:null,"aria-label":"Primary Color",children:[nu.primary.map(function(e){return(0,c.Y)(nb.nh,{icon:(0,c.Y)(nv,{color:e.hex}),label:e.label,id:e.value},e.value)}),r?(0,c.Y)(nb.nh,{label:"Custom Color",id:"custom",isDisabled:!0},"custom"):null]})},nE=function(e){var n=e.radius,t=e.onChange,r=!nu.radius.find(function(e){return e.value===n});return(0,c.FD)(nS.l,{selectedKey:r?"custom":null!=n?n:null,onSelectionChange:function(e){return t(e)},"aria-label":"Radius",children:[nu.radius.map(function(e){return(0,c.Y)(nb.nh,{label:e.label,id:e.value,icon:e.icon},e.value)}),r?(0,c.Y)(nb.nh,{icon:(0,c.Y)(no,{}),label:"Custom Radius",id:"custom",isDisabled:!0},"custom"):null]})};function nR(e){var n,t,r,i,l=e.onChange,s=e.current,u=e.canReset,d=e.onReset,p=e.handleClose;return(0,c.Y)(nt.M,(0,a._)((0,o._)({},(0,nd.l)({align:"center",justify:"center"})),{children:(0,c.FD)(ny.Y,{role:"presentation",children:[(0,c.Y)(n_,{appearance:null!==(n=null==s?void 0:s.appearance)&&void 0!==n?n:null,onChange:function(e){return l((0,a._)((0,o._)({},nc,s),{appearance:e}))}}),(0,c.Y)(nD,{primary:null!==(t=null==s?void 0:s.primary)&&void 0!==t?t:null,onChange:function(e){return l((0,a._)((0,o._)({},nc,s),{primary:e}))}}),(0,c.Y)(nS.l,{items:nu.variant,onSelectionChange:function(e){return s?l((0,a._)((0,o._)({},s),{variant:e})):l((0,a._)((0,o._)({},nc),{variant:e}))},selectedKey:null!==(r=null==s?void 0:s.variant)&&void 0!==r?r:null,"aria-label":"Theme Variant",children:function(e){var n;return(0,c.Y)(nb.nh,{icon:nI(e.value,null!==(n=null==s?void 0:s.appearance)&&void 0!==n?n:null),label:e.label,id:e.value},e.value)}}),(0,c.Y)(nE,{radius:null!==(i=null==s?void 0:s.radius)&&void 0!==i?i:null,onChange:function(e){return l((0,a._)((0,o._)({},nc,s),{radius:e}))}}),(0,c.Y)(eh.$n,{disabled:!u,text:"Undo",onClick:d,iconLeft:(0,c.Y)(nY.A,{})}),(0,c.Y)(eh.$n,{text:"","aria-label":"Close",iconLeft:(0,c.Y)(ei.A,{}),onClick:p})]})}))}var nI=function(e,n){switch(e){case"tint":return(0,c.Y)(nx,{});case"vibrant":return(0,c.Y)(nk,{});case"professional":if("dark"===n)return(0,c.Y)(nA,{});return(0,c.Y)(nC,{})}},nF=function(){var e,n,t,i,o,a,c,d,p,f,g,v,w,y=(0,h._P)({controlName:"flag-bufo-artist"}),b=(0,l._)((0,u.useState)(null),2),S=b[0],Y=b[1],A=(e=y?"./theme.json":null,n=(0,eD.A)().fs,(0,u.useCallback)((t=(0,r._)(function(t){var r;return(0,s.YH)(this,function(i){switch(i.label){case 0:if(!e)return[2];return[4,n.readFile(e)];case 1:if((r=i.sent()).error)return[2];return[2,n.writeFile(e,t(r.content.toString()))]}})}),function(e){return t.apply(this,arguments)}),[n,e]));i=y?"./theme.json":null,o=(0,eD.A)().fs,a=(0,m.A)(function(e){if(e){var n=ne(e);Y(null!=n?n:null)}}),(0,u.useEffect)(function(){if(i)return o.watchFile(i,{onChange:function(e){a.current(e.toString())},onError:function(){a.current(null)},onMoveOrDelete:function(){a.current(null)}})},[o,a,i]);var C=(0,u.useCallback)(function(e){A(function(){return JSON.stringify(e,null,2)})},[A]),x=(0,l._)((d=(c=(0,l._)((0,u.useState)(0),2))[0],p=c[1],f=(0,eD.A)().git,g=(0,u.useCallback)((0,r._)(function(){return(0,s.YH)(this,function(e){switch(e.label){case 0:return[4,f.restoreFiles(["./theme.json"],"HEAD")];case 1:return e.sent(),p(function(e){return e+1}),[2]}})}),[f]),(w=(0,nn.A)((v=(0,r._)(function(e){var n;return(0,s.YH)(this,function(t){switch(t.label){case 0:return[4,e.status()];case 1:if((n=t.sent()).error)return[2,n];return[2,{error:null,data:n.changes.some(function(e){return"theme.json"===e.path})}]}})}),function(e){return v.apply(this,arguments)}),[d]))&&!w.error?[w.data,g]:[!1,g]),2);return[S,C,x[0],x[1]]},nT=function(e){var n=e.handleClose,t=(0,l._)(nF(),4),r=t[0],i=t[1],o=t[2],a=t[3],s=(0,u.useCallback)(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];(0,b.u4)(b.AZ.AGENT_THEME_RESET),a.apply(void 0,(0,e5._)(n))},[a]),d=(0,u.useCallback)(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];(0,b.u4)(b.AZ.AGENT_THEME_CHANGED),i.apply(void 0,(0,e5._)(n))},[i]);return(0,c.Y)(nR,{current:r,onChange:d,canReset:o,onReset:s,handleClose:n})},nP=t(12722),nL=(0,nf.v)(["width","height","transform","borderRadius","border","colorScheme"]),nU=nL.cssVars,nN=nL.styleTokens,nO=80;function nM(e,n){var t=function(e,n){var t,r,i,o=void 0;if((null==e?void 0:null===(t=e.ports)||void 0===t?void 0:t.type)==="external")o=null==e?void 0:null===(i=e.ports)||void 0===i?void 0:i.port;else if((null==e?void 0:null===(r=e.ports)||void 0===r?void 0:r.type)==="local"){var a=n.find(function(n){var t;return n.configuration.localPort===(null===(t=e.ports)||void 0===t?void 0:t.port)});o=null==a?void 0:a.configuration.externalPort}return o}(e,n);return t?t:n.length>0?n.find(function(e){return 80===e.configuration.externalPort})?80:n[0].configuration.externalPort:void 0}var nB=(0,_.x)({screenshotWrapper:{width:"100%",height:"100%",backgroundSize:"cover"},iframeWrapper:[D.wp.flex.growAndShrink(1),D.wp.overflow("hidden"),{'&[data-is-readonly-preview="true"]':[{cursor:"not-allowed"}]}],iframeMiddle:[D.wp.position.relative,{borderRadius:nN.borderRadius,border:nN.border,width:nN.width,height:nN.height}],iframeInner:[D.wp.position.absolute,{top:0,left:0,overflow:"hidden",width:nN.width,height:nN.height,transform:nN.transform,transformOrigin:"top left"}],scalingFactor:[D.wp.color.foregroundDimmest,D.wp.fontSize(k.LU.fontSizeSmall),{position:"absolute",top:46,left:0,right:0,textAlign:"center"}],desktopAppWebview:[D.wp.flex.growAndShrink(1),{border:"none",backgroundColor:k.LU.white}],iframe:[D.wp.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:k.LU.white,colorScheme:nN.colorScheme}],self:[D.wp.backgroundColor.backgroundHigher,D.wp.height("100%"),D.wp.borderRadius(4),{overflow:"hidden"}]}),nH=(0,u.forwardRef)(function(e,n){var t,_,D,E,I,F,P,L,N,O,M,B,H,z,W,G,V,j,Z,q,K,$,J,X,ee,en,et,er,ei,eo,ea,es,ec,eu,ed,ep,ef,eh,em,eg,ev,ew,ey,eb,eS,eY,eA,ex,ek,e_,eD,eE,eR,eI,eF,eT,eP,eL,eU,eN,eO,eM,eB,eH,ez,eW,eV=e.initialPort,ej=e.initialPath,eZ=void 0===ej?"/":ej,eq=e.shouldShowAgentDeployBanner,eK=e.openPane,e$=e.containerRef,eX=e.openNetworkingTool,e5=e.ports,e8=e.container,e3=e.className,e6=e.previewScreenSize,e7=e.setPreviewScreenSize,e9=e.onCurrentRelativeUrlChanged,ne=e.isMobilePIP,nn=(0,l._)((0,u.useState)(!1),2),nt=nn[0],nr=nn[1],ni=(0,l._)((0,u.useState)(!0),2),no=ni[0],na=ni[1],nl=(0,e4.rN)(),ns=(0,e4.nb)(),nc=(0,u.useId)(),nu=(0,g.A)(),nd=(0,f.A)(),np=(0,x.qX)(),nf=(0,A.th)(eV),nh=(0,u.useRef)(null),nm=(0,u.useRef)(!1),ng=(0,l._)((0,u.useState)(0),2),nv=ng[0],nw=ng[1],ny=(t=({desiredScreenSize:e6}).desiredScreenSize,D=(_=(0,l._)((0,u.useState)(void 0),2))[0],E=_[1],{resizeRef:(0,w.A)(function(e){E(e)}),screenSize:(0,u.useMemo)(function(){if(t&&D){var e=D.width-80,n=D.height-80,r=t.screen,i=r.width,o=r.height,a=i/o,l=n*a,s=e,c=e/a;l<=e&&(s=l,c=n);var u=Math.min(s/i,c/o);return{width:i,height:o,scaledWidth:s,scaledHeight:c,scale:u}}},[t,D])}),nb=ny.resizeRef,nS=ny.screenSize,nY=(0,u.useMemo)(function(){return!nd&&!np&&!nf},[nd,np,nf]),nA=(0,Y.Ik)({ports:e5,container:e8,addDevToolsSuffix:nY}),nC=null!=nA,nx=(0,C.w)(e5),nk=(0,v.g)(),n_=(I=nh,F=(0,l._)((0,u.useState)({visible:new d.N(!1)}),1)[0],P=(0,u.useRef)(null),L=(0,u.useCallback)(function(e){if("screenshot"===e.type){var n;null===(n=P.current)||void 0===n||n.call(P,e.result.ok?e.result.data:null)}},[]),N=(0,u.useCallback)((0,r._)(function(){return(0,s.YH)(this,function(e){return[2,Promise.race([new Promise(function(e){var n,t;P.current=e,null===(t=I.current)||void 0===t||null===(n=t.contentWindow)||void 0===n||n.postMessage({type:"takeScreenshot",source:"manual"},"*")}),new Promise(function(e){setTimeout(function(){return e(null)},3e3)})]).finally(function(){P.current=null})]})}),[I]),(0,u.useEffect)(function(){return F.visible.subscribe(function(e){var n,t;null===(t=I.current)||void 0===t||null===(n=t.contentWindow)||void 0===n||n.postMessage({type:"drawToolsVisibility",source:"manual",visibility:e},"*")})},[I,F]),(0,u.useMemo)(function(){return{state:F,onReceiveDrawEvent:L,onTakeScreenshot:N}},[L,F,N])),nD=(O=(0,u.useRef)([]),M=(0,S.I)(function(e){return(0,r._)(function(){var n;return(0,s.YH)(this,function(t){return(n=O.current,O.current=[],n&&n.length)?[2,e.agentToolWebviewLogs.store.rpc(n)]:[2]})})},[]),B=(0,u.useMemo)(function(){return(0,p.A)((0,r._)(function(){return(0,s.YH)(this,function(e){return[2,null==M?void 0:M()]})}),{wait:500})},[M]),(0,u.useCallback)(function(e,n){O.current.push({method:e,message:n}),B()},[B]));(0,u.useEffect)(function(){nd&&nC&&nh.current.addEventListener("dom-ready",function(){nm.current=!0})},[nd,nC]),(0,u.useEffect)(function(){nt&&(0,b.u4)(b.AZ.AGENT_THEME_BAR_SHOWN)},[nt]);var nE=(0,u.useCallback)((H=(0,r._)(function(e,n){var t,r;return(0,s.YH)(this,function(i){return nh.current&&(null===(t=nh.current)||void 0===t?void 0:t.contentWindow)&&(null==nA?void 0:nA.iframeSrc)?(r=e2({id:nc,iframeSrc:nA.iframeSrc,port:n,path:e,navigateThroughWorkspaceDevtools:nY}),nh.current.src=r,[2,new Promise(function(e){var n,t,r=function(){var e,n;clearTimeout(a),null===(e=nh.current)||void 0===e||e.removeEventListener("load",i),null===(n=nh.current)||void 0===n||n.removeEventListener("error",o)},i=function(){r(),e()},o=function(){r(),e()},a=setTimeout(function(){r(),e()},1e4);null===(n=nh.current)||void 0===n||n.addEventListener("load",i),null===(t=nh.current)||void 0===t||t.addEventListener("error",o)})]):[2]})}),function(e,n){return H.apply(this,arguments)}),[nc,nY,nA]),nR=(0,m.A)(nE),nI=(0,l._)((0,u.useState)(null),2),nF=nI[0],nL=nI[1],nN=(0,u.useCallback)(function(e){return nL(e)},[nL]),nO=(0,x.GK)({isSupported:np,navigateIframeRef:nR,onReceiveWebviewLog:nD,onReceiveWebviewScreenshot:nN,initialPort:eV,initialPath:eZ,baseUrl:null==nA?void 0:nA.baseUrl}),nM=(W=(z={replId:nu,webviewId:nc,isHTML:nk,iframeOrWebviewRef:nh,iframeSrc:null==nA?void 0:nA.iframeSrc,onDevtoolsErrorCountChange:nw,onReceiveWebviewLog:nD,onReceiveDrawEvent:n_.onReceiveDrawEvent,bonsaiWebviewBridge:nO,onThirdPartyCookieCheck:function(e){e||na(!1)}}).replId,G=z.webviewId,V=z.isHTML,j=z.iframeOrWebviewRef,Z=z.iframeSrc,q=z.onDevtoolsErrorCountChange,K=z.onReceiveDrawEvent,$=z.onReceiveWebviewLog,J=z.bonsaiWebviewBridge,X=z.onThirdPartyCookieCheck,en=(ee=(0,l._)((0,u.useState)({state:"loading",relativeUrl:null}),2))[0],et=ee[1],er=(0,f.A)(),(0,u.useEffect)(function(){if(er&&Z){if(!j.current)throw Error("Expected iframe to be defined when iframerc exists");var e=j.current,n=new URL(Z);return e.addEventListener("did-navigate",t),e.addEventListener("did-navigate-in-page",t),function(){e.removeEventListener("did-navigate",t),e.removeEventListener("did-navigate-in-page",t)}}function t(e){var t=new URL(e.url),r=t.pathname+t.search+t.hash;if(t.hostname!==n.hostname){et(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});return}et(function(e){return"active"===e.state&&e.relativeUrl===r?e:{state:"active",relativeUrl:r}})}},[er,Z,j]),(0,u.useEffect)(function(){if(J)return J.path.subscribe(function(e){et(function(n){return"active"===n.state&&"path"===n.relativeUrl?n:{state:"active",relativeUrl:e}})})},[J]),(0,u.useEffect)(function(){if(!er&&!J&&Z){var e=new URL(Z);return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}}function n(n){if(n.origin&&"null"!==n.origin&&new URL(n.origin).hostname===e.hostname&&"object"===(0,eJ._)(n.data)&&(null===(t=n.data)||void 0===t?void 0:t.type)){var t,r=n.data;if(null==r||!r.id||r.id===G)switch(r.type){case"event":var i=n.data,l=i.event,s=i.payload;"error"===l?eQ.Cp(s):(0,b.u4)(l,(0,a._)((0,o._)({},s),{replId:W,isHTML:V}));break;case"show-badge":q(n.data.count);break;case"forward-log":$(r.method,r.message);break;case"screenshot":K(r);break;case"third-party-cookie-check":X(r.payload.enabled);break;case"page-navigation":if(r.payload.isExternal){et(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});return}var c=r.payload.relativeUrl;et(function(e){return"active"===e.state&&e.relativeUrl===c?e:{state:"active",relativeUrl:c}})}}}},[W,G,er,V,Z,j,q,$,K,J,X]),{webviewPageState:en}).webviewPageState;(0,u.useEffect)(function(){e9&&nM.relativeUrl&&e9(nM.relativeUrl)},[e9,nM]);var nH=(0,u.useCallback)((ei=(0,r._)(function(e,n){var t;return(0,s.YH)(this,function(r){return(nw(0),n_.state.visible.set(!1),nA)?nd?nm.current?(t=e2({id:nc,iframeSrc:nA.iframeSrc,port:n,path:e,navigateThroughWorkspaceDevtools:nY}),[2,nh.current.loadURL(t)]):[2]:(nO&&nO.handleNavigateTo({port:null!=n?n:80,path:e,base:nA.baseUrl}),[2,nE(e,n)]):[2]})}),function(e,n){return ei.apply(this,arguments)}),[n_.state.visible,nA,nd,nO,nE,nc,nY]),nz=(ea=(eo={initialPort:eV,initialPath:eZ,presentationalUrl:null==nA?void 0:nA.presentationUrl,webviewPageState:nM,navigateTo:function(e,n){return nH(e,n)}}).initialPort,es=eo.initialPath,ec=eo.presentationalUrl,eu=eo.webviewPageState,ed=eo.navigateTo,ef=(ep=(0,l._)((0,u.useState)(!1),2))[0],eh=ep[1],eg=(em=(0,l._)((0,u.useState)(!1),2))[0],ev=em[1],ey=(ew=(0,l._)((0,u.useState)("Loading..."),2))[0],eb=ew[1],eY=(eS=(0,l._)((0,u.useState)(80),2))[0],eA=eS[1],ek=(ex=(0,l._)((0,u.useState)(!1),2))[0],e_=ex[1],eD=(0,u.useCallback)(function(e,n,t,r,i){eh(e),ev(n),eb(t),eA(r),e_(i)},[]),eE=(0,m.A)(ed),eR=(0,m.A)(ea),eI=(0,m.A)(es),eF=(0,e0.A)(function(){return new e1({initialRelativeUrl:eI.current,initialPort:eR.current,onChange:eD,navigateTo:eE})},[eI,eR,eD,eE]),(0,u.useEffect)(function(){"loading"===eu.state&&eR.current!==eY&&eF.setPort(eR.current)},[ea,eR,eF,eY,eu]),(0,u.useEffect)(function(){"active"===eu.state&&eF.relativeUrlUpdate(eu.relativeUrl)},[eu.state,eu.relativeUrl,eF]),(0,u.useEffect)(function(){eF.navigate(eI.current,ea)},[ea,eI,eF]),eT=(0,u.useCallback)(function(){U({actionType:"navigated_to",path:ey}),eF.navigate(ey)},[ey,eF]),eP=(0,u.useCallback)(function(){return(0,Y.jq)(ec||"",eY)+ey},[ey,ec,eY]),eL=(0,u.useCallback)(function(){return eF.back()},[eF]),eU=(0,u.useCallback)(function(){return eF.forward()},[eF]),eN=(0,u.useCallback)(function(){return eF.refresh()},[eF]),eO=(0,u.useCallback)(function(e){return eF.setPort(e)},[eF]),{canNavigateBack:ef,canNavigateForward:eg,navigateBack:eL,navigateForward:eU,canNavigateToInputRelativeUrl:(0,u.useMemo)(function(){return ey!==eu.relativeUrl},[ey,eu.relativeUrl]),navigateToInputRelativeUrl:eT,inputRelativeUrl:ey,setInputRelativeUrl:eb,refresh:eN,setPort:eO,selectedPort:eY,getExternalUrl:eP,isRefreshing:ek}),nW=(0,C.ff)(nz.selectedPort);(0,u.useEffect)(function(){nW&&nW.configuration.isLocalhost&&"loading"===nM.state&&nz.refresh()},[nz,nW,nM.state]),(0,u.useImperativeHandle)(n,function(){return{refresh:function(){nz.refresh()},navigateTo:nH}},[nH,nz]);var nG=(0,nP.D)().isDarkColorScheme,nV=(0,h._P)({controlName:"flag-skip-deployment-target"}),nj=!ne,nZ=!nO&&nj;return((0,u.useEffect)(function(){nO&&nO.setInsets({top:nf?48:40})},[nO,nf]),nA)?(eM=ne||nf||!nF?(0,c.Y)(R.S,{css:nB.iframeWrapper,"data-is-readonly-preview":nf,innerRef:nb,align:"center",justify:"center",children:(0,c.Y)(R.S,{style:(eH={overflow:"hidden"},(0,i._)(eH,nU.width,nS?"".concat(nS.scaledWidth,"px"):"100%"),(0,i._)(eH,nU.height,nS?"".concat(nS.scaledHeight,"px"):"100%"),(0,i._)(eH,nU.borderRadius,nS?k.LU.space4:"0"),(0,i._)(eH,nU.border,nS?"1px solid ".concat(k.LU.outlineDefault):"none"),eH),css:nB.iframeMiddle,children:(0,c.Y)(R.S,{style:(ez={},(0,i._)(ez,nU.width,nS?"".concat(nS.width,"px"):"100%"),(0,i._)(ez,nU.height,nS?"".concat(nS.height,"px"):"100%"),(0,i._)(ez,nU.transform,"scale(".concat(null!==(eB=null==nS?void 0:nS.scale)&&void 0!==eB?eB:1,")")),ez),css:nB.iframeInner,children:nd?(0,c.Y)("webview",(0,o._)({"data-cy":"ws-webview",ref:nh,src:e2({iframeSrc:nA.iframeSrc,port:eV,path:eZ,id:nc,navigateThroughWorkspaceDevtools:nY}),style:(0,i._)({},nU.colorScheme,nG?"dark":"light"),css:nB.desktopAppWebview},y.A)):(0,c.Y)("iframe",(0,o._)({title:"webview","data-cy":"ws-webview",ref:nh,src:e2({iframeSrc:nA.iframeSrc,port:eV,path:eZ,id:nc,navigateThroughWorkspaceDevtools:nY}),style:(0,i._)({},nU.colorScheme,nG?"dark":"light"),css:nB.iframe},y.A))})})}):(0,c.Y)("div",{css:nB.screenshotWrapper,style:{backgroundImage:"url(".concat(nF,")")}}),nf)?(0,c.FD)(R.S,{className:e3,css:nB.self,innerRef:e$,children:[nj?(0,c.Y)(T,{}):null,eM]}):(eW=ne?null:np?(0,c.Y)(Q,{webviewPageState:nM,navigationState:nz,bonsaiWebviewBridge:nO}):(0,c.Y)(eG,{replId:nu,url:nA.presentationUrl,webviewPageState:nM,navigationState:nz,forwardedPorts:nx,devtoolsErrorCount:nv,onToggleAgentTheming:function(){nr(function(e){return!e})},onToggleDevtools:function(){if(U({actionType:"devtools_opened"}),nw(0),!nd){var e,n;null===(n=nh.current)||void 0===n||null===(e=n.contentWindow)||void 0===e||e.postMessage({type:"toggleDevtools",source:"manual"},"*");return}var t=nh.current;t&&nm&&(t.isDevToolsOpened()?t.closeDevTools():t.openDevTools())},onOpenPortSettings:eX,screenSize:e6,setScreenSize:e7}),(0,c.FD)(R.S,{className:e3,css:nB.self,innerRef:e$,children:[eW,nt?(0,c.Y)(nT,{handleClose:function(){return nr(!1)}}):null,nZ?(0,c.Y)(eC,{replId:nu,shouldShowAgentDeployBanner:eq,onClick:function(){return eK({type:"deployments",flow:(0,a._)((0,o._)({},nV&&{skipIntro:eq}),{isAgentDeployment:eq})})}}):null,no||nl?null:(0,c.Y)(el,{navigationState:nz,onDismiss:function(){return ns(!0)}}),nS?(0,c.FD)(R.S,{css:nB.scalingFactor,children:[Math.round(100*nS.scale),"%"]}):null,eM]})):null})},14926:(e,n,t)=>{"use strict";t.d(n,{H:()=>l});var r=t(12694),i=t(30316),o=t(72004),a=t(26496);function l(){var e=(0,r._)((0,i.Ko)({fetchPolicy:"network-only",ssr:!1}),1)[0];(0,a.zv)("received-completed-event",function(n){var t,r=n.event.contents.contents;(0,o.VFn)(r,"agentTimelineEventContents")&&(null===(t=r.agentTimelineEventContents.toolData)||void 0===t?void 0:t.$kind)==="commitData"&&e()})}},15278:(e,n,t)=>{"use strict";t.d(n,{P:()=>M,A:()=>H});var r,i=t(29935),o=t(12694),a=t(86105),l=t(82643),s=t(21462),c=t(90629),u=t(81962),d=t(80481),p=t(15297),f=t(96241),h=t(80865),m=t(84789),g=t(2960),v=t(90001),w=t(2904),y=t(49705),b=t(95758),S=t(75978),Y=t(69945),A=t.n(Y)()(function(){if("undefined"!=typeof AudioContext){var e=(r||(r=new AudioContext),r),n=e.createBufferSource();e.decodeAudioData(function(e){for(var n=window.atob(e),t=n.length,r=new Uint8Array(t),i=0;i<t;i++)r[i]=n.charCodeAt(i);return r.buffer}("SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),function(t){n.buffer=t,n.connect(e.destination),n.start(0)})}},500,{leading:!0,trailing:!0}),C="replit-icons-font",x=t(40208),k="BESbswy";function _(e){return D.apply(this,arguments)}function D(){return(D=(0,i._)(function(e){return(0,l.YH)(this,function(n){switch(n.label){case 0:if(!document.fonts)return[3,2];return[4,function(e,n){return R.apply(this,arguments)}(document.fonts,e)];case 1:case 3:return n.sent(),[2];case 2:return[4,Promise.all([I("serif",e),I("sans-serif",e),I("monospace",e)])]}})})).apply(this,arguments)}function E(e){var n=e.family,t=e.style,r=e.weight;return"".concat(void 0===t?"normal":t," ").concat(void 0===r?"normal":r," 100px ").concat(n)}function R(){return(R=(0,i._)(function(e,n){var t,r,i,o,a,s;return(0,l.YH)(this,function(l){return t=n.fontInfo,i=void 0===(r=n.characters)?k:r,a=void 0===(o=n.timeout)?3e3:o,s=E(t),[2,new Promise(function(n,r){var o=!1,l=x.vF.timeStart({family:t.family,style:t.style,weight:t.weight}),c=setTimeout(function(){o=!0,l("xterm font loading timed out"),n()},a);e.load(s,i).then(function(){!o&&(clearTimeout(c),n())}).catch(function(e){!o&&(clearTimeout(c),r(e))})})]})})).apply(this,arguments)}function I(e,n){return F.apply(this,arguments)}function F(){return(F=(0,i._)(function(e,n){var t,r,i,o,a,s,c,u,d;return(0,l.YH)(this,function(l){return(t=n.fontInfo,i=void 0===(r=n.characters)?k:r,a=void 0===(o=n.timeout)?3e3:o,s=E(t),(c=document.createElement("span")).innerText=i,c.style.font="normal normal 100px ".concat(e),c.style.position="absolute",c.style.left="-9999px",c.style.top="-9999px",document.body.appendChild(c),u=c.offsetWidth,c.style.font=s,(d=function(){return u!==c.offsetWidth})())?[2]:[2,new Promise(function(e,n){var r=setInterval(function(){d()&&(clearInterval(r),clearTimeout(i),document.body.removeChild(c),e())},50),i=setTimeout(function(){if(clearInterval(r),document.body.removeChild(c),d()){e();return}n(Error("Font loading timed out "+t.family))},a)})]})})).apply(this,arguments)}function T(e){c.Cp(e)}var P='"ReplitHack"',L=String.fromCharCode(61095);function U(){return(U=(0,i._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return function(){if(!document.getElementById(C)){var e=document.createElement("style");e.id=C,e.type="text/css",e.appendChild(document.createTextNode("\n@font-face {\n  font-family: 'replit-icons';\n  font-style: normal;\n  font-weight: normal;\n  font-stretch: normal;\n  src: url(".concat("/public/fonts/replit-icons.woff",") format('woff'),\n    url(").concat("/public/fonts/replit-icons.ttf",") format('truetype');\n}"))),document.head.appendChild(e)}}(),[4,Promise.all([_({fontInfo:{family:"replit-icons"},characters:L}).catch(T),_({fontInfo:{family:P,weight:"400"}}).catch(T),_({fontInfo:{family:P,weight:"400",style:"italic"}}).catch(T),_({fontInfo:{family:P,weight:"700"}}).catch(T),_({fontInfo:{family:P,weight:"700",style:"italic"}}).catch(T)])];case 1:return e.sent(),[2]}})})).apply(this,arguments)}var N=t(17602),O=t(95570),M=1e4;function B(){return/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent)}function H(e){var n,r,Y,C,x,k,_,D,E,R,I,F=(0,o._)((0,s.useState)(null),2),T=F[0],L=F[1],H=(0,o._)((0,s.useState)(null),2),z=H[0],W=H[1],G=(0,N.V)(),V=(0,d.gc)("fontSize","accessibleTerminal","shellBellAudio").preferences,j=V.fontSize,Z=V.accessibleTerminal,q=V.shellBellAudio,K=(0,y.iO)(),$=(0,f.A)(),J=(0,m.a)(),Q=null==e?void 0:e.openFile,X=(0,g.A)(null==e?void 0:e.openWebview),ee=null==e?void 0:e.listFiles,en=(0,s.useMemo)(function(){return Q&&ee?{openFile:Q,listFiles:ee}:null},[Q,ee]),et=(0,h._P)({controlName:"flag-nudges-pane-linking",logFlagToAnalytics:!1}),er=(0,g.A)(null==e?void 0:e.onInBandOSCMessages),ei={screenReaderMode:Z,fileLinking:en,terminalTheme:G,fontSize:j,scrollback:null==e?void 0:e.scrollback,openPane:null!==(I=null==e?void 0:e.openPane)&&void 0!==I?I:null,flagNudgesPaneLinking:et,emitPaneMetrics:null==e?void 0:e.emitPaneMetrics},eo=(0,g.A)(ei),ea=(0,v.A)(function(){(null==e?void 0:e.autoFit)!==!1&&(null==z||z.fit())},{type:"debounce",wait:200}),el=(0,s.useRef)(null),es=(0,s.useRef)(null),ec=(0,g.A)(null==e?void 0:e.size),eu=(0,S.bU)();return(0,s.useLayoutEffect)(function(){if(T){var n=[];return(function(){return r.apply(this,arguments)})().catch(function(e){if(e.message&&e.message.toLowerCase().includes("loading chunk")){c.v4(function(n){n.setExtra("message",e.message),n.setExtra("stack",e.stack),c.Cp(Error("Loading chunk failed"))});return}K({error:e,origin:"Xterm: init"})}),function(){n.forEach(function(e){return e()})}}function r(){return(r=(0,i._)(function(){var r,i,s,d,f,h,m,g,v,y,Y,A,C,x,k,_,D,E,R,I,F,L,N,H,z,G;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,Promise.all([Promise.all([(0,u.jc)(function(){return t.e(1296).then(t.t.bind(t,39989,23))}),(0,u.jc)(function(){return t.e(1669).then(t.t.bind(t,61669,23))}),(0,u.jc)(function(){return t.e(3618).then(t.t.bind(t,63618,23))}),(0,u.jc)(function(){return t.e(7088).then(t.t.bind(t,47088,23))}),(0,u.jc)(function(){return t.e(1497).then(t.t.bind(t,51497,23))}),(0,u.jc)(function(){return t.e(473).then(t.bind(t,40473))}),(0,u.jc)(function(){return t.e(606).then(t.bind(t,20606))}),(0,u.jc)(function(){return t.e(4695).then(t.t.bind(t,94695,23))}),(0,u.jc)(function(){return t.e(1836).then(t.t.bind(t,21836,23))})]),function(){return U.apply(this,arguments)}()])];case 1:var V;if(m=o._.apply(void 0,[l.sent(),1]),v=(g=(0,o._)(m[0],9))[0].Terminal,y=g[1].FitAddon,Y=g[2].SearchAddon,A=g[3].WebLinksAddon,C=g[4].Unicode11Addon,x=g[5].FileLinkAddon,k=g[6].PaneLinkAddon,_=g[7].CanvasAddon,D=g[8].WebglAddon,!T)return[2];return R={allowProposedApi:!0,cursorBlink:!1,scrollback:null!==(E=eo.current.scrollback)&&void 0!==E?E:M,tabStopWidth:4,fontFamily:"".concat(P,', replit-icons, Monaco, "Ubuntu Mono", Consolas, monospace'),fontSize:eo.current.fontSize,lineHeight:1,fontWeight:400,fontWeightBold:700,drawBoldTextInBrightColors:!1,minimumContrastRatio:4.5,theme:eo.current.terminalTheme,screenReaderMode:eo.current.screenReaderMode,logger:{trace:function(e,n){return(r=O).trace.apply(r,["xterm: "+e].concat((0,a._)(n)))},debug:function(e,n){return(i=O).debug.apply(i,["xterm: "+e].concat((0,a._)(n)))},info:function(e,n){return(s=O).info.apply(s,["xterm: "+e].concat((0,a._)(n)))},warn:function(e,n){return(d=O).warn.apply(d,["xterm: "+e].concat((0,a._)(n)))},error:function(e,n){!("string"==typeof e&&e.includes("Parsing error"))&&O.error("xterm: "+e,n)}}},(null===(f=ec.current)||void 0===f?void 0:f.cols)!==void 0&&(R.cols=ec.current.cols),(null===(h=ec.current)||void 0===h?void 0:h.rows)!==void 0&&(R.rows=ec.current.rows),I=new v(R),eo.current.fileLinking?(el.current=new x(eo.current.fileLinking.openFile,eo.current.fileLinking.listFiles),I.loadAddon(el.current)):el.current=null,!es.current&&(null==e?void 0:e.openPane)&&(es.current=new k(e.openPane,et,e.emitPaneMetrics)),es.current&&I.loadAddon(es.current),F=new y,I.loadAddon(F),L=new A((V=function(e){$?p.M.openExternalUrl(e):window.open(e,"_blank")},function(e,n){var t;try{t=new URL(n)}catch(e){return}if(("0.0.0.0"===t.hostname||"localhost"===t.hostname)&&void 0!==X.current){X.current(t.pathname,parseInt(t.port,10));return}V(n)})),I.loadAddon(L),N=new Y,I.loadAddon(N),H=new C,I.loadAddon(H),I.unicode.activeVersion="11",I.open(T),n.push(function(){try{I.dispose()}catch(e){}}),function(){try{if(!(!function(){if(!B())return!1;var e=window.navigator.userAgent.match(/Version\/(\d+)/);return null===e||e.length<2||16>parseInt(e[1],10)}()&&(B()||!J||!(window.devicePixelRatio>1))&&document.createElement("canvas").getContext("webgl2"))){var e=new _;I.loadAddon(e);return}var n=new D;I.loadAddon(n),n.onContextLoss(function(){n.dispose(),I.loadAddon(new _)})}catch(e){var t=new _;I.loadAddon(t)}}(),z=!1,G=null,I.attachCustomKeyEventHandler(function(e){var n,t,r=(0,b.te)(e);if(r){var i=r;G&&(i=(0,b.Y)(G,r));var o=eu(i);switch(o.kind){case S.VO.NoMatch:G=null;break;case S.VO.WaitingForChord:return G=o.key,!1;case S.VO.MatchFound:return G=null,!1}}return n=I,t=e,(!window.navigator.clipboard||"c"!==t.key.toLowerCase()||!t.ctrlKey||!t.shiftKey||("keyup"===t.type&&n.hasSelection()&&(0,w.default)(n.getSelection()).catch(function(e){c.v4(function(n){n.setTag("xterm-clipboard",!0),n.setExtra("type","copy"),c.Cp(e)})}),t.preventDefault(),t.stopPropagation(),!1))&&("shift"===e.key.toLowerCase()||"ctrl"===e.key.toLowerCase()||"alt"===e.key.toLowerCase()||"meta"===e.key.toLowerCase()||("tab"!==e.key.toLowerCase()||!z)&&(z="escape"===e.key.toLowerCase(),!0))}),er.current&&Object.entries(er.current).forEach(function(e){var n=(0,o._)(e,2),t=n[0],r=n[1];I.parser.registerOscHandler(Number(t),function(e){return r(I,e),!0})}),W({onKey:I.onKey.bind(I),onData:I.onData.bind(I),onResize:I.onResize.bind(I),write:I.write.bind(I),fit:function(){var e=T.getBoundingClientRect(),n=e.width,t=e.height;n>0&&t>0&&F.fit()},focus:function(){return I.focus()},clear:function(){return I.clear()},findPrevious:function(e,n){return N.findPrevious(e,n)},findNext:function(e,n){return N.findNext(e,n)},getSize:function(){return{cols:I.cols,rows:I.rows}},paste:function(e){return I.paste(e)},_term:I}),ea(T),[2]}})})).apply(this,arguments)}},[T,ea,eo,K,ec,eu,$,J,X,er,null==e?void 0:e.openPane,null==e?void 0:e.emitPaneMetrics,et]),n=null==z?void 0:z._term,r=el,Y=es,x=(C=ei).screenReaderMode,k=C.fileLinking,_=C.terminalTheme,D=C.openPane,E=C.emitPaneMetrics,R=C.flagNudgesPaneLinking,(0,s.useEffect)(function(){n&&_&&(n.options.theme=_)},[n,_]),(0,s.useEffect)(function(){n&&(n.options.screenReaderMode=x)},[n,x]),(0,s.useEffect)(function(){if(n){if(k){if(!r.current){var e=!1;return t.e(473).then(t.bind(t,40473)).then(function(t){var i=t.FileLinkAddon;!e&&(r.current=new i(k.openFile,k.listFiles),n.loadAddon(r.current))}),function(){e=!0}}r.current.update(k.openFile,k.listFiles),r.current.reactivate()}else r.current&&r.current.deactivate();if(D){if(!Y.current){var i=!1;return t.e(606).then(t.bind(t,20606)).then(function(e){var t=e.PaneLinkAddon;!i&&(Y.current=new t(D,R,E),n.loadAddon(Y.current))}),function(){i=!0}}Y.current.update(D,null!=E?E:null)}else Y.current&&Y.current.deactivate()}},[n,k,r,Y,D,E,R]),(0,s.useEffect)(function(){var e=null==z?void 0:z._term;e&&j&&e.options.fontSize!==j&&(e.options.fontSize=j,e.refresh(0,e.rows-1),z.fit())},[j,z]),(0,s.useEffect)(function(){if(q){var e=null==z?void 0:z._term;if(e)return e.onBell(A).dispose}},[q,z]),[z,L]}},15647:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M8.5 3.75a3.25 3.25 0 1 0 0 6.5 3.25 3.25 0 0 0 0-6.5ZM3.75 7a4.75 4.75 0 1 1 9.5 0 4.75 4.75 0 0 1-9.5 0ZM20 7.25a.75.75 0 0 1 .75.75v2.25H23a.75.75 0 0 1 0 1.5h-2.25V14a.75.75 0 0 1-1.5 0v-2.25H17a.75.75 0 0 1 0-1.5h2.25V8a.75.75 0 0 1 .75-.75ZM1.641 15.641A4.75 4.75 0 0 1 5 14.25h7A4.75 4.75 0 0 1 16.75 19v2a.75.75 0 0 1-1.5 0v-2A3.25 3.25 0 0 0 12 15.75H5A3.25 3.25 0 0 0 1.75 19v2a.75.75 0 0 1-1.5 0v-2c0-1.26.5-2.468 1.391-3.359Z",clipRule:"evenodd"})}))}},15666:(e,n,t)=>{"use strict";t.d(n,{A:()=>f});var r=t(12694),i=t(1889),o=t(21462),a=t(61234),l=t(43974),s=t(93682),c=t(31618),u=t(40043),d=t(35869),p=(0,a.x)({styles1:[l.wp.color.accentNegativeStronger]});function f(e){var n=e.prompt,t=e.desc,a=e.type,l=e.placeholder,f=e.confirmText,h=e.loading,m=e.errorMessage,g=e.onCancel,v=e.onConfirm,w=e.isDanger,y=e.buttonIcon,b=(0,r._)((0,o.useState)(),2),S=b[0],Y=b[1];return(0,i.FD)(d.S,{gap:24,children:[(0,i.Y)(u.Y9,{variant:"headerDefault",level:2,children:n}),(0,i.Y)(u.EY,{children:t}),(0,i.Y)(c.pd,{type:a,value:S,placeholder:l,autoFocus:!0,onChange:function(e){return Y(e.target.value)}}),m?(0,i.Y)(u.EY,{css:p.styles1,multiline:!1,children:m}):null,(0,i.FD)(d.S,{row:!0,gap:12,justify:"end",children:[(0,i.Y)(s.$n,{disabled:h,onClick:g,text:"Cancel"}),(0,i.Y)(s.$n,{colorway:w?"negative":"primary",disabled:h,onClick:function(){return S&&v(S)},text:f||"Ok",iconLeft:y,dataCy:"prompt-confirm-button"})]})]})}},15819:(e,n,t)=>{"use strict";t.d(n,{o:()=>B});var r,i,o,a=t(1889),l=t(61239),s=t(26496),c=t(68209),u=t(19435),d=t(83846),p=t(12694),f=t(21462),h=t(69543),m=t(54310),g=t(6680),v=t(61234),w=t(47258),y=t(22498),b=t(43974),S=t(93682),Y=t(40043),A=t(88654),C=t(35869),x=t(98152),k=t(5968),_=t(6113),D=(0,y.v)(["timestampDisplay","chevronDisplay","color"]),E=D.styleTokens,R=D.cssVars,I=(0,v.x)({checkpoints:[b.wp.py(4),{width:"360px",maxHeight:"calc(50vh)",maxWidth:"calc(100vw - ".concat(g.LU.space24,")"),overflowY:"auto"}],header:[b.wp.px(6),b.wp.pt(4)],label:[b.wp.px(6)],checkpoint:[b.wp.reset.button,w.b.listItem,b.wp.align.center,b.wp.py(4),b.wp.px(6),b.wp.hover((r={},(0,d._)(r,R.color,g.LU.foregroundDefault),(0,d._)(r,R.timestampDisplay,"flex"),(0,d._)(r,R.chevronDisplay,"flex"),r)),(o={},(0,d._)(o,b.$_.canHover,(i={},(0,d._)(i,R.color,g.LU.foregroundDimmer),(0,d._)(i,R.chevronDisplay,"none"),(0,d._)(i,R.timestampDisplay,"none"),i)),(0,d._)(o,"color",E.color),o)],checkpointText:[b.wp.flex.growAndShrink(1),{textAlign:"left",color:"inherit"}],timestamp:[(0,d._)({},b.$_.canHover,{display:"var(".concat(R.timestampDisplay,", none)")})],expandButton:[{borderRadius:0}]}),F={direction:"reverse",state:{revertedToEventId:null},transformer:function(e,n){if(n.revertedToEventId===e.id&&(n.revertedToEventId=null),!n.revertedToEventId){var t=e.contents.contents;if((null==t?void 0:t.$kind)==="agentTimelineEventContents"){var r=t.agentTimelineEventContents.toolData;if((null==r?void 0:r.$kind)==="revertData"){n.revertedToEventId=r.revertData.eventIdBeforeRevert;return}if((null==r?void 0:r.$kind)==="commitData")return{commitId:r.commitData.commitId,description:r.commitData.description||"Checkpoint made",created:e.created}}}}};function T(e){var n,t=(0,s.NC)(),r=(0,c.J2)(t.sessions.get(e.sessionId)),i=(0,c.Rj)(function(){return null==r?void 0:r.transform(F,100)},[r]),o=(0,m.g)({items:null!=i?i:[],maxVisibleItems:4,reverse:!0}),l=o.isExpanded,u=o.setIsExpanded,d=o.maxItemsReached,g=o.visibleItems,v=o.hiddenItemsCount;if(!g.length)return null;var w=null!==(n=null==i?void 0:i.length)&&void 0!==n?n:0;return(0,a.FD)(C.S,{css:I.checkpoints,gap:4,children:[(0,a.Y)(C.S,{row:!0,gap:4,align:"center",css:I.header,children:(0,a.FD)(Y.EY,{variant:"small",children:[w," ",(0,h.A)("Checkpoint",w)]})}),(0,a.FD)(C.S,{children:[g.map(function(n,t){var r=(0,p._)(n,2),i=r[0],o=r[1];return(0,a.FD)(f.Fragment,{children:[0===t?(0,a.Y)(Y.EY,{variant:"small",color:"dimmest",css:I.label,children:"Latest"}):null,1===t?(0,a.Y)(Y.EY,{variant:"small",color:"dimmest",css:I.label,children:"Earlier"}):null,(0,a.Y)(P,{getsCheckpoint:o,onClick:function(){return e.onCommitEventClick(i)}})]},i)}),d?(0,a.Y)(U,{isExpanded:l,hiddenItemsCount:v,onClick:function(){return u(!l)}}):null]})]})}function P(e){var n=(0,c.J2)(e.getsCheckpoint);return n?(0,a.Y)(L,{onClick:e.onClick,description:n.description,commitId:n.commitId,created:n.created}):null}function L(e){return(0,a.FD)(C.S,{tag:"button",onClick:e.onClick,row:!0,gap:6,css:I.checkpoint,children:[(0,a.Y)(k.A,{color:g.LU.foregroundDimmest}),(0,a.Y)(Y.EY,{variant:"small",color:"dimmer",css:I.checkpointText,multiline:!1,children:e.description}),(0,a.Y)(A.Dc,{textVariant:"small",textColor:"dimmer",css:I.timestamp,date:e.created})]})}function U(e){return(0,a.Y)(S.$n,{css:I.expandButton,size:"small",variant:"nofill",alignment:"start",onClick:e.onClick,iconLeft:e.isExpanded?(0,a.Y)(x.A,{}):(0,a.Y)(_.A,{}),text:e.isExpanded?"Show less":"Show ".concat(e.hiddenItemsCount," earlier")})}var N=t(6553),O=t(54572),M=(0,v.x)({title:[b.wp.flex.growAndShrink(1),{fontWeight:g.LU.fontWeightMedium}],popoverButton:[b.wp.viewStyle,b.wp.reset.button,w.b.nofill,b.wp.rowWithGap(4),b.wp.align.center,b.wp.px(4),b.wp.maxWidth("100%"),{marginLeft:"auto",marginRight:"auto",svg:[b.wp.color.foregroundDimmest],"&:hover svg":[b.wp.color.foregroundDimmer]}]});function B(e){var n=e.sessionId,t=e.onCommitEventClick,r=e.showCheckpointsDropdown,i=e.checkpointsOpenObs,o=(0,c.J2)(i,!1),d=(0,s.NC)(),p=(0,c.J2)(d.sessions.get(n)),f=(0,c.Rj)(function(){return null==p?void 0:p.data.select(function(e){return e.title})},[p]),h=(0,a.Y)(u.n,{multiline:!1,css:M.title,variant:"small",text:f||"Thinking...",color:f?"default":"dimmest"},n);return void 0===r||r?(0,a.FD)(N.Wv,{isOpen:o,onOpenChange:function(e){i.set(e)},label:"Plan Details",noArrow:!0,children:[(0,a.FD)(l.$,{css:M.popoverButton,children:[h,(0,a.Y)(O.A,{size:12,style:{visibility:f?"visible":"hidden"}})]}),(0,a.Y)(T,{onCommitEventClick:function(e){i.set(!1),t(e)},sessionId:n})]}):h}},16586:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M6.25 5a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm8 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm-8 7a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm8 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm-8 7a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm8 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Z",clipRule:"evenodd"})}))}},16660:(e,n,t)=>{"use strict";t.d(n,{U:()=>w,w:()=>f});var r=t(83846),i=t(1889),o=t(21462),a=t(85788),l=t(79891),s=t(6680),c=t(86417),u=t(61234),d=t(22498),p=t(43974),f=40,h=(0,d.v)(["opacity"]),m=h.cssVars,g=h.styleTokens,v=(0,u.x)({fade:[p.wp.position.absolute,p.wp.top(-1),p.wp.left(0),p.wp.width("100%"),p.wp.height(f),p.wp.backgroundGradient(s.LU.surfaceBackground,"transparent"),{pointerEvents:"none",opacity:g.opacity,transitionProperty:"opacity",transitionDuration:c.Ds.duration,transitionTimingFunction:c.Ds.timingFunction}]});function w(e){var n=e.show,t=(0,o.useRef)(null);return(0,l.d)(t,null!=n?n:new a.N(!0),function(e){return(0,r._)({},m.opacity,e?"1":"0")}),(0,i.Y)("div",{ref:t,css:v.fade})}},16810:(e,n,t)=>{"use strict";t.d(n,{u:()=>L});var r=t(17459),i=t(1889),o=t(21462),a=t(51732),l=t(17844),s=t(93629),c=t(84296);function u(e){return(0,i.Y)(c.Ay,(0,s._)((0,l._)({},e),{children:(0,i.Y)("path",{fillRule:"evenodd",d:"M8.25 3.5A3.25 3.25 0 0 0 5 6.75v1.378a.5.5 0 0 1-.335.472A4 4 0 0 0 6 16.375h.751a.5.5 0 0 1 0 1H6c-.338 0-.673-.033-1-.099A3.25 3.25 0 1 0 8.25 14a.5.5 0 0 1 0-1 4.25 4.25 0 0 1 3.25 1.511V6.75A3.25 3.25 0 0 0 8.25 3.5ZM12 4.75a4.25 4.25 0 0 0-8 2v1.037a5 5 0 0 0 0 9.176v.287a4.25 4.25 0 0 0 8 2 4.248 4.248 0 0 0 5.376 1.927A4.25 4.25 0 0 0 20 17.25v-.287a4.998 4.998 0 0 0 2.321-7.124A5 5 0 0 0 20 7.787V6.75a4.25 4.25 0 0 0-8-2Zm7.346 11.396a3.999 3.999 0 0 1-1.345.229h-.751a.5.5 0 1 0 0 1H18c.337 0 .673-.033 1-.099a3.25 3.25 0 0 1-6.5-.021v-.018A3.25 3.25 0 0 1 15.75 14a.5.5 0 0 0 0-1 4.25 4.25 0 0 0-3.25 1.511V6.75a3.25 3.25 0 1 1 6.5 0v1.378a.5.5 0 0 0 .335.472 4 4 0 0 1 .011 7.546ZM8.25 7.375a.5.5 0 0 1 .5.5v.75a3.125 3.125 0 0 1-3.125 3.125.5.5 0 1 1 0-1A2.125 2.125 0 0 0 7.75 8.625v-.75a.5.5 0 0 1 .5-.5Zm7.5 0a.5.5 0 0 1 .5.5v.75a2.125 2.125 0 0 0 2.125 2.125.5.5 0 1 1 0 1 3.125 3.125 0 0 1-3.125-3.125v-.75a.5.5 0 0 1 .5-.5Z",clipRule:"evenodd"})}))}var d=t(84138),p=t(27489),f=t(85845),h=t(38828),m=t(1542),g=t(76860),v=t(92228),w=t(99054),y=t(74130),b=t(62402),S=t(27309),Y=t(53363),A=t(67169),C=t(5445),x=t(9885),k=t(75251);function _(e){return(0,i.FD)(c.Ay,(0,s._)((0,l._)({},e),{children:[(0,i.Y)("path",{fillRule:"evenodd",d:"M10.122 9.849A.75.75 0 0 0 9 10.5v6a.75.75 0 0 0 1.122.651l5.25-3a.75.75 0 0 0 0-1.302l-5.25-3Zm3.366 3.651L10.5 15.208v-3.416l2.988 1.708Z",clipRule:"evenodd"}),(0,i.Y)("path",{fillRule:"evenodd",d:"M3 5.25A2.25 2.25 0 0 1 5.25 3h13.5A2.25 2.25 0 0 1 21 5.25v13.5A2.25 2.25 0 0 1 18.75 21H5.25A2.25 2.25 0 0 1 3 18.75V5.25Zm2.25-.75h13.5a.75.75 0 0 1 .75.75v1.5h-15v-1.5a.75.75 0 0 1 .75-.75ZM4.5 8.25v10.5c0 .414.336.75.75.75h13.5a.75.75 0 0 0 .75-.75V8.25h-15Z",clipRule:"evenodd"})]}))}var D=t(59086),E=t(81207),R=t(99941),I=t(97783),F=t(7655),T=t(97003),P=t(90417);function L(e){var n=e.kind,t=(0,r._)(e,["kind"]),l={createPostgresqlDatabaseData:(0,i.Y)(g.A,{}),createFileData:(0,i.Y)(b.A,{}),deployData:(0,i.Y)(w.A,{}),readFileData:(0,i.Y)(a.A,{}),readDirData:(0,i.Y)(Y.A,{}),fileEditData:(0,i.Y)(S.A,{}),shellExecutionData:(0,i.Y)(T.A,{}),packagerInstallData:(0,i.Y)(C.A,{}),screenshotData:(0,i.Y)(d.A,{}),toolchainInstallData:(0,i.Y)(P.A,{}),searchFilesystemData:(0,i.Y)(I.A,{}),searchFileData:(0,i.Y)(I.A,{}),planProgressData:(0,i.Y)(f.A,{}),packagerUninstallData:(0,i.Y)(C.A,{}),messageData:(0,i.Y)(p.A,{}),systemDependencyInstallData:(0,i.Y)(v.A,{}),systemDependencyUninstallData:(0,i.Y)(v.A,{}),workflowsStartToolData:(0,i.Y)(x.A,{}),workflowsRestartToolData:(0,i.Y)(D.A,{}),workflowsStopToolData:(0,i.Y)(F.A,{}),workflowsSetRunConfigToolData:(0,i.Y)(x.A,{}),workflowsRemoveRunConfigToolData:(0,i.Y)(m.A,{}),workflowsGetOutputToolData:(0,i.Y)(y.A,{}),presentResultsToolData:(0,i.Y)(_,{}),sqlExecutionData:(0,i.Y)(g.A,{}),summarizeObjectiveData:(0,i.Y)(a.A,{}),revertData:(0,i.Y)(E.A,{}),agentPlanStepBegin:(0,i.Y)(R.A,{}),deployConfigData:(0,i.Y)(w.A,{}),acknowledgeUserMessage:(0,i.Y)(h.A,{}),newSessionNudge:(0,i.Y)(k.A,{}),commitData:(0,i.Y)(h.A,{}),thoughts:(0,i.Y)(u,{}),blueprintsSetup:(0,i.Y)(A.A,{})};return n&&l[n]?(0,o.cloneElement)(l[n],t):(0,o.cloneElement)((0,i.Y)(h.A,{}),t)}},16836:(e,n,t)=>{"use strict";t.d(n,{T:()=>i});var r=t(21462);function i(e){var n,t,i=e.mode,o=e.authz,a=!0,l=void 0;return"advanced"===i?(a=null!==(n=null==o?void 0:o.advancedAssistant.isAuthorized)&&void 0!==n&&n,l=null==o?void 0:o.advancedAssistant.message):"basic"===i&&(a=null!==(t=null==o?void 0:o.basicAssistant.isAuthorized)&&void 0!==t&&t,l=null==o?void 0:o.basicAssistant.message),(0,r.useMemo)(function(){return{isAuthorized:a,message:l}},[a,l])}},16878:(e,n,t)=>{"use strict";t.d(n,{A:()=>r});let r={sandbox:"allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-modals allow-downloads allow-downloads-without-user-activation allow-presentation allow-orientation-lock allow-pointer-lock allow-scripts",allow:"accelerometer; ambient-light-sensor; autoplay; battery; camera; display-capture; encrypted-media; execution-while-not-rendered; execution-while-out-of-viewport; fullscreen; gamepad; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; navigation-override; oversized-images; payment; picture-in-picture; publickey-credentials; speaker-selection; sync-xhr; unoptimized-images; unsized-media; usb; screen-wake-lock; web-share; xr-spatial-tracking; clipboard-read; clipboard-write; pointer-lock",allowFullScreen:!0,allowtransparency:"true",allowpaymentrequest:"true",allowpopups:"true"}},16902:(e,n,t)=>{"use strict";t.d(n,{q:()=>l});var r=t(22606),i=t(81239),o=t(16907),a=t(9816),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.skipQuery,t=e.onDatabasesDetected,l=(0,o.A)(),s=(0,i.A)().showError,c=(0,r._j)({skip:n,variables:{input:{replId:l}},fetchPolicy:"cache-and-network",ssr:!1,notifyOnNetworkStatusChange:!0,onCompleted:function(e){"GetNeonDatabasesResult"!==e.getNeonDatabases.__typename&&s("Error: ".concat(e.getNeonDatabases.message)),"GetNeonDatabasesResult"===e.getNeonDatabases.__typename&&e.getNeonDatabases.databases.filter(a.I).length>0&&(null==t||t())}}),u=c.data;return{loading:c.loading,neonDatabases:(null==u?void 0:u.getNeonDatabases.__typename)==="GetNeonDatabasesResult"?u.getNeonDatabases.databases.filter(a.I):[],currentUser:null==u?void 0:u.currentUser}}},17008:(e,n,t)=>{"use strict";t.d(n,{e:()=>c,q:()=>u});var r=t(12694),i=t(21462),o=t(72004),a=t(26496),l=t(85788),s=t(68209);function c(){var e=(0,a.NC)(),n=(0,s.J2)(e.sessions.agent),t=null==n?void 0:n.agent.state,c=(0,i.useMemo)(function(){var e;return null!==(e=null==n?void 0:n.reduce(u,100))&&void 0!==e?e:null},[n]);return(0,i.useMemo)(function(){return t&&c?l.cP.combine(t,c).map(function(e){var n=(0,r._)(e,2),t=n[0],i=n[1];return((null==t?void 0:t.state)===o.g32.AGENT_STATE_PAUSED||(null==t?void 0:t.state)===o.g32.AGENT_STATE_UNKNOWN)&&i}):null},[t,c])}var u={direction:"reverse",state:{value:!1},map:function(e){return e.value},reducer:function(e,n){if(e.sender.type===o.utd.USER||e.sender.type!==o.utd.AI)return n.value=!1,!1;var t=e.contents.contents;switch(null==t?void 0:t.$kind){case"rapidBuildConcluded":return;case"agentPlanEventContents":n.value=t.agentPlanEventContents.requiresApproval;break;case"agentAskUserForActionRequest":n.value=!0;break;case"agentTimelineEventContents":var r=t.agentTimelineEventContents.toolData;if(r&&a.se.has(r.$kind))return;var i=t.agentTimelineEventContents.toolName;if(a.Bi.has(i))return;if((null==r?void 0:r.$kind)!=="messageData")break;(r.messageData.agentAction.optionType||["user_response","propose_new_plan"].includes(i))&&(n.value=!0);break;default:n.value=!1}return!1}}},17015:(e,n,t)=>{"use strict";t.d(n,{Ln:()=>l,li:()=>a});var r=t(44370),i=t(99667),o=(0,r.eU)(null);function a(){return(0,i.ob)(o)}function l(){return(0,i.h)(o)}},17469:(e,n,t)=>{"use strict";t.d(n,{d:()=>C,O:()=>x});var r,i=t(1889),o=t(21462),a=t(3136),l=t(11390),s=t(80865),c=t(29935),u=t(37743),d=t(82643),p=t(51367),f=t(40208),h=new(function(){function e(){(0,u._)(this,e)}var n=e.prototype;return n.export=function(e,n){var t=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s,c=a.value,u=c.spanContext(),d={name:c.name,service:"repl.it-web",trace_id:u.traceId,span_id:u.spanId,start:c.startTime,end:c.endTime,parent_id:c.parentSpanId,attributes:c.attributes};t.has(u.traceId)||t.set(u.traceId,[]),null===(s=t.get(u.traceId))||void 0===s||s.push(d)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var h=Array.from(t.values());if(0===h.length){n({code:p.V.SUCCESS});return}var m=(0,f.JM)();fetch("/datadog/traces",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"fetch"},body:JSON.stringify({repl:{id:null==m?void 0:m.id,rootOriginReplUrl:null==m?void 0:m.rootOriginReplUrl},traces:h})}).then(function(){n({code:p.V.SUCCESS})}).catch(function(e){f.vF.error("Failed to send traces to Datadog: ".concat(e.message)),n({code:p.V.FAILED,error:e.message})})},n.shutdown=function(){return(0,c._)(function(){return(0,d.YH)(this,function(e){return[2]})})()},n.forceFlush=function(){return(0,c._)(function(){return(0,d.YH)(this,function(e){return[2]})})()},e}()),m=t(62019),g=t(51175),v=t(86466),w=t(1833),y=t(43628),b=t(4071),S=t(48514),Y=function(e){function n(){var e;return(0,u._)(this,n),e=(0,m._)(this,n,arguments),e.spanSet=new Map,e}(0,w._)(n,e);var t=n.prototype;return t.startSpan=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y._.active(),i=(0,g._)((0,v._)(n.prototype),"startSpan",this).call(this,e,t,r);return this.spanSet.set(i.spanContext().spanId,i),i},t.pruneSpans=function(){this.spanSet.forEach(function(e){e.isRecording()&&e.setAttribute("pruned",!0)}),this.spanSet=new Map},n}(b.s),A=function(e){function n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u._)(this,n),(e=(0,m._)(this,n,[t]))._wsTracers=new Map,e._wsConfig=t,e}(0,w._)(n,e);var t=n.prototype;return t.getTracer=function(e,n,t){var r="".concat(e,"@").concat(n||"",":").concat((null==t?void 0:t.schemaUrl)||"");return this._wsTracers.has(r)||this._wsTracers.set(r,new Y({name:e,version:n,schemaUrl:null==t?void 0:t.schemaUrl},this._wsConfig,this)),this._wsTracers.get(r)},t.pruneSpansForTracer=function(e,n,t){var r,i="".concat(e,"@").concat(n||"",":").concat((null==t?void 0:t.schemaUrl)||"");this._wsTracers.has(i)&&(null===(r=this._wsTracers.get(i))||void 0===r||r.pruneSpans())},n}(S.Z);function C(){var e=(0,s._P)({controlName:"flag-open-telemetry-tracing"});return(0,o.useEffect)(function(){e&&((r=new A).addSpanProcessor(new l.J(h)),r.register({propagator:new a.lm}))},[e]),(0,i.Y)(i.FK,{})}function x(e){r.pruneSpansForTracer(e)}},17599:(e,n,t)=>{"use strict";t.d(n,{R1:()=>f,lQ:()=>h,sX:()=>p});var r=t(83846),i=t(17844),o=t(12694),a=t(1889),l=t(21462),s=t(93702),c=t(61234),u=t(43974),d=t(35869),p=u.kL.min(600),f=(0,c.x)({maxWidth:{width:"100%",maxWidth:600,alignSelf:"center"},hiddenOnMobile:[u.wp.display.none,(0,r._)({},p,u.wp.display.flex)],hiddenOnDesktop:[u.wp.display.flex,(0,r._)({},p,u.wp.display.none)]});function h(e){var n,t,r,c,u=e.children,p=e.render,f=e.timeout,h=void 0===f?300:f,m=e.initialHeight,g=(0,l.useRef)(null),v=(0,l.useRef)(null),w=(n=v,r=(t=(0,o._)((0,l.useState)(0),2))[0],c=t[1],(0,l.useEffect)(function(){if(n.current){var e=new ResizeObserver(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value.borderBoxSize[0].blockSize;c(a)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}});return e.observe(n.current),function(){return e.disconnect()}}},[r,n]),r),y=w>0?w:m,b={transition:h+"ms ease-out",transitionProperty:"height, opacity",opacity:0,height:0,visibility:"hidden"},S={entering:{opacity:1,height:y},entered:{transitionProperty:"opacity",opacity:1,height:y,visibility:"visible"},exiting:{opacity:0,height:0,visibility:"visible"},exited:{opacity:0,height:0,visibility:"hidden"}};return(0,a.Y)(s.Ay,{nodeRef:g,timeout:h,in:p,children:function(e){return(0,a.Y)(d.S,{innerRef:g,style:(0,i._)({},b,S[e]),children:(0,a.Y)(d.S,{innerRef:v,children:u})})}})}},17602:(e,n,t)=>{"use strict";t.d(n,{V:()=>a});var r=t(21462),i=t(12722),o=t(22098);function a(){var e=(0,i.D)().values;return(0,r.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.T5.values;return{foreground:e.global.foregroundDefault,background:e.global.backgroundDefault,cursor:e.global.foregroundDefault,cursorAccent:e.global.backgroundHigher,selectionBackground:e.global.foregroundDefault,black:e.global.backgroundRoot,red:e.global.redStronger,green:e.global.accentPositiveDefault,yellow:e.global.yellowDefault,blue:e.global.blueStronger,magenta:e.global.magentaDefault,cyan:e.global.tealDefault,white:e.global.foregroundDefault,brightBlack:e.global.outlineDimmest,brightRed:e.global.redStrongest,brightGreen:e.global.accentPositiveStronger,brightYellow:e.global.yellowStronger,brightBlue:e.global.blueStrongest,brightMagenta:e.global.magentaStronger,brightCyan:e.global.tealStronger,brightWhite:e.global.foregroundDefault}}(e)},[e])}},17808:(e,n,t)=>{"use strict";t.d(n,{i:()=>b});var r=t(12694),i=t(21462),o=t(67201),a=t(17844),l=t(12584),s=t(41114),c=t(68197),u=t(50175);function d(){var e=(0,l._)(["\n  subscription StartOrgReplPresenceSession(\n    $input: StartOrgReplPresenceSessionInput!\n  ) {\n    startOrgReplPresenceSession(input: $input)\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,l._)(["\n  mutation PingOrgReplPresenceSession(\n    $input: PingOrgReplPresenceSessionInput!\n  ) {\n    pingOrgReplPresenceSession(input: $input)\n  }\n"]);return p=function(){return e},e}var f={},h=(0,s.J1)(d()),m=(0,s.J1)(p()),g=t(16907),v=t(31930),w=t(88390),y=t(67337);function b(){var e,n,t,l=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=(0,g.A)(),d=(0,i.useRef)((0,o.A)()),p=(0,y.A)().container,b=(0,w.A)(p),S=(0,r._)((e=(0,a._)({},f,void 0),u.n(m,e)),1)[0],Y=b!==v.KN.CONNECTED||l;(0,i.useEffect)(function(){var e=!1;if(!Y&&b===v.KN.CONNECTED){var n=null;return function t(){S({variables:{input:{sessionId:d.current}},onCompleted:function(){!e&&(n=setTimeout(t,1e4))}})}(),function(){e=!0,n&&clearTimeout(n)}}},[b,d,S,Y]),n={variables:{input:{replId:s,sessionId:d.current}},skip:Y},t=(0,a._)({},f,n),c.R(h,t)}},17966:(e,n,t)=>{"use strict";t.d(n,{DJ:()=>k,O3:()=>Y,Ui:()=>_,Ww:()=>b,_x:()=>x,eQ:()=>A,xd:()=>E});var r=t(17844),i=t(93629),o=t(17459),a=t(12694),l=t(1889),s=t(21462),c=t(2960),u=t(90001),d=t(67337),p=t(51895),f=t(15278),h=t(17602),m=t(61234),g=t(22498),v=t(43974),w=t(35869);function y(e){for(var n=1,t=e.buffer.active._buffer.lines._array,r=e.buffer.active.length;r-- >0;){var i=t[r];if(i){for(var o=!1,a=0;a<e.cols;a++)if(0!==i.hasContent(a)){o=!0;break}if(o){n=r+1;break}}}return n}var b=8,S=(0,g.v)(["topOffset"]),Y=S.cssVars,A=S.styleTokens,C=(0,m.x)({wrapper:{display:"grid",gridTemplateColumns:"1fr"},terminal:{gridRow:1,gridColumn:1,position:"sticky",top:A.topOffset,"& .xterm":[v.wp.py(b),v.wp.pl(b),v.wp.height("100%"),v.wp.overflow("hidden")],"& .xterm-viewport":[v.wp.overflow("hidden")]},terminalForHistoricalOutputWrapper:[v.wp.overflow("hidden")]});function x(e){var n=e.autoFocus,t=e.wrapperResizeRef,a=e.xterm,c=e.bufferHeight,u=e.onInput,d=e.setOnMessage,p=e.onResizeTerminal,f=e.children,h=(0,o._)(e,["autoFocus","wrapperResizeRef","xterm","bufferHeight","onInput","setOnMessage","onResizeTerminal","children"]);return(0,s.useEffect)(function(){n&&a&&a.focus()},[a,n]),(0,s.useEffect)(function(){if(a){var e=a.onData(function(e){u&&u(e)}),n=a.onResize(function(){p&&p(a.getSize())});return function(){e.dispose(),n.dispose()}}},[a,u,p]),(0,s.useEffect)(function(){if(a)return d(function(e){return a.write(e)})},[d,a]),(0,l.Y)(w.S,{innerRef:t,children:(0,l.Y)(w.S,(0,i._)((0,r._)({},h),{css:C.wrapper,style:(0,r._)({height:c},h.style),children:f}))})}function k(e){var n=e.xtermRef,t=e.visibleHeight,a=e.maxHeight,s=(0,o._)(e,["xtermRef","visibleHeight","maxHeight"]);return(0,l.Y)(w.S,(0,i._)((0,r._)({innerRef:n,css:C.terminal},s),{style:(0,i._)((0,r._)({},s.style),{height:t,maxHeight:a})}))}function _(e){var n=e.maxHeight,t=e.openPane,r=(0,d.A)().fs,i=(0,s.useCallback)(function(e){return t({type:(0,p.QY)(e),data:e})},[t]),o=(0,s.useCallback)(function(e,n){return t({type:"webview",data:{ports:{type:"local",path:e,port:n}}})},[t]),l=(0,a._)((0,f.A)({autoFit:!1,size:{rows:10},openFile:i,listFiles:r.listFiles,openWebview:o,openPane:t}),2),h=l[0],m=l[1],g=(0,s.useMemo)(function(){return null==h?void 0:h._term},[h]),v=(0,a._)((0,s.useState)(function(){var e,n,t=null==g?void 0:g._core;return null!==(n=null==t?void 0:null===(e=t._renderService)||void 0===e?void 0:e.dimensions.css.cell.height)&&void 0!==n?n:16}),2),w=v[0],S=v[1];(0,s.useEffect)(function(){if(g){var e,n=null==g?void 0:g._core,t=null==n?void 0:null===(e=n._renderService)||void 0===e?void 0:e.onDimensionsChange(function(e){S(e.css.cell.height)});return function(){null==t||t.dispose()}}},[g]);var Y=(0,s.useMemo)(function(){return Math.floor((n-2*b)/w)},[n,w]),A=(0,a._)((0,s.useState)("normal"),2),C=A[0],x=A[1],k=(0,a._)((0,s.useState)(1),2),_=k[0],D=k[1],E=(0,a._)((0,s.useState)(1),2),R=E[0],I=E[1],F=(0,a._)((0,s.useState)(!1),2),T=F[0],P=F[1],L=(0,c.A)(_),U=(0,c.A)(R),N=(0,c.A)(C);(0,s.useEffect)(function(){if(g){var e=g.buffer.onBufferChange(function(e){x(e.type),"alternate"===e.type&&(D(Y),I(Y),P(!1))});return function(){e.dispose()}}},[g,Y]);var O=(0,s.useCallback)(function(){if(g){if("alternate"===N.current)D(Y);else{var e=y(g),n=e>Y;I(e),D(Math.min(e,Y)),P(n)}}},[g,Y,N]),M=(0,u.A)(function(e){var n=e.widthChanged;g&&h&&n&&(h.fit(),O())},{type:"debounce",wait:200});(0,s.useEffect)(function(){var e=function(){if(g&&"alternate"!==N.current){var e=y(g),n=Math.min(e,Y);e>U.current&&I(e),n>L.current&&D(n),e>Y&&P(!0)}};if(g){var n=[g.onLineFeed(e),g.onCursorMove(e)];return function(){n.forEach(function(e){return e.dispose()})}}},[g,L,N,U,Y]),(0,s.useEffect)(function(){if(g&&h){var e=h.getSize();e.rows!==Y&&g.resize(e.cols,Y),O()}},[g,h,Y,O]);var B=(0,s.useMemo)(function(){return Math.ceil((Math.min(_,R)+1)*w+2*b)},[_,R,w]),H=(0,s.useMemo)(function(){return Math.ceil(T?(R+1)*w+2*b:B)},[w,T,B,R]);return(0,s.useEffect)(function(){h&&h.fit()},[h,_,R]),{visibleHeight:B,visibleLines:_,bufferHeight:H,bufferLines:R,bufferMode:C,hasScrollback:T,wrapperResizeRef:M,xterm:h,xtermRef:m}}function D(){}function E(e){var n=e.output,t=e.maxHeight,r=_({maxHeight:t,openPane:e.openPane}),i=r.visibleHeight,o=r.bufferHeight,a=r.wrapperResizeRef,c=r.xterm,u=r.xtermRef,d=(0,s.useCallback)(function(e){return c&&(null==c||c.clear(),e(n)),D},[c,n]),p=(0,h.V)();return(0,l.Y)(w.S,{css:C.terminalForHistoricalOutputWrapper,style:{height:i,background:null==p?void 0:p.background},children:(0,l.Y)(x,{onInput:D,xterm:c,wrapperResizeRef:a,bufferHeight:o,setOnMessage:d,onResizeTerminal:D,children:(0,l.Y)(k,{xtermRef:u,visibleHeight:i,maxHeight:t})})})}},18211:(e,n,t)=>{"use strict";t.d(n,{V4:()=>c,VU:()=>d,aU:()=>u});var r=t(12584),i=t(41114),o=t(83338);function a(){var e=(0,r._)(["\n  fragment HandleReplRedirectionReplRedirect on ReplRedirect {\n    replUrl\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  fragment HandleReplRedirectionSubscriptionExpired on ReplSubscriptionExpired {\n    isOwner\n    replId\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,r._)(["\n  fragment HandleReplRedirectionRepl on Repl {\n    id\n    isOwner\n    language\n    ...ReplLinkRepl\n    authorizations {\n      editFileContents {\n        isAuthorized\n      }\n      connectToWorkspace {\n        isAuthorized\n      }\n    }\n    org {\n      id\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c=(0,i.J1)(a()),u=(0,i.J1)(l()),d=(0,i.J1)(s(),o.r)},18240:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M10.47 9.97a.75.75 0 0 1 1.06 0l3.5 3.5a.75.75 0 1 1-1.06 1.06l-2.22-2.22v5.19a.75.75 0 0 1-1.5 0v-5.19l-2.22 2.22a.75.75 0 0 1-1.06-1.06l3.5-3.5Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M1.055 3.055A2.75 2.75 0 0 1 3 2.25h5a.75.75 0 0 1 .624.334l1.777 2.666H19A2.75 2.75 0 0 1 21.75 8v11A2.75 2.75 0 0 1 19 21.75H3A2.75 2.75 0 0 1 .25 19V5c0-.73.29-1.429.805-1.945ZM3 3.75A1.25 1.25 0 0 0 1.75 5v14A1.25 1.25 0 0 0 3 20.25h16A1.25 1.25 0 0 0 20.25 19V8A1.25 1.25 0 0 0 19 6.75h-9a.75.75 0 0 1-.624-.334L7.599 3.75H3Z",clipRule:"evenodd"})]}))}},18367:(e,n,t)=>{"use strict";t.d(n,{c:()=>h,l:()=>function e(n,t){if(!["context","action"].includes(n.data.type))throw Error("Command type not supported: "+n.data.type);if("action"===n.data.type)return{match:u.G2,data:{label:n.data.label,description:n.data.description,icon:n.data.iconPath?(0,a.Y)(p.A,{src:(0,c.sU)(n.extension.baseUrl,n.data.iconPath),layout:"fill",alt:""}):(0,a.Y)(a.FK,{children:" "}),type:"action",run:(0,r._)(function(){var e;return(0,o.YH)(this,function(t){switch(t.label){case 0:if(!(e=n.run))throw Error("Action command must have run");return[4,e()];case 1:return[2,t.sent()]}})})}};var l,s=n.commands;if(!s)throw Error("Context command must have commands");return{match:u.G2,data:{label:n.data.label,description:n.data.description,icon:n.data.iconPath?(0,a.Y)(p.A,{src:(0,c.sU)(n.extension.baseUrl,n.data.iconPath),layout:"fill",alt:""}):(0,a.Y)(a.FK,{}),type:n.data.type},commands:(l=(0,r._)(function(r){var a;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,s({active:r.active,searchQuery:r.searchQuery,path:a=(0,i._)(t.path).concat([{data:n.data}])})];case 1:return[2,o.sent().map(function(n){return e(n,{path:a})})]}})}),function(e){return l.apply(this,arguments)})}}});var r=t(29935),i=t(86105),o=t(82643),a=t(1889),l=t(75152),s=t(24998),c=t(7642),u=t(23718),d=t(33915),p=t(74967),f=l.ZU.Object({id:l.ZU.Optional(l.ZU.String()),icon:l.ZU.Optional(l.ZU.String()),type:l.ZU.Union([l.ZU.Literal("action"),l.ZU.Literal("context")]),label:l.ZU.String(),description:l.ZU.String(),contributions:l.ZU.Optional(l.ZU.Array(l.ZU.Enum(d.P)))});function h(e,n){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(e,n){var t,i,a;return(0,o.YH)(this,function(l){switch(l.label){case 0:return[4,e.data];case 1:if(t=l.sent(),!s.WT.Check(f,t))throw Error("Invalid command");if(i=null,"string"==typeof t.icon){if(""===t.icon)throw Error("Command icon cannot be empty. Omit it if you do not want an icon.");i=t.icon}if(a={data:{label:t.label,description:t.description,type:t.type,iconPath:i,id:t.id?t.id:void 0},extension:n.extension},t.contributions&&(a.data.contributions=t.contributions,n.logger.warn("Command ".concat(t.label," uses deprecated contributions field"))),"context"===t.type){var c;c=(0,r._)(function(t){var r,i,a,l,s,c,u,d,p;return(0,o.YH)(this,function(o){switch(o.label){case 0:r=t.active,i=t.searchQuery,a=t.path,l=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.commands({active:r,searchQuery:i,path:a})];case 2:return l=o.sent(),[3,4];case 3:return s=o.sent(),n.logger.error(s.message,{commandError:s,api:"command"}),[2,[]];case 4:return[4,l.length];case 5:c=o.sent(),u=[],d=0,o.label=6;case 6:if(!(d<c))return[3,9];return p=u.push,[4,h(l[d],n)];case 7:p.apply(u,[o.sent()]),o.label=8;case 8:return d++,[3,6];case 9:return[2,u]}})}),a.commands=function(e){return c.apply(this,arguments)}}else a.run=(0,r._)(function(){var t;return(0,o.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.run()];case 1:return r.sent(),[2,void 0];case 2:return t=r.sent(),n.logger.error(t.message,{runError:t,api:"command"}),[2,{type:"error",message:t.message}];case 3:return[2]}})});return[2,a]}})})).apply(this,arguments)}},18879:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(1889),i=t(21462),o=t(74340);function a(e){var n=e.json,t=(0,i.useMemo)(function(){return JSON.stringify(n,null,2)},[n]);return(0,r.Y)(o.A,{language:"json",code:t})}},18951:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(12694),i=t(21462),o=t(6886),a=t(16907);function l(e){var n=(0,a.A)(),t=(0,r._)((0,o.F)(),1)[0];(0,i.useEffect)(function(){if(e){var r=e.messages.filter(function(e){return!e.seen}).map(function(e){return e.id});0!==r.length&&t({variables:{replId:n,threadId:e.id,messageIds:r},optimisticResponse:{__typename:"RootMutationType",markMessagesAsSeen:{messages:r.map(function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}}),__typename:"AnnotationMessageList"}}})}},[n,e,t])}},18960:(e,n,t)=>{"use strict";t.d(n,{Q:()=>i});var r=t(90629);function i(e){var n=e.error,t=e.context,i=e.extras,o=e.isDeploymentsPane,a=void 0===o||o;return r.v4(function(e){e.setTag("deployments-pane",a),e.setTag("context",t),i&&e.setExtras(i),r.Cp(n)}),n}},18988:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(12694),i=t(21462),o=t(28504),a=t(78596);function l(e){var n=(0,r._)((0,i.useState)(null),2),t=n[0],l=n[1];return(0,i.useEffect)(function(){var n=function(){l((0,a.z)(e.map(function(e){return(0,a.A)(e)})))};return n(),(0,o.xW)(e.map(function(e){return e.onServerCapabilitiesChange(function(){return n()})}))},[e]),t}},19021:(e,n,t)=>{"use strict";t.d(n,{r:()=>ez});var r=t(1889),i=t(72004),o=t(12694),a=t(21462),l=t(88079),s=t(23494),c=t(37743),u=t(83846),d=t(45773),p=t(84044),f=t(44987),h=t(99672),m=t(81962),g=t(93415),v=t(35482),w=t(6680),y=t(93682),b=t(78559),S=t(40043),Y=t(65995),A="cm-agent-flash-range-element",C="rgba(100, 0, 255, 0.3)",x=d.Lz.theme((0,u._)({"&":{maxHeight:"max(calc(".concat(Y.R.height," - 125px), 125px)")},".cm-gutters":{backgroundColor:w.LU.backgroundHigher}},".".concat(A),{display:"inline-block"})),k=d.Lz.theme((0,u._)({"&":{maxHeight:"calc(".concat(Y.R.height," - 40px)")},".cm-scroller":{"&::-webkit-scrollbar":{display:"none"}},".cm-gutters":{backgroundColor:w.LU.backgroundHigher}},".".concat(A),{display:"inline-block"})),_=function(){function e(n,t){var r=this;(0,c._)(this,e),this.view=n,this.target=null,this.previous="",this.destroyed=!1,this.loop=new m.F3(function(e,t){if(null===r.target)return t();var i=n.lineBlockAt(r.target),o=n.scrollDOM.scrollTop,a=Math.min(Math.max(i.top,0),n.scrollDOM.scrollHeight-n.scrollDOM.clientHeight),l=a-o,s=Math.abs(l);if(s<1)return n.scrollDOM.scrollTop=a,r.target=null,t();var c=3e3*e;s<1500&&(c*=Math.sqrt(s/1500));var u=l>=0?Math.max(Math.min(c,s),.5):Math.min(Math.max(-c,-s),-.5);n.scrollDOM.scrollTop+=u}),Promise.resolve().then(function(){!r.destroyed&&(r.previous=t.current,n.dispatch({changes:{from:0,to:n.state.doc.length,insert:t.current}}),r.target=t.current.length,r.loop.start(),r.dispose=t.subscribe(function(e){if(e.startsWith(r.previous)){var t=r.previous.length,i=e.length,o=e.slice(t),a=p.y.of({from:t,to:i,class:A,animation:{duration:550,fill:"backwards",easing:"ease-out",keyframes:{opacity:[.675,.75,1],filter:["grayscale(0.325)","grayscale(0)","grayscale(0)"],backgroundColor:[C,C,"transparent"],offset:[0,.18181818181818182,1]}}});n.dispatch({changes:{from:t,insert:o},effects:a})}else{var l=r.view.state.doc.length;n.dispatch({changes:{from:0,to:l,insert:e}})}r.previous=e,r.target=n.state.doc.length,r.loop.start()}))})}return e.prototype.destroy=function(){var e;this.destroyed=!0,this.target=null,this.loop.stop(),null===(e=this.dispose)||void 0===e||e.call(this)},e}(),D=new h.k(function(e){return d.Z9.define(function(n){return new _(n,e)})});function E(e){var n=e.path,t=e.code,i=e.openPane,c=e.showCode,u=(0,g.m5)(),d=(0,v.eg)(),p=(0,o._)((0,a.useState)(function(){return(0,l.F)(t)}),1)[0];(0,a.useEffect)(function(){p.current!==t&&p.set(t)},[p,t]);var h=D.use(p),m=(0,a.useCallback)(function(){i&&i({type:"codeEditor",data:{path:n}})},[i,n]);return(0,r.Y)(s.N,{icon:(0,r.Y)(b.A,{path:n}),title:(0,r.Y)(R,{path:n,onClick:m}),onOpenPane:m,showOpenPaneButton:!d,openPaneButtonAlt:"Open code file",children:void 0===c||c?(0,r.Y)(f.Ay,{filePath:n,extensions:[u?k:x,h],hideGutter:u,fontSize:u?12:void 0,lineWrapping:!1,hideIndentMarker:!0,readOnly:!0}):null})}function R(e){var n=e.path,t=e.onClick;return t?(0,r.Y)(y.$n,{variant:"underlinedOnHover",text:I(n),onClick:t}):(0,r.Y)(S.EY,{children:I(n)})}function I(e){return e.replace(/^\//,"")}var F=t(74829);function T(e){var n=e.path,t=e.code,i=e.openPane,c=e.maxLines,u=e.animate,d=(0,v.eg)(),p=(0,o._)((0,a.useState)(function(){return(0,l.F)(t)}),1)[0];(0,a.useEffect)(function(){p.current!==t&&p.set(t)},[p,t]);var f=(0,a.useCallback)(function(){i&&i({type:"codeEditor",data:{path:n}})},[i,n]),h=(0,a.useMemo)(function(){return t.split("\n")},[t]);return(0,r.Y)(s.N,{icon:(0,r.Y)(b.A,{path:n}),title:(0,r.Y)(R,{path:n,onClick:f}),onOpenPane:f,openPaneButtonAlt:"Open code file",showOpenPaneButton:!d,elevated:!1,children:(0,r.Y)(F.Y,{animate:void 0!==u&&u,lines:h,maxLines:c},"code-".concat(n))})}function P(e){var n=e.data,t=e.openPane,i=e.showMinimalCodeViewer,o=e.animateMinimalCodeViewer;return void 0!==i&&i?(0,r.Y)(T,{path:n.path,code:n.content,openPane:t,maxLines:12,animate:void 0!==o&&o}):(0,r.Y)(E,{path:n.path,code:n.content,openPane:t})}var L=t(49937),U=t(76860);function N(e){var n=e.openPane,t=(0,L.eg)();return(0,r.Y)(s.N,{icon:(0,r.Y)(U.A,{}),title:"Created PostgreSQL Database",onOpenPane:function(){return n({type:"neon"})},showOpenPaneButton:!t})}var O=t(90629),M=t(52147),B=t(2658),H=t(61234),z=t(43974),W=t(35869),G=t(69596),V=(0,H.x)({countRemoved:[z.wp.color.accentNegativeStronger],countAdded:[z.wp.color.accentPositiveStronger]});function j(e){var n=e.path,t=e.type,i=e.diff,o=e.openPane,l=e.minimal,c=void 0!==l&&l,u=e.animate,d=(0,v.eg)(),p=(0,a.useMemo)(function(){var e=0,n=0,t=!0,r=!1,o=void 0;try{for(var a,l=i.hunks[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value,c=!0,u=!1,d=void 0;try{for(var p,f=s.lines[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value;"removed"===h.type?e++:"added"===h.type&&n++}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}return{added:n,removed:e}},[i]),f=(0,a.useCallback)(function(){o&&o({type:"codeEditor",data:{path:n}})},[o,n]),h=(0,a.useCallback)(function(){o&&o({type:"diff",data:{type:"patch",diff:i}})},[o,i]);return(0,r.Y)(s.N,{icon:(0,r.Y)(b.A,{path:n}),title:(0,r.Y)(q,{type:t,path:n,onClick:d?void 0:f}),right:(0,r.Y)(W.S,{row:!0,gap:8,align:"center",children:(0,r.Y)(Z,{type:t,removed:p.removed,added:p.added})}),onOpenPane:h,openPaneButtonAlt:"Open full diff",showOpenPaneButton:!d,elevated:!c,children:(0,r.Y)(G.A,{patch:i,maxLines:c?12:16,compressed:!1,background:null,noHeader:!0,noBorder:!0,minimal:c,animate:void 0!==u&&u})})}function Z(e){var n=e.type,t=e.removed,i=e.added;switch(n){case"modify":return(0,r.FD)(r.FK,{children:[(0,r.FD)(S.EY,{css:V.countRemoved,children:["-",t]}),(0,r.FD)(S.EY,{css:V.countAdded,children:["+",i]})]});case"create":return(0,r.FD)(S.EY,{css:V.countAdded,children:["+",i]});case"delete":return(0,r.FD)(S.EY,{css:V.countRemoved,children:["-",t]})}}function q(e){var n,t=e.type,i=e.path,o=e.onClick;switch(t){case"create":n=w.LU.accentPositiveStronger;break;case"delete":n=w.LU.accentNegativeStronger}return o?(0,r.Y)(y.$n,{variant:"underlinedOnHover",style:{color:n},text:K(i),onClick:o}):(0,r.Y)(S.EY,{style:{color:n},children:K(i)})}function K(e){return e.replace(/^\//,"")}var $=t(3910),J=t(32633);function Q(e){var n=e.data,t=n.path,l=n.diff,s=n.state,c=e.openPane,u=e.minimal,d=e.animate,p=s===i.qOk.COMPLETE,f=(0,a.useRef)(null),h=(0,a.useMemo)(function(){var e=function(e){var n=e.previous,t=e.path,r=e.diff,i=e.complete;if(!r||"\n"===r)return i?(O.v4(function(e){e.setTag("agent",!0),e.setExtras({diff:r}),O.Cp(Error("No changes in diff"))}),(0,B._)("This diff cannot be displayed")):(0,B.Ok)(X(t));if(!i)try{return(0,B.Ok)((0,M.rj)(r))}catch(e){if(n&&n.ok)return n;return(0,B.Ok)(X(t))}try{return(0,B.Ok)((0,M.rj)(r))}catch(e){return O.v4(function(n){n.setTag("agent",!0),n.setExtras({diff:r}),O.Cp(e)}),(0,B._)("This diff cannot be displayed")}}({previous:f.current,path:t,diff:l,complete:p});return f.current=e,e},[t,l,p]),m=(0,o._)((0,a.useState)(1),2),g=m[0],v=m[1],w=(0,a.useMemo)(function(){return!p&&h.ok&&0===h.value.hunks.length},[p,h]);return((0,a.useEffect)(function(){if(w){var e=setInterval(function(){v(function(e){return e%3+1})},500);return function(){return clearInterval(e)}}},[w]),w)?(0,r.Y)(W.S,{row:!0,gap:"8px",align:"center",justify:"center",children:(0,r.FD)(S.EY,{multiline:!0,children:["Editing ",t,".".repeat(g)]})}):h.ok?(0,r.Y)(j,{path:t,type:"modify",diff:h.value,openPane:c,minimal:void 0!==u&&u,animate:void 0!==d&&d}):(0,r.Y)($.N,{icon:(0,r.Y)(J.A,{}),colorway:"warning",text:h.error})}function X(e){return{labelA:e,labelB:e,hunks:[]}}var ee=t(17966),en=t(71895),et=t(17602),er=t(12494),ei=t(67549),eo=t(92228),ea=t(56185),el=t(5445),es=(0,H.x)({terminalWrapper:[z.wp.borderRadius(4),{"> div":[z.wp.borderRadius(4)],"& .xterm":[z.wp.borderRadius(4)]}]});function ec(e){var n,t=e.data,o=e.openPane,a=t.installed,l=t.isExecuting,c=t.processId,u=t.state,d=null===(n=t.output)||void 0===n?void 0:n.trim().replaceAll("\n","\r\n"),p=(0,en.A)(),f=(0,et.V)(),h="";h=l?a.length>1?"".concat(a.length," packages are being installed:"):"A package is being installed:":a.length>1?"".concat(a.length," packages were installed:"):"A package was installed:";var m=u===i.qOk.IN_PROGRESS&&l&&!d,g=(0,r.FD)(W.S,{css:es.terminalWrapper,style:{backgroundColor:null==f?void 0:f.background},children:[l&&c?(0,r.Y)(er.A,{processId:c,openPane:o,maxHeight:300}):null,!l&&d?(0,r.Y)(ee.xd,{output:d,maxHeight:300,openPane:o}):null,u===i.qOk.IN_PROGRESS||d?null:(0,r.Y)(S.EY,{children:"No output for this installation."})]});return(0,r.Y)(s.g,{icon:(0,r.Y)(eo.A,{}),title:"Dependencies",onOpenPane:function(){o({type:"dependencies"})},text:h,packageList:a,getPackageIcon:function(){return(0,r.Y)(el.A,{})},children:p?(0,r.Y)(ei.A,{headerContent:m?(0,r.FD)(W.S,{row:!0,gap:4,align:"center",children:[(0,r.Y)(ea.A,{}),(0,r.Y)(S.EY,{color:"dimmest",children:"Installing…"})]}):(0,r.Y)(S.EY,{color:"dimmest",children:"View output"}),children:g}):(0,r.FD)(W.S,{gap:4,children:[(0,r.Y)(S.EY,{children:m?"Installing…":"Command output:"}),g]})})}function eu(e){var n=e.data.uninstalled,t=e.openPane,i=n.length>1?"".concat(n.length," packages were uninstalled:"):"A package was uninstalled:";return(0,r.Y)(s.g,{icon:(0,r.Y)(eo.A,{}),title:"Dependencies",onOpenPane:function(){t({type:"dependencies"})},text:i,packageList:n,getPackageIcon:function(){return(0,r.Y)(el.A,{})}})}var ed=t(53363);function ep(e){var n=e.data;return(0,r.Y)(s.N,{icon:(0,r.Y)(ed.A,{}),title:(0,r.Y)(R,{path:n.data.path}),showOpenPaneButton:!1})}function ef(e){var n=e.data,t=e.openPane;return(0,r.Y)(E,{path:n.data.filePath,code:n.data.content,openPane:t,showCode:!1})}var eh=t(74967),em=(0,H.x)({loading:[z.wp.center,{marginLeft:"auto",marginRight:"auto"}],aspectRatio:[z.wp.position.relative,z.wp.height(0),{paddingBottom:"".concat(56.25,"%")}],image:[z.wp.coverContainer,{"& > span":[z.wp.borderRadius(4),z.wp.border({color:w.LU.outlineDimmer})]}]});function eg(e){var n=e.data.imageUrl;return n?(0,r.Y)(W.S,{css:em.aspectRatio,children:(0,r.Y)(W.S,{css:em.image,children:(0,r.Y)(eh.A,{layout:"fill",src:n,alt:"Screenshot",objectFit:"cover"})})}):(0,r.Y)(W.S,{css:em.loading,children:(0,r.Y)(ea.A,{})})}var ev=t(79040),ew=t(6761),ey=t(97003),eb=(0,H.x)({wrapper:[z.wp.height("100%")],terminalWrapper:[z.wp.overflow("hidden"),{"& .xterm":[z.wp.borderRadius(0,0,4,4)]}]});function eS(e){var n=e.data.data,t=e.openPane,i=(0,en.A)(),o=(0,et.V)(),a=null;n.isExecuting||(a=0===n.exitCode?(0,r.Y)(ew.A,{}):(0,r.Y)(J.A,{}));var l=!0===n.isExecuting,c=(0,r.Y)(W.S,{css:eb.wrapper,style:{backgroundColor:null==o?void 0:o.background},children:l?(0,r.Y)(ev.A,{processId:n.processId,openPane:t,maxHeight:300,interactive:!1}):(0,r.Y)(eY,{output:n.output,openPane:t})});return(0,r.Y)(s.N,{icon:(0,r.Y)(ey.A,{}),title:"$ ".concat(n.command),right:a,renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!1,children:i?(0,r.Y)(ei.A,{headerContent:(0,r.Y)(S.EY,{color:"dimmest",children:"View output"}),children:c}):c})}function eY(e){var n=e.output,t=e.openPane;return 0===n.length?null:(0,r.Y)(W.S,{css:eb.terminalWrapper,children:(0,r.Y)(ee.xd,{maxHeight:300,output:n,openPane:t})})}var eA=(0,H.x)({wrapper:[z.wp.height("100%")],terminalWrapper:[z.wp.overflow("hidden"),{"& .xterm":[z.wp.borderRadius(0,0,4,4)]}]});function eC(e){var n,t,i=e.data.data,o=e.openPane,a=(0,et.V)(),l=null;(null===(n=i.status)||void 0===n?void 0:n.$kind)==="exitCode"&&(l=0===i.status.exitCode?(0,r.Y)(ew.A,{}):(0,r.Y)(J.A,{}));var c="\r"+i.command.replaceAll("\n","\r\n")+"\r\n";i.output&&(c+="\r\n"+i.output.replaceAll("\n","\r\n"));var u=(null===(t=i.status)||void 0===t?void 0:t.$kind)==="isExecuting";return(0,r.Y)(s.N,{icon:(0,r.Y)(U.A,{}),title:u?"Executing SQL query":"Executed SQL query",right:l,renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!1,children:(0,r.Y)(W.S,{css:eA.wrapper,style:{backgroundColor:null==a?void 0:a.background},children:(0,r.Y)(ex,{output:c,openPane:o})})})}function ex(e){var n=e.output,t=e.openPane;return 0===n.length?null:(0,r.Y)(W.S,{css:eA.terminalWrapper,children:(0,r.Y)(ee.xd,{maxHeight:300,output:n,openPane:t})})}function ek(e){var n=e.data.deps,t=e.openPane,i=n.length>1?"".concat(n.length," system dependencies were installed:"):"A system dependency was installed:";return(0,r.Y)(s.g,{icon:(0,r.Y)(eo.A,{}),title:"Dependencies",onOpenPane:function(){t({type:"dependencies"})},text:i,packageList:n,getPackageIcon:function(){return(0,r.Y)(eo.A,{})}})}function e_(e){var n=e.data.deps,t=e.openPane,i=n.length>1?"".concat(n.length," system dependencies were uninstalled:"):"A system dependency was uninstalled:";return(0,r.Y)(s.g,{icon:(0,r.Y)(eo.A,{}),title:"Dependencies",onOpenPane:function(){t({type:"dependencies"})},text:i,packageList:n,getPackageIcon:function(){return(0,r.Y)(eo.A,{})}})}var eD=t(69101);function eE(e){var n=e.data.modules,t=e.openPane,i=n.length>1?"".concat(n.length," system modules were installed:"):"A system module was installed:";return(0,r.Y)(s.g,{icon:(0,r.Y)(eo.A,{}),title:"Dependencies",onOpenPane:function(){t({type:"dependencies"})},text:i,packageList:n,getPackageIcon:function(e){return(0,r.Y)(eD.A,{module:{name:e}})}})}var eR=t(46434),eI=t(29935),eF=t(82643),eT=t(31167),eP=t(60990),eL=t(38349),eU=t(9885),eN=t(59086),eO=(0,H.x)({loading:[z.wp.p(8)],body:[z.wp.height("100%"),z.wp.minHeight("100%")],terminalWrapper:[z.wp.overflow("hidden"),{"& .xterm":[z.wp.borderRadius(0,0,4,4)]}]});function eM(e){var n=(0,L.eg)(),t=(0,en.A)(),o=e.data,l=e.openPane,c=o.workflowName,u=o.state,d=(0,eL.If)(),p=(0,eT.T)(),f=(0,et.V)(),h=(0,a.useMemo)(function(){if(!d)return null;var e=Object.values(d).filter(function(e){return e.workflow.name===c});return 0===e.length?null:e.sort(function(e,n){return n.startTime-e.startTime})[0]},[c,d]);if(u===i.qOk.IN_PROGRESS)return(0,r.Y)(W.S,{css:eO.loading,align:"center",children:(0,r.Y)(ea.A,{})});var m=(0,r.Y)(W.S,{css:eO.body,style:{backgroundColor:null==f?void 0:f.background},children:h&&p?(0,r.Y)(eH,{workflowRunState:h,currentUserId:p,openPane:l}):null});return(0,r.Y)(s.N,{icon:o.restart?(0,r.Y)(eN.A,{}):(0,r.Y)(eU.A,{}),title:c,onOpenPane:function(){return l({type:"runnerOutput"})},renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!n,children:t?(0,r.Y)(ei.A,{headerContent:(0,r.Y)(S.EY,{color:"dimmest",children:"View output"}),children:m}):m})}function eB(){}function eH(e){var n,t=e.workflowRunState,i=e.currentUserId,l=e.openPane,s=(0,a.useId)(),c=(0,et.V)(),u=t.runId,d=t.tasks.findIndex(function(e){var n;return(null===(n=e.metadata)||void 0===n?void 0:n.task)==="shell.exec"}),p=(0,ee.Ui)({maxHeight:300,openPane:l}),f=p.visibleHeight,h=p.bufferHeight,m=p.wrapperResizeRef,g=p.xterm,v=p.xtermRef,w=(0,o._)((0,a.useState)(null),2),y=w[0],b=w[1],S=(0,a.useCallback)(function(e){return b(function(){return e}),function(){}},[]),Y=(0,a.useRef)(!1);return(0,eP.b)((n=(0,eI._)(function(e,n){var t,r,o,a,l,c,p,f,h,m,v;return(0,eF.YH)(this,function(w){switch(w.label){case 0:if(t=n.signal,Y.current||!g||!y)return[2];o=(r=e.workflows.connectToTask.stream({runId:u,taskIdx:d,userId:i,processViewId:s},{signal:t})).resReadable,a=r.reqWritable,Y.current=!0,a.write({$kind:"resize",size:g.getSize()}),l=!1,c=!1,w.label=1;case 1:w.trys.push([1,6,7,12]),f=(0,eR._)(o),w.label=2;case 2:return[4,f.next()];case 3:if(!(l=!(h=w.sent()).done))return[3,5];if(!(m=h.value).ok){if("UNEXPECTED_DISCONNECT"===m.payload.code||"CANCEL"===m.payload.code||"NO_MATCHING_TASK_STATE"===m.payload.code)return[3,5];throw Error("[".concat(m.payload.code,"] ").concat(m.payload.message))}"output"===m.payload.$kind&&y(m.payload.chunk),w.label=4;case 4:return l=!1,[3,2];case 5:return[3,12];case 6:return v=w.sent(),c=!0,p=v,[3,12];case 7:if(w.trys.push([7,,10,11]),!(l&&null!=f.return))return[3,9];return[4,f.return()];case 8:w.sent(),w.label=9;case 9:return[3,11];case 10:if(c)throw p;return[7];case 11:return[7];case 12:return a.close(),[2]}})}),function(e,t){return n.apply(this,arguments)}),[u,d,y,g,i,s]),(0,r.Y)(W.S,{css:eO.terminalWrapper,style:{height:f,background:null==c?void 0:c.background},children:(0,r.Y)(ee._x,{onInput:eB,xterm:g,wrapperResizeRef:m,bufferHeight:h,setOnMessage:S,onResizeTerminal:eB,children:(0,r.Y)(ee.DJ,{xtermRef:v,visibleHeight:f,maxHeight:300})})})}function ez(e){var n=e.data,t=e.openPane,o=e.minimal,a=void 0!==o&&o,l=e.animateCode,s=void 0!==l&&l;switch(null==n?void 0:n.$kind){case"fileEditData":return(0,r.Y)(Q,{data:n,openPane:t,minimal:a,animate:s});case"createFileData":return(0,r.Y)(P,{data:n,openPane:t,showMinimalCodeViewer:a,animateMinimalCodeViewer:s});case"readFileData":return(0,r.Y)(ef,{data:n,openPane:t});case"readDirData":return(0,r.Y)(ep,{data:n});case"shellExecutionData":return(0,r.Y)(eS,{data:n,openPane:t});case"packagerInstallData":return(0,r.Y)(ec,{data:n,openPane:t});case"packagerUninstallData":return(0,r.Y)(eu,{data:n,openPane:t});case"systemDependencyInstallData":return(0,r.Y)(ek,{data:n,openPane:t});case"systemDependencyUninstallData":return(0,r.Y)(e_,{data:n,openPane:t});case"toolchainInstallData":return(0,r.Y)(eE,{data:n,openPane:t});case"screenshotData":return(0,r.Y)(eg,{data:n});case"workflowsStartToolData":case"workflowsRestartToolData":case"workflowsSetRunConfigToolData":return(0,r.Y)(eM,{data:n,openPane:t});case"createPostgresqlDatabaseData":return(0,r.Y)(N,{openPane:t});case"sqlExecutionData":return(0,r.Y)(eC,{data:n,openPane:t});default:if((null==n?void 0:n.state)===i.qOk.IN_PROGRESS)return(0,r.Y)(eG,{});return null}}var eW=(0,H.x)({loading:[z.wp.px(16),z.wp.py(48),z.wp.center]});function eG(){return(0,r.Y)(W.S,{css:eW.loading,children:(0,r.Y)(ea.A,{})})}},19174:(e,n,t)=>{"use strict";t.d(n,{V:()=>i});var r=t(75152),i=r.ZU.Object({type:r.ZU.Literal("agentChat"),data:r.ZU.Optional(r.ZU.Object({sessionId:r.ZU.Optional(r.ZU.String())}))})},19435:(e,n,t)=>{"use strict";t.d(n,{n:()=>c});var r=t(17844),i=t(93629),o=t(17459),a=t(1889),l=t(21462),s=t(40043);function c(e){var n=e.text,t=(0,o._)(e,["text"]),c=(0,l.useRef)(null),u=(0,l.useRef)(n);return(0,l.useEffect)(function(){if(u.current!==n){var e=n.length;!function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;requestAnimationFrame(function(){var i=c.current;if(i)i.textContent=n.slice(0,r),r!==e&&t(r+1)})}()}},[n]),(0,l.useEffect)(function(){u.current=n},[n]),(0,a.Y)(s.EY,(0,i._)((0,r._)({},t),{ref:c,children:n}))}},19706:(e,n,t)=>{"use strict";t.d(n,{d:()=>y});var r=t(1889),i=t(45981),o=t.n(i),a=t(21462),l=t(6680),s=t(98988),c=t(47258),u=t(43974),d=t(26705),p=t(2527),f=t(40043),h=t(35869),m=t(28365),g=t(84296),v=h.D.a,w=h.D.button,y=(0,a.forwardRef)(function(e,n){var t=e.className,i=e.colorway,a=e.closable,y=e.iconLeft,b=e.iconRight,S=e.text,Y=e.closeAction,A=e.textAlign,C={container:[u.wp.flex.growAndShrink(1),A?u.wp.textAlign[A]:u.wp.textAlign.center]},x=(0,r.FD)(r.FK,{children:[(0,r.Y)(g.Z_,{size:16,children:y}),(0,r.Y)(f.EY,{css:C.container,variant:"small",children:S}),(0,r.Y)(g.Z_,{size:16,children:b})]}),k=i?l.ky[i].default:l.LU.accentPrimaryDefault,_=[u.wp.rowWithGap(4),u.wp.align.center,u.wp.p(4),u.wp.pl(8),u.wp.borderRadius(),u.wp.flex.growAndShrink(1),i?(0,s.KU)(i):c.b.filledAndOutlined,{"&:focus-within":{boxShadow:"0 0 0 2px "+k}}];return(0,r.FD)(h.S,{css:_,children:["href"in e?(0,r.Y)(o(),{legacyBehavior:!0,as:e.as,href:e.href,passHref:!0,prefetch:e.prefetch,replace:e.replace,scroll:e.scroll,shallow:e.shallow,children:(0,r.Y)(v,{ref:n,className:t,rel:e.rel,role:"link",target:e.target,css:[u.wp.reset.button,u.wp.rowWithGap(8),u.wp.center,u.wp.flex.growAndShrink(1)],children:x})}):(0,r.Y)(w,{ref:n,className:t,onClick:e.onClick,type:e.type,css:[u.wp.reset.button,u.wp.rowWithGap(8),u.wp.center,u.wp.flex.growAndShrink(1),u.wp.cursor.pointer],children:x}),a?(0,r.Y)(p.ui,{elevated:!0,css:[u.wp.flex.grow(0),{background:"transparent"}],children:(0,r.Y)(d.K0,{alt:"Close",tooltipBehavior:"hidden",colorway:i,onClick:Y,children:(0,r.Y)(m.A,{})})}):null]})});y.displayName="StatusBannerButton"},19750:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7.436 3.506A.75.75 0 0 1 8 3.25h13A2.75 2.75 0 0 1 23.75 6v12A2.75 2.75 0 0 1 21 20.75H8a.75.75 0 0 1-.564-.256l-7-8a.75.75 0 0 1 0-.988l7-8ZM8.34 4.75 1.997 12l6.343 7.25H21A1.25 1.25 0 0 0 22.25 18V6A1.25 1.25 0 0 0 21 4.75H8.34Zm3.13 3.72a.75.75 0 0 1 1.06 0L15 10.94l2.47-2.47a.75.75 0 1 1 1.06 1.06L16.06 12l2.47 2.47a.75.75 0 1 1-1.06 1.06L15 13.06l-2.47 2.47a.75.75 0 1 1-1.06-1.06L13.94 12l-2.47-2.47a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}},19761:(e,n,t)=>{"use strict";function r(e){return e.map(function(e){return"group"===e.data.type?e.data.key:e.data.key||e.data.label}).join(":")}t.d(n,{p:()=>r})},19817:(e,n,t)=>{"use strict";t.d(n,{I:()=>s});var r=t(1889),i=t(6680),o=t(61234),a=t(35869),l=(0,o.x)({container:[{maskImage:"linear-gradient(to right, white 80%, transparent)"}]}),s=function(e){var n=e.className;return(0,r.Y)(a.S,{className:n,css:l.container,children:(0,r.FD)("svg",{viewBox:"0 0 448 59",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.Y)("path",{d:"M28 14.5C56 14.5 56 44.5 84 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M196 14.5C224 14.5 224 44.5 252 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M280 14.5C308 14.5 308 44.5 336 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M364 14.5C392 14.5 392 44.5 420 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M168 14.5C140 14.5 140 44.5 112 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M112 14.5C140 14.5 140 44.5 168 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M336 14.5C308 14.5 308 44.5 280 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M420 14.5C392 14.5 392 44.5 364 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M252 14.5C224 14.5 224 44.5 196 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("rect",{width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6868 9.64645C11.8821 9.84171 11.8821 10.1583 11.6868 10.3536L8.04036 14L11.6868 17.6464C11.8821 17.8417 11.8821 18.1583 11.6868 18.3536C11.4915 18.5488 11.175 18.5488 10.9797 18.3536L6.9797 14.3536C6.78444 14.1583 6.78444 13.8417 6.9797 13.6464L10.9797 9.64645C11.175 9.45118 11.4915 9.45118 11.6868 9.64645ZM16.313 9.64645C16.5083 9.45118 16.8249 9.45118 17.0201 9.64645L21.0201 13.6464C21.2154 13.8417 21.2154 14.1583 21.0201 14.3536L17.0201 18.3536C16.8249 18.5488 16.5083 18.5488 16.313 18.3536C16.1178 18.1583 16.1178 17.8417 16.313 17.6464L19.9595 14L16.313 10.3536C16.1178 10.1583 16.1178 9.84171 16.313 9.64645Z",fill:i.LU.accentPositiveStrongest}),(0,r.Y)("rect",{x:"84",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M95.6868 40.6464C95.8821 40.8417 95.8821 41.1583 95.6868 41.3536L92.0404 45L95.6868 48.6464C95.8821 48.8417 95.8821 49.1583 95.6868 49.3536C95.4915 49.5488 95.175 49.5488 94.9797 49.3536L90.9797 45.3536C90.7844 45.1583 90.7844 44.8417 90.9797 44.6464L94.9797 40.6464C95.175 40.4512 95.4915 40.4512 95.6868 40.6464ZM100.313 40.6464C100.508 40.4512 100.825 40.4512 101.02 40.6464L105.02 44.6464C105.215 44.8417 105.215 45.1583 105.02 45.3536L101.02 49.3536C100.825 49.5488 100.508 49.5488 100.313 49.3536C100.118 49.1583 100.118 48.8417 100.313 48.6464L103.959 45L100.313 41.3536C100.118 41.1583 100.118 40.8417 100.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("rect",{x:"168",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M179.687 40.6464C179.882 40.8417 179.882 41.1583 179.687 41.3536L176.04 45L179.687 48.6464C179.882 48.8417 179.882 49.1583 179.687 49.3536C179.492 49.5488 179.175 49.5488 178.98 49.3536L174.98 45.3536C174.784 45.1583 174.784 44.8417 174.98 44.6464L178.98 40.6464C179.175 40.4512 179.492 40.4512 179.687 40.6464ZM184.313 40.6464C184.508 40.4512 184.825 40.4512 185.02 40.6464L189.02 44.6464C189.215 44.8417 189.215 45.1583 189.02 45.3536L185.02 49.3536C184.825 49.5488 184.508 49.5488 184.313 49.3536C184.118 49.1583 184.118 48.8417 184.313 48.6464L187.959 45L184.313 41.3536C184.118 41.1583 184.118 40.8417 184.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("rect",{x:"252",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M263.687 40.6464C263.882 40.8417 263.882 41.1583 263.687 41.3536L260.04 45L263.687 48.6464C263.882 48.8417 263.882 49.1583 263.687 49.3536C263.492 49.5488 263.175 49.5488 262.98 49.3536L258.98 45.3536C258.784 45.1583 258.784 44.8417 258.98 44.6464L262.98 40.6464C263.175 40.4512 263.492 40.4512 263.687 40.6464ZM268.313 40.6464C268.508 40.4512 268.825 40.4512 269.02 40.6464L273.02 44.6464C273.215 44.8417 273.215 45.1583 273.02 45.3536L269.02 49.3536C268.825 49.5488 268.508 49.5488 268.313 49.3536C268.118 49.1583 268.118 48.8417 268.313 48.6464L271.959 45L268.313 41.3536C268.118 41.1583 268.118 40.8417 268.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("rect",{x:"336",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M347.687 40.6464C347.882 40.8417 347.882 41.1583 347.687 41.3536L344.04 45L347.687 48.6464C347.882 48.8417 347.882 49.1583 347.687 49.3536C347.492 49.5488 347.175 49.5488 346.98 49.3536L342.98 45.3536C342.784 45.1583 342.784 44.8417 342.98 44.6464L346.98 40.6464C347.175 40.4512 347.492 40.4512 347.687 40.6464ZM352.313 40.6464C352.508 40.4512 352.825 40.4512 353.02 40.6464L357.02 44.6464C357.215 44.8417 357.215 45.1583 357.02 45.3536L353.02 49.3536C352.825 49.5488 352.508 49.5488 352.313 49.3536C352.118 49.1583 352.118 48.8417 352.313 48.6464L355.959 45L352.313 41.3536C352.118 41.1583 352.118 40.8417 352.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("rect",{x:"420",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M431.687 40.6464C431.882 40.8417 431.882 41.1583 431.687 41.3536L428.04 45L431.687 48.6464C431.882 48.8417 431.882 49.1583 431.687 49.3536C431.492 49.5488 431.175 49.5488 430.98 49.3536L426.98 45.3536C426.784 45.1583 426.784 44.8417 426.98 44.6464L430.98 40.6464C431.175 40.4512 431.492 40.4512 431.687 40.6464ZM436.313 40.6464C436.508 40.4512 436.825 40.4512 437.02 40.6464L441.02 44.6464C441.215 44.8417 441.215 45.1583 441.02 45.3536L437.02 49.3536C436.825 49.5488 436.508 49.5488 436.313 49.3536C436.118 49.1583 436.118 48.8417 436.313 48.6464L439.959 45L436.313 41.3536C436.118 41.1583 436.118 40.8417 436.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("line",{x1:"28",y1:"14",x2:"444",y2:"14",stroke:i.LU.accentPositiveDimmest,strokeWidth:"2"})]})})}},19856:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M8.09945 1.00012C9.8352 1.00012 11.2423 2.40723 11.2423 4.14298L11.2422 4.16743C11.2554 6.75801 13.358 8.85436 15.951 8.85727L15.9566 8.85726C17.6924 8.85726 19.0995 10.2644 19.0995 12.0001C19.0995 13.7359 17.6924 15.143 15.9566 15.143C13.3611 15.143 11.2554 17.2404 11.2422 19.8328C11.2423 19.841 11.2423 19.8491 11.2423 19.8573C11.2423 21.593 9.8352 23.0001 8.09945 23.0001C6.3637 23.0001 4.9566 21.593 4.9566 19.8573C4.9566 18.1215 6.3637 16.7144 8.09945 16.7144C8.10155 16.7144 8.10365 16.7144 8.10575 16.7144C10.7064 16.7109 12.8136 14.6016 12.8136 12.0001C12.8136 9.39653 10.703 7.2859 8.09939 7.28584C6.36367 7.28581 4.9566 5.87871 4.9566 4.14298C4.9566 2.40723 6.3637 1.00012 8.09945 1.00012Z",fill:"url(#paint0_linear_434_35354)"}),(0,o.Y)("path",{d:"M11.2423 12.0001C11.2423 10.2644 9.83518 8.85729 8.09943 8.85729C6.36368 8.85729 4.95657 10.2644 4.95657 12.0001C4.95657 13.7359 6.36368 15.143 8.09943 15.143C9.83518 15.143 11.2423 13.7359 11.2423 12.0001Z",fill:"url(#paint1_linear_434_35354)"}),(0,o.FD)("defs",{children:[(0,o.FD)("linearGradient",{id:"paint0_linear_434_35354",x1:"4.95657",y1:"1.00012",x2:"25.7048",y2:"15.5274",gradientUnits:"userSpaceOnUse",children:[(0,o.Y)("stop",{stopColor:"#69D9F0"}),(0,o.Y)("stop",{offset:"1",stopColor:"#0093B0"})]}),(0,o.FD)("linearGradient",{id:"paint1_linear_434_35354",x1:"4.95657",y1:"1.00012",x2:"25.7048",y2:"15.5274",gradientUnits:"userSpaceOnUse",children:[(0,o.Y)("stop",{stopColor:"#69D9F0"}),(0,o.Y)("stop",{offset:"1",stopColor:"#0093B0"})]})]})]}))}},19906:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(63892);function i(e){(0,r.u4)(r.AZ.FILETREE_USED,e)}},19918:(e,n,t)=>{"use strict";t.d(n,{G:()=>l});var r=t(1889),i=t(35869),o=t(27635),a=t.n(o);function l(e){return(0,r.Y)(i.S,{clsx:a().footer,children:e.children})}},20160:(e,n,t)=>{"use strict";t.d(n,{Hn:()=>d,dz:()=>a,fZ:()=>u});var r=t(21462),i=t(44370),o=t(69338),a=(0,r.createContext)(null),l=(0,i.eU)(null),s=(0,i.eU)(null,function(e,n,t){n(l,t)});function c(){var e=(0,r.useContext)(a);if(!e)throw Error("Expected store in context");return e}function u(){return(0,o.md)(l,{store:c()})}function d(e){var n=(0,o.md)(l,{store:c()}),t=(0,o.Xr)(s,{store:c()});(0,r.useEffect)(function(){n!==e&&t(e)},[e,n,t])}},20299:(e,n,t)=>{"use strict";t.d(n,{EI:()=>C,_b:()=>S,hg:()=>x,sj:()=>A,mt:()=>Y,OS:()=>b,Io:()=>k,yI:()=>_});var r=t(12694),i=t(21462),o=t(72004),a=t(26496),l=t(68209),s=t(33105),c=t(52097),u=t(2960),d=t(52690),p=t(67337),f={direction:"forward",state:{inflight:!1},map:function(e){return e.inflight},reducer:function(e,n){(0,o.TW7)(e,"revertEventContents")?n.inflight=!0:(0,o.cLF)(e,"revertData")&&(n.inflight=!1)}},h=t(17008),m=t(42726),g=t(51895),v=t(33977),w=t(38349),y=t(13982),b=128,S=64,Y=8,A=100,C=250,x=550,k=function(e){return e.NOT_RUNNING="NOT_RUNNING",e.STARTING="STARTING",e.RUNNING="RUNNING",e.FAILED="FAILED",e.CRASHED="CRASHED",e}({});function _(e){var n,t,b,S,Y,A,C,x,k,_,D,E,R,I,F,T,P=e.refresh,L=(0,r._)((0,i.useState)(!0),2),U=L[0],N=L[1],O=(0,r._)((0,i.useState)(!1),2),M=O[0],B=O[1],H=(0,r._)((0,i.useState)(!1),2),z=H[0],W=H[1],G=(0,r._)((0,i.useState)(!1),2),V=G[0],j=G[1],Z=(0,r._)((0,i.useState)(!1),2),q=Z[0],K=Z[1],$=(0,i.useRef)(U),J=(0,u.A)(P),Q=(0,w.g3)(),X=(0,p.A)().runner,ee=(0,w.Ah)(X),en=(0,w.If)(),et=(0,w.OK)(),er=(0,a.NC)(),ei=(0,a.dI)(),eo=(0,l.J2)(er.sessions.agent,null),ea=(0,l.Rj)(function(){return ei.status.map(function(e){return"connected"===e})},[ei],{default:!1}),el=(0,l.J2)(null==eo?void 0:eo.agent.state,null),es=null==el?void 0:el.state,ec=null==el?void 0:el.reason,eu=(0,y.w)(),ed=(0,l.Rj)(function(){return null==eu?void 0:eu.scan(function(e,n){var t,r;return(null===(t=n.toPresent)||void 0===t?void 0:t.toolData.$kind)==="presentResultsToolData"?null===(r=n.toPresent)||void 0===r?void 0:r.toolData.data:e},void 0)},[eu]),ep=(0,l.J2)((0,h.e)())&&U,ef=(0,l.Rj)(function(){return null==eo?void 0:eo.reduce(f,"global")},[eo],{default:!1}),eh=(0,v._Q)(),em=(0,i.useCallback)(function(e){var n;null===(n=J.current)||void 0===n||n.call(J),(null==e?void 0:e.$kind)==="presentDeployData"&&j(!0),M&&(null==e?void 0:e.$kind)==="presentResultsToolData"&&W(!0)},[J,M]);(0,y.E)(em),(0,a.zv)("received-event",function(e){var n=e.event;if(n.sessionId===(null==eo?void 0:eo.id)&&es===o.g32.AGENT_STATE_RUNNING&&!M){var t=(0,m.b)(n);t&&t.$kind&&"deployData"!==t.$kind&&"presentResultsToolData"!==t.$kind&&"readFileData"!==t.$kind&&B(!0)}}),(0,i.useEffect)(function(){es!==o.g32.AGENT_STATE_RUNNING&&B(!1)},[es]);var eg=(t=(n={workflowsConfig:et,workflowsRunState:en,pid1RunnerState:ee,agentStartedWork:M}).workflowsConfig,b=n.workflowsRunState,S=n.pid1RunnerState,Y=n.agentStartedWork,A=(0,i.useRef)(void 0),C=(0,i.useMemo)(function(){if(!t)switch(S){case d.ll.IDLE:case d.ll.STOPPING:case d.ll.OFFLINE:return"NOT_RUNNING";case d.ll.BEFORE_RUN:return"STARTING";case d.ll.RUNNING:return"RUNNING";default:(0,c.A)(S)}if(!b)return"NOT_RUNNING";var e,n=(e=Object.values(b).filter(function(e){return e.workflow.name===t.runButton}).sort(function(e,n){return e.startTime-n.startTime}))[e.length-1];if(!n)return"NOT_RUNNING";var r=n.step;switch(r){case s.zY.RUNNING:return"RUNNING";case s.zY.NOT_STARTED:case s.zY.FINISHED:return"NOT_RUNNING";case s.zY.FAILED:if(!A.current)return"FAILED";if("RUNNING"===A.current||"CRASHED"===A.current)return"CRASHED";if(Y)return"NOT_RUNNING";return"FAILED";default:(0,c.A)(r)}},[t,b,S,A,Y]),(0,i.useEffect)(function(){A.current=C},[C]),C),ev=(k=(x={workflowsConfig:et,workflowsRunState:en,agentStartedWork:M}).workflowsConfig,_=x.workflowsRunState,D=x.agentStartedWork,E=(0,i.useRef)(void 0),R=(0,i.useRef)(void 0),F=(I=(0,r._)((0,i.useMemo)(function(){if(!k||!_)return["NOT_RUNNING",void 0];var e=Object.values(_).filter(function(e){return e.step===s.zY.RUNNING&&e.tasks.some(function(e){var n;return!!e.metadata&&"shell.exec"===e.metadata.task&&(null===(n=e.metadata.openPorts)||void 0===n?void 0:n.some(function(e){return e.forwarded}))})});if(e.length>0)return["RUNNING",e[0].runId];if(void 0!==R.current){var n=_[R.current];if(!n)return["NOT_RUNNING",void 0];var t=n.step;switch(t){case s.zY.FINISHED:case s.zY.NOT_STARTED:break;case s.zY.RUNNING:return["RUNNING",n.runId];case s.zY.FAILED:if("RUNNING"===E.current)return["CRASHED",n.runId];if("CRASHED"===E.current){if(D)return["STARTING",void 0];return["CRASHED",n.runId]}return["FAILED",n.runId];default:(0,c.A)(t)}}return["NOT_RUNNING",void 0]},[k,_,D]),2))[0],T=I[1],(0,i.useEffect)(function(){E.current=F,R.current=T},[F,T]),F),ew=(0,i.useMemo)(function(){return U?ev:eg},[U,ev,eg]);return(0,i.useEffect)(function(){if(Q&&Q.stop&&Q.run){var e=$.current;$.current=U,e!==U&&(U?"RUNNING"===ew&&Q.stop():"RUNNING"===ev&&(Q.stop(),Q.run&&Q.run(d.QG.AGENT_RUN)))}},[U,Q,ew,et,ev]),(0,i.useEffect)(function(){var e="CRASHED"===ew||"FAILED"===ew;(!ep||e)&&W(!1)},[ep,ew]),(0,i.useEffect)(function(){es===o.g32.AGENT_STATE_RUNNING&&j(!1)},[es]),(0,i.useEffect)(function(){es!==o.g32.AGENT_STATE_RUNNING&&eh&&(0,g.N5)(eh)?(N(!1),W(!1),j(!1)):es===o.g32.AGENT_STATE_RUNNING&&N(!0)},[es,eh]),(0,i.useEffect)(function(){ea&&(eo&&void 0!==es&&es!==o.g32.AGENT_STATE_UNKNOWN||eh&&(0,g.N5)(eh))&&K(!0)},[ea,eo,es,eh]),{isAgentControllingRunWorkflow:U,clientConnected:ea,hasBeenReady:q,runState:es,transitionReason:ec,presentResultsEvent:ed,isWaitingOnUserInput:ep,hasInflightRevert:ef,startedWork:M,isWaitingForVisualFeedback:z,readyToDeploy:V,workflowState:ew}}},21792:(e,n,t)=>{"use strict";t.d(n,{A:()=>x});var r=t(1889),i=t(21462),o=t(72004),a=t(26496),l=t(30391),s=t(67337),c=t(33078),u=t(38349),d=t(11646),p=t(63892),f=t(61234),h=t(43974),m=t(40043),g=t(35869),v=t(84185),w=(0,f.x)({wrapper:[h.wp.display.inlineFlex,h.wp.backgroundColor.accentPositiveDimmest,h.wp.color.accentPositiveStrongest,h.wp.align.center,h.wp.borderRadius(),h.wp.py(2),h.wp.px(6),h.wp.cursor.pointer,{"&:hover":[h.wp.color.white,h.wp.backgroundColor.accentPositiveDefault]}]});function y(e){var n=e.trackSource,t=void 0===n?"unknown":n,i=(0,u.cz)(),o=i.runButtonRunsWorkflows,a=i.isOffline,l=i.isDisabled,s=(0,u.sT)();return(0,r.FD)(g.S,{tag:"button",onClick:function(){(0,p.u4)(d.AZ.WORKFLOW_RAN,{source:t,runner:o?"workflows":"pid1"}),s()},css:w.wrapper,row:!0,gap:6,disabled:a||l,children:[(0,r.Y)(v.A,{size:12}),(0,r.Y)(m.EY,{children:"Run"})]})}var b=t(93682),S=t(52684),Y=t(35121);function A(e){var n=e.children,t=e.action;return(0,r.FD)(g.S,{align:"center",children:[(0,r.Y)(m.EY,{children:n}),t?(0,r.Y)(g.S,{row:!0,align:"center",gap:4,children:t}):null]})}function C(e){var n=e.openNetworkingTool,t=e.openAgentPane,c=(0,u.cz)().isRunning,d=(0,s.A)().ports,p=(0,l.A)(d.portsState),f=(0,i.useMemo)(function(){return null==p?void 0:p.some(function(e){return e.isOpen})},[p]),h=(0,a.hT)();if((0,i.useMemo)(function(){return void 0!==h&&h!==o.g32.AGENT_STATE_UNKNOWN},[h])){var m=h===o.g32.AGENT_STATE_PAUSING||h===o.g32.AGENT_STATE_PAUSED?"is waiting for your response.":"is working on it.";return(0,r.Y)(A,{action:(0,r.FD)(r.FK,{children:[(0,r.Y)(b.$n,{onClick:t,size:"small",text:"Agent",iconLeft:(0,r.Y)(S.A,{size:12})})," ",m]}),children:"The app is currently not running."})}return c?f?(0,r.Y)(A,{action:(0,r.FD)(r.FK,{children:["Use"," ",(0,r.Y)(b.$n,{onClick:n,size:"small",text:"Networking",iconLeft:(0,r.Y)(Y.A,{size:12})})," ","tool to configure them."]}),children:"The app is running, but has no external ports configured."}):(0,r.Y)(A,{children:"The app is running, but there's no webpage to preview right now."}):(0,r.Y)(A,{action:(0,r.FD)(r.FK,{children:[(0,r.Y)(y,{})," to see the results of your app."]}),children:"The app is currently not running."})}function x(e){var n=e.openNetworkingTool,t=e.openAgentPane;return(0,r.Y)(c.A,{pane:{type:"webview"},bodyText:(0,r.Y)(C,{openNetworkingTool:n,openAgentPane:t})})}},22529:(e,n,t)=>{"use strict";t.d(n,{A:()=>g,M:()=>w});var r=t(17844),i=t(17459),o=t(1889),a=t(67668),l=t(61234),s=t(43974),c=t(93682),u=t(36245),d=t(2527),p=t(40043),f=t(35869),h=t(1018),m=(0,l.x)({code:[s.wp.font.code,s.wp.flex.grow(1)],surface:[s.wp.borderRadius(8),s.wp.p(8),s.wp.flex.row,s.wp.rowWithGap(8),s.wp.align.center,s.wp.width("100%"),s.wp.overflowX("auto")]});function g(e){var n=w(e.filePath,e.keyName);if(!n)return null;var t=n.import,i=n.access;return(0,o.FD)(f.S,{gap:8,children:[t?(0,o.Y)(v,(0,r._)({code:t},e)):null,(0,o.Y)(v,(0,r._)({code:i},e))]})}function v(e){var n=e.code,t=e.onInsert,r=(0,i._)(e,["code","onInsert"]);return(0,o.FD)(d.ui,{elevated:r.elevated,css:m.surface,children:[(0,o.Y)(u.r,{textToCopy:n}),(0,o.Y)(p.EY,{variant:"small",css:m.code,multiline:!1,children:n}),t?(0,o.Y)(c.$n,{variant:"outlined",size:"small",onClick:function(){return t(n)},text:"Insert",iconRight:(0,o.Y)(h.A,{})}):null]})}function w(e,n){if(!e)return null;switch((0,a.an)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(n,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(n,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(n,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(n,'")')};case"rb":return{import:null,access:'ENV["'.concat(n,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(n,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(n,'");')};case"sh":return{import:null,access:'"$'.concat(n,'"')};default:return null}}},22605:(e,n,t)=>{"use strict";t.d(n,{u:()=>g});var r=t(29935),i=t(12694),o=t(82643),a=t(21462),l=t(17844),s=t(12584),c=t(41114),u=t(51026);function d(){var e=(0,s._)(["\n  query CheckForAgentSession($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        supportsAgent\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,c.J1)(d()),h=t(26496),m=t(16907);function g(){var e,n,t=(0,h.NC)(),s=(0,h.jt)(),c=(0,h.Wq)(),d=(0,i._)((e={variables:{replId:(0,m.A)()}},n=(0,l._)({},p,e),u._(f,n)),1)[0];(0,a.useEffect)(function(){if(!s){var e=!1;return function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return(n=(0,r._)(function(){var n,r,i;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,t.sessions.query({types:h.Ly}).once()];case 1:if(n=o.sent(),e)return[2];if(0!==n.size)return[3,3];return[4,d()];case 2:if(!((null===(r=(i=o.sent()).data)||void 0===r?void 0:r.getRepl.__typename)==="Repl"&&i.data.getRepl.supportsAgent))return[2];o.label=3;case 3:return c(),[2]}})})).apply(this,arguments)}},[t,s,c,d])}},22606:(e,n,t)=>{"use strict";t.d(n,{BI:()=>S,Or:()=>Y,Yc:()=>x,_j:()=>A,ou:()=>y});var r=t(17844),i=t(12584),o=t(41114),a=t(50175),l=t(86997),s=t(37900);function c(){var e=(0,i._)(["\n  fragment WorkspaceNeonDatabase on NeonDatabase {\n    id\n    databaseId\n    databaseName\n    projectId\n    connectionString\n    isFrozen\n    isEphemeral\n    scheduledFreezeTime\n    scheduledDeletionTime\n    quotaLogicalSizeBytes\n    minComputeUnits\n    maxComputeUnits\n    historyRetentionSeconds\n    timeCreated\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment NeonCurrentUser on CurrentUser {\n    id\n    ...UserPlanStateCurrentUser\n    isMemberOfAnyOrg\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        database {\n          id\n          ...WorkspaceNeonDatabase\n        }\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          id\n          ...WorkspaceNeonDatabase\n        }\n      }\n    }\n    currentUser {\n      id\n      ...NeonCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  mutation UnfreezeNeonDatabase($input: UnfreezeNeonDatabaseInput!) {\n    unfreezeNeonDatabase(input: $input) {\n      ... on UnfreezeNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return h=function(){return e},e}var m={},g=(0,o.J1)(c()),v=(0,o.J1)(u(),s.o),w=(0,o.J1)(d(),g);function y(e){var n=(0,r._)({},m,e);return a.n(w,n)}var b=(0,o.J1)(p());function S(e){var n=(0,r._)({},m,e);return a.n(b,n)}var Y=(0,o.J1)(f(),g,v);function A(e){var n=(0,r._)({},m,e);return l.I(Y,n)}var C=(0,o.J1)(h());function x(e){var n=(0,r._)({},m,e);return a.n(C,n)}},22643:(e,n,t)=>{"use strict";t.d(n,{K:()=>no});var r=t(12694),i=t(1889),o=t(21462),a=t(72004),l=t(68209),s=t(81239),c=t(97282),u=t(56711),d=t(32788),p=t(47993),f=t(23099),h=t.n(f),m=t(90067),g=t(26496),v=t(52097),w=t(93415),y=t(71895),b=t(1566),S=t(28978),Y=t(28256),A=t(10073),C=t(66705),x=t(54310),k=t(73978),_=t(17844),D=t(93629),E=t(67668),R=t(53046),I=t(42726),F=new Set(["agentPlanStepBegin","createFileData","createPostgresqlDatabaseData","deployConfigData","fileEditData","readFileData","readDirData","shellExecutionData","toolchainInstallData","packagerInstallData","packagerUninstallData","systemDependencyInstallData","systemDependencyUninstallData","screenshotData","searchFileData","searchFilesystemData","sqlExecutionData","workflowsStartToolData","workflowsRestartToolData","workflowsStopToolData","workflowsSetRunConfigToolData","workflowsRemoveRunConfigToolData"]);function T(e){var n,t=(null===(n=e.optionType)||void 0===n?void 0:n.$kind)==="secretRequestAction"?e.optionType.secretRequestAction.secrets:void 0;return(null==t?void 0:t.length)?t:void 0}function P(e){if(e.state===a.qOk.IN_PROGRESS)return!1;var n=e.contents.contents;if(!(0,a.VFn)(n,"agentTimelineEventContents"))return!1;var t=n.agentTimelineEventContents,r=t.toolData;return"user_response"===t.toolName&&(null==r?void 0:r.$kind)==="messageData"}var L={direction:"reverse",state:{revert:null,acknowledged:new Set,approvedPlanId:null,didSeeRenderedEvent:!1,selectedFeatureIds:new Set},transformer:function(e,n){var t=n.revert;(null===(d=n.revert)||void 0===d?void 0:d.eventIdBeforeRevert)===e.id&&(n.revert=null);var r=e.contents.contents,i=null;switch(null==r?void 0:r.$kind){case"sessionCreationEventContents":case"contextComplexityEventContents":return;case"startRapidBuildEventContents":var o=r.startRapidBuildEventContents,l=o.mvpObjective,s=o.followupSteps,c=o.stack,u=o.uploadedFiles;i={type:"startRapidBuild",mvpObjective:l,stack:c,followupSteps:s.length?s:null,uploadedFiles:u.length?u.map(function(e){var n;return{url:e.downloadUrl,mimeType:null!==(n=(0,E.P7)(e.fileName))&&void 0!==n?n:"",name:e.fileName}}):null};break;case"agentPlanEventContents":var d,p,f=r.agentPlanEventContents;if(f.requiresApproval&&n.approvedPlanId===f.planId||f.initialCommitId)return;var h=null===(p=f.Approver)||void 0===p?void 0:p.approver.id;f.requiresApproval||(n.approvedPlanId=f.planId),i={type:"planProposal",description:f.objective.description,step:f.step,approvedByUserId:h,sessionId:e.sessionId,planId:f.planId};break;case"revertEventContents":var m,g=r.revertEventContents.eventIdBeforeRevert;if((null===(m=n.revert)||void 0===m?void 0:m.eventIdBeforeRevert)===g){n.revert.reverterId=e.sender.id,n.revert.commitId=r.revertEventContents.commitId;return}n.revert={eventIdBeforeRevert:g,hiddenEvents:0,status:"inflight",reverterId:e.sender.id};return;case"messageEventContents":if(e.sender.type===a.utd.USER)i={type:"userMessage",userId:Number(e.sender.id),message:r.messageEventContents.content,uploadedFiles:r.messageEventContents.uploadedFiles,attachedUrls:r.messageEventContents.attachedUrls,created:null!==(v=e.created)&&void 0!==v?v:null,acknowledged:n.acknowledged.has(e.id),targetedElement:r.messageEventContents.targetedElement};else{var v,w,y,b=T(r.messageEventContents.agentAction),S=!n.didSeeRenderedEvent&&(P(e)||!!b);i={type:"agentMessage",message:null!==(y=null==r?void 0:null===(w=r.messageEventContents)||void 0===w?void 0:w.content)&&void 0!==y?y:"",requestedSecrets:b,sessionId:e.sessionId,state:e.state,waitingOnUser:S}}break;case"agentAskUserForActionRequest":var Y,A,C,x=(null===(Y=r.agentAskUserForActionRequest.request)||void 0===Y?void 0:Y.$kind)==="nextStepRequest"?null===(C=r.agentAskUserForActionRequest.request)||void 0===C?void 0:null===(A=C.nextStepRequest)||void 0===A?void 0:A.newFeatureRequests:void 0;x&&(x=x.map(function(e){return(0,D._)((0,_._)({},e),{isSelected:n.selectedFeatureIds.has(e.id)})})),i={type:"askUserForAction",message:r.agentAskUserForActionRequest.message,state:e.state,newFeatureRequests:x};break;case"agentAskUserForActionResponse":var k,L=r.agentAskUserForActionResponse.response,U=(null==L?void 0:L.$kind)==="nextStepResponse"&&(null===(k=L.nextStepResponse.response)||void 0===k?void 0:k.$kind)==="newFeatureResponse"?L.nextStepResponse.response.newFeatureResponse:null;if(U)return n.selectedFeatureIds.add(U.selectedFeatureId),{type:"userMessage",userId:Number(e.sender.id),message:U.featureName,uploadedFiles:[],attachedUrls:[],created:e.created,acknowledged:!0};break;case"agentTimelineEventContents":var N=r.agentTimelineEventContents.toolData;switch(null==N?void 0:N.$kind){case"messageData":var O=T(N.messageData.agentAction),M=!n.didSeeRenderedEvent&&(P(e)||!!O);i={type:"agentMessage",message:N.messageData.content,requestedSecrets:O,sessionId:e.sessionId,state:e.state,waitingOnUser:M};break;case"acknowledgeUserMessage":var B=N.acknowledgeUserMessage.eventIds,H=!0,z=!1,W=void 0;try{for(var G,V=B[Symbol.iterator]();!(H=(G=V.next()).done);H=!0){var j=G.value;n.acknowledged.add(j)}}catch(e){z=!0,W=e}finally{try{H||null==V.return||V.return()}finally{if(z)throw W}}break;case"commitData":i={type:"checkpoint",description:N.commitData.description,screenshotUrl:N.commitData.screenshotUrl,commitId:N.commitData.commitId,isPaid:N.commitData.billingRate===a.pSr.NORMAL,created:e.created,sessionId:e.sessionId,eventId:e.id,revert:null!=t?t:void 0};break;case"revertData":n.revert={eventIdBeforeRevert:N.revertData.eventIdBeforeRevert,hiddenEvents:0,revertedAt:e.created,status:"completed"};return;case"deployData":i={type:"suggestDeploy"};break;default:if(!(null==N?void 0:N.$kind)||!F.has(null==N?void 0:N.$kind)||e.state===a.qOk.IN_PROGRESS)break;var Z=(0,R.F)(e);if(!Z||Z.startsWith("Did something"))break;var q=(0,I.b)(e);i={type:"agentToolUse",sessionId:e.sessionId,eventId:e.id,toolDataKind:N.$kind,summary:Z,data:q}}}if(i){if(n.revert){n.revert.hiddenEvents++;return}return n.didSeeRenderedEvent=!0,i}}},U=t(29935),N=t(82643),O=t(34951),M=t(16907),B=t(27906),H=t(40919),z=t(73912),W=t(97715),G=t(35869),V=t(98510),j=t.n(V),Z=(0,o.memo)(function(e){var n=e.openPane,t=e.waitingOnUser,r=e.agentState,s=e.isReadOnly,c=(0,l.Rj)(function(){return null==r?void 0:r.select(function(e){switch(null==e?void 0:e.state){case a.g32.AGENT_STATE_PAUSED:case a.g32.AGENT_STATE_NOT_STARTED:case a.g32.AGENT_STATE_UNKNOWN:return!0;default:return!1}})},[r]),u=(0,o.useCallback)(function(e,t){return n({type:"webview",data:{ports:{path:e,port:t,type:"local"}}})},[n]),d=(0,W.A)({openWebview:u});return(0,i.Y)(G.S,{clsx:j().root,"data-highlight":!s&&t&&c,justify:"space-between",children:(0,i.FD)(G.S,{clsx:j().inner,children:[(0,i.Y)(G.S,{align:"center",justify:"center",clsx:j().highlightBackground,children:(0,i.Y)(G.S,{})}),(0,i.FD)(G.S,{clsx:j().content,gap:8,children:[(0,i.Y)(H.d2,{messageState:e.state,text:e.message,linkComponent:d}),e.requestedSecrets?(0,i.Y)(q,{isLast:e.isLast,sessionId:e.sessionId,requestedSecrets:e.requestedSecrets,secrets:e.secrets}):null]})]})})});function q(e){var n,t=e.isLast,l=e.sessionId,s=e.requestedSecrets,c=e.secrets,u=(0,g.NC)(),d=(0,o.useCallback)((n=(0,U._)(function(e){return(0,N.YH)(this,function(n){switch(n.label){case 0:return[4,u.sessions.get(e.sessionId).once()];case 1:return[2,n.sent().agent.update(e.runState)]}})}),function(e){return n.apply(this,arguments)}),[u]),p=(0,M.A)(),f=(0,r._)((0,z.WM)(p,c.replaceAllExternalSecrets),1)[0],h=(0,o.useCallback)(function(e){return f({variables:{input:{resourceId:p,resourceType:O.U9.Repl,secrets:e}}})},[f,p]),m=(0,r._)((0,z.Nz)(p,c.replaceAllExternalSecrets),1)[0],v=(0,o.useCallback)(function(e){return m({variables:{input:{resourceId:p,resourceType:O.U9.Repl,ids:e}}})},[m,p]);return(0,i.Y)(B.L,{replId:p,keys:s.map(function(e){return e.key}),addEntries:c.addEntries,removeEntries:c.removeEntries,onComplete:function(){return d({sessionId:l,runState:a.g32.AGENT_STATE_RUNNING})},sessionId:l,isLast:t,linkSecrets:h,unlinkSecrets:v})}var K=t(86105),$=t(93682),J=t(6761),Q=t(54572),X=t(25849),ee=t.n(X),en=(0,o.memo)(function(e){var n=e.message,t=e.state,r=e.newFeatureRequests,o=e.selectNewFeatureRequest,a=null==r?void 0:r.find(function(e){return e.isSelected}),l=a&&r?(0,K._)(r.filter(function(e){return e!==a})).concat([a]):null!=r?r:[],s=!!a,c=(0,x.g)({items:l,maxVisibleItems:2,reverse:!0}),u=c.visibleItems,d=c.isExpanded,p=c.hiddenItemsCount,f=c.setIsExpanded,h=c.maxItemsReached;return(0,i.FD)(G.S,{clsx:ee().root,gap:6,children:[(0,i.Y)(H.d2,{text:n,messageState:t}),u.length?(0,i.FD)(G.S,{row:!0,style:{flexWrap:"wrap",gap:8},children:[u.map(function(e){return(0,i.Y)($.$n,{iconLeft:e.isSelected?(0,i.Y)(J.A,{}):void 0,disabled:s,colorway:e.isSelected?"primary":void 0,size:"small",variant:"outlined",onClick:function(){return o(e)},text:e.featureName},e.id)}),h?(0,i.Y)($.$n,{iconLeft:(0,i.Y)(Q.A,{rotate:180*!!d}),size:"small",onClick:function(){return f(!d)},text:d?"Show less":"Show ".concat(p," more")}):null]}):null]})}),et=t(96842),er=t(4325),ei=t(78293),eo=t(84031),ea=(0,o.memo)(function(e){var n=e.checkpoint,t=(0,g.NC)(),r=(0,l.J2)(t.sessions.get(e.sessionId)),o=e.sessionId,a=t.sessions.agent,s=(0,l.Rj)(function(){return a.select(function(e){return(null==e?void 0:e.id)!==o})},[o,a],{default:!1}),c=r?function(){return r.appendEvent({kind:"revert",commitHash:n.commitId,commitMessage:"Reverting to task: '".concat(n.description,"'"),eventIdBeforeRevert:e.eventId})}:null,u=(0,et.F)()?eo.G.Starter:eo.G.Paid,d=e.revert;return(0,i.FD)(i.FK,{children:[(0,i.Y)(er.V,{eventId:e.eventId,description:n.description,commitId:n.commitId,onOpenCommit:e.onOpenCommit,date:n.created,isReverting:(null==d?void 0:d.status)==="inflight",isPaid:n.isPaid,isReadOnly:s,usageIndicatorVariant:u,onRevert:function(){if(s)throw Error("Cannot revert in readonly session");null==c||c(),(0,k.pI)({action:"revert_started",messageText:"Reverting to task: '".concat(n.description,"'"),sessionId:e.sessionId})}}),(null==d?void 0:d.reverterId)&&d.commitId&&d.revertedAt?(0,i.Y)(ei.x,{reverterId:d.reverterId,revertedAt:d.revertedAt,revertedCommitId:d.commitId,revertHiddenCount:d.hiddenEvents,openPane:e.openPane}):null]})}),el=t(43464),es=t(49027),ec=t(2527),eu=t(40043),ed=t(81879),ep=t(27775),ef=t.n(ep),eh=(0,o.memo)(function(e){var n=e.description,t=e.approverId,r=e.sessionId,o=e.approvePlan,a=e.steps;return(0,i.FD)(ec.ui,{elevated:!0,"data-highlight":!t,clsx:ef().root,gap:8,children:[(0,i.FD)(G.S,{row:!0,align:"center",gap:6,children:[(0,i.Y)(ed.A,{}),(0,i.Y)(eu.EY,{children:"App plan"})]}),(0,i.Y)(H.d2,{text:n}),t?(0,i.FD)(i.FK,{children:[(0,i.Y)(el.EE,{planSteps:a}),(0,i.Y)(el.xO,{approverId:t})]}):(0,i.Y)(i.FK,{children:(0,i.Y)(es.P,{appovePlan:o,steps:a,isEditable:!t,sessionId:r})})]})}),em=t(29824),eg=t(25726),ev=(0,o.memo)(function(){var e=(0,em.cF)();return(0,i.Y)(G.S,{style:{margin:"24px 12px"},children:(0,i.Y)(eg.aD,{currentBuild:e,hasDeployment:!!e,paneType:"ghostwriterChat"})})}),ew=t(2960),ey=t(16810),eb=t(19021),eS=t(27208),eY=t(6680),eA=t(61234),eC=t(47258),ex=t(43974),ek=(0,eA.x)({button:[eC.b.nofill,ex.wp.px(4)],summary:[ex.wp.flex.growAndShrink(1)]}),e_=(0,o.memo)(function(e){var n=(0,r._)((0,o.useState)(!1),2),t=n[0],a=n[1],l=(0,ew.A)(e.onClick),s=e.eventId,c=e.sessionId,u=e.toolDataKind,d=(0,o.useCallback)(function(){l.current?l.current({sessionId:c,eventId:s,toolDataKind:u}):a(function(e){return!e})},[l,c,s,u]);return(0,i.FD)(G.S,{gap:6,children:[(0,i.FD)(G.S,{css:ek.button,tag:"button",row:!0,gap:6,align:"center",justify:"space-between",onClick:d,children:[(0,i.FD)(G.S,{row:!0,align:"center",gap:6,style:{flex:"1 1 auto"},children:[(0,i.Y)(ey.u,{color:eY.LU.foregroundDimmer,kind:e.toolDataKind}),(0,i.Y)(G.S,{align:"start",css:ek.summary,children:(0,i.Y)(eS.B,{summary:e.summary,color:"dimmer"})})]}),e.onClick?null:(0,i.Y)(Q.A,{color:eY.LU.foregroundDimmer,rotate:180*!!t})]}),t?(0,i.Y)(eb.r,{data:e.data,openPane:e.openPane,animateCode:!1,minimal:!1}):null]})}),eD=t(89806),eE=t.n(eD),eR=(0,o.memo)(function(e){var n=e.session,t=e.readFile,a=e.openPane,s=e.secrets,c=e.isReadOnly,u=(0,o.useCallback)(function(e){return null==n?void 0:n.appendEvent({kind:"agentPlan",planId:e.planId,objective:{description:e.description},approved:!0,requiresApproval:!1,step:e.step})},[n]),d=(0,g.C9)().agentState,f=(0,o.useCallback)(function(e){return(0,k.pI)({action:"suggested_feature_selected",sessionId:n.id}),n.appendEvent({kind:"agentAskUserForActionResponse",response:{$kind:"nextStepResponse",nextStepResponse:{response:{$kind:"newFeatureResponse",newFeatureResponse:{selectedFeatureId:e.id,featureName:e.featureName}}}}})},[n]),h=(0,w.m5)(),m=(0,y.A)(),v=(0,b.Hw)(),S=(0,o.useMemo)(function(){return h||m?void 0:function(e){(0,k.pI)({action:"event_item_selected",eventId:e.eventId,sessionId:e.sessionId}),(0,p.flushSync)(function(){return a({type:"agentProgress",data:{sessionId:e.sessionId}})});var n,t=null===(n=v(function(e){var n=(0,r._)(e,2);return"agentProgress"===(n[0],n[1]).type}))||void 0===n?void 0:n.bindings;(null==t?void 0:t.type)==="agentProgress"&&t.scrollToEventId(e.eventId)}},[a,h,m,v]),Y=(0,l.Rj)(function(){return null==n?void 0:n.transform(L,1e3).chunked(function(e,n){switch(e.transformed.type){case"agentToolUse":switch(null==n?void 0:n.transformed.type){case"agentMessage":case"agentToolUse":return"continue";default:return"break"}case"agentMessage":if(e.transformed.waitingOnUser)return"isolate";if((null==n?void 0:n.transformed.type)==="agentToolUse")return"continue";return"break";default:return"isolate"}})},[n]);return(0,i.Y)(i.FK,{children:null==Y?void 0:Y.map(function(e,n){return(0,i.Y)(eI,{approvePlan:u,openPane:a,readFile:t,events:e,isLast:n===Y.length-1,secrets:s,selectNewFeatureRequest:f,isReadOnly:c,agentState:d,onToolUseClick:S},e[0][0])})})});function eI(e){var n=e.events,t=e.openPane,o=e.readFile,a=e.isLast,l=e.secrets,s=e.approvePlan,c=e.selectNewFeatureRequest,u=e.isReadOnly,d=e.agentState,p=e.onToolUseClick,f=(0,x.g)({items:n,maxVisibleItems:2}),h=f.isExpanded,m=f.setIsExpanded,g=f.maxItemsReached,v=f.visibleItems,w=f.hiddenItemsCount;return(0,i.FD)(i.FK,{children:[g?(0,i.Y)(G.S,{clsx:eE().expandButton,children:(0,i.Y)(Y.L3,{isExpanded:h,onClick:function(){return m(!h)},hiddenItemsCount:w})}):null,v.map(function(e,n){var f=(0,r._)(e,2),h=f[0],m=f[1];return(0,i.Y)(eF,{isLast:a&&n===v.length-1,openPane:t,readFile:o,data:m,secrets:l,approvePlan:s,selectNewFeatureRequest:c,isReadOnly:u,agentState:d,onToolUseClick:p},h)})]})}var eF=(0,o.memo)(function(e){var n=e.openPane,t=(0,l.Rj)(function(){return e.data.select(function(e){return e},h())},[e.data]),r=(0,o.useCallback)(function(e){return n({type:"git",data:{mode:{type:S.C.COMMIT,hash:e}}})},[n]);if(!t)return(0,i.Y)(G.S,{children:"No data found for event"});switch(t.type){case"planProposal":return(0,i.Y)(eh,{description:t.description,sessionId:t.sessionId,steps:t.step.subSteps,approverId:t.approvedByUserId,approvePlan:function(n){return e.approvePlan({planId:t.planId,description:t.description,step:(0,m.vt)(t.step,function(e){e.subSteps=n})})}});case"startRapidBuild":return(0,i.Y)(G.S,{clsx:eE().startRapidBuild,children:(0,i.Y)(A.D,{mvpObjective:t.mvpObjective,stack:t.stack,followupSteps:t.followupSteps,attachments:t.uploadedFiles})});case"userMessage":return(0,i.Y)(G.S,{clsx:eE().userMessage,children:(0,i.Y)(C.RG,{userId:t.userId,message:t.message,attachments:t.uploadedFiles,attachedUrls:t.attachedUrls,acknowledged:t.acknowledged,created:t.created,readFile:e.readFile,targetedElement:t.targetedElement})});case"agentMessage":return(0,i.Y)(Z,{state:t.state,isLast:e.isLast,message:t.message,requestedSecrets:t.requestedSecrets,waitingOnUser:t.waitingOnUser,agentState:e.agentState,sessionId:t.sessionId,openPane:e.openPane,secrets:e.secrets,isReadOnly:e.isReadOnly});case"agentToolUse":return(0,i.Y)(G.S,{clsx:eE().agentAction,children:(0,i.Y)(e_,{toolDataKind:t.toolDataKind,summary:t.summary,data:t.data,sessionId:t.sessionId,eventId:t.eventId,openPane:e.openPane,onClick:e.onToolUseClick})});case"checkpoint":return(0,i.Y)(ea,{openPane:n,onOpenCommit:r,checkpoint:t,sessionId:t.sessionId,eventId:t.eventId,revert:t.revert});case"suggestDeploy":return(0,i.Y)(ev,{});case"askUserForAction":return(0,i.Y)(en,{newFeatureRequests:t.newFeatureRequests,selectNewFeatureRequest:e.selectNewFeatureRequest,message:t.message,state:t.state});default:(0,v.A)(t)}}),eT=t(85788),eP=t(11438),eL=t(80865),eU=t(71713),eN=t(6659),eO=t(60128),eM=t(961),eB=t(8319),eH=t(80469),ez=t(45325),eW=t(37497),eG=t(4631),eV=t(89358),ej=t(81531),eZ=t(87461),eq=t(99500),eK=t(56679),e$=t(49125),eJ=t(67468),eQ=t.n(eJ);function eX(e){var n,t,s,c,u,p,f,h,m,v,w,y,b=(0,eH.mJ)(),S=b.hasFlagAgentDebugInfoButton,Y=b.hasFlagAgentVisualEditorButton,A=b.hasAgentDeepThinkingFlag,C=(0,ej.o)(),x=(0,eO.z)({type:"agent"}),_=e.sendMessage,D=(0,o.useCallback)(function(e,n,t,r){_({message:e,attachments:n,attachedUrls:t,isDeepThinkingEnabled:r})},[_]),E=(0,d.P)(null!==(y=null===(v=e.session)||void 0===v?void 0:v.id)&&void 0!==y?y:null),R=(0,eB.x)(),I=(0,et.F)(),F=(0,eL._P)({controlName:"flag-freemium-ai-load-shedder"}),T=(0,eW.K)(),P=T.authorizations,L=T.loading,U=(0,eM.i)(),N=U.agentCheckpoints,M=U.loading,B=(0,g.C9)(),H=B.agentState,z=B.updateAgentState,W=(0,l.Rj)(function(){return null==H?void 0:H.map(function(e){return null==e?void 0:e.reason})},[H],{default:null}),V=(h=(f=(0,r._)((0,o.useState)(null),2))[0],m=f[1],(0,g.zv)("received-completed-event",function(e){var n=e.event;switch(n.error.type){case a.fqQ.AI_QUOTA_INSUFFICIENT_BUDGET:case a.fqQ.AI_QUOTA_REQUIRES_PAYMENT_METHOD:case a.fqQ.AI_QUOTA_REQUIRES_ACTIVE_SUBSCRIPTION:m(n.error);break;default:n.error.type===a.fqQ.EVENT_ERROR_TYPE_UNKNOWN&&n.error.message}}),h),j=(n=e.session,t=(0,g.C9)().agentState,c=(s=(0,r._)((0,o.useState)(!1),2))[0],u=s[1],p=(0,l.Rj)(function(){return n&&t?eT.cP.combine(n.reduce(e0,100),t.select(function(e){return(null==e?void 0:e.state)!==a.g32.AGENT_STATE_RUNNING&&(null==e?void 0:e.state)!==a.g32.AGENT_STATE_PAUSING})).map(function(e){return e.every(Boolean)}):null},[n,t],{default:!1}),(0,eP.A)(p,1e3)&&!c?{addDatabase:function(){n&&((0,k.pI)({action:"create_database",sessionId:n.id}),n.appendEvent({kind:"message",message:g.ay,intent:a.qRv.AGENT}),u(!0))},clear:function(){return u(!0)}}:null);if(V)return(0,i.Y)(G.S,{style:{padding:"0 8px"},children:(0,i.Y)(e$.P,{error:V})});var Z=!(null==P?void 0:P.paidAgent.isAuthorized)&&(null==P?void 0:P.paidAgent.code)===O.JB.InsufficientBudget,q=(null==W?void 0:W.$kind)==="authorizationFailed"&&W.code===a.HkE.INSUFFICIENT_BUDGET;if(Z||q)return(0,i.Y)(ez.c,{runAgent:function(){return z(a.g32.AGENT_STATE_RUNNING)}});if(!M&&I&&!(null==N?void 0:N.isUnderQuota))return(0,i.Y)(eZ.k,{openPane:e.openPane});if(I&&F)return(0,i.Y)(eq.n,{aiName:g.g$});if(E)return(0,i.Y)(eU.j,{onNewSession:e.onNewSession});if(R)return(0,i.Y)(eK.c,{aiName:g.g$});var K=!(null==P?void 0:P.paidAgent.isAuthorized)&&!(null==P?void 0:P.freeAgent.isAuthorized),$=null;L||M?$="Loading...":K&&($="You do not have access to this feature");var J=j?(0,i.Y)(eV.o,{onAddDatabase:j.addDatabase,onSuggestionsToggle:j.clear}):null,Q=j?"Or continue working without a database…":void 0;return(0,i.Y)(G.S,{clsx:eQ().root,innerRef:x,children:(0,i.Y)(eG.A,{placeholderText:Q,header:J,inputRef:e.inputRef,sessionId:(null===(w=e.session)||void 0===w?void 0:w.id)||void 0,onSubmit:D,isSubmitDisabled:null!==$,submitDisabledReason:$,debugButton:S&&e.session?(0,i.Y)(eN.A,{sessionId:e.session.id,sessionType:a.dF3.AGENT_SESSION}):null,showVisualSelector:Y,showDeepThinkingControl:A,uploadFiles:C,feedbackButton:e.feedbackButton})})}var e0={direction:"reverse",state:{show:!1,userMessageCount:0},map:function(e){return e.show},reducer:function(e,n){return(0,a.VFn)(e.contents.contents,"agentAskUserForActionRequest")||0===n.userMessageCount&&(0,a.VFn)(e.contents.contents,"agentTimelineEventContents")&&"user_response"===e.contents.contents.agentTimelineEventContents.toolName||(0,a.VFn)(e.contents.contents,"messageEventContents")&&(n.userMessageCount=n.userMessageCount+1,e.contents.contents.messageEventContents.content===g.ay||n.userMessageCount>=3)?(n.show=!1,!1):(0,a.VFn)(e.contents.contents,"databaseNudgeEventContents")?(n.show=!0,!1):void 0}},e1=t(90001),e2=t(82745),e4=t(17008),e5=t(84185),e8=t(32633),e3=t(80555),e6=t.n(e3);function e7(e){var n=e.children;return(0,i.Y)(eu.EY,{multiline:!1,variant:"small",clsx:e6().text,color:"dimmer",children:n})}function e9(e){var n,t,r=e.session,o=e.onHeightChange,s=(0,g.dI)(),c=(0,l.J2)(s.status),u=(0,l.Rj)(function(){return r.reduce(e4.q,100)},[r]),d=(0,l.Rj)(function(){return r.reduce(ne,1)},[r],{default:null}),p=(0,g.C9)(),f=p.agentState,h=p.updateAgentState,m=(0,l.J2)(f),v=null;if("error"===c)t=eY.LU.yellowDimmer,v=(0,i.FD)(i.FK,{children:[(0,i.Y)(e8.A,{size:12}),(0,i.Y)(e7,{children:"".concat((0,g.Nn)({capitalizeFirstChar:!0})," lost connection. Try refreshing the page.")})]});else if(null==m?void 0:null===(n=m.reason)||void 0===n?void 0:n.$kind){var w=m.reason;switch(null==w?void 0:w.$kind){case"stepLimitExceeded":t=eY.LU.yellowDimmer,v=(0,i.FD)(i.FK,{children:[(0,i.Y)(e8.A,{size:12}),(0,i.FD)(e7,{children:["Reached maximum step limit (",w.maxSteps," steps)"]})]});break;case"rateLimited":t=eY.LU.yellowDimmer,v=(0,i.Y)(e2.JH,{timeWhenReset:w.timeWhenReset});break;case"authorizationFailed":t=eY.LU.yellowDimmer,v=w.code===a.HkE.INSUFFICIENT_BUDGET?(0,i.FD)(i.FK,{children:[(0,i.Y)(e8.A,{size:12}),(0,i.Y)(e7,{children:"Budget exceeded"})]}):(0,i.FD)(i.FK,{children:[(0,i.Y)(e8.A,{size:12}),(0,i.Y)(e7,{children:w.message})]});break;case"error":t=eY.LU.yellowDimmer,v=(0,i.FD)(i.FK,{children:[(0,i.Y)(e8.A,{size:12}),(0,i.FD)(e7,{children:[(0,g.Nn)({capitalizeFirstChar:!0})," encountered an error."," "]}),(0,i.Y)($.$n,{text:"Try again",colorway:"yellow",variant:"nofill",size:"small",onClick:function(){h(a.g32.AGENT_STATE_RUNNING),(0,k.pI)({action:"attempted_try_again",sessionId:r.id})}})]})}}else switch(null==m?void 0:m.state){case a.g32.AGENT_STATE_RUNNING:t=eY.LU.blurpleDimmest,v=(0,i.Y)(e2.AN,{onPause:function(){return h(a.g32.AGENT_STATE_PAUSED)},inProgressEventSummary:d});break;case a.g32.AGENT_STATE_PAUSING:v=(0,i.Y)(eu.EY,{clsx:e6().text,variant:"small",color:"dimmest",children:"Agent is pausing…"});break;case a.g32.AGENT_STATE_UNKNOWN:case a.g32.AGENT_STATE_NOT_STARTED:case a.g32.AGENT_STATE_PAUSED:v=u?(0,i.Y)(e7,{children:"Agent is waiting for your response"}):(0,i.FD)(i.FK,{children:[(0,i.Y)(e7,{children:"Agent is paused"}),(0,i.Y)($.$n,{variant:"nofill",iconLeft:(0,i.Y)(e5.A,{}),size:"small",onClick:function(){return h(a.g32.AGENT_STATE_RUNNING)},text:"Resume"})]})}var y=(0,e1.A)(function(e){return o(e.height)});return(0,i.Y)(G.S,{clsx:e6().root,children:(0,i.Y)(G.S,{clsx:e6().inner,innerRef:y,children:null===v?null:(0,i.Y)(ec.ui,{style:{backgroundColor:t},elevated:!0,clsx:e6().surface,row:!0,align:"center",children:v})})})}var ne={direction:"reverse",state:{summary:null},map:function(e){return e.summary},reducer:function(e,n){return n.summary=e.state===a.qOk.IN_PROGRESS?(0,R.F)(e):null,!1}},nn=t(33054),nt=t(65995),nr=t(33472),ni=t.n(nr);function no(e){var n,t,p,f,h,m,v,w,y,b,S=e.session,Y=e.onSessionCreated,A=e.readFile,C=e.openPane,x=e.inputRef,_=e.secrets,D=e.onPromptSuggestionClick,E=e.onNewSession,R=e.showUserFeedbackButton,I=(n=(0,ew.A)(Y),t=(0,g.NC)(),f=(p=(0,nn.Zo)()).toggleVisualEditor,h=p.element,m=(0,l.HJ)(null),v=(0,l.HJ)(!1),{sendMessage:(0,o.useCallback)((w=(0,U._)(function(e){var r,i,o,l;return(0,N.YH)(this,function(s){switch(s.label){case 0:if(v.current)return[2];if(v.set(!0),r=S)return[3,2];return[4,t.sessions.create({sessionType:a.dF3.AGENT_SESSION})];case 1:if(!(i=s.sent()).ok)return m.set(i),v.set(!1),[2];r=i.payload,n.current(r),s.label=2;case 2:return o=e.message,l=e.attachments.map(function(e){return{path:e.path,mimeType:e.file.type}}),r.appendEvent({intent:a.qRv.AGENT,message:o,uploadedFiles:l,attachedUrls:e.attachedUrls,kind:"message",enableDeepThinking:e.isDeepThinkingEnabled,webviewTargetedElement:null!=h?h:void 0}),v.set(!1),(0,k.pI)({action:"user_message_sent",messageText:e.message,sessionId:r.id}),h&&f(),[2]}})}),function(e){return w.apply(this,arguments)}),[S,n,t,f,h,v,m]),error:m,loading:v}),F=I.sendMessage,T=I.error,P=(0,s.A)().showError;(0,l.q3)(T,{next:function(e){e&&P("Something went wrong. Please try again.")}});var L=(0,o.useRef)(!0),O=(0,o.useRef)(new Map),M=(0,r._)((0,o.useState)(0),2),B=M[0],H=M[1],z=(0,d.P)(null!==(y=null==S?void 0:S.id)&&void 0!==y?y:null),W=void 0!==R&&R&&S?(0,i.Y)(c.M,{session:S}):null;return(0,i.FD)(G.S,{clsx:ni().root,children:[S?(0,i.Y)(nt.y,{padding:"8px 8px ".concat(B+32,"px 8px"),scrollCacheKey:null!==(b=S.id)&&void 0!==b?b:"new-session",scrollCache:O.current,shouldAutoScrollRef:L,autoScrollBehavior:"smooth",buttonOffset:B,children:(0,i.Y)(eR,{isReadOnly:z,session:S,readFile:A,openPane:C,secrets:_})}):(0,i.Y)(G.S,{clsx:ni().emptyState,children:(0,i.Y)(u.T,{sessionType:a.dF3.AGENT_SESSION,onPromptSuggestionClick:D})}),S&&!z?(0,i.Y)(e9,{onHeightChange:H,session:S}):null,(0,i.Y)(eX,{onNewSession:E,inputRef:x,session:S,sendMessage:F,openPane:C,feedbackButton:W})]})}},23081:(e,n,t)=>{"use strict";t.d(n,{$:()=>i,L:()=>o});var r=t(63892);function i(){(0,r.u4)(r.AZ.MODAL_VIEWED,{modalName:"projects_help_dialog"})}function o(e){(0,r.u4)(r.AZ.GIT_PROJECT_FEATURE_USED,e)}},23161:(e,n,t)=>{"use strict";t.d(n,{A:()=>s,L:()=>u});var r=t(12694),i=t(21462),o=t(93415),a=t(87882),l=t(2960);function s(){var e=(0,i.useRef)(0),n=(0,r._)((0,i.useState)(!1),2),t=n[0],l=n[1],s=(0,o.m5)(),u=(0,o.m6)(),d=(0,a.b)();return(0,i.useEffect)(function(){var n,t=window.visualViewport;if(t){if(u){l(null!==(n=null==d?void 0:d.isShown)&&void 0!==n&&n);return}if(s){var r=function(){l(c({current:t.height,initial:e.current}))};return e.current=t.height,t.addEventListener("resize",r),function(){t.removeEventListener("resize",r)}}}},[s,u,null==d?void 0:d.isShown]),t}function c(e){return e.current<.8*e.initial}function u(e){var n=(0,l.A)(e),t=(0,i.useRef)(0),r=(0,o.m6)();(0,i.useEffect)(function(){if(!r){var e=window.visualViewport;if(e){var i=function(){n.current(c({current:e.height,initial:t.current}))};return t.current=e.height,e.addEventListener("resize",i),function(){e.removeEventListener("resize",i)}}}},[n,r])}},23423:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(12694),i=t(21462),o=t(67337),a=t(79183),l=t(24373);function s(e){var n=(0,r._)((0,i.useState)(!1),2),t=n[0],s=n[1],c=function(e){var n,t,l,s,c=(0,a.A)(),u=(n=(0,o.A)().container,l=(t=(0,r._)((0,i.useState)("/home/runner"),2))[0],s=t[1],(0,i.useEffect)(function(){n.exec("pwd").then(function(e){var n;e.output&&s((null===(n=e.output)||void 0===n?void 0:n.replace("\n",""))||"")})},[n]),l);if(!c)return"".concat(e,"://vscode-remote/ssh-remote");var d=c.sshUser,p=c.sshHostname,f=c.sshPort,h="".concat(e,"://vscode-remote/ssh-remote+").concat(d,"@").concat(p,":").concat(f).concat(u);try{return window.encodeURI(h)}catch(e){return h}}(e),u=(0,l.A)("ssh","workspace-ssh-connect-to-vscode-config-tour"),d=u.register;return(0,i.useEffect)(function(){d()},[d]),{openEditor:(0,i.useCallback)(function(){if(u.shouldDisplay){s(!0);return}window.location.href=c},[u.shouldDisplay,c]),onConfirmConfig:(0,i.useCallback)(function(){s(!1),u.dismiss(),window.location.href=c},[u,c]),isConfigModalOpen:t,closeConfigModal:(0,i.useCallback)(function(){s(!1)},[])}}},23494:(e,n,t)=>{"use strict";t.d(n,{N:()=>E,g:()=>I});var r=t(83846),i=t(17844),o=t(93629),a=t(17459),l=t(12694),s=t(1889),c=t(21462),u=t(14189),d=t(90001),p=t(93415),f=t(1052),h=t(6680),m=t(61234),g=t(22498),v=t(43974),w=t(14561),y=t(26705),b=t(2527),S=t(40043),Y=t(35869),A=t(65995),C=t(73301),x=(0,g.v)(["borderRadius"]),k=x.cssVars,_=x.styleTokens,D=(0,m.x)({root:[v.wp.border({color:h.LU.outlineDimmest}),v.wp.overflow("hidden"),{borderWidth:"1px",borderRadius:_.borderRadius}],header:[v.wp.py(4),v.wp.px(6),v.wp.rowWithGap(4),v.wp.align.center,v.wp.justify.spaceBetween,{backgroundColor:f.s}],left:[v.wp.mr(4)],middle:[v.wp.flex.growAndShrink(1),v.wp.rowWithGap(4),v.wp.align.center],middleText:[v.wp.width("100%"),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],divider:[{backgroundColor:h.LU.outlineDimmer,height:16,marginLeft:4}]});function E(e){var n=e.icon,t=e.title,i=e.right,o=e.elevated,a=void 0===o||o,h=e.onOpenPane,m=e.openPaneButtonAlt,g=e.children,v=e.renderChildrenOnlyWhenInView,A=void 0!==v&&v,x=e.showOpenPaneButton,_=(0,p.m5)(),E=(0,c.useRef)(null),R=(0,u.W)(E,{amount:0}),I=(0,c.useMemo)(function(){return!A||R},[R,A]),F=(0,l._)((0,c.useState)(0),2),T=F[0],P=F[1],L=(0,d.A)(function(e){A&&(!A||R)&&e.height>T&&P(e.height)},{type:"debounce",wait:500});return(0,s.FD)(Y.S,{css:D.root,style:(0,r._)({},k.borderRadius,_?"8px":"4px"),innerRef:E,children:[(0,s.FD)(Y.S,{css:D.header,style:{backgroundColor:a?f.s:void 0},children:[(0,s.Y)(Y.S,{css:D.left,align:"center",children:(0,c.cloneElement)(n,{size:16})}),(0,s.Y)(Y.S,{css:D.middle,children:(0,s.Y)(S.EY,{css:D.middleText,children:t})}),(0,s.FD)(Y.S,{align:"center",row:!0,gap:2,children:[i,h&&(void 0===x||x)?(0,s.FD)(s.FK,{children:[i?(0,s.Y)(w.a,{css:D.divider}):null,(0,s.Y)(y.K0,{alt:void 0===m?"Open Pane":m,onClick:h,children:(0,s.Y)(C.A,{})})]}):null]})]}),(0,s.Y)(b.ui,{innerRef:L,style:{minHeight:T},elevated:a,children:I?g:null})]})}var R=(0,m.x)({content:[v.wp.p(8),(0,r._)({},v.$_.max("mobileMax"),[v.wp.maxHeight("calc(".concat(A.R.height," - 60px)")),v.wp.overflowY("auto"),{"&::-webkit-scrollbar":{display:"none"}}])],packagesWrapper:[{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:h.LU.space8}],package:[v.wp.borderRadius(4),v.wp.px(8),v.wp.py(4),v.wp.width("calc(50% - ".concat(h.LU.space4,")"))]});function I(e){var n=e.text,t=e.packageList,r=e.getPackageIcon,l=e.children,c=(0,a._)(e,["text","packageList","getPackageIcon","children"]);return(0,s.Y)(E,(0,o._)((0,i._)({renderChildrenOnlyWhenInView:!0},c),{children:(0,s.FD)(Y.S,{css:R.content,gap:16,children:[t.length?(0,s.FD)(Y.S,{gap:8,children:[(0,s.Y)(S.EY,{color:"dimmest",children:n}),(0,s.Y)(Y.S,{css:R.packagesWrapper,children:t.map(function(e,n){return(0,s.Y)(b.ui,{css:R.package,row:!0,gap:8,align:"center",justify:"space-between",elevated:!0,children:(0,s.FD)(Y.S,{row:!0,gap:4,align:"center",children:[r(e),(0,s.Y)(S.EY,{children:e})]})},n)})})]}):null,l]})}))}},24205:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M9.713 4.077a8.25 8.25 0 0 1 10.07 5.173.75.75 0 1 0 1.414-.5A9.75 9.75 0 0 0 5.118 5.1L1.75 8.266V4a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h6a.75.75 0 0 0 0-1.5H2.893l3.26-3.063a8.25 8.25 0 0 1 3.56-2.11ZM23.75 14a.75.75 0 0 0-.75-.75h-6a.75.75 0 0 0 0 1.5h4.107l-3.26 3.063-.018.017a8.25 8.25 0 0 1-13.612-3.08.75.75 0 1 0-1.414.5A9.75 9.75 0 0 0 18.882 18.9l3.368-3.165V20a.75.75 0 0 0 1.5 0v-6Z",clipRule:"evenodd"})}))}},24476:(e,n,t)=>{"use strict";t.d(n,{A:()=>k});var r=t(1889),i=t(45981),o=t.n(i),a=t(4124),l=t(17844),s=t(12584),c=t(41114),u=t(86997);function d(){var e=(0,s._)(["\n  query NotAllowedModal {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,c.J1)(d()),h=t(88184),m=t(16907),g=t(6680),v=t(61234),w=t(43974),y=t(93682),b=t(44885),S=t(40043),Y=t(37407),A=t(35869),C=t(58129),x=(0,v.x)({staffHelpers:[w.wp.border({color:g.LU.accentNegativeDefault,width:1,style:"solid"}),w.wp.overflow("hidden")]});let k=function(e){var n,t,i=e.isOpen,s=(0,a.useRouter)(),c=(n=(0,l._)({},p,{skip:!i}),u.I(f,n)).data,d=(0,m.A)(),g=null==c?void 0:null===(t=c.currentUser)||void 0===t?void 0:t.isStaff;return(0,r.Y)(b.a,{preventClose:!0,isOpen:i,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.FD)(A.S,{gap:32,children:[(0,r.Y)(A.S,{row:!0,gap:16,align:"center",children:(0,r.Y)(S.Y9,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"You can’t run this Repl right now."})}),(0,r.FD)(A.S,{gap:16,children:[(0,r.FD)(S.EY,{children:["It may be temporarily unavailable or it may have violated our"," ",(0,r.Y)(o(),{legacyBehavior:!0,href:h.aC.TERMS_OF_SERVICE,children:"Terms of Service"}),"."]}),(0,r.Y)(S.EY,{children:"If you are the owner of this Repl and believe you should be able to run it, you can try again later or contact support."}),g?(0,r.FD)(A.S,{css:x.staffHelpers,gap:8,children:[(0,r.FD)(A.S,{row:!0,gap:8,children:[(0,r.Y)(Y.m_,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.Y)(C.A,{})}),(0,r.Y)(S.Y9,{level:3,children:"Debug Info"})]}),(0,r.Y)(A.S,{children:(0,r.FD)(S.EY,{children:["Repl ID ",d," is not allowed to run. This is most likely due to a policy takedown."]})}),(0,r.Y)(A.S,{children:(0,r.FD)(S.EY,{multiline:!1,children:[(0,r.Y)(o(),{legacyBehavior:!0,href:"https://us5.datadoghq.com/logs?query=%40replid%3A".concat(d),children:"All datadog logs"})," ","•"," ",(0,r.Y)(o(),{legacyBehavior:!0,href:"https://us5.datadoghq.com/logs?query=%40replid%3A".concat(d,"+taking+down"),children:"Takedown-specific logs"})]})})]}):null]}),(0,r.FD)(A.S,{row:!0,gap:16,justify:"end",children:[(0,r.Y)(y.$n,{text:"Reload",onClick:function(){window.location.reload()}}),(0,r.Y)(y.$n,{text:"Leave",onClick:function(){s.push("/home","~/")}})]})]})})}},24705:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M2.25 8.25h2.325a3.751 3.751 0 0 0 7.35 0h9.825a.75.75 0 0 0 0-1.5h-9.825a3.751 3.751 0 0 0-7.35 0H2.25a.75.75 0 0 0 0 1.5Zm6-3a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM2.25 15.75a.75.75 0 0 0 0 1.5h9.825a3.751 3.751 0 0 0 7.35 0h2.325a.75.75 0 0 0 0-1.5h-2.325a3.751 3.751 0 0 0-7.35 0H2.25Zm11.25.75a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0Z",clipRule:"evenodd"})}))}},24864:(e,n,t)=>{"use strict";t.d(n,{Ef:()=>l,O3:()=>o,eQ:()=>a});var r=t(45771),i=(0,t(22498).v)(["fontSize","menuPaddingTop","borderBottomLeftRadius","borderBottomRightRadius","inputBarPadding","inputBarHeight","containerType","iconSize"]),o=i.cssVars,a=i.styleTokens,l=(0,r.AH)({"&& svg":{minWidth:a.iconSize,minHeight:a.iconSize,width:a.iconSize,height:a.iconSize}})},24895:(e,n,t)=>{"use strict";t.d(n,{A:()=>Y,v:()=>C});var r=t(17844),i=t(93629),o=t(86105),a=t(1889),l=t(45981),s=t.n(l),c=t(2467),u=t(19968),d=t(45771),p=t(6680),f=t(43974),h=t(29253),m=t(2527),g=t(40043),v=t(35869),w=t(4999),y=t(95173),b=v.D.a,S=(0,d.AH)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}});function Y(e){var n=e.post,t=n.repl,o=n.user,l=t.isTemplate?"Template":"Repl";return(0,a.FD)(v.S,{gap:8,children:[(0,a.FD)(v.S,{row:!0,align:"center",justify:"space-between",children:[(0,a.Y)(v.S,{row:!0,align:"center",children:(0,a.FD)(v.S,{row:!0,gap:8,align:"center",children:[(0,a.Y)(h.e,{size:24,username:o.username,src:o.image}),(0,a.FD)(v.S,{row:!0,gap:4,children:[(0,a.Y)(g.EY,{multiline:!1,children:o.username}),(0,a.FD)(g.EY,{color:"dimmest",multiline:!1,children:[" ","published a ",l]})]})]})}),(0,a.Y)(y.A,{size:12})]}),(0,a.FD)(m.ui,{css:[f.wp.borderRadius(8),f.wp.colWithGap(8),f.wp.p(8),f.wp.position.relative,{border:"1px solid "+p.LU.outlineDimmest}],children:[(0,a.Y)(v.S,{gap:16,children:(0,a.Y)(v.S,{row:!0,gap:16,justify:"space-between",children:(0,a.FD)(v.S,{css:[f.wp.flex.growAndShrink(1)],row:!0,gap:8,align:"start",children:[(0,a.Y)(u.Ay,{iconUrl:t.iconUrl,alt:t.title,size:84,css:[f.wp.backgroundColor.backgroundHigher]}),(0,a.FD)(v.S,{css:[f.wp.flex.growAndShrink(1),f.wp.colWithGap(4)],children:[(0,a.FD)(v.S,{row:!0,children:[(0,a.Y)(s(),(0,i._)((0,r._)({legacyBehavior:!0,passHref:!0},(0,w.z9)(t)),{children:(0,a.Y)(b,{css:[{color:"inherit"},S,f.wp.flex.growAndShrink(1),f.wp.minWidth(0)],onClick:function(e){return e.preventDefault()},children:(0,a.Y)(g.EY,{variant:"subheadBig",multiline:!1,children:t.title})})})),t.isTemplate?(0,a.Y)(A,{}):null]}),t.description?(0,a.Y)(g.EY,{color:"dimmer",maxLines:2,multiline:!1,children:t.description}):null]})]})})}),(0,a.Y)(v.S,{css:[f.wp.minHeight(24)],row:!0,gap:8,justify:"space-between",children:(0,a.Y)(c.A,{repl:{id:t.id,publicForkCount:0,likeCount:0}})})]})]})}var A=function(){return(0,a.Y)("span",{css:[f.wp.display.inlineFlex,f.wp.align.center,f.wp.height(24),f.wp.px(8),f.wp.borderRadius(16),f.wp.backgroundColor.yellowDimmest,f.wp.color.yellowStrongest,f.wp.justify.center,f.wp.ml(8),{fontSize:p.LU.fontSizeSmall,lineHeight:p.LU.fontSizeSmall}],children:"Template"})},C=function(){return(0,a.FD)(v.S,{gap:8,css:[{opacity:.5}],children:[(0,a.FD)(v.S,{css:[f.wp.flex.grow(1),f.wp.justify.spaceBetween],row:!0,align:"center",children:[(0,a.FD)(v.S,{row:!0,gap:8,align:"center",children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(24),f.wp.height(24),f.wp.borderRadius(16)]}),(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(126),f.wp.height(12),f.wp.borderRadius(4)]})]}),(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(12),f.wp.height(12),f.wp.borderRadius(8)]})]}),(0,a.FD)(v.S,{css:[f.wp.backgroundColor.backgroundDefault,f.wp.width("100%"),f.wp.height(132),f.wp.borderRadius(8),f.wp.colWithGap(8),f.wp.p(8)],children:[(0,a.FD)(v.S,{row:!0,gap:8,children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.height(84),f.wp.width(84),f.wp.borderRadius(4)]}),(0,a.FD)(v.S,{gap:12,css:[f.wp.pt(4),f.wp.flex.grow(1)],children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(80),f.wp.height(16),f.wp.borderRadius(4)]}),(0,a.FD)(v.S,{gap:8,children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width("100%"),f.wp.height(12),f.wp.borderRadius(4)]}),(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width("80%"),f.wp.height(12),f.wp.borderRadius(4)]})]})]})]}),(0,a.FD)(v.S,{css:[f.wp.flex.grow(1),f.wp.align.center,f.wp.justify.spaceBetween],row:!0,children:[(0,a.Y)(v.S,{row:!0,gap:16,children:(0,o._)([,,,]).map(function(e,n){return(0,a.FD)(v.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(12),f.wp.height(12),f.wp.borderRadius(8)]}),(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(16),f.wp.height(8),f.wp.borderRadius(2)]})]},n)})}),(0,a.Y)(v.S,{row:!0,gap:4,children:(0,o._)([,,]).map(function(e,n){return(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(48),f.wp.height(24),f.wp.borderRadius(16)]},n)})})]})]})]})}},25326:(e,n,t)=>{"use strict";t.d(n,{f:()=>y});var r=t(12694),i=t(1889),o=t(21462),a=t(69338),l=t(44947),s=t(2960),c=t(94965),u=t(74673),d=t(94616),p=t(76828),f=t(14545),h=t(44885),m=t(50192);function g(){var e,n,t=(0,f.rA)(),r=t.activeStep,o=t.goto,a=t.totalSteps,l=t.currentStepIndex,s=t.done;if(null==r)return null;var c=null!==(n=null===(e=r.modalConfig)||void 0===e?void 0:e.width)&&void 0!==n?n:320;return(0,i.Y)(h.a,{preventClose:!0,isOpen:!0,onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,transparent:!0,children:(0,i.Y)(m.p,{title:r.hideTitle?void 0:r.title,"aria-label":r.title,subtitle:r.subtitle,icon:r.icon,content:function(){return(0,i.Y)(i.FK,{children:"function"==typeof r.content?(0,i.Y)(r.content,{}):r.content})},hideCloseButton:r.hideCloseButton,hideNavigation:r.hideNavigation,onDismiss:function(){return s()},currentStepIndex:l,onCurrentStepChange:o,totalSteps:a,cypressCloseData:"tour-tooltip-close-button",compact:!0,colorway:r.colorway,containerStyle:{width:c}})})}var v=t(95570),w=d.O5.Provider;function y(e){var n,t,f=e.children,h=e.tour,m=e.onStep,y=e.onDone,b=e.colorway,S=(0,r._)((0,o.useState)(function(){return(0,d.Ws)({tour:h})}),1)[0],Y=(0,a.md)(d.MN,{store:S}),A=(0,a.md)(d.$h,{store:S});if(-1===A)throw Error("Current tour step is not in tour steps");var C=(0,r._)((0,l.en)({variables:{name:h.id},optimisticResponse:{__typename:"RootMutationType",markTourAsSeen2:{__typename:"TourSeen",id:h.id,seen:!0}}}),1)[0],x=(0,a.Xr)(d._,{store:S}),k=(0,o.useRef)();(0,o.useEffect)(function(){k.current=Y},[Y]);var _=(0,a.Xr)(d.vs,{store:S}),D=(0,a.md)(d.Tf,{store:S}),E=(0,a.md)(d.DA,{store:S}),R=(0,a.Xr)(d.$t,{store:S});window.startTour=function(){v.log("starting tour:",h.id,"from",h.steps[0].id),R()};var I=(0,a.md)(d.Yg,{store:S}),F=(0,a.md)(d.b5,{store:S}),T=(0,s.A)(m),P=(0,s.A)(y);(0,o.useEffect)(function(){return S.sub(d.Nc,function(){var e,n=S.get(d.Nc);n&&(null===(e=T.current)||void 0===e||e.call(T,n))})},[S,T,P]);var L=(0,o.useRef)(!1);(0,o.useEffect)(function(){var e;!L.current&&Y&&Y.id===h.steps[0].id&&(null===(e=T.current)||void 0===e||e.call(T,Y.id),L.current=!0)},[Y,T,h]),(0,o.useEffect)(function(){return S.sub(d._,function(){var e,n=S.get(d._),t=S.get(d.Nc);n&&(t&&(null===(e=P.current)||void 0===e||e.call(P,t)),C())})},[S,C,P]);var U=(0,l.D$)({variables:{tours:h.id},onCompleted:function(e){var n;S.set(d._,!!(null==e?void 0:null===(n=e.currentUser)||void 0===n?void 0:n.toursSeen[0].seen))}}).loading,N=(0,a.Xr)(d.cS,{store:S});(0,o.useEffect)(function(){N(U)},[N,U]);var O=(0,a.md)(d.MN,{store:S}),M=(0,a.Xr)(d.Hl,{store:S}),B=(0,a.md)(d.GM,{store:S}),H=(0,a.Xr)(d.GM,{store:S});if((0,c.CW)({targetElement:D,activeTourStep:O,goToNextStep:M,setTourPausedReason:H}),!E||!Y)return(0,i.Y)(w,{value:S,children:f});if(Y.isModal)return(0,i.FD)(w,{value:S,children:[(0,i.Y)(g,{}),f]});var z=0===A||!!(null===(n=k.current)||void 0===n?void 0:n.isModal)||!!(null===(t=h.options)||void 0===t?void 0:t.disableAnimation);return(0,i.FD)(w,{value:S,children:[D?(0,i.FD)(i.FK,{children:["user"===B?null:(0,i.Y)(u.J,{targetElement:D,transparent:Y.hideOverlay||"async"===B,disableAnimation:z}),!Y.hideTooltip&&(0,i.Y)(p.w,{targetElement:D,activeStep:Y,currentStepIndex:I,done:function(){return x(!0)},goto:function(e){_(e+A-I)},totalSteps:F,disableAnimation:z,colorway:b,doneText:h.doneText})]}):null,f]})}},25726:(e,n,t)=>{"use strict";t.d(n,{K4:()=>X,aD:()=>ee});var r=t(29935),i=t(83846),o=t(12694),a=t(82643),l=t(1889),s=t(21462),c=t(69338),u=t(34951),d=t(77581),p=t(97302),f=t(29824),h=t(59539),m=t(31195),g=t(50010),v=t(97841),w=t(84271),y=t(36662),b=t(18960),S=t(2545),Y=t(80865),A=t(16907),C=t(63892),x=t(75822),k=t(91888),_=t(28456),D=t(6680),E=t(61234),R=t(43974),I=t(93682),F=t(4930),T=t(3910),P=t(2527),L=t(40043),U=t(37407),N=t(35869),O=t(6761),M=t(54572),B=t(54239),H=t(38828),z=t(73790),W=t(76860),G=t(99054),V=t(84296),j=t(56185),Z=t(58127),q=t(73301),K=t(32633),$=t(86635),J=t.n($),Q=(0,E.x)({titleShort:(0,i._)({display:"inline"},R.kL.min(411),{display:"none"}),titleLong:(0,i._)({display:"none"},R.kL.min(411),{display:"inline"})}),X=(0,s.memo)(function(e){var n=e.created,t=e.onConfigure,r=e.paneType,i=(0,f.cF)();return(0,l.Y)(ee,{created:n,onConfigure:t,currentBuild:i,hasDeployment:!!i,paneType:r})});function ee(e){var n,t,i=e.created,S=e.currentBuild,x=e.onConfigure,k=e.hasDeployment,_=e.paneType,D=(0,o._)((0,s.useState)(void 0),2),E=D[0],R=D[1],I=(0,o._)((0,s.useState)(!1),2),F=I[0],T=I[1],P=(0,s.useCallback)(function(e){(0,b.Q)({error:Error(e),context:"SuggestDeployCard",isDeploymentsPane:!1}),T(!0)},[]),L=(0,A.A)(),U=(0,f.ik)(L),N=(0,f.Ol)(),O=(0,f.om)(),M=(0,f.g$)(),B=(0,f.gq)(),H=B&&!B.hasDeploymentRepricing,G=(0,f.kM)({replId:L,onError:P,dotReplitService:N}).recommendedProvider,V=(0,(0,f.mj)().getDeployabilityByProvider)(G).deploy,j=V.isAuthorized,q="Loading"===V.message;(0,s.useEffect)(function(){!q&&(j||R("NOT_AVAILABLE"))},[q,j]);var K=(0,o._)((0,s.useState)(null),2),$=K[0],J=K[1],X=(0,y.wQ)({replId:L,onError:P}).machineConfigurations,ee=(0,v.g)({onError:P}).machineConfigurations,et=(0,o._)((0,c.fp)(g.h0),1)[0],er=(0,c.md)(m.NF),ei=(0,c.md)(m.No);(0,s.useEffect)(function(){if(G)switch(G){case u.Q0.Gce:if(!X)return;var e=(0,y.pR)({machineConfigurations:X,isTeamRepl:U});if(!e){P("An error occurred trying to validate default machine configuration");return}var n=e.id,t=e.slug;J({configurationId:n,configurationLabel:e.label,configurationSlug:t});break;case u.Q0.CloudRun:if(!ee)return;var r=ee.find(function(e){var n=e.vcpu,t=e.memory;return er.toString()===n&&ei.toString()===t});if(!r){P("An error occurred trying to validate selected machine configuration");return}var i=r.id,o=r.slug;J({configurationId:i,configurationLabel:r.label,configurationSlug:o,maxInstances:et})}},[ee,er,ei,U,et,G,X,P]);var eo=(0,o._)((0,s.useState)(u.JX.Server),2),ea=eo[0],el=eo[1],es=(0,o._)((0,s.useState)(null),2),ec=es[0],eu=es[1],ed=(0,o._)((0,s.useState)(null),2),ep=ed[0],ef=ed[1],eh=(0,o._)((0,s.useState)(null!==(t=null==S?void 0:S.envVars.map(function(e){return{name:e.name,value:e.value}}))&&void 0!==t?t:[]),2),em=eh[0],eg=eh[1],ev=(0,o._)((0,s.useState)(!1),2),ew=ev[0],ey=ev[1],eb=(0,o._)((0,s.useState)(null),2),eS=eb[0],eY=eb[1],eA=(0,Y._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:d.co}),eC=(0,w.D)({replId:L,provider:G,fs:O,secrets:M,dotReplit:N,isNewDeployment:!k,onError:P,onOptions:function(e){e.appType&&el(e.appType),e.envVars&&eg(e.envVars),e.ignorePorts&&ey(e.ignorePorts),e.buildCommand&&eu(e.buildCommand),e.runCommand&&ef(e.runCommand),e.publicDir&&eY(e.publicDir)}}).loading,ex=(0,o._)((0,s.useState)(void 0),2),ek=ex[0],e_=ex[1],eD=(0,o._)((0,s.useState)(void 0),2),eE=eD[0],eR=eD[1],eI=(0,o._)((0,s.useState)(void 0),2),eF=eI[0],eT=eI[1],eP=(0,o._)((0,s.useState)(void 0),2),eL=eP[0],eU=eP[1],eN=(0,f.bu)(),eO=(0,f._k)().getRvmDeploymentCostDetailsByConfigurationSlug;(0,s.useEffect)(function(){if(!eC){if(!G){e_(void 0),eR(void 0),eT(void 0),eU(void 0),R(void 0);return}var e,n,t="".concat(eN).concat((null===(n=window)||void 0===n?void 0:null===(e=n.location)||void 0===e?void 0:e.hostname)!=="replit.com"?".staging":"",".").concat(eA);switch(G){case u.Q0.Gce:if(!$)return;var r=eO($.configurationSlug).costPerMonth;e_((0,l.Y)(W.A,{})),eR("Reserved VM Deployment"),eT("$".concat(r,"/month"));var i={};i["Default URL"]=t,ec&&(i["Build Command"]=ec),i["Run Command"]=ep,eU(i);break;case u.Q0.CloudRun:if(!$)return;e_((0,l.Y)(z.A,{})),eR((0,l.FD)(l.FK,{children:[(0,l.Y)("span",{css:Q.titleShort,children:"Autoscale"}),(0,l.Y)("span",{css:Q.titleLong,children:"Autoscale Deployment"})]}));var o={};o["Default URL"]=t,ec&&(o["Build Command"]=ec),o["Run Command"]=ep,eU(o);break;case u.Q0.Static:e_((0,l.Y)(Z.A,{})),eR("Static Deployment"),eT("Free");var a={"Public Directory":eS,"Default URL":t};ec&&(a["Build Command"]=ec),eU(a);break;default:e_(void 0),eR(void 0),eT(void 0),eU(void 0),R(void 0)}}},[ec,er,eN,eA,eC,ei,G,X,ep,et,U,$,eS,eO]);var eM=(0,f.Tp)(),eB=eM.deployBuild,eH=eM.redeployWithNoNewOptions,ez=(n=(0,r._)(function(){var e;return(0,a.YH)(this,function(n){switch(n.label){case 0:if(!j)return[2];if(R("DEPLOYING"),(0,C.u4)(C.AZ.DEPLOY_PROJECT_SELECTED,{source:"one_click_deploy",redeploy:k,has_agent_session:!0}),!k)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,eH({hasAgentSession:!0})];case 2:return n.sent(),[3,4];case 3:return P(n.sent().message),[3,4];case 4:return[2];case 5:if(!(e=(null==eN?void 0:eN.length)?eN:void 0))return[2];n.label=6;case 6:return n.trys.push([6,8,,9]),[4,eB({envVars:em.filter(function(e){return(0,p.zV)(e)}),subdomain:e,machineConfigurationId:(null==$?void 0:$.configurationId)||void 0,maxMachineInstances:(null==$?void 0:$.maxInstances)||void 0,config:{buildCommand:ec,runCommand:ep,appType:ea,ignorePorts:ew,publicDir:eS},isPrivate:!1,hasAgentSession:!0})];case 7:return n.sent(),x&&x(),[3,9];case 8:return P(n.sent().message),[3,9];case 9:return[2]}})}),function(){return n.apply(this,arguments)}),eW=(0,f.uS)();(0,s.useEffect)(function(){if(!F)switch(eW){case h.d.Ready:if("FAILED"===E||"FINISHED"===E)break;R("READY");break;case h.d.Suspended:R("NOT_AVAILABLE");break;case h.d.Preparing:case h.d.Deploying:R("DEPLOYING")}},[F,eW,E]),(0,f.kW)(function(e){if(!F&&"HostingBuildDeployStatusAction"===e.__typename)switch(e.status){case u.nH.Failed:R("FAILED");break;case u.nH.Success:R("FINISHED")}}),(0,s.useEffect)(function(){(0,C.u4)(C.AZ.DEPLOY_PROJECT_SELECTED,{source:"one_click_deploy_shown",has_agent_session:!0})},[]);var eG=q||eC;return(0,l.Y)(en,{created:i,icon:ek,title:eE,cost:eF,properties:eL,status:F?"NOT_AVAILABLE":E,onDeploy:j&&G&&G!==u.Q0.Cron?ez:void 0,onConfigure:x,hasDeployment:k,showDeploymentRepricingStatusBanner:H,loading:eG,paneType:_})}function en(e){var n=e.created,t=e.icon,r=e.title,i=e.cost,a=e.properties,c=e.status,u=void 0===c?"READY":c,d=e.onDeploy,p=e.onConfigure,f=e.hasDeployment,h=e.showDeploymentRepricingStatusBanner,m=e.loading,g=e.paneType,v=(0,o._)((0,s.useState)(!1),2),w=v[0],y=v[1],b=a&&Object.keys(a).length>0,S=(d||p)&&!f&&(!w&&"READY"===u||"DEPLOYING"===u),Y=(0,o._)((0,s.useState)(!1),2),A=Y[0],C=Y[1],D=m?(0,l.Y)(k.G,{}):(0,l.FD)(N.S,{clsx:J().container,gap:8,"data-event-type":"deploy",children:[(0,l.Y)(L.EY,{clsx:J().message,color:"STALE"===u?"dimmer":"default",children:f?"Want users to get these changes? Redeploy this App.":"Ready to share? Deploy this App in ".concat(d?"one click":"a few clicks",".")}),!b||f?null:(0,l.Y)(et,{icon:void 0===t?null:t,title:void 0===r?"Deployment":r,cost:void 0===i?"":i,properties:a,expanded:A,setExpanded:C}),d||p?(0,l.Y)(N.S,{row:!0,gap:8,align:"center",justify:b?"start":"end",children:(0,l.Y)(eo,{status:u,hasDeployment:f,onDeploy:d,onConfigure:p?function(){p(),y(!0)}:void 0,expanded:A,showDeploymentRepricingStatusBanner:h})}):null]});return(0,_.M)()?D:"agentChat"===g?(0,l.Y)(x.e,{timestamp:n,highlighted:S,children:D}):(0,l.Y)(P.ui,{elevated:!0,clsx:J().assistant,children:D})}function et(e){var n,t=e.icon,r=e.title,a=e.cost,c=e.properties,u=e.expanded,d=e.setExpanded,p=(0,s.useId)(),f=(0,s.useId)(),h=(0,_.M)();return(0,l.FD)(N.S,{clsx:J().properties,style:h?{backgroundColor:D.LU.interactiveBackground}:void 0,children:[(0,l.FD)(N.S,{clsx:J().propertiesHeader,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,l.FD)(N.S,{clsx:J().propertiesTitle,row:!0,gap:8,align:"center",children:[(0,l.Y)(V.Z_,{size:20,children:t}),(0,l.Y)(L.EY,{children:r})]}),a?(0,l.Y)(L.EY,{children:a}):null]}),(0,l.Y)("div",{clsx:J().propertyListWrapper,id:f,role:"region","aria-hidden":!u,"aria-labelledby":p,children:u?(0,l.Y)("dl",{clsx:J().propertyList,children:Object.entries(c).map(function(e){var n=(0,o._)(e,2),t=n[0],r=n[1];return(0,l.FD)(s.Fragment,{children:[(0,l.Y)("dt",{clsx:J().propertyTerm,children:t}),(0,l.Y)("dd",{children:r})]},t)})}):null}),(0,l.FD)(N.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,l.Y)(I.$n,{clsx:(n={},(0,i._)(n,J().propertiesButton,!0),(0,i._)(n,J().isExpanded,u),n),id:p,onClick:function(){return d(function(e){return!e})},text:u?"Hide properties":"All properties",iconRight:u?(0,l.Y)(B.A,{}):(0,l.Y)(M.A,{}),variant:"nofill","aria-expanded":u,"aria-controls":f}),(0,l.Y)(F.v,{href:"https://docs.replit.com/category/replit-deployments",target:"_blank",rel:"noopener",text:"Learn more",colorway:"primary",variant:"underlinedOnHover"})]})]})}function er(e){var n,t,r,o,a=e.status,s=e.onDeploy,c=e.onConfigure;if("NOT_AVAILABLE"===a)return(0,l.FD)(N.S,{clsx:J().cannotDeploy,gap:8,children:[(0,l.Y)(T.N,{colorway:"warning",icon:(0,l.Y)(K.A,{}),title:"Deployments not available",text:"There is an issue preventing you from deploying. You may be able to resolve this using the Deployments pane."}),c?(0,l.Y)(I.$n,{onClick:c,iconLeft:(0,l.Y)(q.A,{}),text:"Open Deployments",alignment:"start",colorway:"primary"}):null]});var u=null;switch(a){case"DEPLOYING":u=(0,l.Y)(j.A,{}),n="Deploying",t="primary";break;case"FINISHED":u=(0,l.Y)(O.A,{}),n="Deployed",t="green",r="Click to redeploy";break;case"FAILED":u=(0,l.Y)(K.A,{}),n="Failed",t="red",r="Click to redeploy";break;case"CONFIGURED_MANUALLY":u=(0,l.Y)(H.A,{}),n="Deployment configured manually";break;case"STALE":u=(0,l.Y)(H.A,{}),n="This configuration is for an older version of the app";break;default:return null}var d=(0,l.Y)(I.$n,{onClick:s,text:n,iconLeft:u,colorway:t,loading:"DEPLOYING"===a});return"DEPLOYING"===a||"FINISHED"===a||"FAILED"===a?(0,l.FD)(l.FK,{children:[r?(0,l.Y)(U.m_,{tooltip:r,children:d}):d,c&&"FAILED"===a?(0,l.Y)(I.$n,{onClick:c,iconLeft:(0,l.Y)(q.A,{}),text:"Advanced configuration"}):null]}):(0,l.FD)(N.S,{clsx:(o={},(0,i._)(o,J().status,!0),(0,i._)(o,J().isConfiguredManually,"CONFIGURED_MANUALLY"===a),(0,i._)(o,J().isStale,"STALE"===a),o),row:!0,gap:8,align:"center",children:[u,(0,l.Y)(L.EY,{children:n})]})}var ei=(0,E.x)({group:[R.wp.width("100%"),{"> div":{width:"100%"}}]});function eo(e){var n=e.status,t=void 0===n?"READY":n,r=e.onDeploy,i=e.onConfigure,o=e.hasDeployment,a=e.expanded,s=e.showDeploymentRepricingStatusBanner;if(!r&&!i)return null;if("READY"===t){if(r)return(0,l.FD)(l.FK,{children:[(0,l.FD)(N.S,{css:ei.group,gap:6,justify:"start",align:"start",children:[s?(0,l.Y)(S.u,{}):null,(0,l.Y)(I.$n,{onClick:r,text:o?"Redeploy":"Deploy",iconLeft:(0,l.Y)(G.A,{}),colorway:"primary"})]}),i&&a?(0,l.Y)(I.$n,{onClick:i,iconLeft:(0,l.Y)(q.A,{}),text:"Advanced configuration"}):null]});if(i)return(0,l.Y)(I.$n,{onClick:i,text:"Open Deployments",iconLeft:(0,l.Y)(G.A,{}),colorway:"primary"})}return(0,l.Y)(er,{status:t,onDeploy:r,onConfigure:i})}},25757:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M1 6.359C1 3.399 3.4 1 6.359 1h11.282C20.601 1 23 3.4 23 6.359v11.282C23 20.601 20.6 23 17.641 23H6.359C3.399 23 1 20.6 1 17.641V6.359Zm5.359-3.667A3.667 3.667 0 0 0 2.692 6.36v11.282a3.667 3.667 0 0 0 3.667 3.667h11.282a3.667 3.667 0 0 0 3.667-3.667V6.359a3.667 3.667 0 0 0-3.667-3.667H6.359Z",clipRule:"evenodd"}),(0,o.Y)("path",{d:"M10.65 10.73H6.536V9.708h1.59v-3.96h-.075L6.85 7.32l-.812-.635L7.45 4.825h1.946v4.882h1.252v1.024ZM15.723 10.832c-1.582 0-2.31-1.125-2.31-3.054 0-1.93.728-3.055 2.31-3.055s2.31 1.125 2.31 3.055c0 1.929-.728 3.054-2.31 3.054Zm0-.998c.753 0 1.015-.567 1.015-1.506v-1.1c0-.94-.262-1.506-1.015-1.506-.753 0-1.015.566-1.015 1.506v1.1c0 .939.262 1.506 1.015 1.506Zm0-1.557c-.39 0-.525-.178-.525-.406v-.186c0-.229.136-.407.525-.407.39 0 .525.178.525.407v.186c0 .228-.136.406-.525.406ZM8.28 19.294c-1.582 0-2.31-1.125-2.31-3.055 0-1.929.728-3.054 2.31-3.054 1.583 0 2.31 1.125 2.31 3.054 0 1.93-.727 3.055-2.31 3.055Zm0-.999c.753 0 1.016-.567 1.016-1.506v-1.1c0-.939-.263-1.506-1.016-1.506s-1.015.567-1.015 1.506v1.1c0 .94.262 1.506 1.015 1.506Zm0-1.557c-.389 0-.524-.177-.524-.406v-.186c0-.228.135-.406.524-.406.39 0 .525.178.525.406v.186c0 .229-.136.406-.525.406ZM18.092 19.192H13.98V18.17h1.59v-3.96h-.075l-1.202 1.573-.812-.634 1.413-1.862h1.946v4.883h1.252v1.023Z"})]}))}},25782:(e,n,t)=>{"use strict";t.d(n,{Ov:()=>a,QS:()=>u,Sb:()=>c,ZM:()=>s,pC:()=>d,y$:()=>l});var r=t(17844),i=t(86105),o=t(22531),a="Run App",l=function(e){return e.startsWith("Run ")?e.slice(4):e};function s(e){return e.replace(/\/nix\/store\/[^/]+\/bin\/([^\s]+)/,"$1")}function c(e){return["PARSE_ERROR","NOT_FOUND","READ_FILE"].includes(e)}function u(e){return(void 0===e?"undefined":(0,o._)(e))==="object"&&null!==e&&"code"in e&&"string"==typeof e.code&&c(e.code)&&(void 0===e.message||"string"==typeof e.message)&&(void 0===e.extras||"string"==typeof e.extras)}function d(e,n){for(var t=[],o=0;o<e.length;o++){var a=e[o];if("shell.exec"===a.task){if(n.length){var l=n.shift();l&&t.push((0,r._)({},a,l))}}else t.push(a)}return t.push.apply(t,(0,i._)(n)),t}},25796:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M8.53 5.47a.75.75 0 0 1 0 1.06L3.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06l-6-6a.75.75 0 0 1 0-1.06l6-6a.75.75 0 0 1 1.06 0ZM19.5 9.5a.75.75 0 0 1 1.06 0l1.97 1.97a.75.75 0 0 1 0 1.06l-6 6a.75.75 0 0 1-1.06-1.06L20.94 12l-1.44-1.44a.75.75 0 0 1 0-1.06ZM14.889 3.266c-.13-.355-.648-.355-.778 0l-.893 2.44a.407.407 0 0 1-.264.247l-2.166.663a.396.396 0 0 0 0 .762l2.166.669c.123.038.22.13.264.247l.893 2.44c.13.355.648.355.778 0l.893-2.44a.407.407 0 0 1 .264-.247l2.166-.666a.396.396 0 0 0 0-.762l-2.166-.666a.407.407 0 0 1-.264-.247l-.893-2.44Z",clipRule:"evenodd"})}))}},25849:e=>{e.exports={root:"AskUserForAction_root__Hd1Dd"}},26117:(e,n,t)=>{"use strict";t.d(n,{A:()=>U});var r=t(12694),i=t(1889),o=t(17844),a=t(12584),l=t(41114),s=t(86997),c=t(50175);function u(){var e=(0,a._)(["\n  query MultiplayerInviteUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,a._)(["\n  mutation MultiplayerRefreshInviteUrl($replId: String!) {\n    refreshMultiplayerInviteLink(replId: $replId) {\n      id\n      ... on Repl {\n        id\n        inviteUrl\n      }\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,a._)(["\n  mutation DeleteMultiplayerInviteUrl($replId: String!) {\n    deleteMultiplayerInviteLink(replId: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,l.J1)(u()),m=(0,l.J1)(d()),g=(0,l.J1)(p()),v=t(81239),w=t(2904),y=t(63892),b=t(6680),S=t(61234),Y=t(43974),A=t(36245),C=t(31618),x=t(19706),k=t(2527),_=t(7146),D=t(40043),E=t(35869),R=t(13278),I=t(79571),F=t(56185),T=t(32633),P=(0,S.x)({container:[Y.wp.colWithGap(12),Y.wp.px(12)],header:[Y.wp.flex.row,Y.wp.justify.spaceBetween],globeIconContainer:[Y.wp.width(40),Y.wp.height(40),Y.wp.backgroundColor.accentPrimaryDimmer,Y.wp.borderRadius("full"),Y.wp.align.center,Y.wp.justify.center],title:[Y.wp.fontWeight.medium],inviteUrlContainer:[Y.wp.borderRadius(8),Y.wp.flex.row],input:[Y.wp.borderRadius(8,0,0,8),Y.wp.color.foregroundDimmer],copyToClipboard:[Y.wp.borderRadius(0,8,8,0)]}),L=function(){return(0,i.FD)(E.S,{row:!0,gap:12,children:[(0,i.Y)(E.S,{css:P.globeIconContainer,children:(0,i.Y)(R.A,{color:b.LU.accentPrimaryStrongest,size:20})}),(0,i.FD)(E.S,{children:[(0,i.Y)(D.EY,{css:P.title,id:"link-switch-label",multiline:!1,children:"Private join link"}),(0,i.Y)(D.EY,{variant:"small",color:"dimmest",multiline:!1,children:"Anyone with this link can edit files"})]})]})};function U(e){var n,t,a,l,u,d,p,S,R,U,N,O=e.replId,M=(0,v.A)(),B=M.showConfirm,H=M.showError,z=(n=(0,o._)({},f,{variables:{replId:O}}),s.I(h,n)),W=z.data,G=z.loading,V=z.error,j=z.refetch,Z=(0,r._)((t=(0,o._)({},f,{variables:{replId:O},onError:function(e){return H(e.message)},onCompleted:function(){return B("Join link created")}}),c.n(m,t)),2),q=Z[0],K=Z[1],$=(0,r._)((a=(0,o._)({},f,{variables:{replId:O},onError:function(e){return H(e.message)},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInviteLink.__typename){H(e.deleteMultiplayerInviteLink.message);return}"Repl"===e.deleteMultiplayerInviteLink.__typename&&B("Join link deleted")}}),c.n(g,a)),2),J=$[0],Q=$[1],X=(null==W?void 0:null===(l=W.repl)||void 0===l?void 0:l.__typename)==="Repl"?W.repl:null,ee=K.loading||Q.loading,en=(null==W?void 0:null===(u=W.repl)||void 0===u?void 0:u.__typename)==="Repl"&&(null==X?void 0:null===(d=X.owner)||void 0===d?void 0:d.__typename)==="Team",et=(null==W?void 0:null===(p=W.repl)||void 0===p?void 0:p.__typename)==="Repl"&&(null==X?void 0:null===(S=X.owner)||void 0===S?void 0:S.__typename)==="Team"&&(null==X?void 0:null===(R=X.owner.capabilities)||void 0===R?void 0:R.isBusinessPlan)&&(null==X?void 0:null===(U=X.owner.capabilities)||void 0===U?void 0:U.hasValidSubscription),er=(null==W?void 0:null===(N=W.repl)||void 0===N?void 0:N.__typename)==="Repl"&&(null==X?void 0:X.inviteUrl)?window.location.origin+(null==X?void 0:X.inviteUrl):null;return G||en&&!et?null:V?(0,i.FD)(E.S,{css:P.container,children:[(0,i.FD)(E.S,{css:P.header,children:[(0,i.Y)(L,{}),(0,i.Y)(_.d,{isSelected:!1,isDisabled:!0,"aria-labelledby":"link-switch-label"})]}),(0,i.Y)(x.d,{css:[Y.wp.textAlign.left],iconLeft:(0,i.Y)(T.A,{color:b.LU.accentNegativeStrongest}),colorway:"negative",text:"Error loading join link. Click here to try again, or contact support.",onClick:function(){return j({replId:O})}})]}):(0,i.FD)(E.S,{css:P.container,children:[(0,i.FD)(E.S,{css:P.header,children:[(0,i.Y)(L,{}),G?(0,i.FD)(E.S,{row:!0,gap:4,align:"center",children:[(0,i.Y)(F.A,{color:b.LU.foregroundDimmer}),(0,i.Y)(D.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]}):(0,i.Y)(_.d,{isSelected:!!er,isDisabled:ee,onChange:function(e){!ee&&(e?q():J())},"aria-labelledby":"link-switch-label"})]}),!G&&er?(0,i.FD)(i.FK,{children:[(0,i.FD)(k.ui,{css:P.inviteUrlContainer,children:[(0,i.Y)(C.pd,{type:"url",readOnly:!0,disabled:!0,value:ee?"Loading...":er,css:P.input}),(0,i.Y)(A.i,{textToCopy:er,onClick:function(){er?((0,w.default)(er),(0,y.u4)(y.AZ.JOIN_LINK_COPIED,{replId:null==X?void 0:X.id,isTeamRepl:en,source:"replEnvironment"}),B("Link copied")):H("Could not copy link")},tooltipSuccessText:"Copied to clipboard",text:"Copy join link",iconLeft:(0,i.Y)(I.A,{}),css:P.copyToClipboard,colorway:"primary",disabled:ee})]}),(0,i.Y)(E.S,{children:(0,i.FD)(D.EY,{color:"dimmer",variant:"small",multiline:!1,children:["Want to revoke access to this link?"," ",(0,i.Y)("a",{css:Y.wp.linkStyle,role:"button",tabIndex:0,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),!ee&&q())},onClick:function(e){e.preventDefault(),!ee&&q()},children:"Generate a new link"})]})})]}):null]})}},26969:(e,n,t)=>{"use strict";t.d(n,{g:()=>w,k:()=>v});var r=t(17844),i=t(93629),o=t(17459),a=t(86105),l=t(1889),s=t(6680),c=t(61234),u=t(47258),d=t(43974),p=t(7146),f=t(35869),h=t(84296),m=[d.wp.reset.button,d.wp.p(2),d.wp.height(22),d.wp.rowWithGap(4),d.wp.align.center,u.b.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}],g=(0,c.x)({button:m,disabledButton:(0,a._)(m).concat([{color:s.LU.foregroundDimmest,cursor:"default"}]),text:[{fontSize:s.LU.fontSizeSmall}],switchWrapper:[d.wp.height(22),d.wp.pr(4),u.b.nofill,{opacity:.8,userSelect:"none","& > label":{gap:0,cursor:"pointer"},"& > label > svg":{scale:"0.6"}}]});function v(e){var n=e.altText,t=e.buttonText,a=e.icon,s=(0,o._)(e,["altText","buttonText","icon"]);return(0,l.FD)(f.S,(0,i._)((0,r._)({},s),{alt:n,tag:"button",css:s.disabled?g.disabledButton:g.button,children:[(0,l.Y)(h.Vx.Provider,{value:{size:12},children:a}),(0,l.Y)(f.S,{css:g.text,children:t})]}))}function w(e){var n=e.text,t=e.isSelected,r=e.onChange;return(0,l.Y)(f.S,{css:g.switchWrapper,row:!0,align:"center",children:(0,l.Y)(p.d,{colorway:"primary","aria-label":n,isSelected:t,onChange:r,children:(0,l.Y)(f.S,{css:g.text,children:n})})})}},26984:(e,n,t)=>{"use strict";t.d(n,{g:()=>S,h:()=>w});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(1889),s=t(90629),c=t(82871),u=t(23718),d=t(29992),p=t(78559),f=t(40043),h=t(35869),m=t(79626),g=t(6865),v=t(32633);function w(e){return y.apply(this,arguments)}function y(){return(y=(0,r._)(function(e){var n,t,r,i;return(0,a.YH)(this,function(o){switch(o.label){case 0:if(n=e.searchQuery,t=e.paths,r=e.run,i=e.description,!n)return[2,t.map(function(e){return{data:{type:"action",label:e,icon:(0,l.Y)(p.A,{path:e}),description:i,run:function(){return r(e)}},match:function(){return{score:1,render:(0,d.SS)({path:e,description:i})}}}})];return[4,(0,d.UI)(n,t)];case 1:return[2,o.sent().map(function(e){var n=e.path,t=e.score,o=e.ranges;return{data:{type:"action",label:n,icon:(0,l.Y)(p.A,{path:n}),run:function(){return r(n)}},match:function(){return{score:t,render:(0,d.SS)({path:n,ranges:o,description:i})}}}})]}})})).apply(this,arguments)}function b(){return(0,l.FD)(h.S,{row:!0,gap:8,children:[(0,l.Y)(v.A,{}),(0,l.Y)(f.EY,{color:"dimmest",multiline:!1,children:"Something went wrong searching your App's files. Please try again."})]})}function S(e){var n;return(0,u.gu)({type:"context",label:"Files",description:"Find a file",icon:(0,l.Y)(g.A,{}),keyboardShortcut:e.keyboardShortcut?e.keyboardShortcut:void 0},{match:(0,u.u4)({defaultScore:m.q.findOrCreateFile}),commands:(n=(0,r._)(function(n){var t,u,d,f,h,m,g,y,S,Y,A,C,x,k,_,D,E,R,I,F;return(0,a.YH)(this,function(T){switch(T.label){case 0:return t=e.fs,u=e.shouldHideFile,[4,Promise.resolve(e.getRecentFiles())];case 1:if(d=T.sent(),f=[],!(n.searchQuery||n.active))return[3,3];return[4,t.listFiles()];case 2:if((h=T.sent()).error)return s.Cp(Error("Find or create file returned an error"),{extra:{message:h.error}}),[2,[{data:{type:"error",label:h.error,icon:(0,l.Y)(v.A,{})},match:function(){return{score:1,render:{content:(0,l.Y)(b,{})}}}}]];if(!h.files)throw Error("Expected files");m=!0,g=!1,y=void 0;try{for(S=h.files[Symbol.iterator]();!(m=(Y=S.next()).done);m=!0)A=Y.value,!(u(A)||d.includes(A))&&f.push(A)}catch(e){g=!0,y=e}finally{try{m||null==S.return||S.return()}finally{if(g)throw y}}T.label=3;case 3:return C=[],[4,Promise.all([w({searchQuery:n.searchQuery,paths:d,description:"Recently opened",run:function(n){e.openFile({path:n})}}),w({searchQuery:n.searchQuery,paths:f,run:function(n){e.openFile({path:n})}})])];case 4:if(k=(x=i._.apply(void 0,[T.sent(),2]))[0],_=x[1],!e.getCurrentlyOpenFilePanesCommands)return[3,6];return[4,e.getCurrentlyOpenFilePanesCommands({searchQuery:n.searchQuery})];case 5:E=T.sent(),(D=C).push.apply(D,(0,o._)(E)),T.label=6;case 6:return k.length&&(R=C).push.apply(R,(0,o._)(k)),_.length&&(I=C).push.apply(I,(0,o._)(_)),0===_.length&&0===k.length&&n.active&&(F=n.searchQuery,C.push({data:{label:F,description:"Create a new file",icon:(0,l.Y)(p.A,{path:F}),type:"action",run:(0,r._)(function(){return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,t.writeFile(F,c.A.from(""))];case 1:if(n.sent().error)return[2,{type:"error",message:'Could not create "'+F+'"'}];return e.openFile({path:F}),[2]}})})},match:function(){return{score:1}}})),[2,C]}})}),function(e){return n.apply(this,arguments)})})}},27208:(e,n,t)=>{"use strict";t.d(n,{B:()=>u});var r=t(1889),i=t(21462),o=t(6680),a=t(61234),l=t(43974),s=t(40043),c=(0,a.x)({codeText:[l.wp.font.code]});function u(e){var n=e.summary,t=e.variant,a=e.color,l=e.hover,u=(0,i.useMemo)(function(){return function(e){for(var n,t=/`([^`]+)`/g,r=[],i=0;null!==(n=t.exec(e));)i<n.index&&r.push({text:e.substring(i,n.index),isCode:!1}),r.push({text:n[1],isCode:!0}),i=n.index+n[0].length;return i<e.length&&r.push({text:e.substring(i),isCode:!1}),r}(n)},[n]);return(0,r.Y)(s.EY,{multiline:!1,variant:t,color:a,css:l?{"&:hover":{color:o.LU.foregroundDefault}}:void 0,children:u.map(function(e,n){return e.isCode?(0,r.Y)("span",{css:c.codeText,children:e.text},n):(0,r.Y)(i.Fragment,{children:e.text},n)})})}},27299:(e,n,t)=>{"use strict";t.d(n,{A:()=>e7});var r=t(29935),i=t(82643),o=t(21462),a=t(90629),l=t(37743);function s(e){return JSON.stringify({text:e})+"\n"}var c=function(){function e(){(0,l._)(this,e),this.list=[]}var n=e.prototype;return n.add=function(e,n,t){this.list.push({prefix:e,suggestion:n,tokens:t}),this.list.length>25&&this.list.pop(),this.list.sort(function(e,n){return n.suggestion.length-e.suggestion.length})},n.retrieve=function(e,n){for(var t=0;t<this.list.length;t++){var r=this.list[t],i=r.prefix,o=r.suggestion,a=r.tokens;if(2*a<n)continue;if(e===i)return s(o);if(i.length>e.length||i.length+o.length<=e.length||2*Math.floor((i.length+o.length-e.length)/(o.length/a))<n)continue;var l=o.lastIndexOf("\n");if(-1===l||!(l<=e.length-i.length)){var c=i+o;if(c.startsWith(e)){var u=c.slice(e.length);if(u.trim().length)return s(u)}}}return null},e}(),u=t(4133),d=t(49069),p=t(45773),f=t(32256),h=d.sj.define({combine:function(e){var n;return null!==(n=e.filter(Boolean)[0])&&void 0!==n?n:null}}),m=t(383),g=t(1074),v=t(29734),w=t(58767),y=d.sU.define({create:function(){return null},update:function(e,n){if(n.annotation(w.A)||!n.state.field(g.RJ).stopped)return null;if(!n.docChanged&&!n.selection)return e;var t=n.newDoc,r=n.newSelection.main.head;return n.annotation(d.ZX.remote)?null!==e&&(0,m.Ph)(t,r)&&(0,m.$s)(t,r)?e:null:n.selection&&n.isUserEvent("select")?(0,m.Ph)(t,r)&&(0,m.$s)(t,r)?Date.now():null:n.docChanged&&null!==e?(0,m.Ph)(t,r)&&(0,m.$s)(t,r)?e:null:e}}),b=function(){function e(n){(0,l._)(this,e),this.view=n,this.timeout=null}var n=e.prototype;return n.update=function(e){var n=this,t=e.startState.field(y),r=e.state.field(y);t!==r&&(null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null),null!==r&&(this.timeout=setTimeout(function(){n.timeout=null,n.view.dispatch({effects:[v.hB.of(v.l9.NOW)]})},2500)))},n.destroy=function(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},e}(),S=p.Z9.fromClass(b,{provide:function(){return y}}),Y=t(48122),A=t(17844),C=t(93629),x=t(44725),k=t(23244),_=t(31159),D=function(e){return e[e.HIGH=1]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-1]="LOW",e}({}),E=d.sj.define({combine:function(e){var n=e.filter(Boolean);return function(e){return n.map(function(n){return"function"==typeof n?n(e):n}).filter(Boolean).flat()}}});function R(e,n){switch(e){case"coffeescript":case"dockerfile":case"elixir":case"julia":case"makefile":case"perl":case"python":case"python 3":case"shellscript":case"terraform":case"yaml":return"# ".concat(n);case"sql":case"lua":return"-- ".concat(n);case"html":case"svelte":case"xml":case"xsl":return"\x3c!-- ".concat(n," --\x3e");case"css":return"/* ".concat(n," */");case"tex":case"latex":case"matlab":return"% ".concat(n);case"vb":return"' ".concat(n);case"markdown":return"[]: # ".concat(n);case"handlebars":return"{{!-- ".concat(n," --}}");case"haml":return"-# ".concat(n);case"erb":return"<%# ".concat(n," %>");default:return"// ".concat(n)}}var I=function(){function e(n){if((0,l._)(this,e),this.priority=null!==(t=n.priority)&&void 0!==t?t:D.NORMAL,this.header=n.header,this.segments=n.segments,this.accepted=0,this.curLength=0,this.segments.length){var t,r=this.header?this.header.length+1:0;this.maxLength=r+this.segments.reduce(function(e,n){return e+n.length},0),this.minLength=r+this.segments[this.segments.length-1].length}else this.maxLength=0,this.minLength=0}var n=e.prototype;return n.acceptSegment=function(e){if(this.accepted===this.segments.length)return 0;var n=this.segments[this.index-1],t=0===this.accepted&&this.header?this.header.length+n.length+1:n.length;return t>e?0:(this.accepted++,this.curLength+=t,t)},n.acceptAll=function(){this.accepted=this.segments.length,this.curLength=this.maxLength},n.finalize=function(){return 0===this.accepted?null:(this.header?this.header+"\n":"")+this.segments.slice(this.index).join("").trimEnd()},e.acceptSegments=function(e,n){for(var t=n;n>0;){var r=!1,i=!0,o=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value.acceptSegment(n);c&&(n-=c,r=!0)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}if(!r)break}return t-n},(0,Y._)(e,[{key:"index",get:function(){return this.segments.length-this.accepted}}]),e}(),F=function(){function e(n){(0,l._)(this,e),this.priority=n,this.chunks=[],this.size=0}var n=e.prototype;return n.add=function(e){this.chunks.push(e),this.size+=e.maxLength},n.resize=function(e){if(e<this.accepted)throw Error("Cannot resize below already accepted");this.size=e},n.accept=function(){I.acceptSegments(this.chunks,this.size-this.accepted)},e.fromChunkViews=function(n){var t=[],r=new Map,i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value,u=r.get(c.priority);u||(u=new e(c.priority),t.push(u),r.set(c.priority,u)),u.add(c)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return t},(0,Y._)(e,[{key:"accepted",get:function(){return this.chunks.reduce(function(e,n){return e+n.curLength},0)}},{key:"empty",get:function(){return 0===this.size}}]),e}(),T=function(){function e(n,t){(0,l._)(this,e),this.cooldown=n,this.ignored=t}var n=e.prototype;return n.delay=function(n){return new e(Date.now()+n,this.ignored)},n.ignore=function(n){return this.ignored!==n?new e(this.cooldown,n):this},n.vent=function(){return null!==this.cooldown?new e(null,this.ignored):this},n.clear=function(){return null!==this.cooldown||null!==this.ignored?new e(null,null):this},n.tick=function(){return null!==this.cooldown&&Date.now()>this.cooldown?this.vent():this},n.handle=function(e,n){switch(n.reason){case g.UW.FULLY_TYPED_INTO:case g.UW.ACCEPTED_BY_USER:return this.clear();case g.UW.DISMISSED_BY_USER:return this.delay(5e3).ignore(e.suggestion.content);case g.UW.INCOMPATIBLE_DOCUMENT_CHANGE:case g.UW.INCOMPATIBLE_CURSOR_CHANGE:return e.suggestion.ctx.onEmptyLine?this.delay(5e3):this.delay(1e3)}return this},n.isIgnored=function(e){return null!==this.ignored&&function(e,n){for(var t=Math.max(e.length,n.length),r=0,i=0;i<t;i++)e[i]!==n[i]&&r++;return 1-r/t}(this.ignored,e)>=.8},(0,Y._)(e,[{key:"cooling",get:function(){return null!==this.cooldown&&Date.now()<this.cooldown}},{key:"remaining",get:function(){return null!==this.cooldown?Math.max(0,this.cooldown-Date.now()):0}}]),e}(),P=d.sj.define({combine:function(e){return!e.length||e[0]}}),L=d.sU.define({create:function(){return new T(null,null)},update:function(e,n){if(!n.state.facet(P)||(e=e.tick()).cooling)return e;var t=n.startState.field(g.RJ,!1),r=n.state.field(g.RJ,!1);return t&&r&&t.presented&&r.stopped?e.handle(t,r):e}}),U=t(46434),N=t(35602),O=t.n(N),M=["o17pu","o1gpu","ovgpu","ovgpure","ovgpuref","ovgpurf","ovgpuva","ovgpuvat","o!gpu","pnzfyhg","pnzjuber","puvap","puvax","pbba","pbbaf","phaavr","phag","phagsnpr","phagubyr","phagyvpx","phagyvpx","phagyvpxre","phagyvpxre","phagyvpxvat","phagyvpxvat","phagent","phagf","qnexvr","qngr encr","qngrencr","snt","sntont","sntt","snttvat","snttvg","snttvgg","snttbg","snttf","sntbg","sntbgf","sntf","sntgneq","sngnff","shpxgneq","shpxgneqf","tnat onat","tnatonat","tnatonatrq","tnatonatrq","tnatonatf","tnlgneq","tnljnq","tbngpk","tbngfr","tevatb","ubne","ubner","ubre","ubbxre","wnvy onvg","wnvyonvg","wnc","wvtnobb","wvttnobb","wvttreobb","xhag","y3v+pu","y3vgpu","yrzba cnegl","ybyvgn","a1ttn","a1ttre","anzoyn","arteb","avtt3e","avtt4u","avttn","avttnu","avttnf","avttnm","avttre","avttref","avtyrg","avt abt","dhrreonvg","dhrreubyr","encr","encvat","encvfg","ergneq","ehfxv","furznyr","fubgn","fxnax","fyhg","fyhgont","fyhgf","jrgonpx","juvgr cbjre","juber"],B=M.reduce(function(e,n){return Math.max(e,n.length)},0),H=new RegExp("(?:\\w+[^\\S\\n]*)?\\w*[^]{".concat(B,"}$")),z=null,W=function(){function e(n){var t=this;(0,l._)(this,e),this.config=n,this.finished=!1,this.abortController=new AbortController,this.suggestion="",this.promise=this.start(),this.abortController.signal.addEventListener("abort",function(){if(!t.finished){var e,n;t.finished=!0,null===(e=(n=t.config).onFinished)||void 0===e||e.call(n,null)}})}var n=e.prototype;return n.start=function(){var e=this;return(0,r._)(function(){var n,t,r,o,a,l,s,c,u,d,p,f,h,g,v,w,y,b,S,Y,A,C,x,k,_,D,E,R,I,F,T,P;return(0,i.YH)(this,function(i){switch(i.label){case 0:i.trys.push([0,13,,14]),o="",a=!0,l=!1,s=void 0;try{for(c=e.config.prefix.iter(-1)[Symbol.iterator]();!(a=(u=c.next()).done)&&(p=(d=u.value).trimEnd(),o=(d?d.slice(p.length):"\n")+o,!(p.length>0));a=!0);}catch(e){l=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}f=e.config.prefix.length-o.length,h=o?e.config.prefix.slice(0,f):e.config.prefix,v=e.config.request({prefix:h.toString(),suffix:null===(r=e.config.suffix)||void 0===r?void 0:r.toString(),header:null!==(g=e.config.header)&&void 0!==g?g:void 0,language:e.config.language,maxTokens:e.config.maxTokens,signal:e.abortController.signal}),w=!0,y=!!o,b="",S=!1,Y=!1,i.label=1;case 1:i.trys.push([1,6,7,12]),C=(0,U._)(v),i.label=2;case 2:return[4,C.next()];case 3:if(!(S=!(x=i.sent()).done))return[3,5];if(k=x.value,y){if(b+=k,(0,m.Im)(k))return[3,4];if(y=!1,_=(0,m.BA)(b),D=(0,m.BA)(o),!_.indentation.startsWith(D.indentation)||!!D.newlines!=!!_.newlines)return e.abort(),[3,5];k=_.indentation.slice(D.indentation.length)+_.content}if(function(e,n){if(n){var t,r;"string"!=typeof n&&(n=n.sliceString(Math.max(0,n.length-2*B))),e=(null!==(r=null===(t=n.match(H))||void 0===t?void 0:t[0])&&void 0!==r?r:n)+e}if(null===z){var i=M.map(function(e){return e.replace(/[a-zA-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+("n">e.toLowerCase()?13:-13))})}).map(function(e){return O()(e.toLowerCase().trim())}).sort(function(e,n){return n.length-e.length}).join("|"),o="\\b|\\d|_";z=RegExp("(?:".concat(o,")(?:").concat(i,")(?:").concat(o,")"),"i")}return z.test(e)}(k,w?h:e.suggestion))return e.abort(),null===(E=(R=e.config).onError)||void 0===E||E.call(R,Error("Slur detected in output")),[3,5];if(e.suggestion+=k,e.config.onTextReceived&&!1===e.config.onTextReceived(e.suggestion,w))return e.abort(),[3,5];w=!1,i.label=4;case 4:return S=!1,[3,2];case 5:return[3,12];case 6:return I=i.sent(),Y=!0,A=I,[3,12];case 7:if(i.trys.push([7,,10,11]),!(S&&null!=C.return))return[3,9];return[4,C.return()];case 8:i.sent(),i.label=9;case 9:return[3,11];case 10:if(Y)throw A;return[7];case 11:return[7];case 12:return[3,14];case 13:return F=i.sent(),e.aborted||e.abort(),F instanceof DOMException&&"AbortError"===F.name||null===(T=(P=e.config).onError)||void 0===T||T.call(P,F),[3,14];case 14:if(e.aborted)return[2,null];return e.finished=!0,null===(n=(t=e.config).onFinished)||void 0===n||n.call(t,e.suggestion),[2,e.suggestion]}})})()},n.abort=function(){this.aborted||this.abortController.abort()},n.then=function(e,n){return this.promise.then(e,n)},(0,Y._)(e,[{key:"aborted",get:function(){return this.abortController.signal.aborted}}]),e}(),G=t(7210),V=t(51978),j=t(181),Z=function(){function e(n,t,r,i,o){(0,l._)(this,e),this.text=n,this.pos=t,this.docA=r,this.treeA=i,this.parser=o}var n=e.prototype;return n.hasTree=function(){return null!==this.parser&&null!==this.treeA},n.update=function(n){var t=this,r=new e(n,this.pos,this.docA,this.treeA,this.parser);if(r._line=this._line,r._onEmptyLine=this._onEmptyLine,r._inEmptyBlock=this._inEmptyBlock,r._blockA=this._blockA,this.parser&&this.treeA&&(this.reuseData||this._treeB)){var i=(0,j.s)(this.text,n),o=[];i.iterChanges(function(e,n,r,i,a){o.push({from:t.pos+e,to:t.pos+n,insert:a})});var a=d.VR.of(o,this.docB.length);this.reuseData&&!this._treeB?r.reuseData={diff:this.reuseData.diff.compose(a),docB:this.reuseData.docB,treeB:this.reuseData.treeB}:this._treeB&&(r.reuseData={diff:a,docB:this.docB,treeB:this._treeB})}return r},(0,Y._)(e,[{key:"line",get:function(){return void 0===this._line&&(this._line=this.docA.lineAt(this.pos)),this._line}},{key:"onEmptyLine",get:function(){return void 0===this._onEmptyLine&&(this._onEmptyLine=(0,m.Im)(this.line)),this._onEmptyLine}},{key:"changesAtoB",get:function(){return void 0===this._changesAtoB&&(this._changesAtoB=d.VR.of({from:this.pos,to:this.docA.length,insert:this.text},this.docA.length)),this._changesAtoB}},{key:"docB",get:function(){return void 0===this._docB&&(this._docB=this.reuseData?this.reuseData.diff.apply(this.reuseData.docB):this.changesAtoB.apply(this.docA)),this._docB}},{key:"treeB",get:function(){return void 0===this._treeB&&(this.treeA&&this.parser?this.reuseData?this._treeB=(0,V.B)({parser:this.parser,changes:this.reuseData.diff,text:this.docB,base:this.reuseData.treeB}):this._treeB=(0,V.B)({parser:this.parser,changes:this.changesAtoB,text:this.docB,base:this.treeA}):this._treeB=null),this._treeB}},{key:"inEmptyBlock",get:function(){return void 0===this._inEmptyBlock&&(this._inEmptyBlock=!!this.treeA&&(0,G.G2)(this.docA,this.treeA,this.pos)),this._inEmptyBlock}},{key:"blockA",get:function(){return void 0===this._blockA&&(this._blockA=this.treeA?(0,G.gJ)(this.treeA,this.pos):null),this._blockA}},{key:"blockB",get:function(){return void 0===this._blockB&&(this._blockB=this.treeB?(0,G.gJ)(this.treeB,this.pos):null),this._blockB}}]),e}(),q=t(86105),K=t(18254);function $(e,n,t){var r,i=null!==(r=e.prop(n<0?K.uY.openedBy:K.uY.closedBy))&&void 0!==r?r:null;if(null===i||t&&!i.includes(t.name)){if(!t)return null;i=i?(0,q._)(i).concat([t.name]):[t.name]}return i}function J(e,n,t){var r=$(e.type,n,t);if(null===r)return null;for(var i=e.cursor(),o=0;n<0?i.prevSibling():i.nextSibling();){if(0===o&&i.from!==i.to&&r.includes(i.name))return i.node;if(null!==$(i.type,n)){o++;continue}if(null!==$(i.type,-n)){if(0===o)return null;o--}}return null}function Q(e){return e.split("").reverse().join("")}function X(e){if(!e[0]||1===e.length)return e[0]||"";for(var n=0;e[0][n]&&e.every(function(t){return t[n]===e[0][n]});)n++;return e[0].substring(0,n)}function ee(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e.length<1)return{halt:!1};for(var i=e[e.length-1],o=null!==r?i.split(r):e,a=1;a<=t;a++){var l=!1;if(o.length<a+n)break;for(var s=n;s>0;s--)if(o[o.length-s]!==o[o.length-s-a]){l=!0;break}if(!l)return{halt:!0,truncateLine:e.length-1}}return{halt:!1}}var en=function(e,n){return e.length<n.length},et=function(e,n){var t=""===e?1:parseInt(e,10),r=parseInt(n,10);return!(isNaN(t)||isNaN(r))&&t+1===r};function er(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:en;if(e.length<n)return{halt:!1};var o=e.slice(-1*n),a=X(o),l=Q(X(o.map(Q)));if(a.length<t||l.length<r)return{halt:!1};for(var s=null,c=0;c<n;c++){var u=o[c].substring(a.length),d=u.substring(0,u.length-l.length);if(!(!s||i(s,d)))return{halt:!1};s=d}return{halt:!0,truncateLine:e.length-n}}var ei=[function(e){return function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=1;r<n;r++){var i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return e.length<n||e[e.length-1].trim().length<t?{halt:!1}:e[e.length-1]===e[e.length-n-1]?{halt:!0,truncateLine:e.length-n}:{halt:!1}}(e,r,t);if(i.halt)return i}return{halt:!1}}(e,8,3)},function(e){return er(e,3,6,3,en)},function(e){return er(e,3,6,1,et)},function(e){return ee(e,12,12," ")},function(e){return ee(e,8,16,"")}],eo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ei;return function(n){for(var t=n.split("\n"),r=t.slice(0,-1),i=0;i<e.length;i++){var o=e[i](t);if(o.halt)return{haltAfter:!0,replacementSuggestion:t.slice(0,o.truncateLine).join("\n")};var a=e[i](r);if(a.halt)return{haltAfter:!0,replacementSuggestion:r.slice(0,a.truncateLine).join("\n")}}return{haltAfter:!1}}}(),ea=t(26886),el=/[([{]+(?=\s*$)/,es=/[)\]};]+\s*$/,ec=function(){function e(n,t,r,i,o){(0,l._)(this,e),this.source=n,this.pos=t,this.newlines=r,this.content=i,this.ctx=o,this.empty=(0,m.Im)(i),this.text=this.empty?"":r+i,this.lines=(0,m.uz)(i)}var n=e.prototype;return n.with=function(n){var t=this.source,r=this.content,i=this.newlines;if("source"in n&&void 0!==n.source){t=n.source;var o=(0,m.BA)(t);r=o.indentation+o.content,i=o.newlines}if("text"in n&&void 0!==n.text){var a=(0,m.BA)(n.text);r=a.indentation+a.content,i=a.newlines}"content"in n&&void 0!==n.content&&(r=n.content),"newlines"in n&&void 0!==n.newlines&&(i=n.newlines);var l=this;if(t!==this.source||r!==this.content||i!==this.newlines){var s=this.ctx.update((0,m.Im)(r)?"":i+r);l=new e(t,this.pos,i,r,s)}return!l.empty&&n.process&&(l="boolean"==typeof n.process?l.process():l.process(n.process)),l},n.slice=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t?this.with({text:this.text.slice(e,n)}):this.with({content:this.content.slice(e,n)})},n.splice=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=r?this.text:this.content,o=i.slice(0,e),a=i.slice(e+n);return r?this.with({text:o+t+a}):this.with({content:o+t+a})},n.clip=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=this.segments[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(a.pos>=e)return this.slice(0,a.index+a.offset,!0)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return this},n.stopAtLine=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=n?this.newlines.length:0;if(e<0||e>this.lines.length+t)throw Error("Index out of range: "+e);if(n&&e<t)return this.with({text:this.newlines.slice(0,e)});for(var r=e-t;r<this.lines.length&&(0,m.zb)(this.lines[r]);)r++;var i=this.lines.slice(0,r).join("\n");return this.with({content:i})},n.removeIncompleteLine=function(){if(1===this.lines.length)return this;var e=this.lines[this.lines.length-1];return(0,m.Im)(e)||es.test(e)?this:this.slice(0,this.content.length-e.length)},n.trimEnd=function(){return this.with({content:this.content.trimEnd()})},n.removeNewlinesIfOnEmptyLine=function(){return this.newlines&&this.ctx.onEmptyLine?this.with({newlines:""}):this},n.cutSuggestion=function(){if(this.empty)return this;if((0,m.zb)(this.lines[0])||!this.ctx.hasTree())return this.stopAtLine(1);var e=(0,G.gu)(this.ctx.treeB,this.pos);if(!e.length)return this.stopAtLine(1);var n=this.pos+this.lines[0].length,t=this.ctx.inEmptyBlock?e:e.filter(function(e){return e.from<=n}),r=t.length?t[t.length-1].to-this.pos:null;return(null!==r&&r<0&&(r=null),this.ctx.blockB&&this.ctx.blockB.node.from<this.pos&&(null===r||r>this.ctx.blockB.node.to-this.pos)&&(this.ctx.inEmptyBlock||!this.ctx.blockA||this.ctx.blockA.node.from<this.ctx.blockB.node.from)&&(r=this.ctx.blockB.node.to-this.pos),null===r)?this.ctx.inEmptyBlock?this.ctx.blockA?this.clip(this.ctx.blockA.node.to):this:this.ctx.blockA?this.stopAtLine(1).clip(this.ctx.blockA.node.to):this.stopAtLine(1):this.ctx.blockA&&(this.ctx.inEmptyBlock||!this.ctx.onEmptyLine)?this.slice(0,r,!0).clip(this.ctx.blockA.node.to):this.slice(0,r,!0)},n.filter=function(){var e=eo(this.content).replacementSuggestion;return e?this.with({content:e}):this},n.clearIfContentIsIsolated=function(){if(!this.ctx.onEmptyLine)return this;if(this.newlines)return this.with({content:""});if(1===this.segments.length&&0===this.segments[0].offset)return this;var e=this.segments.find(function(e){return!(0,m.Im)(e.text.slice(e.offset))});return e&&this.ctx.docA.lineAt(e.pos).number!==this.ctx.line.number?this.with({content:""}):this},n.removeDuplicateLastLine=function(){if(!this.newlines&&1===this.lines.length&&!this.ctx.onEmptyLine)return this;var e=this.segments[this.segments.length-1];if(e.offset===e.text.length-1)return this;var n=this.ctx.docA.lineAt(e.pos);if(n.number===this.ctx.docA.lines)return this;var t=e.text.slice(e.offset),r=t.lastIndexOf("\n"),i=-1!==r,o=i?e.index+e.offset+r:e.index+e.offset,a=i?t.slice(r+1):t;return(0,m.Im)(a)?this:(!i&&(0,m.Im)(n)&&(a=n.text+a),a===this.ctx.docA.line(n.number+1).text)?this.slice(0,o,!0):this},n.removeTrailingOpenBrackets=function(){var e=el.exec(this.content);return e?this.splice(e.index,e.length):this},n.process=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.skipComplexProcessing?this.removeIncompleteLine().trimEnd().removeNewlinesIfOnEmptyLine():this.removeIncompleteLine().removeNewlinesIfOnEmptyLine().cutSuggestion().filter().trimEnd().removeDuplicateLastLine().removeTrailingOpenBrackets().trimEnd().clearIfContentIsIsolated()},e.create=function(n,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=(0,m.BA)(n),l=a.indentation+a.content,s=a.newlines,c=new Z((0,m.Im)(l)?"":s+l,t,r,i,o);return new e(n,t,s,l,c)},(0,Y._)(e,[{key:"segments",get:function(){if(void 0===this._segments){if(this.ctx.hasTree()){var e,n=function(e){var n=function(e){var n,t,r,i,o=e.insertion,a=e.pos;if("doc"in e){var l=e.parser;n=e.doc,t=e.tree;var s=d.VR.of({from:a,to:n.length,insert:o},n.length);r=s.apply(n),i=(0,V.B)({parser:l,changes:s,text:r,base:t})}else n=e.docA,t=e.treeA,r=e.docB,i=e.treeB;return{insertion:o,pos:a,docA:n,treeA:t,docB:r,treeB:i}}(e),t=n.insertion,r=n.pos,i=n.docA,o=n.treeA,a=n.docB,l=n.treeB,s=[],c=[],u=l.cursor();do{if(null===$(u.type,-1))continue;var p=u.node,f=J(p,-1);if(f&&f.to<=r){var h=function(e,n){for(var t=n.resolveInner(e.from,1).node;t&&t.from===e.from;){if(t.type===e.type)return t;t=t.parent}return null}(f,o);if(h){s.push({openA:h,closeB:p});var m=J(h,1,p.type);m&&m.from>=r&&c.push(m)}}}while(u.prev()&&u.to>r);if(0===s.length||0===c.length)return null;var g=[],v=!0,w=!1,y=void 0;try{for(var b,S=s[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var Y=b.value,A=Y.openA,C=Y.closeB,x=a.sliceString(C.from,C.to),k=$(A.type,1,C.type);if(null===k)throw Error("Unexpected null matching types");for(var _=0;_<c.length;_++){var D=c[_];if(k.includes(D.name)&&i.sliceString(D.from,D.to)===x){c.splice(0,_+1),g.unshift({closeA:D,closeB:C});break}}}}catch(e){w=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw y}}if(0===g.length)return null;var E=[{text:t,pos:r,index:0,offset:0}],R=0,I=!0,F=!1,T=void 0;try{for(var P,L=g[Symbol.iterator]();!(I=(P=L.next()).done);I=!0){var U=P.value,N=U.closeA,O=U.closeB,M=E.pop();if(!M)throw Error("Unexpected empty split");var B=O.from-r,H=0;if(M.pos<N.from){for(var z=1;function(e,n,t,r){var i=e.sliceString(t,t+1);return i===n.sliceString(r,r+1)&&""===i.trim()}(i,a,N.from-z,O.from-z)&&N.from-z>=M.pos&&O.from-z>=r;)z++;H=z-1}B-=H;var W={text:t.slice(R,B),pos:M.pos,index:M.index,offset:M.offset},G={text:t.slice(B),pos:N.to,index:B,offset:N.to-N.from+H};R=B,E.push(W,G)}}catch(e){F=!0,T=e}finally{try{I||null==L.return||L.return()}finally{if(F)throw T}}return""===E[E.length-1].text&&E.pop(),E}({insertion:this.text,pos:this.pos,docA:this.ctx.docA,treeA:this.ctx.treeA,docB:this.ctx.docB,treeB:this.ctx.treeB});n&&(this._segments=n)}null!==(e=this._segments)&&void 0!==e||(this._segments=[{text:this.text,index:0,pos:this.pos,offset:0}])}return this._segments}},{key:"insertions",get:function(){if(void 0===this._insertions){var e=new d.vB,n=!0,t=!1,r=void 0;try{for(var i,o=this.segments[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=d.EY.of((0,m.uz)(a.text)),s=new ea.kp(l,a.offset);e.add(a.pos,a.pos,s)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}this._insertions=e.finish()}return this._insertions}}]),e}(),eu=t(75156),ed=function(){function e(n){(0,l._)(this,e),this.view=n,this.destroyed=!1,this.stream=null,this.debounceTimeout=null,this.queued=!1,this.lastPrefixLength=0}var n=e.prototype;return n.dispatchSuggestion=function(e){this.view.dispatch({effects:g.xq.of(e)})},n.dismiss=function(e){this.queued=!1,null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.stream||this.stream.finished||this.stream.aborted||this.stream.abort(),this.destroyed||this.suggestion.stopped||this.dispatchSuggestion(this.suggestion.dismiss(e)),this.listeners.onDismiss(this.view)},n.requestSuggestion=function(e){var n,t,r=this;if(null!==this.config&&null!==this.fileTypeConfig){if(null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.config.debounceAlways&&!this.regulator.cooling&&e===v.l9.NOW){this.requestSuggestionImmediately();return}var i=this.view.state.selection.main.head,o=this.view.state.wordAt(i),a=o&&o.from!==i?null!==(t=this.config.debounceTimeInsideWord)&&void 0!==t?t:0:null!==(n=this.config.debounceTimeOutsideWord)&&void 0!==n?n:0;this.regulator.cooling&&(a=Math.max(a,this.regulator.remaining)),0===a?this.requestSuggestionImmediately():this.debounceTimeout=setTimeout(function(){r.debounceTimeout=null,r.requestSuggestionImmediately()},a)}},n.requestSuggestionImmediately=function(){var e,n,t,r,i=this;if(this.dismiss(),!this.suggestion.stopped)throw Error("dismiss should have stopped the suggestion");if(null!==this.config&&null!==this.fileTypeConfig&&!this.destroyed&&this.view.hasFocus&&(0,m.Ph)(this.view.state.doc,this.view.state.selection.main.head)){var o=this.config,l=this.view.state,s=l.selection.main.head,c=l.doc,d=(0,x.mv)(l),p=null!==(n=null===(e=l.facet(x.BH))||void 0===e?void 0:e.parser)&&void 0!==n?n:null,f=this.fileTypeConfig,h={skipComplexProcessing:null!==(t=f.skipComplexProcessing)&&void 0!==t&&t},w=l.facet(E),y=function(e){var n=e.doc,t=e.pos,r=e.path,i=e.language,o=e.infill,a=e.context,l=e.limit,s=void 0===l?u.HB:l,c=e.reserved,d=void 0===c?u.CB:c,p=["Language: ".concat(i),"Path: ".concat(r)].map(function(e){return R(i,e)}).join("\n")+"\n";if(p.length>s)throw Error("Cannot fit required header parts in prompt");if(null==a?void 0:a.length){var f=function(e,n){if((n-=2*e.length)<=0)return null;var t=e.map(function(e){return new I(e)}).filter(function(e){return e.maxLength>0&&e.minLength<=n}).sort(function(e,n){return e.priority===n.priority?e.minLength-n.minLength:n.priority-e.priority});if(!t.length)return null;var r=F.fromChunkViews(t),i=r.reduce(function(e,n){return e+n.size},0);if(i>n){var o=!0,a=!1,l=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;u.size>n&&(i-=u.size-n,u.resize(n))}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}for(;i>n;){var d=1,p=!0,f=!1,h=void 0;try{for(var m,g=r[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=m.value;if(!v.empty){var w=Math.max(0,v.size-d);i-=v.size-w,v.resize(w),d++}}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}}var y=!0,b=!1,S=void 0;try{for(var Y,A=r[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0){var C=Y.value;C.empty||C.accept()}}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}var x=r.reduce(function(e,n){return e+n.accepted},0);x<n&&I.acceptSegments(t,n-x)}else t.forEach(function(e){return e.acceptAll()});return t.map(function(e){return e.finalize()}).filter(Boolean).reverse().join("\n\n")||null}(a,Math.max(d-p.length-2,s-t-p.length-2));f&&(p=f+"\n\n"+p)}var h=function(e,n,t){for(var r=e.slice(0,n);r.length>t;)r=r.lines>1?r.slice(r.line(1).to+1):r.slice(r.length-t);return r}(n,t,s-p.length),m=o?function(e,n){var t=e.slice(n);if(1===t.lines)return t;var r=0,i=null,o=!0,a=!1,l=void 0;try{for(var s,c=t.iterLines()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;if(r++,""!==u&&u.trimStart()===u){i=t.line(r);break}}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return i?t.slice(0,i.to):t}(n,t):null;if(p.length+h.length>s)throw Error("Prompt is over the maximum length");return{prefix:h,suffix:m,header:p}}({doc:c,pos:s,path:f.path,language:f.id,infill:null!==(r=this.config.infill)&&void 0!==r&&r,context:w(this.view)}),b=y.prefix,S=y.suffix,Y=y.header,A=(0,G.G2)(c,d,s)?u.nm.EMPTY_BLOCK:u.nm.DEFAULT;this.lastPrefixLength=b.length,o.backendOnly||this.dispatchSuggestion(this.suggestion.start()),this.stream=new W({request:o.request,language:f.id,maxTokens:A,prefix:b,suffix:S,header:Y,onTextReceived:function(e,n){if(n&&i.listeners.onRequestFirstEmit(i.view),o.backendOnly){i.listeners.onRequestIgnoredBackendOnly(i.view);return}if(i.suggestion.stopped||!n&&i.suggestion.slotted)return!1;var t=i.suggestion.slotted?i.suggestion.upgrade(ec.create(e,s,c,d,p).process(h)):i.suggestion.with({source:e,process:h});if(t.stopped||t.suggestion.empty)return!1;i.dispatchSuggestion(t)},onFinished:function(e){var n=i.queued;if(i.queued=!1,!o.backendOnly){if(e&&i.suggestion.active){var t=i.suggestion.suggestion.source!==e?i.suggestion.with({source:e,process:h}):i.suggestion;if(!t.stopped&&!t.suggestion.empty&&!i.regulator.isIgnored(t.suggestion.content)){i.dispatchSuggestion(t.presented?t:t.present()),i.listeners.onRequestCompletelyPresented(i.view);return}}i.dismiss(g.UW.INCOMPATIBLE_SUGGESTION),n&&i.requestSuggestion(v.l9.ENQUEUE),""===e&&i.listeners.onRequestEndedWithNoSuggestion(i.view)}},onError:function(e){a.v4(function(n){n.setExtra("prefix",b.toString()),n.setExtra("suffix",null==S?void 0:S.toString()),n.setExtra("header",Y),n.setExtra("maxTokens",A),n.setExtra("filePath",f.path),n.setExtra("language",f.id),n.setExtra("selection-head",s),n.setExtra("previous-character",c.sliceString(s-1,s)),n.setTag("ghostwriter",!0),a.Cp(e)})}})}},n.postUpdate=function(e){var n=e.startState.field(g.RJ,!1),t=e.state.field(g.RJ,!1);n&&t&&n.presented&&t.stopped&&t.reason===g.UW.FULLY_TYPED_INTO&&this.listeners.onSuggestionAccepted(this.view,n),(0,k.$H)(e,h,eu.Md,eu.O7)&&this.dismiss(),(0,k.$H)(e,g.RJ)&&this.suggestion.stopped&&this.streaming&&this.dismiss();var r=(0,v.SQ)(e.transactions);switch(r){case v.l9.STOP:this.active&&this.dismiss();break;case v.l9.ENQUEUE:case v.l9.NOW:this.active?this.queued=!0:this.requestSuggestion(r)}},n.destroy=function(){this.destroyed=!0,this.dismiss()},(0,Y._)(e,[{key:"config",get:function(){return this.view.state.facet(h)}},{key:"listeners",get:function(){return this.view.state.facet(_.q)}},{key:"suggestion",get:function(){return this.view.state.field(g.RJ)}},{key:"regulator",get:function(){return this.view.state.field(L)}},{key:"fileTypeConfig",get:function(){var e,n=this.view.state.facet(eu.Md),t=this.view.state.facet(eu.O7),r=null==t?void 0:null===(e=t.getFeature("ai"))||void 0===e?void 0:e.complete;return n&&t&&(null==r?void 0:r.enabled)?(0,C._)((0,A._)({},r),{id:t.id,path:n}):null}},{key:"streaming",get:function(){return null!==this.debounceTimeout||null!==this.stream&&!this.stream.finished}},{key:"active",get:function(){return this.streaming||!this.suggestion.stopped}}]),e}(),ep=p.Z9.fromClass(ed,{provide:function(e){return p.Lz.updateListener.of(function(n){var t;null===(t=n.view.plugin(e))||void 0===t||t.postUpdate(n)})}}),ef=function(){function e(n){(0,l._)(this,e),this.view=n,this.gesture=null,this.touchstart=this.touchstart.bind(this),this.touchmove=this.touchmove.bind(this),this.touchend=this.touchend.bind(this),this.touchcancel=this.touchcancel.bind(this),n.dom.addEventListener("touchstart",this.touchstart)}var n=e.prototype;return n.shouldAllowSwiping=function(){if(!this.view.hasFocus)return!1;var e=this.view.state.selection.main.head,n=this.view.viewport;if(n.from>e||n.to<e)return!1;var t=this.view.state.field(g.RJ,!1);return!!(null==t?void 0:t.presented)},n.stop=function(){this.gesture&&(this.gesture=null,document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel))},n.touchFor=function(e){if(!this.gesture)return null;var n=!0,t=!1,r=void 0;try{for(var i,o=e.changedTouches[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(a.identifier===this.gesture.id)return a}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null},n.touchstart=function(e){if(this.gesture&&!this.gesture.time)return this.stop();if(!this.gesture&&this.shouldAllowSwiping()&&1===e.changedTouches.length){var n=e.changedTouches[0];this.gesture={id:n.identifier,start:{x:n.clientX,y:n.clientY},end:{x:n.clientX,y:n.clientY},time:null},document.addEventListener("touchmove",this.touchmove,{passive:!1}),document.addEventListener("touchend",this.touchend,{passive:!1}),document.addEventListener("touchcancel",this.touchcancel)}},n.touchmove=function(e){var n=this.touchFor(e);if(this.gesture&&n){if(this.gesture.end.x=n.clientX,this.gesture.end.y=n.clientY,this.gesture.time&&Date.now()-this.gesture.time>500)return this.stop();var t=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);if(t>20)return this.stop();if(r>10){if(this.gesture.start.x>this.gesture.end.x)return this.stop();this.gesture.time||(this.gesture.time=Date.now()),e.preventDefault()}}},n.touchend=function(e){var n=this.touchFor(e);if(this.gesture&&n){this.gesture.end.x=n.clientX,this.gesture.end.y=n.clientY;var t=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);t<=20&&r>75&&this.gesture.start.x<this.gesture.end.x&&(!this.gesture.time||Date.now()-this.gesture.time<500)&&((0,f.R)(this.view),e.preventDefault()),this.stop()}},n.touchcancel=function(e){this.touchFor(e)&&this.stop()},n.update=function(){this.gesture&&!this.shouldAllowSwiping()&&this.stop()},n.destroy=function(){this.view.dom.removeEventListener("touchstart",this.touchstart),document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel)},e}(),eh=p.Z9.fromClass(ef),em=t(95758),eg=d.sj.define({combine:function(e){var n;return null!==(n=e.filter(Boolean)[0])&&void 0!==n?n:null},enables:function(e){return[h.compute([e],function(n){return n.facet(e)}),g.RJ,v.Lf,ep,eh,S,L,d.Nb.high(p.w4.compute([e],function(n){var t=n.facet(e),r=[];return(null==t?void 0:t.keyAcceptSuggestion)&&r.push({key:(0,em.bK)(t.keyAcceptSuggestion),run:f.R}),(null==t?void 0:t.keyDismissSuggestion)&&r.push({key:(0,em.bK)(t.keyDismissSuggestion),run:f.b}),r}))]}}),ev=t(56902),ew=t(91873),ey=[];function eb(e){if(!(e.length>800)){var n=ey.indexOf(e);-1!==n&&ey.splice(n,1),ey.unshift(e),ey.length>10&&ey.pop()}}var eS=!1;function eY(e,n){var t=(0,ew.i)(n.state),r=t.text,i=t.linewise;if(r&&r.trim()){if(i){var o=r.split(n.state.lineBreak).filter(function(e){return e.trim()}),a=!0,l=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;eb(d)}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}}else eb(r)}}var eA=[p.Z9.define(function(){return function(){if(!eS){eS=!0;var e=function(e){var n,t=null===(n=document.getSelection())||void 0===n?void 0:n.toString();t&&t.trim()&&Promise.resolve().then(function(){e.defaultPrevented||eb(t)})};document.addEventListener("copy",e),document.addEventListener("cut",e)}}(),{}}),d.Nb.highest(p.Lz.domEventObservers({copy:function(e,n){return eY(e,n)},cut:function(e,n){return eY(e,n)}})),E.of(function(e){if(!ey.length)return null;var n=e.state.facet(eu.O7);if(!n)return null;var t=function(e){return R(n.id,e)},r=(0,ev._)(ey),i=r[0],o=r.slice(1),a=[];if(i&&i.trim()){var l=t("Consider the current clipboard:"),s=i.trimEnd().split("\n").map(function(e){return t(e)}).join("\n");a.push({header:l,segments:[s],priority:D.HIGH})}var c=o.filter(function(e){return e&&e.trim()});if(c.length){var u=t("Consider the clipboard history:"),d=c.map(function(e){return e.trimEnd().split("\n").map(function(e,n){return 0===n?t("- ".concat(e)):t("  ".concat(e))}).join("\n")}).reverse();a.push({header:u,segments:d})}return a.length?a:null})],eC=t(12694),ex=t(22531),ek=t(83472),e_=t(99672),eD=t(50522),eE=t(67668),eR=/\n\n(?![^\S\n])/g,eI=new(function(){function e(){(0,l._)(this,e),this.map=new Map}var n=e.prototype;return n.removeExpired=function(){if(this.map.size){var e=Date.now(),n=!0,t=!1,r=void 0;try{for(var i,o=this.map.entries()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,eC._)(i.value,2),l=a[0],s=a[1];e-s.timestamp>6e4&&this.map.delete(l)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}},n.get=function(e){return this.removeExpired(),this.map.get(e)},n.add=function(e,n,t){if(this.removeExpired(),!this.map.has(e)&&10===this.map.size){var r=null,i=!0,o=!1,a=void 0;try{for(var l,s=this.map.values()[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;(!r||c.timestamp<r.timestamp)&&(r=c)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}if(!r)throw Error("Expected to find entry to remove from file cache");this.map.delete(r.path)}this.map.set(e,{path:e,type:n,content:t,timestamp:Date.now()})},n.clear=function(){this.map.clear()},e}()),eF=function(){function e(n,t,r){var i=this;(0,l._)(this,e),this.view=n,this.readFile=t,this.recentFiles=r,this.destroyed=!1,this.chunks=[],this.dispose=r.subscribe(function(){return i.updateChunks()}),r.current.length&&this.updateChunks()}var n=e.prototype;return n.updateChunks=function(){var e=this;return(0,r._)(function(){var n,t,r,o,a,l,s,c,u,d,p,f,h,g,v,w;return(0,i.YH)(this,function(y){switch(y.label){case 0:if(e.chunks=r=[],o=e.view.state.facet(eu.Md),a=e.view.state.facet(eu.O7),!o||!a)return[2];"all"===(s=null!==(l=null===(t=a.features.ai)||void 0===t?void 0:null===(n=t.complete)||void 0===n?void 0:n.groups)&&void 0!==l?l:[])&&(s=[]),c=e.recentFiles.current.filter(function(e){return e!==o&&(0,eE.m6)(e)}),u=!0,d=!1,p=void 0,y.label=1;case 1:y.trys.push([1,6,7,8]),f=function(){var n,t,l,c,u,d,p,f,h,v,w,y,b,S,Y;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(n=g.value,p=null==(d=null!==(u=null==(c=eI.get(n))?void 0:c.type)&&void 0!==u?u:eD.Jh.from(n))?void 0:null===(t=d.features.ai)||void 0===t?void 0:t.complete,!d||!(null==p?void 0:p.enabled))return[2,"continue"];if(!(d.id===a.id||"all"===p.groups||(null===(l=p.groups)||void 0===l?void 0:l.some(function(e){return s.includes(e)}))))return[3,3];if(void 0!==(f=null==c?void 0:c.content))return[3,2];return[4,e.readFile(n)];case 1:if(h=i.sent(),e.destroyed||e.chunks!==r)return[2,{v:void 0}];if(null===h)return[2,"continue"];f=h,eI.add(n,d,f),i.label=2;case 2:var A;if(!(v=(A=(A=f).trim())?A.split(eR).map(function(e){return e.trim()}).filter(Boolean):[]).length)return[2,"continue"];if(w=R(a.id,"Consider this snippet from ".concat((0,ek.Aj)(n,o))),y=R(a.id,""),b=v.map(function(e){return(0,m.uz)(e).map(function(e){return R(a.id,e)}).join("\n")+"\n".concat(y,"\n")}),S=r.length,Y=D.NORMAL,S<2?Y=D.HIGH:S>=5&&(Y=D.LOW),r.push({header:w,segments:b,priority:Y}),r.length>=10)return[2,"break"];i.label=3;case 3:return[2]}})},h=c[Symbol.iterator](),y.label=2;case 2:if(u=(g=h.next()).done)return[3,5];return[5,(0,i.Ju)(f())];case 3:if(v=y.sent(),"object"===(0,ex._)(v))return[2,v.v];if("break"===v)return[3,5];y.label=4;case 4:return u=!0,[3,2];case 5:return[3,8];case 6:return w=y.sent(),d=!0,p=w,[3,8];case 7:try{u||null==h.return||h.return()}finally{if(d)throw p}return[7];case 8:return[2]}})})()},n.update=function(e){(0,k.$H)(e,eu.Md,eu.O7)&&this.updateChunks()},n.destroy=function(){this.destroyed=!0,this.dispose()},e}(),eT=new e_.k(function(e,n){return e&&n?p.Z9.define(function(t){return new eF(t,e,n)},{provide:function(e){return E.of(function(n){var t,r;return null!==(r=null===(t=n.plugin(e))||void 0===t?void 0:t.chunks)&&void 0!==r?r:null})}}):null}),eP=t(31255),eL=t(26608),eU=t(41989),eN=t(26496),eO={production:"https://production-ai-modelservice.replit.com",staging:"https://staging-ai-modelservice.replit.com"};function eM(){return(eM=(0,eU._)(function(e){var n,t,r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:n=e.getReader(),i.label=1;case 1:return[4,(0,eL._)(n.read())];case 2:if(r=(t=i.sent()).done,o=t.value,r)return[3,4];return[4,o];case 3:return i.sent(),[3,1];case 4:return n.releaseLock(),[2]}})})).apply(this,arguments)}function eB(){return(eB=(0,eU._)(function(e){var n,t,r,o,a,l,s,c,u,d,p,f,h,m;return(0,i.YH)(this,function(i){switch(i.label){case 0:n=new TextDecoder("utf-8"),t="",r=!1,o=!1,i.label=1;case 1:i.trys.push([1,11,12,17]),l=(0,U._)(function(e){return eM.apply(this,arguments)}(e)),i.label=2;case 2:return[4,(0,eL._)(l.next())];case 3:if(!(r=!(s=i.sent()).done))return[3,10];c=s.value,u=n.decode(c,{stream:!0}),t+=u,d=void 0,i.label=4;case 4:if(-1===(d=t.indexOf("\n\n")))return[3,9];if(!t.startsWith("data: ")||!("text"in(p=JSON.parse(t.slice(6,d)))))return[3,8];f=p.text.split("\n"),h=0,i.label=5;case 5:if(!(h<f.length))return[3,8];return[4,JSON.stringify({text:f[h]+"\n"})+"\n"];case 6:i.sent(),i.label=7;case 7:return h++,[3,5];case 8:return t=t.substring(d+1),[3,4];case 9:return r=!1,[3,2];case 10:return[3,17];case 11:return m=i.sent(),o=!0,a=m,[3,17];case 12:if(i.trys.push([12,,15,16]),!(r&&null!=l.return))return[3,14];return[4,(0,eL._)(l.return())];case 13:i.sent(),i.label=14;case 14:return[3,16];case 15:if(o)throw a;return[7];case 16:return[7];case 17:return[2]}})})).apply(this,arguments)}var eH=t(98668),ez=t(40208),eW=t(91752),eG=new Map,eV={beforeCompletion:function(e){a.ZQ({category:"ghostwriter",message:"Called completeCode: "+e.engine,level:"debug"});var n=eW.gv.add(e),t=ez.vF.timeStart({engine:e.engine,replid:e.replId,codeLength:e.header?e.header.length+e.prefix.length:e.prefix.length});return eG.set(n,t),n},afterCompletion:function(e,n,t,r){switch(e){case"aborted":eW.gv.abort(r),eG.delete(r);break;case"success":a.ZQ({category:"ghostwriter",message:"Suggestion emitted: "+t.partialSuggestion,level:"debug"});var i,o=eG.get(r);if(!o)throw Error("No latency logger found for handle: "+JSON.stringify(r));o("code suggestion",{type:"success",fromCache:t.fromCache,length:null===(i=t.partialSuggestion)||void 0===i?void 0:i.length}),eG.delete(r);break;case"finished":eW.gv.complete(r,{__typename:"CompleteCodeResult",id:Date.now().toString(),code:t.completeSuggestion});break;default:throw Error("Unknown completion kind: "+e)}},erroredCompletion:function(e,n){n&&(eW.gv.abort(n),eG.delete(n)),ez.vF.error("CompleteCode: error in completion provider",{err:String(e)})}},ej=t(44370),eZ=t(69338),eq=t(80865),eK=t(53669),e$="ai.codecomplete.lastTooltipHintTimestamp",eJ=(0,ej.eU)({tooltipOpen:!1,consecutiveRejections:0}),eQ=t(63892),eX=t(95211),e0=t(80481),e1=t(16907),e2=t(70906),e4=t(67337),e5=t(75978),e8=t(33977),e3=new e_.k(function(e,n,t,r,i,o,a,l,s){var c,d;return e?(n===eH.DB.Pro?(c=u.M,d=u.M):(c=a,d=a),[eg.of({request:o,infill:i,backendOnly:n===eH.DB.BackendOnly,debounceTimeOutsideWord:c,debounceTimeInsideWord:d,debounceAlways:n!==eH.DB.Pro,keyAcceptSuggestion:t,keyDismissSuggestion:r}),l?eA:[],s?[]:P.of(!1)]):null}),e6=new e_.k(function(e,n,t,r){if(!e)return null;var i,o,l=(i=null,o=function(){},{queue:function(e){if(!(Math.random()>.1)){i&&clearTimeout(i);var n=function(){(0,eQ.u4)(eQ.AZ.CODE_SUGGESTION_USED,(0,A._)({type:"suggestionPresented"},e))};i=setTimeout(n,500),o=n}},flush:function(){i&&clearTimeout(i),o()},cancel:function(){i&&clearTimeout(i)}});return _.q.of({onDismiss:function(){l.cancel()},onRequestIgnoredBackendOnly:function(){a.ZQ({category:"ghostwriter",message:"called completeCode for free user but did not show the ghost text.",level:"info"}),(0,eQ.u4)(eQ.AZ.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",engine:n,filePath:t,reason:"ghostTextNotEnabledForFreeUser"})},onRequestFirstEmit:function(e){var r=e.plugin(ep);r&&(a.ZQ({category:"ghostwriter",message:"Suggestion presented",level:"debug"}),l.queue({engine:n,filePath:t,prefixLength:r.lastPrefixLength}))},onRequestEndedWithNoSuggestion:function(){a.ZQ({category:"ghostwriter",message:"Exited completeCode iteration with no suggestion.",level:"info"}),(0,eQ.u4)(eQ.AZ.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",engine:n,filePath:t,reason:"noSuggestion"})},onSuggestionAccepted:function(e,i){var o=e.plugin(ep);o&&(l.flush(),(0,eQ.u4)(eQ.AZ.CODE_SUGGESTION_USED,{type:"suggestionAccepted",engine:n,filePath:t,prefixLength:o.lastPrefixLength,suggestionLength:i.suggestion.content.length}),a.ZQ({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),null==r||r.recordAccept())},onSuggestionExplicitlyDismissed:function(e){var i=e.plugin(ep);i&&(l.flush(),(0,eQ.u4)(eQ.AZ.CODE_SUGGESTION_USED,{type:"suggestionDismissed",engine:n,filePath:t,prefixLength:i.lastPrefixLength}),a.ZQ({category:"ghostwriter",message:"Suggestion explicitly dismissed",level:"info"}),null==r||r.recordReject())}})});function e7(e){var n,t,a,l,s,d,p,f,h,m,g,v,w,y=e.filePath,b=(0,e4.A)().fs,S=(0,e1.A)(),Y=(0,e0.gc)("codeSuggestion").preferences,x=(0,eH.Ay)(),k=Y.codeSuggestion&&x!==eH.DB.None;(0,o.useEffect)(function(){eW.gv.toggle(k)},[k]);var _=(0,eP.A)(),D=_.engine,E=_.settings,I=(0,e5.Jn)(eX.Pi.acceptPrimaryCompletion.id),F=(0,e5.Jn)(eX.Pi.cancelCompletion.id),T=null!==(w=null==E?void 0:E.infill)&&void 0!==w&&w,P=(0,e2.A)(function(){return new c},[y,S,D]),L=(t=(n={engine:D,replId:S,provider:(0,e2.A)(function(){var e;return e=(0,r._)(function(e,n){var t,r,o,a,l,s,c,u,d;return(0,i.YH)(this,function(i){switch(i.label){case 0:return t=(0,eN.lJ)()?eO.production:eO.staging,[4,(0,eN.j2)(e.replId,"completions-1")];case 1:return r=i.sent(),o={model:"replit-code-v1-5",context:e.header?e.header+e.prefix:e.prefix,max_tokens:e.maxTokens,stop_words:e.stop},[4,fetch("".concat(t,"/completions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},signal:n,body:JSON.stringify(o)})];case 2:if(l=(a=i.sent()).body,200===(s=a.status))return[3,4];return c=Error.bind,d=(u="Error (".concat(s,") response from /ai/complete: ")).concat,[4,a.text()];case 3:throw new(c.apply(Error,[void 0,d.apply(u,[i.sent()])]));case 4:if(!l)throw Error("No body in response");return[2,function(){return function(e){return eB.apply(this,arguments)}(l)}]}})}),function(n,t){return e.apply(this,arguments)}},[]),cache:P,hooks:eV}).engine,a=n.replId,l=n.provider,s=n.cache,d=n.hooks,(0,o.useCallback)((p=(0,eU._)(function(e){var n,r,o,c,u,p,f,h,m,g,v,w,y,b,S,Y,A,C,x,k,_,D,E,I,F;return(0,i.YH)(this,function(T){switch(T.label){case 0:if(n=e.prefix,r=e.suffix,o=e.header,c=e.language,u=e.maxTokens,p=e.signal,!n)return[2];if(f={prefix:n,suffix:r,header:o,engine:t,maxTokens:u,replId:a,stop:["\n\n","```"]},"markdown"===c&&(f.maxTokens=75,f.stop=[]),h=null==d?void 0:d.beforeCompletion(f),null===(g=s.retrieve(n,u)))return[3,1];return m=(0,eU._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,g];case 1:return e.sent(),[2]}})}),[3,4];case 1:return T.trys.push([1,3,,4]),[4,(0,eL._)(l(f,p))];case 2:return m=T.sent(),[3,4];case 3:if((null==(v=T.sent())?void 0:v.name)==="AbortError")return[2];return null==d||d.erroredCompletion(v instanceof Error?v:Error("Unknown error"),h),[2];case 4:w="",y="",b=!0,S=!1,p.addEventListener("abort",function(){h&&(null==d||d.afterCompletion("aborted",f,{},h)),S=!0}),Y=!1,A=!1,T.label=5;case 5:T.trys.push([5,13,14,19]),x=(0,U._)(m()),T.label=6;case 6:return[4,(0,eL._)(x.next())];case 7:if(!(Y=!(k=T.sent()).done))return[3,12];_=k.value,y+=_,D=void 0,T.label=8;case 8:var P;if(-1===(D=y.indexOf("\n")))return[3,11];if(E=JSON.parse(y.substring(0,D)).text,y=y.substring(D+1),P=c,I=({replacementSuggestion:E.split("\n").filter(function(e){return!(e.startsWith(R(P,"Language: "))||e.startsWith(R(P,"Path: ")))}).join("\n")}).replacementSuggestion,w+=I,S)return[3,10];return[4,I];case 9:T.sent(),T.label=10;case 10:return!S&&b&&h&&(null==d||d.afterCompletion("success",f,{fromCache:!!g,partialSuggestion:I},h)),b=!1,eo(w).haltAfter&&(S=!0),[3,8];case 11:return Y=!1,[3,6];case 12:return[3,19];case 13:return F=T.sent(),A=!0,C=F,[3,19];case 14:if(T.trys.push([14,,17,18]),!(Y&&null!=x.return))return[3,16];return[4,(0,eL._)(x.return())];case 15:T.sent(),T.label=16;case 16:return[3,18];case 17:if(A)throw C;return[7];case 18:return[7];case 19:if(null===g&&w.trim().length&&s.add(n,w,u),!(!S&&y))return[3,21];return[4,y];case 20:T.sent(),T.label=21;case 21:return h&&(null==d||d.afterCompletion("finished",f,{completeSuggestion:w,fromCache:!!g},h)),[2]}})}),function(e){return p.apply(this,arguments)}),[t,a,s,d,l])),N=(h=(f=(0,eC._)((0,eZ.fp)(eJ),2))[0],m=f[1],g=(0,eq._P)({controlName:"flag-killswitch-pichu",logFlagToAnalytics:!1}),(0,o.useEffect)(function(){if(g&&h.tooltipOpen){var e=setTimeout(function(){return m(function(e){return(0,C._)((0,A._)({},e),{tooltipOpen:!1})})},2500);return function(){return clearTimeout(e)}}},[g,h.tooltipOpen,m]),(0,o.useMemo)(function(){return g?{recordAccept:function(){m(function(e){return(0,C._)((0,A._)({},e),{consecutiveRejections:0})})},recordReject:function(){m(function(e){var n=e.consecutiveRejections+1;if(n>=5){var t=eK.A.get(e$,"number");if(!t||Date.now()-t>=432e6)return eK.A.set(e$,Date.now()),(0,C._)((0,A._)({},e),{consecutiveRejections:n,tooltipOpen:!0})}return(0,C._)((0,A._)({},e),{consecutiveRejections:n})})}}:null},[g,m])),O=(0,o.useCallback)((v=(0,r._)(function(e){var n;return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,b.readFile(e)];case 1:if(null!==(n=t.sent()).error)return[2,null];return[2,n.content.toString()]}})}),function(e){return v.apply(this,arguments)}),[b]),M=(0,e8.rE)(),B=(0,eq._P)({controlName:"flag-gw-magikarp-bounce-time",logFlagToAnalytics:!1,default:u.Hl,type:"number"}),H=(0,eq._P)({controlName:"flag-completely-different-clipboard",logFlagToAnalytics:!0}),z=(0,eq._P)({controlName:"flag-completely-different-regulator"}),W=[e3.use(k,x,I,F,T,L,B,H,z),e6.use(k,D,y,N),eT.use(O,M)];return(0,o.useMemo)(function(){return W},W)}},27344:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M23.136 7.84c-.552 2.073-1.596 4.495-3.066 6.655-.092.135-.152.3-.152.3.21.322.809.799 2.492 1.156 1.221.259.175.825-1.186.848-.635.01-1.601-.242-2.278-.571-.112 1.053-.413 3.427-.582 4.379-.143.806-.4 1.512-.943 2.06-.538.543-1.269.838-2.162 1.024-1.177.245-2.056.002-2.683-.51-.584-.477-.854-1.119-.99-1.45-.118-.285-.174-.728-.211-1.133-.04-.444-.068-.98-.086-1.533a86.601 86.601 0 0 1-.038-2.52c-.751 1.172-2.493 1.625-3.21 1.568-.599-.048-1.57-.442-.112-.984 1.185-.44 1.436-.897 1.662-1.309.05-.089.097-.176.153-.26.095-.143.194-.284.3-.406a7.553 7.553 0 0 1-.961-.342 10.607 10.607 0 0 1-.218-.067A47.998 47.998 0 0 0 7.1 16.691c-.441.515-.978.873-1.61.899-.626.026-1.15-.283-1.55-.661-.779-.734-1.411-2.026-1.91-3.34-.51-1.348-.926-2.85-1.219-4.119C.52 8.218.337 7.133.311 6.632.201 4.478.71 2.951 1.684 1.95 2.647.96 3.943.612 5.14.545c1.2-.067 2.39.143 3.26.36.383.094.762.205 1.136.33.809-.488 1.812-.774 3.036-.755A8.4 8.4 0 0 1 14.28.68c.141-.047.378-.118.712-.194.539-.122 1.321-.252 2.22-.26 1.79-.017 4.134.459 5.838 2.57.44.546.555 1.362.542 2.155-.013.836-.173 1.83-.456 2.89Zm-4.424-4.354a8.319 8.319 0 0 0-1.918-1.747c1.916-.114 3.846.46 5.087 1.999.092.114.222.467.21 1.188-.01.678-.143 1.546-.405 2.528a20.504 20.504 0 0 1-1.493 3.873c-.008-.489-.076-.967-.124-1.366a6.122 6.122 0 0 1-.062-.919c.012-.374.073-.743.131-1.113.085-.54.19-1.16.054-1.702a4.982 4.982 0 0 0-.255-.724 8.824 8.824 0 0 0-1.225-2.017Zm-.025 7.69c.01.19.01.373-.005.552a35.164 35.164 0 0 1-.495-.88c-.285-.532-.569-1.12-.756-1.675a2.14 2.14 0 0 0 1.076.016c.007.362.036.651.073.952.043.36.09.699.107 1.036ZM18 8.25c-.313 0-.574-.128-.776-.274.018-.188.074-.31.141-.385.11-.122.434-.318 1.292-.275a8.98 8.98 0 0 0-.107.798c-.16.08-.343.136-.55.136ZM6.597 8.123c.035.579.09 1.5-.07 2.609-.188 1.302.262 2.371 1.093 3.146a52.528 52.528 0 0 0-1.66 1.836c-.289.338-.469.374-.532.377-.069.003-.218-.025-.46-.253-.508-.48-1.043-1.48-1.536-2.78-.48-1.265-.877-2.698-1.16-3.926-.288-1.243-.444-2.217-.463-2.577-.097-1.89.359-2.952.95-3.56.601-.617 1.47-.897 2.464-.952.99-.055 2.018.119 2.816.317l.17.043a6.578 6.578 0 0 0-.992 1.75 9.766 9.766 0 0 0-.577 2.428 8.135 8.135 0 0 0-.042 1.542Zm3.006 5.278c.101.03.203.057.307.085.057-.205.133-.44.235-.707.104-.27.262-.59.364-.822.116-.261.221-.533.297-.859.104-.44.162-1.018.079-1.826A4.904 4.904 0 0 1 9.5 9.5c-.617 0-1.077-.382-1.37-.741.013.597-.002 1.379-.119 2.187-.109.755.116 1.314.551 1.756.263.268.615.504 1.04.7Zm-.966-5.684c.216-.09.456-.172.697-.226.413-.092.739-.085.95-.006.328.123.383.483.445.787-.358.12-.811.228-1.229.228-.18 0-.385-.114-.6-.378a2.471 2.471 0 0 1-.263-.405Zm4.888 14.303c.224.183.624.37 1.429.203.762-.159 1.16-.369 1.402-.613.238-.239.413-.601.531-1.266.184-1.033.54-3.9.598-4.584-.02-.476.053-.889.244-1.23.148-.263.342-.44.534-.56-.433-.548-.77-1.203-1.099-1.841-.099-.193-.198-.385-.298-.572-.363-.677-.783-1.543-.999-2.383-.203-.792-.295-1.833.384-2.587.49-.545 1.238-.777 2.177-.776a7.473 7.473 0 0 0-.884-1.383c-.978-1.213-2.567-2.41-4.996-2.448-.941-.015-1.657.196-2.212.525-.145.086-.28.18-.404.28C9.32 3.28 8.9 3.965 8.615 4.698a7.897 7.897 0 0 0-.42 1.58c.253-.098.528-.186.812-.25.604-.135 1.25-.159 1.836.066.644.253 1.116.79 1.296 1.6.374 1.676.34 2.84.128 3.747-.105.45-.25.815-.386 1.124-.15.338-.247.52-.335.752-.094.245-.159.45-.202.613.236.104.463.231.663.396.12.1.234.216.335.35.278.37.408.817.408 1.325 0 .75.002 1.937.038 3.016.021.647.034 1.306.141 1.946.066.392.29.807.596 1.058Z",clipRule:"evenodd"})}))}},27489:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14.19l2.72-2.72a.75.75 0 0 1 .53-.22h12A1.25 1.25 0 0 0 20.25 15V5A1.25 1.25 0 0 0 19 3.75H5Zm-1.945-.695A2.75 2.75 0 0 1 5 2.25h14A2.75 2.75 0 0 1 21.75 5v10A2.75 2.75 0 0 1 19 17.75H7.31l-3.78 3.78A.75.75 0 0 1 2.25 21V5c0-.73.29-1.429.805-1.945Z",clipRule:"evenodd"})}))}},27549:(e,n,t)=>{"use strict";t.d(n,{Z:()=>w});var r=t(1889),i=t(21462),o=t(54988),a=t(2904),l=t(19856),s=t(6680),c=t(61234),u=t(43974),d=t(93682),p=t(26705),f=t(2527),h=t(35869),m=t(85280),g=(0,c.x)({root:[u.wp.display.inlineBlock,u.wp.borderRadius(4),u.wp.border({color:s.LU.outlineDefault})],askButton:[u.wp.border({direction:"right",color:s.LU.outlineDefault})],askButtonInner:[u.wp.height(26),u.wp.borderRadius(4,0,0,4)],copyButton:[{"> button":[u.wp.width(26),u.wp.height(26),u.wp.borderRadius(0,4,4,0)]}]});function v(e){var n=e.adjustXPosition,t=e.adjustYPosition,i=e.onClickAskAssistant,o=e.onClickCopy;return(0,r.Y)(f.ui,{elevated:!0,css:g.root,style:{marginLeft:void 0===n?0:n,marginTop:void 0===t?4:t},children:(0,r.FD)(h.S,{row:!0,align:"center",children:[(0,r.Y)(h.S,{css:g.askButton,children:(0,r.Y)(d.$n,{text:"Ask Assistant",variant:"nofill",onClick:i,size:"small",iconLeft:(0,r.Y)(l.A,{}),css:g.askButtonInner})}),(0,r.Y)(h.S,{css:g.copyButton,children:(0,r.Y)(p.K0,{alt:"Copy",size:12,onClick:o,children:(0,r.Y)(m.A,{})})})]})})}function w(e){var n=e.xterm,t=e.onAskAssistant,l=(0,i.useMemo)(function(){return null==n?void 0:n._term},[n]),s=(0,i.useRef)(null),c=(0,i.useRef)(null),u=(0,i.useRef)(null);(0,i.useEffect)(function(){if(l)return l.onSelectionChange(function(){s.current&&s.current.dispose(),c.current&&c.current.dispose(),u.current&&(u.current.unmount(),u.current=null);var e=l.getSelectionPosition(),n=l.getSelection().trim();if(l.hasSelection()&&e&&n.length>0){var i,d,p,f=l.buffer.active.cursorY,h=e.end.y-f+1,m=null!==(d=null==l?void 0:l._core._renderService.dimensions.css.cell.width)&&void 0!==d?d:8,g=Math.round(((null==e?void 0:e.end.x)-(null==e?void 0:e.start.x))/2),w=-70,y=4,b=g*m,S=Math.ceil(140/m);b<70?(g=e.start.x,w=0):g>l.cols-S/2&&(g=e.end.x,w=-140),e.end.y>=l.rows-2&&(y=-8,h-=1),s.current=l.registerMarker(h),c.current=null!==(p=l.registerDecoration({marker:s.current,x:g,width:S,layer:"top"}))&&void 0!==p?p:null,null===(i=c.current)||void 0===i||i.onRender(function(e){u.current||(u.current=(0,o.createRoot)(e)),u.current.render((0,r.Y)(v,{adjustXPosition:w,adjustYPosition:y,onClickAskAssistant:function(){l.clearSelection(),t(n)},onClickCopy:function(){l.clearSelection(),(0,a.default)(n)}}))})}}).dispose},[t,l])}},27635:e=>{e.exports={footer:"Footer_footer__C_ofZ"}},27775:e=>{e.exports={root:"PlanProposal_root__F8WEo"}},27899:(e,n,t)=>{"use strict";t.d(n,{Gu:()=>u,Vq:()=>s,_0:()=>p,pp:()=>d});var r=t(1889),i=t(61234),o=t(43974),a=t(35869),l=t(56185),s=600,c=(0,i.x)({overviewPane:[o.wp.p(12),o.wp.flex.column,o.wp.gap(24),o.wp.width("100%"),o.wp.maxWidth(s),{margin:"0 auto"}],loading:[o.wp.center,o.wp.flex.growAndShrink(1)],emptyState:[o.wp.center,o.wp.flex.growAndShrink(1)]}),u=function(){return(0,r.Y)(a.S,{css:c.loading,children:(0,r.Y)(l.A,{})})},d=function(e){var n=e.children;return(0,r.Y)(a.S,{css:c.emptyState,children:n})},p=function(e){var n=e.children;return(0,r.Y)(a.S,{css:c.overviewPane,children:n})}},27906:(e,n,t)=>{"use strict";t.d(n,{L:()=>ec});var r=t(29935),i=t(17844),o=t(93629),a=t(12694),l=t(86105),s=t(82643),c=t(1889),u=t(21462),d=t(90629),p=t(35992),f=t(6960),h=t(81239),m=t(43762),g=t(63892),v=t(23494),w=t(73978),y=t(34951),b=t(4952),S=t(16907),Y=t(69543),A=t(67337),C=t(73912),x=t(6680),k=t(61234),_=t(43974),D=t(93682),E=t(67197),R=t(26705),I=t(44885),F=t(40043),T=t(35869),P=t(6761),L=t(74130),U=t(38565),N=(0,k.x)({secretName:[_.wp.fontWeight.medium],secretValueCellHeader:[_.wp.gap(4),_.wp.color.foregroundDimmer],tableRow:[_.wp.p(6),_.wp.flex.column,_.wp.gap(8)],secretsRow:[_.wp.gap(8)],checkboxCell:[{flexGrow:0,flexShrink:0,width:x.LU.space24}],secretValueCell:[_.wp.flex.column,_.wp.gap(4),{width:"30%"}],confirmationMessage:[_.wp.color.accentPositiveStronger,_.wp.flex.row,_.wp.align.center,_.wp.gap(4)]});function O(e){var n=e.value,t=e.label,r=(0,a._)((0,u.useState)(!1),2),i=r[0],o=r[1],l=(0,u.useCallback)(function(){o(function(e){return!e})},[]);return(0,c.FD)(T.S,{css:N.secretValueCell,children:[(0,c.FD)(T.S,{css:N.secretValueCellHeader,row:!0,align:"center",children:[(0,c.Y)("span",{children:t}),(0,c.Y)(R.K0,{alt:"Toggle Visibility",onClick:l,children:i?(0,c.Y)(L.A,{}):(0,c.Y)(U.A,{})})]}),(0,c.Y)(F.EY,{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:i?n:"••••••••"})]})}function M(e){var n=e.existingSecrets,t=e.accountSecrets,i=e.onContinue,o=e.step,p=e.linkedSecrets,f=e.onSecretsUpdated,m=(0,h.A)(),v=(0,a._)((0,b.nB)(),1)[0],w=(0,S.A)(),x=(0,A.A)().secrets,k=(0,a._)((0,C.WM)(w,x.replaceAllExternalSecrets),1)[0],_=(0,a._)((0,C.Nz)(w,x.replaceAllExternalSecrets),1)[0],R=(0,a._)((0,u.useState)(n),2),L=R[0],U=R[1],M=(0,a._)((0,u.useState)(!0),2),B=M[0],H=M[1],z=(0,a._)((0,u.useState)(!1),2),W=z[0],G=z[1],V="done"===o,j=(0,a._)((0,u.useState)(new Set),2),Z=j[0],q=j[1],K=(0,a._)((0,u.useState)(!1),2),$=K[0],J=K[1];(0,u.useEffect)(function(){U(n),1===n.length&&q(new Set([n[0].key]))},[n]);var Q=(0,u.useCallback)(function(e){q(function(n){var t=new Set(n);return t.has(e)?t.delete(e):t.add(e),t})},[]),X=(0,u.useMemo)(function(){return new Map(t.map(function(e){return[e.name,e]}))},[t]),ee=(0,u.useCallback)(function(){H(!1),i()},[i]),en=(0,u.useCallback)((0,r._)(function(){var e,n,t,r,o,a,c,u,h,b,S;return(0,s.YH)(this,function(s){switch(s.label){case 0:if(0===Z.size)return ee(),[2];J(!0),s.label=1;case 1:if(s.trys.push([1,8,,9]),c=L.filter(function(e){return Z.has(e.key)}),!((h=((null==p?void 0:null===(n=p.getRepl)||void 0===n?void 0:n.__typename)==="Repl"&&null!==(u=p.getRepl.sharedSecretLinks)&&void 0!==u?u:[]).filter(function(e){return c.some(function(n){return n.key===e.alias})}).map(function(e){return e.id})).length>0))return[3,3];return[4,_({variables:{input:{resourceId:w,resourceType:y.U9.Repl,ids:h}}})];case 2:s.sent(),s.label=3;case 3:return[4,(e=x).removeEntries.apply(e,(0,l._)(c.map(function(e){return e.key})))];case 4:return s.sent(),[4,v({variables:{input:{ownerType:y.n0.Account,secrets:c.map(function(e){var n,t;return{id:null!==(t=null===(n=X.get(e.key))||void 0===n?void 0:n.id)&&void 0!==t?t:"",name:e.key,value:e.value}})}}})];case 5:if(b=s.sent(),(0,g.u4)(g.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"update",source:"agent"}),!((null===(t=b.data)||void 0===t?void 0:t.updateSharedSecrets.__typename)==="UpdateSharedSecretsResult"&&(null===(o=b.data)||void 0===o?void 0:null===(r=o.updateSharedSecrets)||void 0===r?void 0:r.updatedSecrets)))return[3,7];return[4,k({variables:{input:{resourceId:w,resourceType:y.U9.Repl,secrets:b.data.updateSharedSecrets.updatedSecrets.map(function(e){return{secretId:e.id,alias:e.name}})}}})];case 6:s.sent(),(0,g.u4)(g.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"agent",count:b.data.updateSharedSecrets.updatedSecrets.length}),s.label=7;case 7:return H(!1),J(!1),G(!0),i(),(null===(a=b.data)||void 0===a?void 0:a.updateSharedSecrets.__typename)==="UpdateSharedSecretsResult"&&(null==f||f(c.map(function(e){return{key:e.key,selectedKey:e.key}}))),[3,9];case 8:return S=s.sent(),d.Cp(S),m.showError("Something went wrong. Please try again."),J(!1),[3,9];case 9:return[2]}})}),[v,_,L,Z,i,ee,X,m,k,w,p,f,x]),et=L.length,er=(0,Y.A)("Secret",et),ei=1===et?"it":"them",eo=Z.size,ea=(0,Y.A)("Secret",eo),el=(0,u.useMemo)(function(){return 1===L.length?L[0]:null},[L]);return 0===et||"savingExistingSecrets"!==o&&"done"!==o?null:el?(0,c.FD)(c.FK,{children:[(0,c.FD)(F.EY,{children:['A Secret named "',el.key,'" already exists in your Account Secrets. Would you like to replace it with the new value?']}),(0,c.FD)(T.S,{row:!0,gap:4,children:[(0,c.Y)(D.$n,{text:"Replace Account Secret",onClick:en,loading:$,disabled:V}),(0,c.Y)(D.$n,{text:"Not now",variant:"outlined",onClick:ee,loading:$,disabled:V})]}),V&&W&&(0,c.FD)(T.S,{css:N.confirmationMessage,children:[(0,c.Y)(P.A,{size:16}),"Secret updated and linked"]})]}):(0,c.Y)(I.a,{isOpen:B,onRequestClose:ee,children:(0,c.FD)(T.S,{gap:16,children:[(0,c.FD)(F.Y9,{level:3,variant:"subheadDefault",children:[et," matching ",er," already exist",1===et?"s":""," in your account.",(0,c.Y)("br",{}),"Would you like to replace ",ei,"?"]}),(0,c.Y)(T.S,{gap:8,children:L.map(function(e){var n=t.find(function(n){return n.name===e.key});return(0,c.FD)(T.S,{css:N.tableRow,children:[(0,c.Y)(T.S,{row:!0,align:"center",children:(0,c.Y)(F.EY,{css:N.secretName,children:e.key})}),(0,c.FD)(T.S,{css:N.secretsRow,row:!0,align:"center",children:[(0,c.Y)(T.S,{css:N.checkboxCell,children:(0,c.Y)(E.S,{checked:Z.has(e.key),onChange:function(){return Q(e.key)}})}),(0,c.Y)(O,{label:"Existing",value:(null==n?void 0:n.value)||""}),(0,c.Y)(O,{label:"New",value:e.value})]})]},e.key)})}),(0,c.FD)(T.S,{row:!0,gap:4,children:[(0,c.Y)(D.$n,{text:"Cancel",onClick:ee,disabled:$}),(0,c.Y)(D.$n,{colorway:"primary",text:"Replace ".concat(eo," ").concat(ea),onClick:en,loading:$})]})]})})}var B=t(75251),H=(0,k.x)({confirmationMessage:[_.wp.color.accentPositiveStronger,_.wp.flex.row,_.wp.align.center,_.wp.gap(4)]});function z(e){var n=e.newSecrets,t=e.step,i=e.onContinue,o=e.linkSecrets,p=e.unlinkSecrets,f=e.linkedSecrets,m=e.onSecretsUpdated,v=(0,h.A)(),w=(0,A.A)().secrets,S=(0,a._)((0,u.useState)(!1),2),C=S[0],x=S[1],k=(0,a._)((0,b.w7)(),1)[0],_=(0,a._)((0,u.useState)(!1),2),E=_[0],R=_[1],I=(0,u.useCallback)((0,r._)(function(){var e,t,r,a,c,u,h,b;return(0,s.YH)(this,function(s){switch(s.label){case 0:x(!0),s.label=1;case 1:return s.trys.push([1,8,,9]),[4,k({variables:{input:{ownerType:y.n0.Account,secrets:n.map(function(e){return{name:e.key,value:e.value}})}}})];case 2:if(!((null===(e=(t=s.sent()).data)||void 0===e?void 0:e.createSharedSecrets)&&"createdSecrets"in t.data.createSharedSecrets&&"CreateSharedSecretsResult"===t.data.createSharedSecrets.__typename&&t.data.createSharedSecrets.createdSecrets))return[3,7];return c=t.data.createSharedSecrets.createdSecrets,[4,(r=w).removeEntries.apply(r,(0,l._)(n.map(function(e){return e.key})))];case 3:if(s.sent(),!((h=((null==f?void 0:null===(a=f.getRepl)||void 0===a?void 0:a.__typename)==="Repl"&&null!==(u=f.getRepl.sharedSecretLinks)&&void 0!==u?u:[]).filter(function(e){return n.some(function(n){return n.key===e.alias})}).map(function(e){return e.id})).length>0))return[3,5];return[4,p(h)];case 4:s.sent(),s.label=5;case 5:return[4,o(c.map(function(e){return{secretId:e.id,alias:e.name}}))];case 6:s.sent(),null==m||m(c.map(function(e){return{key:e.name,selectedKey:e.name}})),(0,g.u4)(g.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"agent",count:c.length}),s.label=7;case 7:return(0,g.u4)(g.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"create",source:"agent"}),R(!0),i(),[3,9];case 8:return b=s.sent(),d.Cp(b),v.showError("Something went wrong."),[3,9];case 9:return x(!1),[2]}})}),[n,i,k,v,w,o,p,f,m]);return 0===n.length?null:(0,c.FD)(c.FK,{children:[(0,c.FD)(F.EY,{children:["Would you like to save"," ",1===n.length?"this Secret":"these Secrets"," to your Account Secrets so you can easily access"," ",1===n.length?"it":"them"," in other Apps?"]}),n.length>1&&(0,c.Y)(F.EY,{color:"dimmest",children:n.map(function(e){return e.key}).join(", ")}),(0,c.FD)(T.S,{row:!0,gap:4,children:[(0,c.Y)(D.$n,{text:"Add to Account Secrets",onClick:I,iconLeft:(0,c.Y)(B.A,{}),loading:C,disabled:"savingNewSecrets"!==t||E}),(0,c.Y)(D.$n,{text:"Not now",variant:"outlined",onClick:i,disabled:"savingNewSecrets"!==t||E,loading:C})]}),E&&(0,c.FD)(T.S,{css:H.confirmationMessage,children:[(0,c.Y)(P.A,{size:16}),(0,Y.A)("Secret",n.length)," saved to account"]})]})}var W=t(17459),G=t(84296);function V(e){return(0,c.FD)(G.Ay,(0,o._)((0,i._)({viewBox:"0 0 16 16"},e),{children:[(0,c.Y)("path",{fillRule:"evenodd",d:"M6.95 2a2.85 2.85 0 1 0 0 5.7 2.85 2.85 0 0 0 0-5.7M5 4.85a1.95 1.95 0 1 1 3.9 0 1.95 1.95 0 0 1-3.9 0",clipRule:"evenodd"}),(0,c.Y)("path",{d:"M4.55 9.2a2.85 2.85 0 0 0-2.85 2.85v1.2a.45.45 0 0 0 .9 0v-1.2a1.95 1.95 0 0 1 1.95-1.95h3.902a1.62 1.62 0 0 1 .322-.9z"}),(0,c.Y)("path",{fillRule:"evenodd",d:"M11.783 7.05c-.384 0-.748.136-1.012.371a1.15 1.15 0 0 0-.404.86v.936H13.2v-.935c0-.317-.141-.627-.404-.86a1.53 1.53 0 0 0-1.013-.372M13.7 9.225v-.943c0-.47-.21-.913-.572-1.235a2.03 2.03 0 0 0-1.345-.497c-.5 0-.983.176-1.344.497a1.65 1.65 0 0 0-.572 1.235v.943a.73.73 0 0 0-.469.31 1.14 1.14 0 0 0-.198.66v2.545c0 .246.07.48.198.66a.7.7 0 0 0 .57.317h3.63c.245 0 .443-.14.57-.318.128-.179.199-.412.199-.66v-2.545c0-.247-.071-.48-.199-.66a.73.73 0 0 0-.468-.309m-3.732.492c-.04 0-.102.023-.163.108a.64.64 0 0 0-.105.37v2.545c0 .155.045.284.105.369.061.085.122.108.163.108h3.63c.041 0 .102-.023.163-.108a.64.64 0 0 0 .106-.37v-2.545a.64.64 0 0 0-.106-.369c-.06-.085-.122-.108-.163-.108z",clipRule:"evenodd"}),(0,c.Y)("path",{fillRule:"evenodd",d:"M10.356 6.954c.385-.343.9-.529 1.427-.529.528 0 1.043.186 1.428.529.387.344.614.82.614 1.328v.845c.19.06.34.189.445.335.144.202.222.462.222.732v2.546c0 .27-.078.53-.222.732-.143.2-.376.37-.672.37h-3.63c-.296 0-.528-.17-.672-.37a1.27 1.27 0 0 1-.221-.732v-2.546c0-.27.077-.53.221-.732a.88.88 0 0 1 .446-.335v-.845c0-.508.227-.984.614-1.328m1.427-.279c-.47 0-.925.166-1.261.466-.338.3-.53.71-.53 1.14v.944a.125.125 0 0 1-.105.124.6.6 0 0 0-.387.258c-.11.156-.175.363-.175.587v2.546c0 .223.064.431.175.586.11.156.275.266.468.266h3.63c.194 0 .358-.11.468-.266.111-.155.176-.363.176-.586v-2.546c0-.224-.065-.431-.176-.587a.6.6 0 0 0-.386-.258.125.125 0 0 1-.105-.124v-.943c0-.431-.193-.841-.53-1.141s-.791-.466-1.262-.466m0 .5c-.356 0-.69.126-.93.34a1.03 1.03 0 0 0-.361.767v.81h2.583v-.81c0-.279-.124-.556-.362-.768a1.4 1.4 0 0 0-.93-.339m-1.095.153a1.65 1.65 0 0 1 1.095-.403c.414 0 .808.146 1.096.403.288.255.446.6.446.954v.935a.125.125 0 0 1-.125.125h-2.833a.125.125 0 0 1-.125-.125v-.935c0-.355.158-.699.446-.954m-.719 2.514c-.004 0-.028.008-.062.056a.5.5 0 0 0-.082.296v2.546a.5.5 0 0 0 .082.296c.034.048.058.055.062.056h3.628c.005 0 .028-.008.062-.056a.5.5 0 0 0 .083-.296v-2.546a.5.5 0 0 0-.083-.296c-.034-.048-.057-.055-.062-.056zm-.265-.09c.078-.109.173-.16.264-.16h3.63c.091 0 .187.051.265.16a.77.77 0 0 1 .129.442v2.546a.77.77 0 0 1-.129.441c-.078.11-.174.161-.265.161h-3.63c-.09 0-.186-.051-.264-.16a.77.77 0 0 1-.13-.442v-2.546c0-.178.053-.333.13-.441",clipRule:"evenodd"})]}))}var j=t(98215),Z=t(95949),q=(0,k.x)({root:[_.wp.flex.row,_.wp.justify.spaceBetween,_.wp.align.center],metadata:[_.wp.flex.column,_.wp.gap(8),_.wp.width("100%")],label:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},value:{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},comboBox:[{"& > * > *":{backgroundColor:"".concat(x.LU.backgroundDefault," !important")}}]}),K=(0,u.forwardRef)(function(e,n){var t=e.secretKey,r=e.secretValue,a=e.isSensitive,l=(0,W._)(e,["secretKey","secretValue","isSensitive"]);return(0,c.Y)(Z.if,(0,o._)((0,i._)({},l),{ref:n,textValue:t,css:q.root,children:(0,c.FD)("div",{css:q.metadata,children:[(0,c.Y)(F.EY,{color:"dimmer",variant:"small",css:q.label,children:t}),(0,c.Y)(F.EY,{variant:"small",css:q.value,"data-sensitive":a,children:a?"********":r})]})}))}),$=(0,u.forwardRef)(function(e,n){var t=e.accountSecrets,r=e.onChange,i=e.onSelectionChange,o=e.value,a=e.isSensitive,l=e.readOnly,s=e.keyName,d=e.selectedKey,p=(0,u.useRef)(!1);return(0,c.Y)(j.a,{ref:n,triggerIcon:(0,c.Y)(V,{}),css:q.comboBox,maxHeight:200,menuTrigger:"focus","aria-label":"".concat(s," Value"),isRequired:!0,isDisabled:l,allowsEmptyCollection:!1,selectedKey:d,onSelectionChange:function(e){if(e){p.current=!0;var n,o=t.find(function(n){return n.name===e});r(null!==(n=null==o?void 0:o.value)&&void 0!==n?n:""),i(e),setTimeout(function(){p.current=!1},50)}},onInputChange:function(e){!p.current&&(r(e),i(null))},inputValue:o,isInvalid:!1,allowsCustomValue:!0,formValue:"text",children:t.map(function(e){return(0,c.Y)(K,{isSensitive:a,secretKey:e.name,secretValue:e.value,label:e.name,id:e.name},e.name)})})}),J=t(45771),Q=t(98988),X=t(31618),ee=t(37407),en=t(60576),et=t(79571),er=t(56185),ei=t(18680),eo=(0,J.AH)({display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gridAutoFlow:"row",gap:x.LU.space8,"> *":{height:"fit-content"}}),ea=(0,k.x)({root:[eo]}),el=(0,k.x)({actions:[_.wp.gap(4),_.wp.flex.wrap],form:[_.wp.p(8)],secretHeader:[eo,_.wp.mb(4),_.wp.fontSize("small"),_.wp.color.foregroundDimmer,{lineHeight:x.LU.lineHeightSmall,"> div":[_.wp.gap(4),{display:"flex",alignItems:"center",flexDirection:"row"}]}],secretValueRoot:[_.wp.gap(8),{'&[data-sensitive="true"] input':{fontFamily:"text-security-disc"}}],secretValueInput:[_.wp.flex.column,_.wp.flex.growAndShrink(1)],primaryButton:[(0,Q.Li)("blurple"),{width:"fit-content","&[disabled]":[(0,Q.Li)("grey")]}],input:[{backgroundColor:x.LU.backgroundDefault}],secretValueFooter:[_.wp.p(4),{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}]}),es=(0,u.forwardRef)(function(e,n){var t=e.keyName,r=e.value,i=e.onChange,o=e.readOnly,a=e.accountSecrets,s=e.isSensitive,d=e.selectedKey,p=e.onSelectedKeyChange,f=(0,u.useMemo)(function(){return(0,l._)(a).sort(function(e,n){return e.name===t?-1:+(n.name===t)})},[a,t]);return(0,c.FD)(T.S,{css:ea.root,children:[(0,c.Y)(T.S,{children:(0,c.Y)(X.pd,{value:t,disabled:!0,css:el.input})}),(0,c.Y)(T.S,{css:el.secretValueRoot,row:!0,align:"start","data-sensitive":s,children:(0,c.FD)(T.S,{css:el.secretValueInput,children:[(0,c.Y)($,{ref:n,accountSecrets:f,onChange:i,onSelectionChange:p,value:r,isSensitive:s,readOnly:o,keyName:t,selectedKey:d}),d?(0,c.FD)(T.S,{row:!0,gap:4,align:"center",children:[(0,c.Y)(ee.m_,{tooltip:"Link Account Secret to this Repl",children:(0,c.Y)(et.A,{color:x.LU.accentPrimaryStronger})}),(0,c.FD)(F.EY,{variant:"small",color:"dimmer",css:el.secretValueFooter,children:["Using ",d]})]}):null]})})]})});function ec(e){var n,t=e.keys,y=e.addEntries,b=e.removeEntries,S=e.onComplete,Y=e.sessionId,A=e.isLast,C=e.replId,x=e.linkSecrets,k=e.unlinkSecrets,_=(0,h.A)(),E=(0,a._)((0,u.useState)(!1),2),I=E[0],F=E[1],P=(0,a._)((0,u.useState)(!0),2),N=P[0],O=P[1],B=(0,f.m1)({fetchPolicy:"cache-and-network",ssr:!1}).data,H=(0,u.useMemo)(function(){var e;return(null==B?void 0:null===(e=B.currentUser)||void 0===e?void 0:e.secrets.__typename)==="SharedSecretConnection"?B.currentUser.secrets.items:[]},[B]),W=(0,f.bM)({variables:{replId:C}}).data,G=(0,a._)((0,u.useState)(t.map(function(e){return{key:e,value:""}})),2),j=G[0],Z=G[1],q=(0,a._)((0,u.useState)(new Map),2),K=q[0],$=q[1];(0,u.useEffect)(function(){H&&j.every(function(e){return""===e.value})&&(Z((0,p.jM)(function(e){e.forEach(function(e){var n=H.find(function(n){return n.name===e.key});n&&(e.value=n.value)})})),$((0,p.jM)(function(e){t.forEach(function(n){var t=H.find(function(e){return e.name===n});t&&e.set(n,t.name)})})))},[H,t,j]);var J=(0,a._)((0,u.useState)(A?"selecting":"done"),2),Q=J[0],X=J[1],ee=(0,a._)((0,u.useState)([]),2),et=ee[0],eo=ee[1],ea=(0,a._)((0,u.useState)([]),2),ec=ea[0],eu=ea[1],ed=(0,a._)((0,u.useState)([]),2),ep=(ed[0],ed[1]),ef=(0,w.Ay)(),eh=(0,u.useRef)(!1);(0,u.useEffect)(function(){!eh.current&&t&&(ef({action:"secrets_requested",secretsRequested:t,sessionId:Y}),eh.current=!0)},[t,Y,ef]);var em=(0,u.useMemo)(function(){return j.every(function(e){return!!e.value})},[j]),eg=(0,u.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.nextNewSecrets,t=e.nextExistingEntries,r=e.nextMatchingEntries;n&&eo(n),t&&eu(t),r&&ep(r);var i=null!=n?n:et,o=null!=t?t:ec,a={selecting:function(){return i.length>0?"savingNewSecrets":o.length>0?"savingExistingSecrets":"done"},savingNewSecrets:function(){return o.length>0?"savingExistingSecrets":"done"},savingExistingSecrets:"done",done:"done"};Q in a&&X("function"==typeof a[Q]?a[Q]():a[Q])},[ec,et,Q]),ev=(0,m.Z)(Q),ew=(0,u.useRef)("done"===Q);(0,u.useEffect)(function(){"selecting"===Q||ew.current||(K.size>0&&(0,g.u4)(g.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"copy",source:"agent",size:K.size}),ew.current=!0,S().catch(function(e){d.Cp(e),_.showError("Something went wrong. Please try again."),ew.current=!1,ev&&X(ev)}))},[S,Q,K,_,ev]);var ey=(n=(0,r._)(function(){var e,n,t,r,i,o,a,c,u;return(0,s.YH)(this,function(s){switch(s.label){case 0:F(!0),s.label=1;case 1:if(s.trys.push([1,8,,9]),e=new Map(H.map(function(e){return[e.name,e]})),t=(n=j.reduce(function(n,t){var r=e.get(t.key);return r?r.value===t.value?n.matchingEntries.push(t):n.existingEntries.push(t):n.newEntries.push(t),n},{newEntries:[],existingEntries:[],matchingEntries:[]})).newEntries,r=n.existingEntries,!((i=n.matchingEntries).length>0||r.length>0||t.length>0))return[3,7];if(!((o=(0,l._)(i).concat((0,l._)(r),(0,l._)(t)).map(function(e){return e.key})).length>0))return[3,3];return[4,b.apply(void 0,(0,l._)(o.map(function(e){return e})))];case 2:s.sent(),s.label=3;case 3:if(a=(0,l._)(i).concat((0,l._)(r),(0,l._)(t)).map(function(e){var n=e.key,t=K.get(n);if(t){var r=H.find(function(e){return e.name===t});if(r)return{secretId:r.id,alias:n}}return null}).filter(function(e){return null!==e}),c=(0,l._)(i).concat((0,l._)(r),(0,l._)(t)).filter(function(e){return!K.has(e.key)}),!(a.length>0))return[3,5];return[4,x(a)];case 4:s.sent(),s.label=5;case 5:if(!(c.length>0))return[3,7];return[4,y(c)];case 6:s.sent(),s.label=7;case 7:return eg({nextNewSecrets:t,nextExistingEntries:r,nextMatchingEntries:i}),[3,9];case 8:return u=s.sent(),d.Cp(u),_.showError("Something went wrong. Please try again."),[3,9];case 9:return F(!1),[2]}})}),function(){return n.apply(this,arguments)}),eb=(0,u.useRef)(null),eS=(0,u.useRef)(null),eY=(0,u.useCallback)(function(){eS.current&&eS.current.focus()},[]);return(0,c.FD)(T.S,{gap:8,children:[(0,c.Y)(v.N,{icon:(0,c.Y)(ei.A,{}),title:"Secrets",children:(0,c.FD)(T.S,{css:el.form,children:[(0,c.FD)(T.S,{css:el.secretHeader,children:[(0,c.Y)(T.S,{children:"Key"}),(0,c.FD)(T.S,{children:["Value",(0,c.Y)(R.K0,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return O(!N)},size:18,children:N?(0,c.Y)(L.A,{}):(0,c.Y)(U.A,{})})]})]}),(0,c.FD)(T.S,{gap:8,innerRef:eb,children:[j.map(function(e,n){var t,r=e.key,a=e.value;return(0,c.Y)(es,{isSensitive:N,keyName:r,value:a,readOnly:"done"===Q,accountSecrets:H,selectedKey:null!==(t=K.get(r))&&void 0!==t?t:null,onSelectedKeyChange:function(e){$(function(n){var t=new Map(n);return e?t.set(r,e):t.delete(r),t})},onChange:function(e){Z(function(n){return n.map(function(n){return n.key===r?(0,o._)((0,i._)({},n),{value:e}):n})})},ref:n===j.length-1?eS:void 0},r)}),(0,c.FD)(T.S,{css:el.actions,row:!0,justify:"space-between",children:[H.length>0&&"selecting"===Q?(0,c.Y)(D.$n,{iconLeft:(0,c.Y)(V,{}),text:"Choose from Account Vault",onClick:eY,disabled:"selecting"!==Q,loading:I}):(0,c.Y)("span",{}),(0,c.Y)(D.$n,{css:el.primaryButton,iconLeft:I?(0,c.Y)(er.A,{}):(0,c.Y)(en.A,{}),text:"Continue",onClick:ey,loading:I,disabled:"selecting"!==Q||!em||I})]})]})]})}),(0,c.Y)(z,{newSecrets:et,step:Q,onContinue:eg,linkSecrets:x,unlinkSecrets:k,linkedSecrets:W,onSecretsUpdated:function(e){$(function(n){var t=new Map(n);return e.forEach(function(e){var n=e.key,r=e.selectedKey;t.set(n,r)}),t})}}),(0,c.Y)(M,{existingSecrets:ec,accountSecrets:H,onContinue:eg,step:Q,linkedSecrets:W,onSecretsUpdated:function(e){$(function(n){var t=new Map(n);return e.forEach(function(e){var n=e.key,r=e.selectedKey;t.set(n,r)}),t})}})]})}},28074:(e,n,t)=>{"use strict";t.d(n,{A:()=>_});var r=t(17844),i=t(93629),o=t(12694),a=t(1889),l=t(21462),s=t(39695),c=t(7576),u=t.n(c),d=t(21051),p=t(11438),f=t(81239),h=t(6680),m=t(61234),g=t(43974),v=t(35899),w=t(93682),y=t(31618),b=t(2527),S=t(40043),Y=t(35869),A=t(9200),C=t(6761),x=t(56185),k=(0,m.x)({form:[g.wp.align.start,g.wp.display.flex,g.wp.rowWithGap(8),g.wp.width("100%")],searchContainer:[g.wp.position.relative,g.wp.flex.growAndShrink(1)],dropdownMenu:[g.wp.borderRadius(8),g.wp.overflow("hidden"),g.wp.mt(2),g.wp.zIndex(2),g.wp.border({color:h.LU.outlineDimmer,width:1,style:"solid"}),g.wp.maxHeight(280),g.wp.overflowY("auto"),g.wp.scrollbar.thin,{scrollbarColor:h.LU.backgroundHigher+" "+h.LU.backgroundHighest,"&::-webkit-scrollbar-thumb":{backgroundColor:h.LU.backgroundHighest}}],result:[g.wp.p(8),g.wp.rowWithGap(8),g.wp.justify.spaceBetween,g.wp.align.center,g.wp.cursor.pointer],result_active:[g.wp.backgroundColor.accentPrimaryDimmer],loadingContainer:[g.wp.m(8),g.wp.rowWithGap(8),g.wp.align.center],emptyText:[g.wp.m(8)]});function _(e){var n=e.onSubmit,t=e.existingUsernames,c=e.isDisabled,m=e.onChange,g=e.placeholder,_=(0,o._)((0,l.useState)(""),2),D=_[0],E=_[1],R=(0,v.c)(),I=(0,p.A)(D.trim().replace(/^@/,""),250),F=(0,d.Mj)({skip:!I||u()(D),variables:{query:I,limit:6}}),T=F.data,P=F.loading,L=F.error,U=(0,f.A)().showError;(0,l.useEffect)(function(){L&&U(L.message)},[L,U]);var N=null==T?void 0:T.usernameSearch,O=function(e){E(e.currentTarget.value),null==m||m(e.currentTarget.value)},M=function(e){"Enter"===e.key&&D.match(/.+@.+/)&&(n(D),E(""),e.currentTarget.blur())};return(0,a.FD)("form",{onSubmit:function(e){e.preventDefault(),n(D),E("")},css:k.form,children:[(0,a.Y)(s.Ay,{onChange:function(e){e&&E(e.username)},itemToString:function(e){return(null==e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var n=e.getInputProps,o=e.getItemProps,l=e.getMenuProps,s=e.isOpen,c=e.highlightedIndex,u=e.getRootProps;return(0,a.FD)(Y.S,(0,i._)((0,r._)({css:k.searchContainer},u({refKey:"innerRef"})),{children:[(0,a.Y)(y.pd,(0,r._)({id:R("username-search")},n({ref:null,value:D,onChange:O,placeholder:null!=g?g:"Add people by username or email",autoComplete:"off",onKeyDown:M}))),s?(0,a.FD)(Y.S,{children:[N&&N.length?(0,a.Y)(b.ui,(0,i._)((0,r._)({elevated:!0,css:k.dropdownMenu,tag:"ul"},l({refKey:"innerRef"})),{children:N.map(function(e,n){return(0,a.FD)(Y.S,(0,i._)((0,r._)({tag:"li"},o({item:e,index:n})),{css:[k.result,n===c&&k.result_active],children:[(0,a.FD)(Y.S,{row:!0,gap:8,align:"center",children:[(0,a.Y)(A.A,{size:"m",url:e.image,username:e.username,fullName:e.fullName}),(0,a.Y)(S.EY,{multiline:!1,children:e.username})]}),t.includes(e.username)?(0,a.Y)(Y.S,{children:(0,a.Y)(C.A,{color:h.LU.accentPositiveStronger})}):null]}),n)})})):null,P?(0,a.Y)(b.ui,{elevated:!0,css:k.dropdownMenu,children:(0,a.FD)(Y.S,{css:k.loadingContainer,align:"center",children:[(0,a.Y)(x.A,{}),(0,a.Y)(S.EY,{color:"dimmer",multiline:!1,children:"Loading…"})]})}):null,N&&0===N.length?(0,a.Y)(b.ui,{elevated:!0,css:k.dropdownMenu,children:(0,a.FD)(S.EY,{css:k.emptyText,color:"dimmer",multiline:!1,children:['No results found for "',D,'"']})}):null]}):null]}))}}),(0,a.Y)(Y.S,{children:(0,a.Y)(w.$n,{colorway:"primary",type:"submit",disabled:c||!D,text:"Invite"})})]})}},28094:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(12694),i=t(21462),o=t(80478),a=t(67337);function l(){var e=(0,a.A)().toolchain,n=(0,r._)((0,i.useState)(null),2),t=n[0],l=n[1];return(0,i.useEffect)(function(){var n=!1;return e.getRegistry().then(function(e){!n&&l(e)}).catch(function(e){o.vF.error("Toolchain: failed to get module registry: ".concat(e.message))}),function(){n=!0}},[e]),t}},28113:(e,n,t)=>{"use strict";t.d(n,{Js:()=>c,iw:()=>u,QX:()=>h,Qm:()=>f,XD:()=>m,ly:()=>d,Y9:()=>p});var r=t(1889),i=t(45771),o=t(43974),a=t(35869),l=t(34091),s=(0,i.AH)({filter:"drop-shadow(0px 2px 6px rgba(0, 0, 0, 0.15))"});function c(e){var n=e.height,t=void 0===n?44:n;return(0,r.FD)("svg",{width:56*t/44,height:t,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("path",{d:"M7 42.2858L8 32.6684H14L15 42.2858H24L26 27.1837H32L34 42.2858H43L45 21.699H52L55 3.71436H56V43.0001H1V42.2858H7Z",fill:"url(#paint0_linear_3629_241)"}),(0,r.Y)("path",{d:"M55 3.71436L52 21.699H45L43 42.2858H34L32 27.1837H26L24 42.2858H15L14 32.6684H8L7 42.2858H1",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("defs",{children:(0,r.FD)("linearGradient",{id:"paint0_linear_3629_241",x1:"28.5",y1:"3.71436",x2:"28.5",y2:"43.0001",gradientUnits:"userSpaceOnUse",children:[(0,r.Y)("stop",{stopColor:"#0079F2"}),(0,r.Y)("stop",{offset:"0.395833",stopColor:"#0079F2"}),(0,r.Y)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function u(){return(0,r.FD)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.FD)("g",{clipPath:"url(#clip0_3629_246)",children:[(0,r.Y)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",fill:"#2B3245"}),(0,r.Y)("g",{filter:"url(#filter0_dii_3629_246)",children:(0,r.Y)("path",{d:"M3 15C3 13.3431 4.34315 12 6 12H20C20.5523 12 21 12.4477 21 13V25C21 25.5523 20.5523 26 20 26H6C4.34315 26 3 24.6569 3 23V15Z",fill:"#0079F2"})}),(0,r.Y)("g",{filter:"url(#filter1_dii_3629_246)",children:(0,r.Y)("rect",{x:"23",y:"12",width:"12",height:"14",rx:"1",fill:"#0079F2"})}),(0,r.Y)("g",{filter:"url(#filter2_dii_3629_246)",children:(0,r.Y)("rect",{x:"37",y:"12",width:"8",height:"14",rx:"1",fill:"#0079F2"})}),(0,r.Y)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",stroke:"#3C445C"})]}),(0,r.FD)("defs",{children:[(0,r.FD)("filter",{id:"filter0_dii_3629_246",x:"-3",y:"6",width:"30",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{}),(0,r.Y)("feGaussianBlur",{stdDeviation:"3"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"-2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.FD)("filter",{id:"filter1_dii_3629_246",x:"17",y:"6",width:"24",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{}),(0,r.Y)("feGaussianBlur",{stdDeviation:"3"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"-2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.FD)("filter",{id:"filter2_dii_3629_246",x:"31",y:"6",width:"20",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{}),(0,r.Y)("feGaussianBlur",{stdDeviation:"3"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"-2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.Y)("clipPath",{id:"clip0_3629_246",children:(0,r.Y)("rect",{width:"56",height:"44",fill:"white"})})]})]})}function d(e){var n=e.height,t=void 0===n?44:n;return(0,r.FD)("svg",{width:56*t/44,height:t,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("path",{d:"M1 42H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("g",{filter:"url(#filter0_d_3629_304)",children:(0,r.Y)("path",{d:"M21 11L35 25M38 18C38 23.5228 33.5228 28 28 28C22.4772 28 18 23.5228 18 18C18 12.4772 22.4772 8 28 8C33.5228 8 38 12.4772 38 18Z",stroke:"#0053A6",strokeWidth:"2"})}),(0,r.Y)("defs",{children:(0,r.FD)("filter",{id:"filter0_d_3629_304",x:"9",y:"3",width:"38",height:"38",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"4"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"4"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0.32549 0 0 0 0 0.65098 0 0 0 0.5 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_304"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_304",result:"shape"})]})})]})}function p(){return(0,r.FD)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("circle",{cx:"28",cy:"22",r:"13",fill:"#0053A6"}),(0,r.Y)("path",{d:"M28 9C30.2851 9 32.5297 9.6023 34.5079 10.7462L28 22L28 9Z",fill:"#0079F2"}),(0,r.Y)("circle",{cx:"28",cy:"22",r:"10.5",stroke:"#57ABFF",strokeDasharray:"1 4"}),(0,r.Y)("g",{filter:"url(#filter0_d_3629_309)",children:(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28 36.3334C35.9161 36.3334 42.3333 29.9162 42.3333 22.0001C42.3333 15.1129 37.4759 9.36028 31 7.98119V6C31 5 30 4 29 4H27C26 4 25 5 25 6V7.9812C18.5241 9.36029 13.6667 15.1129 13.6667 22.0001C13.6667 29.9162 20.0839 36.3334 28 36.3334ZM15.6667 22.0001C15.6667 15.1886 21.1885 9.66675 28 9.66675C34.8115 9.66675 40.3333 15.1886 40.3333 22.0001C40.3333 28.8116 34.8115 34.3334 28 34.3334C21.1885 34.3334 15.6667 28.8116 15.6667 22.0001Z",fill:"#0079F2"})}),(0,r.Y)("g",{filter:"url(#filter1_d_3629_309)",children:(0,r.Y)("path",{d:"M28 12V22L33 13.3",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,r.FD)("defs",{children:[(0,r.FD)("filter",{id:"filter0_d_3629_309",x:"11.6667",y:"3",width:"32.6667",height:"36.3335",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"1"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]}),(0,r.FD)("filter",{id:"filter1_d_3629_309",x:"25.25",y:"10.25",width:"10.5001",height:"15.5",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"1"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]})]})]})}function f(e){var n=e.height,t=void 0===n?44:n;return(0,r.FD)("svg",{width:56*t/44,height:t,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("path",{d:"M0 37V6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H56V37H0Z",fill:"url(#paint0_linear_3629_271)"}),(0,r.Y)("path",{d:"M1 6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("defs",{children:(0,r.FD)("linearGradient",{id:"paint0_linear_3629_271",x1:"28",y1:"6",x2:"28",y2:"37",gradientUnits:"userSpaceOnUse",children:[(0,r.Y)("stop",{stopColor:"#0079F2",stopOpacity:"0.7"}),(0,r.Y)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function h(){return(0,r.FD)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("path",{d:"M16 8C16 6.89543 16.8954 6 18 6H37C38.1046 6 39 6.89543 39 8V13H16V8Z",fill:"#0053A6"}),(0,r.Y)("path",{d:"M16 14H39V27C39 28.1046 38.1046 29 37 29H18C16.8954 29 16 28.1046 16 27V14Z",fill:"#0053A6"}),(0,r.Y)("g",{filter:"url(#filter0_d_3629_276)",children:(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.1667 1.6665C22.719 1.6665 23.1667 2.11422 23.1667 2.6665V4.33317H31.8333V2.6665C31.8333 2.11422 32.281 1.6665 32.8333 1.6665C33.3856 1.6665 33.8333 2.11422 33.8333 2.6665V4.33317H36.8333C38.8584 4.33317 40.5 5.97479 40.5 7.99984V26.6665C40.5 28.6915 38.8584 30.3332 36.8333 30.3332H18.1667C16.1416 30.3332 14.5 28.6915 14.5 26.6665V7.99984C14.5 5.97479 16.1416 4.33317 18.1667 4.33317H21.1667V2.6665C21.1667 2.11422 21.6144 1.6665 22.1667 1.6665ZM21.1667 6.33317H18.1667C17.2462 6.33317 16.5 7.07936 16.5 7.99984V12.3332H38.5V7.99984C38.5 7.07936 37.7538 6.33317 36.8333 6.33317H33.8333V7.99984C33.8333 8.55212 33.3856 8.99984 32.8333 8.99984C32.281 8.99984 31.8333 8.55212 31.8333 7.99984V6.33317H23.1667V7.99984C23.1667 8.55212 22.719 8.99984 22.1667 8.99984C21.6144 8.99984 21.1667 8.55212 21.1667 7.99984V6.33317ZM38.5 14.3332H16.5V26.6665C16.5 27.587 17.2462 28.3332 18.1667 28.3332H36.8333C37.7538 28.3332 38.5 27.587 38.5 26.6665V14.3332Z",fill:"#57ABFF"})}),(0,r.FD)("g",{filter:"url(#filter1_d_3629_276)",children:[(0,r.Y)("path",{d:"M43.0779 26.019C42.2616 23.6789 40.0353 22 37.4169 22C35.7617 22 34.2632 22.6709 33.1785 23.7556L30.2721 26.662M30.2721 26.662V22.666M30.2721 26.662H34.2667",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("path",{d:"M31.7706 29.9688C32.5869 32.3089 34.8132 33.9878 37.4316 33.9878C39.0868 33.9878 40.5853 33.3169 41.67 32.2322L44.5764 29.3258M44.5764 29.3258L44.5764 33.3218M44.5764 29.3258L40.5818 29.3258",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,r.FD)("defs",{children:[(0,r.FD)("filter",{id:"filter0_d_3629_276",x:"12.5",y:"0.666504",width:"30",height:"32.6665",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"1"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]}),(0,r.FD)("filter",{id:"filter1_d_3629_276",x:"27.5221",y:"20.25",width:"19.8043",height:"17.4878",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"1"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]})]})]})}function m(){return(0,r.Y)(a.S,{css:[o.wp.py(6),o.wp.px(12),o.wp.color.accentPrimaryStronger],children:(0,r.Y)(l.A,{size:32})})}},28256:(e,n,t)=>{"use strict";t.d(n,{CV:()=>j,L3:()=>$,Vb:()=>G,bQ:()=>B});var r,i,o,a,l,s,c,u=t(83846),d=t(12694),p=t(1889),f=t(21462),h=t(72004),m=t(26496),g=t(18879),v=t(24491),w=t(16810),y=t(53046),b=t(27208),S=t(40919),Y=t(33371),A=t(16902),C=t(95563),x=t(49937),k=t(6680),_=t(61234),D=t(47258),E=t(22498),R=t(62493),I=t(43974),F=t(93682),T=t(26705),P=t(2527),L=t(88654),U=t(35869),N=(t(42795),t(98152)),O=t(6113),M=t(20627);function B(e){if(!e)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var t=n.agentTimelineEventContents,r=t.message,i=t.toolData;return(null==i?void 0:i.$kind)==="messageData"?{type:"message",message:r,created:e.created,sender:{id:e.sender.id,type:e.sender.type}}:{summary:(0,y.F)(e),message:r,state:e.state,error:e.error,toolDataKind:null==i?void 0:i.$kind,created:e.created}}var H=(0,E.v)(["color","timestampDisplay","chevronDisplay","secondaryButtonsDisplay","statusIconTransform","statusIconWidth","animation"]),z=H.styleTokens,W=H.cssVars,G=[R.S.backgroundPulse(k.LU.blurpleStronger,k.LU.blurpleStrongest),{WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent","& > span > span":{backgroundColor:"transparent"}}],V=(0,_.x)({root:[(r={},(0,u._)(r,W.secondaryButtonsDisplay,"flex"),(0,u._)(r,I.$_.canHover,(0,u._)({},W.secondaryButtonsDisplay,"none")),r),I.wp.hover((0,u._)({},W.secondaryButtonsDisplay,"flex")),{":focus-within":(0,u._)({},W.secondaryButtonsDisplay,"flex")}],row:[I.wp.position.relative],minimalButton:[I.wp.textAlign.left,I.wp.px(6),I.wp.rowWithGap(6),I.wp.height(28),I.wp.cursor.pointer,I.wp.flex.growAndShrink(1),I.wp.justify.spaceBetween,I.wp.align.center,I.wp.hover((i={},(0,u._)(i,W.color,k.LU.foregroundDefault),(0,u._)(i,W.timestampDisplay,"flex"),(0,u._)(i,W.chevronDisplay,"flex"),i)),(a={},(0,u._)(a,I.$_.canHover,(o={},(0,u._)(o,W.color,k.LU.foregroundDimmer),(0,u._)(o,W.chevronDisplay,"none"),(0,u._)(o,W.timestampDisplay,"none"),o)),(0,u._)(a,"color",z.color),(0,u._)(a,"transition","color 120ms"),(0,u._)(a,"backgroundColor","inherit"),a)],button:[I.wp.reset.button,I.wp.textAlign.left,I.wp.height(28),D.b.listItem,I.wp.borderRadius(),I.wp.hover((l={},(0,u._)(l,W.color,k.LU.foregroundDefault),(0,u._)(l,W.timestampDisplay,"flex"),(0,u._)(l,W.chevronDisplay,"flex"),l)),(c={},(0,u._)(c,I.$_.canHover,(s={},(0,u._)(s,W.color,k.LU.foregroundDimmer),(0,u._)(s,W.chevronDisplay,"none"),(0,u._)(s,W.timestampDisplay,"none"),s)),(0,u._)(c,"color",z.color),(0,u._)(c,"transition","color 120ms"),c),I.wp.px(6),I.wp.rowWithGap(6),I.wp.cursor.pointer,I.wp.flex.growAndShrink(1),I.wp.justify.spaceBetween,I.wp.align.center],timestamp:[(0,u._)({},I.$_.canHover,{display:"var(".concat(W.timestampDisplay,", none)")})],left:[I.wp.flex.growAndShrink(1),I.wp.rowWithGap(6),I.wp.align.center],buttonText:[I.wp.flex.growAndShrink(1),{color:"inherit",'&[data-loading="true"]':G}],bar:[I.wp.position.absolute,I.wp.width(1),I.wp.height(8),I.wp.borderRadius(),{backgroundColor:k.LU.outlineDimmest,zIndex:-1,bottom:-6}],messageSurface:[I.wp.p(8),I.wp.borderRadius(4),I.wp.mb(8)],secondaryButtons:[{display:z.secondaryButtonsDisplay}],expandButton:[I.wp.color.foregroundDimmest,I.wp.px(6),I.wp.height(28),I.wp.hover(I.wp.color.foregroundDefault),I.wp.border({width:0}),{svg:{marginRight:-2}}]}),j=(0,f.memo)(function(e){var n,t=e.eventId,r=e.onClick,i=e.showThoughtButton,o=(0,m.Al)(t,B),a=(null==o?void 0:o.toolDataKind)==="createPostgresqlDatabaseData";(0,A.q)({skipQuery:!a});var l=(0,x.eg)();return o?(0,p.FD)(p.FK,{children:[(0,p.Y)(Z,{eventId:t,onClick:r,summary:null!==(n=o.summary)&&void 0!==n?n:"",message:o.message,toolDataKind:o.toolDataKind,state:o.state,created:o.created,showThoughtButton:i}),l&&a?(0,p.Y)(Y.IC,{}):null]}):null});function Z(e){var n=e.eventId,t=e.onClick,r=e.showThoughtButton,i=e.message,o=e.summary,a=e.toolDataKind,l=e.state,s=e.created,c=(0,d._)((0,f.useState)(!1),2),u=c[0],m=c[1],g=(0,d._)((0,f.useState)(!1),2),y=g[0],Y=(g[1],(0,f.useRef)(l)),A=(0,f.useRef)(null),x=(0,C.A)();(0,f.useEffect)(function(){if(Y.current===h.qOk.IN_PROGRESS&&l!==h.qOk.IN_PROGRESS){(0,v.U)(A,W.color,k.LU.greenStronger);var e=setTimeout(function(){(0,v.U)(A,W.color,k.LU.foregroundDimmer)},300);return function(){clearTimeout(e)}}},[l]);var _=i.trim().length>0&&r;return u&&!_&&m(!1),(0,p.FD)(U.S,{css:V.root,gap:6,children:[(0,p.FD)(U.S,{css:V.row,row:!0,gap:4,align:"center",children:[(0,p.Y)(U.S,{tag:"button",innerRef:A,css:x?V.minimalButton:V.button,onClick:function(){return t(n)},children:(0,p.FD)(U.S,{css:V.left,children:[(0,p.Y)(w.u,{kind:a,color:l===h.qOk.IN_PROGRESS?k.LU.blurpleStronger:void 0,size:x?12:16}),(0,p.Y)(U.S,{"data-timeline-bar":!0,css:V.bar,style:{left:x?12:14}}),(0,p.Y)(U.S,{css:V.buttonText,justify:"center","data-loading":l===h.qOk.IN_PROGRESS,children:(0,p.Y)(b.B,{summary:null!=o?o:"",variant:x?"small":"text",color:x?"dimmest":"dimmer",hover:x})}),s?(0,p.Y)(L.Dc,{textVariant:"small",textColor:"dimmest",css:V.timestamp,date:s}):null]})}),(0,p.FD)(U.S,{css:V.secondaryButtons,row:!0,align:"center",children:[_?(0,p.Y)(T.K0,{alt:u?"Hide explanation":"Show explanation",onClick:function(){return m(function(e){return!e})},size:28,children:(0,p.Y)(M.A,{})}):null,null]})]}),u?(0,p.Y)(P.ui,{elevated:!0,css:V.messageSurface,children:(0,p.Y)(S.d2,{text:i,messageState:h.qOk.COMPLETE})}):null,y?(0,p.Y)(P.ui,{elevated:!0,css:V.messageSurface,children:(0,p.Y)(K,{eventId:n})}):null]})}function q(e){return e}function K(e){var n=e.eventId,t=(0,m.Al)(n,q);return(0,p.Y)(g.A,{json:t})}function $(e){return(0,p.Y)(F.$n,{css:V.expandButton,variant:"nofill",alignment:"start",onClick:e.onClick,size:e.small?"small":"default",iconLeft:e.isExpanded?(0,p.Y)(N.A,{}):(0,p.Y)(O.A,{}),text:e.isExpanded?"Show less":"Show ".concat(e.hiddenItemsCount," more")})}},28456:(e,n,t)=>{"use strict";t.d(n,{M:()=>i});var r=t(80865);function i(){var e=(0,r._P)({controlName:"flag-granular-tender-microstation"}),n=(0,r._P)({controlName:"flag-granular-tender-microstation-for-all"});return e||n}},28465:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"m5.29.765 6.398 5.895V.779h1.246v5.907L19.36.765v6.721H22v9.696h-2.63v5.985l-6.436-5.654v5.719h-1.246v-5.626l-6.39 5.63V17.18h-2.64V7.486H5.29V.765Zm5.46 7.952H3.903v7.234h1.392V13.67l5.453-4.952Zm-4.207 5.498v6.275l5.145-4.532V9.54l-5.145 4.674Zm6.427 1.683V9.535l5.147 4.674v2.973h.007v3.244l-5.154-4.528Zm6.4.053h1.384V8.717H13.96l5.41 4.9v2.334Zm-1.254-8.465V3.595l-4.224 3.891h4.224Zm-7.357 0H6.535V3.595l4.224 3.891Z",clipRule:"evenodd"})}))}},28957:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(21462),i=t(44441),o=t(80865),a=t(16907),l=t(78932),s=t(53669),c=t(67337),u="persistmirrored";function d(){var e=(0,l.g)(),n=(0,a.A)(),t=(0,o._P)({controlName:"flag-persist-mirror-html",default:!0,logFlagToAnalytics:!1}),d=(0,c.A)().container;(0,r.useEffect)(function(){if(!(!e||!t||(null!==(r=s.A.get(u,"array"))&&void 0!==r?r:[]).includes(n))){var r,o=d.openChannel({service:"gcsfiles",skip:function(e){return!e.repl.authorizations.editFileContents.isAuthorized}},function(e){return e.channel.request({persistMirror:{path:i.Dl}}).then(function(e){if(e.ok){var t,r;r=null!==(t=s.A.get(u,"array"))&&void 0!==t?t:[],s.A.set(u,r.concat(n)),o()}}),function(){}});return o}},[d,e,t,n])}},28978:(e,n,t)=>{"use strict";t.d(n,{$:()=>a,C:()=>o});var r=t(75152),i=t(8300),o=function(e){return e.DASHBOARD="DASHBOARD",e.BRANCH="BRANCH",e.CURRENT_BRANCH="CURRENT_BRANCH",e.SETTINGS="SETTINGS",e.COMMIT="COMMIT",e}({}),a=r.ZU.Union([r.ZU.Object({type:r.ZU.Literal("DASHBOARD")}),r.ZU.Object({type:r.ZU.Literal("BRANCH"),branch:i.AR}),r.ZU.Object({type:r.ZU.Literal("CURRENT_BRANCH")}),r.ZU.Object({type:r.ZU.Literal("SETTINGS")}),r.ZU.Object({type:r.ZU.Literal("COMMIT"),hash:r.ZU.String()})])},29323:(e,n,t)=>{"use strict";t.d(n,{_:()=>c});var r=t(29935),i=t(82643),o=t(12584);function a(){var e=(0,o._)(["\n  query FiletreeDownloadZip($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return a=function(){return e},e}var l=(0,t(41114).J1)(a()),s=t(88685);function c(e){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e){var n,t,r;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,null===s.V||void 0===s.V?void 0:s.V.query({query:l,variables:{replId:e}})];case 1:return r=(null==(t=i.sent())?void 0:null===(n=t.data)||void 0===n?void 0:n.repl.__typename)==="Repl"?t.data.repl.url:window.location.pathname,window.open(r+".zip","_blank"),[2]}})})).apply(this,arguments)}},29454:(e,n,t)=>{"use strict";t.d(n,{F:()=>_});var r=t(12694),i=t(1889),o=t(21462),a=t(34951),l=t(72004),s=t(26496),c=t(80865),u=t(37497),d=t(87461),p=t(99500),f=t(56679),h=t(60099),m=t(71713),g=t(961),v=t(96842),w=t(8319),y=t(80469),b=t(45325),S=t(32788),Y=t(49125),A=t(61234),C=t(43974),x=t(35869),k=(0,A.x)({guestNotAllowedInStarter:[C.wp.px(8)]});function _(e){var n=e.openPane,t=e.loading,A=e.sendMessage,C=e.inputRef,_=e.sessionId,D=e.onNewSession,E=e.shouldAutoscrollRef,R=e.waitingOnUserInput,I=e.feedbackButton,F=e.onStatusBarHeightChange,T=(0,s.q4)(),P=(0,v.F)(),L=(0,w.x)(),U=(0,u.K)(),N=U.authorizations,O=U.loading,M=(0,g.i)(),B=M.agentCheckpoints,H=M.loading,z=(0,c._P)({controlName:"flag-freemium-ai-load-shedder"}),W=(0,s.Ff)().transitionReason,G=(0,S.P)(_),V=(0,r._)((0,o.useState)(null),2),j=V[0],Z=V[1];(0,s.hM)(_,function(e){switch(e.type){case l.fqQ.AI_QUOTA_INSUFFICIENT_BUDGET:case l.fqQ.AI_QUOTA_REQUIRES_PAYMENT_METHOD:case l.fqQ.AI_QUOTA_REQUIRES_ACTIVE_SUBSCRIPTION:Z(e)}});var q=(0,s.D2)();if(j)return(0,i.Y)(Y.P,{error:j});if(T)return(0,i.Y)(h.x,{});var K=!(null==N?void 0:N.paidAgent.isAuthorized)&&(null==N?void 0:N.paidAgent.code)===a.JB.InsufficientBudget,$=(null==W?void 0:W.$kind)==="authorizationFailed"&&W.authorizationFailed.code===l.HkE.INSUFFICIENT_BUDGET;if((K||$)&&_)return(0,i.Y)(b.c,{runAgent:function(){return q({sessionId:_,runState:l.g32.AGENT_STATE_RUNNING})}});if(!H&&P&&!(null==B?void 0:B.isUnderQuota))return(0,i.Y)(d.k,{openPane:n});if(P&&z)return(0,i.Y)(p.n,{aiName:s.g$});if(G)return(0,i.Y)(m.j,{onNewSession:D});if(L)return(0,i.Y)(x.S,{css:k.guestNotAllowedInStarter,children:(0,i.Y)(f.c,{aiName:s.g$})});var J=!(null==N?void 0:N.paidAgent.isAuthorized)&&!(null==N?void 0:N.freeAgent.isAuthorized),Q=t||O||H,X=null;return Q?X="Loading...":J&&(X="You do not have access to this feature"),(0,i.Y)(y.W1,{sessionId:_,sendMessage:A,loading:Q,inputRef:C,shouldAutoscrollRef:E,waitingOnUserInput:R,isSubmitDisabled:J||Q,submitDisabledReason:X,feedbackButton:I,onStatusBarHeightChange:F})}},29787:(e,n,t)=>{"use strict";t.d(n,{U:()=>o});var r=t(84789),i=t(80865);function o(){var e=(0,r.a)(),n=(0,i._P)({controlName:"flag-lobby-creation"});return!e&&n}},29824:(e,n,t)=>{"use strict";t.d(n,{JH:()=>eZ,xs:()=>ei,Vc:()=>el,fg:()=>eo,kK:()=>es,$s:()=>ea,GQ:()=>eW,UM:()=>e4,Tp:()=>eX,_k:()=>e_,cF:()=>eF,mj:()=>ex,Jz:()=>eU,i$:()=>ey,tq:()=>eP,uS:()=>ev,kM:()=>eR,gq:()=>em,bu:()=>eS,Ol:()=>ed,om:()=>ec,O6:()=>eA,ik:()=>eE,kW:()=>eG,Rh:()=>ep,Ki:()=>eq,g$:()=>eu,e_:()=>e1});var r=t(29935),i=t(17844),o=t(93629),a=t(12694),l=t(82643),s=t(21462),c=t(68682),u=t(35992),d=t(44370),p=t(12584),f=t(41114),h=t(86997),m=t(51026),g=t(68197),v=t(50175),w=t(40085);function y(){var e=(0,p._)(["\n  fragment DeploymentSessionCurrentUser on CurrentUser {\n    id\n    hasDeploymentRepricing(orgId: $orgId)\n  }\n"]);return y=function(){return e},e}function b(){var e=(0,p._)(["\n  fragment DeploymentSessionHostingDeployment on HostingDeployment {\n    ...TargetHostingDeployment\n    currentBuild {\n      ...CurrentBuild2\n    }\n    inProgressBuild {\n      ...CurrentBuild2\n    }\n  }\n  ","\n  ","\n"]);return b=function(){return e},e}function S(){var e=(0,p._)(["\n  fragment DeploymentAuthorization on ReplAuthorization {\n    isAuthorized\n    code\n    message\n  }\n"]);return S=function(){return e},e}function Y(){var e=(0,p._)(["\n  fragment DeploymentAuthorizations on Repl {\n    id\n    authorizations {\n      createAutoscaleDeployment: createDeployment(\n        provider: cloud_run\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createAutoscaleDeploymentPrivate: createDeployment(\n        provider: cloud_run\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      createRvmDeployment: createDeployment(provider: gce, isPrivate: false) {\n        ...DeploymentAuthorization\n      }\n      createRvmDeploymentPrivate: createDeployment(\n        provider: gce\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      createScheduledDeployment: createDeployment(\n        provider: cron\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createStaticDeployment: createDeployment(\n        provider: static\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createStaticDeploymentPrivate: createDeployment(\n        provider: static\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployAutoscaleDeployment: redeployDeployment(\n        provider: cloud_run\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployAutoscaleDeploymentPrivate: redeployDeployment(\n        provider: cloud_run\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployRvmDeployment: redeployDeployment(\n        provider: gce\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployRvmDeploymentPrivate: redeployDeployment(\n        provider: gce\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployScheduledDeployment: redeployDeployment(\n        provider: cron\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployStaticDeployment: redeployDeployment(\n        provider: static\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployStaticDeploymentPrivate: redeployDeployment(\n        provider: static\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      useDeploymentDebugSummaries {\n        ...DeploymentAuthorization\n      }\n    }\n  }\n  ","\n"]);return Y=function(){return e},e}function A(){var e=(0,p._)(["\n  fragment DeploymentSessionRepl on Repl {\n    id\n    __typename\n    slug\n    config {\n      isVnc\n    }\n    source {\n      release {\n        repl {\n          title\n        }\n      }\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        ...DeploymentSessionHostingDeployment\n      }\n      ... on Error {\n        message\n      }\n    }\n    ...DeploymentAuthorizations\n  }\n  ","\n  ","\n"]);return A=function(){return e},e}function C(){var e=(0,p._)(["\n  query DeploymentSession($replId: String!, $orgId: String) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentSessionRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n    currentUser {\n      ...DeploymentSessionCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}function x(){var e=(0,p._)(["\n  subscription DeploymentSessionBuildDeployActionUpdates(\n    $input: HostingBuildDeployActionUpdatesInput!\n  ) {\n    hostingBuildDeployActionUpdates(input: $input) {\n      ... on HostingBuildDeployLogAction {\n        log\n      }\n      ... on HostingBuildDeployStatusAction {\n        status\n        message\n        debugSummary {\n          ...BuildDebugSummary\n        }\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function k(){var e=(0,p._)(["\n  mutation DeploymentSessionDeployBuild($input: DeployHostingBuild2Input!) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return k=function(){return e},e}function _(){var e=(0,p._)(["\n  mutation DeploymentSessionSendDeploymentLifecycleCommand(\n    $input: SendDeploymentLifecycleCommandInput!\n  ) {\n    sendDeploymentLifecycleCommand(input: $input) {\n      ... on SendDeploymentLifecycleCommandResult {\n        repl {\n          id\n          hostingDeployment {\n            ... on HostingDeployment {\n              ...DeploymentSessionHostingDeployment\n            }\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return _=function(){return e},e}function D(){var e=(0,p._)(["\n  mutation DeploymentSessionCancelInProgressDeploymentsBuild(\n    $input: FailHostingBuildInput!\n  ) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return D=function(){return e},e}var E={},R=(0,f.J1)(y()),I=(0,f.J1)(b(),w.Zc,w.UQ),F=(0,f.J1)(S()),T=(0,f.J1)(Y(),F),P=(0,f.J1)(A(),I,T),L=(0,f.J1)(C(),P,R);function U(e){var n=(0,i._)({},E,e);return m._(L,n)}var N=(0,f.J1)(x(),w.mY),O=(0,f.J1)(k(),w.UQ,w.Zc),M=(0,f.J1)(_(),I),B=(0,f.J1)(D(),w.UQ),H=t(86752),z=t(34951),W=t(52097),G=t(77581),V=t(97302),j=t(16369),Z=t(88685);function q(){return(q=(0,r._)(function(e){var n,t,r,i,o,a,s,c,u,d,p;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(n=e.command,t=e.replId,r=e.buildId,i=e.machineConfigurationId,o=e.maxMachineInstances,!Z.V)throw Error("expected apolloClient to be initialized");return[4,Z.V.mutate({mutation:M,variables:{input:{command:n,replId:t,buildId:r,machineConfigurationId:i,maxMachineInstances:o}}})];case 1:if(null===(a=(u=l.sent()).errors)||void 0===a?void 0:a.length)throw Error(u.errors.map(function(e){return e.message}).join(", "));if((null===(c=u.data)||void 0===c?void 0:null===(s=c.sendDeploymentLifecycleCommand)||void 0===s?void 0:s.__typename)!=="SendDeploymentLifecycleCommandResult")throw Error((null===(p=u.data)||void 0===p?void 0:null===(d=p.sendDeploymentLifecycleCommand)||void 0===d?void 0:d.message)||"An unexpected error occurred while sending command. Please try again or contact support.");return[2]}})})).apply(this,arguments)}function K(){return(K=(0,r._)(function(e){var n,t,r,i,o,a,s,c;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(n=e.buildId,t=e.targetDeploymentId,!Z.V)throw Error("expected apolloClient to be initialized");return[4,Z.V.mutate({mutation:B,variables:{input:{buildId:n,targetDeploymentId:t}}})];case 1:if(null===(r=(a=l.sent()).errors)||void 0===r?void 0:r.length)throw Error(a.errors.map(function(e){return e.message}).join(", "));if((null===(o=a.data)||void 0===o?void 0:null===(i=o.failHostingBuild)||void 0===i?void 0:i.__typename)!=="FailHostingBuildResult")throw Error((null===(c=a.data)||void 0===c?void 0:null===(s=c.failHostingBuild)||void 0===s?void 0:s.message)||"An unexpected error occurred while trying to cancel. Please try again or contact support.");return[2]}})})).apply(this,arguments)}var $=t(91331),J=t(59539),Q=t(73559),X=t(96354),ee=t(4804),en=t(2960),et=t(47606),er=t(16907),ei=(0,d.eU)({}),eo=(0,d.eU)({}),ea=(0,d.eU)({}),el=(0,d.eU)({}),es=(0,d.eU)({});function ec(){return(0,$.h)(eo)}function eu(){return(0,$.h)(ea)}function ed(){return(0,$.h)(el)}function ep(){return(0,$.h)(es)}var ef=(0,d.eU)(void 0),eh=(0,d.eU)(void 0);function em(){return(0,$.h)(eh)}var eg=(0,d.eU)(J.d.Loading);function ev(){return(0,$.h)(eg)}var ew=(0,d.eU)(void 0);function ey(){return(0,$.h)(ew)}var eb=(0,d.eU)(void 0);function eS(){return(0,$.h)(eb)}var eY=(0,d.eU)(void 0);function eA(){return(0,$.h)(eY)}var eC=(0,d.eU)(void 0);function ex(){var e,n,t=(0,$.h)(ef),r=(0,$.h)(eC),i=(0,$.h)(eI),o=(0,$.ob)(eO),l=(0,$.ob)(eK),s=(0,a._)(U({fetchPolicy:"no-cache",onCompleted:o,onError:function(e){l(e.message)}}),1)[0],c=function(e,n){if(!e||!r)return{deploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:z.S4.InsufficientPermissions,message:"Loading"},redeploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:z.S4.InsufficientPermissions,message:"Loading"},isIncludedInSubscription:!1};var i=r.createAutoscaleDeployment,o=r.createAutoscaleDeploymentPrivate,a=r.createRvmDeployment,l=r.createRvmDeploymentPrivate,s=r.createScheduledDeployment,c=r.createStaticDeployment,u=r.createStaticDeploymentPrivate,d=r.redeployAutoscaleDeployment,p=r.redeployAutoscaleDeploymentPrivate,f=r.redeployRvmDeployment,h=r.redeployRvmDeploymentPrivate,m=r.redeployScheduledDeployment,g=r.redeployStaticDeployment,v=r.redeployStaticDeploymentPrivate;switch(e){case z.Q0.Static:return{deploy:n?u:c,redeploy:n?v:g,isIncludedInSubscription:!1};case z.Q0.Cron:return{deploy:s,redeploy:m,isIncludedInSubscription:!1};case z.Q0.CloudRun:return{deploy:n?o:i,redeploy:n?p:d,isIncludedInSubscription:!1};case z.Q0.Gce:var w,y=a.isAuthorized,b=(null==t?void 0:t.__typename)==="Repl"&&(null===(w=t.owner)||void 0===w?void 0:w.__typename)==="Team";return{deploy:n?l:a,redeploy:n?h:f,isIncludedInSubscription:y&&b};case z.Q0.Extension:throw Error("Found unexpected provider");default:(0,W.A)(e)}};return{deployability:c(null==i?void 0:i.provider),getDeployabilityByProvider:c,refetch:function(){if(t)return s({variables:{replId:t.id}})},hasDebugSummariesAuthorization:null!==(n=null==r?void 0:null===(e=r.useDeploymentDebugSummaries)||void 0===e?void 0:e.isAuthorized)&&void 0!==n&&n}}var ek=(0,d.eU)(ee.Sv);function e_(){var e=(0,$.h)(ek),n=(0,s.useCallback)(function(n){return(0,ee._3)(n,e)},[e]);return(0,o._)((0,i._)({},e),{getRvmDeploymentCostDetailsByConfigurationSlug:n})}function eD(e){var n,t,r,o,a,l=(t=(0,i._)({},E,{variables:{replId:e}}),h.I(L,t)),s=l.data,c=l.refetch,u=(null==s?void 0:s.getRepl.__typename)==="Repl"?s.getRepl:null;return{isTeamRepl:(null==u?void 0:null===(r=u.owner)||void 0===r?void 0:r.__typename)==="Team",isReplitOwnedTeamRepl:!!((null==u?void 0:null===(o=u.owner)||void 0===o?void 0:o.id)&&(777914===(n=null===(a=u.owner)||void 0===a?void 0:a.id)||0xe69de0===n||3944703===n||0x1c62260===n)),refetch:c}}function eE(e){return!!eD(e).isTeamRepl}function eR(e){var n=e.replId,t=e.onError,i=e.dotReplitService,o=(0,a._)((0,s.useState)(void 0),2),c=o[0],u=o[1],d=(0,a._)((0,s.useState)(void 0),2),p=d[0],f=d[1],h=eD(n),m=h.isTeamRepl,g=h.isReplitOwnedTeamRepl;return(0,s.useEffect)(function(){if(m&&!g){u(z.Q0.Gce),f(z.Q0.Gce);return}function e(){return(e=(0,r._)(function(){var e,n;return(0,l.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,X.XE)(i)];case 1:if(null===(e=r.sent()).appType)return u(z.Q0.CloudRun),f(z.Q0.CloudRun),[2];if((n=(0,Q.b3)(e.appType))===z.Q0.Extension)return t("Did not recognize template deployment provider"),[2];return u(n),f(n),[3,3];case 2:return r.sent(),t("Something went wrong"),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t,i,m,g]),{activeProvider:c,setActiveProvider:u,recommendedProvider:p}}var eI=(0,d.eU)(void 0);function eF(){return(0,$.h)(eI)}var eT=(0,d.eU)(void 0);function eP(){return(0,$.h)(eT)}var eL=(0,d.eU)(void 0);function eU(){return(0,$.h)(eL)}var eN=(0,d.eU)(null,function(e,n){n(ew,void 0),n(eb,void 0),n(eI,void 0),n(eT,void 0),n(eg,J.d.Ready)}),eO=(0,d.eU)(null,function(e,n,t){var r,i="Repl"===t.getRepl.__typename?t.getRepl:null,o=(null===(r=t.currentUser)||void 0===r?void 0:r.__typename)==="CurrentUser"?t.currentUser:null;i&&o&&n(eC,i.authorizations)}),eM=(0,d.eU)(null,function(e,n,t){var r,i,o,a="Repl"===t.getRepl.__typename?t.getRepl:null,l=(null===(r=t.currentUser)||void 0===r?void 0:r.__typename)==="CurrentUser"?t.currentUser:null;if(a&&l){n(ef,a),n(eh,l),n(eO,t),n(ek,(0,ee.xC)({hasDeploymentRepricing:l.hasDeploymentRepricing})),n(eY,!!a.config.isVnc);var s=a.hostingDeployment;if(s){if("HostingDeployment"!==s.__typename)return n(eL,"Unexpected hosting deployment typename: ".concat(s.__typename));if(n(ew,s.id),n(eI,s.currentBuild),n(eb,s.replitAppSubdomain||(0,V.ER)({replSlug:a.slug,username:null===(o=a.owner)||void 0===o?void 0:o.username})),s.inProgressBuild){n(eT,s.inProgressBuild),n(eg,J.d.Deploying);return}return void n(eg,(0,Q.$0)(s.currentBuild.status))}n(eb,(0,V.ER)({replSlug:a.slug,username:null===(i=a.owner)||void 0===i?void 0:i.username})),n(eg,J.d.Ready)}});function eB(){var e=(0,$.ob)(eM),n=(0,$.ob)(eK);return(0,a._)(U({fetchPolicy:"no-cache",onCompleted:e,onError:function(e){n(e.message)}}),1)[0]}var eH=(0,d.eU)(null,function(e,n,t){if("HostingBuildDeployStatusAction"===t.__typename){var r=e(eg),i=e(eT),o=e(eI),a=t.status;if(r===J.d.Deploying){if(!i){n(eK,"No deployment in progress found");return}n(eT,(0,u.jM)(i,function(e){e.status=a})),a!==z.nH.Success&&a!==z.nH.Failed||(n(eT,void 0),a!==z.nH.Success&&o||n(eI,(0,u.jM)(i,function(e){e.status=a,e.hasImageTag=i.provider!==z.Q0.Static&&a===z.nH.Success})))}else if(r===J.d.ProcessingLifecycleCommand){if(!o){n(eK,"No current build found");return}n(eI,(0,u.jM)(o,function(e){e.status=a}))}n(eg,(0,Q.$0)(a)),t.message&&a===z.nH.Failed&&n(eK,t.message)}}),ez=(0,d.eU)(null);function eW(){return(0,$.h)(ez)}function eG(e){var n=(0,$.AI)(ez),t=(0,en.A)(e);(0,s.useEffect)(function(){return n.subscribe(function(e){e&&t.current(e)})},[n,t])}var eV=(0,d.eU)(function(e){var n,t;switch(e(eg)){case J.d.Deploying:return null===(n=e(eT))||void 0===n?void 0:n.id;case J.d.ProcessingLifecycleCommand:return null===(t=e(eI))||void 0===t?void 0:t.id;default:return}}),ej=(0,d.eU)(null,function(){var e=(0,r._)(function(e,n,t){var r;return(0,l.YH)(this,function(e){return(r=t.data.data)&&(n(eH,r.hostingBuildDeployActionUpdates),n(ez,r.hostingBuildDeployActionUpdates)),[2]})});return function(n,t,r){return e.apply(this,arguments)}}());function eZ(e){var n,t,r,o,a,l,c=e.replId,u=e.orgId;return n=eB(),t=(0,$.ob)(ej),r=(0,$.ob)(eK),(0,s.useEffect)(function(){n({variables:{replId:c,orgId:u}})},[n,c,u]),a={variables:{input:{buildId:null!=(o=(0,$.h)(eV))?o:""}},skip:!o,onData:t,onError:function(e){r(e.message)}},l=(0,i._)({},E,a),g.R(N,l),null}function eq(){var e=(0,er.A)(),n=(0,et.R)(e).orgId,t=eB(),r=(0,$.ob)(eg);return(0,s.useCallback)(function(){return r(J.d.Loading),t({variables:{replId:e,orgId:n}})},[t,r,e,n])}var eK=(0,d.eU)(null,function(e,n,t){n(eL,t)}),e$=(0,d.eU)(null,function(e,n,t){var r,i=t.deployHostingBuild2;if(i){if("DeployHostingBuild2Result"!==i.__typename){n(eK,i.message);return}n(eT,i.build),n(ew,i.targetDeployment.id),n(eb,null!==(r=i.targetDeployment.replitAppSubdomain)&&void 0!==r?r:void 0),n(eg,J.d.Deploying)}}),eJ=(0,d.eU)(null,function(e,n,t){var r,i=t.rollbackHostingBuild;if(i){if("RollbackHostingBuildResult"!==i.__typename){n(eK,i.message);return}n(eT,i.build),n(ew,i.targetDeployment.id),n(eb,null!==(r=i.targetDeployment.replitAppSubdomain)&&void 0!==r?r:void 0),n(eg,J.d.Deploying)}});function eQ(e){var n=e.provider,t=e.ignorePorts;switch(n){case z.Q0.Static:return z.JX.Static;case z.Q0.CloudRun:return z.JX.CloudRun;case z.Q0.Cron:return z.JX.Cron;default:return t?z.JX.Worker:z.JX.Server}}function eX(){var e,n,t,o,u=(0,er.A)(),d=ey(),p=ed(),f=(0,$.h)(ei),h=ec(),m=(0,a._)((e=(0,i._)({},E,void 0),v.n(O,e)),1)[0],g=(0,$.ob)(e$),w=(0,$.ob)(eK),y=(0,$.ob)(eJ),b=(0,$.ob)(eg),S=(0,$.Ou)(eT),Y=eF(),A=(0,a._)((0,H.Bg)(),1)[0];return{deployBuild:(0,s.useCallback)((n=(0,r._)(function(e){var n,t,r,i,o,a,s,v,y,A,C,x,k,_,D,E;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(n=e.envVars,t=e.subdomain,r=e.machineConfigurationId,i=e.maxMachineInstances,o=e.config,a=e.machineJob,s=e.isPrivate,v=e.hasAgentSession,S())return w("Deployment already in progress"),[2];l.label=1;case 1:if(l.trys.push([1,5,,6]),y=o.buildCommand,A=o.runCommand,C=o.publicDir,x=o.ignorePorts,!(k=Y?eQ({provider:null==Y?void 0:Y.provider,ignorePorts:!!x}):o.appType))throw new j.Kb;if(!t)throw new j.kZ;switch(k){case z.JX.Static:if(!(0,V.mU)(C))throw new j.uF;break;case z.JX.Worker:case z.JX.Server:case z.JX.CloudRun:case z.JX.Cron:if(!(0,V.mU)(A))throw new j.kS;if(k===z.JX.Cron){if(!(null==a?void 0:a.crontab)||""===a.crontab)throw new j.f_("Schedule cannot be empty.");if(!(0,c.isValidCron)(a.crontab))throw new j.f_("Invalid schedule. Must be a valid cron expression.");if(!(null==a?void 0:a.timezone)||""===a.timezone)throw new j.xF("Timezone cannot be empty.");if(!(0,G._j)(a.timezone))throw new j.xF("Invalid timezone. Must be valid a timezone abbreviation.")}break;default:(0,W.A)(k)}return b(J.d.Preparing),[4,(0,X.XE)(p)];case 2:return _=l.sent(),[4,(0,X.FR)({buildCommand:y,runCommand:A,appType:k,publicDir:C,ignorePorts:x},_,{dotReplit:p,fs:h,container:f})];case 3:return l.sent(),D=(0,Q.b3)(k),[4,m({variables:{input:{replId:u,targetDeploymentId:d,targetMachineConfigurationId:r,maxMachineInstances:i,commands:{build:y,run:A||""},envVars:n,subdomain:t,provider:D,appType:k,context:"workspace",machineJob:a,isPrivate:s,hasAgentSession:v}},onCompleted:g})];case 4:return l.sent(),[3,6];case 5:throw E=l.sent(),b(J.d.Ready),E;case 6:return[2]}})}),function(e){return n.apply(this,arguments)}),[m,g,w,b,S,d,u,f,h,p,Y]),redeployWithNoNewOptions:(0,s.useCallback)((t=(0,r._)(function(e){var n,t,r,i,o,a,s,c;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(n=e.hasAgentSession,S())return w("Deployment already in progress"),[2];l.label=1;case 1:return l.trys.push([1,4,,5]),b(J.d.Preparing),[4,(0,X.XE)(p)];case 2:if(r=(t=l.sent()).buildCommand,i=t.runCommand,o=t.publicDir,a=t.ignorePorts,!d)throw new j.z7;if(!Y)throw new j.bf;if(!(s=eQ({provider:Y.provider,ignorePorts:!!a})))throw new j.Kb;switch(s){case z.JX.Static:if(!(0,V.mU)(o))throw new j.uF;break;case z.JX.Worker:case z.JX.Server:case z.JX.CloudRun:case z.JX.Cron:if(!(0,V.mU)(i))throw new j.kS;break;default:(0,W.A)(s)}return[4,m({variables:{input:{replId:u,targetDeploymentId:d,commands:{build:r,run:i||""},provider:(0,Q.b3)(s),appType:s,context:"workspace",isPrivate:Y.isPrivate,hasAgentSession:n}},onCompleted:g})];case 3:return l.sent(),[3,5];case 4:throw c=l.sent(),b(J.d.Ready),c;case 5:return[2]}})}),function(e){return t.apply(this,arguments)}),[m,g,w,b,S,d,u,p,Y]),rollbackToPreviousBuild:(0,s.useCallback)((o=(0,r._)(function(e){var n,t,r;return(0,l.YH)(this,function(i){switch(i.label){case 0:if(n=e.rollbackCandidateBuildId,t=e.envVars,S())return w("Deployment already in progress"),[2];i.label=1;case 1:if(i.trys.push([1,3,,4]),!n)throw new j.hX;if(!d)throw new j.z7;return b(J.d.Preparing),[4,A({variables:{input:{targetDeploymentId:d,rollbackCandidateBuildId:n,replId:u,envVars:t}},onCompleted:y})];case 2:return i.sent(),[3,4];case 3:throw r=i.sent(),b(J.d.Ready),r;case 4:return[2]}})}),function(e){return o.apply(this,arguments)}),[A,y,w,b,d,u,S])}}var e0=(0,d.eU)(null,function(){var e=(0,r._)(function(e,n,t){var r,a,s,c,d,p,f,h;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(r=t.args,a=t.replId,s=void 0,(c=r.command)===z.jP.UpdateMachineConfiguration){if(!(d=e(eI)))return n(eK,"No current build found"),[2];if(!r.machineConfigurationId)return n(eK,"No machine configuration found"),[2];(p=(0,Q.oG)(c))&&(n(eI,(0,u.jM)(d,function(e){e.status=p})),n(eg,(0,Q.$0)(p)))}if(c===z.jP.Resume||c===z.jP.Suspend){if(!(f=e(eI)))return n(eK,"No current build found"),[2];s=f.id,(h=(0,Q.oG)(c))&&(n(eI,(0,u.jM)(f,function(e){e.status=h})),n(eg,(0,Q.$0)(h)))}l.label=1;case 1:return l.trys.push([1,3,,4]),[4,function(e){return q.apply(this,arguments)}((0,o._)((0,i._)({},r),{buildId:s,replId:a}))];case 2:return l.sent(),c===z.jP.Destroy&&n(eN),[3,4];case 3:return n(eK,l.sent().message),[3,4];case 4:return[2]}})});return function(n,t,r){return e.apply(this,arguments)}}());function e1(){var e,n=(0,er.A)(),t=(0,$.ob)(e0);return(0,s.useCallback)((e=(0,r._)(function(e){return(0,l.YH)(this,function(r){switch(r.label){case 0:return[4,t({replId:n,args:e})];case 1:return r.sent(),[2]}})}),function(n){return e.apply(this,arguments)}),[t,n])}var e2=(0,d.eU)(null,function(){var e=(0,r._)(function(e,n){var t,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:if(!(t=e(ew)))return n(eK,"No deployment found"),[2];if(!(r=e(eT)))return n(eK,"No deployment in progress found"),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,function(e){return K.apply(this,arguments)}({buildId:r.id,targetDeploymentId:t})];case 2:return o.sent(),[3,4];case 3:return n(eK,o.sent().message),[2];case 4:if(n(eT,void 0),n(eg,J.d.Ready),(i=e(eI))&&(i.status===z.nH.Success||i.status===z.nH.Failed))return[2];return n(eI,(0,u.jM)(r,function(e){e.status=z.nH.Failed})),[2]}})});return function(n,t){return e.apply(this,arguments)}}());function e4(){return(0,$.ob)(e2)}},29992:(e,n,t)=>{"use strict";t.d(n,{SS:()=>A,UI:()=>b,dt:()=>Y});var r=t(29935),i=t(82643),o=t(1889),a=t(82315),l=t(67668),s=t(10274),c=t(6680),u=t(61234),d=t(43974),p=t(78559),f=t(40043),h=t(35869),m=t(79626),g=t(28023),v=(0,u.x)({root:[d.wp.flex.growAndShrink(1),d.wp.px(8),{userSelect:"none"}],header:[{fontSize:c.LU.fontSizeSmall,opacity:.6},d.wp.color.foregroundDimmest,d.wp.truncate],fileName:[d.wp.truncate,d.wp.flex.row]});function w(e){var n=e.height,t=e.active,r=e.match,i=r.directory,a=r.filename,l=e.description;return(0,o.FD)(h.S,{css:v.root,row:!0,gap:8,align:"center",style:{height:n},children:[(0,o.Y)(p.A,{path:a.text,size:16}),(0,o.FD)(h.S,{gap:0,children:[i?(0,o.Y)(h.S,{css:v.header,children:(0,o.Y)(g.e,{text:i.text+"/",highlight:i.ranges,dimmed:!t})}):null,(0,o.FD)(h.S,{row:!0,gap:8,align:"center",children:[(0,o.Y)(h.S,{css:v.fileName,children:(0,o.Y)(g.e,{text:a.text,highlight:a.ranges,dimmed:!t})}),(0,o.Y)(f.EY,{variant:"small",color:"dimmest",children:l})]})]})]})}var y={match:a.fq,forward:!1,tiebreakers:[function(e,n,t){var r=t(e.item),i=t(n.item),o=r.lastIndexOf("/"),a=i.lastIndexOf("/"),l=Array.from(e.positions).filter(function(e){return e>o}).length;return Array.from(n.positions).filter(function(e){return e>a}).length-l},function(e,n,t){return t(e.item).trim().length-t(n.item).trim().length}]};function b(e,n){return S.apply(this,arguments)}function S(){return(S=(0,r._)(function(e,n){var t,r;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,new a.$S(n,y).find(e)];case 1:return t=i.sent().map(function(e){return{path:e.item,score:Math.floor(e.score*m.B.files),ranges:(0,s.WJ)(e.positions)}}),[2,(r=(0,s.hS)({queryLength:e.length}))?t.filter(function(e){return e.score>=r}):t]}})})).apply(this,arguments)}function Y(e){var n=e.ranges,t=e.path,r=(0,l.WP)(t),i=(0,l._6)(t);if(!i)return{filename:{text:r,ranges:n.length?n:void 0}};var o=i.length,a=o+1,s=[],c=[],u=!0,d=!1,p=void 0;try{for(var f,h=n[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;if(m.from<o){s.push({from:m.from,to:Math.min(m.to,o)});var g=m.to-a;if(g<=0)continue;c.push({from:0,to:g});continue}!(m.from<a)&&c.push({from:m.from-a,to:m.to-a})}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}return{filename:{text:r,ranges:c.length?c:void 0},directory:{text:i,ranges:s.length?s:void 0}}}function A(e){var n=e.path,t=e.ranges,r=e.description,i=Y({path:n,ranges:null!=t?t:[]}),a=i.directory?44:32;return{height:a,content:(0,o.Y)(w,{match:i,height:a,description:r})}}},30034:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(62019),i=t(37743),o=t(1833),a=t(17844),l=t(93629),s=t(1889),c=t(21462),u=t(90629),d=t(49705),p=t(43974),f=t(35869),h=t(95570),m=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.state={hasErrored:!1,error:null,errorInfo:null},e}(0,o._)(n,e);var t=n.prototype;return t.componentDidCatch=function(e,n){this.setState({hasErrored:!0,error:e,errorInfo:n}),this.props.handleError(e,n),h.error(e)},t.render=function(){if(this.state.hasErrored){var e,n,t;return(0,s.Y)(f.S,{css:[p.wp.font.code,p.wp.p(16),{whiteSpace:"pre",overflow:"hidden",color:"white"},p.wp.backgroundColor.blurpleDefault,p.wp.height("100%")],children:(0,s.Y)(f.S,{children:null!==(t=null===(n=this.state)||void 0===n?void 0:null===(e=n.error)||void 0===e?void 0:e.stack)&&void 0!==t?t:"An unknown error occurred."})})}return this.props.children},n}(c.Component);function g(e){var n=e.bsod,t=void 0!==n&&n,r=e.sentry,i=void 0===r||r,o=e.handleError,c=e.children,p=e.origin,f=void 0===p?"ErrorBoundary: (no origin provided)":p,h=e.tags,g=void 0===h?{}:h,v=e.extras,w=void 0===v?{}:v,y=(0,d.iO)();return(0,s.Y)(m,{handleError:function(e,n){t?y({error:e,extras:(0,l._)((0,a._)({},w),{errorInfo:n}),componentStack:n.componentStack,tags:(0,l._)((0,a._)({},g),{errorBoundary:!0}),origin:f}):i&&u.v4(function(t){t.setTag("errorBoundary",!0),t.setTags(g),t.setExtra("errorInfo",n),t.setExtras(w),t.setContext("react",{componentStack:n.componentStack}),u.Cp(e)}),o&&o(e,n)},children:c})}},30151:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(46434),i=t(29935),o=t(82643),a=t(21462),l=t(2960),s=t(60990),c=t(94372);function u(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function d(e){var n,t,d=e.fs,p=e.openMultipleFiles,f=e.openMultipleURLs,h=e.waitForFileClose,m=e.isMobileWorkspace,g=void 0!==m&&m,v=(0,l.A)(h),w=(0,a.useCallback)((n=(0,i._)(function(e){var n,t,r;return(0,o.YH)(this,function(i){switch(i.label){case 0:if(n=e.filename,t=e.waitForClose,!g)return[3,2];if(!n.endsWith(".git/COMMIT_EDITMSG"))return p({paths:[n]}),[2];return r=window.prompt("Enter a commit message"),[4,d.writeFile(n,null!=r?r:"")];case 1:case 4:return i.sent(),[2];case 2:if(u(),p({paths:[n]}),!t||!v.current)return[2];return[4,v.current(n)];case 3:return i.sent(),[4,d.flush()]}})}),function(e){return n.apply(this,arguments)}),[d,g,p,v]);(0,s.b)((t=(0,i._)(function(e,n){var t,i,a,l,s,d,h,m,g,v,y,b,S,Y,A,C;return(0,o.YH)(this,function(o){switch(o.label){case 0:t=n.session,i=n.signal,l=(a=e.replspaceApi.init.stream({session:t.from},{signal:i})).reqWritable,s=a.resReadable,d=!1,h=!1,o.label=1;case 1:o.trys.push([1,12,13,18]),g=(0,r._)(s),o.label=2;case 2:return[4,g.next()];case 3:if(!(d=!(v=o.sent()).done))return[3,11];if(!(y=v.value).ok)return[3,10];switch(y.payload.$kind){case"openFile":return[3,4];case"openMultipleFiles":return[3,6];case"openMultipleURLs":return[3,7];case"getSSHToken":return[3,8]}return[3,10];case 4:return[4,w(y.payload)];case 5:return o.sent(),y.payload.waitForClose&&l.write({$kind:"closeFile",filename:y.payload.filename,nonce:y.payload.nonce}),[3,10];case 6:return y.payload.files.length>0&&(u(),p({paths:y.payload.files})),[3,10];case 7:return y.payload.urls.length>0&&(u(),f({urls:y.payload.urls})),[3,10];case 8:return S=(b=y.payload).nonce,Y=b.replId,[4,(0,c.ps)({replId:Y})];case 9:return"success"!==(A=o.sent()).type?l.write({$kind:"sshToken",nonce:S,error:A.message}):l.write({$kind:"sshToken",nonce:S,token:A.data.token,SSHHostname:A.data.ssh_hostname}),[3,10];case 10:return d=!1,[3,2];case 11:return[3,18];case 12:return C=o.sent(),h=!0,m=C,[3,18];case 13:if(o.trys.push([13,,16,17]),!(d&&null!=g.return))return[3,15];return[4,g.return()];case 14:o.sent(),o.label=15;case 15:return[3,17];case 16:if(h)throw m;return[7];case 17:return[7];case 18:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[f,p,w])}},30316:(e,n,t)=>{"use strict";t.d(n,{Ko:()=>p,eJ:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(51026);function s(){var e=(0,i._)(["\n  query GetAgentFreeUsage {\n    currentUser {\n      id\n      aiFreeUsageLimits {\n        ... on UserAiFreeUsageLimitResult {\n          agentCheckpoints {\n            limit\n            usage\n            isUnderQuota\n            quotaExpiresAt\n          }\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(s());function d(e){var n=(0,r._)({},c,e);return a.I(u,n)}function p(e){var n=(0,r._)({},c,e);return l._(u,n)}},30536:(e,n,t)=>{"use strict";t.d(n,{Y:()=>eh,m:()=>eg});var r=t(29935),i=t(17844),o=t(93629),a=t(17459),l=t(12694),s=t(82643),c=t(1889),u=t(21462),d=t(82315),p=t(7990),f=t.n(p),h=t(12101),m=t.n(h),g=t(11646),v=t(9073),w=t(14075),y=t(79071),b=t(28094),S=t(68383),Y=t(27899),A=t(35869),C=/(.+)(?:\S+)?<([^>,]+)[>,]/,x=A.D.span;function k(e){var n=e.author,t=C.exec(n);if(t){var r=t[1],i=t[2];return(0,c.FD)(c.FK,{children:["By ",r,(0,c.FD)("a",{href:"mailto:".concat(i),children:["<",i,">"]})]})}return(0,c.FD)(x,{children:["By ",n]})}var _=t(60147),D=t(67811),E=t(56185),R=t(19915);function I(e){var n=e.isInstalled,t=e.isInQueue;return e.isCurrentAction?(0,c.Y)(E.A,{}):t?(0,c.Y)(_.A,{}):n?(0,c.Y)(R.A,{}):(0,c.Y)(D.A,{})}var F=t(4479),T=t(6620),P=t(65983),L=t(6680),U=t(61234),N=t(62493),O=t(43974),M=t(93682),B=t(26705),H=t(3910),z=t(2527),W=t(40043),G=t(1018),V=t(97003),j=t(32633),Z=A.D.span,q=(0,U.x)({metadataSkeleton:[O.wp.pt(4)],metadataSkeletonVersion:[N.S.foregroundPulse(),O.wp.height(16),O.wp.maxWidth(64),O.wp.borderRadius(4)],metadataSkeletonDescription:[N.S.foregroundPulse(),O.wp.height(16),O.wp.borderRadius(4),O.wp.maxWidth(425)],root:[O.wp.borderRadius(8),O.wp.p(8)],headerTitle:[O.wp.display.flex,O.wp.rowWithGap(8),O.wp.flex.growAndShrink(1)],headerTitleText:[O.wp.display.inline,O.wp.flex.growAndShrink(1),O.wp.overflow("hidden"),O.wp.truncate],headerTitlePills:[O.wp.display.inlineFlex,O.wp.rowWithGap(4),O.wp.flex.shrink(0)],headerButton:[],error:[O.wp.mt(4)],actions:[O.wp.mt(8)],consoleButton:[O.wp.width("calc(50% - ".concat(L.LU.space8,")"))],cancelButton:[O.wp.width("calc(50% - ".concat(L.LU.space8,")"))],actionButton:[O.wp.flex.grow(1),O.wp.flex.shrink(0)]});function K(e){var n=e.title,t=e.content,r=e.isExpanded;return(0,c.FD)(A.S,{gap:2,children:[n?(0,c.Y)(W.EY,{color:"dimmer",children:n}):null,t?(0,c.Y)(W.EY,{maxLines:r?void 0:1,children:t}):null]})}function $(e){var n=e.title,t=e.content;return(0,c.FD)(A.S,{css:q.metadataSkeleton,gap:8,children:[void 0===n||n?(0,c.Y)(A.S,{css:q.metadataSkeletonVersion}):null,void 0===t||t?(0,c.Y)(A.S,{css:q.metadataSkeletonDescription}):null]})}function J(e){var n,t=e.name,r=e.pkg,i=e.isMetadataLoading,o=e.openConsole,a=e.pills,s=(0,P.UK)(),d=(0,T.H_)(null==s?void 0:s.id),p=(0,T.xB)(null==s?void 0:s.id),f=(0,T.BL)(),h=(0,T.n5)(),m=(0,T.D6)(),g=(0,F.A)(r.license),v=(0,u.useMemo)(function(){return!!(null!==f&&f.pkgs.find(function(e){return e.name===r.name}))},[f]),w=(0,u.useMemo)(function(){return h.find(function(e){return e.pkgs.find(function(e){return e.name===r.name})})},[h]),y=h.length>1&&!!w,b=(0,u.useMemo)(function(){return!!d.find(function(e){var n,t;return(null===(n=e.name)||void 0===n?void 0:n.toLowerCase())===(null===(t=r.name)||void 0===t?void 0:t.toLowerCase())})},[d]),S=!!(r.homepageURL||r.license||r.author),Y=(0,u.useMemo)(function(){return!!p.find(function(e){return e.name===r.name})},[p]),C=(0,l._)((0,u.useState)(!1),2),x=C[0],_=C[1],D=(0,T.rD)(),E=(0,T.q3)(),R=(0,T.Gg)();return(0,c.FD)(z.ui,{css:q.root,elevated:!0,children:[(0,c.FD)(A.S,{row:!0,justify:"space-between",children:[(0,c.FD)(W.Y9,{css:q.headerTitle,level:2,variant:"subheadDefault",multiline:!1,children:[(0,c.FD)(Z,{css:q.headerTitleText,children:[null!=t?t:r.name,r.version?(0,c.FD)(W.EY,{color:"dimmer",children:["@",r.version]}):null]}),a?(0,c.Y)(A.S,{css:q.headerTitlePills,children:a}):null]}),S?(0,c.Y)(B.K0,{css:q.headerButton,alt:"Show more info",tooltipBehavior:"hidden",onClick:function(){return _(function(e){return!e})},children:(0,c.Y)(G.A,{rotate:90*!!x})}):null]}),(0,c.Y)(A.S,{gap:4,children:void 0!==i&&i?(0,c.Y)($,{title:!1}):(0,c.FD)(c.FK,{children:[(0,c.Y)(K,{content:null!==(n=r.description)&&void 0!==n?n:"This package has no description.",isExpanded:!0}),r.homepageURL&&x?(0,c.Y)(K,{content:(0,c.Y)("a",{href:r.homepageURL,rel:"noreferrer noopener",target:"_blank",children:r.homepageURL}),isExpanded:x}):null,g&&x?(0,c.Y)(K,{content:g,isExpanded:x}):null,r.author&&x?(0,c.Y)(K,{content:(0,c.Y)(k,{author:r.author}),isExpanded:x}):null]})}),Y?(0,c.Y)(H.N,{css:q.error,colorway:"negative",icon:(0,c.Y)(j.A,{}),text:"Couldn't ".concat(b?"uninstall":"install"," package. See Console for details, or try again.")}):null,(0,c.Y)(A.S,{css:q.actions,row:!0,gap:8,children:Y?(0,c.FD)(c.FK,{children:[(0,c.Y)(M.$n,{css:q.consoleButton,text:"Console",onClick:function(){o()},disabled:v||y,colorway:"primary",iconLeft:(0,c.Y)(V.A,{})}),(0,c.Y)(M.$n,{css:q.actionButton,text:"Try Again",onClick:function(){(null==s?void 0:s.id)&&(m(s.id,[r]),b?E({id:s.id,pkg:r}):D({id:s.id,pkg:r}))},loading:v||y,colorway:b?"red":void 0,variant:b?"outlined":void 0,iconLeft:(0,c.Y)(I,{isInstalled:b,isInQueue:y,isCurrentAction:v})})]}):(0,c.FD)(c.FK,{children:[(0,c.Y)(M.$n,{css:q.actionButton,text:v?(null==f?void 0:f.kind)===T.Vr.Install?"Installing":"Removing":y?(null==w?void 0:w.kind)===T.Vr.Install?"Waiting to install":"Waiting to remove":b?"Remove":"Install",onClick:function(){(null==s?void 0:s.id)&&(b?E({id:s.id,pkg:r}):D({id:s.id,pkg:r}))},loading:v||y,colorway:b?"red":void 0,variant:b?"outlined":void 0,iconLeft:(0,c.Y)(I,{isInstalled:b,isInQueue:y,isCurrentAction:v})}),y?(0,c.Y)(M.$n,{css:q.cancelButton,text:"Cancel",onClick:function(){r.name&&R(r.name)},disabled:v,loading:v}):null]})})]})}var Q=t(96866),X=t(67337),ee=t(58196),en=t(54468),et=t(95949),er=t(18063),ei=t(41845),eo=t(12966),ea=t(37407),el=t(4989),es=t(45693),ec=(0,U.x)({root:[O.wp.flex.column,O.wp.flex.growAndShrink(1)],headerRoot:[O.wp.border({color:L.LU.outlineDimmest,width:1,direction:"bottom"})],header:[O.wp.width("100%"),O.wp.maxWidth(Y.Vq),O.wp.colWithGap(8),O.wp.p(8),{margin:"0 auto"},O.wp.rowWithGap(8),O.wp.p(8),O.wp.align.center],searchInput:[O.wp.flex.growAndShrink(1)],select:[O.wp.minWidth(160)],resultsRoot:[O.wp.flex.growAndShrink(1),O.wp.overflow("auto")],resultsScroller:[O.wp.width("100%"),O.wp.maxWidth(600),O.wp.flex.growAndShrink(1),O.wp.p(8),{margin:"0 auto"},O.wp.overflow("auto")]});function eu(e){var n,t,o=e.query,a=e.openConsole,d=e.computePills,p=(0,l._)((0,u.useState)([]),2),f=p[0],h=p[1],m=(0,u.useRef)(0),g=(0,l._)((0,u.useState)(!1),2),w=g[0],y=g[1],b=(n=(0,X.A)(),t=(0,P.Ot)(),(0,u.useCallback)(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t();return(null==o?void 0:o.id)?(0,ee.N)(o.id).search((0,i._)({id:o.id,query:e,services:n},r)):[]},[]));return((0,u.useEffect)(function(){if(""===o.trim()){h([]);return}y(!0)},[o]),(0,v.A)(function(){var e,n=++m.current;(e=(0,r._)(function(){var e;return(0,s.YH)(this,function(t){switch(t.label){case 0:return[4,b(o)];case 1:return e=t.sent(),n===m.current&&(h(e),y(!1)),[2]}})}),function(){return e.apply(this,arguments)})()},[o],500),w)?(0,c.Y)(Y.Gu,{}):0===f.length?(0,c.Y)(Y.pp,{children:o?"No results were found.":"Start typing above to see results."}):(0,c.Y)(A.S,{gap:8,children:f.map(function(e){var n,t=null!==(n=null==d?void 0:d(e))&&void 0!==n?n:[];return(0,c.Y)(J,{pkg:e,openConsole:a,pills:t},e.name)})})}function ed(e){return e.length>0&&m()(e)}function ep(e){var n,t,r,i,o,a=e.query,l=(0,b.A)(),s=(0,w.G)().modules,p=(0,u.useMemo)(function(){return new Set(null==s?void 0:s.map(function(e){return e.id}))},[s]),h=(t=(n={modules:null!==(o=null==l?void 0:l.fullModules)&&void 0!==o?o:[],query:a}).modules,r=n.query,i=(0,u.useMemo)(function(){return new d.Rk(t,{selector:function(e){return e.name},tiebreakers:[function(e,n){var t=2===e.item.displayVersion.split(".").length?"".concat(e.item.displayVersion,".0"):e.item.displayVersion,r=2===n.item.displayVersion.split(".").length?"".concat(n.item.displayVersion,".0"):n.item.displayVersion;return ed(t)||ed(r)?!ed(r)&&ed(t)?1:!ed(t)&&ed(r)||f()(t,r)?-1:+!!f()(r,t):0}]})},[t]),(0,u.useMemo)(function(){return r?i.find(r).map(function(e){return e.item}):t},[i,t,r]));return 0===(h=(0,u.useMemo)(function(){return h.sort(function(e,n){var t=e.internal||e.demoted,r=n.internal||n.demoted;return t&&!r?1:!t&&r?-1:0})},[h])).length?(0,c.Y)(Y.pp,{children:a?"No results were found.":"Start typing above to see results."}):(0,c.Y)(A.S,{gap:8,children:h?h.map(function(e){var n="".concat(e.id,"-").concat(e.resolutionPath,"-").concat(e.version),t=p.has(e.id);return(0,c.Y)(A.S,{row:!0,align:"center",justify:"space-between",children:(0,c.Y)(S.A,{module:e,isInstalled:t,defaultExpanded:!1})},n)}):null})}function ef(e){var n=e.onBack,t=e.initialQuery,r=e.setQuery,i=e.categories,o=e.category,a=e.setCategory,s=e.children,d=e.disableCategorySelection,p=e.searchPlaceholder,f=(0,l._)((0,u.useState)(null!=t?t:""),2),h=f[0],m=f[1],g=(0,u.useDeferredValue)(h);return(0,u.useEffect)(function(){r(g)},[g,r]),(0,c.FD)(A.S,{css:ec.root,children:[(0,c.Y)(A.S,{css:ec.headerRoot,children:(0,c.FD)(A.S,{css:ec.header,children:[(0,c.Y)(B.K0,{alt:"Back",onClick:function(){return n()},children:(0,c.Y)(el.A,{})}),!d&&i&&i.length>0?(0,c.Y)(eo.l,{items:i,css:ec.select,"aria-label":"Change search context",selectedKey:o,onSelectionChange:function(e){var n=null==i?void 0:i.find(function(n){return n.value===e});if(!n)throw Error("Expected config");m(""),a(n.value)},children:function(e){return(0,c.Y)(et.nh,{id:e.value,label:e.label})}}):null,(0,c.Y)(A.S,{css:ec.searchInput,children:(0,c.Y)(ei.I,{value:h,onChange:function(e){m(e.target.value)},onClear:function(){return m("")},placeholder:void 0===p?"Search packages...":p,autoFocus:!0})})]})}),(0,c.Y)(A.S,{css:ec.resultsRoot,children:(0,c.Y)(A.S,{css:ec.resultsScroller,children:s})})]})}function eh(e){var n=e.onBack,t=e.initialCategory,r=e.openConsole,s=(0,a._)(e,["onBack","initialCategory","openConsole"]),d=(0,Q.J)().configs,p=(0,l._)((0,u.useState)(""),2),f=p[0],h=p[1],m=(0,u.useMemo)(function(){return d.filter(function(e){return"nix"!==e.id}).map(function(e){return{value:e.id,label:e.name.replace(/\s*packager\s*.*$/,"")}})},[d]),g=(0,l._)((0,u.useState)(null!=t?t:m[0].value),2),v=g[0],w=g[1],y=(0,u.useMemo)(function(){return d.find(function(e){return e.id===v})},[v,d]);return(0,c.Y)(ef,(0,o._)((0,i._)({categories:m,initialQuery:f,setQuery:h,onBack:n,setCategory:function(e){h(""),w(e)},category:v},s),{children:(0,c.Y)(en.A,{config:y,children:(0,c.Y)(eu,{query:f,openConsole:r})})}))}var em=[{value:"Modules",label:"Modules"},{value:"Packages",label:"Packages"}];function eg(e){var n=e.onBack,t=e.initialCategory,r=void 0===t?em[0].value:t,s=e.openConsole,d=(0,a._)(e,["onBack","initialCategory","openConsole"]),p=(0,Q.J)().configs,f=(0,u.useMemo)(function(){return p.find(function(e){return"nix"===e.id})},[p]),h=(0,l._)((0,u.useState)(""),2),m=h[0],v=h[1],w=(0,l._)((0,u.useState)(r),2),b=w[0],S=w[1];return((0,y.r)(g.AZ.NIX_MODULE_SEARCH_VIEWED,{},function(){return"Modules"===b},[]),(0,y.r)(g.AZ.NIX_MODULE_SEARCH_USED,{query:m},function(){return!!(m&&"Modules"===b)},[m]),f)?(0,c.Y)(ef,(0,o._)((0,i._)({categories:em,initialQuery:m,setQuery:v,onBack:n,setCategory:function(e){v(""),S(e)},category:b,searchPlaceholder:"Modules"===b?"Search modules...":void 0},d),{children:"Packages"===b?(0,c.Y)(en.A,{config:f,children:(0,c.Y)(eu,{query:m,openConsole:s,computePills:function(e){var n;return null!==(n=e.present)&&void 0!==n&&n?[(0,c.Y)(ea.m_,{tooltip:"Cached packages are faster to install in your App",children:(0,c.Y)(er.a,{text:"cached",iconLeft:(0,c.Y)(es.A,{}),colorway:"green"})},"cached-".concat(e.name,"-").concat(e.version))]:[]}})}):(0,c.Y)(ep,{query:m})})):null}},30734:(e,n,t)=>{"use strict";t.d(n,{v:()=>s});var r=t(17844),i=t(21462),o=t(16907),a=t(45474),l=t(19906);function s(){var e=(0,o.A)(),n=(0,a.A)("fileTree").trackTimeToLoadFileStart;return(0,i.useCallback)(function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(t);var o={action:"select",source:"filetree"};i.newTab?o={action:"newTab",source:"filetree"}:i.newPane&&(o={action:"newPane",source:"filetree"}),(0,l.A)((0,r._)({replId:e},o))},[e,n])}},30778:(e,n,t)=>{"use strict";t.d(n,{Js:()=>A,LH:()=>y,_y:()=>b});var r=t(83846),i=t(17844),o=t(93629),a=t(17459),l=t(1889),s=t(9907),c=t(95758),u=t(6680),d=t(61234),p=t(22498),f=t(43974),h=t(35869),m=(0,p.v)(["fontSize","gap","xPadding"]),g=m.cssVars,v=m.styleTokens,w=(0,d.x)({chord:[f.wp.display.inlineFlex,f.wp.rowWithGap(12)],shortcut:[f.wp.display.inlineFlex,{flexDirection:"row",fontSize:v.fontSize,"& > div":{marginRight:v.gap},"& > div:last-child":{marginRight:0}}]});function y(e,n){return((0,c.s4)(e)?e:[e]).map(function(e){return(0,c.Ft)(e).map(function(e){var t;return null!==(t=Y(n)[e])&&void 0!==t?t:e.toUpperCase()}).join("")}).join(" ")}function b(e){if((0,c.s4)(e.keyCombo))return(0,l.Y)(h.S,{"data-testid":"Keybinding:".concat(e.keyCombo.join(" ")),css:w.chord,children:e.keyCombo.map(function(n,t){return(0,l.Y)(b,(0,o._)((0,i._)({},e),{keyCombo:n}),t)})});var n,t=(0,c.Ft)(e.keyCombo),a=null!==(n=e.fontSize)&&void 0!==n?n:e.small?12:14,s=e.hideBorder?0:Math.round(.2*a);return(0,l.Y)(h.S,{"data-testid":"Keybinding:".concat(e.keyCombo),css:w.shortcut,style:(0,r._)({},g.gap,s+"px"),title:e.keyCombo,children:t.map(function(n){var t;return(0,l.Y)(A,{text:n,hideBorder:e.hideBorder,fontSize:e.fontSize,isActive:null==e?void 0:null===(t=e.match)||void 0===t?void 0:t.includes(n.toLowerCase())},n)})})}var S=(0,d.x)({root:[f.wp.color.foregroundDimmest,f.wp.position.relative,f.wp.justify.center,{fontSize:"inherit",textAlign:"center",textTransform:"capitalize",paddingLeft:v.xPadding,paddingRight:v.xPadding},f.wp.font.default],border:[f.wp.coverContainer,f.wp.borderRadius(4),{opacity:.5,border:"1px solid",borderColor:u.LU.outlineStrongest}],text:[{fontSize:v.fontSize}]}),Y=function(e){return{Ctrl:e?"⌃":"Ctrl",Cmd:e?"⌘":"Cmd",Alt:e?"⌥":"Alt",Shift:e?"⇧":"Shift",Enter:e?"Return":"Enter",ArrowLeft:"←",ArrowRight:"→",ArrowUp:"↑",ArrowDown:"↓"," ":"Space"}};function A(e){var n,t,i,o=e.text,c=e.small,d=e.isActive,p=void 0!==d&&d,f=e.hideBorder,m=void 0!==f&&f,v=(0,a._)(e,["text","small","isActive","hideBorder"]),w=(0,s.vm)(),y=null!==(n=v.fontSize)&&void 0!==n?n:void 0!==c&&c?12:14,b=Math.round(1.4*y),A=Math.round(y*(m?.1:.2)),C=(t={},(0,r._)(t,g.fontSize,y+"px"),(0,r._)(t,g.xPadding,A+"px"),(0,r._)(t,"height",b),(0,r._)(t,"minWidth",m?void 0:b),t);p&&(C.fontWeight=u.LU.fontWeightMedium,C.color=u.LU.foregroundDefault);var x={borderColor:u.LU.foregroundDefault,opacity:1};return(0,l.FD)(h.S,{css:S.root,style:C,children:["string"==typeof o?(0,l.Y)(h.S,{css:S.text,children:null!==(i=Y(w)[o])&&void 0!==i?i:o}):o,m?null:(0,l.Y)(h.S,{css:S.border,style:p?x:void 0})]})}},31159:(e,n,t)=>{"use strict";t.d(n,{q:()=>r});var r=t(49069).sj.define({combine:function(e){var n=e.filter(Boolean);return{onDismiss:function(e){return n.forEach(function(n){var t;return null===(t=n.onDismiss)||void 0===t?void 0:t.call(n,e)})},onRequestIgnoredBackendOnly:function(e){return n.forEach(function(n){var t;return null===(t=n.onRequestIgnoredBackendOnly)||void 0===t?void 0:t.call(n,e)})},onRequestFirstEmit:function(e){return n.forEach(function(n){var t;return null===(t=n.onRequestFirstEmit)||void 0===t?void 0:t.call(n,e)})},onRequestEndedWithNoSuggestion:function(e){return n.forEach(function(n){var t;return null===(t=n.onRequestEndedWithNoSuggestion)||void 0===t?void 0:t.call(n,e)})},onRequestCompletelyPresented:function(e){return n.forEach(function(n){var t;return null===(t=n.onRequestCompletelyPresented)||void 0===t?void 0:t.call(n,e)})},onSuggestionExplicitlyDismissed:function(e,t){return n.forEach(function(n){var r;return null===(r=n.onSuggestionExplicitlyDismissed)||void 0===r?void 0:r.call(n,e,t)})},onSuggestionAccepted:function(e,t){return n.forEach(function(n){var r;return null===(r=n.onSuggestionAccepted)||void 0===r?void 0:r.call(n,e,t)})}}}})},31165:(e,n,t)=>{"use strict";t.d(n,{A:()=>u});var r=t(1889),i=t(45771),o=t(6680),a=t(61234),l=t(43974),s=(0,i.AH)([l.wp.display.flex,l.wp.align.center,l.wp.justify.center,l.wp.backgroundColor.accentNegativeDefault,l.wp.minWidth(16),l.wp.height(16),l.wp.color.white,l.wp.position.absolute,l.wp.fontSize(o.LU.fontSizeSmall),{borderRadius:"10px",transform:"translate(50%, -50%)",padding:"2px 3px"}]),c=(0,a.x)({root:l.wp.display.flex,unreadIndicator:[l.wp.width(5),l.wp.height(5),l.wp.backgroundColor.redDefault,l.wp.position.absolute,{borderRadius:"10px",transform:"translate(8px, -1px)"}],count:s,countOverflow:[s,{transform:"translate(25%, -50%)"}]});function u(e){var n=e.unreadDot,t=e.size,i=void 0===t?12:t,o=e.count,a=void 0===o?null:o,l=a&&a>99,s=l?"99+":null==a?void 0:a.toString();return(0,r.FD)("span",{css:c.root,children:[(0,r.Y)("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",children:(0,r.Y)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})}),n?(0,r.Y)("div",{css:c.unreadIndicator}):null,!!a&&(0,r.Y)("div",{css:l?c.countOverflow:c.count,children:s})]})}},31195:(e,n,t)=>{"use strict";t.d(n,{C5:()=>w,DO:()=>M,G:()=>R,GS:()=>N,Je:()=>P,NF:()=>h,NT:()=>T,No:()=>k,Rp:()=>d,Sh:()=>E,T1:()=>S,TJ:()=>b,VW:()=>A,WM:()=>U,Yb:()=>v,ZH:()=>s,b8:()=>y,gb:()=>x,k4:()=>I,kR:()=>F,mN:()=>L,sC:()=>H,tH:()=>O,uu:()=>B,xP:()=>l,yh:()=>f});var r=t(44370),i=t(46762),o=t(45771),a=t(6680),l=[1,2,4,8],s=(0,r.eU)(i.jc),c=(0,r.eU)(function(e){var n=e(s),t=n.costPerComputeUnitUsd*n.computeUnitsPerCpu;return[t,2*t,4*t,8*t]}),u=[[0,3],[0,4],[2,5],[3,6]],d=l.length-1,p=1/(2*d),f=(0,r.eU)(2),h=(0,r.eU)(function(e){return l[e(f)]}),m=(0,r.eU)(function(e){return e(c)[e(f)]}),g=(0,r.eU)(function(e){return u[e(f)]}),v=(0,r.eU)(0),w=(0,r.eU)(function(e){var n=e(D)[0]/d,t=e(D)[1]/d,r=0,i=0;return e(v)<n&&(r=(n-e(v))/p,i=n-p),e(v)>t&&(r=(e(v)-t)/p,i=t+p),{overage:r,point:i}}),y=(0,r.eU)(0),b=(0,r.eU)(0),S=[.5,1,2,4,8,16,32],Y=[[0,1],[0,1],[0,2],[0,3],[1,3],[2,3],[3,3]],A=S.length-1,C=1/(2*A),x=(0,r.eU)(4),k=(0,r.eU)(function(e){return S[e(x)]}),_=(0,r.eU)(function(e){var n=e(s).costPerComputeUnitUsd;return e(L)*n}),D=(0,r.eU)(function(e){return Y[e(x)]}),E=(0,r.eU)(0),R=(0,r.eU)(function(e){var n=e(g)[0]/A,t=e(g)[1]/A,r=0,i=0;return e(E)<n&&(r=(n-e(E))/C,i=n-C),e(E)>t&&(r=(e(E)-t)/C,i=t+C),{overage:r,point:i}}),I=(0,r.eU)(null,function(e,n){var t=e(f),r=e(D)[0],i=e(D)[1];t<r&&n(f,r),t>i&&n(f,i)}),F=(0,r.eU)(null,function(e,n){var t=e(x),r=e(g)[0],i=e(g)[1];t<r&&n(x,r),t>i&&n(x,i)}),T=(0,r.eU)(function(e){var n=e(D)[0]/d,t=e(D)[1]/d,r=e(g)[0]/A,i=e(g)[1]/A;return e(v)<n?(n-e(v))/p:e(v)>t?(e(v)-t)/p:e(E)<r?(r-e(E))/C:e(E)>i?(e(E)-i)/C:0}),P=(0,r.eU)(function(e){var n;return(1e5*(n={ramCost:e(_),cpuCost:e(m)}).ramCost+1e5*n.cpuCost)/1e5}),L=(0,r.eU)(function(e){var n=e(s).computeUnitsPerRam;return e(k)*n}),U=(0,r.eU)(function(e){var n=e(s).computeUnitsPerCpu;return e(h)*n}),N=(0,r.eU)(function(e){return e(L)+e(U)}),O=function(e){return e.None="0ms",e.Normal="200ms",e}({}),M=["ArrowLeft","ArrowRight","Home","End"],B=(0,o.AH)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),H=(0,o.AH)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:a.LU.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(a.LU.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}})},31208:(e,n,t)=>{"use strict";t.d(n,{N0:()=>O,Pt:()=>M,No:()=>P,Tb:()=>N});var r=t(12694),i=t(86105),o=t(4124),a=t(21462),l=t(23099),s=t.n(l),c=t(44370),u=t(68820),d=t(17844),p=t(12584),f=t(41114),h=t(86997);function m(){var e=(0,p._)(["\n  fragment WorkspaceToolPanesRepl on Repl {\n    workspaceCta\n    authorizations {\n      editFileContents {\n        isAuthorized\n      }\n      editPermissions {\n        isAuthorized\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    config {\n      isServer\n      isVnc\n    }\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,p._)(["\n  query WorkspaceToolPanes($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceToolPanesRepl\n      }\n    }\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var v={},w=(0,f.J1)(m()),y=(0,f.J1)(g(),w),b=t(80865),S=t(16907),Y=t(78932),A=t(93415),C=t(96866),x=t(44044),k=t(25026),_=t(71508),D=t(63521),E=t(51895),R=t(33977),I=t(99667),F=(0,c.eU)([]),T=(0,u.mg)(F,function(e){return new Set(e.map(function(e){return e.type}))},s());function P(){return(0,I.h)(T)}var L=["shell","git","diff","envEditor","deployments","database","neon","ghostwriterChat","preferences","docs","multiplayer","objectStorage","adminPanel","ssh","webview","problems","dependencies","project","workflows","integrations","runnerOutput","networking"],U=["agentChat","ghostwriterChat","deployments"];function N(){return(0,I.h)(F)}function O(){return(0,I.Ou)(F)}function M(){var e,n,t,i,l,s,c,u=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).supportsAgent,p=(0,I.ob)(F),f=(l=(null==(i=(n={variables:{replId:(0,S.A)()}},t=(0,d._)({},v,n),h.I(y,t)).data)?void 0:null===(e=i.repl)||void 0===e?void 0:e.__typename)==="Repl"?null==i?void 0:i.repl:null)?{repl:l,currentUser:(null==i?void 0:i.currentUser)||null}:{repl:null,currentUser:null},m=f.repl,g=f.currentUser,w=(0,o.useRouter)(),R=(0,A.m5)(),T=(0,b._P)({controlName:"flag-neon-databases",logFlagToAnalytics:!1}),P=(0,b._P)({controlName:"flag-postgres-db-god-mode",logFlagToAnalytics:!1}),N=!!(null==m?void 0:null===(c=m.authorizations)||void 0===c?void 0:null===(s=c.viewDeploymentConfig)||void 0===s?void 0:s.isAuthorized),O=(0,b._P)({controlName:"flag-object-storage-pane"}),M=(0,b._P)({controlName:"flag-doc-your-devs"}),B=(0,b._P)({controlName:"flag-ws-guided-tour"}),H=(0,x.Q)().hasProject,z=(0,_.oR)(),W=(0,D.A)().isTutorial,G=(0,C.J)().configs.some(function(e){return"nix"!==e.id}),V=(0,k.uE)(),j=(null==g?void 0:g.isAdmin)||!!w.query.debug,Z=(0,E.Vv)(),q=(0,Y.g)();(0,a.useEffect)(function(){var e=R&&(null==m?void 0:m.authorizations.editPermissions.isAuthorized)?[{type:"multiplayer"}]:[];if(m&&g){var n=!q,t=!q,i=P||!q&&T,o=[[{type:"shell"},!0],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs",data:{url:null}},!0],[{type:"webview"},!0],[{type:"vnc"},n],[{type:"runnerOutput"},!q],[{type:"git"},!0],[{type:"dependencies"},!0],[{type:"envEditor"},!0],[{type:"debugger"},!0],[{type:"tutorial"},W],[{type:"database"},t],[{type:"neon"},i],[{type:"replAuth"},G],[{type:"preferences"},!0],[{type:"adminPanel"},j],[{type:"deployments"},N],[{type:"ssh"},!0],[{type:"ghostwriterChat"},!0],[{type:"searchReplace"},!0],[{type:"extensionStore",data:{page:"store"}},!0],[{type:"extensionDevtools"},z],[{type:"problems"},!0],[{type:"networking"},!0],[{type:"objectStorage"},O],[{type:"workflows"},!q],[{type:"project"},H],[{type:"devdocs"},M],[{type:"integrations"},!0],[{type:"workspaceTourGuide"},B&&j],[{type:"agentProgress"},!!u],[{type:"agentChat"},!!(u&&!R)]],a=!0,l=!1,s=void 0;try{for(var c,d=V[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var f=c.value;o.push([{type:"extension",data:{extensionId:f.extension.extensionId,installationId:f.extension.installationId,name:f.name||f.extension.manifest.name,icon:f.icon||f.extension.manifest.icon,baseUrl:f.extension.baseUrl,path:f.handler}},!0])}}catch(e){l=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw s}}var h=!0,v=!1,w=void 0;try{for(var y,b=o[Symbol.iterator]();!(h=(y=b.next()).done);h=!0){var S=(0,r._)(y.value,2),Y=S[0];S[1]&&(!R||L.includes(Y.type))&&e.push(Y)}}catch(e){v=!0,w=e}finally{try{h||null==b.return||b.return()}finally{if(v)throw w}}p(e.map(function(e){return{title:Z.getTitle(e),pane:e}}).sort(function(e,n){return U.includes(e.pane.type)?-1:U.includes(n.pane.type)?1:e.title.localeCompare(n.title)}).map(function(e){return e.pane}))}},[p,R,m,g,G,P,T,W,j,N,z,V,Z,O,q,H,M,B,u])}(0,c.eU)(function(e){var n=Array.from(e(R.Jp).values()).flat(),t=e(R.tx),r=(0,i._)(n).concat((0,i._)(t)).sort(function(e,n){return n.lastActiveAt-e.lastActiveAt}),o=[],a=!0,l=!1,s=void 0;try{for(var c,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=function(){var e=c.value;return 8===o.length?"break":(0,E.Dx)(e.pane.type)||"commands"===e.pane.type?"continue":void(-1===o.findIndex(function(n){return n.type===e.pane.type})&&o.push(e.pane))}();if("break"===d)break}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return o})},31255:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(['\n  query CompleteCodeEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-complete-engine")\n      hasOverride: gate(feature: "flag-code-suggestion-engine")\n    }\n  }\n']);return l=function(){return e},e}var s={},c=(0,o.J1)(l()),u=t(33338),d=t(80481);function p(){var e,n,t,i,o=(0,d.gc)("completeCodeEngine").preferences,l=(e=(0,r._)({},s,void 0),a.I(c,e)).data,p=null==o?void 0:o.completeCodeEngine;if(p&&(null==l?void 0:null===(n=l.currentUser)||void 0===n?void 0:n.hasOverride)&&u.Qu.has(p))return{engine:p,settings:u.W_[p]};var f=null!==(i=null==l?void 0:null===(t=l.currentUser)||void 0===t?void 0:t.defaultEngine)&&void 0!==i?i:u.T3;return{engine:f,settings:u.W_[f]}}},31425:(e,n,t)=>{"use strict";t.d(n,{UC:()=>G,ou:()=>j,Y9:()=>N,Bm:()=>M,Yw:()=>z,CK:()=>q,Gp:()=>Z,af:()=>V,KA:()=>K});var r=t(29935),i=t(82643),o=t(1889),a=t(4124),l=t.n(a),s=t(21462),c=t(48686),u=t(67668),d=t(11597),p=t(80865),f=t(70906),h=t(2904);function m(){return(m=(0,r._)(function(e,n){var t,r,o,a,l;return(0,i.YH)(this,function(i){return t=(0,u.P7)(e),r=(0,u.WP)(e),o=new Blob([n.toBuffer()],{type:t}),(a=document.createElement("a")).download=r,a.href=l=window.URL.createObjectURL(o),a.style.display="none",document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a),URL.revokeObjectURL(l)},1e4),[2]})})).apply(this,arguments)}var g=t(11465),v=t(93415),w=t(67337),y=t(24948),b=t(23718),S=t(71043),Y=t(51133),A=t(51895),C=t(49937),x=t(49259),k=t(45771),_=t(6680),D=t(43974),E=t(35869),R=t(81879),I=t(85280),F=t(67811),T=t(79571),P=t(79812),L=t(19915),U=(0,k.AH)([D.wp.height(28),D.wp.flex.row,D.wp.align.center,{borderBottom:"1px solid ".concat(_.LU.backgroundHigher),opacity:.8,":hover":{opacity:1}}]);function N(e){return"/replEnvironmentDesktop"!==l().pathname?null:(0,o.Y)(E.S,{css:U,children:e.children})}var O=(0,k.AH)([D.wp.flex.row,D.wp.align.center,D.wp.flex.growAndShrink(1),D.wp.overflowX("auto"),D.wp.height("100%"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}]);function M(e){return(0,o.Y)(E.S,{css:O,children:e.children})}var B=(0,k.AH)([D.wp.flex.row,D.wp.align.center,D.wp.height("100%")]),H=(0,k.AH)([D.wp.flex.row,D.wp.align.center,D.wp.height("100%"),D.wp.px(2)]);function z(e){return(0,o.Y)(E.S,{css:B,children:(0,o.Y)(E.S,{css:H,children:e.children})})}var W=(0,k.AH)([D.wp.flex.growAndShrink(1),D.wp.position.relative,D.wp.overflow("hidden"),D.wp.borderRadius(0,0,8,8)]);function G(e){return(0,o.Y)(E.S,{css:[W,e.children&&D.wp.center],children:e.children})}function V(e){return{type:(0,A.QY)({path:e}),data:{path:e}}}function j(e){var n=e.path,t=e.performPaneOperation,r=e.children,i=(0,s.useCallback)(function(e){t({operation:"replace",pane:V(e)})},[t]);return(0,o.FD)(N,{children:[(0,o.Y)(M,{children:(0,o.Y)(S.D,{path:n,onFileClick:i})}),r?(0,o.Y)(z,{children:r}):null]})}function Z(e,n){return{match:b.G2,data:{label:"Download",icon:(0,o.Y)(F.A,{}),type:"action",run:function(){return(0,r._)(function(){var t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,n.readFile(e)];case 1:if((t=r.sent()).error)return[2,{type:"error",message:"Error downloading file"}];return[4,function(e,n){return m.apply(this,arguments)}(e,t.content)];case 2:return r.sent(),[2]}})})()}}}}function q(e,n){return{match:b.G2,data:{label:"Download",icon:(0,o.Y)(F.A,{}),type:"action",run:function(){return(0,r._)(function(){var t,r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,n.readFile(e)];case 1:if((t=i.sent()).error||!(r=t.content.toString("base64")))return[2,{type:"error",message:"Error downloading file"}];return o=(0,u.WP)(e),(0,y._z)({messageType:x.tF.DOWNLOAD_FILE,fileName:o,fileContent:r},(0,c.Ak)()),[2]}})})()}}}}function K(e){var n=e.path,t=e.performPaneOperation,a=(0,w.A)(),l=(0,C.gi)(),s=(0,v.m6)(),c=(0,p._P)({controlName:"flag-draft-buffers"});return(0,f.A)(function(){if(!n)return null;var e,u,p,f=[{match:b.G2,data:{label:"Copy file path",icon:(0,o.Y)(R.A,{}),type:"action",run:function(){(0,h.default)(n)}}},{match:b.G2,data:{label:"Copy link",icon:(0,o.Y)(T.A,{}),type:"action",run:function(){var e=(0,Y.Ax)({path:n});(0,h.default)(e)}}},(e=a.fs,u=function(e){t({operation:"replace",pane:{type:(0,A.QY)({path:e}),data:{path:e}}})},{match:b.G2,data:{label:"Duplicate file",icon:(0,o.Y)(I.A,{}),type:"action",run:function(){return(0,r._)(function(){var t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,g.A)(n,e)];case 1:return t=r.sent(),[3,3];case 2:return r.sent(),[2,{type:"error",message:"Error duplicating file"}];case 3:return u(t),[2]}})})()}}}),s?q(n,a.fs):Z(n,a.fs),{match:b.G2,data:{label:"Delete",icon:(0,o.Y)(L.A,{color:_.LU.redDefault}),type:"action",run:function(){l(n)}}}];return c&&f.unshift((p=a.fs,{match:b.G2,data:{label:"Save file",icon:(0,o.Y)(P.A,{}),type:"action",run:function(){return(0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,p.flush(new Set([n]),d.sT.MANUAL_SAVE)];case 1:return e.sent(),[2]}})})()}}})),f},[n,a.fs,s,l,c,t])}},31464:(e,n,t)=>{"use strict";t.d(n,{B:()=>s});var r=t(12694),i=t(21462),o=t(34951),a=t(40568),l=function(e){var n,t,r,i=e.orgId,a=e.repl,l=e.forkSource;return{originId:a.id,teamId:null,title:null,description:null,isPrivate:!0,forkToPersonal:null,replReleaseId:null!==(r=null===(t=a.deployment)||void 0===t?void 0:null===(n=t.activeRelease)||void 0===n?void 0:n.id)&&void 0!==r?r:void 0,orgId:i,trackingData:{forkSource:l,isOnboarding:!1,isApp:a.publishedAs===o.Q_.App,isTemplate:a.publishedAs===o.Q_.Template}}};function s(e){var n=e.onFork,t=e.onError,o=(0,r._)((0,a.A)({navigateAfterFork:!0,replLinkOptions:{initialPaneType:"project"},onFork:function(){n()},onError:function(){t()}}),2),s=o[0],c=o[1].loading;return[(0,i.useCallback)(function(e){var n=e.repl;return s(l({orgId:e.orgId,repl:n,forkSource:e.forkSource}))},[s]),{loading:c}]}},31703:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(12694),i=t(21462);function o(e,n){var t=(0,r._)((0,i.useState)(null),2),o=t[0],a=t[1];return(0,i.useEffect)(function(){var t=!1;return e.readFile(n).then(function(e){!t&&a(e)}),function(){t=!0}},[e,n]),o}},31843:(e,n,t)=>{"use strict";t.d(n,{A:()=>h});var r=t(1889),i=t(21462),o=t(94869),a=t(67337),l=t(14856),s=t(21792),c=t(61234),u=t(43974),d=t(35869),p=t(56185),f=(0,c.x)({webview:[u.wp.height("auto"),u.wp.flex.grow(1)],starting:[u.wp.height("100%"),u.wp.width("100%"),u.wp.center]});function h(e){var n=e.openPane,t=e.starting,c=e.previewScreenSize,u=e.setPreviewScreenSize,d=e.initialPort,p=e.initialPath,h=e.isMobilePIP,g=(0,a.A)(),v=g.container,w=g.ports,y=(0,i.useRef)(null),b=(0,o.w)(w),S=(0,i.useMemo)(function(){return null!=d?d:(0,l.Eo)(void 0,b)},[b,d]),Y=(0,i.useCallback)(function(){return n({type:"networking"})},[n]),A=(0,i.useCallback)(function(){return n({type:"agentChat"})},[n]);return t?(0,r.Y)(m,{}):void 0===S?(0,r.Y)(s.A,{openNetworkingTool:Y,openAgentPane:A}):(0,r.Y)(l.QJ,{ref:y,css:f.webview,initialPath:p,initialPort:S,openPane:n,openNetworkingTool:Y,ports:w,container:v,previewScreenSize:c,setPreviewScreenSize:u,isMobilePIP:h})}function m(){return(0,r.Y)(d.S,{css:f.starting,children:(0,r.Y)(p.A,{size:32})})}},32039:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(12694),i=t(21462),o=t(53669);function a(e,n){var t=(0,r._)((0,i.useState)(function(){var t;return null!==(t=o.A.get(e))&&void 0!==t?t:n}),2),a=t[0],l=t[1];return(0,i.useEffect)(function(){o.A.set(e,a)},[e,a]),[a,l]}},32190:(e,n,t)=>{"use strict";t.d(n,{JX:()=>L,vY:()=>P});var r=t(17844),i=t(93629),o=t(1889),a=t(6680),l=t(61234),s=t(43974),c=t(5133),u=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)(c.A,{size:"small",onClick:t,children:n.content})},d=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)(c.A,{size:"small",fontWeight:"medium",onClick:t,children:n.content})},p=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("a",{href:n.url,onClick:t,rel:"noreferrer noopener nofollow",target:"_blank",children:n.content})},f=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("a",{href:n.url,onClick:t,target:"_blank",children:n.content})},h=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("a",{href:n.url,onClick:t,children:n.content})},m=function(e){var n=e.fragment,t=e.onClick,r=e.style;return(0,o.Y)("code",{onClick:t,style:r,children:n.content})},g=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("b",{onClick:t,children:n.content})},v=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("i",{onClick:t,children:n.content})},w=(0,l.x)({strikethrough:[{textDecoration:"line-through"}],blockquote:[s.wp.color.foregroundDimmest,s.wp.border({width:2,color:a.LU.foregroundDimmest,direction:"left"}),{paddingLeft:6}]}),y=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("span",{onClick:t,css:w.strikethrough,children:n.content})},b=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("blockquote",{onClick:t,css:w.blockquote,children:n.content})},S=/(@[0-9a-zA-Z_]+)/,Y=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,A=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,C=/(`.+?`)/,x=/(\*\*.+?\*\*)/,k=/(_.+?_)/,_=/(\*.+?\*)/,D=/(~~.+?~~)/,E=/(^>.+?$\n?)/m,R=/\/@([0-9a-zA-Z_]+)\/(.+)/;function I(e){var n=e.url;return{type:"LINK",url:n,content:n}}function F(e){var n=e.hash;return{type:"DEEP_LINK",url:n,content:n}}var T=RegExp([C.source,x.source,k.source,_.source,D.source,A.source,S.source,Y.source,E.source].join("|"),"m");function P(e,n){var t=e.split(T),r=[],i=[],o=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;if(u){var d=function(e,n){if(A.test(e)){var t={};try{t=new window.URL(e)}catch(n){return{content:e,type:"TEXT"}}return["repl.it","replit.com",document.location.host].includes(t.host)?t.pathname===n.replUrl?F({hash:t.hash}):R.test(t.pathname)?function(e){var n=e.url,t=R.exec(n.pathname);if(!t)throw Error("Not a Repl URL");return{type:"REPL_LINK",url:n.href,content:"@".concat(t[1],"/").concat(t[2]).concat(n.hash)}}({url:t}):I({url:e}):I({url:e})}if(Y.test(e))return F({hash:e});if(E.test(e))return{type:"QUOTE",content:({text:e.slice(1).trim()}).text};if(C.test(e))return{type:"CODE",content:({code:e.slice(1,-1)}).code};if(x.test(e))return{type:"BOLD",content:({text:e.slice(2,-2)}).text};if(k.test(e)||_.test(e))return{type:"ITALICS",content:({text:e.slice(1,-1)}).text};if(D.test(e))return{type:"STRIKETHROUGH",content:({text:e.slice(2,-2)}).text};if(S.test(e)){var r=e.slice(1);if(!n.users||n.users.includes(r))return{type:"MENTION",username:r,content:"@".concat(r)}}return{content:e,type:"TEXT"}}(u,n);if(d){if("MENTION"===d.type){if(!d.username)continue;r.push(d.username)}i.push(d)}}}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return{tokens:i,mentions:r}}function L(e){var n=e.message,t=e.onMentionClick,a=void 0===t?function(){}:t,l=e.codeStyles,s=void 0===l?{}:l;return(0,o.Y)(o.FK,{children:n.tokens.map(function(e,n){var t={fragment:e,key:n};return"MENTION"===e.type?(0,o.Y)(d,(0,i._)((0,r._)({},t),{onClick:function(){return a(e)}})):"LINK"===e.type?(0,o.Y)(p,(0,r._)({},t)):"REPL_LINK"===e.type?(0,o.Y)(f,(0,r._)({},t)):"DEEP_LINK"===e.type?(0,o.Y)(h,(0,r._)({},t)):"CODE"===e.type?(0,o.Y)(m,(0,i._)((0,r._)({},t),{style:s})):"BOLD"===e.type?(0,o.Y)(g,(0,r._)({},t)):"ITALICS"===e.type?(0,o.Y)(v,(0,r._)({},t)):"STRIKETHROUGH"===e.type?(0,o.Y)(y,(0,r._)({},t)):"QUOTE"===e.type?(0,o.Y)(b,(0,r._)({},t)):(0,o.Y)(u,(0,r._)({},t))})})}},32194:(e,n,t)=>{"use strict";t.d(n,{L:()=>i,Y:()=>r});var r=(0,t(88079).F)(null);function i(e,n,t){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now();Array.isArray(e)||(e=[e]);var a=null!==(i=n.output)&&void 0!==i?i:"",l=n.error,s=t?o:Date.now(),c="".concat(o,"-").concat(Math.random());r.set({input:e,output:a,error:l,start:o,end:s,cached:t,key:c})}},32256:(e,n,t)=>{"use strict";t.d(n,{R:()=>u,b:()=>d});var r=t(84344),i=t(6268),o=t(31159),a=t(1074),l=t(58767),s=t(26886),c=t(40261),u=function(e){var n=e.state.field(a.RJ,!1),t=e.state.facet(o.q);if(!(null==n?void 0:n.presented)||Date.now()-n.timestamp<150)return!1;var u=e.state.selection.main.head,d=e.state.doc.lineAt(u);if(u<=d.from+d.length-d.text.trimStart().length){var p=n.changes.closestRange(u);if(p.value instanceof s.kp){var f=p.value.unfulfilled.toString(),h=(0,c.t)(f,e.state.tabSize);if(h>0&&h>=e.state.tabSize)return!1}}var m=n.changes.asChangeSpec(),g=e.state.changes(m),v=n.changes.extendSelection(e.state.selection);return(0,r.N)(e),e.dispatch({changes:g,selection:v,scrollIntoView:!0,effects:a.xq.of(n.dismiss(a.UW.ACCEPTED_BY_USER)),annotations:[l.A.of(!0),i._B.of("full")]}),t.onSuggestionAccepted(e,n),!0},d=function(e){var n=e.state.field(a.RJ,!1),t=e.state.facet(o.q);return null!=n&&!!n.presented&&(e.dispatch({effects:a.xq.of(n.dismiss(a.UW.DISMISSED_BY_USER))}),t.onSuggestionExplicitlyDismissed(e,n),!0)}},32466:(e,n,t)=>{"use strict";t.d(n,{A:()=>C});var r={};t.r(r),t.d(r,{checkAndTrack:()=>Y,ensureTrackedFile:()=>y,storeOp:()=>b});var i=t(19884),o=t(63892),a=t(29935),l=t(12694),s=t(22531),c=t(82643),u=t(52535),d=t(53669),p=t(17844),f={};function h(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.info("ot client dataloss",(0,p._)({case:n,startTime:t.startTime,opsSinceFlush:t.opsSinceFlush,whileReconnecting:t.whileReconnecting,replid:t.replId,filePath:t.filePath},r))}var m={replsList:function(){return"dataLossRepls"},replFiles:function(e){return"dataLossReplFiles".concat(e)},latestOp:function(e,n){return"dataLossLatestOp--".concat(e,"--").concat(n)},latestFlushedOp:function(e,n){return"dataLossLatestFlushed--".concat(e,"--").concat(n)},latestOwnOp:function(e,n){return"dataLosslatestOwnOp--".concat(e,"--").concat(n)},opsSinceFlush:function(e,n){return"dataLossOpsSinceFlush--".concat(e,"--").concat(n)}};function g(){var e=d.A.get(m.replsList(),"array");return e||(e=[],d.A.set(m.replsList(),e)),e}function v(e){var n=d.A.get(m.replFiles(e),"array");return n||(n=[],d.A.set(m.replFiles(e),n)),n}function w(e){var n=v(e),t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;"string"==typeof l&&function(e,n){d.A.remove(m.latestOp(e,n)),d.A.remove(m.latestFlushedOp(e,n)),d.A.remove(m.latestOwnOp(e,n));var t=v(e).filter(function(e){return e!==n});d.A.set(m.replFiles(e),t)}(e,l)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}d.A.remove(m.replFiles(e));var s=g().filter(function(n){return n!==e});d.A.set(m.replsList(),s)}function y(e){var n,t,r=e.replId,i=e.filePath;n=r,(t=g()).includes(n)||(t.length>20?(w(t[0]),t[0]=n):t.push(n),d.A.set(m.replsList(),t));var o=v(r);!o.includes(i)&&(o.length>20?(w(o[0]),o[0]=i):o.push(i),d.A.set(m.replFiles(r),o))}function b(e){var n=e.filePath,t=e.replId,r=e.opType,i=e.op;(function(e){var n=e.filePath,t=e.replId,r=e.opType,i=e.logger,o=e.isReconnecting,a=h.bind(null,i),l="".concat(t,"--").concat(n);f[l]||(f[l]={replId:t,filePath:n,timer:null,startTime:null,whileReconnecting:0,opsSinceFlush:0});var s=f[l];if("latestFlushedOp"===r){delete f[l];var c=s.startTime;if(c){var u=Date.now()-c;u>6e4&&a("flush_delay_received",s,{elapsed:u})}var d=s.timer;d&&(clearTimeout(d),s.timer=null)}else{s.opsSinceFlush+=1,o&&(s.whileReconnecting+=1);var p,m=null!==(p=s.startTime)&&void 0!==p?p:Date.now();s.startTime=m,s.timer||(s.timer=setTimeout(function(){a("flush_delay_timeout",s)},6e4)),150===s.opsSinceFlush?a("flush_delay_small",s):1e3===s.opsSinceFlush&&a("flush_delay_large",s)}})({filePath:n,replId:t,opType:r,logger:e.logger,isReconnecting:e.isReconnecting}),d.A.set(m[r](t,n),i)}var S={};function Y(e){return A.apply(this,arguments)}function A(){return(A=(0,a._)(function(e){var n,t,r,i,o,p,f,h;return(0,c.YH)(this,function(g){var v;return(n=e.filePath,t=e.replId,r=e.serverVersion,i=e.serverContent,o=e.fetchOps,p=e.logger,S[n+t])?[2]:(S[n+t]=!0,f=function(e,n){var t={latestOp:null,latestFlushedOp:null,latestOwnOp:null},r=Object.keys(t),i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,p=d.A.get(m[u](e,n),"object");p&&p&&(void 0===p?"undefined":(0,s._)(p))==="object"&&"number"==typeof p.crc32&&"number"==typeof p.version&&(t[u]=p)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return t}(t,n),h=u.str(i)>>>0,Object.keys(f).forEach((v=(0,a._)(function(e){var n,t,i;return(0,c.YH)(this,function(a){switch(a.label){case 0:if(!(n=f[e]))return[2];if(r<n.version)return p.info("ot client dataloss",{opType:e,case:"server_forgot"}),[2];if(r===n.version)return h!==n.crc32&&p.info("ot client dataloss",{opType:e,case:"crc32_mismatch"}),[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,o(n.version,n.version)];case 2:return t=l._.apply(void 0,[a.sent(),1])[0],[3,4];case 3:return i=a.sent(),p.info("ot client dataloss",{opType:e,case:"error_fetching_op",originalError:String(i)}),[2];case 4:if(!t)return p.info("ot client dataloss",{opType:e,case:"op_not_found"}),[2];return t.crc32!==n.crc32&&p.info("ot client dataloss",{opType:e,case:"crc32_mismatch"}),[2]}})}),function(e){return v.apply(this,arguments)})),[2])})})).apply(this,arguments)}function C(e){var n=e.container;return(0,i.Ay)({container:n,dataloss:r,track:o.u4})}},32788:(e,n,t)=>{"use strict";t.d(n,{P:()=>a});var r=t(72004),i=t(26496),o=t(68209);function a(e){var n=(0,i.NC)();return(0,o.Rj)(function(){return e?n.sessions.query({types:[r.dF3.AGENT_SESSION]}).select(function(n){var t=Array.from(n.values()).sort(function(e,n){return n.created.getTime()-e.created.getTime()}).shift();return(null==t?void 0:t.id)!==e}):null},[n,e],{default:!1})}},32826:(e,n,t)=>{"use strict";t.d(n,{A:()=>L});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(96907),s=t.n(l),c=t(8300),u=t(66757),d=t(31930),p=t(12584),f=t(41114);function h(){var e=(0,p._)(["\n  fragment GitServiceGitHubUser on CurrentUser {\n    image\n    username\n    email\n    firstName\n    lastName\n    gitHubInfo {\n      isAppCurrentlyInstalled\n      accessToken\n      userInfo {\n        name\n        username\n        email\n        avatarUrl\n      }\n    }\n  }\n"]);return h=function(){return e},e}function m(){var e=(0,p._)(["\n  query GitServiceCurrentUser {\n    currentUser {\n      id\n      ...GitServiceGitHubUser\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g=(0,f.J1)(h()),v=(0,f.J1)(m(),g),w=t(88685),y=t(46288);function b(e){return S.apply(this,arguments)}function S(){return(S=(0,r._)(function(e){var n,t,r,i,o,l,s,u,d,p,f,h,m,g,b,S,Y,A,C,x,k,_;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.defaultUsername,t=e.defaultUserId,r=e.onProfiles,l=new Map,[4,null===w.V||void 0===w.V?void 0:w.V.query({query:v,fetchPolicy:"network-only",context:{noBatch:!0}})];case 1:var D,E;return f=(p=null!==(d=null==(u=(null!==(s=a.sent())&&void 0!==s?s:{data:null}).data)?void 0:u.currentUser)&&void 0!==d?d:{username:n,id:t,firstName:null,lastName:null}).id,h=p.firstName,m=p.lastName,g=p.username,f&&g&&(S=g,h&&(S=h),m&&(S=m),h&&m&&(S=h+" "+m),A={provider:c.HJ.REPLIT_DEFAULT,email:"".concat(f,"-").concat(g,"@").concat(y.O),name:S,username:g,avatar:null!==(Y=null==u?void 0:null===(b=u.currentUser)||void 0===b?void 0:b.image)&&void 0!==Y?Y:null},l.set(A.provider,A)),(C=null==u?void 0:null===(o=u.currentUser)||void 0===o?void 0:null===(i=o.gitHubInfo)||void 0===i?void 0:i.userInfo)&&C.email&&C.username&&(null==u?void 0:null===(E=u.currentUser)||void 0===E?void 0:null===(D=E.gitHubInfo)||void 0===D?void 0:D.isAppCurrentlyInstalled)&&(_={provider:c.HJ.GITHUB,email:C.email,name:null!==(x=C.name)&&void 0!==x?x:C.username,username:C.username,avatar:null!==(k=C.avatarUrl)&&void 0!==k?k:null},l.set(_.provider,_)),r(l),[2]}})})).apply(this,arguments)}var Y=t(37743),A=t(17844),C=t(90629),x=t(3112),k=t(88079),_=t(40208),D=function(){function e(n,t){(0,Y._)(this,e),this.cache=new Map,this.lastInvalidation=0,this.ttl=n,this.debounceTime=t}var n=e.prototype;return n.has=function(e){return this.cache.has(e)},n.get=function(e){var n=this.cache.get(e);if(!n)throw Error("No value found for key: ".concat(e));return n.result},n.set=function(e,n){var t=this,r=this.cache.get(e);r&&(clearTimeout(r.timeout),this.cache.delete(e));var i={result:n,timeout:setTimeout(function(){return t.cache.delete(e)},this.ttl),pending:!0};n.finally(function(){return i.pending=!1}),this.cache.set(e,i)},n.invalidate=function(){if(!(Date.now()-this.lastInvalidation<this.debounceTime)){var e=new Map,n=!0,t=!1,r=void 0;try{for(var o,a=this.cache[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,i._)(o.value,2),s=l[0],c=l[1];c.pending?e.set(s,c):clearTimeout(c.timeout)}}catch(e){t=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}this.cache=e,this.lastInvalidation=Date.now()}},n.clear=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.cache.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;clearTimeout(o.timeout)}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}this.cache.clear(),this.lastInvalidation=0},e}(),E=t(32194);function R(){return(R=(0,r._)(function(e,n,t,r){var i,o,l,s,u,d,p;return(0,a.YH)(this,function(a){switch(a.label){case 0:if("open"!==e.status)return[2,{output:"JS Error\nchannel closed before command was run",error:c.uA.CHANNEL_CLOSED}];a.label=1;case 1:return a.trys.push([1,3,,4]),i="",o=e.onCommand(function(e){null!==e.output&&void 0!==e.output&&(i+=e.output)}),l=void 0,(s=Promise.race([new Promise(function(e){return l=setTimeout(e,9e4)}),e.request({exec:{env:t,args:n,noUserEnv:!0}})])).finally(function(){o(),clearTimeout(l)}),[4,s];case 2:if(void 0===(u=a.sent()))return _.vF.error("Git request timed out.",(0,A._)({appService:"git",command:n,gitEnv:JSON.stringify(t),TIMEOUT:9e4},r)),[2,{output:i,error:c.uA.TIMEOUT}];if(!u.ok&&u.channelClosed)return[2,{output:"JS Error\nchannel closed during command execution",error:c.uA.CHANNEL_CLOSED}];if(u.error||!u.ok)return[2,{output:d="".concat(u.error,"\n").concat(i),error:(0,c.sg)(d)}];return[2,{output:i,error:null}];case 3:return p=a.sent(),C.v4(function(e){e.setTag("service","git"),e.setExtra("command",n),e.setExtra("env",t),r&&e.setExtra("options",r),C.Cp(p)}),[2,{output:"JS Error\n".concat(String(p)),error:c.uA.UNKNOWN_NOT_GIT}];case 4:return[2]}})})).apply(this,arguments)}var I=function(){function e(n){var t=this,i=n.container,o=n.getEnv,l=n.awaitPromise;(0,Y._)(this,e),this.cache=new D(3e4,2e3),this.running=(0,k.F)(!1),this.queue=[],i.openChannel({service:"exec"},function(e){var n,i,s=e.channel,c=(n=(0,r._)(function(e,n){var t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:if(0===e.length)throw Error("Expected at least one command");if(!l)return[3,2];return[4,l];case 1:i.sent(),i.label=2;case 2:return t=Date.now(),[4,function(e,n,t,r){return R.apply(this,arguments)}(s,["bash","-c",Array.isArray(e)?e.join(" && "):e],o(),n)];case 3:if(r=i.sent(),(0,E.L)(e,r,!1,t),r.error)return[2,{error:r.error}];return[2,{output:(null==n?void 0:n.verbatim)?r.output:r.output.trim(),error:null}]}})}),function(e,t){return n.apply(this,arguments)}),u=function(e,n){if(0===e.length)throw Error("Expected at least one command");var r=Array.isArray(e)?e.join(" && "):e;if(t.cache.has(r)){var i=t.cache.get(r);return i.then(function(n){(0,E.L)(e,n,!0)}),i}var o=c(r,n);return t.cache.set(r,o),o},d=function(e,n){return t.cache.clear(),c(e,n)},p=(i=(0,r._)(function(){var e;return(0,a.YH)(this,function(n){switch(n.label){case 0:if(!(t.queue.length>0)||"open"!==s.status)return[3,7];if(!(e=t.queue.shift()))return[3,6];if("read"!==e.type)return[3,2];return[4,e.fn(u)];case 1:case 3:return n.sent(),[3,6];case 2:if("write"!==e.type)return[3,4];return[4,e.fn(d)];case 4:return[4,e.fn(c)];case 5:n.sent(),n.label=6;case 6:return[3,0];case 7:return 0===t.queue.length&&t.running.set(!1),[2]}})}),function(){return i.apply(this,arguments)});return t.running.current&&p(),t.running.subscribe(function(e){e&&p()})})}var n=e.prototype;return n.add=function(e,n){var t,i=(0,x.A)();return this.queue.push({type:n,fn:(t=(0,r._)(function(n){var t;return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,e(n)];case 1:return t=r.sent(),i.resolve(t),[2]}})}),function(e){return t.apply(this,arguments)})}),this.running.current||this.running.set(!0),i.promise},n.wrap=function(e,n){var t=this;if("function"!=typeof e)throw Error("Expected a function");return function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.add(function(n){return e.apply(void 0,[n].concat((0,o._)(i)))},n)}},e}(),F=t(44441),T=t(11597),P=".git";function L(e){var n,t=e.container,l=e.fs,p=e.provideProfiles,f=void 0===p?b:p,h=(0,u.Ay)();h.setMaxListeners(1/0);var m=(0,c.iM)(),g=!1,v=new Map,w=null,y=t.getContext(),S=(n=(0,r._)(function(e){var n,t;return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,f({defaultUsername:null==y?void 0:null===(n=y.currentUser)||void 0===n?void 0:n.username,defaultUserId:null==y?void 0:null===(t=y.currentUser)||void 0===t?void 0:t.id,onProfiles:function(n){var t=!0,r=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=(0,i._)(a.value,2),u=s[0],d=s[1];v.set(u,d),h.emit(c.JC.NEW_PROFILE)}}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}n.has(c.HJ.GITHUB)||v.delete(c.HJ.GITHUB);var p=v.get(c.HJ.REPLIT_DEFAULT),f=v.get(c.HJ.GITHUB);if(w&&!e&&(e=w.provider),e===c.HJ.GITHUB&&f)w=f;else{if(!p)return;w=p}h.emit(c.JC.CHANGED_PROFILE)}})];case 1:return[2,r.sent()]}})}),function(e){return n.apply(this,arguments)}),Y=new I({container:t,getEnv:function(){return m},awaitPromise:S(c.HJ.GITHUB)});h.on(c.JC.FS_CHANGE,function(){return Y.cache.invalidate()}),h.on(c.JC.FORCED_REFRESH,function(){return Y.cache.invalidate()}),h.on(c.JC.NEW_PROFILE,function(){return Y.cache.invalidate()}),h.on(c.JC.CHANGED_PROFILE,function(){return Y.cache.invalidate()});var A=function(){var e,n=t.getContext(),r=null==n?void 0:null===(e=n.currentUser)||void 0===e?void 0:e.id;if(null!=r){var i="[init]\ndefaultBranch = main\n[user]\n";""!==m.GIT_AUTHOR_EMAIL&&(i+="email = ".concat(m.GIT_AUTHOR_EMAIL.replace(/'/g,"'\"'\"'"),"\n")),""!==m.GIT_AUTHOR_NAME&&(i+="name = ".concat(m.GIT_AUTHOR_NAME.replace(/'/g,"'\"'\"'"),"\n"));var o="/run/replit/user/".concat(r,"/.config/git");null!=r&&t.exec("bash","-c","tmpf=$(mktemp); mkdir -p ".concat(o," && echo '").concat(i,'\' > "$tmpf" && mv "$tmpf" ').concat("".concat(o,"/config")))}};return t.onConnectionStateChanged(function(e){e===d.KN.CONNECTED&&A()}),h.on(c.JC.CHANGED_PROFILE,function(){null!=w&&(m=(0,c.iM)({author:{username:w.name,email:w.email}}),A())}),{getEnv:function(){return m},getProfiles:function(){return Array.from(v.values())},hasProfile:function(e){return v.has(e)},getProfile:function(e){var n=v.get(e);if(!n)throw Error("Fetched a profile that has not been setup!");return n},addProfile:function(e){v.set(e.provider,e),h.emit(c.JC.NEW_PROFILE)},getCurrentProfile:function(){return w},setCurrentProfile:function(e){var n=v.get(e);if(!n)throw Error("Can't set a non-existent profile!");w=n,m=(0,c.iM)({author:{username:n.name,email:n.email}}),h.emit(c.JC.CHANGED_PROFILE)},onProfileAdded:function(e){var n=function(){e(Array.from(v.values()))};return h.on(c.JC.NEW_PROFILE,n),function(){h.off(c.JC.NEW_PROFILE,n)}},onCurrentProfileChanged:function(e){var n=function(){e(w)};return h.on(c.JC.CHANGED_PROFILE,n),function(){h.off(c.JC.CHANGED_PROFILE,n)}},refreshProfiles:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preferredProvider;return S(e)},onRefresh:function(e){g||(function(e,n,t){var i,l,u,d,p,f,h,m,g,v,w=!1,y=!1,b=(i=function(){return t.emit(c.JC.FS_CHANGE)},d=(l={wait:1e3,cooldown:5e3,maxWait:5e3}).wait,p=l.cooldown,f=l.maxWait,h=null,m=!1,g=s()(function(e){return h=setTimeout(function(){return h=null},p),m=!1,u=i.apply(void 0,(0,o._)(e))},d,{maxWait:f}),(v=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return null!==h?u:(m||(m=!0),g(n))}).cancel=function(){null!==h?(clearTimeout(h),h=null):(g.cancel(),m=!1)},v.flush=function(){return null!==h?(clearTimeout(h),h=null,u):g.flush()},v.isPending=function(){return m},v.isInCooldown=function(){return null!==h},v);function S(){return(S=(0,r._)(function(){var t;return(0,a.YH)(this,function(r){return t=!0,n.watchDir(F.Dl,{onChange:function(r){!w&&r.find(function(e){return e.filename===P&&e.type===T.pt.Directory})&&(function(){if(!w){w=!0;var t=!0;n.watchDir(P,{onChange:function(){t?t=!1:b()},onMoveOrDelete:function(){w=!1,b()},onError:function(n,t){w=!1,!RegExp(".+permission denied","im").test(n.message)&&e.unrecoverableError(n,t)}})}}(),t||b()),t&&(t=!1)},onError:function(n,t){return e.unrecoverableError(n,t)}}),[2]})})).apply(this,arguments)}(function(){S.apply(this,arguments)})(),n.onStatusChange(function(e){w&&(e===T.sn.Syncing&&b.isInCooldown()?y=!0:e===T.sn.Clean&&(y||b(),y=!1))})}(t,l,h),g=!0);var n=function(){return e(c.JC.FS_CHANGE)},i=function(){return e(c.JC.FORCED_REFRESH)},u=function(){return e(c.JC.NEW_PROFILE)},d=function(){return e(c.JC.CHANGED_PROFILE)};return h.on(c.JC.FS_CHANGE,n),h.on(c.JC.FORCED_REFRESH,i),h.on(c.JC.NEW_PROFILE,u),h.on(c.JC.CHANGED_PROFILE,d),function(){h.off(c.JC.FS_CHANGE,n),h.off(c.JC.FORCED_REFRESH,i),h.off(c.JC.NEW_PROFILE,u),h.off(c.JC.CHANGED_PROFILE,d)}},forceRefresh:function(){h.emit(c.JC.FORCED_REFRESH)},isBusy:function(){return Y.running.current},onBusyChange:function(e){var n=!1,t=s()(e,200);return Y.running.subscribe(function(e){n&&!e?(t(!1),n=!1):!n&&e&&(t(!0),n=!0)})},init:Y.wrap(c.rv,"write"),isInitialized:Y.wrap(c.$g,"read"),lsFiles:Y.wrap(c.TR,"read"),status:Y.wrap(c.Dx,"read"),log:Y.wrap(c.FR,"read"),findDefaultBranches:Y.wrap(c.du,"read"),listBranches:Y.wrap(c.z0,"read"),setBranchUpstream:Y.wrap(c.qE,"write"),stageFiles:Y.wrap(c.Q,"write"),commit:Y.wrap(c.om,"write"),switchBranch:Y.wrap(c.He,"write"),branchExists:Y.wrap(c.xd,"read"),createBranch:Y.wrap(c.nI,"write"),getRemotes:Y.wrap(c.g$,"read"),fetch:Y.wrap(c.FW,"write"),canMergeBranches:Y.wrap(c.TL,"read"),pull:Y.wrap(c.C4,"write"),push:Y.wrap(c.Z3,"write"),getRepositoryState:Y.wrap(c.Ew,"read"),getFileContents:Y.wrap(c.Pb,"read"),addRemote:Y.wrap(c.is,"write"),removeRemote:Y.wrap(c.jz,"write"),setRemoteURL:Y.wrap(c.CY,"write"),getBranch:Y.wrap(c.j5,"read"),restoreFiles:Y.wrap(c.QA,"write"),lastFetched:Y.wrap(c.G_,"read"),merge:Y.wrap(c.pk,"write"),mergeContinue:Y.wrap(c.WC,"write"),mergeAbort:Y.wrap(c.DZ,"write"),getConflictingFiles:Y.wrap(c.gP,"read"),getMergingRefs:Y.wrap(c.U4,"read"),getFilesForCommit:Y.wrap(c.uD,"read"),getCommit:Y.wrap(c.WE,"read"),restoreCommit:Y.wrap(c.Iw,"write"),escapeHatchGitExecRead:Y.wrap(function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return e.apply(void 0,(0,o._)(t))},"read"),escapeHatchGitExecWrite:Y.wrap(function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return e.apply(void 0,(0,o._)(t))},"write"),getChangesBetweenCommits:Y.wrap(c.wP,"read")}}},32898:(e,n,t)=>{"use strict";t.d(n,{D:()=>o});var r=t(49069),i=t(92537);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=r.Pe.define(),o=r.sU.define({create:function(){return n},update:function(n,r){return(0,i.C)(r,t,function(t){n=e(t.value,n)}),n}});return{effect:t,state:o}}},33067:(e,n,t)=>{"use strict";t.d(n,{gu:()=>d,zn:()=>m,ah:()=>h});var r=t(29935),i=t(12694),o=t(82643),a=t(21462),l=t(90629),s=t(49069);function c(){return(c=(0,r._)(function(e,n,t){var r;return(0,o.YH)(this,function(i){switch(i.label){case 0:if(!e.path||"number"!=typeof e.indexStart||"number"!=typeof e.indexEnd||!e.otVersion)return[2];if(t===e.otVersion)return[2,{path:e.path,indexStart:e.indexStart,indexEnd:e.indexEnd,otVersion:e.otVersion}];return[4,n({indexStart:e.indexStart,indexEnd:e.indexEnd,versionFrom:e.otVersion,versionTo:t})];case 1:return r=i.sent(),[2,{path:e.path,indexStart:r.indexStart,indexEnd:r.indexEnd,otVersion:t}]}})})).apply(this,arguments)}var u=t(67337);function d(e){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e){var n,t,r,i,a,u,d;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(n=e.anchor,t=e.version,r=e.transformSelection,i=e.content,!n.path)return[2,null];return[4,function(e,n,t){return c.apply(this,arguments)}(n,r,t)];case 1:if(!(a=o.sent()))return[2,null];return d=function(){if(a){var e=a.indexStart,n=a.indexEnd;try{var t=s.EY.of(i.split("\n")),r=t.lineAt(e),o=t.lineAt(n),c=t.sliceString(t.line(Math.max(r.number-2,1)).from,e),u=t.sliceString(n,t.line(Math.min(o.number+2,t.lines)).to);return{precode:c,code:t.sliceString(e,n),postcode:u}}catch(e){l.Cp(e)}}},[2,{anchor:n,newSelection:a,newPosition:u,getHighlight:d,snippet:f(i,a)}]}})})).apply(this,arguments)}var f=function(e,n){var t=s.EY.of(e.split("\n")),r=t.lineAt(n.indexStart).number,i=t.lineAt(n.indexEnd).number,o=[];r===i&&(r=Math.max(1,r-1),i=Math.min(t.lines,i+1));for(var a=r;a<=i;a++)o.push(t.line(a).text);return{startLineNumber:r,lines:o}};function h(e){var n=(0,u.A)().fs,t=(0,a.useRef)(null),r=(0,a.useRef)(null),o=(0,i._)((0,a.useState)(!1),2),l=o[0],s=o[1];return(0,a.useEffect)(function(){if(e){var i=function(){r.current=null,s(!1)},o=n.watchTextFile(e,{onReady:function(e){var n=e.transformSelection;t.current=e.initialContent.toString(),r.current=n,s(!0)},onMoveOrDelete:function(){i()},onError:function(){i()},onChange:function(e){t.current=e.latestContent}});return function(){i(),o()}}},[e,n]),{contentRef:t,transformSelectionRef:r,loadedFile:l}}function m(e){var n=(0,u.A)().fs,t=(0,i._)((0,a.useState)(null),2),r=t[0],o=t[1],s=h(null==e?void 0:e.path),c=s.contentRef,p=s.loadedFile,f=s.transformSelectionRef;return(0,a.useEffect)(function(){(null==e?void 0:e.path)&&p&&f.current&&null!==c.current&&d({anchor:e,version:n.getOTVersion(e.path),transformSelection:f.current,content:c.current}).then(function(e){o(e)}).catch(function(e){o(null),l.Cp(e)})},[n,e,p,f,c]),r}},33078:(e,n,t)=>{"use strict";t.d(n,{A:()=>v});var r=t(83846),i=t(1889),o=t(51895),a=t(61234),l=t(22498),s=t(43974),c=t(40043),u=t(35869),d=t(19344),p=t(56185),f=(0,l.v)(["maxWidth"]),h=f.cssVars,m=f.styleTokens,g=(0,a.x)({container:[s.wp.width("100%"),s.wp.minHeight("100%"),s.wp.center],centeredContent:[s.wp.width("100%"),s.wp.maxWidth(m.maxWidth),s.wp.colWithGap(16),s.wp.p(16),s.wp.center],imageWithHeader:[s.wp.center,s.wp.flex.shrink(1),s.wp.textAlign.center],bodyText:[s.wp.textAlign.center,s.wp.color.foregroundDimmest]});function v(e){var n=e.pane,t=e.asciiArt,a=e.headerText,l=e.bodyText,s=e.body,f=e.action,m=e.icon,v=e.loading,w=e.maxWidth,y=e.innerRef,b=(0,o.Vv)(),S=b.getDescription(n),Y=(0,i.Y)(b.Icon,{pane:n,size:48}),A=null!=s?s:S;void 0!==v&&v?A=(0,i.FD)(u.S,{gap:4,align:"center",row:!0,children:[(0,i.Y)(p.A,{size:16}),(0,i.Y)(c.EY,{css:g.bodyText,children:"Loading…"})]}):void 0!==l&&(A=(0,i.Y)(u.S,{children:(0,i.Y)(c.EY,{css:g.bodyText,multiline:!0,children:l})}));var C=Y;return void 0!==m?C=m:void 0!==t&&(C=(0,i.Y)(d.A,{art:t})),(0,i.Y)(u.S,{css:g.container,style:(0,r._)({},h.maxWidth,"".concat(void 0===w?600:w,"px")),innerRef:y,children:(0,i.FD)(u.S,{css:g.centeredContent,children:[(0,i.FD)(u.S,{css:g.imageWithHeader,gap:16,children:[C,(0,i.Y)(c.Y9,{level:1,variant:"subheadBig",multiline:!0,children:null!=a?a:S})]}),A,f]})})}},33105:(e,n,t)=>{"use strict";t.d(n,{Jc:()=>R,Dr:()=>c,zY:()=>s});var r=t(17844),i=t(93629),o=t(75152),a=o.ZU.Integer({minimum:0,maximum:65535}),l=o.ZU.Object({forwarded:o.ZU.Boolean(),port:a,address:o.ZU.String(),externalPort:a,comm:o.ZU.String({description:"Comm is the name chosen by the thread / process. Sometimes it has nice information to disambiguate between multiple instances of that process."}),cmdline:o.ZU.Array(o.ZU.String(),{description:"Cmdline is the commandline arguments provided when the process started."}),cgroup:o.ZU.String({description:"Cgroup is the cgroup of the process, as reported by `/proc/${pid}/cgroup`"}),pid:o.ZU.Integer(),pidChain:o.ZU.Array(o.ZU.Integer(),{description:"PidChain is the list of process ids in the hierarchy of the process, starting with the current process id and ending with 1 (pid1)."})});o.ZU.Array(l);var s=function(e){return e.NOT_STARTED="NOT_STARTED",e.RUNNING="RUNNING",e.FINISHED="FINISHED",e.FAILED="FAILED",e}({}),c=function(e){return e.NOT_STARTED="NOT_STARTED",e.RUNNING="RUNNING",e.FINISHED="FINISHED",e.FAILED="FAILED",e.ERROR="ERROR",e}({}),u=o.ZU.Object({task:o.ZU.Literal("dummy.echo"),args:o.ZU.Optional(o.ZU.String())}),d=o.ZU.Object({task:o.ZU.Literal("dummy.echo")}),p=o.ZU.Object({task:o.ZU.Literal("dummy.print"),args:o.ZU.String()}),f=o.ZU.Object({task:o.ZU.Literal("dummy.print")}),h=o.ZU.Object({task:o.ZU.Literal("dummy.sleep"),args:o.ZU.Optional(o.ZU.Number({minimum:0}))}),m=o.ZU.Object({task:o.ZU.Literal("dummy.sleep")}),g=o.ZU.Object({task:o.ZU.Literal("dummy.pass")}),v=o.ZU.Object({task:o.ZU.Literal("dummy.pass")}),w=o.ZU.Object({task:o.ZU.Literal("dummy.fail")}),y=o.ZU.Object({task:o.ZU.Literal("dummy.fail")}),b=o.ZU.Object({task:o.ZU.Literal("shell.exec"),args:o.ZU.String(),env:o.ZU.Optional(o.ZU.Record(o.ZU.String(),o.ZU.String())),waitForPort:o.ZU.Optional(o.ZU.Number())}),S=o.ZU.Object({task:o.ZU.Literal("shell.exec"),cgroupPath:o.ZU.Optional(o.ZU.String()),pid:o.ZU.Optional(o.ZU.Integer()),isInRecoveryMode:o.ZU.Optional(o.ZU.Boolean()),openPorts:o.ZU.Optional(o.ZU.Array(l))}),Y=o.ZU.Object({task:o.ZU.Literal("workspace.openWebview"),args:o.ZU.Number({minimum:0})}),A=o.ZU.Object({task:o.ZU.Literal("workspace.openWebview")}),C=o.ZU.Object({task:o.ZU.Literal("packager.installForLanguage"),args:o.ZU.String(),disablePackageGuessing:o.ZU.Optional(o.ZU.Boolean()),continueOnFail:o.ZU.Optional(o.ZU.Boolean())}),x=o.ZU.Object({task:o.ZU.Literal("packager.installForLanguage"),hasUserFacingOutput:o.ZU.Boolean()}),k=o.ZU.Object({task:o.ZU.Literal("packager.installForAll"),disablePackageGuessing:o.ZU.Optional(o.ZU.Boolean()),continueOnFail:o.ZU.Optional(o.ZU.Boolean())}),_=o.ZU.Object({task:o.ZU.Literal("packager.installForAll"),hasUserFacingOutput:o.ZU.Boolean()}),D=o.ZU.Object({task:o.ZU.Literal("workflow.run"),args:o.ZU.String()}),E=o.ZU.Object({task:o.ZU.Literal("workflow.run"),runId:o.ZU.String()}),R=o.ZU.Union([u,w,g,p,h,k,C,b,D,Y]),I=o.ZU.Union([d,y,v,f,m,_,x,S,E,A]),F=o.ZU.Union([o.ZU.Literal("parallel"),o.ZU.Literal("sequential")]),T=o.ZU.Object({agentRequireRestartOnSave:o.ZU.Optional(o.ZU.Boolean({description:"Meant for agent use only. Some frameworks have Hot Module Replacement or other mechanisms to automatically serve updated contents when files change. This metadata option is intended to be set to true when the frameworks do not have support for HMR, and the caller is expected to manually restart the workflow after saving files."})),agentRestartPatterns:o.ZU.Optional(o.ZU.Array(o.ZU.String(),{description:"Meant for agent use only. Specify a list of glob patterns used for matching file change events that would require a restart."})),generated:o.ZU.Optional(o.ZU.Boolean({description:"Used for auto-generated workflows, generated workflows should be kept read-only, and do not persist in .replit, examples being run button workflow, or package.json generated workflows."})),dotReplitRun:o.ZU.Optional(o.ZU.Boolean({description:"Only used by the workflow generated from .replit run configuration, only to be set internally in workflow service state and should not be persisted in dotreplit (unless potentially duplicated by the user)"}))}),P=o.ZU.Union([o.ZU.Literal("agent"),o.ZU.Literal("system"),o.ZU.Number()]),L=o.ZU.Object({name:o.ZU.String(),mode:o.ZU.Optional(F),metadata:o.ZU.Optional(T),tasks:o.ZU.Array(R),author:o.ZU.Optional(P)});o.ZU.Object({workflows:o.ZU.Object({runButton:o.ZU.Optional(o.ZU.String()),workflow:o.ZU.Optional(o.ZU.Array(L))})}),o.ZU.Object({runButton:o.ZU.Optional(o.ZU.String()),workflow:o.ZU.Optional(o.ZU.Array(L))});var U={userIds:o.ZU.Array(o.ZU.Number()),metadata:o.ZU.Optional(I)},N=o.ZU.Union([o.ZU.Object((0,i._)((0,r._)({},U),{state:o.ZU.Literal("NOT_STARTED")})),o.ZU.Object((0,i._)((0,r._)({},U),{state:o.ZU.Literal("RUNNING"),isReady:o.ZU.Optional(o.ZU.Boolean()),startTime:o.ZU.Number()})),o.ZU.Object((0,i._)((0,r._)({},U),{state:o.ZU.Literal("FAILED"),startTime:o.ZU.Number(),endTime:o.ZU.Number(),result:o.ZU.Optional(o.ZU.Object({message:o.ZU.Optional(o.ZU.String()),exitCode:o.ZU.Optional(o.ZU.Number())}))})),o.ZU.Object((0,i._)((0,r._)({},U),{state:o.ZU.Literal("FINISHED"),startTime:o.ZU.Number(),endTime:o.ZU.Number(),result:o.ZU.Optional(o.ZU.Object({message:o.ZU.Optional(o.ZU.String()),exitCode:o.ZU.Optional(o.ZU.Number())}))})),o.ZU.Object((0,i._)((0,r._)({},U),{state:o.ZU.Literal("ERROR"),startTime:o.ZU.Number(),endTime:o.ZU.Number(),result:o.ZU.Optional(o.ZU.Object({message:o.ZU.Optional(o.ZU.String())}))}))]);o.ZU.Record(o.ZU.String(),o.ZU.Object({runId:o.ZU.String(),startTime:o.ZU.Number(),endTime:o.ZU.Optional(o.ZU.Number()),step:o.ZU.Enum(s),tasks:o.ZU.Array(N),workflow:L,userId:o.ZU.Optional(o.ZU.Union([o.ZU.Literal("agent"),o.ZU.Number()]))}))},33338:(e,n,t)=>{"use strict";t.d(n,{Qu:()=>o,T3:()=>r,W_:()=>i});var r="replit-repltuned-v1-5-3b",i={"replit-repltuned-v1-5-3b":{},"replit-v1-5-3b":{}},o=new Set(Object.keys(i))},33371:(e,n,t)=>{"use strict";t.d(n,{Bt:()=>S,IC:()=>b,To:()=>y,ex:()=>w});var r=t(1889),i=t(74391),o=t(317),a=t(25933),l=t(87736),s=t(16902),c=t(61234),u=t(43974),d=t(3910),p=t(40043),f=t(35869),h=t(18680),m=t(19915),g=(0,c.x)({title:[u.wp.pr(2)],emphasis:[u.wp.fontWeight.medium,u.wp.flex.shrink(1)],list:[u.wp.pt(2)],row:[u.wp.rowWithGap(8),u.wp.align.center],rowText:[u.wp.flex.shrink(1)],cta:[u.wp.pt(12),u.wp.pb(4)]});function v(e){var n=e.title,t=e.isFrozen,o=e.scheduledFreezeTime,a=e.scheduledDeletionTime,l=new Date,s=o?(0,i.A)(new Date(o),l):-1,c=a?(0,i.A)(new Date(a),l):-1;return(0,r.FD)(f.S,{gap:4,children:[(0,r.Y)(f.S,{css:g.title,row:!0,gap:4,align:"center",justify:"space-between",children:(0,r.Y)(p.EY,{css:g.emphasis,children:void 0===n?"Upgrade for a permanent database":n})}),(0,r.Y)(p.EY,{variant:"small",children:"Databases created on your free Starter plan are temporary."}),(0,r.FD)(f.S,{css:g.list,gap:8,children:[t?(0,r.FD)(f.S,{css:g.row,children:[(0,r.Y)(h.A,{size:16}),(0,r.Y)(p.EY,{css:g.rowText,variant:"small",children:"Your database has been paused, preventing further edits."})]}):null,!t&&s>-1?(0,r.FD)(f.S,{css:g.row,children:[(0,r.Y)(h.A,{size:16}),(0,r.FD)(p.EY,{css:g.rowText,variant:"small",children:[(0,r.FD)("span",{css:g.emphasis,children:["In ",s," days:"]})," ","Your database will be paused, preventing further edits."]})]}):null,c>-1?(0,r.FD)(f.S,{css:g.row,children:[(0,r.Y)(m.A,{size:16}),(0,r.FD)(p.EY,{css:g.rowText,variant:"small",children:[(0,r.FD)("span",{css:g.emphasis,children:["In ",c," days:"]})," ","Your database will be permanently deleted."]})]}):null]})]})}function w(e){var n=e.currentUser,t=(0,a.ET)().orgId;return!(null==n?void 0:n.isMemberOfAnyOrg)&&!(null==n?void 0:n.userSubscriptionType)&&void 0===t}function y(e){var n=e.isFrozen,t=e.scheduledFreezeTime,i=e.scheduledDeletionTime;return w({currentUser:e.currentUser})?(0,r.Y)(f.S,{children:(0,r.Y)(d.N,{text:(0,r.FD)(f.S,{children:[(0,r.Y)(v,{isFrozen:n,scheduledFreezeTime:t,scheduledDeletionTime:i}),(0,r.Y)(f.S,{css:g.cta,children:(0,r.Y)(l.A,{context:"workspace_ephemeral_postgres_database_banner",text:"Upgrade to Replit ".concat(o.en),colorway:"brand",variant:"outlined"})})]})})}):null}function b(){var e=(0,s.q)(),n=e.neonDatabases,t=e.currentUser;if(!t||0===n.length)return null;var i=n[0];return i.isEphemeral?(0,r.Y)(y,{currentUser:t,isFrozen:i.isFrozen,scheduledFreezeTime:i.scheduledFreezeTime,scheduledDeletionTime:i.scheduledDeletionTime}):null}function S(e){var n=e.isFrozen,t=e.scheduledFreezeTime,i=e.scheduledDeletionTime;return(0,r.Y)(f.S,{style:{maxWidth:240},children:(0,r.Y)(v,{title:"We created a temporary database for you, manage it here",isFrozen:n,scheduledFreezeTime:t,scheduledDeletionTime:i})})}},33472:e=>{e.exports={root:"ChatV2_root__Qmijv",emptyState:"ChatV2_emptyState__FCq0Z"}},33915:(e,n,t)=>{"use strict";t.d(n,{P:()=>r});var r=function(e){return e.CommandBar="commandbar",e.FiletreeContextMenu="filetree-context-menu",e.SidebarSearch="sidebar-search",e.EditorContextMenu="editor-context-menu",e}({})},34145:(e,n,t)=>{"use strict";t.d(n,{h:()=>U,qo:()=>N});var r=t(29935),i=t(17844),o=t(93629),a=t(12694),l=t(82643),s=t(1889),c=t(21462),u=t(72004),d=t(26496),p=t(68209),f=t(80865),h=t(57501),m=t(90122),g=t(61280),v=t(76243),w=t(73978),y=t(6659),b=t(40919),S=t(75822),Y=t(66705),A=t(4631),C=t(70275),x=t(19918),k=t(4792),_=t(25936),D=t(71120),E=t(66199),R=t(74863),I=t(2527),F=t(35869),T=t(65995),P=t(49306),L=t.n(P);function U(e){var n,t,b=e.session,S=e.onAppProposal,Y=(0,c.useMemo)(function(){return b.reduce(C.le,100)},[b]),k=(0,p.G9)(Y);n=(0,c.useRef)(!1),(0,c.useEffect)(function(){!n.current&&((0,w.pI)({action:"lobby_viewed"}),n.current=!0)},[]);var P=(0,c.useCallback)((t=(0,r._)(function(e,n,t){var r,i;return(0,l.YH)(this,function(o){return b?(i=(0,E.j)({attachments:n,attachedUrls:t}),[2,b.appendEvent({kind:"message",intent:u.qRv.MESSAGE_ACTION_UNKNOWN,message:e,attachedForm:{formType:u.B73.ATTACHED_FORM_TYPE_REPL_CREATION_V1,fields:(0,E.k)(null==k?void 0:null===(r=k.current)||void 0===r?void 0:r.fields,i)}})]):[2]})}),function(e,n,r){return t.apply(this,arguments)}),[b,k]),U=(0,c.useMemo)(function(){return Y.result.map(function(e){return e.fields?(0,C.L5)(e.fields):null})},[Y]),O=(0,c.useMemo)(function(){return U.map(function(e){return!!(null==e?void 0:e.mvpDescription)}).filter(Boolean)},[U]),M=(0,p.J2)(O);(0,p.q3)(O,{next:function(){S()}});var H=(0,c.useMemo)(function(){return b.reduce(B,10).result.filter(Boolean)},[b]),z=(0,a._)((0,c.useState)(null),2),W=z[0],G=z[1],V=(0,_._)();(0,p.q3)(H,{next:function(){null==V||V.end(),null==W||W.focus()}});var j=(0,h.W)(),Z=(0,c.useRef)(!0),q=(0,c.useRef)(new Map),K=(0,p.Rj)(function(){return null==U?void 0:U.select(function(e){return null==e?void 0:e.attachments})},[U]),$=(0,f._P)({controlName:"flag-agent-debug-info-button"});return(0,s.FD)(F.S,{clsx:L().root,children:[!M&&K&&(null==K?void 0:K.length)>0?(0,s.FD)(F.S,{clsx:L().attachmentsWrapper,gap:8,children:[(0,s.Y)(m.A,{fileAttachments:K.map(function(e){return(0,s.Y)(g.m1,{attachment:(0,o._)((0,i._)({},e),{path:e.name,dataUrl:e.url}),getAttachmentTypeDisclaimer:(0,v.F)({aiName:(0,d.Nn)({capitalizeFirstChar:!0})})},e.name)})}),(0,s.Y)(R.a,{})]}):null,(0,s.Y)(T.y,{padding:"8px 8px 32px 8px",scrollCacheKey:"lobby",scrollCache:q.current,shouldAutoScrollRef:Z,autoScrollBehavior:"smooth",children:(0,s.Y)(N,{session:b})}),(0,s.Y)(D.e,{session:b}),(0,s.Y)(x.G,{children:(0,s.Y)(A.A,{inputRef:G,status:"composing",onSubmit:P,uploadFiles:j,isSubmitDisabled:!1,submitDisabledReason:null,persistenceKey:"lobby-input",disablePlaceholderAnimation:!0,requireTextToSubmit:!0,disableUrlDetectionFeature:!0,debugButton:$?(0,s.Y)(I.ui,{row:!0,children:(0,s.Y)(y.A,{sessionId:b.id,sessionType:u.dF3.REPL_CREATION_V3})}):null})})]})}function N(e){var n=e.session,t=(0,p.Rj)(function(){return n.transform(M,1e3)},[n]);return(0,s.Y)(s.FK,{children:null==t?void 0:t.map(function(e){var n=(0,a._)(e,2),t=n[0],r=n[1];return(0,s.Y)(O,{item:r},t)})})}function O(e){var n=(0,p.J2)(e.item);switch(null==n?void 0:n.type){case"aiMessage":return(0,s.Y)(S.e,{timestamp:n.created,children:(0,s.Y)(b.d2,{text:n.message,messageState:n.state})});case"userMessage":return(0,s.Y)(Y._W,{userId:n.userId,created:n.created,children:(0,s.Y)(Y.wo,{message:n.message,acknowledged:!0})})}return null}var M={direction:"forward",state:{latestStack:null},transformer:function(e,n){var t=e.contents.contents;if((null==t?void 0:t.$kind)==="messageEventContents"){if(e.sender.type===u.utd.AI)return{type:"aiMessage",message:t.messageEventContents.content,created:e.created,state:e.state};if(e.sender.type===u.utd.USER){var r=t.messageEventContents,i=r.content,o=r.attachedForm;if(""===i){var a,l=(0,C.L5)(null!==(a=null==o?void 0:o.fields)&&void 0!==a?a:[]).stack;if(l&&n.latestStack!==l){n.latestStack=l;var s=k.Z.find(function(e){return e.value===l});if(!s)return;return{type:"userMessage",message:"Change app type to "+s.title,userId:Number(e.sender.id),created:e.created}}return}return{type:"userMessage",message:i,userId:Number(e.sender.id),created:e.created}}}}},B={direction:"forward",state:{hasAgentResponse:!1},map:function(e){return e.hasAgentResponse},reducer:function(e,n){var t;return!n.hasAgentResponse&&(e.sender.type===u.utd.AI&&(null===(t=e.contents.contents)||void 0===t?void 0:t.$kind)==="messageEventContents"?(n.hasAgentResponse=!0,!1):void 0)}}},34231:(e,n,t)=>{"use strict";t.d(n,{Y:()=>d});var r=t(17844),i=t(93629),o=t(17459),a=t(1889),l=t(21462),s=t(92302),c=t(61234),u=t(43974),d=(0,l.forwardRef)(function(e,n){var t=e.children,l=(0,o._)(e,["children"]);return(0,a.Y)(s.Y,(0,i._)((0,r._)({},l),{ref:n,css:p.group,children:t}))}),p=(0,c.x)({group:[u.wp.display.flex,u.wp.flex.row,u.wp.gap(1),u.wp.align.stretch,{"> :not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"> :not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}}]})},34495:(e,n,t)=>{"use strict";t.d(n,{T:()=>o});var r=t(12584);function i(){var e=(0,r._)(["\n  fragment CreateProjectForkRepl on Repl {\n    id\n    publishedAs\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n  }\n"]);return i=function(){return e},e}var o=(0,t(41114).J1)(i())},34555:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(1889),i=t(6680),o=t(61234),a=t(43974),l=t(35869),s=(0,o.x)({root:[a.wp.p(4),a.wp.borderRadius(8),a.wp.backgroundColor.backgroundRoot,a.wp.border({color:i.LU.outlineDimmest})],video:[a.wp.borderRadius(8),a.wp.width("100%")]});function c(e){var n=e.src,t=e.autoPlay,i=e.loop,o=e.width;return(0,r.Y)(l.S,{css:s.root,style:{width:void 0===o?280:o},children:(0,r.Y)("video",{css:s.video,src:n,autoPlay:void 0===t||t,loop:void 0===i||i,playsInline:!0,muted:!0})})}},34787:(e,n,t)=>{"use strict";t.d(n,{j:()=>w,n:()=>v});var r=t(83846),i=t(1889),o=t(91396),a=t(61234),l=t(43974),s=t(93682),c=t(95949),u=t(18063),d=t(12966),p=t(7146),f=t(40043),h=t(35869),m=(0,a.x)({select:l.wp.minWidth(200),wrapper:[l.wp.rowWithGap(8),l.wp.align.center,(0,r._)({},o.c,[l.wp.flex.rowReverse])],rightComponentWrapper:(0,r._)({},o.c,[l.wp.ml(8)]),titleHeading:[l.wp.center,l.wp.justify.start],staffOnlyPill:[l.wp.height(18)]});function g(e){var n=e.children,t=e.settingName,r=e.settingDescription,a=e.settingId,l=e.title,s=e.rightComponent,c=e.isStaffOnly,d=l;return l||(d=r?(0,i.FD)(i.FK,{children:[(0,i.FD)(h.S,{css:m.titleHeading,row:!0,gap:8,children:[(0,i.Y)(f.EY,{multiline:!1,children:t}),c?(0,i.Y)(u.a,{css:m.staffOnlyPill,text:"Staff-only",colorway:"warning"}):null]}),(0,i.Y)(f.EY,{variant:"small",color:"dimmest",children:r})]}):(0,i.Y)(f.EY,{multiline:!1,children:t})),(0,i.Y)(o.w,{id:a,title:d,children:(0,i.FD)(h.S,{css:m.wrapper,children:[s?(0,i.Y)(h.S,{css:m.rightComponentWrapper,children:s}):null,n]})})}function v(e){var n=e.setting,t=e.currentValue,o=e.update,a=e.rightComponent,l=e.filterOptions,s=e.title;if("select"===n.type){var u,f=l?n.options.filter(l):n.options;return(0,i.Y)(g,{settingName:n.name,settingDescription:n.description,settingId:n.id,title:s,rightComponent:a,children:(0,i.Y)(d.l,{"aria-label":n.name,style:{marginRight:0},items:f,defaultSelectedKey:null===(u=f.find(function(e){return t===e.editorPreferencesValue}))||void 0===u?void 0:u.id,onSelectionChange:function(e){var t;if("string"!=typeof n.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");o((0,r._)({},n.editorPreferencesKey,null===(t=f.find(function(n){return n.id===e}))||void 0===t?void 0:t.editorPreferencesValue))},css:m.select,dataCy:n.id,children:function(e){return(0,i.Y)(c.nh,{id:e.id,label:e.title,dataCy:e.id,fixedHeight:32},e.id)}})})}if("boolean"===n.type)return(0,i.Y)(g,{settingName:n.name,settingDescription:n.description,settingId:n.id,title:s,rightComponent:a,children:(0,i.Y)(p.d,{"aria-label":n.name,isSelected:t,onChange:function(e){if("string"!=typeof n.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");o((0,r._)({},n.editorPreferencesKey,e))},dataCy:n.id})});throw Error("Unsupported setting type")}function w(e){var n,t=e.setting,r=e.currentValueOption,a=e.disabledReason,l=(0,i.FD)(i.FK,{children:[(0,i.Y)(f.EY,{multiline:!1,children:t.name}),(0,i.Y)(f.EY,{variant:"small",color:"dimmest",children:a})]});return(0,i.Y)(o.w,{id:t.id,title:l,children:(0,i.Y)(h.S,{css:m.wrapper,children:r?(0,i.Y)(s.$n,{text:null!==(n=null==r?void 0:r.title)&&void 0!==n?n:"Disabled",disabled:!0}):null})})}},35036:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(12694),i=t(21462),o=t(11597),a=t(67337),l=t(61136);function s(){var e=(0,a.A)().fs,n=(0,r._)((0,i.useState)(!1),2),t=n[0],s=n[1],c=(0,l.A)(),u=c.didConnectOnce,d=c.didDisconnect;return((0,i.useEffect)(function(){return s(e.getStatus()===o.sn.Syncing),e.onStatusChange(function(e){s(e===o.sn.Syncing)})},[e]),u)?{isSaving:t,isOffline:d}:{isSaving:!1,isOffline:!1}}},35121:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M3.75 5.646a2.751 2.751 0 1 0-1.5 0V6.5A2.75 2.75 0 0 0 5 9.25h6.25v2H7.2a1.95 1.95 0 0 0-1.95 1.95v6a1.95 1.95 0 0 0 1.95 1.95h4.05v.9H9.6a.75.75 0 0 0 0 1.5h4.8a.75.75 0 0 0 0-1.5h-1.65v-.9h4.05a1.95 1.95 0 0 0 1.95-1.95v-6a1.95 1.95 0 0 0-1.95-1.95h-4.05v-2H19a2.75 2.75 0 0 0 2.75-2.75v-.854a2.751 2.751 0 1 0-1.5 0V6.5c0 .69-.56 1.25-1.25 1.25h-6.25V5.646a2.751 2.751 0 1 0-1.5 0V7.75H5c-.69 0-1.25-.56-1.25-1.25v-.854ZM1.75 3a1.25 1.25 0 1 1 2.5 0 1.25 1.25 0 0 1-2.5 0ZM21 4.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5ZM13.25 3a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM7.2 12.75a.45.45 0 0 0-.45.45v6c0 .248.201.45.45.45h9.6a.45.45 0 0 0 .45-.45v-6a.45.45 0 0 0-.45-.45H7.2Z",clipRule:"evenodd"})}))}},35225:(e,n,t)=>{"use strict";t.d(n,{P:()=>x});var r=t(29935),i=t(82643),o=t(1889),a=t(21462),l=t(80478),s=t(26496),c=t(83472),u=t(80865),d=t(2904),p=t(23718),f=t(90298),h=t(80703),m=t(95758),g=t(6680),v=t(35707),w=t(81879),y=t(85280),b=t(70325),S=t(25796),Y=t(97783),A=t(52355),C=t(97003);function x(e){var n,t,x,k,_,D,E,R,I,F,T,P,L=e.xterm,U=e.openAIWithMessage,N=e.openShellSearch,O=e.openSearchAndReplace,M=e.openGeneratePrompt,B=e.isOutputsTerminal,H=(t=(n={xterm:L,openAIWithMessage:U,openGeneratePrompt:M}).xterm,x=n.openAIWithMessage,k=n.openGeneratePrompt,_=(0,u._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),D=(0,h.Jn)(f.Ws.id),(0,a.useMemo)(function(){if(!_){var e=[];if(k&&e.push({match:p.G2,data:{type:"action",label:"Generate command",icon:(0,o.Y)(S.A,{color:g.LU.tealStronger}),keyboardShortcut:D,run:function(){k()}}}),x&&e.push({match:p.G2,data:{type:"action",label:"Ask ".concat(s.BP),icon:(0,o.Y)(v.A,{color:g.LU.tealStronger}),run:function(){var e,n=null!==(e=null==t?void 0:t._term.getSelection())&&void 0!==e?e:"";x((0,c.yt)(n))}}}),0!==e.length)return{data:{type:"context",label:"AI",icon:(0,o.Y)(b.A,{})},commands:function(){return e}}}},[_,x,D,k,null==t?void 0:t._term])),z=(R=(E={xterm:L,openShellSearch:N,openSearchAndReplace:O,isOutputsTerminal:void 0!==B&&B}).xterm,I=E.openShellSearch,F=E.openSearchAndReplace,T=E.isOutputsTerminal,(0,a.useMemo)(function(){var e=[];if(I){var n=T?(0,o.Y)(C.A,{}):(0,o.Y)(A.A,{});e.push({match:p.G2,data:{type:"action",label:T?"Find in Console":"Find in Shell",icon:n,run:function(){var e;I(null!==(e=null==R?void 0:R._term.getSelection())&&void 0!==e?e:"")}}})}if(F&&e.push({match:p.G2,data:{type:"action",label:"Find in Repl",icon:(0,o.Y)(Y.A,{}),run:function(){var e;F(null!==(e=null==R?void 0:R._term.getSelection())&&void 0!==e?e:"")}}}),0!==e.length)return{data:{type:"context",label:"Search",icon:(0,o.Y)(Y.A,{})},commands:function(){return e}}},[R,I,F,T])),W=(P=function(){return window.navigator.userAgent.includes("Linux")},(0,a.useMemo)(function(){return{data:{type:"context",label:"Clipboard",icon:(0,o.Y)(w.A,{})},commands:function(){return[{match:p.G2,data:{type:"action",label:"Copy",icon:(0,o.Y)(y.A,{}),keyboardShortcut:(0,m.FM)({cmdOrCtrl:!0,shift:P(),key:"c"}),run:function(){var e,n=null!==(e=null==L?void 0:L._term.getSelection())&&void 0!==e?e:"";(0,d.default)(n)}}},{match:p.G2,data:{type:"action",label:"Paste",icon:(0,o.Y)(w.A,{}),keyboardShortcut:(0,m.FM)({cmdOrCtrl:!0,shift:P(),key:"v"}),run:function(){return(0,r._)(function(){var e,n;return(0,i.YH)(this,function(t){switch(t.label){case 0:e="",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return e=t.sent(),[3,4];case 3:return n=t.sent(),l.vF.error("Shell context menu paste failed",{message:n.message}),[2];case 4:return null==L||L._term.paste(e),[2]}})})()}}}]}}},[L]));return(0,a.useMemo)(function(){var e=[];return H&&e.push(H),z&&e.push(z),W&&e.push(W),{data:{type:"context",label:"Search actions",icon:(0,o.Y)(Y.A,{})},commands:function(){return e}}},[H,z,W])}},35809:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M10.64 2.354A9.75 9.75 0 1 1 2.803 15.25a.75.75 0 0 1 1.414-.498 8.25 8.25 0 1 0 1.937-8.564L2.894 9.25H7a.75.75 0 0 1 0 1.5H1A.75.75 0 0 1 .25 10V4a.75.75 0 0 1 1.5 0v4.266l3.368-3.165a9.75 9.75 0 0 1 5.522-2.747ZM12 6.25a.75.75 0 0 1 .75.75v4.932l3.666 2.444a.75.75 0 1 1-.832 1.248l-4-2.667a.75.75 0 0 1-.334-.624V7a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},36662:(e,n,t)=>{"use strict";t.d(n,{VW:()=>L,pR:()=>P,wQ:()=>T});var r=t(17844),i=t(93629),o=t(12694),a=t(1889),l=t(21462),s=t(12584),c=t(41114),u=t(86997),d=t(40085);function p(){var e=(0,s._)(["\n  query ReservedVMMachineConfigurations($replId: String) {\n    hostingMachineConfigurations(input: { provider: gce, replId: $replId }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var f={},h=(0,c.J1)(p(),d.yH),m=t(88184),g=t(29824),v=t(42545),w=t(2385),y=t(86960),b=t(49295),S=t(50172),Y=t(6680),A=t(61234),C=t(62493),x=t(43974),k=t(93682),_=t(31618),D=t(40043),E=t(35869),R=t(38224),I=t(44144),F=(0,A.x)({header:[x.wp.mb(16)],costWrapper:[x.wp.flex.shrink(1)],cost:[x.wp.align.baseline],selectWrapper:x.wp.rowWithGap(12),selectInner:[x.wp.flex.growAndShrink(1)],select:[x.wp.border({color:Y.LU.outlineDefault}),{flex:"1 1 auto"}]});function T(e){var n,t=e.replId,i=e.onError,o=(n=(0,r._)({},f,{variables:{replId:t},onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename&&i("Something went wrong")},onError:function(e){return i(e.message)}}),u.I(h,n)),a=o.data,l=o.loading;return{machineConfigurations:(null==a?void 0:a.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?a.hostingMachineConfigurations.results:null,loading:l}}function P(e){var n=e.machineConfigurations;return e.isTeamRepl?n.find(function(e){return"e2-micro"===e.slug}):n.find(function(e){return"e2-small"===e.slug})}var L=function(e){var n=e.replId,t=e.initialMachineConfiguration,s=e.isTeamRepl,c=e.onChange,u=e.onConfirm,d=e.onError,p=e.onBack,f=(0,o._)((0,l.useState)(t?(0,i._)((0,r._)({},t),{maxInstances:1}):void 0),2),h=f[0],Y=f[1],A=(0,(0,g._k)().getRvmDeploymentCostDetailsByConfigurationSlug)(null==h?void 0:h.configurationSlug),L=A.costPerHour,U=A.costPerMonth,N=(0,o._)((0,l.useState)(!1),2),O=N[0],M=N[1],B=T({replId:n,onError:d}),H=B.machineConfigurations,z=B.loading;(0,l.useEffect)(function(){(0,v.Ae)({context:w.P.AutoscaleMachineConfiguration})},[]),(0,l.useEffect)(function(){if(H&&!h){var e=P({machineConfigurations:H,isTeamRepl:s});if(!e){d("An error occurred trying to validate default machine configuration");return}var n={configurationId:e.id,configurationLabel:e.label,configurationSlug:e.slug,maxInstances:1};Y(n),"function"==typeof c&&c(n)}},[H,h,s,c,d]);var W=H&&(null==H?void 0:H.length)>0,G=z||s||O||!W;return(0,a.FD)(a.FK,{children:[(0,a.Y)(b.A,{maxWidth:!0,children:(0,a.Y)(S.fw,{onBack:p})}),(0,a.FD)(b.A,{maxWidth:!0,children:[(0,a.FD)(E.S,{css:F.header,gap:4,children:[(0,a.Y)(D.EY,{variant:"subheadBig",children:"Reserved VM configuration"}),(0,a.Y)(D.EY,{variant:"small",color:"dimmer",children:"Reserved VM apps are always on and can have a dedicated machine. You are billed for the total number of hours your machines have been running for. The cost per hour changes depending on your machine configuration."})]}),(0,a.Y)(y.K,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app. You can change it at any time.",children:h?(0,a.FD)(a.FK,{children:[(0,a.Y)(E.S,{css:F.selectWrapper,children:s?(0,a.Y)(_.pd,{value:h.configurationLabel,disabled:!0}):(0,a.FD)(a.FK,{children:[(0,a.Y)(E.S,{css:F.selectInner,children:(0,a.Y)(R.l,{css:F.select,initialSelectedItem:{id:h.configurationId,title:h.configurationLabel},items:W?Object.values(H).map(function(e){var n=e.id;return{title:e.label,id:n}}):[],onChange:function(e){var n=e.id,t=null==H?void 0:H.find(function(e){return e.id===n});if(!t){d("An error occurred trying to validate selected machine configuration");return}var r={configurationId:t.id,configurationLabel:t.label,configurationSlug:t.slug,maxInstances:1};Y(r),"function"==typeof c&&c(r)},disabled:G})}),(0,a.Y)(E.S,{css:F.costWrapper,row:!0,gap:2,align:"center",children:(0,a.FD)(E.S,{css:F.cost,row:!0,gap:4,children:[(0,a.FD)(D.EY,{variant:"subheadDefault",multiline:!1,children:["$",U]}),(0,a.Y)(D.EY,{color:"dimmer",variant:"small",multiline:!1,children:"per month"}),(0,a.FD)(D.EY,{color:"dimmer",variant:"small",multiline:!1,children:["($",L,"/hour)"]})]})})]})}),"function"==typeof u?(0,a.FD)(E.S,{gap:8,css:[x.wp.pt(8)],children:[(0,a.Y)(k.$n,{colorway:"primary",text:"Approve and update",iconRight:(0,a.Y)(I.A,{}),onClick:function(){if(!h){d("An error occurred trying to validate selected machine configuration");return}M(!0),u(h)},loading:z,disabled:G}),(0,a.FD)(D.EY,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,a.Y)("a",{href:m.ik.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]}):null]}):(0,a.Y)(E.S,{css:[C.S.foregroundPulse(),x.wp.borderRadius(8)],children:(0,a.Y)(_.pd,{disabled:!0})})})]})]})}},36672:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M13.163 3.834a8.25 8.25 0 1 0 6.62 10.916.75.75 0 1 1 1.414.5 9.75 9.75 0 1 1-2.305-10.148l3.358 3.162V4a.75.75 0 0 1 1.5 0v6a.75.75 0 0 1-.75.75h-6a.75.75 0 0 1 0-1.5h4.11l-3.254-3.064a8.25 8.25 0 0 0-4.693-2.352Z",clipRule:"evenodd"})}))}},36701:(e,n,t)=>{"use strict";t.d(n,{D:()=>a});var r=t(75152),i=t(24998),o=r.ZU.Object({type:r.ZU.Literal("commands"),data:r.ZU.Object({autoFocus:r.ZU.Boolean()})}),a=function(e){return i.WT.Decode(o,e)}},37094:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(86846);let i=[r.SymbolKind.Array,r.SymbolKind.Boolean,r.SymbolKind.Class,r.SymbolKind.Constant,r.SymbolKind.Constructor,r.SymbolKind.Enum,r.SymbolKind.EnumMember,r.SymbolKind.Event,r.SymbolKind.Field,r.SymbolKind.File,r.SymbolKind.Function,r.SymbolKind.Interface,r.SymbolKind.Key,r.SymbolKind.Method,r.SymbolKind.Module,r.SymbolKind.Namespace,r.SymbolKind.Object,r.SymbolKind.Operator,r.SymbolKind.Package,r.SymbolKind.Property,r.SymbolKind.String,r.SymbolKind.Struct,r.SymbolKind.TypeParameter,r.SymbolKind.Variable]},37497:(e,n,t)=>{"use strict";t.d(n,{K:()=>m});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  fragment AgentAuthorizations on OrgAuthorizations {\n    paidAgent: useAiAgent(tier: paid) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n    freeAgent: useAiAgent(tier: free) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  query GetAgentRepl($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  query GetAgentReplAuthorizations($orgId: String) {\n    currentUser {\n      id\n      personalOrgAuthorizations {\n        ... on OrgAuthorizations {\n          ...AgentAuthorizations\n        }\n        ... on Error {\n          message\n        }\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          authorizations {\n            ... on OrgAuthorizations {\n              ...AgentAuthorizations\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},d=(0,o.J1)(l()),p=(0,o.J1)(s()),f=(0,o.J1)(c(),d),h=t(16907);function m(){var e,n,t,i,o,l,s,c,d,m,g=(l=(t={variables:{replId:(0,h.A)()}},i=(0,r._)({},u,t),o=a.I(p,i)).data,s=o.loading,c=o.error,{orgId:(null==l?void 0:l.getRepl.__typename)==="Repl"?null===(n=l.getRepl.org)||void 0===n?void 0:n.id:void 0,loading:s,error:c}),v=g.orgId,w=g.loading,y=g.error,b=(e=(0,r._)({},u,{variables:{orgId:v}}),a.I(f,e)),S=b.data,Y=b.loading,A=b.error,C=b.refetch;return w||Y?{loading:!0,refetch:C}:y||A?{loading:!1,refetch:C}:void 0===v?{authorizations:(null==S?void 0:null===(m=S.currentUser)||void 0===m?void 0:m.personalOrgAuthorizations.__typename)==="OrgAuthorizations"?S.currentUser.personalOrgAuthorizations:void 0,loading:!1,refetch:C}:{authorizations:(null==S?void 0:null===(d=S.currentUser)||void 0===d?void 0:d.org.__typename)==="Org"?S.currentUser.org.authorizations:void 0,loading:!1,refetch:C}}},38027:(e,n,t)=>{"use strict";t.d(n,{El:()=>E,GK:()=>D,qX:()=>_});var r=t(29935),i=t(37743),o=t(41292),a=t(88967),l=t(58075),s=t(73238),c=t(6132),u=t(48122),d=t(17844),p=t(93629),f=t(12694),h=t(82643),m=t(21462),g=t(48686),v=t(85788),w=t(93415),y=t(24948),b=t(49259),S=new WeakMap,Y=new WeakMap,A=new WeakMap,C=new WeakSet,x=function(){function e(n){var t,s=n.navigateIframeRef,u=n.onReceiveWebviewLog,d=n.onReceiveWebviewScreenshot;(0,i._)(this,e);var p=this;(0,c._)(this,C),(0,a._)(this,S,{writable:!0,value:void 0}),(0,a._)(this,Y,{writable:!0,value:void 0}),(0,a._)(this,A,{writable:!0,value:void 0}),(0,l._)(this,Y,[]),(0,l._)(this,S,new v.V_(function(e){var n=function(n){return(0,y.Cw)(n,function(n){return e.next(n.paneResponse)})};return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}})),(0,o._)(this,Y).push((0,o._)(this,S).subscribe((t=(0,r._)(function(e){var n,t,r;return(0,h.YH)(this,function(i){switch(i.label){case 0:if("webview"!==e.paneType||"navigation"!==e.response.type)return[3,4];if("base"in e.response&&"path"in e.response&&"port"in e.response||(null===(n=(0,o._)(p,A))||void 0===n?void 0:n.path)===e.response.path)return[3,2];return(0,l._)(p,A,{base:"",path:e.response.path,port:80}),[4,null===(t=s.current)||void 0===t?void 0:t.call(s,(0,o._)(p,A).path,(0,o._)(p,A).port)];case 1:return i.sent(),[2];case 2:var a,c;if(a=(0,o._)(p,A),c=e.response,a&&c&&a.base===c.base&&a.path===c.path&&a.port===c.port)return[3,4];return(0,l._)(p,A,e.response),[4,null===(r=s.current)||void 0===r?void 0:r.call(s,(0,o._)(p,A).path,(0,o._)(p,A).port)];case 3:i.sent(),i.label=4;case 4:return[2]}})}),function(e){return t.apply(this,arguments)}))),(0,o._)(this,Y).push((0,o._)(this,S).subscribe(function(e){"webview"===e.paneType&&"logs"===e.response.type&&u(e.response.method,e.response.message.map(function(e){try{return JSON.stringify(e,null,0)}catch(e){return"Devtools error: console message could not be stringified"}}).join(" "))})),(0,o._)(this,Y).push((0,o._)(this,S).subscribe(function(e){"webview"===e.paneType&&"screenshot"===e.response.type&&d(e.response.dataUri)}))}var n=e.prototype;return n.dispose=function(){(0,o._)(this,Y).forEach(function(e){return e()})},n.refresh=function(){(0,s._)(this,C,k).call(this,{type:"refresh"})},n.setInsets=function(e){(0,s._)(this,C,k).call(this,{type:"setInsets",insets:e})},n.handleNavigateTo=function(e){var n,t,r,i,a,l,c,u,f;if(e.base===(null===(n=(0,o._)(this,A))||void 0===n?void 0:n.base)&&e.port===(null===(t=(0,o._)(this,A))||void 0===t?void 0:t.port)&&e.path===(null===(r=(0,o._)(this,A))||void 0===r?void 0:r.path)){this.refresh();return}(0,s._)(this,C,k).call(this,(0,p._)((0,d._)({type:"navigate"},e),{url:(l=e.base,c=null!==(i=e.path)&&void 0!==i?i:"/",u=null!==(a=e.port)&&void 0!==a?a:80,(f=new URL(l)).pathname=c.startsWith("/")?c:"/".concat(c),80!==u&&(f.port=u.toString()),f.toString())}))},(0,u._)(e,[{key:"path",get:function(){return(0,o._)(this,S).filter(function(e){return"webview"===e.paneType&&"navigation"===e.response.type}).select(function(e){return e.response.path})}}]),e}();function k(e){var n={messageType:b.tF.REQUEST_PANE_ACTION,paneAction:{paneType:"webview",action:e}};(0,y._z)(n,(0,g.Ak)())}function _(){var e=(0,w.Dr)("webviewBridge"),n=(0,w.Dr)("workspace2");return(0,m.useMemo)(function(){return e&&n},[e,n])}function D(e){var n=e.initialPort,t=e.initialPath,r=e.baseUrl,i=e.isSupported,o=e.navigateIframeRef,a=e.onReceiveWebviewLog,l=e.onReceiveWebviewScreenshot,s=(0,f._)((0,m.useState)(null),2),c=s[0],u=s[1];(0,m.useEffect)(function(){if(i){var e=new x({navigateIframeRef:o,onReceiveWebviewLog:a,onReceiveWebviewScreenshot:l});return u(e),function(){e.dispose()}}},[i,o,a,l]);var d=(0,m.useRef)(void 0);return(0,m.useEffect)(function(){i&&c&&r&&d.current!==n&&(d.current=n,c.handleNavigateTo({base:r,port:n,path:t}))},[r,c,t,n,i]),c}function E(e){var n=e.isVisible,t=_();(0,m.useEffect)(function(){t&&((0,y._z)({messageType:b.tF.REQUEST_PANE_ACTION,paneAction:{paneType:"webview",action:{type:"setVisibility",isVisible:n}}},(0,g.Ak)()),n||(0,y._z)({messageType:b.tF.REQUEST_PANE_ACTION,paneAction:{paneType:"webview",action:{type:"navigate",base:"",url:"INVALID_URL_TO_HIDE_NATIVE_WEBVIEW"}}},(0,g.Ak)()))},[t,n])}},38169:(e,n,t)=>{"use strict";t.d(n,{h:()=>Y});var r=t(1889),i=t(17844),o=t(12584),a=t(41114),l=t(86997),s=t(51066);function c(){var e=(0,o._)(["\n  query WorkspaceUsageBudget($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          ... on Org {\n            id\n            authorizations {\n              editUsageLimit {\n                isAuthorized\n                message\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,o._)(["\n  query WorkspaceUsageBasedBillingAlerts($orgId: String) {\n    currentUser {\n      id\n      usageBasedBillingAlerts {\n        ...EditUsageBasedBillingAlertsFormInitialConfig\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          name\n          usageBasedBillingAlerts {\n            ...EditUsageBasedBillingAlertsFormInitialConfig\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var d={},p=(0,a.J1)(c()),f=(0,a.J1)(u(),s.B9),h=t(47606),m=t(48082),g=t(61234),v=t(43974),w=t(3910),y=t(35869),b=t(78839),S=(0,g.x)({budgetContainer:[v.wp.colWithGap(8),v.wp.border(),v.wp.borderRadius(8),v.wp.p(8)],budgetContainerBorderless:[v.wp.colWithGap(8),v.wp.p(8)],bannerText:[v.wp.textAlign.left]});function Y(e){var n,t,o,a,s,c,u,g,v=e.replId,Y=e.onUpdateSuccess,A=e.style,C=(n=(0,i._)({},d,{variables:{replId:v}}),l.I(p,n)),x=C.data,k=C.loading,_=C.error,D=(0,h.R)(v).orgId,E=(t=(0,i._)({},d,{variables:{orgId:D}}),l.I(f,t)),R=E.data,I=E.loading,F=E.error;if(!x||!R||k||I)return null;if(D?(a=(null===(s=R.currentUser)||void 0===s?void 0:s.org.__typename)==="Org"?null===(c=R.currentUser)||void 0===c?void 0:c.org:void 0,o=(null===(u=R.currentUser)||void 0===u?void 0:u.org.__typename)==="Org"&&"UsageBasedBillingAlertsConfig"===R.currentUser.org.usageBasedBillingAlerts.__typename?R.currentUser.org.usageBasedBillingAlerts:void 0):o=(null===(g=R.currentUser)||void 0===g?void 0:g.usageBasedBillingAlerts.__typename)==="UsageBasedBillingAlertsConfig"?R.currentUser.usageBasedBillingAlerts:void 0,_)return(0,r.Y)(w.N,{css:S.bannerText,colorway:"red",text:_.message,icon:(0,r.Y)(b.A,{})});if(F)return(0,r.Y)(w.N,{css:S.bannerText,colorway:"red",text:F.message,icon:(0,r.Y)(b.A,{})});var T="Repl"===x.getRepl.__typename&&x.getRepl.org?x.getRepl.org:void 0,P=(null==T?void 0:T.authorizations.editUsageLimit.isAuthorized)===!1?T.authorizations.editUsageLimit.message:void 0;return P?(0,r.Y)(w.N,{css:S.bannerText,colorway:"red",text:"".concat(P," Reach out to an org admin to update your usage budget."),icon:(0,r.Y)(b.A,{})}):(0,r.Y)(y.S,{css:"outlined"===(void 0===A?"outlined":A)?S.budgetContainer:S.budgetContainerBorderless,children:(0,r.Y)(m.j,{org:a,initialSettings:o,onDone:function(){return Y}})})}},38195:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(86105),i=t(1889),o=t(13087),a=t.n(o),l=t(33977);function s(e){var n,t=e.repl,o=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,r._)(n.filter(Boolean)).concat(["Replit"]).join(" - ")}((0,l.mU)(),null==t?void 0:null===(n=t.project)||void 0===n?void 0:n.title,t.title);return(0,i.Y)(a(),{children:(0,i.Y)("title",{children:o},"title")})}},38200:(e,n,t)=>{"use strict";t.d(n,{A:()=>f});var r=t(17844),i=t(93629),o=t(1889),a=t(6680),l=t(61234),s=t(43974),c=t(29253),u=t(37407),d=t(35869),p=(0,l.x)({default:[],withOnClick:[s.wp.cursor.pointer,{transition:"all 0.2s ease","&:hover":{filter:"brightness(95%)",boxShadow:a.LU.shadow1}}]});function f(e){var n=e.user,t=e.onClick,a=e.size,l=void 0===a?24:a;return(0,o.Y)(u.m_,{placement:"bottom",tooltip:t?"Observe ".concat(n.username):n.username,children:function(e,a){return(0,o.Y)(d.S,(0,i._)((0,r._)({},e),{innerRef:a,onClick:t,children:(0,o.Y)(c.e,{size:l,src:n.image||null,username:n.username,ringColor:n.color,css:t?p.withOnClick:p.default})}))}})}},38349:(e,n,t)=>{"use strict";t.d(n,{IW:()=>j,Eo:()=>q,cz:()=>eR,wb:()=>eC,AK:()=>W,oE:()=>z,Jl:()=>eu,cQ:()=>es,I7:()=>ex,oh:()=>N,ch:()=>ed,bD:()=>e_,d_:()=>eP,sT:()=>eI,KZ:()=>eF,qP:()=>eT,wS:()=>ey,Ah:()=>eE,jP:()=>er,z1:()=>B,b7:()=>ea,gR:()=>eS,MP:()=>eD,Ss:()=>H,vJ:()=>G,af:()=>V,j3:()=>el,nd:()=>ee,hk:()=>ei,XO:()=>eo,mP:()=>et,OK:()=>L,If:()=>$,g3:()=>ev});var r=t(29935),i=t(17844),o=t(12694),a=t(86105),l=t(82643),s=t(292),c=t.n(s),u=t(21462),d=t(23099),p=t.n(d),f=t(35992),h=t(44370),m=t(68820),g=t(72004),v=t(26496),w=t(68209),y=t(33105),b=t(2658),S=t(11438),Y=t(80865),A=t(2960),C=t(78932),x=t(96497),k=t(52690),_=t(67337),D=t(25782),E=t(46434),R=t(60990),I=t(79768),F=t(99667),T=t(61136),P=(0,h.eU)();function L(){return(0,F.h)(P)}var U=(0,h.eU)(!0);function N(){return(0,F.h)(U)}var O=(0,h.eU)(null,function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(0,f.jM)(e(P),t);return n(P,i),r.persist&&e(ew).persist(),i});function M(){return(0,F.ob)(O)}function B(){var e=M();return(0,u.useCallback)(function(n){return e(function(e){if(!e){e={runButton:n};return}e.runButton=n},{persist:!0})},[e])}function H(){var e=M();return(0,u.useCallback)(function(n,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).persist;return e(function(e){var r,i=null==e?void 0:null===(r=e.workflow)||void 0===r?void 0:r[n];i&&t(i)},{persist:r})},[e])}function z(){var e=M();return(0,u.useCallback)(function(n){return e(function(e){var t;null==e||null===(t=e.workflow)||void 0===t||t.splice(n,1)},{persist:!0})},[e])}function W(){var e=H();return(0,u.useCallback)(function(n){return e(n.workflowIndex,function(e){null==e||e.tasks.splice(n.taskIndex,1)},{persist:!0})},[e])}function G(){var e=H();return(0,u.useCallback)(function(n,t,r){var i=r.persist;return e(n.workflowIndex,function(e){e.tasks[n.taskIndex]=t},{persist:i})},[e])}function V(){var e=H();return(0,u.useCallback)(function(n,t,r){var i=r.persist;return e(n.workflowIndex,function(e){e.tasks=t},{persist:i})},[e])}function j(){var e=H();return(0,u.useCallback)(function(n){return e(n,function(e){var n,t=null!==(n=e.tasks[e.tasks.length-1])&&void 0!==n?n:{};e.tasks.push(t?(0,i._)({},t):{task:"shell.exec",args:""})})},[e])}var Z=(0,h.eU)(null,function(e,n,t){var r=n(O,function(e){if(void 0===e)return{workflow:[t]};e.workflow?e.workflow.push(t):e.workflow=[t]},{persist:!0});return c()(null==r?void 0:r.workflow),r.workflow.length-1});function q(){return(0,F.ob)(Z)}var K=(0,h.eU)(void 0);function $(){return(0,F.h)(K)}var J=(0,h.eU)(function(e){var n,t=e(P);return null!==(n=null==t?void 0:t.workflow)&&void 0!==n?n:[]}),Q=(0,m.mg)(J,function(e){var n;return null!==(n=null==e?void 0:e.map(function(e,n){return n}))&&void 0!==n?n:[]},p()),X=(0,h.eU)(function(e){var n=function(e){var n=!0,t=!1,i=void 0;try{for(var o,a=e.tasks[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if("workflow.run"===l.task&&!r.includes(l.args))return(0,b._)('workflow "'.concat(l.args,'" not found'))}}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}return(0,b.Ok)(null)},t=e(J),r=e(en),i={};return t.forEach(function(e,t){var r=n(e);r.ok||(i[t]=r.error)}),i});function ee(e){return(0,F.h)((0,u.useMemo)(function(){return(0,m.mg)(X,function(n){return e in n?n[e]:null})},[e]))}var en=(0,m.mg)(J,function(e){var n;return null!==(n=null==e?void 0:e.map(function(e){return e.name}))&&void 0!==n?n:[]},p());function et(){return(0,F.h)(J)}function er(){return(0,F.h)(eh)}function ei(){return(0,F.h)(Q)}function eo(){return(0,F.h)(en)}function ea(e){var n,t;return(0,F.h)((n=e.workflowIndex,t=e.taskIndex,(0,u.useMemo)(function(){return(0,m.mg)(J,function(e){var r;return e?null===(r=e[n])||void 0===r?void 0:r.tasks[t]:null})},[n,t])))}function el(e){return(0,F.h)((0,u.useMemo)(function(){return(0,m.mg)(J,function(n){return n?n[e]:null})},[e]))}function es(){return(0,F.Ou)(J)}function ec(e){var n=(0,u.useMemo)(function(){return(0,h.eU)(function(n){var t,r=null===(t=n(J)[e])||void 0===t?void 0:t.name;if(!r)return null;var i=n(K);return i?function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,l=Object.values(e)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;s.workflow.name===n&&t.push(s)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t.length?t.sort(function(e,n){return e.startTime-n.startTime}):null}(i,r):null})},[e]);return(0,u.useMemo)(function(){return(0,m.mg)(n,function(e){return e?e[e.length-1]:null})},[n])}function eu(e){return(0,F.Ou)(ec(e))}function ed(e){var n;return(0,F.AI)((n=ec(e),(0,u.useMemo)(function(){return(0,m.mg)(n,function(e){return(null==e?void 0:e.step)===y.zY.RUNNING})},[n])))}function ep(){return(ep=(0,r._)(function(e,n){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:return[4,e.updateDotReplit([(null===(t=n.workflow)||void 0===t?void 0:t.length)||n.runButton?{path:"workflows",op:"add",value:JSON.stringify(n)}:{path:"workflows",op:"remove",value:""}])];case 1:if(r.sent().error)return[2,(0,b._)("Error applying update")];return[2,(0,b.Ok)(null)]}})})).apply(this,arguments)}var ef=(0,h.eU)(function(e){var n=e(P);if(!(null==n?void 0:n.workflow)||!(null==n?void 0:n.runButton))return null;var t=!0,r=!1,i=void 0;try{for(var o,a=n.workflow[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.name===n.runButton)return l}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return null}),eh=(0,m.mg)(ef,function(e){var n;return null!==(n=null==e?void 0:e.name)&&void 0!==n?n:null}),em=(0,h.eU)(function(e){var n=e(J).find(function(e){var n;return null===(n=e.metadata)||void 0===n?void 0:n.dotReplitRun});return n?n.name:null}),eg=(0,h.eU)(function(e){var n=e(K);if(!n)return null;var t=Object.values(n).filter(function(e){return e.step===y.zY.RUNNING});return 0===t.length?null:t});function ev(){var e,n=(0,F.h)(eh),t=(0,Y._P)({controlName:"flag-run-migration"}),i=(0,_.A)().fs,o=(0,I.o)(),a=(0,F.h)(em);!n&&t&&(n=a);var s=(0,F.h)(eg),c=eD();e=(0,u.useMemo)(function(){return null!==s&&s.some(function(e){return"agent"===e.userId})},[s])?k.ll.RUNNING:(null==s?void 0:s.some(function(e){return e.step===y.zY.RUNNING}))?k.ll.RUNNING:k.ll.IDLE;var d=(0,x.I)(function(e){var t;return t=(0,r._)(function(t){return(0,l.YH)(this,function(r){switch(r.label){case 0:if(!o.current)return[3,2];return[4,i.flush()];case 1:r.sent(),r.label=2;case 2:return c(t),[2,!!n&&e.workflows.runWorkflow.rpc({workflowId:n})]}})}),function(e){return t.apply(this,arguments)}},[o,c,n,i]),p=(0,x.I)(function(e){return function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).graceful;null==s||s.forEach(function(t){e.workflows.stopRun.rpc({runId:t.runId,graceful:n})})}},[s]);return null!==s||null!==n?{workflowId:n,run:d,stop:p,step:e,runningWorkflows:s}:null}var ew=(0,h.eU)({persist:(0,r._)(function(){return(0,l.YH)(this,function(e){return[2,(0,b.Ok)(null)]})})});function ey(){var e=(0,F.Ou)(ew);return(0,u.useCallback)(function(){return(0,e().persist)()},[e])}var eb=(0,h.eU)(!1);function eS(e){var n=(0,F.ob)(eb);(0,u.useEffect)(function(){n(e)},[n,e]),(0,u.useEffect)(function(){return function(){n(!1)}},[n,e])}var eY={PARSE_ERROR:"Failed to parse workflow configs from .replit",NOT_FOUND:"Missing .replit file",READ_FILE:"Error reading .replit"},eA=(0,h.eU)(void 0);function eC(){return(0,F.h)(eA)}function ex(e){var n,t,i,o,a,s,c=e.dotReplit,d=(0,F.Ou)(P),f=(0,F.ob)(P),h=(0,F.Ou)(eb),m=(0,F.ob)(eA),g=(0,F.ob)(U),v=(0,u.useCallback)(function(e){g(!1);var n=d();!(n&&h()||p()(e,n))&&f(e||{})},[g,d,h,f]),w=(0,u.useCallback)(function(e){g(!1),(0,D.Sb)(e.code)?m({code:e.code,message:eY[e.code],extras:e.extras}):m(void 0)},[m,g]);t=(n={onWorkflowsConfigChange:v,onRunStateChange:(0,F.ob)(K),onDotReplitStateChange:w}).onWorkflowsConfigChange,i=n.onDotReplitStateChange,o=n.onRunStateChange,a=(0,Y._P)({controlName:"flag-run-migration"}),(0,R.b)((s=(0,r._)(function(e,n){var s;function c(){return(c=(0,r._)(function(){var n,r,o,a,c,u,d,p;return(0,l.YH)(this,function(l){switch(l.label){case 0:n=e.workflows.config.subscribe({},{signal:s}).resReadable,r=!1,o=!1,l.label=1;case 1:l.trys.push([1,6,7,12]),c=(0,E._)(n),l.label=2;case 2:return[4,c.next()];case 3:if(!(r=!(u=l.sent()).done))return[3,5];if(!(d=u.value).ok)return(0,D.QS)(d.payload)&&i(d.payload),[3,4];if(void 0!==d.payload.dotReplitState)return i(d.payload.dotReplitState),[3,4];t(d.payload.config),l.label=4;case 4:return r=!1,[3,2];case 5:return[3,12];case 6:return p=l.sent(),o=!0,a=p,[3,12];case 7:if(l.trys.push([7,,10,11]),!(r&&null!=c.return))return[3,9];return[4,c.return()];case 8:l.sent(),l.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:return[2]}})})).apply(this,arguments)}function u(){return(u=(0,r._)(function(){var n,t,r,i,a,c,u,d;return(0,l.YH)(this,function(l){switch(l.label){case 0:n=e.workflows.runState.subscribe({},{signal:s}).resReadable,t=!1,r=!1,l.label=1;case 1:l.trys.push([1,6,7,12]),a=(0,E._)(n),l.label=2;case 2:return[4,a.next()];case 3:if(!(t=!(c=l.sent()).done))return[3,5];if(!(u=c.value).ok)return[3,4];o(u.payload.state),l.label=4;case 4:return t=!1,[3,2];case 5:return[3,12];case 6:return d=l.sent(),r=!0,i=d,[3,12];case 7:if(l.trys.push([7,,10,11]),!(t&&null!=a.return))return[3,9];return[4,a.return()];case 8:l.sent(),l.label=9;case 9:return[3,11];case 10:if(r)throw i;return[7];case 11:return[7];case 12:return[2]}})})).apply(this,arguments)}return(0,l.YH)(this,function(t){switch(t.label){case 0:return s=n.signal,[4,e.workflows.init.rpc({useWorkflowGenerators:a},{signal:s})];case 1:if(!t.sent().ok)return[2];return[4,Promise.all([function(){return c.apply(this,arguments)}(),function(){return u.apply(this,arguments)}()])];case 2:return t.sent(),[2]}})}),function(e,n){return s.apply(this,arguments)}),[a,t,i,o]);var y=(0,F.AI)(P),S=(0,F.ob)(ew);(0,u.useEffect)(function(){S({persist:(0,r._)(function(){var e,n,t;return(0,l.YH)(this,function(r){return(n=y.current)?(t=null===(e=n.workflow)||void 0===e?void 0:e.filter(function(e){var n;return!(null===(n=e.metadata)||void 0===n?void 0:n.generated)}),[2,function(e,n){return ep.apply(this,arguments)}(c,{runButton:n.runButton,workflow:t})]):[2,(0,b._)("No config found")]})})})},[c,S,y])}var ek=(0,h.eU)([]);function e_(e,n){var t=(0,F.ob)(ek),r=(0,A.A)(e);(0,u.useEffect)(function(){var e=function(e){r.current(e)};return t(function(n){return(0,a._)(n).concat([e])}),function(){t(function(n){return n.filter(function(n){return n!==e})})}},[t].concat((0,a._)(n)))}function eD(){var e=(0,F.h)(ek);return(0,u.useCallback)(function(n){e.forEach(function(e){return e(n)})},[e])}function eE(e){var n=(0,o._)((0,u.useState)(e.getRunState()),2),t=n[0],r=n[1];return(0,u.useEffect)(function(){return r(e.getRunState()),e.onStateChanged(function(e){r(e)})},[e]),t}function eR(){var e=(0,T.A)().didDisconnect,n=(0,C.g)(),t=eE((0,_.A)().runner),r=N(),i=ev(),o=eo(),a=(0,v.C9)().agentState,l=(0,w.J2)(a),s=(0,u.useMemo)(function(){var e;return!!l&&null!=i&&!!i.runningWorkflows&&(l.state===g.g32.AGENT_STATE_RUNNING||l.state===g.g32.AGENT_STATE_PAUSING||l.state===g.g32.AGENT_STATE_PAUSED&&(null===(e=l.reason)||void 0===e?void 0:e.$kind)==="waitingOnUserResponse")&&i.runningWorkflows.some(function(e){return"agent"===e.userId})},[l,null==i?void 0:i.runningWorkflows]),c=(0,S.A)(s,1e3),d=(0,u.useMemo)(function(){return t===k.ll.RUNNING},[t]),p=(0,u.useMemo)(function(){return(null==i?void 0:i.step)===k.ll.RUNNING},[null==i?void 0:i.step]),f=(0,u.useMemo)(function(){return d||p},[d,p]),h=(0,S.A)(f,100),m=(0,u.useMemo)(function(){return c?h:f},[c,h,f]),y=(0,u.useMemo)(function(){return e||r||t===k.ll.OFFLINE},[e,r,t]),b=(0,u.useMemo)(function(){return!!(null==i?void 0:i.workflowId)},[null==i?void 0:i.workflowId]);return{isHtmlRepl:n,isWorkflowsLoading:r,isWorkflowsRunning:p,isPid1RunnerRunning:d,isRunning:m,isAgentRunning:c,isOffline:y,isDisabled:(0,u.useMemo)(function(){var e,n=null!==(e=null==i?void 0:i.workflowId)&&void 0!==e?e:D.Ov;return b&&!o.includes(n)},[b,o,null==i?void 0:i.workflowId]),runButtonRunsWorkflows:b}}function eI(){var e=(0,_.A)().runner,n=eE(e),t=ev(),r=eR(),i=r.isRunning,o=r.runButtonRunsWorkflows,a=r.isHtmlRepl;return(0,u.useCallback)(function(){var r,l;!i&&(a?null==e||null===(r=e.run)||void 0===r||r.call(e,k.QG.RUN_BUTTON_CLICKED):o?null==t||null===(l=t.run)||void 0===l||l.call(t,k.QG.RUN_BUTTON_CLICKED):(n===k.ll.IDLE||n===k.ll.STOPPING)&&e.run(k.QG.RUN_BUTTON_CLICKED))},[i,e,n,o,t,a])}function eF(){var e=(0,_.A)().runner,n=ev(),t=eR(),r=t.isRunning,i=t.isPid1RunnerRunning,o=t.isWorkflowsRunning;return(0,u.useCallback)(function(){if(r&&(i&&e.stopRun(),o)){var t;null==n||null===(t=n.stop)||void 0===t||t.call(n,{graceful:!0})}},[i,r,o,e,n])}function eT(){var e=eI(),n=eF(),t=eR().isRunning;return(0,u.useCallback)(function(){t?n():e()},[t,e,n])}function eP(){var e=eI(),n=eF(),t=eR().isRunning,r=(0,A.A)(t),i=(0,o._)((0,u.useState)(!1),2),a=i[0],l=i[1];return(0,u.useEffect)(function(){a&&(r.current||(e(),l(!1)))},[a,r,e]),(0,u.useCallback)(function(){!a&&(r.current?(l(!0),n()):e())},[a,r,e,n])}},38374:e=>{e.exports={divider:"TimelineSteps_divider__c_Uyo",timelineTitle:"TimelineSteps_timelineTitle__lwnxs",timelineItems:"TimelineSteps_timelineItems__6OKfL",timelineItem:"TimelineSteps_timelineItem__MZEOS",timelineItemIcon:"TimelineSteps_timelineItemIcon__nKQmE",timelineItemText:"TimelineSteps_timelineItemText__b_b8_",timelineItemContent:"TimelineSteps_timelineItemContent__LkkgQ",text:"TimelineSteps_text__xSUam"}},38589:(e,n,t)=>{"use strict";t.d(n,{mj:()=>p,xo:()=>f,Qq:()=>v,l8:()=>m,Nn:()=>g});var r=t(17844),i=t(93629),o=t(86105),a=t(73442),l=t(40208);function s(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.map(function(e){return e.match(/["\s]/)&&!e.match(/'/)?"'".concat(e.replace(/(['\\])/g,"\\$1"),"'"):e.match(/["'\s]/)?'"'.concat(e.replace(/(["\\$`!])/g,"\\$1"),'"'):e.replace(/[#!"$&'()*,:;<=>?@[\\\]^`{|}]/g,"\\$&")}).join(" ")}var c=t(73050),u=t(48281),d=t(64254).hp,p=524288;function f(){var e="",n=new Map;return function(t){var o=new Set,a=!1;if(t.trim().startsWith("error"))return{error:u.F.INVALID_COMMAND,filesMap:n,filesMapChanges:o};var s=t.indexOf("\n"),c=0,d=e+t;if(s>=0)s+=e.length;else{e=d;return}for(;s>=0;){var p=d.substring(c,s).trim();if(0!==p.length){var f=function(e){try{return JSON.parse(e)}catch(e){return null}}(p);f&&!function(e,n,t){switch(e.type){case"begin":var o=h(e.data.path);if(!o)return!1;n.set(o,{path:o,lines:[],dedentBy:0}),t.add(o);break;case"end":break;case"match":case"context":var a=h(e.data.path);if(!a)return!1;t.add(a);var s=n.get(a);if(!s)return!1;var c=function(e,n){var t,o,a=h(e.data.lines);if(!a)return null;var l=a.trimEnd().split(/\r?\n/),s=[];(null===(t=l[0])||void 0===t?void 0:t.trim())===""&&l.shift(),(null===(o=l[l.length-1])||void 0===o?void 0:o.trim())===""&&l.pop();var c=0,u=0,d=e.data.submatches;return l.forEach(function(n,t){var r=e.data.line_number+t,i=u;u+=n.length+1;for(var o=[];c<d.length;){var a=d[c];if(a.start>=u)break;var l=a.start-i,p=void 0;if(p=a.end<u?a.end-a.start:a.end===u?a.end-a.start-1:n.length-l,l<n.length&&o.push({start:l,length:p}),a.end>u){a.start=u;break}c++}s.push({lineNumber:r,content:n,matches:o})}),(0,i._)((0,r._)({},n),{lines:n.lines.concat(s)})}(e,s);c&&n.set(a,c);break;case"error":return l.vF.error("Invalid Search Line",{line:JSON.stringify(e)}),!1}return!0}(f,n,o)&&(a=!0)}c=s+1,s=d.indexOf("\n",c)}return e=d.substring(c),{error:a?u.F.INVALID_LINE:null,filesMap:n,filesMapChanges:o}}}function h(e){return e?"bytes"in e?d.from(e.bytes,"base64").toString():e.text:null}function m(e){var n,t=e.lines.length>0?(n=Math).min.apply(n,(0,o._)(e.lines.map(function(e){return e.content.match(/^[\t ]+/)}).flat().map(function(e){return(null==e?void 0:e.length)||0}))):0;return(0,i._)((0,r._)({},e),{dedentBy:t})}function g(e,n,t){for(var r=(0,o._)(e),i=new Set,a=0;a<r.length;a++){var l=r[a].path,s=n.get(l);t.has(l)&&s&&(r[a]=s,i.add(l))}var c=!0,u=!1,d=void 0;try{for(var p,f=t[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value,m=n.get(h);!i.has(h)&&m&&r.push(m)}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}return r}function v(e){var n=e.mode,t=e.query,r=e.context,i=e.isRegex,l=e.isCaseSensitive,u=e.isMatchingWholeWords,d=e.includeGlobs,f=e.excludeGlobs,h=void 0===f?(0,o._)(a.TJ):f,m=["rg"];switch(n){case"json":m.push("--json");break;case"files":m.push("--files-with-matches")}return null!==r&&m.push("--context","".concat(r)),t.includes("\n")&&m.push("--multiline"),i||m.push("--fixed-strings"),m.push("--max-count","100"),m.push("--max-filesize","4M"),m.push("--max-depth","24"),m.push("--max-columns","512"),m.push("--max-columns-preview"),m.push(l?"--case-sensitive":"--ignore-case"),m.push("--hidden"),u&&m.push("--word-regexp"),m.push.apply(m,(0,o._)((0,c.F4)(d,h))),m.push("--",t),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return["sh","-c","".concat(s.apply(void 0,(0,o._)(e))," | head -c ").concat(n)]}(m)}},38802:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(37743),i=t(22531),o=function(){function e(){(0,r._)(this,e)}return e.get=function(e,n){var t,r;try{t=sessionStorage.getItem(e)}catch(e){}if(null==t)return null;try{r=JSON.parse(t)}catch(e){}return null==r||"array"===n&&!Array.isArray(r)||n&&(void 0===r?"undefined":(0,i._)(r))!==n?null:r},e.set=function(e,n){try{sessionStorage.setItem(e,JSON.stringify(n))}catch(e){}},e.remove=function(e){try{sessionStorage.removeItem(e)}catch(e){}},e.keys=function(){try{return Object.keys(sessionStorage)}catch(e){return[]}},e}()},39036:(e,n,t)=>{"use strict";t.d(n,{R:()=>f});var r=t(1889),i=t(21462),o=t(81239),a=t(42330),l=t(49937),s=t(45771),c=t(43974),u=t(93682),d=t(60576),p=(0,s.AH)([c.wp.mt(8)]);function f(e){var n=e.onOpenEnvEditor,t=(0,l.eg)(),s=(0,a.A)(),c=(0,o.A)(),f=(0,i.useRef)(!1);(0,i.useEffect)(function(){if(s&&!f.current&&!t){var e=c.showNotice((0,r.FD)(r.FK,{children:[(0,r.Y)("div",{children:"This App contains secrets that are missing values."}),(0,r.Y)("div",{children:"Add values to ensure the App runs as expected."}),(0,r.Y)("div",{children:(0,r.Y)(u.$n,{size:"small",iconLeft:(0,r.Y)(d.A,{}),css:p,colorway:"primary",onClick:function(){n(),c.hideMessage(e)},text:"Manage secrets"})})]}),1e4);f.current=!0}},[s])}},39075:(e,n,t)=>{"use strict";function r(e,n,t,r){var i=t-n;return{start:{x:(n+1)%r.cols,y:e+Math.floor((n+1)/r.cols)},end:{x:(n+i)%r.cols,y:e+Math.floor((n+i)/r.cols)}}}function i(e,n,t){var r,i,o="";do{var a=t.buffer.active.getLine(e);if(!a)break;a.isWrapped&&e--,i=a.isWrapped}while(i);var l=e;do{var s=t.buffer.active.getLine(e+1);r=!!s&&s.isWrapped;var c=t.buffer.active.getLine(e);if(!c)break;o+=c.translateToString(!r&&n).substring(0,t.cols),e++}while(r);return[o,l]}t.d(n,{W:()=>r,z:()=>i})},39593:(e,n,t)=>{"use strict";t.d(n,{i:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query CurrentUserEnv {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(){var e,n=(e=(0,r._)({},s,void 0),a.I(c,e)).data;return(null==n?void 0:n.currentUser)||void 0}},39927:(e,n,t)=>{"use strict";t.d(n,{A:()=>rP});var r=t(17844),i=t(93629),o=t(12694),a=t(1889),l=t(4124),s=t(21462),c=t(90629),u=t(34951),d=t(12584),p=t(41114),f=t(86997),h=t(50175);function m(){var e=(0,d._)(["\n  fragment ForkContextRepl on Repl {\n    id\n    title\n    description\n    org {\n      id\n    }\n  }\n"]);return m=function(){return e},e}var g=(0,p.J1)(m()),v=t(24874);function w(){var e=(0,d._)(["\n  fragment TransferReplReplInfo on Repl {\n    id\n    slug\n    title\n    owner {\n      ... on Team {\n        id\n        username\n      }\n      ... on User {\n        id\n        username\n      }\n    }\n    org {\n      id\n      slug\n    }\n  }\n"]);return w=function(){return e},e}function y(){var e=(0,d._)(["\n  query TransferReplDialog {\n    currentUser {\n      id\n      ...ReplOwnerCurrentUser\n    }\n  }\n  ","\n"]);return y=function(){return e},e}var b={},S=(0,p.J1)(w()),Y=(0,p.J1)(y(),v.nM),A=t(89883),C=t(75962);function x(){var e=(0,d._)(["\n  fragment PublishReleaseFormRepl on Repl {\n    id\n    title\n    description\n    slug\n    user {\n      username\n    }\n    ...PublishedReplShareInfoReplData\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        timeCreated\n        description\n        initialLayoutState\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function k(){var e=(0,d._)(["\n  query PublishReleaseFormCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return k=function(){return e},e}var _={},D=(0,p.J1)(x(),C.E),E=(0,p.J1)(k()),R=t(49058),I=t(22422),F=t(51026);function T(){var e=(0,d._)(["\n  fragment CreateProjectBeforeForkReplContext on Repl {\n    id\n    title\n    description\n    publishedAs\n    user {\n      id\n      username\n    }\n    deployment {\n      activeRelease {\n        id\n      }\n    }\n    org {\n      id\n    }\n  }\n"]);return T=function(){return e},e}function P(){var e=(0,d._)(["\n  mutation CreateProjectBeforeFork($input: CreateProjectInput!) {\n    createProject(input: $input) {\n      __typename\n      ... on Error {\n        message\n      }\n      ... on Project {\n        id\n        mainRepl {\n          id\n          project {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return P=function(){return e},e}function L(){var e=(0,d._)(["\n  query CreateProjectCheckForProject($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return L=function(){return e},e}var U={},N=(0,p.J1)(T()),O=(0,p.J1)(P()),M=(0,p.J1)(L()),B=t(53933);function H(){var e=(0,d._)(["\n  fragment WorkspaceHeaderReplInfoRepl on Repl {\n    id\n    title\n    rawTemplateLabel: templateLabel(disableFallbackToTitle: true)\n    description\n    isPrivate\n    isRenamed\n    url\n    slug\n    imageUrl\n    workspaceCta\n    publishedAs\n    publicForkCount\n    timeUpdated\n    owner {\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    templateInfo {\n      iconUrl\n      imageUrl\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n        message\n      }\n      editResources {\n        isAuthorized\n      }\n      editTemplateMetadata {\n        isAuthorized\n      }\n      editVisibility {\n        isAuthorized\n        code\n        message\n      }\n      fork {\n        isAuthorized\n      }\n      deleteRepl {\n        isAuthorized\n      }\n      publish {\n        isAuthorized\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    user {\n      id\n      image\n      ...UserLinkUser\n    }\n    ...ForkContextRepl\n    ...WorkspaceHeaderReplMetadataRepl\n    ...PublishReleaseFormRepl\n    ...BulkDeleteConfirmationModalRepl\n    ...CreateProjectBeforeForkReplContext\n    ...TransferReplReplInfo\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return H=function(){return e},e}function z(){var e=(0,d._)(["\n  query WorkspaceHeaderReplInfo($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return z=function(){return e},e}function W(){var e=(0,d._)(["\n  mutation WorkspaceHeaderReplInfoUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return W=function(){return e},e}function G(){var e=(0,d._)(["\n  mutation WorkspaceHeaderReplInfoUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return G=function(){return e},e}function V(){var e=(0,d._)(["\n  mutation WorkspaceHeaderReplInfoDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return V=function(){return e},e}var j={},Z=(0,p.J1)(H(),I.N,g,B.a,D,R.l,N,S),q=(0,p.J1)(z(),Z),K=(0,p.J1)(W(),A.xS),$=(0,p.J1)(G(),Z),J=(0,p.J1)(V()),Q=t(63775),X=t(96241),ee=t(2960),en=t(81239),et=t(16907),er=t(98316),ei=t(97547),eo=t(63892),ea=t(28896),el=t(99213),es=t(95401),ec=t(86901),eu=t(83846),ed=t(29935),ep=t(82643),ef=t(11597),eh=t(80865),em=t(84789),eg=t(6680),ev=t(47258),ew=t(43974),ey=t(40043),eb=t(35869),eS=t(6761),eY=eb.D.button,eA=function(){return(0,a.Y)(eb.S,{css:[ew.wp.flex.grow(1),{borderTop:"1px solid ".concat(eg.LU.outlineDimmest)}],row:!0})},eC=function(e){var n=e.isActive,t=e.isComplete,r=e.children,i=e.onClick,o=e.disabled;return(0,a.FD)(eY,{type:"button",css:[ew.wp.reset.button,ew.wp.position.relative,ev.b.nofill,n&&ew.wp.backgroundColor.backgroundHigher,ew.wp.p(4),ew.wp.borderRadius(4)],onClick:i,disabled:o,children:[(0,a.Y)(ey.EY,{variant:"small",multiline:!1,children:r}),t?(0,a.Y)(eS.A,{size:6,strokeWidth:6,color:eg.LU.foregroundDimmer,css:[ew.wp.position.absolute,{top:2,right:-2}]}):null]})},ex=t(62019),ek=t(37743),e_=t(1833),eD=t(89264);function eE(){var e=(0,d._)(["\n  query ReplPublishInputRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return eE=function(){return e},e}var eR={},eI=(0,p.J1)(eE(),A.xS),eF=t(93107);function eT(){var e=(0,d._)(["\n  mutation CreateTemplateReleaseCreateDeployment(\n    $input: CreateReplDeployemntInput!\n  ) {\n    createReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n        ...PublishReleaseFormRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return eT=function(){return e},e}function eP(){var e=(0,d._)(["\n  mutation CreateTemplateReleaseCreateRelease($input: CreateReplReleaseInput!) {\n    createReplRelease(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n        ...PublishReleaseFormRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return eP=function(){return e},e}var eL={},eU=(0,p.J1)(eT(),A.xS,D),eN=(0,p.J1)(eP(),A.xS,D),eO="Something went wrong publishing your Template";function eM(e){if(e.error)return e.error.message||eO;if(e.data){if("createReplDeployment"in e.data){if("NotFoundError"===e.data.createReplDeployment.__typename||"UnauthorizedError"===e.data.createReplDeployment.__typename||"UserError"===e.data.createReplDeployment.__typename)return e.data.createReplDeployment.message;if("Repl"!==e.data.createReplDeployment.__typename)return eO}if("createReplRelease"in e.data){if("NotFoundError"===e.data.createReplRelease.__typename||"UnauthorizedError"===e.data.createReplRelease.__typename||"UserError"===e.data.createReplRelease.__typename)return e.data.createReplRelease.message;if("Repl"!==e.data.createReplRelease.__typename)return eO}}}function eB(){var e,n,t,i,a=(0,o._)((e=(0,r._)({},eL,void 0),h.n(eU,e)),2),l=a[0],s=a[1],c=(0,o._)((n=(0,r._)({},eL,void 0),h.n(eN,n)),2),u=c[0],d=c[1];return{createRelease:(t=(0,ed._)(function(e){var n,t;return(0,ep.YH)(this,function(r){switch(r.label){case 0:if(n=e.input,s.loading||d.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u({refetchQueries:["ReplEnvironmentHeader"],variables:{input:n}})];case 2:return[2,{data:(t=r.sent()).data,error:eM(t)}];case 3:return r.sent(),[2,{data:null,error:eO}];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),createDeployment:(i=(0,ed._)(function(e){var n,t;return(0,ep.YH)(this,function(r){switch(r.label){case 0:if(n=e.input,s.loading||d.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l({variables:{input:n}})];case 2:return[2,{data:(t=r.sent()).data,error:eM(t)}];case 3:return r.sent(),[2,{data:null,error:eO}];case 4:return[2]}})}),function(e){return i.apply(this,arguments)}),data:s.data||d.data,loading:s.loading||d.loading,error:eM(s||d)}}function eH(){var e=(0,d._)(["\n  mutation SetReplViewSettingsSetSettings($input: SetReplViewSettingsInput!) {\n    setReplViewSettings(input: $input) {\n      ... on ReplViewSettings {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return eH=function(){return e},e}var ez={},eW=(0,p.J1)(eH(),A.xS);function eG(e){var n,t,r,i,o,a,l;return e.error?e.error.message||"Something went wrong saving your Cover page":(null===(t=e.data)||void 0===t?void 0:null===(n=t.setReplViewSettings)||void 0===n?void 0:n.__typename)==="NotFoundError"||(null===(i=e.data)||void 0===i?void 0:null===(r=i.setReplViewSettings)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(a=e.data)||void 0===a?void 0:null===(o=a.setReplViewSettings)||void 0===o?void 0:o.__typename)==="UserError"?e.data.setReplViewSettings.message:(null===(l=e.data)||void 0===l?void 0:l.setReplViewSettings)&&"ReplViewSettings"!==e.data.setReplViewSettings.__typename?"Something went wrong saving your Cover page":void 0}function eV(){var e=(0,d._)(["\n  mutation UpdateReplUpdate($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return eV=function(){return e},e}var ej={},eZ=(0,p.J1)(eV(),A.xS);function eq(e){return e.message||"Something went wrong saving updates to your App"}var eK=function(e){return e[e.Default=0]="Default",e[e.Saved=1]="Saved",e[e.Current=2]="Current",e}({}),e$=t(70677),eJ=t(88783),eQ=t(19968),eX=t(2527),e0=t(48795),e1=t(56185),e2=t(37916);function e4(e){var n=(0,o._)((0,s.useState)(null),2),t=n[0],a=n[1],l=(0,o._)((0,s.useState)(null),2),c=l[0],u=l[1],d=(0,e$.A)({onUpload:function(n){var t=n.url;a(null),e(t)},onUploadPreview:function(e){var n=e.dataUrl;u(null),a(n)},onError:function(e){a(null),u(e.message)}}),p=(0,s.useCallback)(function(){return u(null)},[]);return(0,i._)((0,r._)({},d),{error:c,clearError:p,previewUrl:t})}var e5=function(e){return e.ReplFile="repl_file",e.ReplImage="repl_image",e}({});function e8(e){return"repl_file"===e||"repl_image"===e}var e3=function(e){function n(){return(0,ek._)(this,n),(0,ex._)(this,n,arguments)}return(0,e_._)(n,e),n}((0,eD._)(Error)),e6=function(e){function n(){return(0,ek._)(this,n),(0,ex._)(this,n,arguments)}return(0,e_._)(n,e),n}((0,eD._)(Error)),e7=function(e){function n(){return(0,ek._)(this,n),(0,ex._)(this,n,arguments)}return(0,e_._)(n,e),n}((0,eD._)(Error));function e9(e){return e?e.length>60?{message:"Title should not be more than ".concat(60," characters")}:void 0:{message:"Give your App a title"}}function ne(e){return e?e.length>1e3?{message:"Description should not be more than ".concat(1e3," characters")}:void 0:{message:"What does this App do?"}}var nn=(0,s.createContext)(null),nt=function(e){var n=(0,s.useContext)(nn);if(!n)throw Error("usePublishField must be used within a PublishInputContext");return n["".concat(e,"Field")]},nr=function(){var e=(0,s.useContext)(nn);if(!e)throw Error("usePublishForm must be used within a PublishInputContext");return e},ni=t(45981),no=t.n(ni),na=t(30948),nl=t(86417),ns=t(61234),nc=t(4930),nu=t(36245),nd=t(4999),np=t(2952),nf=(0,ns.x)({flexGrowAndShrink:[ew.wp.flex.growAndShrink(1)],truncateText:[{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}]}),nh=function(e){var n=e.repl,t=(0,nd.z9)(n),o=n.url?(0,nd.fJ)(n):"",l=(0,na.A)({text:"Check out what I just made on Replit: ".concat(n.title),url:o});return(0,a.FD)(eX.ui,{background:"default",css:[ew.wp.borderRadius(8),ew.wp.overflow("hidden"),ew.wp.colWithGap(16),ew.wp.width(510),ew.wp.p(16),ew.wp.flex.growAndShrink(1),(0,eu._)({},"@media (max-width: ".concat(nl.LO.tabletMin,"px)"),[{width:"100%"}])],dataCy:"published-repl-share-info-container",children:[(0,a.FD)(eb.S,{gap:16,children:[(0,a.Y)(ey.EY,{variant:"subheadBig",multiline:!1,children:"Share your App"})," ",(0,a.FD)(eb.S,{gap:4,children:[(0,a.Y)(ey.EY,{variant:"small",multiline:!1,color:"dimmer",children:"Cover page link"}),(0,a.FD)(eb.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(no(),(0,i._)((0,r._)({legacyBehavior:!0},t),{css:nf.flexGrowAndShrink,children:(0,a.Y)("a",{css:nf.truncateText,children:o})})),(0,a.Y)(nu.r,{tooltipDelay:"none",tooltipText:"Copy link",textToCopy:o})]})]})]}),(0,a.Y)(eb.S,{css:[(0,eu._)({alignItems:"flex-end"},ew.$_.max("mobileMax"),[ew.wp.colWithGap(8),{width:"100%",">*":{width:"100%"}}])],row:!0,gap:12,justify:"end",children:(0,a.Y)(nc.v,{prefetch:!1,href:l,iconLeft:(0,a.Y)(np.A,{}),text:"Share to X",target:"_blank",css:[(0,eu._)({},ew.$_.max("mobileMax"),[ew.wp.mr(0)])]})})]})},nm=t(24895),ng=t(32633);function nv(e){var n=e.error,t=e.dataCy;return n?(0,a.FD)(eb.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(ng.A,{css:[ew.wp.color.accentNegativeStronger]}),(0,a.Y)(ey.EY,{css:[ew.wp.flex.growAndShrink(1),ew.wp.color.accentNegativeStronger],dataCy:t,children:n.message})]}):null}var nw=t(35899),ny=t(31618),nb=eb.D.label,nS=(0,s.forwardRef)(function(e,n){return(0,a.Y)(nb,(0,i._)((0,r._)({},e),{ref:n,css:ew.wp.color.foregroundDimmer}))}),nY=function(){var e=(0,nw.c)(),n=e("replName"),t=e("replDescription"),r=nr(),i=r.replTitleField,o=r.replDescriptionField,l=r.isSaving;return(0,a.FD)(eb.S,{gap:16,css:[ew.wp.flex.growAndShrink(1)],children:[(0,a.FD)(eb.S,{gap:4,children:[(0,a.Y)(eb.S,{css:[ew.wp.align.baseline,ew.wp.justify.spaceBetween],row:!0,children:(0,a.Y)(nS,{css:[ew.wp.color.foregroundDimmer,{lineHeight:eg.LU.lineHeightSmall}],htmlFor:n,children:"Repl name"})}),i.value]}),(0,a.FD)(eb.S,{gap:4,children:[(0,a.FD)(eb.S,{css:[ew.wp.align.baseline,ew.wp.justify.spaceBetween],row:!0,children:[(0,a.Y)(nS,{css:[ew.wp.color.foregroundDimmer,{lineHeight:eg.LU.lineHeightSmall}],htmlFor:t,children:"Repl description"}),(0,a.FD)(ey.EY,{multiline:!1,css:{color:o.value.length>1e3?eg.LU.accentNegativeStronger:eg.LU.foregroundDimmest},children:[o.value.length,"/",1e3]})]}),(0,a.Y)(ny.ov,{id:t,value:o.value,disabled:l,onChange:function(e){o.setValue(e.currentTarget.value)},placeholder:"What does this Repl do?",css:[ew.wp.minHeight(128),ew.wp.maxHeight(256),{resize:"vertical"}],dataCy:"publish-form-repl-description-input"}),o.touched?(0,a.Y)(nv,{error:o.error,dataCy:"publish-form-repl-description-error"}):null]})]})},nA=t(54041),nC=function(e){var n=e.showPlayButton,t=e.children,r=e.active;return(0,a.FD)("div",{css:{position:"relative",aspectRatio:"".concat(268,"/").concat(164),overflow:"hidden"},children:[(0,a.Y)("div",{css:{position:"absolute",top:"calc(".concat(18," / ").concat(164," * 100%)"),bottom:"calc(".concat(1," / ").concat(164," * 100%)"),left:"calc(".concat(1," / ").concat(268," * 100%)"),right:"calc(".concat(1," / ").concat(268," * 100%)"),borderBottomLeftRadius:4,borderBottomRightRadius:4,overflow:"hidden",backgroundColor:r?eg.LU.accentPrimaryDimmest:void 0},children:t}),(0,a.FD)("svg",{viewBox:"0 0 268 164",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:{position:"relative"},children:[(0,a.Y)("rect",{width:"268",height:"17",fill:eg.LU.backgroundDefault}),(0,a.Y)("rect",{x:"241.5",y:"4.5",width:"22",height:"10",rx:"2",fill:eg.LU.accentPositiveDimmer}),(0,a.Y)("rect",{x:"228.5",y:"4.5",width:"10",height:"10",rx:"2",fill:eg.LU.backgroundHighest}),(0,a.Y)("rect",{x:"4.5",y:"4.5",width:"32",height:"10",rx:"2",fill:eg.LU.backgroundHighest}),(0,a.Y)("rect",{x:"1",y:"18",width:"266",height:"1",fill:r?eg.LU.accentPrimaryDefault:eg.LU.outlineDimmer}),n?(0,a.Y)("path",{d:"M142.225 90.5642C142.565 90.7554 142.565 91.2446 142.225 91.4358L127.745 99.5809C127.412 99.7683 127 99.5275 127 99.1451L127 82.8549C127 82.4725 127.412 82.2317 127.745 82.4191L142.225 90.5642Z",fill:eg.LU.white}):null,(0,a.Y)("rect",{x:"1",y:"1",width:"266",height:"162",rx:"4",stroke:r?eg.LU.accentPrimaryDefault:eg.LU.outlineDimmer,strokeWidth:"1"})]})]})},nx=t(39695),nk=t(67668),n_=t(45771),nD=t(41845),nE=eb.D.ol,nR=eb.D.li,nI=(0,n_.AH)([ew.wp.py(4),ew.wp.borderRadius(8),{border:"1px solid ".concat(eg.LU.outlineDimmest),borderRadius:eg.LU.borderRadius8,backgroundColor:eg.LU.interactiveBackground,zIndex:ew.U3,maxHeight:300,position:"absolute",overflowY:"auto",width:"100%",left:0,top:eg.LU.space8,listStyle:"none"}]),nF={backgroundColor:eg.LU.interactiveBackgroundActive},nT={backgroundColor:eg.LU.accentPrimaryDimmer},nP=(0,n_.AH)([ew.wp.p(8),{":not([disabled])":{cursor:"pointer",":hover":(0,r._)({},nF),":active":(0,r._)({},nT)}}]);function nL(e){var n,t,l,c,u,d,p,f,h,m,g,v,w,y,b,S,Y=e.fs,A=e.initiallySelectedFile,C=e.onFileSelect,x=e.onClear,k=(0,s.useRef)(null),_=(t=(n=(0,o._)((0,s.useState)({isLoading:!0,error:null,files:[]}),2))[0],l=n[1],(0,s.useEffect)(function(){function e(){return(e=(0,ed._)(function(){var e,n;return(0,ep.YH)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Y.listFiles()];case 1:if((e=t.sent()).error)throw Error(e.error);return l({isLoading:!1,error:null,files:(null!==(n=e.files)&&void 0!==n?n:[]).slice().sort(function(e,n){return e.localeCompare(n)}).map(function(e){return{file:e,pathDepth:(0,nk.jP)(e)}}).sort(function(e,n){return e.pathDepth-n.pathDepth}).map(function(e){return e.file})}),[3,3];case 2:return t.sent(),l({isLoading:!1,error:"Could not load files",files:[]}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[Y]),(0,r._)({},t)),D=_.isLoading,E=_.files,R=_.error,I=(u=(c={files:E,inputRef:k,initiallySelectedFile:A}).files,d=c.inputRef,p=c.initiallySelectedFile,h=(f=(0,o._)((0,s.useState)(!1),2))[0],m=f[1],v=(g=(0,o._)((0,s.useState)(u),2))[0],w=g[1],y=(0,s.useCallback)(function(e){return u.filter(function(n){return n.toLowerCase().includes(e.toLowerCase())})},[u]),b=(0,nx.Bp)({items:v,isOpen:h,initialInputValue:p,initialSelectedItem:v.find(function(e){return e===p}),onIsOpenChange:function(e){m(!!e.isOpen)},onInputValueChange:function(e){var n;w(y(null!==(n=e.inputValue)&&void 0!==n?n:""))}}),S=(0,s.useCallback)(function(){var e;m(!1),null===(e=d.current)||void 0===e||e.blur()},[d]),(0,s.useEffect)(function(){var e;w(y(null!==(e=b.inputValue)&&void 0!==e?e:""))},[u,y,b.inputValue]),(0,s.useEffect)(function(){b.selectedItem&&S()},[b.selectedItem,S]),(0,i._)((0,r._)({},b),{closeMenu:S,items:v})),F=(0,ee.A)(C);return(0,s.useEffect)(function(){I.selectedItem&&F.current(I.selectedItem)},[I.selectedItem,F]),(0,a.FD)(eb.S,{children:[(0,a.Y)(eb.S,(0,i._)((0,r._)({},I.getComboboxProps({refKey:"innerRef"})),{css:[ew.wp.position.relative],children:(0,a.Y)(nD.I,(0,i._)((0,r._)({},I.getInputProps({onFocus:I.openMenu,ref:k,refKey:"inputRef",disabled:D,placeholder:"Search your files"})),{onClear:function(){var e;I.reset(),null===(e=k.current)||void 0===e||e.focus(),x()},loading:D}))})),(0,a.FD)(eb.S,(0,i._)((0,r._)({},I.getMenuProps({refKey:"innerRef"})),{css:[ew.wp.position.relative],children:[R?(0,a.Y)(eb.S,{css:[ew.wp.p(8)],children:(0,a.Y)(ey.EY,{multiline:!1,children:"Something went wrong loading your files. Please try again."})}):null,!R&&I.isOpen?(0,a.Y)(nE,{css:[nI],children:I.items.length>0?I.items.map(function(e,n){return(0,a.Y)(nR,(0,i._)((0,r._)({css:[nP,I.highlightedIndex===n&&nF,e===I.selectedItem&&nT]},I.getItemProps({item:e,index:n,onClick:function(){I.closeMenu()}})),{children:(0,a.Y)(ey.EY,{multiline:!1,children:e})}),e)}):(0,a.Y)(nR,{css:[ew.wp.p(8)],children:(0,a.FD)(ey.EY,{multiline:!1,children:['No files found for "',I.inputValue,'"']})})}):null]}))]})}var nU=function(e){var n=(0,s.useRef)(null);return{inputProps:{onChange:function(n){var t=n.target,r=t.validity,i=t.files;if(r.valid){var o=i?i[0]:null;o&&e(o)}},"aria-hidden":"true",ref:n,accept:eJ.DA.join(","),type:"file"},buttonProps:{onClick:function(){var e;return null===(e=n.current)||void 0===e?void 0:e.click()}},inputRef:n}},nN=function(e){var n=nU(e.onFile),t=n.inputProps,o=n.buttonProps;return(0,a.FD)(a.FK,{children:[(0,a.Y)("input",(0,i._)((0,r._)({},t),{css:{display:"none"}})),e.children(o)]})};t(80928);var nO=t(93682),nM=t(26705),nB=t(44885),nH=t(3910),nz=t(74967),nW=t(55806);t(84185);var nG=t(19915),nV=(0,n_.AH)({position:"absolute",top:0,left:0,width:"100%",height:"100%"});function nj(e){var n=e.src,t=e.alt;return(0,a.FD)(eb.S,{css:[nV,{borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],children:[(0,a.Y)(nz.A,{objectFit:"cover",layout:"fill",src:n,alt:t}),(0,a.Y)(eb.S,{css:[nV,{background:"radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6))",backgroundRepeat:"no-repeat"}]})]})}var nZ=t(71991),nq=[{value:e5.ReplImage,text:"Photo"},{value:e5.ReplFile,text:"File"}],nK=function(e){var n,t,l,c,u,d,p=e.fs,f=(0,nw.c)(),h=f("coverPage"),m=nr(),g=m.selectedRepl,v=m.coverFileField,w=m.coverUrlField,y=m.coverDefaultViewField,b=(0,o._)((n=(0,ed._)(function(e){var n;return(0,ep.YH)(this,function(t){switch(t.label){case 0:if(!(null==e?void 0:e.length)||!(n=e[0]).type.startsWith("image/"))return[2];return[4,A.uploadImage(n,nA.VL.ReplCoverImage)];case 1:return t.sent(),[2]}})}),t=function(e){return n.apply(this,arguments)},c=(l=(0,o._)((0,s.useState)(!1),2))[0],u=l[1],d=(0,s.useRef)(0),[c,(0,s.useMemo)(function(){return{onDragEnter:function(e){e.preventDefault(),d.current++,u(!0)},onDragLeave:function(e){e.preventDefault(),d.current--,0===d.current&&u(!1)},onDrop:function(e){e.preventDefault(),d.current=0,u(!1),e.persist();var n,r,i=Array.from(null!==(r=null==e?void 0:null===(n=e.dataTransfer)||void 0===n?void 0:n.files)&&void 0!==r?r:[]);if(0===i.length){t(null);return}t(i)},onDragOver:function(e){e.preventDefault()}}},[t])]),2),S=b[0],Y=b[1],A=e4(w.setValue);return(0,a.FD)(eb.S,(0,i._)((0,r._)({gap:16},Y),{children:[(0,a.FD)(eb.S,{gap:12,children:[(0,a.Y)(eb.S,{row:!0,gap:8,children:(0,a.Y)(nZ.z,{tag:"fieldset",css:[ew.wp.rowWithGap(24)],name:h,value:y.value,onChange:function(e){e8(e.target.value)&&y.setValue(e.target.value)},children:nq.map(function(e){return(0,a.FD)(eb.S,{row:!0,gap:8,children:[(0,a.Y)(nZ.s,{id:f(e.value),value:e.value}),(0,a.Y)("label",{htmlFor:f(e.value),children:e.text})]},e.value)})})}),y.value===e5.ReplImage&&(0,a.FD)(eb.S,{gap:4,align:"center",children:[(0,a.Y)(nN,{onFile:function(e){return A.uploadImage(e,nA.VL.ReplCoverImage)},children:function(e){var n=e.onClick;return(0,a.Y)(nO.$n,{onClick:n,colorway:S?"primary":void 0,text:"Upload a cover photo",iconLeft:A.isLoading?(0,a.Y)(e1.A,{}):(0,a.Y)(nW.A,{}),stretch:!0})}}),A.error?(0,a.Y)(nH.N,{colorway:"negative",icon:(0,a.Y)(ng.A,{}),text:A.error}):null,(0,a.Y)(ey.EY,{variant:"small",color:"dimmer",children:"or drag and drop a photo here"})]}),y.value===e5.ReplFile&&(0,a.FD)(eb.S,{gap:8,children:[(0,a.Y)(nL,{fs:p,initiallySelectedFile:v.value,onFileSelect:v.setValue,onClear:function(){return v.setValue("")}},null==g?void 0:g.id),(0,a.Y)(nv,{error:v.error})]})]}),y.value===e5.ReplImage&&(0,a.FD)(nC,{active:S,showPlayButton:y.value===e5.ReplImage&&!!w.value&&!A.isLoading,children:[y.value===e5.ReplImage&&w.value?(0,a.Y)(nj,{src:w.value,alt:"cover"}):null,A.isLoading?(0,a.Y)(eb.S,{css:[{position:"absolute",inset:0},ew.wp.align.center,ew.wp.justify.center],children:(0,a.Y)(e1.A,{color:eg.LU.white,size:24})}):null]})]}))},n$=t(28365),nJ=function(){nt("iconUrl");var e=nr(),n=e.replIconInput,t=e.replIconUrl;return(0,a.FD)(eb.S,{gap:16,align:"center",children:[(0,a.FD)(eb.S,{gap:8,children:[(0,a.FD)(eb.S,{row:!0,gap:8,children:[(0,a.Y)(nN,{onFile:function(e){return n.uploadImage(e,nA.VL.ReplIcon)},css:ew.wp.backgroundColor.accentNegativeDefault,children:function(e){var n=e.onClick;return(0,a.Y)(nO.$n,{onClick:n,text:"Upload image",iconLeft:(0,a.Y)(nW.A,{}),css:[ew.wp.backgroundColor.backgroundHigher],type:"button",stretch:!0})}}),null]}),n.error?(0,a.Y)(eb.S,{children:(0,a.Y)(nH.N,{icon:(0,a.Y)(ng.A,{}),colorway:"negative",text:n.error,closable:!0,closeAction:n.clearError})}):null]}),(0,a.Y)(eQ.Mn,{alt:"icon",size:84,iconUrl:t,isLoading:!!n.previewUrl,css:[ew.wp.backgroundColor.backgroundHigher]})]})},nQ=function(){return(0,a.Y)(eb.S,{gap:8,children:(0,a.Y)(eb.S,{children:(0,a.FD)(ey.EY,{children:["See the"," ",(0,a.Y)("a",{href:"https://docs.replit.com/replit-workspace/templates",target:"_blank",children:"template docs"})," ","for a guide on what makes a good template. Please make sure your Repl abides by the"," ",(0,a.Y)("a",{href:"https://blog.replit.com/community-standards",target:"_blank",children:"Replit community rules and guidelines"})," ","before publishing."]})})})},nX=t(23099),n0=t.n(nX),n1=t(91246),n2=t.n(n1),n4=t(17459),n5=t(51895),n8=t(60624),n3=(0,ns.x)({container:[ew.wp.p(4),ew.wp.flex.row,ew.wp.maxWidth(100),ew.wp.backgroundColor.backgroundDefault,ew.wp.borderRadius(4),{aspectRatio:"1 / 1"}],root:[ew.wp.flex.grow(1),ew.wp.flex.row],stacked:[ew.wp.flex.grow(1),ew.wp.colWithGap(2),ew.wp.justify.spaceEvenly],sideBySide:[ew.wp.flex.grow(1),ew.wp.rowWithGap(2)],paneGroup:[ew.wp.p(2),ew.wp.flex.grow(1),ew.wp.backgroundColor.backgroundHigher,ew.wp.center]});function n6(e){var n=e.layoutState,t=(0,n4._)(e,["layoutState"]);return(0,a.Y)(eb.S,(0,i._)((0,r._)({css:n3.container},t),{children:(0,a.Y)(n7,{root:n.layout,paneData:n.data})}))}function n7(e){var n,t=e.root,r=e.paneData;return null==t.tiling?null:(0,a.Y)(eb.S,{css:n3.root,children:(null===(n=t.tiling)||void 0===n?void 0:n.type)==="split"?(0,a.Y)(n9,{split:t.tiling,paneData:r,depth:1}):(0,a.Y)(te,{group:t.tiling,paneData:r,depth:1})})}function n9(e){var n=e.split,t=e.paneData,r=e.depth;return r>2?(0,a.Y)(tn,{}):(0,a.Y)(eb.S,{css:n.stacked?n3.stacked:n3.sideBySide,children:n.children.map(function(e){return"split"===e.type?(0,a.Y)(n9,{split:e,paneData:t,depth:r+1}):(0,a.Y)(te,{group:e,paneData:t,depth:r+1})})})}function te(e){var n=e.group,t=e.paneData,r=e.depth,i=t[n.panes[n.activeIndex]],o=(0,n5.Vv)(),l=o.Icon({pane:i,size:r>1?12:16}),s=o.getTitle(i);return(0,a.Y)(eb.S,{css:n3.paneGroup,title:s,children:l})}function tn(){return(0,a.Y)(eb.S,{css:n3.paneGroup,children:(0,a.Y)(n8.A,{})})}var tt=t(86105),tr=(0,ns.x)({layoutButton:[ew.wp.borderRadius(4),ew.wp.p(8),ew.wp.border({width:1,color:eg.LU.greyDimmer}),ew.wp.backgroundColor.backgroundHigher,ew.wp.cursor.pointer,{"&:hover":[ew.wp.backgroundColor.backgroundHighest],'&[data-selected="true"]':[ew.wp.backgroundColor.accentPrimaryDimmest,ew.wp.border({color:eg.LU.blueDimmer})],'&[data-selected="true"]:hover':[ew.wp.backgroundColor.accentPrimaryDimmer],'&[data-disabled="true"]':[ew.wp.backgroundColor.backgroundDefault,ew.wp.border({color:eg.LU.greyDimmest}),ew.wp.color.foregroundDimmer,{"&:hover":{cursor:"not-allowed"}}]}],layoutButtonRow:[ew.wp.rowWithGap(8),ew.wp.justify.spaceBetween,ew.wp.width("100%")],layoutButtonText:[ew.wp.flex.growAndShrink(1),ew.wp.flex.column,ew.wp.justify.center],layoutButtonHeader:[ew.wp.mb(4)],layoutPreview:[ew.wp.width(80),ew.wp.height(80),{alignSelf:"center"}]});function ti(e){var n,t=e.getCurrentLayoutState(),r=n0()(n2()(t,"sidebarPercent"),n2()(e.savedLayoutState,"sidebarPercent")),i=(n=(0,n5.Vv)(),(0,s.useCallback)(function(e){if((null==e?void 0:e.layout.tiling)==null)return"No tiled panes in layout";for(var t=[],r=[e.layout.tiling];r.length>0;){var i=r.pop();(null==i?void 0:i.type)==="paneGroup"?t.push.apply(t,(0,tt._)(i.panes)):(null==i?void 0:i.children)&&r.push.apply(r,(0,tt._)(i.children))}return t.reverse().map(function(t){return n.getTitle(e.data[t])}).join(", ")},[n])),o=(0,s.useMemo)(function(){return i(e.savedLayoutState)},[i,e.savedLayoutState]),l=(0,s.useMemo)(function(){return i(t)},[t,i]);return(0,a.FD)(eb.S,{gap:8,children:[(0,a.Y)(ey.EY,{variant:"small",children:"Choose an initial workspace layout for new Apps using this template."}),(0,a.Y)(eX.ui,{css:tr.layoutButton,"data-selected":e.templateLayout.value===eK.Default,onClick:function(){return e.templateLayout.setValue(eK.Default)},children:(0,a.Y)(eb.S,{css:tr.layoutButtonRow,children:(0,a.FD)(eb.S,{css:tr.layoutButtonText,children:[(0,a.Y)(ey.Y9,{level:3,variant:"text",css:tr.layoutButtonHeader,children:"Default layout"}),(0,a.Y)(ey.EY,{multiline:!0,variant:"small",children:"User's default layout (either side-by-side or stacked)."})]})})}),e.savedLayoutState?(0,a.Y)(eX.ui,{css:tr.layoutButton,"data-selected":e.templateLayout.value===eK.Saved,onClick:function(){return e.templateLayout.setValue(eK.Saved)},children:(0,a.FD)(eb.S,{css:tr.layoutButtonRow,children:[(0,a.FD)(eb.S,{css:tr.layoutButtonText,children:[(0,a.Y)(ey.Y9,{level:3,variant:"text",css:tr.layoutButtonHeader,children:"Saved layout"}),(0,a.Y)(ey.EY,{variant:"small",children:o})]}),(0,a.Y)(n6,{css:tr.layoutPreview,layoutState:e.savedLayoutState})]})}):null,(0,a.Y)(eX.ui,{css:tr.layoutButton,"data-selected":e.templateLayout.value===eK.Current,"data-disabled":r,onClick:r?void 0:function(){return e.templateLayout.setValue(eK.Current)},children:(0,a.FD)(eb.S,{css:tr.layoutButtonRow,children:[(0,a.FD)(eb.S,{css:tr.layoutButtonText,children:[(0,a.Y)(ey.Y9,{level:3,variant:"text",css:tr.layoutButtonHeader,children:"Current layout"}),(0,a.Y)(ey.EY,{variant:"small",children:r?"Same as saved layout":l})]}),(0,a.Y)(n6,{css:tr.layoutPreview,layoutState:t})]})})]})}function to(e){var n=e.getCurrentLayoutState,t=nt("layout");return(0,a.Y)(eb.S,{gap:8,children:null==n?(0,a.Y)(ey.EY,{children:"Initial layouts may only be customized in the desktop environment."}):(0,a.Y)(ti,{templateLayout:t,getCurrentLayoutState:n})})}var ta=t(11741),tl=t(31930),ts=t(10990),tc=t(46838),tu=t(32466),td=t(52212),tp=t(49705),tf=t(9022),th=t(37407),tm=t(85222),tg=t(4989),tv=t(44144),tw=t(7992),ty=(0,ns.x)({rootContainer:[(0,eu._)({},(0,tm.wm)("tabletMin"),{display:"flex"}),ew.wp.flex.growAndShrink(1),ew.wp.p(16),ew.wp.colWithGap(12),ew.wp.align.center,ew.wp.display.none],heading:[ew.wp.width("100%"),{fontWeight:eg.LU.fontWeightMedium}],contentContainer:[ew.wp.width("100%"),ew.wp.maxWidth(432),ew.wp.position.relative],topShadow:{position:"absolute",zIndex:2,inset:0,boxShadow:"inset 0 48px 24px -24px "+eg.LU.backgroundRoot+", inset 0 -48px 24px -24px "+eg.LU.backgroundRoot},feed:[ew.wp.height(416),ew.wp.colWithGap(24),ew.wp.justify.center,ew.wp.overflow("hidden"),ew.wp.backgroundColor.backgroundRoot],loadingContainer:[ew.wp.flex.grow(1),ew.wp.align.center,ew.wp.justify.center]}),tb=eb.D.form,tS=function(e){var n=e.user,t=nr(),o=t.selectedRepl,l=t.replTitleField,s=t.replDescriptionField,c=t.replIconUrl;return(0,a.FD)(eX.ui,{background:"root",css:ty.rootContainer,children:[(0,a.Y)(ey.EY,{multiline:!1,variant:"small",color:"dimmer",css:ty.heading,children:"Preview"}),(0,a.FD)(eb.S,{css:ty.contentContainer,children:[(0,a.Y)(eb.S,{css:ty.topShadow}),(0,a.FD)(eb.S,{css:ty.feed,children:[(0,a.Y)(nm.v,{}),o&&c?(0,a.Y)(nm.A,{post:{user:n,repl:(0,i._)((0,r._)({},o),{title:l.value,iconUrl:c,description:s.value,isTemplate:!0})}}):(0,a.Y)(eb.S,{css:ty.loadingContainer,children:(0,a.Y)(e1.A,{})}),(0,a.Y)(nm.v,{})]})]})]})},tY=["Basics","Icon","Cover page","Layout","Publishing"],tA=(0,ns.x)({rootContainer:[ew.wp.borderRadius(8),ew.wp.flex.row,ew.wp.overflow("hidden"),(0,eu._)({},(0,tm.wm)("tabletMax"),{minWidth:850})],formContainer:[ew.wp.p(16),ew.wp.minWidth(320),ew.wp.flex.growAndShrink(1),(0,eu._)({},(0,tm.wm)("tabletMin"),{maxWidth:370})],form:[ew.wp.colWithGap(16),ew.wp.flex.growAndShrink(1)],formSectionsNavigation:[ew.wp.flex.growAndShrink(1)],loadingContainer:[ew.wp.color.foregroundDimmer],submitButton:[{boxShadow:"0px 0px 16px 0px ".concat(eg.LU.accentPrimaryDimmer," !important")}]});function tC(e){var n,t,i,l,c,d,p,m,g,v,w,y,b,S,Y,A,C,x,k,_,D,E,R,I=e.replId,F=e.currentUser,T=e.source,P=e.getDesktopLayoutState,L=(n=(0,ed._)(function(e){var n;return(0,ep.YH)(this,function(t){switch(t.label){case 0:if(!ea)return[2,{message:"Could not get file"}];if(!e)return[2,{message:"File path cannot be blank"}];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,ea.stat(e)];case 2:if(!(n=t.sent()).exists||n.type!==ef.pt.File)return[2,{message:"File does not exist"}];return[3,4];case 3:return t.sent(),[2,{message:"Could not get file"}];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),U=(0,em.a)({tablet:!0}),N=(0,eh._P)({type:"boolean",controlName:"flag-template-layout-author"}),O=!U&&N&&null!=P,M=function(e){var n,t,i,a,l,c,d,p,m=(n={variables:{id:e.replId}},t=(0,r._)({},eR,n),f.I(eI,t)),g=(null===(i=m.data)||void 0===i?void 0:i.repl.__typename)==="Repl"?m.data.repl:null,v=!!(null==g?void 0:g.publishedAs),w=(0,eF.W)("",e9),y=(0,eF.W)("",ne),b=(0,eF.W)(null,function(){return null}),S=(0,eF.W)("repl_image",function(){return null}),Y=(0,eF.W)(null,function(){return null}),A=(0,eF.W)("",e.fileValidator),C=(0,eF.W)(eK.Default,function(){}),x=[w,y,b,S,Y,A,C],k=function(){var e,n=(0,o._)((e=(0,r._)({},ez,void 0),h.n(eW,e)),2),t=n[0],i=n[1];function a(){return(a=(0,ed._)(function(e){var n;return(0,ep.YH)(this,function(r){switch(r.label){case 0:if(i.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t({variables:{input:e}})];case 2:return[2,{data:(n=r.sent()).data,error:eG(n)}];case 3:return r.sent(),[2,{data:null,error:"Something went wrong saving your Cover page"}];case 4:return[2]}})})).apply(this,arguments)}return{data:i.data,loading:i.loading,error:eG(i),setReplViewSettings:function(e){return a.apply(this,arguments)}}}(),_=function(){var e,n=(0,o._)((e=(0,r._)({},ej,void 0),h.n(eZ,e)),2),t=n[0],i=n[1];function a(){return(a=(0,ed._)(function(e){return(0,ep.YH)(this,function(n){switch(n.label){case 0:if(i.loading)return[2,{data:null,error:null}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t({variables:{input:e}})];case 2:return[2,{data:n.sent().data,error:null}];case 3:return[2,{data:null,error:eq(n.sent())}];case 4:return[2]}})})).apply(this,arguments)}return{data:i.data,loading:i.loading,error:i.error&&eq(i.error),updateRepl:function(e){return a.apply(this,arguments)}}}(),D=eB(),E=(null==g?void 0:null===(a=g.replViewSettings)||void 0===a?void 0:a.defaultView)&&e8(g.replViewSettings.defaultView)?g.replViewSettings.defaultView:"repl_image",R=(0,ee.A)(w.setValue),I=(0,ee.A)(y.setValue),F=(0,ee.A)(b.setValue),T=(0,ee.A)(Y.setValue),P=(0,ee.A)(S.setValue),L=(0,ee.A)(A.setValue);(0,s.useEffect)(function(){var e,n,t,r;g&&(P.current(E),L.current(null!==(n=null===(e=g.replViewSettings)||void 0===e?void 0:e.replFile)&&void 0!==n?n:""),R.current(g.isRenamed?g.title:"",{preventTouch:!0}),I.current(null!==(t=g.description)&&void 0!==t?t:"",{preventTouch:!0}),F.current(g.iconUrl.endsWith(".svg")?null:g.iconUrl),T.current(null!==(r=g.imageUrl)&&void 0!==r?r:null))},[g,T,F,R,I,E,P,L]);var U=e4(b.setValue),N=U.previewUrl||b.value||(null==g?void 0:g.iconUrl)||(null==g?void 0:g.templateInfo.iconUrl),O=null!==(p=null===(d=x.filter(function(e){return(e!==A||"repl_file"===S.value)&&e.error}))||void 0===d?void 0:null===(c=d[0])||void 0===c?void 0:null===(l=c.error)||void 0===l?void 0:l.message)&&void 0!==p?p:null;function M(){return(M=(0,ed._)(function(){var e,n,t,r,i,o,a,l,s;return(0,ep.YH)(this,function(c){switch(c.label){case 0:if(!g)throw new e3("Missing repl");if(n=g.title!==w.value,t=g.description!==y.value,r=g.iconUrl!==b.value,i="repl_image"===S.value&&g.imageUrl!==Y.value,o=A.value&&"repl_file"===S.value&&(null===(e=g.replViewSettings)||void 0===e?void 0:e.replFile)!==A.value,a=S.value&&E!==S.value,!(n||t||r))return[3,2];if(w.error||y.error||b.error)throw new e3;return[4,_.updateRepl({id:g.id,title:n?w.value:void 0,description:t?y.value:void 0,iconUrl:r?b.value:void 0})];case 1:if((l=c.sent()).error)throw new e6(l.error);c.label=2;case 2:if(!(a||i||o))return[3,4];if("repl_image"===S.value&&Y.error||"repl_file"===S.value&&A.error)throw new e3;return[4,k.setReplViewSettings({replId:g.id,defaultView:"repl_image"===S.value?u.Qj.ReplImage:u.Qj.ReplFile,replImage:i?Y.value:void 0,replFile:o?A.value:void 0})];case 3:if((s=c.sent()).error)throw new e6(s.error);c.label=4;case 4:return[2]}})})).apply(this,arguments)}function B(){return(B=(0,ed._)(function(){var n,t,r;return(0,ep.YH)(this,function(i){switch(i.label){case 0:if(!g)throw new e3("Missing repl");if(O)throw new e3(null!=O?O:"Something went wrong");return n=null,e.canAuthorTemplateLayout&&C.value===eK.Current&&(n=null===(t=e.getDesktopLayoutState)||void 0===t?void 0:t.call(e)),[4,D.createDeployment({input:{replId:g.id,description:y.value,iconUrl:N||g.iconUrl,initialLayoutState:n}})];case 1:if((r=i.sent()).error)throw new e7(r.error);return(0,eo.u4)(eo.AZ.POST_MADE,{source:e.source,replType:"template_repl",title:w.value,description:y.value,defaultView:S.value}),[2]}})})).apply(this,arguments)}var H=_.loading||k.loading,z=_.error||k.error,W=D.loading,G=D.error;return{selectedRepl:g,isReplLoading:m.loading,replLoadingError:m.error,replTitleField:w,replDescriptionField:y,iconUrlField:b,coverDefaultViewField:S,coverUrlField:Y,coverFileField:A,layoutField:C,replIconInput:U,replIconUrl:N,inputError:O,save:function(){return M.apply(this,arguments)},isSaving:H,savingError:z,publishInitialRelease:function(){return B.apply(this,arguments)},isPublishing:W,publishingError:G,isPublished:v}}({replId:I,fileValidator:L,source:T,canAuthorTemplateLayout:O,getDesktopLayoutState:P}),B=M.selectedRepl,H=M.isReplLoading,z=M.replLoadingError,W=M.replTitleField,G=M.replDescriptionField,V=M.iconUrlField,j=M.coverDefaultViewField,Z=M.coverUrlField,q=M.coverFileField,K=M.layoutField,$=M.save,J=M.isSaving,Q=M.savingError,X=M.publishInitialRelease,en=M.isPublishing,et=M.publishingError,er=M.isPublished,ei=(i=(t={repl:B,currentUser:F}).repl,l=t.currentUser,d=(c=(0,o._)((0,tp.eY)(),2))[0],p=c[1],m=(0,tp.ZM)(),v=(g=(0,o._)((0,s.useState)(function(){var e,n,t;return e=(0,tl.Ay)({onUnrecoverableError:(0,td.A)({throwBsod:p,origin:"Publish: services/onUnrecoverableError"})}),n=(0,tu.A)({container:e}),t=(0,ta.A)({container:e,fs:n}),{container:e,fs:n,dotReplit:t}}),1)[0]).container,w=g.fs,y=g.dotReplit,S=(b=(0,o._)((0,s.useState)(function(){return v.getConnectionState()===tl.KN.CONNECTED}),2))[0],Y=b[1],A=(0,ts.$)(i?{repl:i,currentUser:l}:null),C=(0,tc.L)(),(0,s.useEffect)(function(){if(i&&A&&v.getConnectionState()===tl.KN.DISCONNECTED)return v.connect({context:A,getMinimumRetryDelayMs:C}),function(){return v.close()}},[i,v,A]),(0,s.useEffect)(function(){return v.onConnectionStateChanged(function(e){Y(e===tl.KN.CONNECTED)})},[v]),{isConnected:S,container:v,fs:w,dotReplit:y,bsodId:null==d?void 0:d.eventId,devClearBsod:function(){return m()}}),ea=ei.fs,el=ei.dotReplit,es=ei.bsodId,ec=O&&!er?[]:["Layout"],eu=(0,o._)((0,s.useState)(0),2),eg=eu[0],ev=eu[1],eS=tY[eg],eY=eg===tY.length-1,ex=(0,o._)((0,s.useState)({show:!1,isUpdate:!1}),2),ek=ex[0],e_=ex[1],eD=(0,o._)((0,s.useState)(function(){return Array(tY.length).fill(!1)}),2),eE=eD[0],eT=eD[1],eP=(0,s.useCallback)(function(e,n){eE[e]=n,eT(eE)},[eE]);(0,s.useEffect)(function(){M.replTitleField.value&&M.replDescriptionField.value?eP(0,!0):eP(0,!1),M.iconUrlField.value?eP(2,!0):eP(2,!1),M.coverDefaultViewField.value===e5.ReplImage&&M.coverUrlField.value||M.coverDefaultViewField.value===e5.ReplFile&&M.coverFileField.value?eP(3,!0):eP(3,!1)},[eE,M,eP]);var eL=(k=(x=(0,o._)((0,s.useState)({isLoading:!0,error:null,entryPoint:null}),2))[0],_=x[1],(0,s.useEffect)(function(){function e(){return(e=(0,ed._)(function(){var e,n,t;return(0,ep.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,el.getConfig()];case 1:if((n=r.sent()).error)throw Error(n.errorMessage);return _({isLoading:!1,error:null,entryPoint:null!==(t=null==n?void 0:null===(e=n.config)||void 0===e?void 0:e.entrypoint)&&void 0!==t?t:null}),[3,3];case 2:return r.sent(),_({isLoading:!1,error:"Could not load .replit config",entryPoint:null}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[el]),(0,r._)({},k));(0,s.useEffect)(function(){eL.isLoading||!eL.entryPoint||q.value||q.setValue(eL.entryPoint)},[eL.isLoading,eL.entryPoint,q]);var eU=(0,o._)((0,s.useState)(!1),2),eN=eU[0],eO=eU[1];(0,s.useEffect)(function(){eN||I&&(H||er)||(eO(!0),(0,eo.u4)(eo.AZ.PUBLISH_SELECTED,{source:T}))},[eN,T,I,H,er]);var eM=(0,ee.A)(!!(null==B?void 0:B.publishedAs)),eH=(0,ee.A)(eS);if((0,s.useEffect)(function(){return function(){eM.current||(0,eo.u4)(eo.AZ.PUBLISH_FLOW_EXITED,{source:T,lastSectionVisited:eH.current})}},[T,eM,eH]),es)return(0,a.Y)(tf.A,{});if(ek.show&&B)return(0,a.Y)(nh,{repl:B});var eV={Basics:{hasError:!!(W.error||G.error),isValid:(0,ed._)(function(){return(0,ep.YH)(this,function(e){switch(e.label){case 0:return[4,Promise.all([W.validate(),G.validate()])];case 1:return[2,e.sent().every(function(e){return!e})]}})})},Icon:{hasError:!!V.error,isValid:(0,ed._)(function(){return(0,ep.YH)(this,function(e){switch(e.label){case 0:return[4,V.validate()];case 1:return[2,!e.sent()]}})})},"Cover page":{hasError:!!(j.value===e5.ReplImage?Z.error:q.error),isValid:(0,ed._)(function(){var e;return(0,ep.YH)(this,function(n){switch(n.label){case 0:if(j.value!==e5.ReplImage)return[3,2];return[4,Z.validate()];case 1:return e=!n.sent(),[3,4];case 2:return[4,q.validate()];case 3:e=!n.sent(),n.label=4;case 4:return[2,e]}})})},Layout:{hasError:!!K.error,isValid:(0,ed._)(function(){return(0,ep.YH)(this,function(e){switch(e.label){case 0:return[4,K.validate()];case 1:return[2,!e.sent()]}})})},Publishing:{hasError:!1,isValid:(0,ed._)(function(){return(0,ep.YH)(this,function(e){return[2,!0]})})}},e$=eV[eS].hasError,eJ=eV[eS].isValid,eQ=null!==(R=tY.find(function(e){return eV[e].hasError}))&&void 0!==R?R:null,e0=null;B?z||Q||et?e0="Something went wrong - please try again":e$&&(e0="Please fill out the the form"):e0="Please select a Repl";var e2=!!(!B||e$||z||H||J||en),nt=(D=(0,ed._)(function(e){var n;return(0,ep.YH)(this,function(t){switch(t.label){case 0:if(n=e2)return[3,2];return[4,eJ()];case 1:n=!t.sent(),t.label=2;case 2:if(n)return[2];if(!ec.includes(tY[e]))return[3,4];return[4,nt(e+1)];case 3:case 6:return t.sent(),[2];case 4:return t.trys.push([4,6,,7]),ev(e),[4,$()];case 5:return t.sent(),[3,7];case 7:return[2]}})}),function(e){return D.apply(this,arguments)}),nr=eg>0;return(0,a.Y)(nn.Provider,{value:M,children:(0,a.FD)(eX.ui,{css:tA.rootContainer,background:"default",dataCy:"publish-form-container",children:[(0,a.FD)(eb.S,{css:tA.formContainer,gap:12,children:[(0,a.Y)(ey.EY,{variant:"subheadBig",multiline:!1,children:er?"Edit publish settings":"Publish template"}),(0,a.FD)(tb,{onSubmit:(E=(0,ed._)(function(e){var n,t,r,i,o,a;return(0,ep.YH)(this,function(l){switch(l.label){case 0:if(e.preventDefault(),!eY)return[3,13];n=!0,t=!1,r=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),i=tY[Symbol.iterator](),l.label=2;case 2:if(n=(o=i.next()).done)return[3,5];return[4,eV[o.value].isValid()];case 3:if(!l.sent())return[2];l.label=4;case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),t=!0,r=a,[3,8];case 7:try{n||null==i.return||i.return()}finally{if(t)throw r}return[7];case 8:if(er)return[3,10];return[4,X()];case 9:return l.sent(),e_({show:!0,isUpdate:!1}),[3,12];case 10:return[4,$()];case 11:l.sent(),e_({show:!0,isUpdate:!0}),l.label=12;case 12:return[3,14];case 13:nt(eg+1),l.label=14;case 14:return[2]}})}),function(e){return E.apply(this,arguments)}),css:tA.form,children:[(0,a.Y)(eb.S,{row:!0,gap:4,align:"center",children:tY.map(function(e,n){return ec.includes(e)?null:(0,a.FD)(s.Fragment,{children:[0!==n&&(0,a.Y)(eA,{}),(0,a.Y)(eC,{isActive:eg===n,isComplete:eE[n],onClick:function(){return nt(n)},disabled:e2,children:e})]},e)})}),(0,a.FD)(eb.S,{css:tA.formSectionsNavigation,children:["Basics"===eS&&(0,a.Y)(nY,{}),"Icon"===eS&&(0,a.Y)(nJ,{}),"Cover page"===eS&&(0,a.Y)(nK,{fs:ea}),"Layout"===eS&&(0,a.Y)(to,{getCurrentLayoutState:P}),"Publishing"===eS&&(0,a.Y)(nQ,{})]}),(0,a.FD)(eb.S,{children:[eY&&eQ&&eQ!==eS?(0,a.Y)(nH.N,{colorway:"negative",icon:(0,a.Y)(ng.A,{}),text:"Please fix error in ".concat(eQ," section")}):null,Q?(0,a.Y)(nH.N,{colorway:"negative",icon:(0,a.Y)(ng.A,{}),text:Q}):null,et?(0,a.Y)(nH.N,{colorway:"negative",icon:(0,a.Y)(ng.A,{}),text:et}):null]}),(0,a.FD)(eb.S,{css:[nr?ew.wp.justify.spaceBetween:ew.wp.justify.end],row:!0,gap:8,align:"center",children:[nr?(0,a.Y)(nO.$n,{type:"button",iconLeft:(0,a.Y)(tg.A,{}),disabled:e2,onClick:function(){return nt(eg-1)},text:"Back"}):null,J?(0,a.Y)(eb.S,{css:tA.loadingContainer,row:!0,gap:4,children:(0,a.Y)(e1.A,{})}):null,(0,a.FD)(th.m_,{tooltip:e0,placement:"bottom",isDisabled:!e0,children:[!eY&&(0,a.Y)(nO.$n,{type:"submit",colorway:"primary",iconLeft:(0,a.Y)(tv.A,{}),disabled:e2,text:"Next",dataCy:"publish-form-next-button"}),eY&&!er?(0,a.Y)(nO.$n,{type:"submit",colorway:"primary",css:tA.submitButton,iconLeft:en?(0,a.Y)(e1.A,{}):(0,a.Y)(tw.A,{}),disabled:!!(e2||eQ),text:"Submit",dataCy:"publish-form-publish-button"}):null,eY&&er?(0,a.Y)(nO.$n,{type:"submit",colorway:"primary",iconLeft:en?(0,a.Y)(e1.A,{}):(0,a.Y)(tw.A,{}),disabled:!!(e2||eQ),text:"Save"}):null]})]})]})]}),(0,a.Y)(tS,{user:F})]})})}var tx=(0,ns.x)({loadingContainer:[ew.wp.center,ew.wp.p(32),ew.wp.width(512),(0,eu._)({},"@media (max-width: ".concat(nl.LO.tabletMin,"px)"),[{width:"100%"}])],errorContainer:[ew.wp.center,ew.wp.p(32)]});function tk(e){var n,t,r=e.replId,i=e.source,o=e.getDesktopLayoutState,l=(0,A.Df)(),s=(null===(t=l.data)||void 0===t?void 0:null===(n=t.currentUser)||void 0===n?void 0:n.__typename)==="CurrentUser"?l.data.currentUser:null;return l.loading?(0,a.Y)(eb.S,{css:tx.loadingContainer,children:(0,a.Y)(e1.A,{})}):l.error||!s?(0,a.Y)(eb.S,{css:tx.errorContainer,children:(0,a.Y)(ey.EY,{multiline:!1,children:"Something went wrong, please try again."})}):(0,a.Y)(tC,{source:i,replId:r,currentUser:s,getDesktopLayoutState:o})}var t_=t(32771),tD=t(88184);function tE(){var e=(0,d._)(["\n  mutation RevertTemplateRelease($input: RevertReplReleaseInput!) {\n    revertReplRelease(input: $input) {\n      ... on Repl {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return tE=function(){return e},e}var tR={},tI=(0,p.J1)(tE());function tF(){var e=(0,d._)(["\n  query PendingChanges($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deployment {\n          id\n          activeRelease {\n            id\n            pendingChanges {\n              fileName\n              changeType\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return tF=function(){return e},e}var tT={},tP=(0,p.J1)(tF()),tL=t(67197),tU=t(78559),tN=eb.D.form;function tO(e){if(0===e.length)return{message:"You cannot leave this empty."}}function tM(e){var n,t,r=e.changeType;return r===u.qZ.NewFile?(n=eg.LU.accentPositiveStronger,t="Added"):r===u.qZ.DeletedFile?(n=eg.LU.accentNegativeStronger,t="Deleted"):(n=eg.LU.foregroundDefault,t="Changed"),(0,a.Y)(ey.EY,{variant:"small",css:[{color:n}],multiline:!1,children:t})}var tB=(0,ns.x)({loadingContainer:[ew.wp.center],container:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:eg.LU.space8}]});function tH(e){var n=e.pendingChangesState,t=e.isReplitTemplate;if(n.loading)return(0,a.Y)(eb.S,{css:tB.loadingContainer,children:(0,a.Y)(e1.A,{})});if(n.error)return(0,a.Y)(nH.N,{icon:(0,a.Y)(ng.A,{}),text:n.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!n.pendingChanges||0===n.pendingChanges.length)return t?null:(0,a.Y)(ey.EY,{children:"No file changes to publish."});var r=n.pendingChanges,i=r.slice(0,15);return(0,a.FD)(eb.S,{css:tB.container,children:[i.map(function(e){return(0,a.FD)(s.Fragment,{children:[(0,a.FD)(eb.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(tU.A,{size:12,path:e.fileName}),(0,a.Y)(ey.EY,{multiline:!1,children:e.fileName})]},e.fileName),(0,a.Y)(tM,{changeType:e.changeType})]},e.fileName)}),r.length>i.length&&(0,a.FD)(ey.EY,{multiline:!1,children:["And ",r.length-i.length," other files..."]})]})}var tz=(0,ns.x)({header:[ew.wp.mb(16)],grid:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:eg.LU.space8}],activeLabel:[ew.wp.p(4),{display:"flex"}]});function tW(e){var n,t=e.repl,i=function(){var e,n=(0,o._)((e=(0,r._)({},tR,{refetchQueries:["ReplEnvironmentHeader"]}),h.n(tI,e)),2),t=n[0];function i(){return(i=(0,ed._)(function(e){var n;return(0,ep.YH)(this,function(r){switch(r.label){case 0:return[4,t({variables:{input:e.input}})];case 1:return[2,{data:(n=r.sent()).data,error:function(e){if(!e.data)return null;var n=e.data;if("revertReplRelease"in n){if("NotFoundError"===n.revertReplRelease.__typename||"UnauthorizedError"===n.revertReplRelease.__typename||"UserError"===n.revertReplRelease.__typename)return n.revertReplRelease.message;if("Repl"!==n.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}(n)}]}})})).apply(this,arguments)}return{revertTemplateRelease:function(e){return i.apply(this,arguments)},state:n[1]}}(),l=(n=(0,ed._)(function(e){return(0,ep.YH)(this,function(n){switch(n.label){case 0:return[4,i.revertTemplateRelease({input:{replId:t.id,releaseId:e}})];case 1:return n.sent(),[2]}})}),function(e){return n.apply(this,arguments)});return(0,a.FD)(eb.S,{children:[(0,a.Y)(ey.Y9,{level:1,variant:"subheadBig",css:tz.header,children:"Existing Releases"}),(0,a.Y)(eb.S,{css:tz.grid,children:t.releases.items.map(function(e){var n,r;return(0,a.FD)(s.Fragment,{children:[(0,a.Y)("span",{children:(0,t_.A)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,a.Y)("span",{children:e.description}),(0,a.Y)("span",{style:{justifySelf:"end"},children:e.id===(null===(r=t.deployment)||void 0===r?void 0:null===(n=r.activeRelease)||void 0===n?void 0:n.id)?(0,a.Y)("span",{css:tz.activeLabel,children:"(active)"}):(0,a.Y)(nO.$n,{text:"revert",colorway:"primary",size:"small",onClick:function(){l(e.id)}})})]},e.id)})})]})}var tG=(0,ns.x)({container:[ew.wp.colWithGap(24),ew.wp.p(16)],descriptionLabel:[ew.wp.color.foregroundDimmer,{fontSize:eg.LU.fontSizeSmall,lineHeight:eg.LU.lineHeightSmall}],descriptionInput:[ew.wp.width("100%"),ew.wp.minHeight(64),ew.wp.maxHeight(128),{resize:"vertical"}],existingReleasesContainer:[ew.wp.p(16),ew.wp.colWithGap(16)]});function tV(e){var n,t,l,c,u,d,p,h,m,g,v,w,y,b=e.repl,S=e.getDesktopLayoutState,Y=(0,nw.c)(),A=(0,o._)((0,s.useState)(!1),2),C=A[0],x=A[1],k=(0,o._)((0,s.useState)(!1),2),_=k[0],D=k[1],E=(u=function(e){var n,t,i,o,a=(i={variables:{replId:e.replId},fetchPolicy:"cache-and-network",ssr:!1},o=(0,r._)({},tT,i),f.I(tP,o)),l=a.data,s=a.loading,c=a.error;if(s)return{loading:s,pendingChanges:null,error:null};if(c)return{loading:!1,pendingChanges:null,error:c};var u=(null==l?void 0:l.repl.__typename)==="Repl"?l.repl:null;return u?{loading:!1,pendingChanges:(null===(t=u.deployment)||void 0===t?void 0:null===(n=t.activeRelease)||void 0===n?void 0:n.pendingChanges)||[],error:c}:{loading:!1,pendingChanges:null,error:Error("Repl not found")}}({replId:{replId:b.id}.replId}),d=(0,s.useMemo)(function(){return u.pendingChanges?u.pendingChanges.slice().sort(function(e,n){return e.fileName.localeCompare(n.fileName)}).map(function(e){return{file:e,pathDepth:(0,nk.jP)(e.fileName)}}).sort(function(e,n){return e.pathDepth-n.pathDepth}).map(function(e){return e.file}):[]},[u.pendingChanges]),(0,i._)((0,r._)({},u),{pendingChanges:d})),R=eB(),I=(0,eF.W)("",tO),F=(null===(h=E.pendingChanges)||void 0===h?void 0:h.length)!==0,T=(null===(m=b.user)||void 0===m?void 0:m.username)===tD.GA||(null===(g=b.user)||void 0===g?void 0:g.username)==="templates",P=(0,o._)((0,s.useState)({ran:!1,tested:!1}),2),L=P[0],U=P[1],N=(0,em.a)({tablet:!0}),O=(0,eh._P)({type:"boolean",controlName:"flag-template-layout-author"}),M=!N&&O&&null!=S,B=(0,o._)((n=b,l=(t=(0,o._)((0,s.useState)(n.releases.items[0]),2))[0],c=t[1],(0,s.useEffect)(function(){n.releases.items.length>0&&c(n.releases.items.slice().sort()[0])},[n.releases.items]),[l,c]),2),H=B[0],z=B[1],W=(null==H?void 0:H.initialLayoutState)!=null,G=(0,eF.W)(W?eK.Saved:eK.Default,function(){}),V=W?G.value!==eK.Saved:G.value!==eK.Default,j=F||V;(0,s.useEffect)(function(){U({ran:!1,tested:!1})},[U]);var Z=!!(I.error||R.loading||!T&&!j||T&&(!L.ran||!L.tested)),q=T&&(null===(w=b.releases)||void 0===w?void 0:null===(v=w.items)||void 0===v?void 0:v.length)>1,K="";return(I.error?K="Please fill out the form":T||j||(K="No file or layout changes to publish in this release"),C)?(0,a.Y)(nh,{repl:b}):_?(0,a.Y)(eb.S,{css:tG.existingReleasesContainer,children:(0,a.Y)(tW,{repl:b})}):(0,a.FD)(tN,{onSubmit:(p=(0,ed._)(function(e){var n,t,r,i;return(0,ep.YH)(this,function(o){switch(o.label){case 0:if(e.preventDefault(),Z||I.validate())return[2];return t=null,M&&(G.value===eK.Current?t=S():G.value===eK.Saved&&W&&(t=null==H?void 0:H.initialLayoutState)),[4,R.createRelease({input:{replId:b.id,description:I.value,initialLayoutState:t}})];case 1:if((r=o.sent()).error)return[2];return x(!0),(null===(n=r.data)||void 0===n?void 0:n.createReplRelease.__typename)==="Repl"&&(z(i=r.data.createReplRelease.releases.items.slice().sort()[0]),G.setValue((null==i?void 0:i.initialLayoutState)!=null?eK.Saved:eK.Default)),[2]}})}),function(e){return p.apply(this,arguments)}),css:tG.container,children:[(0,a.Y)(ey.Y9,{level:1,variant:"headerDefault",children:"Publish template changes"}),(0,a.FD)(eb.S,{gap:8,children:[(0,a.Y)(ey.Y9,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,a.Y)(tH,{pendingChangesState:E,isReplitTemplate:T})]}),M?(0,a.FD)(eb.S,{gap:8,children:[(0,a.Y)(ey.Y9,{level:2,variant:"subheadDefault",children:"Workspace layout"}),(0,a.Y)(ti,{getCurrentLayoutState:S,savedLayoutState:null==H?void 0:H.initialLayoutState,templateLayout:G})]}):null,T||j?(0,a.FD)(eb.S,{gap:4,children:[(0,a.Y)("label",{htmlFor:Y("description"),css:tG.descriptionLabel,children:"Description"}),(0,a.Y)(ny.ov,{id:Y("description"),"aria-label":"Description",onChange:function(e){return I.setValue(e.target.value)},css:tG.descriptionInput,placeholder:"Explain what has changed about your template"}),I.error?(0,a.Y)(nH.N,{icon:(0,a.Y)(ng.A,{}),text:null===(y=I.error)||void 0===y?void 0:y.message,colorway:"negative"}):null]}):null,T?(0,a.Y)(tZ,{repl:b,state:L,onChange:function(e,n){return U(function(t){return(0,i._)((0,r._)({},t),(0,eu._)({},e,n))})}}):null,(0,a.Y)(eb.S,{children:R.error?(0,a.Y)(nH.N,{icon:(0,a.Y)(ng.A,{}),text:R.error,colorway:"negative"}):null}),(0,a.FD)(eb.S,{row:!0,gap:12,justify:"end",children:[q?(0,a.Y)(nO.$n,{text:"Revert to older",colorway:"negative",onClick:function(){return D(!0)}}):null,(0,a.Y)(th.m_,{tooltip:K,placement:"bottom",isDisabled:!K,children:(0,a.Y)(nO.$n,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,a.Y)(tw.A,{}),disabled:Z})})]})]})}var tj=(0,ns.x)({row:[ew.wp.py(2)]});function tZ(e){var n,t,i,o,l=e.repl,s=e.state,c=e.onChange,u=(0,nw.c)(),d=(n=(0,r._)({},_,void 0),f.I(E,n)),p=d.data,h=d.loading,m=null==p?void 0:null===(t=p.currentUser)||void 0===t?void 0:t.username;return(0,a.FD)(eb.S,{gap:12,children:[(0,a.Y)(ey.Y9,{level:2,children:"Official Replit Template publishing checklist"}),(0,a.FD)(eb.S,{children:[(0,a.FD)(tq,{children:[(0,a.Y)(tL.S,{id:u("ran"),checked:s.ran,onChange:function(e){return c("ran",e)}}),(0,a.Y)("label",{htmlFor:u("ran"),children:"Ran Repl:"}),(0,a.FD)("span",{children:["I ran the Repl to generate and cache package guesser result into"," ",(0,a.Y)("code",{children:".upm"}),"."]})]}),(0,a.FD)(tq,{children:[(0,a.Y)(tL.S,{id:u("tested"),checked:s.tested,onChange:function(e){return c("tested",e)}}),(0,a.Y)("label",{htmlFor:u("tested"),children:"Ran tests:"}),(0,a.FD)("span",{children:['I ran "Test working copy" for @',null===(i=l.user)||void 0===i?void 0:i.username,"/",l.slug," in"," ",(0,a.Y)("a",{href:"https://template-tester.replit.app/",target:"_blank",children:"template tester"}),". ",(0,a.Y)("br",{}),"If there are no tests, consider adding one."]})]})]}),h||(null===(o=l.user)||void 0===o?void 0:o.username)!==m?null:(0,a.Y)(nH.N,{text:"You can't publish an update while impersonating. Add yourself as a member of the 'replit' team using CLUI tool 'add-remove-team-member', then open this Repl from your account.",colorway:"negative"})]})}function tq(e){var n=e.children;return(0,a.Y)(eb.S,{css:tj.row,row:!0,gap:8,children:n})}var tK=t(6495),t$=t(35587),tJ=t(8952),tQ=t(15297),tX=t(31464),t0=t(56243),t1=t(8300),t2=t(40568),t4=t(67337),t5=t(19817),t8=t(41956),t3=t(24692),t6=t(10091),t7=(0,ns.x)({dialog:[ew.wp.py(2),ew.wp.colWithGap(16)],reachOut:[ew.wp.pt(16),ew.wp.px(16),ew.wp.border({direction:"top",color:eg.LU.outlineDimmest}),{marginInline:-16}]}),t9=function(e){var n,t,i,l,c,d,p,f,m,g,v,w,y,b,S=e.repl,Y=e.org,A=e.onRequestClose,C=e.onForkSeparately,x=(0,en.A)().showError,k=Y.id,_=(0,o._)((0,t2.A)({navigateAfterFork:!0,replLinkOptions:{initialPaneType:"project"},onFork:function(){A()},onError:function(){x("Error creating remixed app - please try again")}}),2),D=_[0],E=_[1].loading,R=(0,o._)((t=(n=(0,t4.A)()).git,i=n.fs,c=(l=(0,o._)((0,s.useState)({loading:!1,error:null,success:!1}),2))[0],d=l[1],p=(0,et.A)(),m=(0,o._)((f=(0,r._)({},U,{}),h.n(O,f)),1)[0],g=(0,ee.A)(function(){var e,n,t;D({originId:S.id,teamId:null,title:null,description:null,isPrivate:!0,forkToPersonal:null,replReleaseId:null!==(t=null===(n=S.deployment)||void 0===n?void 0:null===(e=n.activeRelease)||void 0===e?void 0:e.id)&&void 0!==t?t:void 0,orgId:k,trackingData:{forkSource:"projectDialog",isOnboarding:!1,isApp:S.publishedAs===u.Q_.App,isTemplate:S.publishedAs===u.Q_.Template}})}),w=(0,o._)((v=(0,r._)({},U,void 0),F._(M,v)),1)[0],[(0,s.useCallback)((y=(0,ed._)(function(e){var n,r,o,a,l,s,c,u;return(0,ep.YH)(this,function(f){switch(f.label){case 0:d({loading:!0,error:null,success:!1}),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,w({variables:{id:p},fetchPolicy:"no-cache"})];case 2:if(!(r=f.sent().data)||"Repl"!==r.getRepl.__typename)throw Error("Please try again");if(null===(n=r.getRepl.project)||void 0===n?void 0:n.id)throw Error("This App is already part of a project");return[3,4];case 3:return d({loading:!1,error:"message"in(o=f.sent())?o.message:"Please try again",success:!1}),[2];case 4:return[4,t.init({includeAllInitialFiles:!0,initialCommit:!0})];case 5:if(!(a=f.sent()).error)return[3,11];if(a.error!==t1.uA.ALREADY_INITIALIZED)return[3,10];return[4,t.getRepositoryState()];case 6:if((l=f.sent()).error)return d({loading:!1,error:"Could not create Project - please try again",success:!1}),[2];if(l.state===t1.Gi.CLEAN)return[3,9];return[4,t.stageFiles({all:!0})];case 7:return f.sent(),[4,t.commit({message:"Initial project commit",allowEmpty:!1})];case 8:f.sent().error&&d({loading:!1,error:"Could not generate initial commit to create Project",success:!1}),f.label=9;case 9:return[3,11];case 10:return d({loading:!1,error:"Could not initialize a repository",success:!1}),[2];case 11:return[4,(0,t8.x)(t)];case 12:return f.sent().error&&d({loading:!1,error:"Could not create Project, please try again",success:!1}),[4,i.flush()];case 13:return f.sent(),[4,i.persist({skipDebounce:!0})];case 14:if((s=f.sent()).error||!s.success)return d({loading:!1,error:"Could not initialize a repository",success:!1}),[2];return[4,new Promise(function(e){if(i.getStatus()===ef.sn.Clean){e();return}i.onStatusChange(function(n){if(n===ef.sn.Clean){e();return}})})];case 15:f.sent(),f.label=16;case 16:return f.trys.push([16,18,,19]),[4,m({variables:{input:{mainReplId:p,orgId:e}}})];case 17:if((u=f.sent()).errors||!(null===(c=u.data)||void 0===c?void 0:c.createProject))throw Error("Could not create project");if("Project"!==u.data.createProject.__typename)throw Error(u.data.createProject.message);return[3,19];case 18:return d({loading:!1,error:f.sent().message,success:!1}),[2];case 19:return d({loading:!1,error:null,success:!0}),g.current(),[2]}})}),function(e){return y.apply(this,arguments)}),[t,i,p,m,g,w]),c]),2),I=R[0],T=R[1],P=(b=(0,ed._)(function(){return(0,ep.YH)(this,function(e){return T.loading||I(k),[2]})}),function(){return b.apply(this,arguments)});return(0,a.FD)(t3.lV,{css:t7.dialog,onSubmit:function(e){e.preventDefault(),P()},children:[(0,a.Y)(ey.Y9,{level:1,variant:"subheadDefault",children:"Planning to merge your changes back into this App?"}),(0,a.Y)(t5.I,{}),(0,a.FD)(eb.S,{gap:8,children:[(0,a.Y)(ey.EY,{children:"Consider starting a Project – a set of connected Apps for better collaborative development and versioning. Within a Project, you can:"}),(0,a.Y)(t6.s,{children:(0,a.FD)("ul",{children:[(0,a.Y)("li",{children:"Remix an App to work on a feature in isolation, and merge back when ready"}),(0,a.Y)("li",{children:"View all ongoing development in one place"}),(0,a.FD)("li",{children:["Share secrets and configuration between remixed apps"," ",(0,a.Y)(ey.EY,{color:"dimmest",children:"(coming soon)"})]})]})})]}),T.error?(0,a.Y)(nH.N,{colorway:"negative",icon:(0,a.Y)(ng.A,{}),text:T.error}):null,(0,a.FD)(eb.S,{row:!0,gap:8,justify:"end",children:[(0,a.Y)(nO.$n,{loading:T.loading||E,text:"Remix separately",onClick:function(){A(),C()}}),(0,a.Y)(nO.$n,{loading:T.loading||E,text:"Remix & start a Project",colorway:"primary",type:"submit"})]}),(0,a.Y)(eb.S,{css:t7.reachOut,children:(0,a.FD)(ey.EY,{color:"dimmest",children:["If you have questions or feedback, reach out to"," ",(0,a.Y)("a",{href:"mailto:teams@replit.com",children:"teams@replit.com"})]})})]})},re=t(44044),rn=function(e){return e.DeleteRepl="DeleteRepl",e.TransferRepl="TransferRepl",e.PowerUp="PowerUp",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishedTemplateSettings="EditPublishedTemplateSettings",e.PublishTemplate="PublishTemplate",e.UpdatePublishedTemplate="UpdatePublishedTemplate",e.Share="Share",e.FeatureRepl="FeatureRepl",e}({}),rt=t(29253),rr=t(57667),ri=t(94058),ro=t(13240),ra=t(28316),rl=(0,n_.i7)({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),rs=(0,n_.AH)([ew.wp.position.relative,ew.wp.cursor.pointer,ew.wp.backgroundColor.backgroundHigher,ew.wp.borderRadius(4),ew.wp.p(2),{input:[ew.wp.position.absolute,ew.wp.top(0),ew.wp.left(0),ew.wp.width("100%"),ew.wp.height("100%"),ew.wp.zIndex(-1),{opacity:0}]}]),rc=(0,n_.AH)([ew.wp.color.accentPrimaryDefault,ew.wp.position.absolute,ew.wp.top(0),ew.wp.left(0),ew.wp.width("100%"),ew.wp.height("100%"),ew.wp.borderRadius(4),ew.wp.backgroundColor.backgroundRoot,ew.wp.overflow("hidden"),ew.wp.display.flex,ew.wp.align.center,ew.wp.justify.center]),ru=(0,ns.x)({addIcon:[rs,ew.wp.display.flex,ew.wp.align.center,ew.wp.justify.center,ew.wp.border({width:1,color:eg.LU.foregroundDimmest}),ew.wp.backgroundColor.backgroundRoot,{"&:hover":[ew.wp.color.accentPrimaryDefault,{borderColor:eg.LU.accentPrimaryDefault}]}],updateIcon:[rs,{"&:hover .hover-state":{opacity:.8}}],hoverState:[rc,{opacity:0}],loadingState:[rc,{opacity:.8}],loadingIcon:[ew.wp.display.flex,ew.wp.align.center,ew.wp.justify.center,{animation:"".concat(rl," 1s linear infinite")}],error:[{fontSize:eg.LU.fontSizeDefault,color:eg.LU.accentNegativeDefault}]});function rd(e){var n=(0,s.useRef)(null),t=(0,o._)((0,s.useState)(e.value),2),r=t[0],i=t[1],l=(0,o._)((0,s.useState)(null),2),c=l[0],u=l[1],d=(0,e$.A)({onUpload:function(n){var t=n.url;e.onChange(t)},onUploadPreview:function(e){i(e.dataUrl)},onError:function(e){u(e.message)}});(0,s.useEffect)(function(){i(e.value)},[e.value]);var p=null==r?void 0:r.startsWith("data:");return(0,a.FD)(ro.T,{spacing:4,children:[(0,a.FD)("div",{onClick:function(){var e;null===(e=n.current)||void 0===e||e.click()},css:r?ru.updateIcon:ru.addIcon,"aria-label":r?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[r?(0,a.FD)(a.FK,{children:[(0,a.Y)(ra.A,{iconUrl:r,size:32,alt:"icon"}),p?(0,a.Y)("div",{css:ru.loadingState,children:(0,a.Y)("div",{css:ru.loadingIcon,children:(0,a.Y)(e1.A,{})})}):(0,a.Y)("div",{css:ru.hoverState,className:"hover-state",children:(0,a.Y)(e0.A,{})})]}):(0,a.Y)(e2.A,{size:32}),(0,a.Y)("input",{ref:n,accept:eJ.DA.join(","),type:"file",onChange:function(e){var n=e.target,t=n.validity,r=n.files;t.valid&&(null==r?void 0:r.length)&&(u(null),d.uploadImage(r[0],nA.VL.TemplateIcon))}})]}),c?(0,a.Y)("div",{css:ru.error,children:c}):null]})}var rp=t(65558),rf=t(38565),rh=t(10460),rm=t(79571),rg=t(60274),rv=t(68807),rw=t(7882),ry=t(83861);function rb(e){var n=e.repl,t=(0,X.A)(),o=(0,s.useMemo)(function(){if(n.org){var e;return{text:n.org.name,css:[{"&, & span":ew.wp.flex.shrink(1)}],iconLeft:(0,a.Y)(rt.e,{src:null!==(e=n.org.image)&&void 0!==e?e:null,username:n.org.name,fullName:n.org.name,size:24})}}return n.user?{text:n.user.username,css:[{"&, & span":ew.wp.flex.shrink(1)}],iconLeft:(0,a.Y)(rt.e,{src:n.user.image,username:n.user.username,size:24})}:{text:""}},[n]);if(!n.user||!n.org&&!n.user)return null;var l=n.org?(0,ea.EG)(n.org).repls:(0,t0.Mh)(n.user),c=n.org?(0,ea.EG)(n.org).repls.href.toString():(0,t0.Mh)(n.user).as;return t?(0,a.Y)(nO.$n,(0,i._)((0,r._)({},o),{onClick:function(){tQ.M.openExternalUrl(c)}})):(0,a.Y)(nc.v,(0,i._)((0,r._)({},o),{as:l.as,href:l.href,prefetch:!1}))}function rS(e){var n,t,l=e.setActiveDialog,c=e.repl,d=e.isTemplate,p=e.updateIconUrl,f=e.showCloseButton,h=e.setIsEditing,m=e.updateReplInfo,g=e.isFeaturedRepl,v=!!c.publishedAs,w=(0,o._)((0,s.useState)(!1),2),y=w[0],b=w[1],S=(0,X.A)(),Y=!!c.org&&c.org.type===u.NT.Team,A=(0,ri.Z)().fork,C=(0,re.Q)(),x=(0,en.A)(),k=x.showConfirm,_=x.showError,D=(0,o._)((0,tX.B)({onFork:function(){k("Repl forked, redirecting...")},onError:function(){_("Error creating fork - please try again")}}),2),E=D[0],R=D[1].loading,I=(0,eh._P)({controlName:"flag-olympic-torch",logFlagToAnalytics:!1}),F=(0,s.useCallback)(function(){var e;if(!(null===(e=c.org)||void 0===e?void 0:e.id)||C.loading){A();return}if(C.isEligibleForProject&&!C.hasProject){b(!0);return}if(C.hasProject){E({orgId:c.org.id,repl:c,forkSource:"replInfoHeader"});return}A()},[c,A,C,E]),T=[];c.authorizations.fork.isAuthorized&&T.push({value:"Remix",label:"Remix",icon:R?(0,a.Y)(e1.A,{}):(0,a.Y)(rh.A,{}),isDisabled:R});var P=c.authorizations.publish.isAuthorized;if(!S&&!Y){var L=c.isPrivate||!c.isRenamed||!P,U="";c.isPrivate?U="Make App public to publish":c.isRenamed||(U="Rename App to publish"),null==c.publishedAs&&T.push({value:rn.PublishTemplate,label:"Publish as Template",icon:(0,a.Y)(ry.A,{}),isDisabled:L,description:U,dataCy:"repl-info-header-settings-publish"}),d&&!L&&T.push({value:rn.UnpublishTemplate,label:"Unpublish Template",icon:(0,a.Y)(rf.A,{})}),v&&!L&&T.push({value:rn.EditPublishedTemplateSettings,label:"Edit Template publish settings",icon:(0,a.Y)(e0.A,{})})}if(Y){var N=c.isPrivate;T.push({value:rn.FeatureRepl,label:g?"Remove from Featured Apps":"Feature on Profile",icon:(0,a.Y)(rv.A,{}),description:N?"Make App public to feature":"",isDisabled:N})}return c.authorizations.deleteRepl.isAuthorized&&(I&&T.push({isDestructive:!1,value:rn.TransferRepl,label:"Transfer",icon:(0,a.Y)(rw.A,{})}),T.push({isDestructive:!0,value:rn.DeleteRepl,label:"Delete",icon:(0,a.Y)(nG.A,{})})),(0,a.FD)(eb.S,{gap:8,css:[ew.wp.p(8)],children:[(0,a.FD)(eb.S,{css:[(0,eu._)({},ew.$_.max("mobileMax"),[ew.wp.flex.columnReverse,ew.wp.align.start,{gap:eg.LU.space8}])],row:!0,gap:8,align:"center",justify:"space-between",children:[(0,a.FD)(eb.S,{row:!0,gap:8,css:[ew.wp.center,ew.wp.flex.shrink(1)],children:[(0,a.Y)(rb,{repl:c}),c.authorizations.editMetadata.isAuthorized&&d?(0,a.Y)(rd,{value:c.iconUrl,onChange:p}):null]}),(0,a.FD)(eb.S,{css:[(0,eu._)({},ew.$_.max("mobileMax"),{width:"100%",">*:not(div)":{flex:1}})],align:"center",row:!0,gap:8,children:[S?null:(0,a.Y)(nc.v,(0,i._)((0,r._)({prefetch:!1},(0,nd.z9)(c)),{iconRight:(0,a.Y)(rp.A,{}),colorway:"primary",text:"Cover page",target:"_blank",style:{pointerEvents:"auto"}})),d||S||Y?null:(0,a.Y)(th.m_,{tooltip:"Make Repl public to share",isDisabled:!c.isPrivate,children:(0,a.Y)(nO.$n,{type:"button",iconLeft:(0,a.Y)(e2.A,{}),onClick:function(){l(rn.Share)},text:"Share",disabled:c.isPrivate})}),d&&!S?(0,a.Y)(nO.$n,{type:"button",iconLeft:(0,a.Y)(e2.A,{}),onClick:function(){return l(rn.UpdatePublishedTemplate)},text:"Publish changes"}):null,S?(0,a.Y)(nu.i,{textToCopy:window.location.href,tooltipText:"Copy App URL",tooltipSuccessText:"Copied!",iconLeft:(0,a.Y)(rm.A,{}),text:""}):null,T.length>0&&(0,a.Y)(rr.in,{dataCy:"repl-info-header-settings",trigger:(0,a.Y)(nM.K0,{alt:"More options",size:32,children:(0,a.Y)(rg.A,{size:16})}),"aria-label":"More options",onAction:function(e){switch(e){case"Remix":F();return;case rn.UnpublishTemplate:l(rn.UnpublishTemplate);return;case rn.DeleteRepl:l(rn.DeleteRepl);return;case rn.TransferRepl:l(rn.TransferRepl);return;case rn.EditPublishedTemplateSettings:l(rn.EditPublishedTemplateSettings);return;case rn.PublishTemplate:l(rn.PublishTemplate);return;case rn.FeatureRepl:l(rn.FeatureRepl);return}},children:T.map(function(e){return(0,a.Y)(rr.Dr,{id:e.value,label:e.label,icon:e.icon,isDestructive:e.isDestructive,isDisabled:e.isDisabled,description:e.description,dataCy:e.dataCy},e.value)})}),f?(0,a.Y)(nM.K0,{alt:"Close",tooltipBehavior:"hidden",onClick:function(){m(),h(!1)},children:(0,a.Y)(n$.A,{})}):null]})]}),(null===(n=c.org)||void 0===n?void 0:n.type)===u.NT.Team&&(null===(t=c.user)||void 0===t?void 0:t.__typename)==="User"?(0,a.FD)(ey.EY,{variant:"small",color:"dimmest",children:["Created by @",c.user.username]}):null,y&&c.org?(0,a.Y)(nB.a,{isOpen:!0,onRequestClose:function(){return b(!1)},children:(0,a.Y)(t9,{repl:c,org:c.org,onRequestClose:function(){return b(!1)},onForkSeparately:A})}):null]})}var rY=t(53723),rA=t(10807),rC=t(79239),rx=t(91315),rk=t(19706),r_=eb.D.form,rD=(0,ns.x)({form:[ew.wp.colWithGap(24)]}),rE=function(e){var n,t,r,i=e.currentUser,l=e.repl,c=e.onDone,u=e.onCancel,d=l.owner?l.owner:l.org,p=null!==(r=null===(n=l.owner)||void 0===n?void 0:n.username)&&void 0!==r?r:null===(t=l.org)||void 0===t?void 0:t.slug,f=p?"".concat(p,"/").concat(l.slug):l.slug,h=(0,o._)((0,rx.p)(i,null==d?void 0:d.id),3),m=h[0],g=h[1],v=h[2],w=(0,o._)((0,s.useState)(""),2),y=w[0],b=w[1],S=y===f,Y=(0,nw.c)(),A="You do not have permission to transfer this Repl because XYZ.";return(0,a.Y)(r_,{css:rD.form,onSubmit:function(e){e.preventDefault(),S&&(alert("Beep boop would transfer Repl, redirecting"),c())},children:(0,a.FD)(eb.S,{gap:16,children:[(0,a.Y)(ey.EY,{children:"Transfer this Repl to another account or organization."}),(0,a.Y)(rk.d,{colorway:"grey",text:"Transferring ownership might result in losing some features, depending on the subscription status of the selected organization. Click here for more details.",iconLeft:(0,a.Y)(ng.A,{}),href:"https://docs.replit.com/teams/collaboration-on-replit#transferring-repls-to-organizations"}),(0,a.FD)(eb.S,{gap:4,children:[(0,a.Y)("label",{htmlFor:Y("owner"),children:(0,a.Y)(ey.EY,{color:"dimmer",variant:"small",children:"New Owner"})}),(0,a.Y)(rC.A,{id:Y("owner"),owners:v,selectedOwner:m,setSelectedOwner:g})]}),A?(0,a.Y)(nH.N,{colorway:"negative",text:A}):null,(0,a.FD)(eb.S,{gap:4,children:[(0,a.Y)("label",{htmlFor:Y("confirmName"),children:(0,a.FD)(ey.EY,{color:"dimmer",variant:"small",children:["Type the name ",f," to delete"]})}),(0,a.Y)(ny.pd,{id:Y("confirmName"),disabled:!1,autoFocus:!0,value:y,onChange:function(e){return b(e.currentTarget.value)}})]}),(0,a.FD)(eb.S,{row:!0,gap:12,justify:"end",children:[(0,a.Y)(nO.$n,{type:"button",onClick:u,text:"Cancel"}),(0,a.Y)(nO.$n,{type:"submit",disabled:!S,iconLeft:(0,a.Y)(rw.A,{}),colorway:"negative",text:"Yes, transfer this Repl"})]})]})})},rR=function(e){var n,t=e.repl,i=e.onDone,o=e.onCancel,l=(n=(0,r._)({},b,void 0),f.I(Y,n)).data,s=null==l?void 0:l.currentUser;return(0,a.FD)(eb.S,{gap:24,children:[(0,a.FD)(ey.Y9,{variant:"subheadBig",level:2,children:["Transfer ",t.title]}),s?(0,a.Y)(rE,{currentUser:s,repl:t,onDone:i,onCancel:o}):(0,a.Y)(eb.S,{align:"center",children:(0,a.Y)(e1.A,{})})]})},rI=t(13278),rF=t(18680),rT=(0,ns.x)({loadingRoot:[ew.wp.center,ew.wp.p(16)],root:{overflow:"auto",maxHeight:"80vh"},form:[ew.wp.p(8)]});function rP(e){var n,t,i=e.getDesktopLayoutState,o=e.setIsEditing,l=e.showCloseButton,s=(n={variables:{replId:(0,et.A)()}},t=(0,r._)({},j,n),f.I(q,t)).data,c=(null==s?void 0:s.repl.__typename)==="Repl"?s.repl:null;return c?(0,a.Y)(rU,{getDesktopLayoutState:i,setIsEditing:o,showCloseButton:l,repl:c}):(0,a.Y)(eb.S,{css:rT.loadingRoot,children:(0,a.Y)(e1.A,{})})}var rL=[u.rT.Submit,u.rT.PublishTemplate,u.rT.EditTemplate];function rU(e){var n,t,d,p,f,m,g,v,w,y,b,S,Y,A=e.repl,C=e.getDesktopLayoutState,x=e.showCloseButton,k=e.setIsEditing,_=(0,l.useRouter)(),D=(0,X.A)(),E=(0,o._)((0,s.useState)(null),2),R=E[0],I=E[1],F=(0,o._)((0,s.useState)(A.isRenamed?A.title:""),2),T=F[0],P=F[1],L=(0,o._)((0,s.useState)(A.description||""),2),U=L[0],N=L[1],O=(0,o._)((0,s.useState)(A.rawTemplateLabel),2),M=O[0],B=O[1],H=(0,en.A)().showError,z=A.publishedAs===u.Q_.Template,W=(null===(m=A.org)||void 0===m?void 0:m.type)!=="team"&&(A.authorizations.editVisibility.isAuthorized||A.authorizations.editVisibility.code===u.S4.RequiresActiveSubscription);(0,s.useEffect)(function(){N(A.description||"")},[A.description]);var G=(0,s.useRef)(A),V=(0,o._)((n={variables:{id:A.id},onCompleted:function(){var e;if(D){_.push("/desktopApp/home");return}if((null===(e=A.org)||void 0===e?void 0:e.type)==="team"){var n=(0,ea.EG)(A.org);_.push(n.home.href);return}_.push("/home","/~")},update:function(e,n){var t;(null===(t=n.data)||void 0===t?void 0:t.deleteRepl)&&(e.evict({id:e.identify(n.data.deleteRepl)}),e.gc())},onError:function(e){return H((0,er.A)(e.message))}},t=(0,r._)({},j,n),h.n(J,t)),2),Z=V[0],q=V[1].loading,et=(0,o._)((d=(0,r._)({},j,{onError:function(e){return H((0,er.A)(e.message))},onCompleted:function(e){var n=e.updateRepl.repl,t=G.current,r={};t.description!==n.description&&(r.description=n.description),t.title!==n.title&&(r.title=n.title),t.url!==n.url&&(r.url=n.url,window.history.replaceState(null,"",n.url+window.location.search+window.location.hash)),t.isRenamed!==n.isRenamed&&(r.isRenamed=!!n.isRenamed),G.current=A,Object.keys(r).length>0&&k(!1)}}),h.n($,d)),2),eu=et[0],ed=et[1].loading,ep=(0,o._)((p={variables:{input:{replId:A.id}},onError:function(e){c.Cp(e),H((0,er.A)(e.message))}},f=(0,r._)({},j,p),h.n(K,f)),2),ef=ep[0],eh=ep[1],em=(0,s.useMemo)(function(){return!!T&&T!==A.title||M!==A.rawTemplateLabel||(""!==U||!!A.description)&&U!==A.description},[A,T,U,M]),eg=(0,ee.A)(em),ev=(0,s.useCallback)(function(){em&&eu({variables:{input:{id:A.id,title:T.trim()||A.title,description:U,templateLabel:A.authorizations.editTemplateMetadata.isAuthorized?M:void 0}}})},[em,eu,A,T,U,M]),eS=(0,ee.A)(ev);(0,s.useLayoutEffect)(function(){return function(){eg.current&&eS.current()}},[eS,eg]);var eY=function(){eu({variables:{input:{id:A.id,isPrivate:!A.isPrivate}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,i._)((0,r._)({},A),{isPrivate:!A.isPrivate})}}}),(0,eo.u4)(eo.AZ.PRIVATE_TOGGLED,{enabled:!A.isPrivate,source:"workspace_info_modal"})},eA=A.isRenamed?"Name your App":"Default name: ".concat(A.title),eC=rL.includes(A.workspaceCta),ex=(0,nw.c)(),ek=(null===(g=A.owner)||void 0===g?void 0:g.__typename)==="Team";return(0,a.FD)("div",{css:rT.root,"data-can-change-description":A.authorizations.editMetadata.isAuthorized,children:[(0,a.Y)(ri.B,{forkParams:{trackingData:{forkSource:"editReplPopoverMenuItem"}},repl:A,teamContext:(null===(v=A.owner)||void 0===v?void 0:v.__typename)==="Team"?A.owner.id:void 0,children:(0,a.Y)(rS,{repl:A,isTemplate:z,showCloseButton:x,setActiveDialog:I,setIsEditing:k,updateIconUrl:function(e){return eu({variables:{input:{id:A.id,iconUrl:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,i._)((0,r._)({},A),{iconUrl:e})}}})},updateReplInfo:ev,isFeaturedRepl:A.isFeaturedRepl})}),(0,a.Y)("form",{css:rT.form,onSubmit:function(e){e.preventDefault(),ev()},children:(0,a.FD)(eb.S,{align:"stretch",gap:16,children:[(0,a.FD)(eX.ui,{background:"default",gap:16,children:[(0,a.Y)(eb.S,{children:(0,a.FD)(eb.S,{gap:4,children:[(0,a.FD)(eb.S,{row:!0,justify:"space-between",align:"end",children:[(0,a.Y)("label",{htmlFor:ex("name"),children:(0,a.Y)(ey.EY,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,a.Y)(rA.A,{maxLength:60,value:T,hideLabel:!0})]}),(0,a.Y)(ny.pd,{style:{cursor:A.authorizations.editMetadata.isAuthorized?"auto":"not-allowed"},disabled:!A.authorizations.editMetadata.isAuthorized,maxLength:60,placeholder:eA,value:T,onChange:function(e){return P(e.target.value)},spellCheck:!1,id:ex("name"),dataCy:"ws-repl-info-title-input"})]})}),(0,a.Y)(eb.S,{children:(0,a.FD)(eb.S,{gap:4,children:[(0,a.FD)(eb.S,{row:!0,justify:"space-between",align:"end",children:[(0,a.Y)("label",{htmlFor:ex("description"),children:(0,a.Y)(ey.EY,{variant:"small",color:"dimmer",multiline:!1,children:"Description"})}),(0,a.Y)(rA.A,{maxLength:t$.z,value:U,hideLabel:!0})]}),(0,a.Y)(ny.ov,{disabled:!A.authorizations.editMetadata.isAuthorized,maxLength:t$.z,value:U,onChange:function(e){return N(e.target.value)},placeholder:"What does this App do?",css:[ew.wp.minHeight(96),ew.wp.maxHeight(256),{resize:"vertical"}],id:ex("description")})]})})]}),z&&A.authorizations.editTemplateMetadata.isAuthorized?(0,a.Y)(eX.ui,{background:"default",gap:4,children:(0,a.FD)(eb.S,{gap:4,children:[(0,a.Y)("label",{htmlFor:ex("template"),children:(0,a.Y)(ey.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Template label"})}),(0,a.Y)(ny.pd,{value:M,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return B(e.target.value)},id:ex("template")})]})}):null]})}),eC?null:(0,a.FD)(eb.S,{gap:24,css:[ew.wp.p(8)],children:[(0,a.FD)(eb.S,{gap:24,children:[(0,a.Y)(es.A,{replId:A.id,authz:A.authorizations.editMetadata,initialIconUrl:A.iconUrl,originIconUrl:null===(w=A.templateInfo)||void 0===w?void 0:w.iconUrl}),(0,a.Y)(el.A,{replId:A.id,authz:A.authorizations.editMetadata,initialImageUrl:null!==(Y=A.imageUrl)&&void 0!==Y?Y:null===(y=A.templateInfo)||void 0===y?void 0:y.imageUrl,originImageUrl:null===(b=A.templateInfo)||void 0===b?void 0:b.imageUrl})]}),W?(0,a.FD)(eb.S,{gap:8,children:[(0,a.FD)(rY.e2,{tag:"fieldset",name:ex("privacy"),value:A.isPrivate.toString(),onChange:function(){if(!ed){(0,eo.u4)(eo.AZ.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!A.isPrivate,source:"workspace_info_modal"});var e,n=!A.isPrivate;if(A.authorizations.editVisibility.isAuthorized||!1===n){eY();return}A.authorizations.editVisibility.code===u.S4.RequiresActiveSubscription&&(null===(e=A.org)||void 0===e?void 0:e.__typename)!=="Org"?I(rn.PowerUp):H(A.authorizations.editVisibility.message)}},row:!0,primary:!0,stretch:!0,children:[(0,a.Y)(rY.$O,{id:ex("false"),value:"false",text:"Public",icon:(0,a.Y)(rI.A,{})}),(0,a.Y)(rY.$O,{id:ex("true"),value:"true",text:"Private",icon:(0,a.Y)(rF.A,{})})]}),(0,a.Y)(ey.EY,{variant:"small",color:"dimmest",children:(0,ei.A)(A.isPrivate,ek)})]}):null]}),(0,a.Y)(tK.A,{isOpen:R===rn.DeleteRepl,onClose:function(){return I(null)},selectedRepls:[A],onDelete:function(){Z()},deleting:q}),(0,a.Y)(tJ.A,{isOpen:R===rn.PowerUp,onClose:function(){return I(null)},reloadPageAfterPurchaseComplete:!0,type:"purchase",analyticsContext:{upgrade:{context:"workspace_info_modal"}}}),(0,a.Y)(nB.a,{isOpen:R===rn.UnpublishTemplate,onRequestClose:function(){return I(null)},children:(0,a.Y)(Q.A,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return I(null)},onConfirm:function(){!eh.loading&&(ef(),I(null))},children:"Your App will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,a.Y)(nB.a,{isOpen:R===rn.EditPublishedTemplateSettings,onRequestClose:function(){return I(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,a.Y)(tk,{source:"replEnvironment",replId:A.id,getDesktopLayoutState:C})}),(0,a.Y)(nB.a,{isOpen:R===rn.PublishTemplate,onRequestClose:function(){return I(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,a.Y)(tk,{source:"replEnvironment",replId:A.id,getDesktopLayoutState:C})}),(0,a.Y)(nB.a,{isOpen:R===rn.UpdatePublishedTemplate,onRequestClose:function(){return I(null)},noPadding:!0,children:(0,a.Y)(tV,{repl:A,getDesktopLayoutState:C})}),(0,a.Y)(nB.a,{isOpen:R===rn.Share,onRequestClose:function(){return I(null)},noPadding:!0,children:(0,a.Y)(nh,{repl:A})}),(0,a.Y)(nB.a,{isOpen:R===rn.TransferRepl,onRequestClose:function(){return I(null)},children:(0,a.Y)(rR,{repl:A,onDone:function(){return I(null)},onCancel:function(){return I(null)}})}),(0,a.Y)(nB.a,{isOpen:R===rn.FeatureRepl,onRequestClose:function(){return I(null)},centered:!0,maxWidth:650,children:(0,a.Y)(ec.A,{isFeatured:A.isFeaturedRepl,repl:A,orgId:null===(S=A.org)||void 0===S?void 0:S.id,onCompleted:function(){return I(null)}})})]})}},39969:(e,n,t)=>{"use strict";t.d(n,{HT:()=>m,TO:()=>v,px:()=>f,vz:()=>p});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  fragment DeploymentsDeployOptionsDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n    currentBuild {\n      id\n      provider\n      envVars {\n        name\n        value\n      }\n      machineJob {\n        timezone\n        crontab\n        timeoutSeconds\n        failureNotifications\n      }\n      isPrivate\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment DeploymentsDeployOptionsAuthzRepl on Repl {\n    id\n    authorizations {\n      editDeploymentSecrets {\n        isAuthorized\n        message\n      }\n      editSecrets {\n        isAuthorized\n        message\n      }\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  query DeploymentsDeployOptions($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  query DeploymentsDeployOptionsAuthz($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...DeploymentsDeployOptionsAuthzRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var d={},p=(0,o.J1)(l()),f=(0,o.J1)(s()),h=(0,o.J1)(c(),p);function m(e){var n=(0,r._)({},d,e);return a.I(h,n)}var g=(0,o.J1)(u(),f);function v(e){var n=(0,r._)({},d,e);return a.I(g,n)}},40049:(e,n,t)=>{"use strict";t.d(n,{y:()=>d});var r=t(1889),i=t(39256),o=t(34951),a=t(23700),l=t(40043),s=t(37407),c=t(35869),u=t(99054);function d(e){var n=e.deployment,t=e.small,d=n.currentBuild,p=a.v[d.status],f=p.title,h=p.color,m=(0,i.A)(new Date(d.timeCreated),Date.now(),{addSuffix:!0}),g="Deployed ".concat(m," by ").concat(d.user.displayName),v=d.status===o.nH.Success?"Deployed":f;return(0,r.Y)(s.m_,{tooltip:g,children:(0,r.FD)(c.S,{row:!0,gap:4,align:"center",children:[(0,r.Y)(u.A,{size:t?12:16,color:h}),(0,r.Y)(l.EY,{variant:t?"small":void 0,color:"dimmest",multiline:!1,children:v})]})})}},40169:e=>{e.exports={root:"AppProposal_root___kyGq",contentScroll:"AppProposal_contentScroll__vUcGM",content:"AppProposal_content__eIQ8X",startBuildingButton:"AppProposal_startBuildingButton__gDe1H"}},40563:(e,n,t)=>{"use strict";t.d(n,{L:()=>f,i:()=>h});var r=t(83846),i=t(1889),o=t(6680),a=t(61234),l=t(22498),s=t(43974),c=(0,l.v)(["connectorHeight","connectorLeft","markerTop","markerBottom","markerLeft"]),u=c.cssVars,d=c.styleTokens,p=(0,a.x)({connectorSegmentBorder:[s.wp.position.absolute,s.wp.left(d.connectorLeft),s.wp.width(18),s.wp.height(d.connectorHeight),s.wp.top("100%"),{borderRight:"2px solid ".concat(o.LU.outlineDimmer)}],parallelSegmentBorder:[s.wp.position.absolute,s.wp.top(0),s.wp.left(d.connectorLeft),s.wp.bottom(0),s.wp.height(d.connectorHeight),s.wp.width(18),{borderLeft:"2px solid ".concat(o.LU.outlineDimmer),borderBottom:"2px solid ".concat(o.LU.outlineDimmer),borderRadius:"0 0 0 50px"}],parallelSegmentConnectorBorder:[s.wp.position.absolute,s.wp.top(0),s.wp.bottom(0),s.wp.left(d.connectorLeft),s.wp.height("115%"),{borderLeft:"2px solid ".concat(o.LU.outlineDimmer)}],marker:[s.wp.position.absolute,s.wp.top(-2),s.wp.left(-3),s.wp.height(4),s.wp.width(4),s.wp.backgroundColor.foregroundDimmest,s.wp.borderRadius("full")],sequentialMarkerBorder:[s.wp.position.relative,s.wp.top(4),s.wp.left(d.markerLeft),s.wp.height(12),s.wp.width(30),{borderTop:"2px solid ".concat(o.LU.outlineDimmer),borderRight:"2px solid ".concat(o.LU.outlineDimmer),borderRadius:"0 10px 0 0"}],parallelMarkerBorder:[s.wp.position.relative,s.wp.top(4),s.wp.left(d.markerLeft),s.wp.height(12),s.wp.width(30),{borderLeft:"2px solid ".concat(o.LU.outlineDimmer)}]});function f(e){var n,t,o=e.mode,a=e.dragAble,l=e.hideBottom,s=void 0!==l&&l,c=e.connectorHeight,d=e.connectorLeft;return"sequential"===(void 0===o?"sequential":o)?(0,i.Y)(i.FK,{children:s?null:(0,i.Y)("div",{css:p.connectorSegmentBorder,style:(n={},(0,r._)(n,u.connectorHeight,"".concat(null!=c?c:8,"px")),(0,r._)(n,u.connectorLeft,"".concat(null!=d?d:0,"px")),n)})}):(0,i.FD)(i.FK,{children:[(0,i.Y)("div",{css:p.parallelSegmentBorder,style:(t={width:void 0===a||a?12:18},(0,r._)(t,u.connectorHeight,"".concat(null!=c?c:25,"px")),(0,r._)(t,u.connectorLeft,"".concat(null!=d?d:-12,"px")),t)}),s?null:(0,i.Y)("div",{css:p.parallelSegmentConnectorBorder,style:(0,r._)({},u.connectorLeft,"".concat(null!=d?d:-12,"px"))})]})}function h(e){var n,t,o=e.top,a=void 0===o?-2:o,l=e.bottom,s=void 0===l?0:l,c=e.left;return"sequential"===e.mode?(0,i.Y)("div",{css:p.sequentialMarkerBorder,style:(n={},(0,r._)(n,u.markerTop,"".concat(a,"px")),(0,r._)(n,u.markerBottom,"".concat(s,"px")),(0,r._)(n,u.markerLeft,"".concat(c,"px")),n),children:(0,i.Y)("div",{css:p.marker})}):(0,i.Y)("div",{css:p.parallelMarkerBorder,style:(t={},(0,r._)(t,u.markerTop,"".concat(a,"px")),(0,r._)(t,u.markerBottom,"".concat(s,"px")),(0,r._)(t,u.markerLeft,"".concat(c,"px")),t),children:(0,i.Y)("div",{css:p.marker})})}},40680:(e,n,t)=>{"use strict";t.d(n,{$:()=>C});var r=t(46434),i=t(29935),o=t(12694),a=t(82643),l=t(1889),s=t(21462),c=t(17844),u=t(12584),d=t(41114),p=t(86997);function f(){var e=(0,u._)(["\n  query CurrentUserGithubToken {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return f=function(){return e},e}var h={},m=(0,d.J1)(f()),g=t(63892),v=t(60990),w=t(67337),y=t(93682),b=t(44885),S=t(40043),Y=t(35869),A=t(6761);function C(){var e,n,t=(0,w.A)().replspaceApi,u=(0,o._)((0,s.useState)(null),2),d=u[0],f=u[1],C=(0,o._)((0,s.useState)(!1),2),x=C[0],k=C[1],_=(e=(0,c._)({},h,void 0),p.I(m,e)).data,D=(null==_?void 0:_.currentUser)||void 0;return(0,s.useEffect)(function(){return t.onConfirmSendToken(function(e){e&&(0,g.u4)(g.AZ.MODAL_VIEWED,{modalName:"git_token_modal"}),f(function(){return e})})},[t]),(0,v.b)((n=(0,i._)(function(e,n){var t,i,o,l,s,c,u,d,p,h,m,v;return(0,a.YH)(this,function(a){switch(a.label){case 0:t=n.session,i=n.signal,l=(o=e.replspaceApi.init.stream({session:t.from},{signal:i})).reqWritable,s=o.resReadable,c=!1,u=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),p=function(){var e=m.value;if(e.ok&&"getGithubToken"===e.payload.$kind){var n,t,r=e.payload.nonce,i=null!==(t=null==D?void 0:null===(n=D.gitHubInfo)||void 0===n?void 0:n.accessToken)&&void 0!==t?t:void 0;if(!i)return l.write({$kind:"githubToken",nonce:r}),"continue";if(x)return l.write({$kind:"githubToken",token:i,nonce:r}),"continue";(0,g.u4)(g.AZ.MODAL_VIEWED,{modalName:"git_token_modal"}),f(function(){return function(e){if(!e){f(null),l.write({$kind:"githubToken",nonce:r});return}l.write({$kind:"githubToken",token:i,nonce:r}),f(null),k(!0)}})}},h=(0,r._)(s),a.label=2;case 2:return[4,h.next()];case 3:if(!(c=!(m=a.sent()).done))return[3,5];p(),a.label=4;case 4:return c=!1,[3,2];case 5:return[3,12];case 6:return v=a.sent(),u=!0,d=v,[3,12];case 7:if(a.trys.push([7,,10,11]),!(c&&null!=h.return))return[3,9];return[4,h.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(u)throw d;return[7];case 11:return[7];case 12:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[D,x]),(0,l.Y)(b.a,{isOpen:"function"==typeof d,onRequestClose:function(){null==d||d(!1),(0,g.u4)(g.AZ.GIT_TOKEN_MODAL_ACCEPTED,{response:"close"}),f(null)},children:(0,l.FD)(Y.S,{gap:16,children:[(0,l.Y)(S.Y9,{variant:"headerDefault",level:3,children:"Pass GitHub Credentials"}),(0,l.Y)(S.EY,{children:"It looks like you're trying to connect to your GitHub repository through the shell. Pass your token to the shell?"}),(0,l.Y)(S.EY,{children:"If you did not initiate a git command, you should deny this."}),(0,l.FD)(Y.S,{justify:"end",row:!0,gap:16,children:[(0,l.Y)(y.$n,{onClick:function(){null==d||d(!1),(0,g.u4)(g.AZ.GIT_TOKEN_MODAL_ACCEPTED,{response:"deny"}),f(null)},text:"Deny"}),(0,l.Y)(y.$n,{onClick:function(){null==d||d(!0),(0,g.u4)(g.AZ.GIT_TOKEN_MODAL_ACCEPTED,{response:"confirm"}),f(null)},iconLeft:(0,l.Y)(A.A,{}),text:"Confirm for this session",colorway:"primary"})]})]})})}},40844:(e,n,t)=>{"use strict";t.d(n,{f:()=>g});var r=t(1889),i=t(21462),o=t(45773),a=t(44987),l=t(50066),s=t(68321),c=t(99672),u=t(45771),d=t(43974),p=(0,u.AH)({scrollbarWidth:"thin",outline:"none",overflow:"auto",".cm-content":{paddingBottom:0},"::-webkit-scrollbar":{width:4},".cm-gutters":{minWidth:"unset"}}),f=(0,u.AH)({overflow:"hidden",".cm-scroller":{overflow:"hidden"}}),h={root:d.wp.backgroundColor.backgroundRoot,higher:d.wp.backgroundColor.backgroundHigher,highest:d.wp.backgroundColor.backgroundHighest,default:d.wp.backgroundColor.backgroundDefault},m=new c.k(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,o.$K)({formatNumber:function(n,t){for(var r=String(t.doc.lines).length,i=String(n+e-1);r>i.length;)i="\xa0"+i;return i}})});function g(e){var n=e.path,t=e.initialDoc,o=e.maxHeight,c=e.minHeight,d=e.extensions,g=e.allowScroll,v=e.fontSize,w=e.hideGutter,y=e.startLineNumber,b=e.style,S=e.elevation,Y=e.onNavigateToCode,A=(0,l.A)(),C=A.ref,x=A.view,k=(0,i.useMemo)(function(){var e;return e=h[null!=S?S:"default"],(0,u.AH)({".cm-editor":e,".cm-gutters":e})},[S]),_=m.use(y);return(0,r.Y)("div",{style:b,children:(0,r.Y)(a.Ay,{ref:C,initialDoc:t,css:[p,k,void 0===g||g?null:f],extensions:[_,void 0===d?[]:d],style:{minHeight:c,maxHeight:null!=o?o:"10em"},hideGutter:w,filePath:n,fontSize:v,readOnly:!0,onClick:function(e){if(Y&&x){var n=e.clientX,t=e.clientY,r=x.posAtCoords({x:n,y:t});Y(null!==r?(0,s.Z3)(x.state.doc,r):null)}}})})}},41086:(e,n,t)=>{"use strict";t.d(n,{V:()=>o});var r=t(34951),i=t(9907);function o(){var e=(0,i.vm)(),n=(0,i.jl)(),t=(0,i.d0)();return e||n?r.on.Mac:t?r.on.Windows:r.on.Linux}},41140:(e,n,t)=>{"use strict";t.d(n,{_9:()=>p,t:()=>g});var r=t(17844),i=t(12584),o=t(41114),a=t(50175);function l(){var e=(0,i._)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment MultiplayerRepl on Repl {\n    id\n    collaborators {\n      user {\n        ...MultiplayerUser\n      }\n    }\n    multiplayerInvites {\n      email\n      type\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment MultiplayerReplInvite on MultiplayerInvite {\n    email\n    repl {\n      ...MultiplayerRepl\n    }\n    invitePermissionType: type\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation AddOrInviteReplMultiplayer(\n    $input: AddOrInviteReplMultiplayerInput!\n  ) {\n    addOrInviteReplMultiplayer(input: $input) {\n      __typename\n      ... on AddOrInviteReplMultiplayerOuput {\n        result {\n          ... on MultiplayerInvite {\n            ...MultiplayerReplInvite\n          }\n          ... on ReplPermission {\n            id\n            repl {\n              ...MultiplayerRepl\n            }\n            user {\n              ...MultiplayerUser\n            }\n            replPermissionType: type\n          }\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var d={},p=(0,o.J1)(l()),f=(0,o.J1)(s(),p),h=(0,o.J1)(c(),f),m=(0,o.J1)(u(),h,f,p);function g(e){var n=(0,r._)({},d,e);return a.n(m,n)}},41327:(e,n,t)=>{"use strict";t.d(n,{$f:()=>a,Pi:()=>o,cl:()=>i});var r=t(95758),i="git",o={gitCommit:{id:"git.commit",name:"Git: Commit",scope:i,default:(0,r.FM)({cmdOrCtrl:!0,key:"Enter"})}},a=Object.values(o)},41502:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(21462),i=t(67668),o=t(80865),a=t(67337),l=t(87208);function s(e){var n=(0,a.A)().fs,t=(0,o._P)({controlName:"flag-draft-buffers"}),s=(0,l.UI)(),c=(0,r.useCallback)(function(r,o){var a=r.code,l=r.insertAt,c=r.newLine,u=void 0===c||c;if(!e||(0,i.FN)(e)||(0,i.P1)(e)||(0,i.rb)(e)||(0,i.Go)(e))throw Error("Invalid file, this should never happen");if(0!==a.length)var d=n.watchTextFile(e,{onReady:function(r){var i=r.initialContent,c=r.writeChange,p=i.toString(),f="end"===l?p.length:l,h=a;u&&(0!==f&&f!==p.length&&-1===(f=p.indexOf("\n",f))&&(f=p.length),0!==f&&"\n"!==p[f-1]&&(h="\n"+h),"\n"!==p[f]&&(h+="\n")),c({from:f,insert:h},o),!t||s?n.flush(new Set([e])).finally(function(){d()}):d()}})},[e,n,t,s]);return!e||(0,i.FN)(e)||(0,i.P1)(e)||(0,i.rb)(e)||(0,i.Go)(e)?null:c}},41594:(e,n,t)=>{"use strict";t.d(n,{DH:()=>g,GK:()=>w,N_:()=>m,aP:()=>d,pX:()=>u,s7:()=>v,sC:()=>p});var r=t(17844),i=t(93629),o=t(21462),a=t(44370),l=t(69338),s=t(88079),c=t(70906),u=(0,s.F)(function(){return null}),d=(0,s.F)(function(){return null});function p(e){var n=d.current();(0,o.useEffect)(function(){e!==n&&d.set(function(){return e})},[e,n])}var f=(0,a.eU)(null),h=(0,a.eU)(null,function(e,n,t){var o,a,l=e(f),s=l?(0,r._)({},l,t):(0,r._)({},t),c=null==s?void 0:s.changes,d=null==s?void 0:s.filePath;if(!d||!c)throw Error('"filePath", "changes", "users" required when initializing history state');var p=(a=(o=(0,i._)((0,r._)({},s),{changes:c,filePath:d})).changes.length,(0,r._)({users:{},count:a,version:Math.max(0,a-1),playing:!1,comparing:!1},o));u.set(function(){return p});var h=p.changes.length;if(0===h){n(f,p);return}(null==l?void 0:l.changes)&&p.changes!==l.changes&&(p.count=h,p.version=Math.min(p.version,h-1),p.playing=!1,p.comparing=!1),p.version===h-1&&(p.playing=!1),n(f,p)});function m(){return(0,l.md)(f,{store:y()})}function g(){return(0,l.Xr)(h,{store:y()})}function v(){return(0,l.Xr)((0,c.A)(function(){return(0,a.eU)(null,function(e,n){n(f,null)})},[]),{store:y()})}var w=(0,o.createContext)(null);function y(){var e=(0,o.useContext)(w);if(!e)throw Error("Expected store in context");return e}},41956:(e,n,t)=>{"use strict";t.d(n,{Q:()=>u,x:()=>c});var r=t(29935),i=t(12694),o=t(82643),a=t(21462),l=t(8300),s=t(67337),c=function(e){return e.escapeHatchGitExecWrite("git config --local core.sshCommand replit-git-ssh")};function u(){var e=(0,s.A)(),n=e.container,t=e.fs,u=e.git,d=(0,i._)((0,a.useState)({state:"loading"}),2),p=d[0],f=d[1];return(0,a.useEffect)(function(){function e(){return(e=(0,r._)(function(){var e;return(0,o.YH)(this,function(n){switch(n.label){case 0:return f({state:"loading"}),[4,u.getRepositoryState()];case 1:if((e=n.sent()).error&&f({state:"error",error:"Could not get repository status"}),e.error||e.state===l.Gi.NOT_INITIALIZED)return f({state:"error",error:"Could not get repository status"}),[2];return[4,c(u)];case 2:if(n.sent().error)return f({state:"error",error:"Could not configure SSH"}),[2];return f({state:"finished",hasInstalled:!0}),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[n,t,u]),p}},42074:(e,n,t)=>{"use strict";t.d(n,{r:()=>el});var r=t(83846),i=t(17844),o=t(1889),a=t(21462),l=t(2960),s=t(90001),c=t(70906),u=t(79891),d=t(80703),p=t(6680),f=t(61234),h=t(47258),m=t(62493),g=t(43974),v=t(3910),w=t(35869),y=t(67929),b=t(24864),S=t(1018),Y=(0,f.x)({root:[g.wp.reset.button,g.wp.viewStyle,g.wp.flex.row,g.wp.align.center,g.wp.borderRadius(0),g.wp.cursor.pointer,g.wp.color.foregroundDimmer,g.wp.px(4),{gap:p.LU.space6,"&:hover":{color:p.LU.foregroundDefault}}],icon:[g.wp.position.relative,b.Ef,{width:b.eQ.iconSize,height:b.eQ.iconSize}],iconRight:[b.Ef,{width:b.eQ.iconSize,height:b.eQ.iconSize}],text:[g.wp.truncate,g.wp.flex.shrink(1),{fontSize:b.eQ.fontSize}]}),A=(0,a.memo)(function(){var e=(0,y.if)(),n=e.breadcrumbs,t=e.iconOnly,r=e.onClick;return n.length?(0,o.Y)(o.FK,{children:n.map(function(e,n){if(!e.data||!("label"in e.data))return null;var i=e.data,a=i.label,l=i.icon;return(0,o.FD)("button",{css:Y.root,onClick:function(){return r(e)},children:[(0,o.Y)(w.S,{css:Y.icon,children:l}),t?null:(0,o.Y)(w.S,{css:Y.text,children:a}),(0,o.Y)(w.S,{css:Y.iconRight,children:(0,o.Y)(S.A,{})})]},a+n)})}):null}),C=t(45771),x=t(28365),k=t(56185),_=(0,C.AH)([g.wp.reset.button,g.wp.viewStyle,g.wp.center,g.wp.height("100%"),g.wp.cursor.pointer,g.wp.color.foregroundDimmest,g.wp.px(4),{"&:hover":{color:p.LU.foregroundDefault}},b.Ef]);function D(e){return(0,o.Y)("button",{css:_,onClick:e.onClick,title:e.isLoading?"Loading":"Clear",children:e.isLoading?(0,o.Y)(k.A,{}):(0,o.Y)(x.A,{})})}var E=t(68966),R=t(93629),I=t(4880),F=t(68456),T=t(18063),P=t(2527),L=t(37407),U=t(86593),N=t(71156),O=t(28023),M=t(20627),B=[g.wp.position.absolute,g.wp.top(0),g.wp.left(0),g.wp.width("100%")],H=(0,f.x)({item:[B,(0,r._)({userSelect:"none",cursor:"pointer","> div":{borderRadius:"4px",marginInline:b.eQ.inputBarPadding,height:"100%",justifyContent:"center"},"&:hover > div":{backgroundColor:p.LU.interactiveBackground}},g.kL.min(E.aF,E.yN),{"> div":{borderRadius:"4px"}})]}),z=(0,a.memo)((0,a.forwardRef)(function(e,n){var t=(0,F.H)(),r=(0,y.mg)(),l=(0,y.IT)(e.index),s=l.row,c=l.active,u=l.onClick,d=l.ariaAttrs;if(!s)return null;var p={height:r?void 0:e.height,transform:"translateY(".concat(e.y,"px)")};if("section"===s.type)return(0,o.Y)(Z,{innerRef:n,path:s.path,style:p,border:e.index>0,index:e.index,tooltip:s.tooltip});var f=s.item,h=f.data,m=f.match;if("group"===h.type)return null;var g=m.render;if(g&&"content"in g&&g.content)return(0,o.FD)(w.S,(0,R._)((0,i._)({innerRef:n,css:H.item,style:p,onClick:u,"data-index":e.index},d),{children:[(0,o.Y)(P.ui,{elevated:c,children:(0,a.cloneElement)(g.content,{active:c})}),t?(0,o.Y)(K,{score:m.score}):null]}));var v=h.label,b=h.icon,S=h.dataCy,Y=g&&"ranges"in g?g.ranges:void 0;return(0,o.FD)(w.S,(0,R._)((0,i._)({innerRef:n,css:H.item,style:p,onClick:u,dataCy:S,"data-index":e.index},d),{children:[(0,o.Y)(G,{active:c,icon:b,text:v,highlight:Y,description:h.description,shortcut:h.keyboardShortcut,hasChildren:"context"===f.data.type}),t?(0,o.Y)(K,{score:m.score}):null]}))}));z.displayName="Row";var W=(0,f.x)({root:[g.wp.height("100%"),{userSelect:"none",paddingInline:b.eQ.inputBarPadding,minHeight:b.eQ.inputBarHeight}],iconText:[g.wp.maxWidth("100%"),{gap:p.LU.space8,flexShrink:1}],description:[g.wp.truncate,{fontSize:"0.9em",flexGrow:1,flexShrink:2}],right:[{gap:p.LU.space4,justifySelf:"end",marginLeft:"auto"}],chevron:"calc(".concat(b.eQ.iconSize," - 2px)")});function G(e){var n=(0,N.h)(y.KO);return(0,o.FD)(P.ui,{row:!0,align:"center",gap:b.eQ.inputBarPadding,elevated:e.active,css:W.root,children:[(0,o.FD)(w.S,{css:W.iconText,align:"center",row:!0,children:[(0,o.Y)(w.S,{className:"icon",css:V.root,children:e.icon}),(0,o.Y)(O.e,{dimmed:!e.active,text:e.text,highlight:e.highlight})]}),e.description?(0,o.Y)(w.S,{css:W.description,style:{color:e.active?p.LU.foregroundDimmer:p.LU.foregroundDimmest},children:e.description}):null,(0,o.FD)(w.S,{css:W.right,row:!0,align:"center",children:[e.shortcut?(0,o.Y)(d._y,{keyCombo:e.shortcut,fontSize:Math.round(.85*n)}):null,e.hasChildren?(0,o.Y)(w.S,{css:W.chevron,children:(0,o.Y)(S.A,{size:12,style:{pointerEvents:"none"}})}):null]})]})}var V=(0,f.x)({root:[g.wp.position.relative,b.Ef,{width:b.eQ.iconSize,height:b.eQ.iconSize}]}),j=(0,f.x)({borderHeaderWrap:[B,g.wp.flex.column,{userSelect:"none",paddingTop:p.LU.space4,paddingInline:b.eQ.inputBarPadding}],borderWrap:[B,g.wp.justify.center,{userSelect:"none",paddingInline:b.eQ.inputBarPadding}],headerWrap:[{userSelect:"none",paddingInline:b.eQ.inputBarPadding},B],header:[{userSelect:"none"},{paddingInline:b.eQ.inputBarPadding}],text:[{userSelect:"none"},g.wp.flex.shrink(1),g.wp.color.foregroundDimmest,g.wp.truncate,{fontSize:"0.9em"}],border:[g.wp.height(1),g.wp.width("100%")]}),Z=(0,a.memo)(function(e){var n=(0,y.gM)(),t=(0,U.Z)(e.path,n),r=(0,o.Y)(P.ui,{elevated:!0,css:j.border});if(0===t.length)return(0,o.Y)(w.S,{"data-index":e.index,css:j.borderWrap,style:e.style,innerRef:e.innerRef,children:r});var i=(0,o.FD)(w.S,{css:j.header,row:!0,align:"center",gap:4,children:[t.map(function(e,n){return(0,o.FD)(a.Fragment,{children:[n>0?(0,o.Y)(S.A,{color:p.LU.foregroundDimmest}):null,(0,o.Y)(w.S,{css:j.text,children:e})]},e+n)}),e.tooltip?(0,o.Y)(L.m_,{tooltip:e.tooltip,placement:"right",children:(0,o.Y)(M.A,{size:12,color:p.LU.foregroundDimmest})}):null]});return e.border?(0,o.FD)(w.S,{justify:"start",gap:6,align:"stretch",css:j.borderHeaderWrap,style:e.style,innerRef:e.innerRef,"data-index":e.index,children:[r,i]}):(0,o.Y)(w.S,{css:j.headerWrap,style:e.style,innerRef:e.innerRef,"data-index":e.index,justify:"start",children:i})}),q={pill:[g.wp.position.absolute,g.wp.top("50%"),g.wp.right(4),{transform:"translateY(-50%)"}]};function K(e){var n=e.score;return(0,o.Y)(T.a,{text:"".concat(n),colorway:"red",css:q.pill})}var $=t(19761),J=(0,f.x)({root:[g.wp.flex.growAndShrink(1),g.wp.overflow("hidden"),{paddingTop:b.eQ.menuPaddingTop}],scrollParent:[g.wp.height("100%"),g.wp.overflowY("auto"),g.wp.flex.growAndShrink(1)]}),Q=(0,a.memo)(function(e){var n,t=(0,y.b)(),r=t.rows,l=t.isOpen,s=t.scrollRef,c=t.currentPathIndex,u=t.ariaAttrs,d=(0,N.ob)(y.Uo),f=(0,N.h)(y.tL),h=(0,y.mg)(),m=(0,I.Te)({count:r.length,overscan:null!==(n=e.overscan)&&void 0!==n?n:1,paddingEnd:4,getScrollElement:function(){return s.current},getItemKey:function(e){var n=r[e];return n?"section"===n.type?n.key:(0,$.p)(n.item.path):""},estimateSize:function(n){var t=r[n];return t?function(e){var n,t=e.row,r=e.currentPathIndex,i=e.compact,o=e.isFirst,a=e.minItemHeight;if("section"===t.type){var l=i?16:20,s=(0,U.Z)(t.path,r).length>0;return o?s?l:0:t.unlabeled?i?6:8:13+l}var c=t.item.match.render;return c&&"content"in c?Math.max(null!==(n=c.height)&&void 0!==n?n:a,a):a}({row:t,currentPathIndex:c,compact:f,isFirst:0===n,minItemHeight:e.minItemHeight}):0},onChange:function(e){d(e.getTotalSize())}}),g=m.scrollToIndex,v=m.getVirtualItems,b={borderRadius:e.hasFooter?void 0:p.LU.space8,display:l?void 0:"none"},S=(0,y.Je)();return(0,a.useEffect)(function(){var e,n=S;if(!(n<0)){if(1===n&&(null===(e=v()[0])||void 0===e?void 0:e.size))n=0;else if(!v()[n])return;g(n)}},[g,v,S]),(0,o.Y)(w.S,(0,R._)((0,i._)({css:J.root},u),{style:b,children:(0,o.Y)(w.S,{innerRef:s,css:J.scrollParent,children:(0,o.Y)(w.S,{style:{height:"".concat(m.getTotalSize(),"px"),position:"relative",overflow:"hidden"},children:l?m.getVirtualItems().map(function(e){return(0,o.Y)(z,{index:e.index,y:e.start,height:e.size,ref:h?m.measureElement:void 0},e.key.toString())}):null})})}))}),X=(0,f.x)({root:[g.wp.flex.growAndShrink(1),g.wp.width("100%"),g.wp.height("100%"),g.wp.flex.row,g.wp.justify.center,g.wp.borderRadius(4),{containerName:E.yN,containerType:b.eQ.containerType}],content:[g.wp.flex.growAndShrink(1),g.wp.maxWidth("calc(".concat(E.aF,"px - ").concat(p.LU.space16,")")),{fontSize:b.eQ.fontSize}],footer:{paddingTop:p.LU.space8},keyComboBlocks:{paddingRight:p.LU.space8},running:[g.wp.center,g.wp.flex.growAndShrink(1)],error:{padding:p.LU.space8}}),ee=(0,f.x)({root:[g.wp.viewStyle,g.wp.flex.growAndShrink(1),g.wp.height("100%"),g.wp.py(0),g.wp.px(8),{fontSize:b.eQ.fontSize,backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:p.LU.foregroundDimmest},"&:hover::placeholder":{color:p.LU.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:p.LU.foregroundDimmest}}]}),en=(0,a.memo)(function(e){var n=(0,y.Ge)();return(0,o.Y)("input",(0,i._)({autoFocus:e.autoFocus,onKeyDown:e.onKeyDown,css:ee.root,placeholder:n.placeholder,value:n.value,onChange:n.onChange,ref:n.ref,onBlur:n.onBlur,disabled:n.disabled,autoCorrect:"off",autoComplete:"off",autoCapitalize:"off"},n.ariaAttrs))}),et=[h.b.filled,g.wp.viewStyle,g.wp.flex.row,g.wp.align.center,g.wp.flex.growAndShrink(1),{height:b.eQ.inputBarHeight,borderRadius:4}],er=(0,f.x)({container:[{paddingTop:b.eQ.inputBarPadding,paddingInline:b.eQ.inputBarPadding,"& > div > button + input":{paddingLeft:0}}],surface:et,surfaceRunning:[et,m.S.foregroundPulse()]});function ei(e){var n=(0,y.d9)(),t=(0,y.f6)(),i=(0,N.ob)(y.wm),l=(0,s.A)(function(e){return i(e.height)}),c=(0,a.useRef)(null);return(0,u.d)(c,t,function(e){var n;return n={},(0,r._)(n,b.O3.borderBottomRightRadius,e?p.LU.space8:"0"),(0,r._)(n,b.O3.borderBottomLeftRadius,e?p.LU.space8:"0"),n}),(0,o.Y)(o.FK,{children:(0,o.Y)(w.S,{css:er.container,innerRef:l,style:{},children:(0,o.Y)(w.S,{innerRef:c,css:n?er.surfaceRunning:er.surface,children:e.children})})})}var eo=(0,a.memo)(function(e){var n=(0,y.J4)(),t=(0,y.oh)();return n?(0,o.Y)(D,{onClick:e.onClick,isLoading:t}):null}),ea=(0,a.memo)(function(){var e,n,t,i,u=(0,y.MO)(),f=u.isOpen,h=u.focus,m=u.clearCommands,S=u.isClearable,Y=u.onKeyDown,C=u.inputValue,x=u.noResults,_=u.hasHighlightedItem,D=u.isRunning,E=u.actionError,R=(0,l.A)({inputValue:C,noResults:x,hasHighlightedItem:_});e=(0,N.Ou)(y.Ai),n=(0,N.h)(y.wm),t=(0,N.AI)(y.PI),(0,a.useEffect)(function(){var r=function(n){var t=e().onTotalHeightChange;t&&(0===i&&(i=n),t({initial:i,current:n}))};if(0!==n){var i=0;return r(t.current),t.subscribe(r)}},[n,e,t]);var I=(0,N.h)(y.Tu),F=(0,N.h)(y.Hi),T=(0,N.h)(y.$6),P=(0,N.h)(y.nW),L=(0,N.h)(y.RY),U=(0,N.h)(y.yr),O=(0,N.Ou)(y.Ai),M=(0,c.A)(function(){return function(e){var n,t=R.current,r=O();if(null===(n=r.onKeyDown)||void 0===n||n.call(r,e,{inputValue:t.inputValue,noResults:t.noResults,hasHighlightedItem:t.hasHighlightedItem}),!e.defaultPrevented){if("Enter"===e.key&&t.inputValue&&t.noResults&&r.onSubmit){r.onSubmit(t.inputValue);return}Y(e)}}},[R,Y,O]);(0,a.useEffect)(function(){L&&(L.current=h)},[h,L]);var B=(0,y._f)(),H=(0,N.ob)(y.Uz),z=(0,s.A)(function(e){return H(e.height)}),W=(0,N.h)(y.KO),G=(0,N.h)(y.tL),V=(0,N.h)(y.b7);return(0,o.Y)(w.S,{css:X.root,style:(i={},(0,r._)(i,b.O3.fontSize,W+"px"),(0,r._)(i,b.O3.iconSize,G?"12px":"16px"),(0,r._)(i,b.O3.inputBarHeight,G?"28px":"32px"),(0,r._)(i,b.O3.inputBarPadding,G?p.LU.space4:p.LU.space8),(0,r._)(i,b.O3.menuPaddingTop,G?p.LU.space4:p.LU.space8),(0,r._)(i,b.O3.containerType,G?"normal":"inline-size"),i),children:(0,o.FD)(w.S,{css:X.content,style:V?{maxWidth:"100%"}:void 0,children:[(0,o.Y)("label",{id:B.label,htmlFor:B.input,css:g.wp.visuallyHidden,children:"Commands"}),(0,o.FD)(ei,{children:[(0,o.Y)(A,{}),(0,o.Y)(en,{autoFocus:I,onKeyDown:M}),(0,o.Y)(eo,{onClick:function(){return m({focus:!0})}}),F&&!S?(0,o.Y)(w.S,{css:X.keyComboBlocks,children:(0,o.Y)(d._y,{keyCombo:F,fontSize:.85*W})}):null]}),E?(0,o.Y)(w.S,{css:X.error,children:(0,o.Y)(v.N,{colorway:"warning",text:E})}):null,f&&!D?(0,o.FD)(o.FK,{children:[(0,o.Y)(Q,{minItemHeight:U,overscan:T,hasFooter:!!P}),P?(0,o.Y)(w.S,{innerRef:z,css:X.footer,children:P}):null]}):null,D?(0,o.Y)(w.S,{css:X.running,children:(0,o.Y)(k.A,{size:24})}):null]})})});function el(e){var n=(0,y.PY)(e);return(0,o.Y)(N.Pd.Provider,{value:n,children:(0,o.Y)(ea,{})})}},42330:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(12694),i=t(86105),o=t(21462),a=t(67337);function l(){var e=(0,a.A)().secrets,n=(0,r._)((0,o.useState)(null),2),t=n[0],l=n[1],s=(0,o.useMemo)(function(){return!!t&&(0,i._)(t.values()).some(function(e){return!e})},[t]);return(0,o.useEffect)(function(){return e.watch(l)},[t,e]),s}},42545:(e,n,t)=>{"use strict";t.d(n,{Ae:()=>i,QH:()=>o,Rl:()=>a});var r=t(63892),i=function(e){var n=e.context;(0,r.u4)(r.AZ.DEPLOYMENT_SECTION_VIEWED,{context:n})},o=function(e,n){(0,r.u4)(r.AZ.DEPLOYMENT_DEBUG_SUMMARY_USED,{action:e,context:n})},a=function(e){(0,r.u4)(r.AZ.DEPLOYMENT_ADD_SECRET_CLICKED,{context:e})}},42726:(e,n,t)=>{"use strict";t.d(n,{b:()=>o});var r=t(72004),i=t(53046);function o(e){if(!e)return null;if(e.error.type!==r.fqQ.EVENT_ERROR_TYPE_UNKNOWN)return{$kind:"error",error:e.error};var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var t=n.agentTimelineEventContents.toolData,o=n.agentTimelineEventContents.message,a=(0,i.F)(e),l={$kind:null,message:o,summary:a,state:e.state};switch(null==t?void 0:t.$kind){case"fileEditData":var s=null==t?void 0:t.fileEditData,c=null==s?void 0:s.filePath,u=null==s?void 0:s.diff;if(void 0===c||void 0===u)return l;return{$kind:"fileEditData",state:e.state,path:c,diff:u,message:o,summary:a};case"createFileData":var d=null==t?void 0:t.createFileData,p=null==d?void 0:d.filePath,f=null==d?void 0:d.content;if(void 0===p||void 0===f)return l;return{$kind:"createFileData",content:f,path:p,message:o,summary:a};case"shellExecutionData":return{$kind:"shellExecutionData",data:t.shellExecutionData,message:o,summary:a};case"readFileData":return{$kind:"readFileData",data:t.readFileData,message:o,summary:a};case"readDirData":return{$kind:"readDirData",data:t.readDirData,message:o,summary:a};case"packagerInstallData":var h=t.packagerInstallData,m=h.inputLanguage,g=h.inputPackages,v=h.output,w=h.isExecuting,y=h.processId;if(void 0===m||void 0===g)return l;return{$kind:"packagerInstallData",state:e.state,language:m,installed:g,output:void 0===v?void 0:v,isExecuting:void 0!==w&&w,processId:void 0===y?void 0:y,message:o,summary:a};case"packagerUninstallData":var b=t.packagerUninstallData;return{$kind:"packagerUninstallData",language:b.inputLanguage,uninstalled:b.inputPackages,summary:a,message:o};case"systemDependencyInstallData":var S=t.systemDependencyInstallData.deps;if(void 0===S)return l;return{$kind:"systemDependencyInstallData",deps:S,summary:a,message:o};case"systemDependencyUninstallData":var Y=t.systemDependencyUninstallData.deps;if(void 0===Y)return l;return{$kind:"systemDependencyUninstallData",deps:Y,summary:a,message:o};case"toolchainInstallData":return{$kind:"toolchainInstallData",modules:t.toolchainInstallData.modules,message:o,summary:a};case"screenshotData":return{$kind:"screenshotData",imageUrl:t.screenshotData.imageUrl,message:o,summary:a};case"planProgressData":case"agentPlanStepBegin":case"workflowsStopToolData":case"workflowsGetOutputToolData":case"workflowsRemoveRunConfigToolData":return null;case"workflowsStartToolData":return{$kind:t.$kind,workflowName:t.workflowsStartToolData.name,state:e.state,summary:a,message:o};case"workflowsRestartToolData":return{$kind:t.$kind,workflowName:t.workflowsRestartToolData.name,state:e.state,restart:!0,summary:a,message:o};case"workflowsSetRunConfigToolData":return{$kind:t.$kind,workflowName:t.workflowsSetRunConfigToolData.name,state:e.state,summary:a,message:o};case"deployData":return{$kind:t.$kind,summary:a,result:t.deployData,message:o};case"presentResultsToolData":return{$kind:t.$kind,summary:a,result:t.presentResultsToolData,message:o};case"createPostgresqlDatabaseData":return{$kind:t.$kind,message:o,summary:a};case"sqlExecutionData":return{$kind:t.$kind,data:t.sqlExecutionData,message:o,summary:a};default:return l}}},42727:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M3.25 6A2.75 2.75 0 0 1 6 3.25h12A2.75 2.75 0 0 1 20.75 6v12A2.75 2.75 0 0 1 18 20.75H6A2.75 2.75 0 0 1 3.25 18V6Z",clipRule:"evenodd"})}))}},42938:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(21462),i=t(31930),o=t(67337);function a(){var e=(0,o.A)().container;(0,r.useEffect)(function(){var n=function(){e.getConnectionState()===i.KN.CONNECTED&&e.focus()};return window.addEventListener("focus",n),function(){window.removeEventListener("focus",n)}},[e])}},43070:(e,n,t)=>{"use strict";t.d(n,{H:()=>p,Y:()=>d});var r=t(37743),i=t(12694),o=t(22531),a=t(21462),l=t(96907),s=t.n(l),c=t(6500),u=t(53669),d=function(){function e(n){var t=this;if((0,r._)(this,e),this.saveToLocalStorage=s()(function(){u.A.set("stateCache",{version:2,entries:Array.from(t.map.entries())})},500,{leading:!1,trailing:!0,maxWait:1e3}),this.map=new c.q(20),n){if((void 0===n?"undefined":(0,o._)(n))!=="object"||null===n||!Object.prototype.hasOwnProperty.call(n,"version")||!Object.prototype.hasOwnProperty.call(n,"entries")||"number"!=typeof n.version||2!==n.version)return;var a=n.entries,l=!0,d=!1,p=void 0;try{for(var f,h=a[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var m=(0,i._)(f.value,2),g=m[0],v=m[1];this.map.set(g,v)}}catch(e){d=!0,p=e}finally{try{l||null==h.return||h.return()}finally{if(d)throw p}}}}var n=e.prototype;return n.set=function(e,n){this.map.set(e,n),this.saveToLocalStorage()},n.get=function(e){return this.map.get(e)},e}(),p=(0,a.createContext)(null)},43464:(e,n,t)=>{"use strict";t.d(n,{EE:()=>k,mE:()=>A,xO:()=>x});var r=t(83846),i=t(1889),o=t(21462),a=t(3402),l=t(26496),s=t(75822),c=t(49027),u=t(40919),d=t(6680),p=t(61234),f=t(22498),h=t(43974),m=t(74863),g=t(40043),v=t(35869),w=t(6761),y=(0,f.v)(["dividerColor"]),b=y.cssVars,S=y.styleTokens,Y=(0,p.x)({approvedContainer:[h.wp.px(8),h.wp.py(4),h.wp.my(1),h.wp.align.center,h.wp.rowWithGap(4),h.wp.justify.end,h.wp.color.foregroundDimmest,{flex:1}],approvedText:[h.wp.height(24)],historicalPlanContainer:[h.wp.colWithGap(2),{listStyle:"unset",listStylePosition:"outside","> li":{color:d.LU.foregroundDimmer,marginLeft:"20px"},"> li::marker":{color:d.LU.foregroundDimmer}}],historicalPlanStepText:[h.wp.width("100%"),h.wp.flex.growAndShrink(1)],divider:[h.wp.height(1),h.wp.width("100%"),{backgroundColor:S.dividerColor}]}),A=(0,o.memo)(function(e){var n=e.eventId,t=e.waitingOnUserInput,r=(0,l.ou)(),o=(0,l.V9)(n);return o?(0,i.Y)(C,{waitingOnUserInput:t,data:o,approvePlan:function(e){return r({eventId:n,steps:e})}}):null});function C(e){var n=e.waitingOnUserInput,t=e.data,o=e.approvePlan;return(0,i.Y)(s.e,{elevated:!0,highlighted:n,children:(0,i.FD)(v.S,{gap:8,style:(0,r._)({},b.dividerColor,n?d.LU.blurpleDimmest:d.LU.outlineDimmest),children:[(0,i.Y)(u.d2,{text:t.description}),t.requiresApproval?(0,i.FD)(i.FK,{children:[(0,i.Y)(m.a,{css:Y.divider}),(0,i.Y)(c.P,{appovePlan:o,steps:t.steps,isEditable:t.isEditable,sessionId:t.sessionId})]}):(0,i.FD)(i.FK,{children:[(0,i.Y)(k,{planSteps:t.steps}),t.approverId?(0,i.FD)(i.FK,{children:[(0,i.Y)(m.a,{css:Y.divider}),(0,i.Y)(x,{approverId:t.approverId})]}):null]})]})})}function x(e){var n=Number(e.approverId),t=(0,a.sx)({variables:{id:n}}).data,r=null==t?void 0:t.user;return(0,i.FD)(v.S,{css:Y.approvedContainer,children:[(0,i.Y)(w.A,{color:d.LU.greenStronger}),(0,i.FD)(g.EY,{css:Y.approvedText,multiline:!1,children:[null==r?void 0:r.username," approved the plan"]})]})}function k(e){var n=e.planSteps;return(0,i.Y)(v.D.ul,{css:Y.historicalPlanContainer,children:n.map(function(e,n){return(0,i.FD)("li",{children:[(0,i.Y)(g.EY,{color:"dimmer",css:Y.historicalPlanStepText,children:e.name}),(0,i.Y)(c.V,{step:e})]},n)})})}},43565:(e,n,t)=>{"use strict";t.d(n,{D:()=>d});var r,i=t(83846),o=t(1889),a=t(45771),l=t(43974),s=t(37407),c=t(19915),u=(0,a.AH)([l.wp.focusRing,l.wp.display.flex,l.wp.center,l.wp.borderRadius(4),l.wp.backgroundColor.backgroundRoot,l.wp.color.foregroundDefault,l.wp.cursor.pointer,l.wp.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,i._)(r,l.Tp.hover,[l.wp.backgroundColor.backgroundHigher]),(0,i._)(r,":focus",{outline:"none"}),r)]),d=function(e){var n=e.onClick;return(0,o.Y)(s.m_,{tooltip:"Clear",placement:"bottom-start",children:(0,o.Y)("button",{"aria-label":"Clear",onClick:n,css:u,children:(0,o.Y)(c.A,{size:16})})})}},43573:(e,n,t)=>{"use strict";t.d(n,{L9:()=>m,Rd:()=>h});var r=t(86105),i=t(1889),o=t(75152),a=t(24998),l=t(88184),s=["youtube.com","youtube-nocookie.com","vimeo.com","wistia.com","sadanandpai.github.io"],c=function(e){try{var n=new URL(e).hostname;return s.some(function(e){return n===e||n.endsWith("."+e)})}catch(e){return!1}},u=t(51895),d=t(43974),p=t(9885),f=o.ZU.Object({type:o.ZU.Literal("videoPlayer"),data:o.ZU.Object({embedUrl:o.ZU.String(),title:o.ZU.String()})}),h={Content:function(e){var n=e.pane.data;return(0,i.Y)(m,{title:n.title,embedUrl:n.embedUrl})},Icon:function(e){var n=e.size;return(0,i.Y)(p.A,{size:n})},getTitle:function(e){return e.data.title},category:u.bY.Other,decode:function(e){return a.WT.Decode(f,e)}};function m(e){var n,t=e.embedUrl,o=e.borderRadius,a=e.title;return c(t)?(0,i.Y)("iframe",{title:a,src:t,frameBorder:"0",css:[d.wp.coverContainer,(n=d.wp).borderRadius.apply(n,(0,r._)(void 0===o?[0,0,8,8]:o))]}):(0,i.FD)("div",{children:["Only YouTube, Vimeo, and Wistia videos are supported."," ",(0,i.Y)("a",{href:l.WA,target:"_blank",children:"Request more formats here."})]})}},43612:(e,n,t)=>{"use strict";t.d(n,{Cv:()=>I,xQ:()=>R});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(1889),s=t(21462),c=t(34951),u=t(26496),d=t(23700),p=t(29824),f=t(59539),h=t(11014),m=t(60384),g=t(81239),v=t(2904),w=t(12120),y=t(67337),b=t(6680),S=t(93682),Y=t(35869),A=t(5408),C=t(99054),x=t(13278),k=[c.nH.Building,c.nH.Promoting,c.nH.Running,c.nH.Pending,c.nH.Resuming,c.nH.Suspending,c.nH.UpdatingTier],_=function(e){var n=d.v[e];if(n)return"".concat(n.title,"...");switch(e){case c.nH.Building:return"Building...";case c.nH.Promoting:return"Promoting...";case c.nH.Running:return"Bundling...";case c.nH.Pending:return"Provisioning...";case c.nH.Resuming:return"Resuming...";case c.nH.Suspending:return"Pausing...";case c.nH.UpdatingTier:return"Updating tier...";default:return"Deploying..."}},D=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1];return(0,s.useEffect)(function(){t("undefined"!=typeof navigator&&navigator.share&&"function"==typeof navigator.share)},[]),n},E=function(){var e=(0,r._)(function(e,n,t){return(0,a.YH)(this,function(r){switch(r.label){case 0:if(!(navigator.share&&"function"==typeof navigator.share))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,navigator.share({title:n,text:t,url:e})];case 2:return r.sent(),[2,!0];case 3:return r.sent(),[3,4];case 4:return(0,v.default)(e),[2,!1]}})});return function(n,t,r){return e.apply(this,arguments)}}(),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.openDeploymentsPane,t=e.includeSharing,i=void 0!==t&&t,d=!n,v=D(),S=(0,p.i$)(),R=(0,p.Tp)().redeployWithNoNewOptions,I=(0,p.cF)(),F=(0,p.tq)(),T=(0,p.uS)(),P=(0,p.bu)(),L=(0,g.A)().showConfirm,U=(0,u.jt)(),N=(0,y.A)().container,O=(0,w.A)(N,{fallbackToReplCo:!0}),M=(0,m.f)({__typename:"HostingDeployment",id:S||"",replitAppSubdomain:P||"",domains:[]}).href,B=!I||!S||T!==f.d.Ready&&T!==f.d.Suspended&&T!==f.d.ProcessingLifecycleCommand,H=(0,s.useCallback)((0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:if(!S)return n&&n(),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,R({hasAgentSession:U})];case 2:case 3:return e.sent(),[3,4];case 4:return[2]}})}),[S,n,R,U]),z=(0,s.useCallback)(function(){if(d&&(!S||!I))return null;if(!S)return d?null:{data:{type:"action",icon:(0,l.Y)(C.A,{color:b.LU.greenStrongest}),label:"Deploy",run:n}};if(!I&&F)return{data:{type:"action",icon:(0,l.FD)(Y.S,{row:!0,gap:4,align:"center",children:[(0,l.Y)(h.$,{status:c.nH.Building}),(0,l.Y)(C.A,{color:b.LU.foregroundDefault})]}),label:_(F.status),run:function(){}}};if(!I)return null;var e=!!F,t=k.includes(I.status),r=e&&F?{isDeploying:!0,buttonText:_(F.status)}:t?{isDeploying:!0,buttonText:_(I.status)}:B?{isDeploying:!0,buttonText:"Starting..."}:{isDeploying:!1,buttonText:"Redeploy"},i=r.isDeploying,o=r.buttonText;return{data:{type:"action",icon:d?(0,l.FD)(Y.S,{row:!0,gap:4,align:"center",children:[I.status!==c.nH.Success||i?(0,l.Y)(h.$,{status:i?c.nH.Building:I.status}):null,(0,l.Y)(C.A,{size:24,color:I.status!==c.nH.Success||i?b.LU.foregroundDefault:b.LU.greenStrongest})]}):(0,l.FD)(Y.S,{row:!0,gap:4,align:"center",children:[I.status!==c.nH.Success||i?(0,l.Y)(h.$,{status:i?c.nH.Building:I.status}):null,(0,l.Y)(C.A,{color:i?b.LU.foregroundDefault:b.LU.greenStrongest})]}),label:o,run:i?function(){}:H}}},[d,S,I,F,n,H,B]),W=(0,s.useCallback)(function(){if(!i)return[];var e=[];return O&&(!d||S&&P)&&e.push({data:{type:"action",icon:(0,l.Y)(A.A,{color:b.LU.foregroundDefault}),label:v?"Share development link":"Copy development link",run:(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,E(O,"Check out my Replit development app!","I'm working on this app on Replit!")];case 1:return e.sent()||L("Development URL copied to clipboard"),[2]}})})}}),S&&P&&e.push({data:{type:"action",icon:(0,l.Y)(x.A,{color:b.LU.foregroundDefault}),label:v?"Share published link":"Copy published link",run:(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,E(M,"Check out my Replit app!")];case 1:return e.sent()||L("Published URL copied to clipboard"),[2]}})})}}),e},[S,P,L,d,O,M,i,v]),G=(0,s.useCallback)(function(){var e=W(),n=z();if(d){var t=[];return e.length>0&&t.push({name:"Sharing",commands:e}),n&&t.push({name:"Deployment",commands:[n]}),t}if(!S||!P){var r=(0,o._)(e);return(n&&r.push(n),r.length>0)?[{name:"Development",commands:r}]:[]}var i=[];return e.length>0&&i.push({name:"Sharing",commands:e}),n&&i.push({name:"Deployment",commands:[n]}),i},[W,z,d,S,P]);return{deploymentId:S,currentBuild:I,inProgressBuild:F,handleDeployCommand:H,getDeploymentCommand:z,getShareCommands:W,getCommandGroups:G,hideRedeploy:B,mode:T}},I=function(e){var n=e.openDeploymentsPane,t=R({openDeploymentsPane:n}),r=t.deploymentId,i=t.currentBuild,o=t.inProgressBuild,a=t.handleDeployCommand,s=t.hideRedeploy;if(!r)return(0,l.Y)(S.$n,{onClick:n,iconLeft:(0,l.Y)(C.A,{color:b.LU.greenStrongest}),text:"Deploy",size:"small"});if(!i&&o)return(0,l.Y)(S.$n,{onClick:function(){},iconLeft:(0,l.Y)(C.A,{color:b.LU.foregroundDefault}),text:_(o.status),size:"small",disabled:!0});if(!i)return null;var c=!!o,u=k.includes(i.status),d=c&&o?{isDeploying:!0,buttonText:_(o.status)}:u?{isDeploying:!0,buttonText:_(i.status)}:s?{isDeploying:!0,buttonText:"Starting..."}:{isDeploying:!1,buttonText:"Redeploy"},p=d.isDeploying,f=d.buttonText;return(0,l.Y)(S.$n,{onClick:a,iconLeft:(0,l.Y)(C.A,{color:b.LU.greenStrongest}),text:f,size:"small",disabled:p})}},43762:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var r=t(12694),i=t(21462);function o(e){var n=(0,r._)((0,i.useState)(e),2),t=n[0],o=n[1],a=(0,r._)((0,i.useState)(null),2),l=a[0],s=a[1];return e!==t&&(s(t),o(e)),l}},44044:(e,n,t)=>{"use strict";t.d(n,{Q:()=>f});var r=t(17844),i=t(93629),o=t(34951),a=t(12584),l=t(41114),s=t(86997);function c(){var e=(0,a._)(["\n  query CheckForProjectByRepl($id: String!) {\n    getRepl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n          type\n          name\n          authorizations {\n            createPublicRepl: createRepl(private: false) {\n              isAuthorized\n              message\n            }\n            createPrivateRepl: createRepl(private: true) {\n              isAuthorized\n              message\n            }\n            createProject {\n              isAuthorized\n              message\n            }\n          }\n        }\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},d=(0,l.J1)(c()),p=t(16907);function f(){var e,n,t,a,l,c,f=(l={variables:{id:(0,p.A)()}},c=(0,r._)({},u,l),s.I(d,c)),h=(null===(n=f.data)||void 0===n?void 0:null===(e=n.getRepl)||void 0===e?void 0:e.__typename)==="Repl"?f.data.getRepl.org:void 0,m=!!h&&h.type===o.NT.Team&&(h.authorizations.createPrivateRepl.isAuthorized||h.authorizations.createPublicRepl.isAuthorized)&&h.authorizations.createProject.isAuthorized;return(0,i._)((0,r._)({},f),{hasProject:(null===(t=f.data)||void 0===t?void 0:t.getRepl.__typename)==="Repl"&&!!(null===(a=f.data.getRepl.project)||void 0===a?void 0:a.id),isEligibleForProject:m})}},44269:(e,n,t)=>{"use strict";t.d(n,{I:()=>o});var r=t(30391),i=t(67337);function o(){var e=(0,i.A)().toolchain;return(0,r.A)(e.configs)}},44815:(e,n,t)=>{"use strict";t.d(n,{$l:()=>r,DX:()=>u,Gz:()=>c,Oe:()=>d,Pt:()=>p,b0:()=>f,g8:()=>l,sY:()=>i,vA:()=>a,xv:()=>o,y:()=>s});var r=/^([A-Za-z0-9_]{1,15})\/?$/,i=/^([%A-Za-z0-9]+|-)*\/?$/,o=/^([A-Za-z\d](?:[A-Za-z\d]|-){0,38})\/?$/,a=/^https:\/\/(www\.)?youtube\.com(\/(c|channel|user|@(\w)+))*(\/([A-Za-z0-9_-]+))*(\/?)$/,l=/^(.{2,32}#[0-9]{4})$|^([a-zA-Z0-9_.]{2,32})$/,s=/^(https:\/\/)?(www\.)?((discordapp\.com\/invite)|(discord\.gg))\/(\w+)$/,c="https://twitter.com/",u="https://www.linkedin.com/in/",d="https://github.com/",p="https://x.com/",f=/\/$/},44964:(e,n,t)=>{"use strict";t.d(n,{CI:()=>_,RC:()=>D,Ww:()=>R,jn:()=>I,n1:()=>d,s:()=>k,tH:()=>E});var r,i=t(62019),o=t(37743),a=t(83846),l=t(1833),s=t(45773),c=t(6680),u=c.LU.space2,d="cm-diff-gutter",p="".concat(d,"-element"),f="".concat(p,"-insertion"),h="".concat(p,"-modified"),m="".concat(p,"-deleted"),g="".concat(p,"-file-added"),v="".concat(p,"-empty"),w=c.LU.greenDefault,y=c.LU.greenStronger,b=c.LU.blueDefault,S=c.LU.blueStronger,Y=c.LU.redDefault,A=c.LU.redStronger,C=c.LU.greenDimmer,x=c.LU.greenDefault,k=s.Lz.theme((r={},(0,a._)(r,".".concat(d,":first-of-type, .").concat(p),{width:u}),(0,a._)(r,".".concat(f),{backgroundColor:w,"&.cm-activeLineGutter":{backgroundColor:y}}),(0,a._)(r,".".concat(h),{backgroundColor:b,"&.cm-activeLineGutter":{backgroundColor:S}}),(0,a._)(r,".".concat(m),{backgroundColor:Y,"&.cm-activeLineGutter":{backgroundColor:A}}),(0,a._)(r,".".concat(g),{backgroundColor:C,"&.cm-activeLineGutter":{backgroundColor:x}}),(0,a._)(r,".".concat(v),{opacity:0}),r)),_=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(f),e}return(0,l._)(n,e),n}(s.wJ)),D=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(m),e}return(0,l._)(n,e),n}(s.wJ)),E=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(h),e}return(0,l._)(n,e),n}(s.wJ)),R=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(g),e}return(0,l._)(n,e),n}(s.wJ)),I=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(v),e}return(0,l._)(n,e),n}(s.wJ))},45001:(e,n,t)=>{"use strict";t.d(n,{A:()=>Y});var r=t(17844),i=t(93629),o=t(12694),a=t(86105),l=t(21462),s=t(69945),c=t.n(s),u=t(58627),d=t(86308),p=t(71906),f=t(80970),h=t(81239),m=t(16907),g=t(70906),v=t(67337),w=t(68842),y=t(32190);function b(e,n){if(!e)return null;var t,r=e.state.field(w.K1),i=e.state.field(w.TW),o=null!==(t=r[n])&&void 0!==t?t:(null==i?void 0:i.id)===n?i:null;return o||null}function S(e,n){if(!e)return null;var t=b(e,n);if(!t)return null;var r=Math.min(t.indexStart,t.indexEnd),i=Math.max(t.indexStart,t.indexEnd),o=e.state.doc.lineAt(r),a=e.state.doc.lineAt(i),l=e.state.doc.sliceString(e.state.doc.line(Math.max(o.number-2,1)).from,r),s=e.state.doc.sliceString(i,e.state.doc.line(Math.min(a.number+2,e.state.doc.lines)).to);return{precode:l,code:e.state.doc.sliceString(r,i),postcode:s}}function Y(e,n,t){var s=(0,h.A)().showError,Y=(0,m.A)(),A=(0,f.A)().map(function(e){return e.username}),C=(0,v.A)().fs,x=(0,d.Mk)({variables:{id:e}}),k=x.data,_=x.error,D=x.loading,E=x.client,R=function(){if(D||!k){var t;return!!n&&(null===(t=n.state.field(w.TW))||void 0===t?void 0:t.id)===e}return"AnnotationAnchor"!==k.thread.__typename}(),I=(0,l.useMemo)(function(){return D||!k?null:"UserError"===k.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===k.thread.__typename?k.thread:null},[k,e,D]),F=(0,o._)((0,d.v4)({onError:function(e){return s(e.message)},update:function(e,n){var t,r;if(n.errors){n.errors.forEach(function(e){return s(e.message)});return}if((null===(r=n.data)||void 0===r?void 0:null===(t=r.createThread)||void 0===t?void 0:t.__typename)==="UserError"){s(n.data.createThread.message);return}}}),1)[0],T=(0,o._)((0,d.ET)({onError:function(e){return s(e.message)},update:function(e,n){if(n.errors){n.errors.forEach(function(e){return s(e.message)});return}var t,r=null===(t=n.data)||void 0===t?void 0:t.createThreadMessage;r&&"UserError"===r.__typename&&s(r.message)}}),1)[0],P=(0,o._)((0,d.eP)({onError:function(e){return s(e.message)},update:function(e,n){if(n.errors){n.errors.forEach(function(e){return s(e.message)});return}var t,r=null===(t=n.data)||void 0===t?void 0:t.updateThread;r&&"UserError"===r.__typename&&s(r.message)}}),1)[0],L=(0,o._)((0,u.CY)(),1)[0],U=(0,g.A)(function(){return c()(L,1e3,{trailing:!1})},[L]),N=function(){var e=null==k?void 0:k.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,fullName:e.fullName,image:e.image}}:{}};return{thread:I,isPlaceholder:R,error:_,loading:D,getHighlight:S,getLatestAnchor:function(){return b(n,e)},updateThread:function(e){var n,t=e.changes,o=(null==k?void 0:null===(n=k.thread)||void 0===n?void 0:n.__typename)==="AnnotationAnchor"?k.thread:null;if(!o)throw Error("expected thread");P({variables:{id:o.id,changes:t},optimisticResponse:{__typename:"RootMutationType",updateThread:(0,i._)((0,r._)({},o,t),{isResolved:"boolean"==typeof t.isResolved?t.isResolved:o.isResolved})}})},finalizeThreadMessage:function(o){var l=o.message,s=o.messageId,c=(0,y.vY)(l,{users:(0,a._)(A).concat(["everyone"])}),u={id:s,text:l,mentions:c.mentions};if(R&&n&&t){var f=n.state.field(w.TW),h={id:e,replId:Y,indexStart:null==f?void 0:f.indexStart,indexEnd:null==f?void 0:f.indexEnd,otVersion:C.getOTVersion(t),path:t};F({variables:{thread:h,message:u,highlight:S(n,e)},optimisticResponse:{__typename:"RootMutationType",createThread:(0,i._)((0,r._)({__typename:"AnnotationAnchor"},h,N()),{messages:[(0,i._)((0,r._)({id:s,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},N()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:h.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),E.writeQuery({query:d.c_,variables:{id:e},data:{__typename:"RootQueryType",thread:(0,i._)((0,r._)((0,i._)((0,r._)({},h),{isResolved:!1,isGeneral:!1}),N()),{messages:[(0,i._)((0,r._)({id:s,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},N()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:h.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null==k?void 0:k.currentUser}});var m=E.readQuery({query:p.FZ,variables:{replId:Y,path:t}});if(m){var g,v,b=(null===(v=m.threadsByFile)||void 0===v?void 0:v.__typename)==="ThreadsByFileResult"?m.threadsByFile.threads:[],x=N().user;E.writeQuery({query:p.FZ,variables:{replId:Y,path:t},data:{__typename:"RootQueryType",threadsByFile:{__typename:"ThreadsByFileResult",threads:(0,a._)(b).concat([(0,r._)({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:x,isResolved:!1,participants:[x]},h)])}}})}return}var _=(null==k?void 0:null===(g=k.thread)||void 0===g?void 0:g.__typename)==="AnnotationAnchor"?k.thread:null;if(!_)throw Error("expected thread");T({variables:{replId:Y,threadId:_.id,threadMessage:u,highlight:S(n,_.id)},optimisticResponse:{__typename:"RootMutationType",createThreadMessage:(0,i._)((0,r._)({},_),{messages:(0,a._)(_.messages.filter(function(e){return!e.id.startsWith("chat-")})).concat([(0,i._)((0,r._)({},N(),u),{content:{text:u.text,__typename:"TextMessageContentType"},anchor:{id:_.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})},changeThreadMessage:function(n){U({variables:{threadId:e,messageId:n.messageId,message:null}})}}}},45083:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(21462),i=t(12694),o=t(94631),a=t(67337),l=t(40208);function s(e,n){var t,s,c,u,d=(t=(0,a.A)().container,c=(s=(0,i._)((0,r.useState)(null),2))[0],u=s[1],(0,r.useEffect)(function(){if(t)return t.onConnectionStateChanged(function(){u(t.getConnectionMetadata())})},[t]),(0,r.useMemo)(function(){return c?(0,o.pI)(c.token):null},[c]));(0,r.useEffect)(function(){if(e&&n){var t,r,i,o=(null===(t=e.origin)||void 0===t?void 0:t.__typename)==="Repl"?e.origin.id:null,a={id:e.id,slug:e.slug,originId:o,roles:n.roles&&n.roles.map(function(e){return e.name}),rootOriginReplUrl:e.rootOriginReplUrl,rootOriginReplReleaseId:null===(i=e.source)||void 0===i?void 0:null===(r=i.release)||void 0===r?void 0:r.id,tokenCluster:null==d?void 0:d.cluster};return(0,l.aq)(a),function(){(0,l.ve)()}}},[e,n,d])}},45325:(e,n,t)=>{"use strict";t.d(n,{c:()=>g});var r=t(12694),i=t(1889),o=t(21462),a=t(16907),l=t(38169),s=t(61234),c=t(43974),u=t(93682),d=t(44885),p=t(2527),f=t(40043),h=t(35869),m=t(75251);function g(e){var n=e.runAgent,t=(0,a.A)(),s=(0,r._)((0,o.useState)(!1),2),c=s[0],g=s[1];return(0,i.FD)(i.FK,{children:[(0,i.FD)(p.ui,{css:v.root,gap:4,elevated:!0,children:[(0,i.FD)(f.EY,{children:["You’ve hit the monthly budget. Increase your usage budget to continue using the Agent."," "]}),(0,i.Y)(h.S,{css:v.budgetButtonContainer,row:!0,gap:4,children:(0,i.Y)(u.$n,{css:v.budgetButton,iconLeft:(0,i.Y)(m.A,{}),text:"Increase budget",onClick:function(){return g(!0)},variant:void 0})})]}),(0,i.Y)(d.a,{isOpen:c,onRequestClose:function(){return g(!1)},children:(0,i.Y)(l.h,{style:"borderless",replId:t,onUpdateSuccess:function(){g(!1),n()}})})]})}var v=(0,s.x)({root:[c.wp.borderRadius(4),c.wp.p(8),c.wp.textAlign.center],budgetButtonContainer:[c.wp.width("100%"),c.wp.justify.center,{containerType:"inline-size"}],budgetButton:[{"@container (max-width: 330px)":{"& span":{display:"none"}}}]})},45474:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(67668),i=t(40208),o=t(20262),a=new Map,l=function(e,n){if((0,r.m6)(e)){var t=window.performance.now();a.set(e,{start:t,source:n})}},s=function(e){var n=a.get(e);if(void 0!==n){var t=n.start,r=n.source,l=window.performance.now(),s=(0,o.v)(e);i.vF.time("time to load file",l-t,{from:r,fileViewerType:s}),a.delete(e)}};function c(e){return{trackTimeToLoadFileStart:function(n){return l(n,e)},trackTimeToLoadFileEnd:s}}},45492:e=>{e.exports={startRapidBuild:"StartRapidBuild_startRapidBuild__gZbnE",root:"StartRapidBuild_root__s8Xzb",stackSurface:"StartRapidBuild_stackSurface__7p2bc"}},45693:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M5.25 16.75a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1ZM17.25 15.25a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M1.25 11.618c0-.298.048-.594.144-.877L3.62 4.123A2.75 2.75 0 0 1 6.226 2.25h11.548c1.18 0 2.23.754 2.606 1.873l2.227 6.618c.095.283.143.579.143.877V19A2.75 2.75 0 0 1 20 21.75H4A2.75 2.75 0 0 1 1.25 19v-7.382ZM6.226 3.75h11.548a1.25 1.25 0 0 1 1.184.851l2.227 6.619c.043.128.065.263.065.398v.132H2.75v-.132c0-.135.022-.27.065-.398L5.042 4.6a1.25 1.25 0 0 1 1.184-.851Zm-3.476 9.5V19c0 .69.56 1.25 1.25 1.25h16c.69 0 1.25-.56 1.25-1.25v-5.75H2.75Z",clipRule:"evenodd"})]}))}},46030:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M14.47 20.53a.75.75 0 0 0 1.06 0l5-5a.75.75 0 0 0 0-1.06l-5-5a.75.75 0 1 0-1.06 1.06l3.72 3.72H8A3.25 3.25 0 0 1 4.75 11V4a.75.75 0 0 0-1.5 0v7A4.75 4.75 0 0 0 8 15.75h10.19l-3.72 3.72a.75.75 0 0 0 0 1.06Z",clipRule:"evenodd"})}))}},46047:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M6.862 1.606A.75.75 0 0 1 7.5 1.25h9a.75.75 0 0 1 .67 1.085l-.92 1.842v6.513c.983.988 2.5 2.622 2.5 4.81a.75.75 0 0 1-.75.75h-5.25V22a.75.75 0 0 1-1.5 0v-5.75H6a.75.75 0 0 1-.75-.75c0-2.188 1.517-3.822 2.5-4.81V4.177l-.92-1.842a.75.75 0 0 1 .032-.73Z",clipRule:"evenodd"})}))}},46180:(e,n,t)=>{"use strict";t.d(n,{A:()=>f});var r=t(1889),i=t(45981),o=t.n(i),a=t(4124),l=t(88184),s=t(11733),c=t(43974),u=t(44885),d=t(40043),p=t(35869);function f(){var e=(0,a.useRouter)(),n=(0,s.pE)("didMigrateToNix","boolean");return(0,r.Y)(u.a,{isOpen:n,onRequestClose:function(){(0,s.HQ)({router:e,params:[{mode:"delete",key:"didMigrateToNix"}]})},centered:!0,children:(0,r.FD)(p.S,{gap:16,children:[(0,r.Y)(d.Y9,{level:1,variant:"headerDefault",children:"We've upgraded your App!"}),(0,r.FD)(d.EY,{children:["Your App is now using"," ",(0,r.Y)(o(),{legacyBehavior:!0,href:"https://blog.replit.com/nix",children:"the latest infrastructure"})," ","which unlocks powerful new features."]}),(0,r.FD)(p.D.ul,{css:c.wp.colWithGap(4),children:[(0,r.Y)(p.D.li,{children:(0,r.FD)(d.EY,{children:["•"," ",(0,r.Y)(o(),{legacyBehavior:!0,href:l.ik.DEPENDENCY_MANAGEMENT,children:"Use 80,000+ system dependencies"})," ","(linux packages) out of the box."]})}),(0,r.Y)(p.D.li,{children:(0,r.FD)(d.EY,{children:["•"," ",(0,r.Y)(o(),{legacyBehavior:!0,href:"https://docs.replit.com/replit-workspace/configuring-repl",children:"Configure your App"})," ","with more capabilities."]})}),(0,r.Y)(p.D.li,{children:(0,r.FD)(d.EY,{children:["•"," ",(0,r.Y)(o(),{legacyBehavior:!0,href:l.ik.DEPENDENCY_MANAGEMENT,children:"Check out this doc"})," ","for a deep dive."]})})]}),(0,r.FD)(d.EY,{variant:"small",css:{fontStyle:"italic"},children:["Any overwritten files have been backed up to the same file name with a .backup suffix. If you have any questions, please visit"," ",(0,r.Y)(o(),{legacyBehavior:!0,href:"https://replit.com/community",children:"replit.com/community"})," ","to get help."]}),(0,r.Y)(d.EY,{multiline:!1,children:"Thank you for your patience"})]})})}},46288:(e,n,t)=>{"use strict";t.d(n,{D:()=>i,O:()=>r});var r="users.noreply.replit.com",i="users.noreply.github.com"},46838:(e,n,t)=>{"use strict";t.d(n,{L:()=>a});var r=t(21462),i=t(20221),o=t(2960);function a(){var e=(0,i.RL)(),n=(0,o.A)(e);return(0,r.useCallback)(function(){var e,t;return!Number.isFinite(t=parseInt(null==(e=n.current)?void 0:e.variation("flag-container-retry-minimum-ms",0),10))||t<0?0:t},[n])}},47099:(e,n,t)=>{"use strict";t.d(n,{D3:()=>U,N2:()=>I,Rc:()=>M,XT:()=>L,bX:()=>k,ce:()=>B,pd:()=>T,sb:()=>P,wi:()=>N,y1:()=>F});var r=t(12694),i=t(86105),o=t(1889),a=t(21462),l=t(26496),s=t(38802),c=t(17917),u=t(90001),d=t(30034),p=t(6680),f=t(98988),h=t(61234),m=t(47258),g=t(43974),v=t(3910),w=t(40043),y=t(37407),b=t(35869),S=t(62451),Y=t(56185),A=t(35801),C=t(42727),x=t(32633),k=400,_=[g.wp.p(4),g.wp.center,g.wp.borderRadius(4)],D=(0,h.x)({root:(0,i._)(_).concat([g.wp.cursor.pointer,(0,f.Li)("blurple")]),disabled:(0,i._)(_).concat([(0,f.Li)("grey")])});function E(e){return e.disabled||e.connecting?(0,o.Y)(b.S,{css:D.disabled,tag:"button","data-cy":"ghostwriter-inline-submit",children:e.connecting?(0,o.Y)(Y.A,{size:12}):(0,o.Y)(A.A,{size:12})}):(0,o.Y)(b.S,{"data-cy":"ghostwriter-inline-submit",css:D.root,tag:"button",onClick:e.onClick,children:e.loading?(0,o.Y)(C.A,{size:12}):(0,o.Y)(A.A,{size:12})})}var R=(0,h.x)({root:[g.wp.py(8),g.wp.pr(8),g.wp.colWithGap(4),g.wp.minWidth(300),g.wp.maxWidth(800),g.wp.position.relative,{fontFamily:p.LU.fontFamilyDefault}],container:[g.wp.position.relative,g.wp.backgroundColor.backgroundDefault],input:[m.b.outlined,g.wp.borderRadius(4),{paddingBottom:36,"@media (hover: hover)":{":not([disabled]):hover":{backgroundColor:"transparent"}}}],textarea:[g.wp.p(8),g.wp.pb(0),{caretColor:"initial",fontFamily:p.LU.fontFamilyDefault,border:"0 none",resize:"none",height:"1em",backgroundColor:"transparent","@media (hover: hover)":{":not([disabled]):focus":{outline:"0 none"}},"::placeholder":{color:p.LU.foregroundDimmest}}],footer:[g.wp.px(8),g.wp.pr(6),g.wp.rowWithGap(8),g.wp.align.center,g.wp.position.absolute,g.wp.bottom(0),g.wp.left(0),g.wp.width("100%"),{height:36}],footerLeft:[g.wp.flex.growAndShrink(1),g.wp.align.center],footerRight:[{"& button":[g.wp.height(22),g.wp.py(6),g.wp.py(4),g.wp.borderRadius(4)]}],error:[g.wp.color.accentNegativeStronger]}),I=function(e){var n=e.requestMeasure,t=e.type,r=e.children,i=e.isCodeMirrorPocket,a=(0,u.A)(n);return(0,o.Y)(d.A,{bsod:!0,tags:{ai:!0},extras:{type:t},origin:"ErrorBoundary: InlineAiWidget",children:(0,o.Y)(b.S,{css:R.root,innerRef:a,className:void 0===i||i?"cm-pocket-widget":void 0,children:r})})},F=function(e){var n=e.requestMeasure,t=e.type,r=e.children,i=e.isCodeMirrorPocket,a=e.error,l=e.clearError,s=e.innerRef;return(0,o.FD)(I,{type:t,requestMeasure:n,isCodeMirrorPocket:void 0===i||i,children:[(0,o.Y)(b.S,{css:R.container,innerRef:s,children:r}),a?(0,o.Y)(v.N,{icon:(0,o.Y)(x.A,{color:p.LU.accentNegativeDefault}),text:a,closable:!0,closeAction:l}):null]})};function T(e){var n=(0,c.A)();return(0,o.Y)(b.S,{css:R.input,children:(0,o.Y)("textarea",{value:e.value,onChange:e.onChange,placeholder:e.placeholder,css:R.textarea,ref:function(t){e.inputRef.current=t,n.ref(t)},onKeyDown:e.onKeyDown,autoFocus:e.autoFocus,"data-cy":"ghostwriter-inline-input",disabled:e.disabled})})}function P(e){var n=e.readableModelName,t=e.type;return(0,o.Y)(y.m_,{tooltip:"generateCode"===t?"Generate new code based on this file".concat(n?" using ".concat(n,"."):"."):"Modify selected code based on the context of this file".concat(n?" using ".concat(n,"."):"."),children:(0,o.FD)(b.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(S.A,{}),(0,o.Y)(w.EY,{variant:"small",color:"dimmest",children:"transformCode"===t?"Modify with ".concat(l.BP):"Generate with ".concat(l.BP)})]})})}function L(e){var n=e.loading,t=e.disabled,r=e.promptPresentation,i=e.onClick,a=e.connecting,l=e.escPressed,s=e.codeLengthExceeded;return(0,o.FD)(o.FK,{children:[n?(0,o.FD)(b.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(Y.A,{size:12,color:p.LU.blurpleDefault}),r?(0,o.Y)(w.EY,{variant:"small",color:"dimmest",children:"AI is writing"}):null]}):(0,o.Y)(o.FK,{children:r?(0,o.Y)(w.EY,{variant:"small",color:"dimmest",children:s?"Code length exceeded":l?"Press Esc again to dismiss":"Esc to close, Enter to submit"}):null}),(0,o.Y)(E,{connecting:a,loading:n,disabled:t,onClick:i})]})}function U(e){var n=e.id,t=e.inputRef,i=e.onClose,o=e.loading,l=e.onSubmit,c=(0,r._)((0,a.useState)(""),2),u=c[0],d=c[1],p=(0,r._)((0,a.useState)(!1),2),f=p[0],h=p[1];return(0,a.useEffect)(function(){var e="inline-ai/input-state/".concat(n),r=s.A.get(e,"string");r&&d(r);var i=t.current;return function(){if(i){var n=i.value;if(0===n.length){s.A.remove(e);return}s.A.set(e,n)}}},[n,t]),{value:u,setValue:d,onKeyDown:function(e){switch(e.key){case"Escape":e.preventDefault(),u.length?f?i():h(!0):i();break;case"Enter":if(e.preventDefault(),o)break;e.shiftKey?d(function(e){return e+"\n"}):!e.metaKey&&u.length&&u.trim()&&l();break;default:h(!1)}},escPressed:f}}var N=function(e){var n=(0,r._)(e.children,2),t=n[0],i=n[1];return(0,o.FD)(b.S,{css:R.footer,children:[(0,o.Y)(b.S,{css:R.footerLeft,row:!0,gap:8,children:t}),(0,o.Y)(b.S,{css:R.footerRight,row:!0,gap:4,align:"center",children:i})]})},O=(0,h.x)({default:[g.wp.width("90%")]}),M=function(e){var n=e.inlineActionType,t=e.closeAction;return(0,o.Y)(b.S,{css:O.default,children:(0,o.Y)(v.N,{icon:(0,o.Y)(x.A,{}),colorway:"red",text:"".concat(n," with AI is currently unavailable. Try again later."),closable:!0,closeAction:t})})},B=function(e){var n=e.inlineActionType,t=e.closeAction;return(0,o.Y)(b.S,{css:O.default,children:(0,o.Y)(v.N,{icon:(0,o.Y)(x.A,{}),colorway:"blurple",text:"".concat(n," with AI is unavailable while ").concat((0,l.Nn)({variant:"casual"})," is running."),closable:!0,closeAction:t})})}},47535:(e,n,t)=>{"use strict";t.d(n,{p:()=>u});var r=t(1889),i=t(21462),o=t(45771),a=t(6680),l=t(43974),s=t(93682),c=(0,o.AH)(l.wp.display.flex,l.wp.align.center,l.wp.height(30),{"input, button":[l.wp.my(0),l.wp.mx(4)],input:[l.wp.py(4),l.wp.px(8),l.wp.backgroundColor.backgroundDefault,l.wp.color.foregroundDefault,l.wp.height(24),l.wp.width(85),l.wp.borderRadius(4),l.wp.focusRing,{border:"none",boxShadow:"none","&::placeholder":[l.wp.color.foregroundDefault],"&:focus":[{outline:"none",borderColor:a.LU.accentPrimaryDefault}]}]});function u(e){var n=e.searchValue,t=e.setSearchValue,o=e.findNext,a=e.findPrevious,l=e.exit,u=(0,i.useRef)(null);(0,i.useEffect)(function(){u.current&&u.current.focus()},[]);var d=function(e){if("Escape"===e.key){l();return}"Enter"===e.key&&(e.shiftKey?a(n):o(n))};return(0,r.FD)("div",{css:c,children:[(0,r.Y)("input",{ref:u,placeholder:"Find",value:n,onChange:function(e){return t(e.target.value)},onKeyDown:function(e){return d(e)}}),(0,r.Y)(s.$n,{size:"small",onClick:function(){return o(n)},text:"Next"}),(0,r.Y)(s.$n,{size:"small",onClick:function(){return a(n)},text:"Previous"}),(0,r.Y)(s.$n,{size:"small",onClick:l,text:"Exit"})]})}},47554:e=>{e.exports={root:"AgentInput_root__x0F7C"}},47606:(e,n,t)=>{"use strict";t.d(n,{R:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query UseReplOrgId($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n,t,i=(n=(0,r._)({},s,{variables:{replId:e}}),a.I(c,n)),o=i.data,l=i.loading,u=i.error;return l?{loading:l,hasError:!1,orgId:void 0}:{loading:l,hasError:void 0!==u||(null==o?void 0:o.getRepl.__typename)!=="Repl",orgId:(null==o?void 0:o.getRepl.__typename)==="Repl"?null===(t=o.getRepl.org)||void 0===t?void 0:t.id:void 0}}},47973:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(21462),i=t(53811),o=t(79919),a=t(75641),l=t(16907),s=t(40208),c=t(94631),u=t(67337),d=new Set;function p(e){var n=e.workspaceType,t=(0,l.A)(),p=(0,u.A)(),f=p.dotReplit,h=p.container;(0,r.useEffect)(function(){if(!d.has(t)){d.add(t);var e=f.watch(function(t){if(!t.error||t.error!==a.DO.Disconnected){try{var r=h.getConnectionMetadata();if(!r||!r.token)throw Error("Expected token in measure call.");!function(e){var n=e.workspaceType,t=e.parsedToken,r=!!window.performance.getEntriesByName(o.pY.pageNavStart,"mark").length,a={ssr:!r,workspaceType:n,tokenCluster:t.cluster},l="time to code";window.performance.measure(l,r?o.pY.pageNavStart:void 0);var c=window.performance.getEntriesByName(l,"measure")[0];if(!c){s.vF.info("Could not obtain measure for time to code",a);return}var u="page invisible fetch connection metadata",d=c.duration;window.performance.getEntriesByName(o.pY.fetchConnectionMetadataPageInvisibleStart,"mark").length&&(window.performance.measure(u,o.pY.fetchConnectionMetadataPageInvisibleStart,o.pY.fetchConnectionMetadataPageInvisibleEnd),d-=window.performance.getEntriesByName(u,"measure")[0].duration,window.performance.clearMeasures(u),window.performance.clearMarks(o.pY.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(o.pY.fetchConnectionMetadataPageInvisibleEnd)),s.vF.time("time to code minus page invisible",d,a),s.vF.time("time to code with page invisible",c.duration,a),window.performance.clearMeasures(l),i.L.addTiming("time_to_code_minus_page_invisible",d),i.L.addTiming("time_to_code_with_page_invisible",c.duration)}({workspaceType:n,parsedToken:(0,c.pI)(r.token)})}catch(e){s.vF.info("Could not measure time to code",{workspaceType:n,e:e,dotReplitResult:t.error?t.error:"success"})}e()}});return e}},[t,n,f,h])}},48055:(e,n,t)=>{"use strict";t.d(n,{sK:()=>A,j$:()=>C,Si:()=>x});var r=t(12694),i=t(21462),o=t(35992),a=t(17844),l=t(12584),s=t(41114),c=t(68197),u=t(83338);function d(){var e=(0,l._)(["\n  fragment OrgPresenceSessionUser on User {\n    id\n    username\n    fullName\n    image\n    url\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,l._)(["\n  fragment OrgPresenceSessionProject on Project {\n    id\n    title\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,l._)(["\n  fragment OrgPresenceSessionRepl on Repl {\n    id\n    title\n    iconUrl\n    ...ReplLinkRepl\n    project {\n      id\n      org {\n        id\n        slug\n      }\n      ...OrgPresenceSessionProject\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,l._)(["\n  fragment OrgPresenceSessionItem on OrgPresenceSession {\n    id\n    user {\n      ...OrgPresenceSessionUser\n    }\n    repl {\n      ...OrgPresenceSessionRepl\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,l._)(["\n  subscription OrgPresence($input: OrgReplPresenceSessionEventsInput!) {\n    orgReplPresenceSessionEvents(input: $input) {\n      __typename\n      ... on OrgPresenceSessionInitEvent {\n        sessions {\n          ...OrgPresenceSessionItem\n        }\n      }\n      ... on OrgPresenceSessionPingEvent {\n        session {\n          ...OrgPresenceSessionItem\n        }\n      }\n      ... on OrgPresenceSessionLeaveEvent {\n        sessionId\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},v=(0,s.J1)(d()),w=(0,s.J1)(p()),y=(0,s.J1)(f(),u.r,w),b=(0,s.J1)(h(),v,y),S=(0,s.J1)(m(),b);function Y(e,n){var t=n.id,r=n.repl,i=n.user;if(i&&r){var o={id:t,repl:r,user:i,project:r.project||null},a=e.findIndex(function(e){return e.id===t});-1===a?e.push(o):e.splice(a,1,o)}}var A=function(e){var n,t=e.orgId,l=e.projectId,s=(0,r._)((0,i.useState)([]),2),u=s[0],d=s[1];return(0,i.useEffect)(function(){d([])},[t,l]),n=(0,a._)({},g,{variables:{input:{orgId:t,projectId:l}},onData:function(e){var n,t=null===(n=e.data.data)||void 0===n?void 0:n.orgReplPresenceSessionEvents;t&&d(function(e){return(0,o.jM)(e,function(e){!function(e,n){switch(n.__typename){case"OrgPresenceSessionInitEvent":var t=!0,r=!1,i=void 0;try{for(var o,a=n.sessions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;Y(e,l)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}break;case"OrgPresenceSessionPingEvent":Y(e,n.session);break;case"OrgPresenceSessionLeaveEvent":var s=e.findIndex(function(e){return e.id===n.sessionId});if(-1===s)return;e.splice(s,1)}}(e,t)})})}}),c.R(S,n),u},C=function(e){var n=A({orgId:e});return(0,i.useMemo)(function(){return n.reduce(function(e,n){return n.project&&(e[n.project.id]||(e[n.project.id]={}),e[n.project.id][n.user.id]=n.user),e},{})},[n])},x=function(e){var n=A({orgId:e.orgId,projectId:e.projectId});return(0,i.useMemo)(function(){return n.reduce(function(e,n){return e[n.repl.id]||(e[n.repl.id]={}),e[n.repl.id][n.user.id]=n.user,e},{})},[n])}},48088:(e,n,t)=>{"use strict";t.d(n,{D8:()=>v,m2:()=>A,vc:()=>C});var r=t(17844),i=t(93629),o=t(17459),a=t(1889),l=t(72004),s=t(61234),c=t(43974),u=t(40043),d=t(35869),p=t(13194),f=t(82478),h=t(54046),m=t(31350),g=new Map([[l.e3q.BASIC,p.A],[l.e3q.ADVANCED,f.A]]);function v(e){var n=e.model,t=(0,o._)(e,["model"]),i=g.get(n);return i?(0,a.Y)(i,(0,r._)({},t)):null}l.e3q.BASIC,l.e3q.ADVANCED;var w=new Map([[l.qRv.GENERATE,m.A],[l.qRv.TRANSFORM,m.A],[l.qRv.EXPLAIN,h.A],[l.qRv.REPLIT_DOCS,h.A]]),y=new Map([[l.qRv.GENERATE,"Generate"],[l.qRv.TRANSFORM,"Modify"],[l.qRv.EXPLAIN,"Explain"],[l.qRv.REPLIT_DOCS,"Ask replit.com"]]),b=new Map([[l.Z1T.GENERATE_CODE,m.A],[l.Z1T.TRANSFORM_CODE,m.A],[l.Z1T.EXPLAIN_CODE,h.A],[l.Z1T.DEBUGGER,h.A]]),S=new Map([[l.Z1T.GENERATE_CODE,"Generate"],[l.Z1T.TRANSFORM_CODE,"Modify"],[l.Z1T.EXPLAIN_CODE,"Explain"],[l.Z1T.DEBUGGER,"Debug"]]),Y=(0,s.x)({iconLabel:[c.wp.rowWithGap(4),c.wp.align.center]});function A(e){var n=e.intent,t=e.icon,o=e.text,l=w.get(n),s=y.get(n);return l&&s?(0,a.FD)(d.S,{css:Y.iconLabel,children:[(0,a.Y)(l,(0,r._)({},t)),(0,a.Y)(u.EY,(0,i._)((0,r._)({},o),{children:s}))]}):null}function C(e){var n=e.type,t=e.icon,o=e.text,l=b.get(n),s=S.get(n);return l&&s?(0,a.FD)(d.S,{css:Y.iconLabel,children:[(0,a.Y)(l,(0,r._)({},t)),(0,a.Y)(u.EY,(0,i._)((0,r._)({},o),{children:s}))]}):null}},48281:(e,n,t)=>{"use strict";t.d(n,{F:()=>r});var r=function(e){return e.PARTIAL_RESULTS="Displaying partial results, try being more specific with your search.",e.EMPTY_RESULTS="Nothing came up searching your App's content.",e.EMPTY_QUERY="No search query was provided.",e.INVALID_LINE="We encountered an invalid line while parsing your search results.",e.INVALID_COMMAND="Ripgrep returned an invalid response.",e.CONTAINER_DISCONNECTED="Disconnected from the container.",e.CONTAINER_CONNECTING="Connecting to the container.",e.CHANNEL_CLOSED="Channel was closed.",e}({})},48326:(e,n,t)=>{"use strict";t.d(n,{G:()=>X,C:()=>ee});var r,i=t(1889),o=t(21462),a=t(26496),l=t(45773),s=t(37743),c=t(83846),u=t(17844),d=t(93629),p=t(23099),f=t.n(p),h=t(49069),m=t(23244),g=t(99395),v=t(64774),w=t(92537),y=t(99672),b=t(24491),S=t(9907),Y=t(80703),A=t(80418),C=t(6680),x=t(61234),k=t(47258),_=t(22498),D=t(43974),E=t(2527),R=t(40043),I=t(37407),F=t(35869),T=t(60274),P=(0,_.v)(["opacity","transform"]),L=P.cssVars,U=P.styleTokens,N=[D.wp.display.flex,D.wp.reset.button,D.wp.cursor.pointer,D.wp.center,k.b.nofill,D.wp.height("100%"),D.wp.borderRadius(0)],O=[N,D.wp.width(28),{"& svg":D.wp.display.block}],M=(0,x.x)({root:[D.wp.borderRadius(6),D.wp.border({color:C.LU.outlineDefault}),D.wp.position.relative,D.wp.height(30),{opacity:U.opacity,transform:U.transform,transition:"opacity 120ms, transform 120ms","button:first-of-type":{borderTopLeftRadius:6,borderBottomLeftRadius:6},"button:last-of-type":{borderTopRightRadius:6,borderBottomRightRadius:6}}],moreButton:O,button:[N,D.wp.rowWithGap(4),D.wp.align.center,D.wp.pl(4),D.wp.pr(6),D.wp.flex.growAndShrink(1),D.wp.border({direction:"right",color:C.LU.outlineDefault}),{fontFamily:C.LU.fontFamilyDefault,"*":{color:C.LU.foregroundDimmer},":hover *":{color:C.LU.foregroundDefault},".shortcut":{color:C.LU.foregroundDimmest},":hover .shortcut":{color:C.LU.foregroundDimmer}}],iconButton:[O,D.wp.border({direction:"right",color:C.LU.outlineDefault})]}),B=new v.E(function(e){var n,t=e.controls,r=e.verticalPlacement,a=e.onMoreClick,l=(0,o.useRef)(null),s=(0,S.vm)(),p=(0,A.zg)();(0,o.useEffect)(function(){var e;p(),(0,b.U)(l,(e={},(0,c._)(e,L.opacity,"1"),(0,c._)(e,L.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(C.LU.space4,"))")),e))},[r,p]);var f=(0,o.useRef)((0,A.Nf)());return(0,i.FD)(E.ui,{innerRef:l,elevated:!0,css:M.root,align:"stretch",row:!0,style:(n={},(0,c._)(n,L.opacity,"0"),(0,c._)(n,L.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(C.LU.space16,"))")),n),children:[t.map(function(e){if(f.current){var n=(0,i.FD)(F.S,{row:!0,gap:2,align:"center",children:[(0,i.Y)(R.EY,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.Y)(R.EY,{variant:"small",className:"shortcut",color:"dimmest",children:(0,Y.LH)(e.shortcut,s)}):null]});return(0,i.Y)(I.m_,{tooltip:n,children:function(n,t){return(0,i.Y)(F.S,(0,d._)((0,u._)({},n),{innerRef:t,css:M.iconButton,onClick:e.onClick,tag:"button",children:e.icon}))}},e.text)}return(0,i.FD)(F.S,{css:M.button,onClick:e.onClick,tag:"button",children:[e.icon,(0,i.Y)(R.EY,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.FD)(R.EY,{variant:"small",className:"shortcut",children:["(",(0,Y.LH)(e.shortcut,s),")"]}):null]},e.text)}),a?(0,i.Y)(F.S,{"aria-label":"More",css:M.moreButton,onClick:function(e){var n=(l.current||e.currentTarget).getBoundingClientRect();a({top:n.top,right:n.right})},tag:"button",children:(0,i.Y)(T.A,{size:16})}):null]})}),H={layer:"cm-selection-controls-layer",dom:"cm-selection-controls-dom"},z=l.Lz.theme((r={},(0,c._)(r,".".concat(H.layer),{width:"100%"}),(0,c._)(r,".".concat(H.dom),{position:"absolute"}),r)),W=function(){function e(n){(0,s._)(this,e),this.options=n}var n=e.prototype;return n.draw=function(){var e=this.options,n=e.controls,t=e.onMoreClick,r=e.top,i=e.align,o=e.verticalPlacement,a=B.create({controls:n,onMoreClick:t,verticalPlacement:o});return a.className=H.dom,a.style.top=r+"px","left"===i.side?(a.style.left=i.value+"px",a.style.right=""):(a.style.right=i.value+"px",a.style.left=""),a.style.pointerEvents="none",setTimeout(function(){a.style.pointerEvents="auto"},200),a},n.eq=function(e){return f()(e.options,this.options)},e}(),G=h.Pe.define(),V=h.sU.define({create:function(){return null},update:function(e,n){var t;return!n.state.selection||(null===(t=n.state.selection)||void 0===t?void 0:t.main.empty)?null:((0,w.C)(n,G,function(n){e=n.value}),e)}}),j=h.sU.define({create:function(e){return!e.selection.main.empty},update:function(e,n){return!n.state.selection.main.empty}}),Z=l.Z9.define(function(e){var n=function(){var n=e.state.selection.main;e.dispatch({effects:G.of(n.empty?null:Date.now())})},t=function(e){"Shift"===e.key&&n()},r=function(){document.addEventListener("mouseup",n),document.addEventListener("keyup",t)},i=function(){document.removeEventListener("mouseup",n),document.removeEventListener("keyup",t)};return{update:function(e){(0,m.$H)(e,j)&&(e.state.field(j)?r():i())},destroy:i}}),q=new y.k(function(e){return[z,(0,l.qd)({above:!0,class:H.layer,update:function(e){return(0,m.$H)(e,g.z,V)},markers:function(n){if(!n.hasFocus)return[];var t=n.state.field(V)?n.state.selection.main:null;if(!t||n.state.field(g.z,!1))return[];var r=function(e,n){for(var t=Math.min(n.from,n.to),r=Math.max(n.from,n.to),i=null;t<=r;){var o=e.lineAt(t);t=o.to+1,(null===i||!(o.length<i.length))&&(i=o)}return i}(n.state.doc,t);if(!r)return[];var i=n.coordsAtPos(r.to);if(!i)return[];var o=n.lineBlockAt(Math.min(t.anchor,t.head)),a=n.dom.getBoundingClientRect(),l=n.contentDOM.getBoundingClientRect(),s=o.top+n.documentPadding.top-30,c=l.right-i.left<200?{side:"right",value:a.right-l.right+16}:{side:"left",value:i.left-a.left},u="top";if(s<n.scrollDOM.scrollTop){var d=n.lineBlockAt(t.to);s=d.top+d.height,u="bottom"}return[new W({top:s,align:c,controls:e.controls(n),onMoreClick:e.onMoreClick,verticalPlacement:u})]}}),j,V,Z]}),K=t(60799),$=t(95758),J=t(54046),Q=t(31350),X={id:"editor.generateOrModifyWithAI",name:"AI",description:"Generate or modify selection with AI",default:(0,$.FM)({cmdOrCtrl:!0,key:"i"})};function ee(e){var n=e.editCode,t=e.explainCode,r=e.generateCode,s=e.onMoreClick,c=(0,K.f)().isTeamWithAiDisabled,u=(0,Y.Jn)(X.id),d=(0,o.useMemo)(function(){if(!u)return[];var e=Array.isArray(u)?u.join(" "):u;return l.w4.of([{key:e,scope:"editor",run:function(e){return e.state.selection.main.empty?r(e,"shortcut"):n(e,"shortcut"),!0}}])},[u,r,n]),p=(0,o.useMemo)(function(){return{controls:function(e){return c?[]:[{text:"Modify with "+a.BP,icon:(0,i.Y)(Q.A,{size:16,color:C.LU.blurpleStronger}),onClick:function(){return n(e,"highlight")},shortcut:u},{text:"Explain with "+a.BP,icon:(0,i.Y)(J.A,{size:16,color:C.LU.blurpleStronger}),onClick:function(){return t(e,"highlight")}}]},onMoreClick:s}},[n,t,s,u,c]),f=q.use(p);return(0,o.useMemo)(function(){return[f,d]},[f,d])}},48568:(e,n,t)=>{"use strict";t.d(n,{L:()=>h});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  fragment AssistantAuthorizations on OrgAuthorizations {\n    basicAssistant: useAiAssistant(mode: basic) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n    advancedAssistant: useAiAssistant(mode: advanced) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  query GetAssistantReplAuthorizations($orgId: String) {\n    currentUser {\n      id\n      personalOrgAuthorizations {\n        ... on OrgAuthorizations {\n          ...AssistantAuthorizations\n        }\n        ... on Error {\n          message\n        }\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          authorizations {\n            ... on OrgAuthorizations {\n              ...AssistantAuthorizations\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(l()),d=(0,o.J1)(s(),u),p=t(47606),f=t(16907);function h(){var e,n,t,i=(0,f.A)(),o=(0,p.R)(i),l=o.orgId,s=o.loading,u=o.hasError,h=(e=(0,r._)({},c,{variables:{orgId:l}}),a.I(d,e)),m=h.data,g=h.loading,v=h.error,w=h.refetch;return s||u||g||v?{refetch:w,loading:s||g}:void 0===l?{authorizations:(null==m?void 0:null===(t=m.currentUser)||void 0===t?void 0:t.personalOrgAuthorizations.__typename)==="OrgAuthorizations"?m.currentUser.personalOrgAuthorizations:void 0,refetch:w,loading:!1}:{authorizations:(null==m?void 0:null===(n=m.currentUser)||void 0===n?void 0:n.org.__typename)==="Org"?m.currentUser.org.authorizations:void 0,refetch:w,loading:!1}}},48768:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(1889),i=t(1606),o=t(30938),a=t(61234),l=t(43974),s=t(93682),c=t(3910),u=t(2527),d=t(40043),p=t(35869),f=t(6761),h=t(20627),m=(0,a.x)({connectButtonRow:[l.wp.flex.rowReverse]});function g(e){var n=e.onConfirm,t=(0,o.A)(),a="Host *.replit.dev\n  Port 22\n  IdentityFile ".concat(t,"/.ssh/replit");return(0,r.FD)(u.ui,{gap:12,children:[(0,r.FD)(p.S,{gap:4,children:[(0,r.Y)(d.Y9,{level:1,variant:"subheadBig",children:"Update your SSH configuration"}),(0,r.FD)(d.EY,{color:"dimmer",children:["Before connecting over SSH, you need to update your local SSH configuration file, which is usually located at ",t,"/.ssh/config"]})]}),(0,r.Y)(i.A,{code:a,header:".ssh/config",multiline:!0}),(0,r.Y)(c.N,{text:"You can find this information later in the SSH docs",icon:(0,r.Y)(h.A,{})}),(0,r.Y)(p.S,{css:m.connectButtonRow,children:(0,r.Y)(s.$n,{text:"I updated my config",iconLeft:(0,r.Y)(f.A,{}),onClick:n,colorway:"primary",stretch:!1})})]})}},48783:(e,n,t)=>{"use strict";t.d(n,{A:()=>y});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(21462),s=t(93873),c=t(67668),u=t(11597),d=t(80865),p=t(63892),f=t(95969),h=t(67337),m=t(49705),g=t(61377),v=t(87208),w=t(33977);function y(e){var n,t,y,b=e.moveOrDeleteFile,S=(0,h.A)().fs,Y=(0,f.j)(),A=(0,l.useRef)(new Map),C=(0,w.mU)(),x=(0,i._)((0,l.useState)(!1),2),k=x[0],_=x[1],D=(0,i._)((0,l.useState)(!1),2),E=D[0],R=D[1],I=(0,i._)((0,l.useState)([]),2),F=I[0],T=I[1],P=(0,g.i)(),L=(0,m.iO)(),U=(0,d._P)({controlName:"flag-draft-buffers"}),N=(0,v.UI)(),O=F.map(function(e){return e.path}).map(function(e){return{title:e,path:e}}),M=(0,i._)((0,l.useState)(),2),B=M[0],H=M[1],z=(0,w.tn)();(0,l.useEffect)(function(){if(!(!C||A.current.has(C))){var e=function(e){var n=e.node.path;z(e.eventType===u.dV.Move?{path:n,type:"move",to:e.to}:{path:n,type:"delete"}),b&&b(e),A.current.delete(C),T(function(e){return e.filter(function(e){return e.path!==C})})};(0,c.m6)(C)?S.watchTextFile(C,{onMoveOrDelete:e,onError:function(e,n){!e.code&&((!U||N)&&S.flush(),S.persist({skipDebounce:!0}),L({error:e,extras:n,tags:{ot:!0},origin:"useContentsDiverged: fs.watchTextFile"}))},onReconnectFail:function(e,n){T(function(t){return(0,o._)(t.filter(function(e){return e.path!==C})||[]).concat([{path:C,prompt:n,cb:e}])}),Y("user:ot:diverged",{path:C,divergence:n}),_(!0),B||H(C)}}):S.watchFile(C,{onChange:function(){},onMoveOrDelete:e}),A.current.set(C,!0)}},[C,S,L,b,B,Y,z,N,U]);var W=(n=(0,r._)(function(e){return(0,a.YH)(this,function(n){switch(n.label){case 0:return(0,p.u4)(p.AZ.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,p.u4)(p.AZ.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),R(!0),[4,Promise.all(F.map(function(n){return T(function(e){var t=e.filter(function(e){return e.path!==n.path});return 0===t.length?_(!1):H(t[0].path),t}),n.cb(e)}))];case 1:return n.sent(),R(!1),[2]}})}),function(e){return n.apply(this,arguments)}),G=B?F.find(function(e){return e.path===B}):null,V=null==G?void 0:G.prompt,j=(0,s.M)({left:{code:null!==(t=null==V?void 0:V.localContent)&&void 0!==t?t:"",filePath:B},right:{code:null!==(y=null==V?void 0:V.remoteContent)&&void 0!==y?y:"",filePath:B}});return{isConverging:E,didContentsDiverge:k,showMoreDetail:P,failedFiles:F,failedFilesOptions:O,selectedFile:B,setSelectedFile:H,reviewingPrompt:V,onChoice:W,local:j.left,remote:j.right}}},49019:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14.19l2.72-2.72a.75.75 0 0 1 .53-.22h12A1.27 1.27 0 0 0 20.25 15v-4a.75.75 0 0 1 1.5 0v4A2.77 2.77 0 0 1 19 17.75H7.31l-3.78 3.78A.75.75 0 0 1 2.25 21V5A2.75 2.75 0 0 1 5 2.25h8a.75.75 0 0 1 0 1.5H5Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M18.438 1.8c-.147-.4-.73-.4-.875 0l-1.005 2.744a.458.458 0 0 1-.298.278l-2.436.746a.446.446 0 0 0 0 .857l2.437.752a.458.458 0 0 1 .297.279l1.005 2.745c.146.399.728.399.875 0l1.004-2.745a.458.458 0 0 1 .297-.278l2.437-.75a.446.446 0 0 0 0-.857l-2.437-.749a.458.458 0 0 1-.297-.278L18.437 1.8Z",clipRule:"evenodd"})]}))}},49027:(e,n,t)=>{"use strict";t.d(n,{V:()=>W,P:()=>B});var r=t(12694),i=t(86105),o=t(1889),a=t(21462),l=t(72004),s=t(90001),c=t(80865),u=t(95563),d=t(22498),p=t(74863),f=t(40043),h=t(35869),m=t(58127),g=t(13344),v=t(38374),w=t.n(v),y=(0,d.v)(["dividerColor"]).styleTokens,b=[{title:"Visual preview",time:"(~2 min.)",icon:(0,o.Y)(g.A,{size:12})},{title:"First app version",time:"(~10 min.)",icon:(0,o.Y)(m.A,{size:12})}];let S=function(){var e=(0,u.A)(),n=(0,c._P)({controlName:"flag-genie-timing-agent"});return e&&n?(0,o.FD)(o.FK,{children:[(0,o.Y)(p.a,{className:w().divider,style:{backgroundColor:y.dividerColor}}),(0,o.FD)(h.S,{children:[(0,o.Y)(f.EY,{className:w().timelineTitle,children:"Timeline"}),(0,o.Y)(h.S,{className:w().timelineItems,children:b.map(function(e,n){return(0,o.FD)(h.S,{className:w().timelineItem,children:[(0,o.Y)(h.S,{className:w().timelineItemIcon,children:e.icon}),(0,o.Y)(h.S,{className:w().timelineItemContent,children:(0,o.FD)(h.S,{className:w().text,children:[(0,o.Y)(f.EY,{variant:"text",color:"default",className:w().timelineItemText,children:e.title}),(0,o.Y)(f.EY,{variant:"small",color:"dimmer",children:e.time})]})})]},n)})})]})]}):null};var Y=t(73978),A=t(6680),C=t(61234),x=t(43974),k=t(93682),_=t(67197),D=t(26705),E=t(51820),R=t(18063),I=t(37407),F=t(6761),T=t(38828),P=t(28365),L=t(20627),U=t(56185),N={START_BUILDING:180},O=function(e){var n="";return e.map(function(e){n+=e.name+"\n"}),n},M=(0,C.x)({editable:[x.wp.colWithGap(4)],readonly:[x.wp.colWithGap(8)],buttonContainer:[x.wp.pt(4)],text:[x.wp.py(8)]});function B(e){var n=e.isEditable,t=e.steps,l=(0,r._)((0,a.useState)([]),2),c=l[0],u=l[1],d=(0,r._)((0,a.useState)(1/0),2),p=d[0],m=d[1],g=(0,a.useCallback)(function(e){m(e.width)},[]),v=(0,s.A)(g);if(!t.length)return(0,o.Y)(H,{editable:n});var w=function(){var n=t.filter(function(e,n){return 0===n||c.includes(e.id)});e.appovePlan(n),u([]),(0,Y.pI)({action:"plan_approved",stepsApproved:c.length+1,sessionId:e.sessionId,planText:O(n)})},y=function(n){u(function(t){return t.includes(n)?((0,Y.pI)({action:"plan_step_removed",sessionId:e.sessionId}),t.filter(function(e){return e!==n})):((0,Y.pI)({action:"plan_step_added",sessionId:e.sessionId}),(0,i._)(t).concat([n]))})};return(0,o.FD)(h.S,{gap:8,innerRef:v,children:[(0,o.Y)(h.S,{css:n?M.editable:M.readonly,children:t.map(function(e,t){return(0,o.FD)(a.Fragment,{children:[1===t&&n?(0,o.Y)(f.EY,{css:M.text,children:"Would you like any of these additional features? We can also make changes later."}):null,(0,o.Y)(G,{step:e,stepSelected:0===t||c.includes(e.id),isEditable:n,isDisabled:0===t&&n,onStepChange:y})]},e.id)})}),(0,o.Y)(S,{}),n?(0,o.Y)(h.S,{css:M.buttonContainer,row:!0,justify:"end",gap:6,children:(0,o.Y)(k.$n,{"aria-label":"Approve plan & start",iconLeft:(0,o.Y)(F.A,{}),text:p<=N.START_BUILDING?"":"Approve plan & start",colorway:"blurple",onClick:function(){return w()}})}):null]})}function H(e){var n=e.editable;return(0,o.Y)(o.FK,{children:(0,o.Y)(f.EY,{color:"dimmer",children:n?"Plan is currently empty":"No plan generated yet"})})}var z=(0,C.x)({step:[x.wp.flex.column,x.wp.colWithGap(6),x.wp.align.center,x.wp.align.stretch],iconWrapper:[x.wp.display.flex,x.wp.align.center,x.wp.justify.center,{alignSelf:"stretch"}],checkboxWrapper:[x.wp.pt(2),x.wp.display.flex,{alignSelf:"baseline"}],stepText:[x.wp.flex.growAndShrink(1)],stepCheckbox:[{'input[type="checkbox"]:checked':{backgroundColor:A.LU.blurpleDimmer,borderColor:A.LU.blurpleDefault},'& input[type="checkbox"]:disabled':{backgroundColor:"unset",borderColor:A.LU.interactiveBorder}}],integrationPill:[x.wp.display.inlineFlex,x.wp.borderRadius(4)],infoIcon:[x.wp.ml(4),x.wp.color.foregroundDimmer],integrationsContainer:[x.wp.pt(4),x.wp.flex.wrap,x.wp.width("fit-content"),x.wp.rowWithGap(4),x.wp.align.center]});function W(e){var n=e.step,t=[],r=!0,i=!1,a=void 0;try{for(var l,s=n.blueprintData[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value;""!==c.displayName.trim()&&t.push((0,o.Y)(I.m_,{tooltip:"The Agent will use Replit's support for ".concat(c.displayName,"."),children:(0,o.Y)(R.a,{css:z.integrationPill,text:c.displayName,colorway:"blurple"})},c.name))}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return 0===t.length?null:(0,o.FD)(h.S,{css:z.integrationsContainer,children:[t,(0,o.Y)(D.K0,{css:z.infoIcon,alt:"Agent will build with these integrations",children:(0,o.Y)(L.A,{})})]})}function G(e){var n=e.step,t=e.stepSelected,r=e.isEditable,i=e.isDisabled,s=e.onStepChange;return(0,o.Y)(a.Fragment,{children:(0,o.Y)(h.S,{css:z.step,children:(0,o.FD)(h.S,{row:!0,gap:8,align:"center",children:[r?(0,o.Y)(h.S,{css:z.checkboxWrapper,children:(0,o.Y)(_.S,{id:n.id,checked:t,disabled:i,onChange:function(){return s(n.id)},css:z.stepCheckbox,name:"step-checkbox"})}):(0,o.Y)(h.S,{css:z.iconWrapper,children:(0,o.Y)(V,{status:n.status?n.status:l.jhd.STEP_UNKNOWN})}),(0,o.FD)(E.J,{htmlFor:n.id,css:z.stepText,color:t?"default":"dimmer",variant:"text",children:[n.name,(0,o.Y)(W,{step:n})]})]})})})}function V(e){switch(e.status){case l.jhd.STEP_IN_PROGRESS:return(0,o.Y)(U.A,{color:A.LU.blurpleStronger,size:e.size});case l.jhd.STEP_COMPLETE:return(0,o.Y)(F.A,{color:A.LU.accentPositiveStronger,size:e.size});case l.jhd.STEP_FAILED:return(0,o.Y)(P.A,{color:A.LU.accentNegativeStronger,size:e.size});default:return(0,o.Y)(T.A,{color:A.LU.foregroundDimmer,size:e.size})}}},49058:(e,n,t)=>{"use strict";t.d(n,{l:()=>l});var r=t(12584),i=t(41114),o=t(72188);function a(){var e=(0,r._)(["\n  fragment BulkDeleteConfirmationModalRepl on Repl {\n    id\n    iconUrl\n    title\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        ...BuildStatusBadgeHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.J1)(a(),o.F)},49125:(e,n,t)=>{"use strict";t.d(n,{P:()=>H});var r=t(12694),i=t(1889),o=t(21462),a=t(17844),l=t(12584),s=t(41114),c=t(86997),u=t(51066);function d(){var e=(0,l._)(["\n  fragment AgentSessionErrorUsageInterval on UsageInterval {\n    endDate\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,l._)(["\n  query AgentSessionError($orgId: String) {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          ...AgentSessionErrorUsageInterval\n        }\n        ... on Error {\n          message\n        }\n      }\n      usageBasedBillingAlerts {\n        ...EditUsageBasedBillingAlertsFormInitialConfig\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          name\n          usageInterval {\n            ... on UsageInterval {\n              ...AgentSessionErrorUsageInterval\n            }\n            ... on Error {\n              message\n            }\n          }\n          usageBasedBillingAlerts {\n            ...EditUsageBasedBillingAlertsFormInitialConfig\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}var f={},h=(0,s.J1)(d()),m=(0,s.J1)(p(),h,u.B9),g=t(72004),v=t(47606),w=t(16907),y=t(97779),b=t(48082),S=t(32771),Y=t(98089),A=t(6680),C=t(61234),x=t(43974),k=t(93682),_=t(4930),D=t(2527),E=t(40043),R=t(35869),I=t(44144),F=t(74406),T=t(30094),P=(0,C.x)({root:[x.wp.position.relative,x.wp.p(8),x.wp.borderRadius(),x.wp.border({color:A.LU.outlineDimmest}),x.wp.colWithGap(4),{containerType:"inline-size"}]});function L(e){return(0,i.FD)(R.S,{row:!0,gap:6,align:"center",children:[(0,i.Y)(Y.l,{size:16}),(0,i.Y)(E.EY,{variant:"subheadDefault",children:e.children})]})}function U(e){return(0,i.FD)(D.ui,{elevated:!0,css:P.root,children:[(0,i.Y)(L,{children:"You’ve hit your usage budget"}),(0,i.FD)(E.EY,{"data-chromatic":"ignore",children:["Increase your usage budget to continue using Agent now. Otherwise, your usage will reset"," ",e.creditsResetDate?(0,i.FD)(i.FK,{children:["on ",(0,S.A)(e.creditsResetDate,"MMM do, HH:mm aaa")," "]}):null,"when the next billing period begins."]}),(0,i.Y)(k.$n,{iconLeft:(0,i.Y)(T.A,{}),text:"Increase usage budget",colorway:"primary",onClick:e.onIncreaseBudget})]})}function N(e){return(0,i.FD)(D.ui,{css:P.root,elevated:!0,children:[(0,i.Y)(L,{children:"Add a billing method to continue using Agent"}),(0,i.Y)(E.EY,{children:"You’ve used all your monthly credits—you’ll need to to add a billing method to pay for additional Agent usage."}),(0,i.Y)(k.$n,{iconLeft:(0,i.Y)(F.A,{}),text:"Add billing method",colorway:"primary",onClick:e.onAddBillingMethod})]})}function O(){return(0,i.FD)(D.ui,{css:P.root,elevated:!0,children:[(0,i.Y)(L,{children:"Your subscription is not active anymore"}),(0,i.Y)(E.EY,{children:"Your subscription has expired or been canceled. To continue using Agent, make sure your subscription is active."}),(0,i.Y)(_.v,{href:"/pricing",iconRight:(0,i.Y)(I.A,{}),text:"See pricing",colorway:"primary"})]})}function M(e){var n=e.error;return(0,i.FD)(D.ui,{css:P.root,elevated:!0,children:[(0,i.Y)(L,{children:"Dev only error"}),(0,i.FD)(E.EY,{children:[n.type," - ",n.message]})]})}var B=t(44885);function H(e){var n=(0,w.A)(),t=(0,v.R)(n),l=t.hasError,s=t.orgId,u=(S=(0,a._)({},f,{variables:{orgId:s},skip:void 0===s||l}),c.I(m,S)).data;Y=s?(null==u?void 0:null===(A=u.currentUser)||void 0===A?void 0:A.org.__typename)==="Org"&&"UsageBasedBillingAlertsConfig"===u.currentUser.org.usageBasedBillingAlerts.__typename?u.currentUser.org.usageBasedBillingAlerts:void 0:(null==u?void 0:null===(C=u.currentUser)||void 0===C?void 0:C.usageBasedBillingAlerts.__typename)==="UsageBasedBillingAlertsConfig"?u.currentUser.usageBasedBillingAlerts:void 0;var d=(0,r._)((0,o.useState)(null),2),p=d[0],h=d[1];switch(e.error.type){case g.fqQ.AI_QUOTA_INSUFFICIENT_BUDGET:var S,Y,A,C,x,k,_=null==u?void 0:u.currentUser,D=(null==_?void 0:_.org.__typename)==="Org"?_.org:void 0;return(null==D?void 0:D.usageInterval.__typename)==="UsageInterval"?k=new Date(D.usageInterval.endDate):(null==_?void 0:null===(x=_.usageInterval)||void 0===x?void 0:x.__typename)==="UsageInterval"&&(k=new Date(_.usageInterval.endDate)),(0,i.FD)(i.FK,{children:[(0,i.Y)(U,{creditsResetDate:k,onIncreaseBudget:function(){return h(g.fqQ.AI_QUOTA_INSUFFICIENT_BUDGET)}}),(0,i.Y)(B.a,{isOpen:p===g.fqQ.AI_QUOTA_INSUFFICIENT_BUDGET,onRequestClose:function(){return h(null)},children:(0,i.Y)(b.j,{org:D,initialSettings:Y,onDone:function(){return window.location.reload()}})})]});case g.fqQ.AI_QUOTA_REQUIRES_PAYMENT_METHOD:return(0,i.FD)(i.FK,{children:[(0,i.Y)(N,{onAddBillingMethod:function(){h(g.fqQ.AI_QUOTA_REQUIRES_PAYMENT_METHOD)}}),(0,i.Y)(B.a,{isOpen:p===g.fqQ.AI_QUOTA_REQUIRES_PAYMENT_METHOD,onRequestClose:function(){return h(null)},children:(0,i.FD)(R.S,{gap:16,children:[(0,i.Y)(E.Y9,{variant:"headerDefault",level:1,children:"Manage Payment"}),(0,i.Y)(y.n,{})]})})]});case g.fqQ.AI_QUOTA_REQUIRES_ACTIVE_SUBSCRIPTION:return(0,i.Y)(O,{});default:return(0,i.Y)(M,{error:e.error})}}},49295:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(17844),i=t(93629),o=t(17459),a=t(1889),l=t(17599),s=t(43974),c=t(35869),u=[s.wp.width("100%"),s.wp.p(8)],d=[s.wp.py(32),s.wp.minHeight("100%"),s.wp.center],p=function(e){var n=e.children,t=e.centered,s=e.maxWidth,p=(0,o._)(e,["children","centered","maxWidth"]),f=[u,t&&d,s&&l.R1.maxWidth].filter(Boolean);return(0,a.Y)(c.S,(0,i._)((0,r._)({},p),{css:f,children:n}))}},49306:e=>{e.exports={root:"Chat_root__NyF_v",attachmentsWrapper:"Chat_attachmentsWrapper__9qzcY"}},49547:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(1889),i=t(21462),o=t(68383),a=t(35869);function l(e){var n=e.modules,t=(0,i.useMemo)(function(){return n.filter(function(e){return"replit"!==e.id})},[n]);return(0,r.Y)(a.S,{gap:8,children:t.map(function(e){return(0,r.Y)(o.A,{module:e,defaultExpanded:!0,isInstalled:!0},e.id)})})}},49905:(e,n,t)=>{"use strict";t.d(n,{yN:()=>T});var r=t(12694),i=t(1889),o=t(21462),a=t(52097),l=t(69543),s=t(77167),c=t(83353),u=t(33698),d=t(61234),p=t(43974),f=t(93682),h=t(26705),m=t(40043),g=t(35869),v=t(28365),w=t(13278),y=t(17844),b=t(93629),S=t(84296);function Y(e){return(0,i.Y)(S.Ay,(0,b._)((0,y._)({},e),{children:(0,i.Y)("path",{fillRule:"evenodd",d:"M12 1.25a10.7 10.7 0 0 1 5.843 1.725l-1.089 1.089a9.19 9.19 0 0 0-3.05-1.157 16.05 16.05 0 0 1 1.556 2.651l-1.137 1.137A14.546 14.546 0 0 0 12 3.15a14.55 14.55 0 0 0-3.214 8.101h.782l-2.221 2.221c-.027-.24-.049-.48-.065-.721H2.78a9.194 9.194 0 0 0 1.284 4.004l-1.089 1.089A10.7 10.7 0 0 1 1.25 12C1.25 6.063 6.063 1.25 12 1.25Zm7.936 5.996 1.089-1.089A10.7 10.7 0 0 1 22.75 12c0 5.937-4.813 10.75-10.75 10.75a10.7 10.7 0 0 1-5.843-1.725l1.089-1.089a9.191 9.191 0 0 0 3.05 1.157 16.05 16.05 0 0 1-1.556-2.651l1.137-1.137A14.548 14.548 0 0 0 12 20.85a14.55 14.55 0 0 0 3.214-8.101h-.782l2.221-2.221c.027.24.049.48.065.721h4.502a9.193 9.193 0 0 0-1.284-4.004ZM2.78 11.25h4.502a16.05 16.05 0 0 1 3.014-8.343A9.255 9.255 0 0 0 2.78 11.25Zm10.924 9.843a16.051 16.051 0 0 0 3.014-8.343h4.502a9.255 9.255 0 0 1-7.516 8.343ZM22.53 2.53a.75.75 0 0 0-1.06-1.06l-20 20a.75.75 0 1 0 1.06 1.06l20-20Z",clipRule:"evenodd"})}))}var A=t(31412),C=(0,d.x)({wrapper:[p.wp.py(6),p.wp.flex.row,p.wp.align.center,p.wp.backgroundColor.backgroundHigher],wrapperWarning:[p.wp.py(6),p.wp.flex.row,p.wp.align.center,p.wp.backgroundColor.orangeDimmest],body:[p.wp.flex.growAndShrink(1)],firstLine:[p.wp.px(6),p.wp.rowWithGap(2),p.wp.align.center,p.wp.flex.wrap,p.wp.maxWidth("100%"),p.wp.overflow("hidden")],secondLine:[p.wp.px(6),p.wp.rowWithGap(2),p.wp.align.center,p.wp.flex.wrap,p.wp.maxWidth("100%"),p.wp.overflow("hidden"),p.wp.color.foregroundDimmest],secondLineWarning:[p.wp.px(6),p.wp.rowWithGap(2),p.wp.align.center,p.wp.flex.wrap,p.wp.maxWidth("100%"),p.wp.overflow("hidden"),p.wp.color.orangeStrongest],buttons:[p.wp.pr(6)],verticalDivider:[p.wp.ml(6),p.wp.mr(6),p.wp.height("1em"),p.wp.width(1),p.wp.backgroundColor.foregroundDefault]});function x(e){var n=e.openNetworkingTool,t=e.onClose,r=e.onDontExposePort,o=e.onDoExposePort,a=e.firstLine,l=e.secondLine,s=e.renderSecondLine,c=e.renderDontExposeButton,u=e.renderDoExposeButton,d=e.isWarning,p=void 0!==d&&d;return(0,i.FD)(g.S,{css:p?C.wrapperWarning:C.wrapper,children:[(0,i.FD)(g.S,{css:C.body,children:[(0,i.Y)(g.S,{css:C.firstLine,children:a}),s?(0,i.Y)(g.S,{css:p?C.secondLineWarning:C.secondLine,children:l}):null]}),(0,i.FD)(g.S,{css:C.buttons,row:!0,children:[(0,i.Y)(h.K0,{alt:"Networking tool",onClick:n,children:(0,i.Y)(A.A,{})}),void 0!==c&&c?(0,i.Y)(h.K0,{alt:"Don't expose this port to the web",onClick:r,children:(0,i.Y)(Y,{})}):null,void 0!==u&&u?(0,i.Y)(h.K0,{alt:"Expose this port to the web",onClick:o,children:(0,i.Y)(w.A,{})}):null,(0,i.Y)(h.K0,{alt:"Close",onClick:t,children:(0,i.Y)(v.A,{})})]})]})}function k(e){var n=e.configuration,t=e.openWebview,r=e.openNetworkingTool,o=e.onClose,a=e.onDontExposePort,l=e.renderSecondLine,c=(0,s.r$)(n.externalPort)?"{...}.replit.dev":"{...}.replit.dev:".concat(n.externalPort);return(0,i.Y)(x,{openNetworkingTool:r,onClose:o,firstLine:(0,i.FD)(i.FK,{children:[(0,i.FD)(m.EY,{children:["Port :",n.localPort," opened on"]}),(0,i.Y)(f.$n,{variant:"underlined",text:c,onClick:t})]}),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"You can manage this config in the"}),(0,i.Y)(f.$n,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:l,renderDontExposeButton:!0,onDontExposePort:a})}function _(e){var n=e.configuration,t=e.openNetworkingTool,r=e.onClose,o=e.renderSecondLine,a=e.onDoExposePort;return(0,i.Y)(x,{openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but not exposed to the web."),secondLine:(0,i.Y)(f.$n,{variant:"underlined",text:"Expose this port?",onClick:t}),renderSecondLine:o,renderDoExposeButton:!0,onDoExposePort:a})}function D(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.Y)(x,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but all available external ports are reserved."),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"Remove an external port in"}),(0,i.Y)(f.$n,{variant:"underlined",text:"port configuration",onClick:n}),(0,i.Y)(m.EY,{children:"to open a new port."})]}),renderSecondLine:o})}function E(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.Y)(x,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but is not configured properly."),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"You can fix this in the"}),(0,i.Y)(f.$n,{variant:"underlined",text:"Networking tool",onClick:n})]}),renderSecondLine:o})}function R(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.Y)(x,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but has missing configuration."),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"You can fix this in the"}),(0,i.Y)(f.$n,{variant:"underlined",text:"Networking tool",onClick:n})]}),renderSecondLine:o})}function I(e){var n=e.configuration,t=e.openWebview,r=e.openNetworkingTool,o=e.onClose,l=e.onDontExposePort,s=e.onDoExposePort,u=e.renderSecondLine,d=n.type;switch(d){case c.gH.FORWARDED:return(0,i.Y)(k,{configuration:n,openWebview:t,openNetworkingTool:r,onClose:o,renderSecondLine:u,onDontExposePort:l});case c.gH.INTERNAL_ONLY:return(0,i.Y)(_,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:u,onDoExposePort:s});case c.gH.NO_MORE_EXTERNAL_PORTS_AVAILABLE:return(0,i.Y)(D,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:u});case c.gH.MISCONFIGURED:return(0,i.Y)(E,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:u});case c.gH.CONFIG_MISSING:return(0,i.Y)(R,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:u});default:(0,a.A)(d)}}function F(e){var n=e.configurations,t=e.openWebview,r=e.openNetworkingTool,o=e.onClose,a=e.renderSecondLine,s=n.filter(function(e){return e.type===c.gH.FORWARDED}),u=n.filter(function(e){return e.type!==c.gH.FORWARDED});return(0,i.Y)(x,{isWarning:!1,openNetworkingTool:r,onClose:o,firstLine:(0,i.FD)(i.FK,{children:[s.length>0?(0,i.FD)(i.FK,{children:[(0,i.FD)(m.EY,{children:[s.length," ",(0,l.A)("port",s.length)," ","opened on"]}),(0,i.Y)(f.$n,{variant:"underlined",text:"{...}.replit.dev",onClick:t})]}):null,s.length>0&&u.length>0?(0,i.Y)(g.S,{css:C.verticalDivider}):null,u.length>0?(0,i.FD)(m.EY,{children:[u.length," ",(0,l.A)("port",u.length)," ","did not open"]}):null]}),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"You can manage this config in the"}),(0,i.Y)(f.$n,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:a})}function T(e){var n=e.configurations,t=e.openWebview,a=e.openNetworkingTool,l=e.onClose,s=e.onDontExposePort,c=e.onDoExposePort,d=(0,u.Z)("port-nudges"),p=(0,r._)((0,o.useState)(!1),2),f=p[0],h=p[1],m=!d.isDone,g=(0,r._)((0,o.useState)(!0),2),v=g[0],w=g[1];function y(){w(!1),null==l||l()}return((0,o.useEffect)(function(){0===n.length&&w(!0)},[n]),(0,o.useEffect)(function(){if(!d.isDone){if(n.length>0&&!f){h(!0);return}0===n.length&&f&&d.setAsDone()}},[n,d,f]),v&&0!==n.length)?1===n.length?(0,i.Y)(I,{configuration:n[0],openNetworkingTool:a,openWebview:t,renderSecondLine:m,onClose:y,onDontExposePort:s,onDoExposePort:c}):(0,i.Y)(F,{configurations:n,openNetworkingTool:a,openWebview:t,renderSecondLine:m,onClose:y}):null}},50010:(e,n,t)=>{"use strict";t.d(n,{DO:()=>v,D_:()=>p,Md:()=>u,Wt:()=>f,h0:()=>d,hK:()=>l,i_:()=>s,o2:()=>h,sC:()=>y,sh:()=>m,tH:()=>g,uu:()=>w});var r=t(44370),i=t(31195),o=t(45771),a=t(6680),l=[1,2,3,4,5,6,7,8,9,10],s=l.length-1,c=1/(2*s),u=(0,r.eU)(2),d=(0,r.eU)(function(e){return l[e(u)]}),p=(0,r.eU)(function(e){return(e(i.Je)*e(d)).toFixed(6)}),f=(0,r.eU)(function(e){return e(i.GS)*e(d)}),h=(0,r.eU)(0),m=(0,r.eU)(function(e){var n=0/s,t=l.length-1/s,r=0,i=0;return e(h)<n&&(r=(n-e(h))/c,i=n-c),e(h)>t&&(r=(e(h)-t)/c,i=t+c),{overage:r,point:i}}),g=function(e){return e.None="0ms",e.Normal="120ms",e}({}),v=["ArrowLeft","ArrowRight","Home","End"],w=(0,o.AH)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),y=(0,o.AH)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:a.LU.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(a.LU.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}})},50172:(e,n,t)=>{"use strict";t.d(n,{Wx:()=>y,cN:()=>v,fw:()=>b});var r=t(17844),i=t(93629),o=t(17459),a=t(1889),l=t(49295),s=t(61234),c=t(43974),u=t(26705),d=t(3910),p=t(35869),f=t(4989),h=t(56185),m=t(32633),g=[c.wp.p(8),c.wp.center],v=function(){return(0,a.Y)(p.S,{css:g,children:(0,a.Y)(h.A,{size:24})})},w=(0,s.x)({error:[c.wp.flex.grow(0),c.wp.mt(0)]}),y=function(e){var n=e.text,t=(0,o._)(e,["text"]);return(0,a.Y)(l.A,(0,i._)((0,r._)({css:w.error},t),{children:(0,a.Y)(d.N,{colorway:"warning",icon:(0,a.Y)(m.A,{}),text:n})}))},b=function(e){var n=e.onBack;return(0,a.Y)(p.S,{row:!0,align:"center",children:(0,a.Y)(u.K0,{alt:"Back",tooltipBehavior:"hidden",onClick:n,children:(0,a.Y)(f.A,{})})})}},50192:(e,n,t)=>{"use strict";t.d(n,{p:()=>A});var r=t(83846),i=t(17844),o=t(1889),a=t(66892),l=t(6680),s=t(61234),c=t(22498),u=t(43974),d=t(93682),p=t(26705),f=t(40043),h=t(35869),m=t(6761),g=t(13287),v=t(1018),w=t(28365),y=(0,c.v)(["padding","backgroundColor","borderColor"]),b=y.cssVars,S=y.styleTokens,Y=(0,s.x)({root:[u.wp.position.relative,u.wp.border({width:1,style:"solid",color:S.borderColor}),u.wp.pb(12),u.wp.borderRadius(),u.wp.shadow(2),u.wp.flex.column,{padding:S.padding,backgroundColor:S.backgroundColor,gap:S.padding}],closeIconButton:[u.wp.position.absolute,u.wp.top(S.padding),u.wp.right(S.padding)],dot:[u.wp.borderRadius("full"),u.wp.width(l.LU.space8),u.wp.height(l.LU.space8)]});function A(e){var n,t=e.title,a=e.subtitle,s=e.icon,c=e.content,u=e.containerStyle,y=e.colorway,S=void 0===y?"primary":y,A=e.totalSteps,x=void 0===A?1:A,k=e.currentStepIndex,_=void 0===k?0:k,D=e.onDismiss,E=e.onCurrentStepChange,R=e.cypressCloseData,I=e.compact,F=e.hideCloseButton,T=void 0!==F&&F,P=e.hideNavigation,L=e.doneText,U=!1===S?void 0:S,N=_>=x-1;return(0,o.FD)(h.S,{css:Y.root,style:(0,i._)((n={},(0,r._)(n,b.padding,void 0===I||I?l.LU.space8:l.LU.space16),(0,r._)(n,b.backgroundColor,U?l.ky[U].dimmest:l.LU.backgroundDefault),(0,r._)(n,b.borderColor,U?l.ky[U].dimmer:l.LU.backgroundHighest),(0,r._)(n,"paddingRight",t||T?void 0:l.LU.space32),n),u),children:[T?null:(0,o.Y)(p.K0,{alt:"Close",colorway:U,css:Y.closeIconButton,onClick:D,dataCy:R,children:(0,o.Y)(w.A,{})}),t?(0,o.FD)(h.S,{row:!0,gap:8,align:"center",children:[s?(0,o.Y)(s,{}):null,(0,o.FD)(h.S,{row:!0,gap:8,align:"end",children:[(0,o.Y)(f.EY,{variant:"subheadDefault",multiline:!1,children:t}),a?(0,o.Y)(f.EY,{variant:"text",color:"dimmest",multiline:!1,css:{transform:"translateY(1.5px)"},children:a}):null]})]}):null,(0,o.Y)(h.S,{children:"function"==typeof c?(0,o.Y)(c,{}):(0,o.Y)(f.EY,{children:c})}),x>1&&E&&!(void 0!==P&&P)?(0,o.FD)(h.S,{row:!0,align:"center",justify:"space-between",children:[(0,o.Y)(d.$n,{css:{visibility:_<=0?"hidden":void 0},colorway:U,text:"Back",iconLeft:(0,o.Y)(g.A,{}),onClick:function(){return E(_-1)}}),(0,o.Y)(C,{colorway:U,total:x,current:_}),(0,o.Y)(d.$n,{"data-autofocus":!0,colorway:N?"primary":U,text:N?void 0===L?"Done":L:"Next",iconLeft:N?(0,o.Y)(m.A,{}):(0,o.Y)(v.A,{}),onClick:function(){return N?D():E(_+1)}})]}):null]})}function C(e){var n=e.total,t=e.current,r=e.colorway;return(0,o.FD)(h.S,{children:[(0,o.Y)(a.s,{children:(0,o.Y)("progress",{value:t+1,max:n,"aria-label":"Step"})}),(0,o.Y)(h.S,{"aria-hidden":!0,row:!0,gap:8,children:Array(n).fill(0).map(function(e,n){return(0,o.Y)(h.S,{style:{backgroundColor:n===t?r?l.ky[r].stronger:l.LU.foregroundDimmest:r?l.ky[r].dimmer:l.LU.outlineDimmest},css:Y.dot},n)})})]})}},50462:(e,n,t)=>{"use strict";t.d(n,{KY:()=>l});var r=t(86105),i=t(33338),o=t(13617),a=[{id:"true",editorPreferencesValue:!0,title:"true"},{id:"false",editorPreferencesValue:!1,title:"false"}],l={layout:{id:"layout",name:"Default Layout",description:"Change the layout of the editor.",type:"select",editorPreferencesKey:"isLayoutStacked",options:[{id:"side-by-side",editorPreferencesValue:!1,title:"side-by-side"},{id:"stacked",editorPreferencesValue:!0,title:"stacked"}]},fontSize:{id:"fontSize",name:"Font Size",description:"Change the font size of the editor.",type:"select",editorPreferencesKey:"fontSize",options:[{id:"10",editorPreferencesValue:10,title:"tiny"},{id:"12",editorPreferencesValue:12,title:"small"},{id:"14",editorPreferencesValue:14,title:"normal"},{id:"18",editorPreferencesValue:18,title:"large"},{id:"24",editorPreferencesValue:24,title:"huge"}]},wrapping:{id:"wrapping",name:"Wrapping",description:"Change whether the editor wraps lines or not.",type:"select",editorPreferencesKey:"wrapping",options:[{id:"none",editorPreferencesValue:!1,title:"none"},{id:"soft",editorPreferencesValue:!0,title:"soft wrap"}]},minimap:{id:"minimap",name:"Minimap",description:"Change the minimap display.",type:"select",editorPreferencesKey:"minimapDisplay",options:[{id:"none",editorPreferencesValue:"none",title:"none"},{id:"blocks",editorPreferencesValue:"blocks",title:"blocks"},{id:"characters",editorPreferencesValue:"characters",title:"characters"}]},indentationDetection:{id:"indentDetection",name:"Indentation Detection",description:"Automatically detect indentation settings when opening a file.",type:"boolean",editorPreferencesKey:"indentDetection",options:a},indentFormatPastes:{id:"indentFormatPastes",name:"Format Pasted Text Indentation",description:"Automatically format the indentation of pasted text.",type:"boolean",editorPreferencesKey:"indentFormatPastes",options:a},indentIsSpaces:{id:"indentationCharacter",name:"Indentation Character",description:"The character used for indenting lines.",type:"select",editorPreferencesKey:"indentIsSpaces",options:[{id:"spaces",editorPreferencesValue:!0,title:"spaces"},{id:"tabs",editorPreferencesValue:!1,title:"tabs"}]},keyboardHandler:{id:"keyboardHandler",name:"Keybinds",description:"Use another keyboard mapping",type:"select",editorPreferencesKey:"keyboardHandler",options:[{id:"default",editorPreferencesValue:null,title:"default"},{id:"emacs",editorPreferencesValue:"emacs",title:"emacs"},{id:"vim",editorPreferencesValue:"vim",title:"vim"}]},showFileTreeGitStatus:{id:"showFileTreeGitStatus",name:"Filetree Git Status",description:"Show the Git status of files in the file tree.",type:"boolean",editorPreferencesKey:"showFileTreeGitStatus",options:a},codeIntelligence:{id:"codeIntelligence",name:"Code Intelligence",description:"Code intelligence gives you autocomplete, as well as hints as you type.",type:"boolean",editorPreferencesKey:"codeIntelligence",options:a},semanticTokens:{id:"semanticTokens",name:"Semantic Tokens",description:"Enables enhanced syntax highlighting from language servers.",type:"boolean",editorPreferencesKey:"semanticTokens",options:a},shellBellAudio:{id:"shellBellAudio",name:"Shell Bell Audible Indicator",description:"Play sound in the Shell on issues like a failed tab completion.",type:"boolean",editorPreferencesKey:"shellBellAudio",options:a},accessibleTerminal:{id:"accessibleTerminal",name:"Accessible Terminal Output",description:"Enable this setting to use a screen reader. Warning: this can negatively affect performance.",type:"boolean",editorPreferencesKey:"accessibleTerminal",options:a},webviewAutoOpenOnPortOpened:{id:"webviewAutoOpenOnPortOpened",name:"Automatic Webview",description:"Open a webview automatically when a port is open.",type:"boolean",editorPreferencesKey:"webviewAutoOpenOnPortOpened",options:a},forwardPortsAutomatically:{id:"forwardPortsAutomatically",name:"Forward Opened Ports Automatically",description:"Automatically configure detected newly opened ports.",type:"select",editorPreferencesKey:"forwardPortsAutomatically",options:[{id:"none",editorPreferencesValue:"none",title:"never"},{id:"only-global",editorPreferencesValue:"only-global",title:"all ports except localhost"},{id:"all",editorPreferencesValue:"all",title:"all ports"}]},chatAudioNotification:{id:"chatAudioNotification",name:"Chat Audio Notification",description:"Play a sound when you receive a new chat message.",type:"boolean",editorPreferencesKey:"chatAudioNotification",options:a},agentAudioNotification:{id:"agentAudioNotification",name:"Agent Audio Notification",description:"Play a sound when the Agent needs your response.",type:"boolean",editorPreferencesKey:"agentAudioNotification",options:a},agentPushNotification:{id:"agentPushNotification",name:"Agent Push Notification",description:"Send a push notification when the Agent needs your response.",type:"boolean",editorPreferencesKey:"agentPushNotification",options:a},assistantPushNotification:{id:"assistantPushNotification",name:"Assistant Push Notification",description:"Send a push notification when the Assistant needs your response.",type:"boolean",editorPreferencesKey:"assistantPushNotification",options:a},multiselectModifierKey:{id:"multiselectModifierKey",name:"Multiselect Modifier Key",description:"Modifier key for selecting multiple items in the filetree.",type:"select",editorPreferencesKey:"multiselectModifierKey",options:[{id:"cmdOrCtrlKey",editorPreferencesValue:"cmdOrCtrlKey",title:"cmdOrCtrlKey"},{id:"altKey",editorPreferencesValue:"altKey",title:"altKey"}]},completeCodeEngine:{id:"completeCodeEngine",name:"AI Code Completion Engine",description:"The engine used for code completion.",type:"select",editorPreferencesKey:"completeCodeEngine",options:[{id:"default",editorPreferencesValue:null,title:"default"}].concat((0,r._)(Array.from(i.Qu).map(function(e){return{id:e,editorPreferencesValue:e,title:e}})))},codeSuggestion:{id:"codeSuggestion",name:"AI Code Completion",description:'Code completion provides inline "ghost text" suggestions while you code.',type:"boolean",editorPreferencesKey:"codeSuggestion",options:a},assistantAutoApplyChanges:{id:"assistantAutoApplyChanges",name:"Auto Apply Changes",description:"Automatically apply changes made by the AI assistant to your code.",type:"boolean",editorPreferencesKey:"assistantAutoApplyChanges",options:a},assistantAutoRestartRepl:{id:"assistantAutoRestartRepl",name:"Auto Restart Workflows",description:"Automatically restart workflows after applying code changes.",type:"boolean",editorPreferencesKey:"assistantAutoRestartRepl",options:a},assistantAdvancedModelOverride:{id:"assistantAdvancedModelOverride",name:"Advanced Model Override",description:"Override the default advanced model.",type:"select",editorPreferencesKey:"assistantAdvancedModelOverride",options:[{id:"default",editorPreferencesValue:null,title:"default"}].concat((0,r._)(Array.from(o._W).map(function(e){return{id:e.qualified,editorPreferencesValue:e.qualified,title:e.readable}})))}}},50525:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(21462),i=t(58270);function o(){var e=(0,i.yB)();(0,r.useEffect)(function(){},[e])}},50633:(e,n,t)=>{"use strict";t.d(n,{a:()=>l});var r=t(1889),i=t(61234),o=t(43974),a=t(18063),l=function(e){var n=e.className,t=e.text,i=e.iconLeft,o=e.onClick;return(0,r.Y)(a.a,{onClick:o,className:n,colorway:"yellow",css:s.self,text:t,iconLeft:i})},s=(0,i.x)({self:[o.wp.borderRadius(4),{padding:"4px 3px"}]})},50781:(e,n,t)=>{"use strict";t.d(n,{F0:()=>ek,r9:()=>eY,o0:()=>eA,MC:()=>eS,B6:()=>ex});var r=t(29935),i=t(86105),o=t(82643),a=t(1889),l=t(21462),s=t(67201),c=t(26496),u=t(49069),d=t(45773),p=t(18435),f=t(77703),h=t(16896),m=t(89668),g=t(91873);function v(e){var n=e.selection,t=e.doc,r=n.ranges.map(function(e){return e.extend(t.lineAt(e.from).from,t.lineAt(e.to).to)});return u.OF.create(r)}var w=t(58364),y=t(6636),b=t(76574),S=t(29016),Y=t(68753),A=t(64786),C=t(68321),x=t(99672),k=t(80865),_=t(2904),D=t(40208),E=t(63892),R=t(93501),I=t(18988),F=t(67337),T=t(68042),P=t(18754),L=t(72004),U=t(67668);function N(e,n,t){var r=e.selection.main,i=e.sliceDoc(r.from,r.to),o=(0,U.an)(n);return{code:i,filePath:n,fileVersion:t,fileContent:e.doc.toString(),range:{indexFrom:r.from,indexTo:r.to,lineFrom:e.doc.lineAt(r.from).number,lineTo:e.doc.lineAt(r.to).number},language:o,referenceType:L.fDX.INLINE}}var O=t(47207),M=t(48326),B=t(23718),H=t(18367),z=t(72679),W=t(33915),G=t(80703),V=t(95758),j=t(51133),Z=t(6680),q=t(35707),K=t(17844),$=t(93629),J=t(84296);function Q(e){return(0,a.Y)(J.Ay,(0,$._)((0,K._)({},e),{children:(0,a.Y)("path",{fillRule:"evenodd",d:"M7 3.75A1.25 1.25 0 0 0 5.75 5v14.543l5.814-4.153a.75.75 0 0 1 .872 0l5.814 4.153V5A1.25 1.25 0 0 0 17 3.75H7Zm-1.945-.695A2.75 2.75 0 0 1 7 2.25h10A2.75 2.75 0 0 1 19.75 5v16a.75.75 0 0 1-1.186.61L12 16.922 5.436 21.61A.75.75 0 0 1 4.25 21V5c0-.73.29-1.429.805-1.945Z",clipRule:"evenodd"})}))}var X=t(51732),ee=t(42795),en=t(27489),et=t(81879);function er(e){return(0,a.Y)(J.Ay,(0,$._)((0,K._)({},e),{children:(0,a.Y)("path",{fillRule:"evenodd",d:"M2.25 5A2.75 2.75 0 0 1 5 2.25h8A2.75 2.75 0 0 1 15.75 5v.293A.749.749 0 0 1 16 5.25c.822 0 1.56.361 2.062.93.428.485.688 1.123.688 1.82v.293A.749.749 0 0 1 19 8.25c.822 0 1.56.361 2.062.93.428.485.688 1.123.688 1.82v8A2.75 2.75 0 0 1 19 21.75h-8A2.75 2.75 0 0 1 8.25 19c0-.088.015-.172.043-.25H8A2.75 2.75 0 0 1 5.25 16c0-.088.015-.172.043-.25H5A2.75 2.75 0 0 1 2.25 13V5Zm4.457 10.75a.749.749 0 0 1 .043.25c0 .69.56 1.25 1.25 1.25h8c.69 0 1.25-.56 1.25-1.25V8A1.245 1.245 0 0 0 16 6.75a.749.749 0 0 1-.25-.043V13A2.75 2.75 0 0 1 13 15.75H6.707Zm3 3a.749.749 0 0 1 .043.25c0 .69.56 1.25 1.25 1.25h8c.69 0 1.25-.56 1.25-1.25v-8A1.245 1.245 0 0 0 19 9.75a.749.749 0 0 1-.25-.043V16A2.75 2.75 0 0 1 16 18.75H9.707ZM5 3.75c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h8c.69 0 1.25-.56 1.25-1.25V5c0-.69-.56-1.25-1.25-1.25H5Z",clipRule:"evenodd"})}))}var ei=t(85280);function eo(e){return(0,a.Y)(J.Ay,(0,$._)((0,K._)({},e),{children:(0,a.Y)("path",{fillRule:"evenodd",d:"M5.614 1.357a.75.75 0 0 1 1.03.257l8.872 14.788a3.25 3.25 0 1 1-1.286.772L5.357 2.386a.75.75 0 0 1 .257-1.03Zm12.772 0a.75.75 0 0 1 .257 1.029l-4.2 7a.75.75 0 1 1-1.286-.772l4.2-7a.75.75 0 0 1 1.029-.257Zm-7.5 12.5a.75.75 0 0 1 .257 1.029L9.77 17.174a3.25 3.25 0 1 1-1.286-.772l1.373-2.288a.75.75 0 0 1 1.029-.257ZM7.5 17.75a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5Zm9 0a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5Z",clipRule:"evenodd"})}))}var ea=t(48795),el=t(65558),es=t(6865),ec=t(88272),eu=t(63433),ed=t(54046),ep=t(25796),ef=t(42784),eh=t(79571),em=t(65087),eg=t(79812),ev=t(97783),ew=t(83861);function ey(e){var n=e.label,t=e.icon,r=e.run,i=e.keyboardShortcut,o=e.dataCy;return{match:B.G2,data:{type:"action",label:n,icon:t,run:r,keyboardShortcut:i,dataCy:o}}}function eb(e){var n=e.view,t=e.mainSelection,r=e.codeReference;n.dispatch({selection:{anchor:t.to},effects:[m.L.of({id:(0,s.A)(),codeReference:r,type:"ghostwriterKillswitch"}),d.Lz.scrollIntoView(t.to,{y:"center"})]})}function eS(e){var n=e.path,t=(0,F.A)().fs,r=(0,k._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,l.useCallback)(function(e,i){var o=e.state,a=o.doc,l=o.selection,c=o.lineBreak,p=a.lineAt(l.main.head);p.length&&e.dispatch({changes:{from:p.to,insert:c},selection:u.OF.cursor(p.to+1)});var f=t.getOTVersion(n),h=N(e.state,n,f);if((0,E.u4)(E.AZ.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:i}),r){eb({view:e,mainSelection:e.state.selection.main,codeReference:h});return}var g=e.state.selection.main.to;e.dispatch({selection:{anchor:g},effects:[m.L.of({id:(0,s.A)(),codeReference:h,type:"generateCode",source:i}),d.Lz.scrollIntoView(g,{y:"center"})]})},[n,t,r])}function eY(e){var n=e.path,t=(0,F.A)().fs,r=(0,k._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,l.useCallback)(function(e,i){e.dispatch({selection:v(e.state)});var o=t.getOTVersion(n),a=N(e.state,n,o);if(r){eb({view:e,mainSelection:e.state.selection.main,codeReference:a});return}(0,E.u4)(E.AZ.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"modify",source:i});var l=e.state.selection.main.to;e.dispatch({selection:{anchor:l},effects:[m.L.of({id:(0,s.A)(),type:"transformCode",codeReference:a,source:i}),d.Lz.scrollIntoView(l,{y:"center"})]})},[n,t,r])}function eA(e){var n=e.path,t=(0,F.A)().fs,r=(0,k._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,l.useCallback)(function(e,i){e.dispatch({selection:v(e.state)});var o,a,l,u,p=t.getOTVersion(n),f=N(e.state,n,p);(0,E.u4)(E.AZ.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"explain",source:i});var h=e.state.selection.main.to-e.state.selection.main.from>c.a;if(h){a=(o={view:e,mainSelection:e.state.selection.main,codeReference:f}).view,l=o.mainSelection,u=o.codeReference,a.dispatch({selection:{anchor:l.to},effects:[m.L.of({id:(0,s.A)(),codeReference:u,type:"codeLengthExceeded"}),d.Lz.scrollIntoView(l.to,{y:"center"})]});return}if(r||h){eb({view:e,mainSelection:e.state.selection.main,codeReference:f});return}var g=e.state.selection.main.to;e.dispatch({selection:{anchor:g},effects:[m.L.of({id:(0,s.A)(),codeReference:f,type:"explainCode",source:i}),d.Lz.scrollIntoView(g,{y:"center"})]})},[t,n,r])}var eC=function(){var e=(0,G.Jn)("editor.action.saveFile");return(0,l.useCallback)(function(n){var t=[];return t.push(ey({label:"Save file",icon:(0,a.Y)(eg.A,{}),keyboardShortcut:e,run:function(){(0,A.F)(n)}})),t},[e])};function ex(e){var n,t,s,u,d,m,v,A,x,E,F,P,L,U,N,B,K,$=e.path,J=e.view,eg=(n=eS({path:$}),t=eY({path:$}),s=eA({path:$}),u=(0,G.Jn)(M.G.id),(0,l.useCallback)(function(e){var r=[],i=!e.state.selection.main.empty;return n&&!i&&r.push(ey({label:"Generate with "+c.BP,icon:(0,a.Y)(ep.A,{color:Z.LU.tealStronger}),keyboardShortcut:u,run:function(){n(e,"action_menu")},dataCy:"context-menu-GenerateCode"})),i&&(r.push(ey({label:"Explain with "+c.BP,icon:(0,a.Y)(ed.A,{color:Z.LU.tealStronger}),dataCy:"context-menu-ExplainCode",run:function(){s(e,"action_menu")}})),r.push(ey({label:"Modify with "+c.BP,icon:(0,a.Y)(eu.A,{color:Z.LU.tealStronger}),keyboardShortcut:u,dataCy:"context-menu-TransformCode",run:function(){t(e,"action_menu")}}))),r},[n,t,s,u])),eb=(d=(0,G.Jn)("editor.action.startThread"),(0,l.useCallback)(function(e){var n=[];return n.push(ey({label:"Start thread",icon:(0,a.Y)(en.A,{}),keyboardShortcut:d,run:function(){(0,T.BR)(e)}})),n},[d])),ex=(0,l.useCallback)(function(e){var n=[ey({label:"Copy link to position",icon:(0,a.Y)(eh.A,{}),run:function(){var n=(0,C.Z3)(e.state.doc,e.state.selection.main.head),t=n.line,r=n.character,i=(0,j.Ax)({path:$,line:t+1,col:r});(0,_.default)(i)}}),ey({label:"Copy",icon:(0,a.Y)(ei.A,{}),keyboardShortcut:(0,V.FM)({cmdOrCtrl:!0,key:"c"}),run:function(){var n=(0,g.i)(e.state).text;(0,_.default)(n)}}),ey({label:"Cut",icon:(0,a.Y)(eo,{}),keyboardShortcut:(0,V.FM)({cmdOrCtrl:!0,key:"x"}),run:function(){var n=(0,g.i)(e.state),t=n.text,r=n.ranges;(0,_.default)(t),!e.state.readOnly&&e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})}})];return window.navigator.clipboard&&"readText"in window.navigator.clipboard&&n.push(ey({label:"Paste",icon:(0,a.Y)(et.A,{}),keyboardShortcut:(0,V.FM)({cmdOrCtrl:!0,key:"v"}),run:function(){return(0,r._)(function(){var n,t;return(0,o.YH)(this,function(r){switch(r.label){case 0:n="",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return n=r.sent(),[3,4];case 3:return t=r.sent(),D.vF.error("CodeMirror context menu paste failed",{message:t.message}),[2];case 4:return(0,Y.mJ)({filePath:$,view:e,clipboardText:n}),[2]}})})()}})),n},[$]),ek=(m=(0,R.A)($),v=(0,I.A)(m),A=(0,G.Jn)("editor.action.goToDefinition"),x=(0,G.Jn)("editor.action.goToTypeDefinition"),E=(0,G.Jn)("editor.action.goToImplementation"),F=(0,G.Jn)("editor.action.goToReferences"),P=(0,G.Jn)("editor.selection.allOccurrences"),L=(0,G.Jn)("editor.action.sourceActions"),U=(0,G.Jn)("editor.action.formatDocument"),N=(0,G.Jn)("editor.action.codeActions"),B=(0,G.Jn)("editor.action.renameSymbol"),(0,l.useCallback)(function(e){var n=[],t=v&&m.length;t&&v.isFindDefinitionSupported&&n.push(ey({label:"Go to definition",icon:(0,a.Y)(el.A,{}),dataCy:"context-menu-JumpToDefinition",run:function(n){(0,b.Fn)(e,n)},keyboardShortcut:A})),t&&v.isFindTypeDefinitionSupported&&n.push(ey({label:"Go to type definition",icon:(0,a.Y)(X.A,{}),run:function(){(0,b.fS)(e)},keyboardShortcut:x})),t&&v.isFindImplementationSupported&&n.push(ey({label:"Go to implementation",icon:(0,a.Y)(ew.A,{}),run:function(){(0,b.M9)(e)},keyboardShortcut:E})),t&&(v.isFindDefinitionSupported||v.isFindReferencesSupported)&&n.push(ey({label:"Show references",icon:(0,a.Y)(Q,{}),keyboardShortcut:F,run:function(){(0,y.y)(e)}})),n.push(ey({label:"Find in Repl",icon:(0,a.Y)(ev.A,{}),run:function(){var n=(0,g.i)(e.state).text;(0,O.zw)(e.state,{pane:{type:"searchReplace",data:{initialQuery:n}}})}})),t&&v.isRenameSupported&&n.push(ey({label:"Rename all occurrences",icon:(0,a.Y)(ea.A,{}),keyboardShortcut:B,run:function(){(0,S.C)(e)}})),e.state.facet(f.hb)&&n.push(ey({label:"Format document",icon:(0,a.Y)(ec.A,{}),keyboardShortcut:U,run:function(){(0,f.BD)(e)}})),!e.state.selection.main.empty&&e.state.facet(h.Aq)&&n.push(ey({label:"Format selection",icon:(0,a.Y)(ec.A,{}),run:function(){(0,f.vl)(e)}})),n.push(ey({label:"Select all occurrences",icon:(0,a.Y)(er,{}),keyboardShortcut:P,run:function(){(0,T.Gd)(e)}}));var r=void 0!==e.state.field(p.ZP,!1);return t&&r&&n.push(ey({label:"Toggle breakpoint",icon:(0,a.Y)(ee.A,{}),run:function(){(0,T._P)(e)}})),t&&v.isCodeActionsSupported&&(v.isSourceActionsSupported&&n.push(ey({label:"Source actions",icon:(0,a.Y)(es.A,{}),keyboardShortcut:L,run:function(){(0,w._H)(e)}})),n.push(ey({label:"More actions",icon:(0,a.Y)(ef.A,{}),keyboardShortcut:N,run:function(){(0,w.w1)(e,{force:!0})}}))),n},[v,m,P,L,A,x,E,F,B,U,N])),e_=(K=(0,z.Zp)(W.P.EditorContextMenu),(0,l.useCallback)(function(e){var n=[];return n.push({data:{type:"group",key:"extensions"},commands:(0,r._)(function(){var n;return(0,o.YH)(this,function(t){switch(t.label){case 0:var i;return n=[{data:{filePath:e.filePath,selection:e.view.state.selection.toJSON()}}],[4,Promise.all(K.map((i=(0,r._)(function(e){var t;return(0,o.YH)(this,function(r){switch(r.label){case 0:return[4,e.create({path:n})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,H.l)(t,{path:n})]}})}),function(e){return i.apply(this,arguments)})))];case 1:return[2,t.sent().filter(Boolean)]}})})}),n},[K])),eD=eC(),eE=(0,k._P)({controlName:"flag-draft-buffers"});return(0,l.useCallback)(function(){var e=J?[{data:{type:"context",label:c.BP,icon:(0,a.Y)(q.A,{})},commands:function(){return eg(J)}},{data:{type:"context",label:"Code actions",icon:(0,a.Y)(ef.A,{})},commands:function(){return ek(J)}}].concat((0,i._)(eE?[{data:{type:"context",label:"File actions",icon:(0,a.Y)(es.A,{})},commands:function(){return eD(J)}}]:[]),[{data:{type:"context",label:"Social",icon:(0,a.Y)(en.A,{})},commands:function(){return eb(J)}},{data:{type:"context",label:"Clipboard",icon:(0,a.Y)(et.A,{})},commands:function(){return ex(J)}},{data:{type:"context",label:"Extensions",icon:(0,a.Y)(em.A,{})},commands:function(){return e_({view:J,filePath:$})}}]):[];return{data:{type:"context",label:"Search actions",icon:(0,a.Y)(ev.A,{})},commands:function(){return e}}},[J,eg,ek,eb,ex,eD,$,e_,eE])}var ek=new x.k(function(e,n,t){return e?null:[(0,P.M)(n),d.Lz.domEventHandlers({contextmenu:function(e,n){var r=e.clientX,i=e.clientY,o=n.state.selection.main,a=n.posAtCoords({x:r,y:i}),l=n.state.doc.length,s=null===a?l:a;if(s<o.from||s>o.to){var c=u.OF.cursor(s);n.dispatch({selection:c})}return t(e),!0}})]})},51662:(e,n,t)=>{"use strict";t.d(n,{F:()=>p,v:()=>d});var r=t(1889),i=t(21462),o=t(82891),a=t(67337),l=t(14856),s=t(61234),c=t(43974),u=(0,s.x)({webview:[c.wp.height("auto"),c.wp.flex.grow(1),c.wp.position.relative]}),d=(0,i.forwardRef)(function(e,n){var t=e.showDeployBanner,o=e.openPane,s=e.previewScreenSize,c=e.setPreviewScreenSize,d=e.initialPort,p=e.initialPath,f=e.isMobilePIP,h=(0,a.A)(),m=h.container,g=h.ports,v=(0,i.useRef)(null);(0,i.useImperativeHandle)(n,function(){return{refresh:function(){var e;null===(e=v.current)||void 0===e||e.refresh()}}},[]);var w=(0,i.useCallback)(function(){return o({type:"networking"})},[o]);return(0,r.Y)(l.QJ,{ref:v,css:u.webview,container:m,ports:g,openPane:o,initialPath:p,initialPort:null!=d?d:80,openNetworkingTool:w,shouldShowAgentDeployBanner:t,previewScreenSize:s,setPreviewScreenSize:c,isMobilePIP:f})}),p=(0,i.forwardRef)(function(e,n){var t=e.openPane,s=e.previewScreenSize,c=e.setPreviewScreenSize,d=e.isMobilePIP,p=(0,i.useRef)(null);(0,i.useImperativeHandle)(n,function(){return{refresh:function(){var e;null===(e=p.current)||void 0===e||e.refresh()}}},[]);var f=(0,a.A)(),h=f.container,m=f.ports,g=(0,i.useCallback)(function(){return t({type:"networking"})},[t]);return(0,r.Y)(l.QJ,{ref:p,css:u.webview,container:h,ports:m,openPane:t,initialPath:"/",initialPort:o.no,openNetworkingTool:g,shouldShowAgentDeployBanner:!1,previewScreenSize:s,setPreviewScreenSize:c,isMobilePIP:d})})},51888:(e,n,t)=>{"use strict";t.d(n,{Cv:()=>g,Vw:()=>v,Yi:()=>S,_g:()=>y,e0:()=>h,mO:()=>w,mi:()=>Y,qW:()=>m});var r=t(1889),i=t(67668),o=t(6680),a=t(61234),l=t(43974),s=t(40043),c=t(37407),u=t(35869),d=t(25584),p=t(69671),f=(0,a.x)({revertText:[l.wp.color.orangeStronger,l.wp.fontWeight.medium],mergeText:[l.wp.color.purpleStronger,l.wp.fontWeight.medium],pullRequestId:[l.wp.fontWeight.medium],hash:[l.wp.fontWeight.medium],filePathPrefix:[l.wp.color.foregroundDimmest],commitBody:[l.wp.font.code,{whiteSpace:"pre-wrap"},{fontSize:o.LU.fontSizeSmall}],clickableName:[l.wp.cursor.pointer,{"&:hover":{textDecoration:"underline"}}],tooltip:[l.wp.display.inlineFlex,l.wp.rowWithGap(4),l.wp.align.center],path:[{fontSize:o.LU.fontSizeSmall},l.wp.font.code],currentBranchIndicator:[l.wp.height(16),l.wp.width(16),l.wp.align.center],currentBranchDot:[l.wp.height(6),l.wp.width(6),l.wp.backgroundColor.accentPrimaryStronger,l.wp.borderRadius("full")],branchNameWrapper:[l.wp.flex.row,l.wp.align.center],fixTooltipDisplay:{"& > span":{display:"inline-block"}},headingWrapper:[l.wp.display.inlineFlex,l.wp.rowWithGap(4),l.wp.align.center,l.wp.flex.shrink(1),l.wp.overflow("hidden")],headingRemote:[{verticalAlign:"text-bottom"},l.wp.mr(4)],headingCurrent:[l.wp.px(4)],current:[l.wp.position.relative,l.wp.top("-1px"),l.wp.display.inlineFlex,l.wp.pl(2),l.wp.pr(8)],icon:[{verticalAlign:"baseline !important"},l.wp.mr(4)],bodyContainer:[l.wp.border({color:o.LU.outlineDimmest,direction:"full"}),l.wp.borderRadius(8),l.wp.p(16)]});function h(e){var n=e.text,t=e.className;return(0,r.Y)("span",{className:t,css:f.revertText,children:n})}function m(e){var n=e.text,t=e.className;return(0,r.Y)("span",{className:t,css:f.mergeText,children:n})}function g(e){var n,t=e.id,i=e.hash,o=e.className;return n=void 0===i||i?"string"==typeof t&&t.startsWith("#")?t:"#".concat(t):"string"==typeof t&&t.startsWith("#")?t.slice(1):"".concat(t),(0,r.Y)("span",{className:o,css:f.pullRequestId,children:n})}function v(e){var n=e.hash,t=e.length,i=e.className;return(0,r.Y)("span",{className:i,css:f.hash,children:n.slice(0,(void 0===t?8:t)+1)})}function w(e){var n=e.subject,t=e.remoteName,i=e.quoted,o=void 0!==i&&i,a=e.className;return t?(0,r.Y)(d.Ay,{className:a,background:!1,lineBreaks:!0,themed:!0,useRemarkGfm:!0,remarkGitHubOptions:{repository:t},children:o?'"'.concat(n,'"'):n}):(0,r.Y)("span",{className:a,children:o?'"'.concat(n,'"'):n})}function y(e){var n=e.body,t=e.view,i=e.className;return"Source"===(void 0===t?"Source":t)?(0,r.Y)(u.S,{css:f.bodyContainer,children:(0,r.Y)("pre",{className:i,css:f.commitBody,children:n})}):(0,r.Y)(u.S,{css:f.bodyContainer,children:(0,r.Y)(d.Ay,{className:i,background:!1,mentionsLink:!0,lineBreaks:!0,themed:!0,useRemarkGfm:!0,children:n})})}function b(){return(0,r.Y)("span",{css:f.fixTooltipDisplay,children:(0,r.Y)(c.m_,{tooltip:"This is your current branch",children:(0,r.Y)(u.S,{css:f.currentBranchIndicator,children:(0,r.Y)(u.S,{css:f.currentBranchDot})})})})}function S(e){var n=e.name,t=e.remote,i=e.current,o=void 0!==i&&i,a=e.heading,l=void 0!==a&&a,c=e.icon,u=void 0!==c&&c,d=e.onClick,h=e.className,m=null;return(!0===u?m=l?(0,r.Y)(p.A,{size:16}):(0,r.Y)(p.A,{css:f.icon,size:12}):u&&(m=u),l)?(0,r.FD)("div",{css:f.headingWrapper,children:[m,(0,r.FD)(s.EY,{variant:"subheadDefault",multiline:!1,children:[t?(0,r.FD)(r.FK,{children:[(0,r.Y)("span",{css:f.headingRemote,children:t}),(0,r.Y)("span",{css:f.headingRemote,children:"/"})]}):null,d?(0,r.Y)(C,{label:"View branch",onClick:d,children:n}):(0,r.Y)("span",{children:n})]}),o?(0,r.Y)("span",{css:l?f.headingCurrent:f.current,children:(0,r.Y)(b,{})}):null]}):(0,r.FD)("span",{className:h,css:f.branchNameWrapper,children:[m,t?(0,r.FD)("span",{children:[t,"/"]}):null,d?(0,r.Y)(C,{label:"View branch",onClick:d,children:n}):(0,r.Y)("span",{children:n}),o?(0,r.Y)(b,{}):null]})}function Y(e){var n=e.path,t=e.prefix,o=e.onClick,a=e.className,l=(0,i.WP)(n),s=!o&&(l===n||null!==t&&t+l===n);return(0,r.Y)("span",{css:f.fixTooltipDisplay,children:(0,r.Y)(c.m_,{maxWidth:"auto",tooltip:(0,r.Y)(A,{path:n,openable:!!o}),isDisabled:s,children:o?(0,r.FD)(C,{label:"Open ".concat(l),onClick:o,className:a,children:[t?(0,r.Y)("span",{css:f.filePathPrefix,children:t}):null,(0,r.Y)("span",{children:l})]}):(0,r.FD)("span",{className:a,children:[t?(0,r.Y)("span",{css:f.filePathPrefix,children:t}):null,(0,r.Y)("span",{children:l})]})})})}function A(e){var n=e.path,t=e.openable;return(0,r.FD)("span",{css:f.tooltip,children:[void 0===t||t?(0,r.Y)("span",{children:"Open"}):null,(0,r.Y)("span",{css:f.path,children:n})]})}function C(e){var n=e.label,t=e.onClick,i=e.className,o=e.children;return(0,r.Y)("span",{className:i,css:f.clickableName,role:"button",tabIndex:-1,"aria-label":n,onClick:t,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==t||t())},children:o})}},51939:(e,n,t)=>{"use strict";t.d(n,{Ry:()=>o,vF:()=>r,z$:()=>i});var r=100,i=3,o=250},52212:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(4124),i=t.n(r),o=t(58758),a=t(95570);function l(e){var n=e.throwBsod,t=e.tags,r=e.extras,l=e.origin,s=e.onNonBsodUnrecoverableError,c=void 0===s?function(){}:s;return function(e){var s=(0,o.Ay)(e);if(s===o.ub.NotFound){i().push("/home","~/");return}if(s===o.ub.LanguageTokenDenied){window.location.reload();return}if(s){c(s);return}a.error(e),n({error:e,tags:t,extras:r,origin:l})}}},52334:(e,n,t)=>{"use strict";t.d(n,{m:()=>nk});var r,i=t(21462),o=t(49069),a=t(45773),l=t(23244),s=t(85431),c=t(62019),u=t(37743),d=t(48122),p=t(1833),f=t(23099),h=t.n(f),m=t(44725),g=t(18254),v=t(60275),w=t(51978),y=o.sj.define({combine:function(e){var n;return null!==(n=e.filter(Boolean)[0])&&void 0!==n?n:null}}),b=o.sU.define({create:function(){return{diff:null,tree:g.PH.empty}},update:function(e,n){var t,r,i=n.state.facet(y),o=null===(t=n.state.facet(m.BH))||void 0===t?void 0:t.parser;if(!i)return null===e.diff&&e.tree===g.PH.empty?e:{diff:null,tree:g.PH.empty};var a=e.diff,l=e.tree;return(a&&a.b.eq(i)?n.docChanged&&(a=a.updateA(n.newDoc,n.changes)):(a=v.o.create(n.newDoc,i),l=g.PH.empty),(null===(r=n.startState.facet(m.BH))||void 0===r?void 0:r.parser)!==o&&(l=g.PH.empty),o&&l.length!==a.b.length)?(l=(0,w.B)({parser:o,text:a.b,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),S=t(83846),Y=t(6680),A="cm-transform-diff-line-deletion-base",C="cm-transform-diff-line-deletion",x="cm-transform-diff-text-deletion",k="cm-transform-diff-line-insertion-base",_="cm-transform-diff-line-insertion",D="cm-transform-diff-text-insertion",E="cm-transform-diff-number-marker",R="rgba(180, 0, 0, 0.1)",I="rgba(180, 0, 0, 0.125)",F="rgba(0, 180, 0, 0.1)",T="rgba(0, 180, 0, 0.125)";function P(e,n){var t="linear-gradient(to right, ".concat(e,", ").concat(e,")");return n&&(t+=", linear-gradient(to right, ".concat(n,", ").concat(n,")")),t}var L=a.Lz.theme((r={},(0,S._)(r,".".concat(k,", .").concat(_),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(Y.LU.accentPrimaryDimmest," !important")}}),(0,S._)(r,".".concat(A),{background:P(R),backgroundClip:"content-box"}),(0,S._)(r,".".concat(C),{background:P(R,I),backgroundClip:"content-box"}),(0,S._)(r,".".concat(k),{background:P(F),backgroundClip:"content-box"}),(0,S._)(r,".".concat(_),{background:P(F,T),backgroundClip:"content-box"}),(0,S._)(r,".".concat(D),{display:"inline-block",background:T}),(0,S._)(r,".".concat(x),{display:"inline-block",background:I}),(0,S._)(r,".".concat(E),{opacity:.5}),r)),U=t(11813),N=t(73510),O=function(e){function n(e,t,r){var i;return(0,u._)(this,n),(i=(0,c._)(this,n)).line=e,i.index=t,i.changed=r,i}(0,p._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=this,n=document.createElement("div");if(n.className=this.changed?"cm-line ".concat(k):"cm-line ".concat(_),!this.changed||!this.changed.length){var t=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,s=l.text,c=l.tags,u=document.createElement("span");u.textContent=s||"\xa0",u.className=null!=c?c:"",n.appendChild(u)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}for(var d=0,p=0,f=null,h=null,m=function(n,t){if(!f)throw Error("range is null");var r=e.line[p],i=r.text,o=r.tags,a=i.slice(d-f.from,t-f.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",n.appendChild(l),d+=a.length};p<this.line.length;){if(!f){var g=this.line[p].text;f={from:d,to:d+g.length}}if(!h){var v=!0,w=!1,y=void 0;try{for(var b,S=this.changed[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var Y=b.value;if(!(Y.from>=f.to)&&!(Y.to<=d)){var A=document.createElement("span");A.className=D,h={from:Y.from,to:Y.to,dom:A},d<h.from&&m(n,h.from),n.appendChild(A);break}}}catch(e){w=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw y}}}h?(d<h.to&&m(h.dom,h.to),d>=h.to&&(h=null)):m(n,f.to),d>=f.to&&(f=null,p++)}return n},t.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&h()(this.line,e.line)&&h()(this.changed,e.changed)},t.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,d._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(a.xO),M=a.NZ.line({class:A}),B=a.NZ.line({class:C}),H=a.NZ.mark({class:x}),z=a.Lz.decorations.compute([b],function(e){var n=function(e,n){if(r.getLineChangeType(e.number,U.mn.A)===U.DE.COVERED)o.push(B.range(e.from));else{o.push(M.range(e.from));var t=!0,i=!1,a=void 0;try{for(var l,s=(0,U.QG)(e,n,U.mn.A,!1)[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var c=l.value;o.push(H.range(c.from,c.to))}}catch(e){i=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw a}}}},t=e.field(b,!1);if(!t||!t.diff)return a.NZ.none;var r=t.diff,i=t.tree,o=[],l=!0,s=!1,c=void 0;try{for(var u,d=r.chunks[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value;if(p.fromA!==p.endA)for(var f=r.a.lineAt(p.fromA),h=r.a.lineAt(p.endA),m=f.number;m<=h.number;m++)n(r.a.line(m),p);else p.fromB===p.endB&&n(r.a.lineAt(p.fromA),p);if(p.fromB!==p.toB)for(var g=r.b.lineAt(p.fromB),v=(0,N.A7)(i,r.b,e,p.fromB,p.endB),w=0;w<v.length;w++){var y=v[w],S=r.b.line(g.number+w),Y=r.getLineChangeType(S.number,U.mn.B)===U.DE.COVERED?null:(0,U.QG)(S,p,U.mn.B,!0),A=a.NZ.widget({widget:new O(y,S.number,Y),block:!0,side:w+1}),C=Math.min(p.endA,r.a.length);o.push(A.range(C))}}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}return a.NZ.set(o,!0)}),W=t(5556),G=function(e){function n(e){var t;return(0,u._)(this,n),(t=(0,c._)(this,n)).index=e,t}(0,p._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=document.createElement("span");return e.className=E,e.textContent=String(this.index),e},t.eq=function(e){return this.index===e.index},n}(a.wJ),V=W.DY.of(function(e,n){if(n instanceof O)return new G(n.index)}),j=o.sj.define({enables:function(e){return[y.computeN([e],function(n){return n.facet(e)}),b,L,z,V]}}),Z=t(1889),q=t(47099),K=t(6268),$=t(94216),J=t(89668),Q=t(58767);function X(e,n){e.dispatch({effects:J.L.of(null),selection:{anchor:n.range.indexTo,head:n.range.indexTo}}),e.hasFocus||e.focus()}function ee(e,n,t){(0,$.fJ)({view:e,insert:n,scrollIntoView:!0,insertAt:t}),e.dispatch({effects:J.L.of(null)}),e.hasFocus||e.focus()}function en(e,n){e.dispatch({effects:J.M.of(n)})}function et(e,n,t){e.dispatch({changes:{from:t.range.indexFrom,to:t.range.indexTo,insert:n},scrollIntoView:!0,effects:J.L.of(null),annotations:[Q.A.of(!0),K._B.of("full")]}),e.hasFocus||e.focus()}function er(e,n){return e.range.indexFrom===n.range.indexFrom&&e.range.indexTo===n.range.indexTo&&e.filePath===n.filePath&&e.fileVersion===n.fileVersion&&e.referenceType===n.referenceType}var ei=t(64774),eo=t(61234),ea=t(43974),el=t(26705),es=t(40043),ec=t(35869),eu=t(28365),ed=(0,eo.x)({root:[ea.wp.border({color:Y.LU.outlineDimmest}),ea.wp.p(8),ea.wp.borderRadius(4)],text:[ea.wp.flex.growAndShrink(1)]}),ep=new ei.E(function(e){var n=e.onClose,t=e.requestMeasure;return(0,Z.Y)(q.N2,{requestMeasure:t,type:"ghostwriterKillswitch",children:(0,Z.FD)(ec.S,{css:ed.root,row:!0,gap:8,children:[(0,Z.Y)(ec.S,{css:ed.text,children:(0,Z.Y)(es.EY,{children:"Code length exceeded. Please select a smaller code block."})}),(0,Z.Y)(el.K0,{alt:"Close",onClick:n,type:"button",children:(0,Z.Y)(eu.A,{})})]})})}),ef=function(e){function n(e){var t,r=e.codeReference;return(0,u._)(this,n),(t=(0,c._)(this,n)).codeReference=r,t}return(0,p._)(n,e),n.prototype.toDOM=function(e){var n=this;return ep.create({onClose:function(){return X(e,n.codeReference)},requestMeasure:function(){return e.requestMeasure()}})},n}(a.xO),eh=t(99395),em=function(e){return e[e.Compare=0]="Compare",e[e.Original=1]="Original",e[e.Suggestion=2]="Suggestion",e}({}),eg=o.Pe.define(),ev=o.sU.define({create:function(){return em.Suggestion},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(eg))e=l.value;else if(l.is(J.L))e=null;else if(l.is(J.M)){var s=n.state.field(eh.z);if((null==s?void 0:s.type)==="transformCode"&&l.value){var c=n.startState.field(eh.Q),u=l.value;!c&&u&&(e=em.Suggestion)}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}}),ew=t(75156),ey=o.sU.define({create:function(){return null},update:function(e,n){if(!(0,l.$H)(n,"doc",eh.z,ew.Md,ev,eh.Q))return e;var t,r=n.state.field(eh.z),i=n.state.facet(ew.Md),o=n.state.field(ev);if(!r||!i||r.codeReference.filePath!==i||o!==em.Suggestion)return null;var a=r.codeReference.range.indexFrom,s=r.codeReference.range.indexTo,c=n.state.doc.slice(a,s),u=null!==(t=n.state.field(eh.Q))&&void 0!==t?t:"",d=c.lines,p=u.split(n.state.lineBreak).length-d;return e&&e.after===a&&e.offset===p?e:{after:a,offset:p}}}),eb=W.RG.of(function(e,n){var t=e.state.doc.lineAt(n.from),r=e.state.field(ey);if(r&&!(t.from<=r.after))return new W.ib(t.number+r.offset)}),eS=W.DY.of(function(e,n){if(n instanceof eY)return new W.ib(n.index)}),eY=function(e){function n(e,t,r){var i;return(0,u._)(this,n),(i=(0,c._)(this,n)).line=e,i.block=t,i.index=r,i}(0,p._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=document.createElement(this.block?"div":"span");e.className=this.block?"cm-line":"";var n=!0,t=!1,r=void 0;try{for(var i,o=this.line[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=a.text,s=a.tags,c=document.createElement("span");c.textContent=l||"\xa0",s&&(c.className=s),e.appendChild(c)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e},t.eq=function(e){return this.index===e.index&&(0,N.ne)(this.line,e.line)},t.ignoreEvent=function(){return!1},(0,d._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(a.xO),eA=[ey,eb,eS,a.Lz.decorations.compute([m.BH,eh.z,eh.Q,ev,b,ew.Md,o.$t.lineSeparator],function(e){var n=e.field(eh.z),t=e.facet(ew.Md),r=e.field(ev);if(!n||"transformCode"!==n.type||!t||n.codeReference.filePath!==t||r!==em.Suggestion)return a.NZ.none;var i=n.codeReference.range.indexFrom,o=n.codeReference.range.indexTo,l=e.doc.lineAt(i),s=e.doc.lineAt(o),c=e.toText(null!==(S=e.field(eh.Q))&&void 0!==S?S:""),u=e.changes({from:i,to:o,insert:c}),d=u.apply(e.doc),p=i+c.length,f=null===(b=e.facet(m.BH))||void 0===b?void 0:b.parser,h=null;if(f)h=(0,w.B)({parser:f,text:d,changes:u,base:e,upTo:p}),Y=(0,N.A7)(h,d,e,i,p);else{Y=[];var g=!0,v=!1,y=void 0;try{for(var b,S,Y,A,C=c.iterLines()[Symbol.iterator]();!(g=(A=C.next()).done);g=!0){var x=A.value;Y.push([{text:x}])}}catch(e){v=!0,y=e}finally{try{g||null==C.return||C.return()}finally{if(v)throw y}}}var k=[];Y.length>1&&i!==o&&0!==s.length&&o===s.to&&o<e.doc.length?k.push(a.NZ.replace({inclusive:!1,block:!0}).range(i,o)):k.push(a.NZ.replace({inclusiveStart:!1,block:!0}).range(i,o));for(var _=0;_<Y.length;_++){var D=Y[_],E=l.number+_,R=a.NZ.widget({widget:new eY(D,_>0,E),inlineOrder:!0,side:_+1,block:_>0});k.push(R.range(i))}return a.NZ.set(k,!0)})],eC=t(29935),ex=t(12694),ek=t(82643),e_=t(35992),eD=t(72004),eE=t(26496),eR=t(99672),eI=t(68209),eF=t(2960),eT=t(63892),eP=t(48088),eL=t(40919),eU=t(47207),eN=t(21238),eO=t(93682),eM=t(62451),eB=t(27489),eH=t(56185),ez=t(7655),eW=o.sj.define({combine:function(e){var n;return null!==(n=e[0])&&void 0!==n?n:function(){}}});new eR.k(function(e){return eW.of(e)});var eG=(0,eo.x)({root:[ea.wp.border({color:Y.LU.outlineDimmest}),ea.wp.p(8),ea.wp.borderRadius(4)],header:[ea.wp.minHeight(28)],headerLeft:[ea.wp.flex.growAndShrink(1),ea.wp.rowWithGap(8),ea.wp.align.center]}),eV={direction:"reverse",state:{message:"",completed:!1},reducer:function(e,n){var t;(null===(t=e.contents.contents)||void 0===t?void 0:t.$kind)==="inlineActionEventContents"&&e.contents.contents.inlineActionEventContents.content&&(n.message=e.contents.contents.inlineActionEventContents.content,n.completed=e.state===eD.qOk.COMPLETE)}},ej=new ei.E(function(e){var n,t,r,o,a,l,s,c,u,d,p,f,h,m,g,v=e.requestMeasure,w=e.codeReference,y=e.onClose,b=e.openAiChatPane,S=e.source,A=(n=({getFileContext:(0,eN.H)()}).getFileContext,t=(0,eE.NC)(),o=(r=(0,ex._)((0,i.useState)(null),2))[0],a=r[1],s=(l=(0,ex._)((0,i.useState)(!1),2))[0],c=l[1],u=(0,eE.k)().assistantInlineMode,p=(0,i.useCallback)((d=(0,eC._)(function(e){var r,i,o,l,s,d;return(0,ek.YH)(this,function(p){switch(p.label){case 0:return r=e.codeReference,c(!0),[4,t.sessions.create({sessionType:eD.dF3.CHAT})];case 1:if(!(i=p.sent()).ok)return c(!1),[2];return a(o=i.payload),[4,n()];case 2:return s=(l=p.sent()).fileContext,d=l.mostRecentFile,[4,o.appendEvent({kind:"inlineAction",message:"",messageType:eD.Z1T.EXPLAIN_CODE,modelType:"advanced"===u?eD.e3q.ADVANCED:eD.e3q.BASIC,codeReference:r,fileContext:s,mostRecentFile:d,useRag:!0})];case 3:return p.sent(),[2]}})}),function(e){return d.apply(this,arguments)}),[t.sessions,n,u]),f=(0,i.useCallback)((0,eC._)(function(){return(0,ek.YH)(this,function(e){switch(e.label){case 0:if(!o)return[3,2];return[4,o.abortLastEvent()];case 1:e.sent(),c(!1),e.label=2;case 2:return[2]}})}),[o]),m=(h=(0,eI.Rj)(function(){return null==o?void 0:o.reduce(eV,1)},[o],{default:{message:"",completed:!1}})).message,g=h.completed,{sessionId:null==o?void 0:o.id,sendMessage:p,stopMessage:f,loading:s,message:m,completed:g}),C=A.sessionId,x=A.sendMessage,k=A.stopMessage,_=A.loading,D=A.completed,E=A.message,R=(0,i.useCallback)(function(){var e,n;(0,eT.u4)(eT.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"explain",source:S,message_content:w.code}),x({codeReference:{code:w.code,range:w.range,filePath:w.filePath,fileContent:null!==(e=w.fileContent)&&void 0!==e?e:"",fileVersion:w.fileVersion,language:null!==(n=w.language)&&void 0!==n?n:"",referenceType:eD.fDX.INLINE}})},[x,w,S]),I=(0,eF.A)(R),F=(0,eF.A)(k);(0,i.useEffect)(function(){I.current();var e=F.current;return function(){e()}},[I,F]);var T=(0,eE.Gk)();return(0,eE.q4)()?(0,Z.Y)(q.Rc,{inlineActionType:"Explain",closeAction:y}):(0,Z.Y)(q.N2,{requestMeasure:v,type:"explainCode",children:(0,Z.FD)(ec.S,{css:eG.root,gap:8,dataCy:"ghostwriter-inline-explain-content",children:[E||_?(0,Z.FD)(ec.S,{css:eG.header,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,Z.FD)(ec.S,{css:eG.headerLeft,children:[(0,Z.Y)(eM.A,{}),(0,Z.Y)(eP.m2,{intent:eD.qRv.EXPLAIN,text:{color:"dimmest",variant:"small"},icon:{color:Y.LU.foregroundDimmest}})]}),D?(0,Z.Y)(el.K0,{alt:"Close",dataCy:"ghostwriter-inline-close",children:(0,Z.Y)(eu.A,{onClick:function(){y(),(0,eT.u4)(eT.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"explain",source:S})}})}):(0,Z.Y)(eO.$n,{iconLeft:(0,Z.Y)(ez.A,{}),size:"small",text:"Stop",onClick:function(){k(),(0,eT.u4)(eT.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"explain",source:S,message_content:w.code})}})]}):null,_&&!E?(0,Z.Y)(eH.A,{}):null,E?(0,Z.Y)(eL.d2,{text:E,codeComponent:eL.vz,messageState:D?eD.qOk.COMPLETE:void 0}):null,D?(0,Z.FD)(ec.S,{row:!0,gap:8,align:"center",justify:"end",children:[(0,Z.Y)(es.EY,{variant:"small",color:"dimmer",children:"Esc to close"}),C?(0,Z.Y)(eO.$n,{dataCy:"ghostwriter-inline-reply-in-chat",iconLeft:T?(0,Z.Y)(eB.A,{}):(0,Z.Y)(eH.A,{}),disabled:!T,size:"small",text:"Reply in Chat",colorway:T?"blurple":void 0,onClick:function(){(0,eT.u4)(eT.AZ.AI_INLINE_EVENT,{action:"reply_in_chat",intent_type:"explain",source:S,message_content:w.code}),b(C),y()}}):null]}):null]})})}),eZ=function(e){function n(e){var t,r=e.codeReference,i=e.source;return(0,u._)(this,n),(t=(0,c._)(this,n)).codeReference=r,t.source=i,t}(0,p._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this.codeReference,t=this.source;return ej.create({requestMeasure:function(){return e.requestMeasure()},codeReference:n,onClose:function(){return X(e,n)},openAiChatPane:function(n){return(0,eU.zw)(e.state,{pane:{type:"ghostwriterChat",data:{sessionId:n}}})},source:t})},t.updateDOM=function(e,n){var t=this.codeReference;return ej.update(e,function(e){return(0,e_.jM)(e,function(e){e.requestMeasure=function(){return n.requestMeasure()},e.codeReference=t,e.onClose=function(){return X(n,t)}})}),!0},t.eq=function(e){return er(this.codeReference,e.codeReference)},n}(a.xO),eq=t(44370),eK=t(69338),e$={direction:"reverse",state:{code:void 0,completed:!1,error:null},reducer:function(e,n){var t;if((null===(t=e.contents.contents)||void 0===t?void 0:t.$kind)==="inlineActionEventContents"&&e.contents.contents.inlineActionEventContents){var r=e.contents.contents.inlineActionEventContents;if(r.content&&r.content.includes("```")){var i=r.content.match(/```(?:\w+)?\n([\s\S]+?)\n```/);i&&i[1]&&(n.code=i[1])}n.completed=e.state===eD.qOk.COMPLETE&&!!n.code,e.state!==eD.qOk.COMPLETE&&e.state!==eD.qOk.IN_PROGRESS&&(n.error="Failed to generate code")}}};function eJ(e){var n,t,r=e.onCode,o=e.getFileContext,a=e.assistantMode,l=(0,eE.NC)(),s=(0,ex._)((0,i.useState)(null),2),c=s[0],u=s[1],d=(0,ex._)((0,i.useState)(!1),2),p=d[0],f=d[1],h=(0,ex._)((0,i.useState)(null),2),m=h[0],g=h[1],v=(0,i.useCallback)((n=(0,eC._)(function(e){var n,t,r,i;return(0,ek.YH)(this,function(s){switch(s.label){case 0:if(f(!0),g(null),n=c)return[3,2];return[4,l.sessions.create({sessionType:eD.dF3.INLINE_CHAT})];case 1:if(!(t=s.sent()).ok)return f(!1),g("Failed to create session"),[2];u(n=t.payload),s.label=2;case 2:if(!o)return[3,6];s.label=3;case 3:return s.trys.push([3,5,,6]),[4,o()];case 4:return r=s.sent(),[3,6];case 5:return s.sent(),f(!1),g("Failed to get file context"),[2];case 6:i="advanced"===a?eD.e3q.ADVANCED:eD.e3q.BASIC,s.label=7;case 7:return s.trys.push([7,9,,10]),[4,n.appendEvent({kind:"inlineAction",message:e.message,messageType:e.type,modelType:i,codeReference:e.codeReference,fileContext:null==r?void 0:r.fileContext,mostRecentFile:null==r?void 0:r.mostRecentFile,useRag:!0})];case 8:return s.sent(),[3,10];case 9:return s.sent(),f(!1),g("Failed to send message"),[3,10];case 10:return[2]}})}),function(e){return n.apply(this,arguments)}),[l.sessions,c,o,a]),w=(0,i.useCallback)((0,eC._)(function(){return(0,ek.YH)(this,function(e){switch(e.label){case 0:if(!c)return[3,2];return[4,c.abortLastEvent()];case 1:e.sent(),f(!1),e.label=2;case 2:return[2]}})}),[c]),y=(0,i.useCallback)(function(){return g(null)},[]),b=(0,i.useMemo)(function(){return null==c?void 0:c.reduce(e$,1).result},[c]),S=(0,eI.G9)(b);return(0,eI.q3)(b,{next:function(e){(null==e?void 0:e.completed)&&p&&f(!1),(null==e?void 0:e.error)&&!m&&g(e.error),(null==e?void 0:e.code)&&r(e.code)}}),{sendMessage:v,stopMessage:w,getCode:function(){return S.current},loading:p,completed:null===(t=S.current)||void 0===t?void 0:t.completed,error:m,clearError:y}}var eQ=t(90001),eX=t(56525),e0=t(8952),e1=t(59086),e2=(0,eq.eU)(0),e4=(0,eq.eU)(function(e){return e(e2)<=q.bX?"compact":"normal"}),e5=new ei.E(function(e){var n=e.id,t=e.requestMeasure,r=e.codeReference,o=e.updateCodeBlock,a=e.acceptSuggestion,l=e.onClose,s=e.autoFocus,c=e.source,u=function(){var e=S();(null==e?void 0:e.code)?(a(e.code),(0,eT.u4)(eT.AZ.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",message_content:e.code,source:c})):k()},d=function(){var e,n;D.current=I,(0,eT.u4)(eT.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",message_content:I,source:c}),y({message:I,type:eD.Z1T.GENERATE_CODE,codeReference:{code:r.code,range:r.range,filePath:r.filePath,fileContent:null!==(e=r.fileContent)&&void 0!==e?e:"",fileVersion:r.fileVersion,language:null!==(n=r.language)&&void 0!==n?n:"",referenceType:eD.fDX.INLINE}})},p=(0,eE.k)().assistantInlineMode,f=(0,eE.UK)().hasAccessToAdvancedModel,h=(0,ex._)((0,i.useState)(!1),2),m=h[0],g=h[1],v=(0,eE.lW)(),w=eJ({onCode:o,getFileContext:(0,eN.H)(),assistantMode:p}),y=w.sendMessage,b=w.stopMessage,S=w.getCode,Y=w.loading,A=w.completed,C=w.error,x=w.clearError,k=(0,i.useCallback)(function(){b(),l()},[b,l]),_=(0,i.useCallback)(function(){(0,eT.u4)(eT.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:c}),k()},[k,c]),D=(0,i.useRef)(null),E=(0,i.useRef)(null),R=(0,q.D3)({id:n,inputRef:E,loading:Y,onSubmit:function(){O?u():d()},onClose:_}),I=R.value,F=R.setValue,T=R.onKeyDown,P=R.escPressed,L=function(){(0,eT.u4)(eT.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",message_content:I,source:c}),b()},U=(0,eE.Gk)(),N=(0,eE.q4)(),O=U&&A&&D.current===I,M=(0,ex._)((0,i.useState)(function(){return(0,eq.y$)()}),1)[0],B=(0,eK.Xr)(e2,{store:M}),H=(0,eK.md)(e4,{store:M}),z=(0,eQ.A)(function(e){return B(e.width)}),W=(0,eE.jt)(),G=(0,eE.hT)(),V=W&&(G===eD.g32.AGENT_STATE_RUNNING||G===eD.g32.AGENT_STATE_PAUSING);return N?(0,Z.Y)(q.Rc,{inlineActionType:"Generate",closeAction:k}):V?(0,Z.Y)(q.ce,{inlineActionType:"Generate",closeAction:k}):(0,Z.FD)(Z.FK,{children:[(0,Z.FD)(q.y1,{requestMeasure:t,type:"generateCode",error:C,clearError:x,innerRef:z,children:[(0,Z.Y)(q.pd,{value:I,inputRef:E,onChange:function(e){return F(e.currentTarget.value)},placeholder:"Enter a prompt to generate new code",onKeyDown:T,autoFocus:s}),(0,Z.FD)(q.wi,{children:[(0,Z.FD)(Z.FK,{children:[(0,Z.Y)(q.sb,{type:"generateCode",readableModelName:f?v.advancedModel.name.readable:v.basicModel.name.readable}),A?(0,Z.Y)(el.K0,{disabled:!U,alt:"Rerun the same prompt",onClick:function(){return d()},size:12,colorway:"grey",children:(0,Z.Y)(e1.A,{})}):null]}),O?(0,Z.FD)(Z.FK,{children:[(0,Z.Y)(eO.$n,{variant:"outlined",size:"small",text:"Reject",onClick:function(){var e=S();(0,eT.u4)(eT.AZ.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",message_content:(null==e?void 0:e.code)?e.code:"",source:c}),_()}}),(0,Z.Y)(eO.$n,{size:"small",text:"Accept",colorway:"blurple",onClick:u,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,Z.Y)(q.XT,{escPressed:P,connecting:!U,loading:Y,disabled:!I||!I.trim(),promptPresentation:"normal"===H,onClick:function(){Y?L():d()}})]})]}),(0,Z.Y)(e0.A,{isOpen:m,onClose:function(){return g(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}},reloadPageAfterPurchaseComplete:!0})]})}),e8=function(e){function n(e){var t,r=e.id,i=e.codeReference,o=e.source;return(0,u._)(this,n),(t=(0,c._)(this,n)).id=r,t.codeReference=i,t.source=o,t}(0,p._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this.id,t=this.codeReference,r=this.source,i=e5.create({id:n,requestMeasure:function(){return e.requestMeasure()},codeReference:t,onClose:function(){return X(e,t)},acceptSuggestion:function(n){return ee(e,n,t.range.indexFrom)},updateCodeBlock:function(n){return en(e,n)},autoFocus:!0,source:r});return i.style.position="sticky",i.style.top="0px",i.style.zIndex=String(eX.W.floatingHeaderActive),i},t.updateDOM=function(e,n){var t=this.codeReference;return e5.update(e,function(e){return(0,e_.jM)(e,function(e){e.requestMeasure=function(){return n.requestMeasure()},e.codeReference=t,e.onClose=function(){return X(n,t)},e.acceptSuggestion=function(e){return ee(n,e,t.range.indexFrom)},e.updateCodeBlock=function(e){return en(n,e)},e.autoFocus=!1})}),!0},t.eq=function(e){return er(this.codeReference,e.codeReference)},n}(a.xO),e3=t(1074),e6=t(88239),e7=t(11646),e9=t(93415),ne=t(48326),nn=t(98429),nt=t(80703),nr=(0,eo.x)({container:[{marginRight:16},ea.wp.height("100%")],hintButton:[ea.wp.height("100%")]}),ni=new ei.E(function(e){var n=e.onGenerateCode,t=e.height,r=(0,e9.m5)(),i=(0,nt.Jn)(ne.G.id),o=Math.round(.6*t);return(0,Z.Y)(ec.S,{css:nr.container,children:(0,Z.Y)(nn.u,{keyCombo:r?void 0:i,text:"Generate",fontSize:o,css:nr.hintButton,onClick:function(){(0,eT.u4)(e7.AZ.GHOSTWRITER_CHAT_INLINE_HINT_CLICKED,{action:"generate"}),n()}})})}),no=a.Lz.theme({".cm-ghostwriter-hint-layer":{width:"100%"}}),na=function(e){var n=e.selection.main.head;return e.doc.lineAt(n)},nl=new eR.k(function(e){return o.sU.define({create:function(e){return na(e)},compare:h(),update:function(e,n){return na(n.state)},provide:function(n){return[no,o.Nb.high((0,a.qd)({above:!0,class:"cm-ghostwriter-hint-layer",update:function(e){return(0,l.$H)(e,n,eh.z,e3.RJ)},markers:function(t){var r=t.state.field(n,!1);if(!r||!t.state.selection.main.empty)return[];var i=t.state.field(eh.z,!1),o=0===t.state.doc.length,a=(0,e6.R)(t.state);if(r.length>0||i||a||o)return[];var l=t.dom.querySelector(".cm-minimap-gutter"),s=(null==l?void 0:l.clientWidth)||0,c=r.to,u=t.lineBlockAt(c),d=u.top,p=u.height;return[new ns({top:d+t.documentPadding.top,height:p,right:s,pocketOpen:null!==i,activeEditor:t.hasFocus,onGenerateCode:e})]}}))]}})}),ns=function(){function e(n){(0,u._)(this,e),this.options=n}var n=e.prototype;return n.position=function(e){e.style.top=this.options.top+"px",e.style.height=this.options.height+"px",e.style.right=this.options.right+"px",e.style.paddingRight=Math.round(.2*this.options.height)+"px"},n.draw=function(){var e=ni.create({onGenerateCode:this.options.onGenerateCode,height:this.options.height});return e.className="cm-ghostwriter-hint-marker",this.options.activeEditor||(e.style.visibility="hidden"),this.position(e),e},n.eq=function(e){return this.options.top===e.options.top&&this.options.pocketOpen===e.options.pocketOpen&&this.options.activeEditor===e.options.activeEditor},e}(),nc=t(85144),nu=(0,eo.x)({root:[ea.wp.border({color:Y.LU.outlineDimmest}),ea.wp.p(8),ea.wp.borderRadius(4)],text:[ea.wp.flex.growAndShrink(1)]}),nd=new ei.E(function(e){var n=e.onClose,t=e.requestMeasure;return(0,Z.Y)(q.N2,{requestMeasure:t,type:"ghostwriterKillswitch",children:(0,Z.FD)(ec.S,{css:nu.root,row:!0,gap:8,children:[(0,Z.Y)(ec.S,{css:nu.text,children:(0,Z.Y)(nc.E,{textVariant:"text"})}),(0,Z.Y)(el.K0,{alt:"Close",onClick:n,type:"button",children:(0,Z.Y)(eu.A,{})})]})})}),np=function(e){function n(e){var t,r=e.codeReference;return(0,u._)(this,n),(t=(0,c._)(this,n)).codeReference=r,t}return(0,p._)(n,e),n.prototype.toDOM=function(e){var n=this;return nd.create({onClose:function(){return X(e,n.codeReference)},requestMeasure:function(){return e.requestMeasure()}})},n}(a.xO),nf=t(38802),nh=(0,eq.eU)(0),nm=(0,eq.eU)(function(e){return e(nh)<=q.bX?"compact":"normal"}),ng=new ei.E(function(e){var n=e.id,t=e.requestMeasure,r=e.codeReference,o=e.updateCodeBlock,a=e.acceptSuggestion,l=e.onClose,s=e.autoFocus,c=e.updateDiffSelection,u=e.source,d=function(){var e=A();(null==e?void 0:e.completed)===void 0&&(null==F?void 0:F.completed)&&(e=F),(null==e?void 0:e.code)?((0,eT.u4)(eT.AZ.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"modify",message_content:e.code,source:u}),a(e.code)):L()},p=function(){var e,n;N.current=H,(0,eT.u4)(eT.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"modify",message_content:H,source:u}),S({message:H,type:eD.Z1T.TRANSFORM_CODE,codeReference:{code:r.code,range:r.range,filePath:r.filePath,fileContent:null!==(e=r.fileContent)&&void 0!==e?e:"",fileVersion:r.fileVersion,language:null!==(n=r.language)&&void 0!==n?n:"",referenceType:eD.fDX.INLINE}})},f=(0,eE.k)().assistantInlineMode,h=(0,eE.UK)().hasAccessToAdvancedModel,m=(0,ex._)((0,i.useState)(!1),2),g=m[0],v=m[1],w=(0,eE.lW)(),y=(0,eE.q4)(),b=eJ({onCode:o,getFileContext:(0,eN.H)(),assistantMode:f}),S=b.sendMessage,Y=b.stopMessage,A=b.getCode,C=b.loading,x=b.completed,k=b.error,_=b.clearError,D=(0,ex._)((0,i.useState)(!1),2),E=D[0],R=D[1],I=(0,ex._)((0,i.useState)(null),2),F=I[0],T=I[1],P=(0,eF.A)(c);(0,i.useEffect)(function(){if(C){P.current(em.Suggestion);return}(x||E)&&P.current(k?em.Original:em.Compare)},[P,x,E,k,C]);var L=(0,i.useCallback)(function(){Y(),l()},[Y,l]),U=(0,i.useCallback)(function(){(0,eT.u4)(eT.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"modify",source:u}),L()},[L,u]),N=(0,i.useRef)(null),O=function(){(0,eT.u4)(eT.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"modify",message_content:H,source:u}),Y()},M=(0,i.useRef)(null),B=(0,q.D3)({id:n,inputRef:M,loading:C,onSubmit:function(){j?d():p()},onClose:U}),H=B.value,z=B.setValue,W=B.onKeyDown,G=B.escPressed,V=(0,eE.Gk)(),j=V&&!k&&(x||E)&&N.current===H,K=(0,ex._)((0,i.useState)(function(){return(0,eq.y$)()}),1)[0],$=(0,eK.Xr)(nh,{store:K}),J=(0,eK.md)(nm,{store:K}),Q=(0,eQ.A)(function(e){return $(e.width)});(0,i.useEffect)(function(){var e="inline-ai/last-sent-value/".concat(n),t="inline-ai/last-completed/".concat(n),r="inline-ai/last-code-res/".concat(n),i=nf.A.get(e,"string"),o=nf.A.get(t,"boolean"),a=nf.A.get(r,"object");return i&&(N.current=i),R(!!o&&o),a&&T({code:a.code,completed:a.completed,error:a.error}),function(){nf.A.set(t,x||o);var n=A();if((null==n?void 0:n.completed)!==void 0&&nf.A.set(r,n),N.current){var i=N.current;if(0===i.length){nf.A.remove(e);return}nf.A.set(e,i)}}},[x,A,n]);var X="basic"===f?eE.a:eE.K6,ee=r.code.length>X,en=(0,eE.jt)(),et=(0,eE.hT)(),er=en&&(et===eD.g32.AGENT_STATE_RUNNING||et===eD.g32.AGENT_STATE_PAUSING);return y?(0,Z.Y)(q.Rc,{inlineActionType:"Modify",closeAction:L}):er?(0,Z.Y)(q.ce,{inlineActionType:"Modify",closeAction:L}):(0,Z.FD)(Z.FK,{children:[(0,Z.FD)(q.y1,{requestMeasure:t,type:"generateCode",error:k,clearError:_,innerRef:Q,children:[(0,Z.Y)(q.pd,{value:H,inputRef:M,onChange:function(e){return z(e.currentTarget.value)},placeholder:"Enter a prompt to modify selected lines",onKeyDown:W,autoFocus:s}),(0,Z.FD)(q.wi,{children:[(0,Z.FD)(Z.FK,{children:[(0,Z.Y)(q.sb,{type:"transformCode",readableModelName:h?w.advancedModel.name.readable:w.basicModel.name.readable}),x||E?(0,Z.Y)(el.K0,{alt:"Rerun the same prompt",onClick:function(){return p()},size:12,colorway:"grey",disabled:!V,children:(0,Z.Y)(e1.A,{})}):null]}),j?(0,Z.FD)(Z.FK,{children:[(0,Z.Y)(eO.$n,{variant:"outlined",size:"small",text:"Reject",onClick:function(){var e=A();(null==e?void 0:e.completed)===void 0&&(null==F?void 0:F.completed)&&(e=F),(0,eT.u4)(eT.AZ.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"modify",message_content:(null==e?void 0:e.code)?e.code:"",source:u}),U()}}),(0,Z.Y)(eO.$n,{size:"small",text:"Accept",colorway:"blurple",onClick:d,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,Z.Y)(q.XT,{escPressed:G,connecting:!V,loading:C,disabled:!H||!H.trim()||ee,promptPresentation:"normal"===J,onClick:function(){C?O():p()},codeLengthExceeded:ee})]})]}),(0,Z.Y)(e0.A,{isOpen:g,onClose:function(){return v(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}},reloadPageAfterPurchaseComplete:!0})]})}),nv=function(e){function n(e){var t,r=e.id,i=e.codeReference,o=e.source;return(0,u._)(this,n),(t=(0,c._)(this,n)).id=r,t.codeReference=i,t.source=o,t}(0,p._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this.id,t=this.codeReference,r=this.source,i=ng.create({id:n,requestMeasure:function(){return e.requestMeasure()},codeReference:t,onClose:function(){return X(e,t)},acceptSuggestion:function(n){return et(e,n,t)},updateCodeBlock:function(n){en(e,n)},updateDiffSelection:function(n){e.dispatch({effects:eg.of(n)})},autoFocus:!0,source:r});return i.style.position="sticky",i.style.top="0px",i.style.zIndex="10",i},t.updateDOM=function(e,n){var t=this.codeReference;return ng.update(e,function(e){return(0,e_.jM)(e,function(e){e.requestMeasure=function(){return n.requestMeasure()},e.codeReference=t,e.onClose=function(){return X(n,t)},e.acceptSuggestion=function(e){return et(n,e,t)},e.updateCodeBlock=function(e){return en(n,e)},e.updateDiffSelection=function(e){n.dispatch({effects:eg.of(e)})},e.autoFocus=!1})}),!0},t.eq=function(e){return er(this.codeReference,e.codeReference)},n}(a.xO),nw=t(60799),ny=Y.LU.blurpleDimmest,nb=Y.LU.accentPrimaryDimmest,nS=a.Lz.theme({".cm-pocket-highlight":{backgroundColor:Y.LU.blurpleDimmest,opacity:.2},"@keyframes moveGradient":{"0%":{backgroundPositionX:"100%"},"100%":{backgroundPositionX:"0%"}},".cm-pocket-highlight-loading":{background:"linear-gradient(90deg, ".concat(Y.LU.blurpleDimmest,", ").concat(nb,", ").concat(ny,", ").concat(nb,")"),backgroundSize:"300% 100%",backgroundPositionX:"0%",animation:"moveGradient 2s linear infinite"}}),nY=a.Lz.decorations.compute([eh.z,ev,ew.Md],function(e){var n=e.field(eh.z),t=e.facet(ew.Md);if(!n||!t||n.codeReference.filePath!==t)return a.NZ.none;var r=e.doc.lineAt(n.codeReference.range.indexFrom).from,i={generateCode:e8,transformCode:nv,explainCode:eZ,ghostwriterKillswitch:np,codeLengthExceeded:ef}[n.type],o=a.NZ.widget({widget:new i({id:n.id,codeReference:n.codeReference,source:n.source}),block:!0,side:0}).range(r);return a.NZ.set(o)}),nA=(0,a.qd)({above:!1,update:function(e){return(0,l.$H)(e,eh.z)},markers:function(e){var n=e.state.field(eh.z),t=e.state.facet(ew.Md);if(!n||!t||n.codeReference.filePath!==t)return[];var r=n.codeReference.range.indexFrom,i=n.codeReference.range.indexTo,l=e.state.doc.lineAt(i);l.from>=r&&l.to===i&&i<e.state.doc.length&&(i+=1);var s=o.OF.range(r,i),c=n.loading&&n.codeReference.range.indexFrom<n.codeReference.range.indexTo?"cm-pocket-highlight-loading":"cm-pocket-highlight";return a.Ip.forRange(e,c,s)}}),nC=j.compute([eh.z,eh.Q,ew.Md,ev],function(e){var n=e.field(eh.z),t=e.field(eh.Q),r=e.facet(ew.Md),i=e.field(ev);return n&&t&&r&&n.codeReference.filePath===r&&"transformCode"===n.type&&i===em.Compare?o.VR.of({from:n.codeReference.range.indexFrom,to:n.codeReference.range.indexTo,insert:t},e.doc.length).apply(e.doc):null}),nx=s.x.compute([eh.z,eh.Q,ew.Md],function(e){var n=e.field(eh.z),t=e.field(eh.Q),r=e.facet(ew.Md);return n&&t&&r&&n.codeReference.filePath===r&&"generateCode"===n.type?o.VR.of({from:n.codeReference.range.indexTo,to:n.codeReference.range.indexTo,insert:t},e.doc.length):null});function nk(e){var n=e.onGenerateCode,t=(0,nw.f)().isTeamWithAiDisabled,r=nl.use(n);return(0,i.useMemo)(function(){var e=[nS,eh.z,eh.Q,nY,nA,ev,nC,eA,nx,r];return t||e.push(r),e},[r,t])}},52355:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M9.341 6.066 12 18.43l2.655-12.364a3.57 3.57 0 0 0 .029-1.183.748.748 0 0 1-.042-.21 2.262 2.262 0 0 0-.721-1.188 3.12 3.12 0 0 0-1.923-.735 3.12 3.12 0 0 0-1.923.735 2.263 2.263 0 0 0-.721 1.189.747.747 0 0 1-.042.209 3.57 3.57 0 0 0 .029 1.183Zm-1.565-.642a5.61 5.61 0 0 0 .096.944l2.46 11.441-5.034-8.286a3.551 3.551 0 0 1-.281-.7.755.755 0 0 0-.038-.148c-.152-.652-.1-1.313.187-1.846.336-.626 1.087-1.242 2.61-1.405Zm.248-1.525c-2.108.127-3.501.957-4.18 2.22-.398.74-.51 1.562-.42 2.353-1.179.603-1.866 1.732-2.09 2.892-.257 1.334.07 2.85 1.11 3.817a.758.758 0 0 0 .037.032l9.045 7.368a.75.75 0 0 0 .948 0l9.045-7.368a.723.723 0 0 0 .038-.032c1.039-.968 1.366-2.483 1.109-3.817-.224-1.161-.913-2.292-2.094-2.894.09-.79-.023-1.61-.42-2.351-.68-1.263-2.073-2.093-4.18-2.22a3.76 3.76 0 0 0-1.062-1.542c-.906-.795-2.08-1.107-2.912-1.107-.832 0-2.006.312-2.912 1.107A3.76 3.76 0 0 0 8.024 3.9Zm8.196 1.525a5.607 5.607 0 0 1-.096.944l-2.457 11.44 5.03-8.285a3.543 3.543 0 0 0 .309-.801c.166-.667.117-1.347-.176-1.893-.336-.626-1.087-1.242-2.61-1.405Zm3.932 4.54a5.077 5.077 0 0 1-.162.32l-5.092 8.388 5.653-4.605c.568-.542.823-1.481.642-2.419-.133-.688-.486-1.298-1.041-1.684ZM9.1 18.67l-5.094-8.386a5.033 5.033 0 0 1-.16-.317c-.554.385-.906.994-1.039 1.681-.18.938.074 1.877.642 2.419l5.65 4.603Z",clipRule:"evenodd"})}))}},52920:(e,n,t)=>{"use strict";t.d(n,{Wu:()=>A,n3:()=>b,qv:()=>Y});var r=t(12694),i=t(86105),o=t(1889),a=t(21462),l=t(48686),s=t(40563),c=t(68423),u=t(38349),d=t(6680),p=t(61234),f=t(43974),h=t(93682),m=t(53723),g=t(31618),v=t(40043),w=t(35869),y=t(75251);function b(e){var n=e.mode,t=void 0===n?"sequential":n,r=e.onChange,i=e.disabled;return(0,o.FD)(m.e2,{disabled:void 0!==i&&i,name:"mode",onChange:r,row:!0,value:null!=t?t:"sequential",children:[(0,o.Y)(m.$O,{id:"sequential",text:"Sequential",value:"sequential"}),(0,o.Y)(m.$O,{id:"parallel",text:"Parallel",value:"parallel"})]})}var S=(0,p.x)({root:[f.wp.p(8),f.wp.colWithGap(8),f.wp.maxHeight(520),f.wp.overflow("auto"),f.wp.backgroundColor.backgroundDefault,f.wp.borderRadius(0,0,4,4),f.wp.border({color:d.LU.backgroundHigher})],header:[f.wp.pb(4)],connectors:[f.wp.position.relative,f.wp.zIndex(0)],inputRow:[f.wp.position.relative],switchInputs:[f.wp.position.relative,f.wp.align.center,f.wp.justify.spaceBetween],nameWarning:[{color:d.LU.redDefault}],task:[f.wp.position.relative,f.wp.zIndex(1)],tasks:[f.wp.pl(12),f.wp.pb(8),f.wp.position.relative],taskItem:[f.wp.position.relative]});function Y(e){var n,t=e.workflow,r=e.readOnlyMode,i=e.addTask,a=e.reorderTask,l=e.taskIds,u=e.workflowIndex,d=e.simplified;return(0,o.FD)(w.S,{children:[t.tasks.length>0?(0,o.Y)(s.i,{mode:null!==(n=t.mode)&&void 0!==n?n:"sequential"}):null,(0,o.Y)(w.S,{css:S.tasks,gap:8,children:t.tasks.map(function(e,n,i){var p,f,h,m;return(0,o.FD)(w.S,{css:S.taskItem,children:[(0,o.Y)(s.L,{dragAble:!r,css:S.connectors,mode:t.mode,hideBottom:n>=i.length-1}),void 0!==u?(0,o.Y)(c.YZ,{css:S.task,disabled:r,format:null!==(h=null===(p=t.metadata)||void 0===p?void 0:p.generated)&&void 0!==h&&h,lastTask:1===i.length,onReorder:a,workflowIndex:u,taskIndex:n,simplified:d}):(0,o.Y)(c.S2,{css:S.task,disabled:r,format:null!==(m=null===(f=t.metadata)||void 0===f?void 0:f.generated)&&void 0!==m&&m,lastTask:1===i.length,onReorder:a,taskIndex:n,initialConfig:t.tasks[n],onChange:function(){},onRemove:function(){},simplified:d})]},l?l[n]:n)})}),r?null:(0,o.Y)(h.$n,{iconLeft:(0,o.Y)(y.A,{}),text:"Add task",onClick:i})]})}function A(e){var n,t=e.index,s=e.readOnly,c=(0,u.wS)(),d=(0,u.j3)(t),p=(0,u.XO)(),f=(0,u.Ss)(),h=(0,u.af)(),m=(0,u.IW)(),y=void 0!==s&&s||(null==d?void 0:null===(n=d.metadata)||void 0===n?void 0:n.generated)||(null==d?void 0:d.name)==="Project"&&"agent"===d.author,A=(0,a.useMemo)(function(){return p.filter(function(e){return e===(null==d?void 0:d.name)}).length>1},[d,p]),C=(0,a.useMemo)(function(){var e;return Array.from({length:null!==(e=null==d?void 0:d.tasks.length)&&void 0!==e?e:0},function(e){return(0,l.Ak)()})},[null==d?void 0:d.tasks.length]);return d?(0,o.FD)(w.S,{css:S.root,children:[(0,o.Y)(v.EY,{variant:"small",color:"dimmest",children:"Workflow"}),A?(0,o.FD)(v.EY,{variant:"small",css:S.nameWarning,children:[d.name," already exists"]}):null,(0,o.Y)(w.S,{css:S.header,row:!0,gap:8,align:"center",children:(0,o.Y)(g.pd,{onBlur:c,value:d.name,placeholder:"Name of your workflow",onChange:function(e){f(t,function(n){n.name=e.currentTarget.value})},disabled:y})}),(0,o.Y)(w.S,{css:S.switchInputs,row:!0,gap:4,children:(0,o.FD)(w.S,{children:[(0,o.Y)(v.EY,{variant:"small",color:"dimmest",children:"Mode"}),(0,o.Y)(b,{mode:d.mode,onChange:function(e){f(t,function(n){n.mode=e}),c()},disabled:y})]})}),(0,o.FD)(w.S,{css:S.inputRow,gap:4,children:[(0,o.Y)(v.EY,{variant:"small",color:"dimmest",children:"Tasks"}),(0,o.Y)(Y,{workflow:d,readOnlyMode:y,addTask:function(){return m(t)},reorderTask:function(e,n){var o=null==d?void 0:d.tasks;if(o&&e!==n){var a=(0,i._)(o),l=(0,r._)(a.splice(e,1),1)[0];a.splice(n,0,l);var s=(0,r._)(C.splice(e,1),1)[0];C.splice(n,0,s),h({workflowIndex:t},a,{persist:!0}),c()}},taskIds:C,workflowIndex:t})]})]}):(0,o.Y)(v.EY,{children:"Workflow not found"})}},53046:(e,n,t)=>{"use strict";t.d(n,{F:()=>i});var r=t(72004);function i(e){var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var t=e.state===r.qOk.IN_PROGRESS,i=n.agentTimelineEventContents,o=i.toolName,a=i.toolData;if("screenshot_tool"===o)return"".concat(t?"Taking":"Took"," a screenshot");switch(null==a?void 0:a.$kind){case"deployData":return"Suggested deploying project";case"createPostgresqlDatabaseData":return"Created PostgreSQL database";case"sqlExecutionData":return"".concat(t?"Executing":"Executed"," SQL query `").concat(a.sqlExecutionData.command,"`");case"fileEditData":return"".concat(t?"Editing":"Edited"," `").concat(a.fileEditData.filePath,"`");case"createFileData":return"".concat(t?"Creating":"Created"," `").concat(a.createFileData.filePath,"`");case"readFileData":return"".concat(t?"Reading":"Opened"," `").concat(a.readFileData.filePath,"`");case"readDirData":return"".concat(t?"Reading":"Opened"," `").concat(a.readDirData.path,"` directory");case"shellExecutionData":return"".concat(t?"Executing":"Executed"," `").concat(a.shellExecutionData.command,"`");case"toolchainInstallData":return"".concat(t?"Adding":"Added"," support for ").concat(a.toolchainInstallData.modules.map(function(e){return"`".concat(e,"`")}).join(", "));case"packagerInstallData":var l=a.packagerInstallData.inputPackages;if(!t){if(0===l.length)return"Installed dependencies";return"Installed ".concat(l.map(function(e){return"`".concat(e,"`")}).join(", "))}if(0===l.length)return"Installing packages…";if(0===l.length)return"Installing dependencies…";return"Installing ".concat(l.map(function(e){return"`".concat(e,"`")}).join(", "),"…");case"packagerUninstallData":var s=a.packagerUninstallData.inputPackages;return"Uninstalled ".concat(s.map(function(e){return"`".concat(e,"`")}).join(", "));case"systemDependencyInstallData":return"Installed ".concat(a.systemDependencyInstallData.deps.map(function(e){return"`".concat(e,"`")}).join(", "));case"systemDependencyUninstallData":return"Uninstalled ".concat(a.systemDependencyUninstallData.deps.join(", "));case"searchFileData":return"".concat(t?"Searching":"Searched",' "').concat(a.searchFileData.filePath,'" for "').concat(a.searchFileData.query,'"');case"searchFilesystemData":return"".concat(t?"Searching":"Searched",' for "').concat(a.searchFilesystemData.queryDescription,'"');case"screenshotData":return"".concat(t?"Taking":"Took"," a screenshot");case"agentPlanStepBegin":case"planProgressData":case"presentResultsToolData":case"deployConfigData":return null;case"workflowsStartToolData":return"Started `".concat(a.workflowsStartToolData.name,"`");case"workflowsRestartToolData":return"Restarted `".concat(a.workflowsRestartToolData.name,"`");case"workflowsStopToolData":return"Stopped `".concat(a.workflowsStopToolData.name,"`");case"workflowsSetRunConfigToolData":var c=a.workflowsSetRunConfigToolData,u=c.name,d=c.command;if(t||0===u.length||0===d.length)return"Configuring run…";return"Configured `".concat(u,"` to run `").concat(d,"`");case"workflowsRemoveRunConfigToolData":return"Removed configuration for `".concat(a.workflowsRemoveRunConfigToolData.name,"`");case"blueprintsSetup":var p=[],f=!0,h=!1,m=void 0;try{for(var g,v=a.blueprintsSetup.blueprintData[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var w=g.value;""!==w.displayName.trim()&&p.push(w.displayName)}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}if(0===p.length)return null;return"Integrating with ".concat(p.map(function(e){return"`".concat(e,"`")}).join(", "));default:return t?"Working…":"Did something…"}}},53306:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(17844),i=t(93629),o=t(17459),a=t(1889),l=t(61234),s=t(43974),c=t(26705),u=(0,l.x)({checked:[s.wp.backgroundColor.backgroundHigher],unchecked:[s.wp.color.foregroundDimmest]});function d(e){var n=e.alt,t=e.icon,l=e.checked,s=e.onClick,d=(0,o._)(e,["alt","icon","checked","onClick"]);return(0,a.Y)(c.K0,(0,i._)((0,r._)({},d),{css:l?u.checked:u.unchecked,alt:"".concat(l?"Disable":"Enable"," ").concat(n),onClick:s,children:t}))}},53447:(e,n,t)=>{"use strict";t.d(n,{A:()=>p,v:()=>u});var r=t(1889),i=t(21462),o=t(94965),a=t(74673),l=t(61234),s=t(43974),c=t(87860),u=a.f+1,d=(0,l.x)({inlinePlaceholder:[s.wp.visibility.hidden,{pointerEvents:"none"}],portal:[s.wp.position.absolute,s.wp.zIndex(u)]});function p(e){var n=e.isActive,t=e.children,a=(0,i.useRef)(null),l=(0,i.useRef)(null),s=(0,o.my)(a.current),u=null==s?void 0:s.rect,p=n&&null!=u;return(0,r.FD)(r.FK,{children:[(0,r.Y)("div",{ref:a,css:p?d.inlinePlaceholder:void 0,children:t}),p?(0,r.Y)(c.Z,{children:(0,r.Y)("div",{ref:l,css:d.portal,style:{left:u.left,top:u.top,height:u.height,width:u.width},children:t})}):null]})}},53677:(e,n,t)=>{"use strict";t.d(n,{g:()=>s});var r=t(29935),i=t(12694),o=t(82643),a=t(21462),l=t(6960);function s(e){var n=e.secrets,t=e.replId,s=(0,i._)((0,a.useState)(null),2),c=s[0],u=s[1],d=(0,l.R_)({variables:{replId:t}}).data;return(0,a.useEffect)(function(){function e(){return(e=(0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return[4,n.read()];case 1:return u.apply(void 0,[e.sent()]),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[n]),{devSecrets:(0,a.useMemo)(function(){if(!c)return null;var e=new Map;if((null==d?void 0:d.getRepl.__typename)==="Repl"&&d.getRepl.sharedSecretLinks&&(null===(a=d.currentUser)||void 0===a?void 0:a.secrets.__typename)==="SharedSecretConnection"){var n=d.currentUser.secrets.items,t=!0,r=!1,o=void 0;try{for(var a,l,s=d.getRepl.sharedSecretLinks[Symbol.iterator]();!(t=(l=s.next()).done);t=!0)!function(){var t=l.value,r=n.find(function(e){return e.id===t.secret.id});r&&e.set(t.alias,r.value)}()}catch(e){r=!0,o=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw o}}}var u=!0,p=!1,f=void 0;try{for(var h,m=c.entries()[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var g=(0,i._)(h.value,2),v=g[0],w=g[1];e.set(v,w)}}catch(e){p=!0,f=e}finally{try{u||null==m.return||m.return()}finally{if(p)throw f}}return e},[d,c])}}},53799:(e,n,t)=>{"use strict";t.d(n,{v:()=>A,A:()=>Y});var r=t(17844),i=t(12694),o=t(96907),a=t.n(o),l=t(67201),s=t(71077),c=t(40208),u=t(17459),d=t(90629),p=t(38589),f=t(48281),h="exit status 1",m=t(29935),g=t(86105),v=t(82643),w=t(82891);function y(){return(y=(0,m._)(function(e){var n,t,r,i,o,a,l;return(0,v.YH)(this,function(s){switch(s.label){case 0:if(t=e.container,0===(r=(0,u._)(e,["container"])).query.trim().length)return[2,b(f.F.EMPTY_QUERY)];if(t.getConnectionState()===w.KN.DISCONNECTED)return[2,b(f.F.CONTAINER_DISCONNECTED)];if(t.getConnectionState()===w.KN.CONNECTING)return[2,b(f.F.CONTAINER_CONNECTING)];return[4,(n=t).exec.apply(n,(0,g._)((0,p.Qq)(r)))];case 1:if(o=(i=s.sent()).output,a=i.error)switch(a){case h:return[2,b(f.F.EMPTY_RESULTS)];case"signal: broken pipe":return[2,b(f.F.PARTIAL_RESULTS)];case"Channel closed":return[2,b(f.F.CHANNEL_CLOSED)];default:return d.Cp(Error("Ripgrep search command failed with error: ".concat(a))),[2,{error:a,data:null}]}if(!(null==o?void 0:o.trim())||!(l=(0,p.xo)()(o))||0===l.filesMap.size)return[2,b(f.F.EMPTY_RESULTS)];return[2,b(l.error,l.filesMap)]}})})).apply(this,arguments)}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{error:e,data:n}}var S="File Search Used";function Y(e){var n=e.container,t=e.onError,i=e.onUpdate,o=e.onLoadingStateChange,m=e.isStreaming,g=e.trackLatency,v=void 0!==g&&g,w=(0,s.A)({container:n}),y=[],b=(0,l.A)(),Y=Date.now(),A=function(e){i(y=e)};return a()(function(e){var n=(0,l.A)();b=n,Y=Date.now(),t(null),o(!0);var i=!0;if(""===e.query){A([]),o(!1);return}!function(e){var n=e.execer,t=e.onComplete,r=e.onError,i=e.onParse,o=(0,u._)(e,["execer","onComplete","onError","onParse"]);if(0===o.query.length){t("abort");return}var a=new TextEncoder,l=(0,p.xo)(),s=0,c=0,m=function(){},g=function(e){r(e),t("error")},v=function(e){if(0===s&&"finished"===e){g(f.F.EMPTY_RESULTS);return}"finished"===e?t(e,{bytes:c}):t(e),m()},w=n.onOutput(function(e){var n=a.encode(e).length;c+=n;var t=l(e);if(t){var r=t.error,o=t.filesMap,u=t.filesMapChanges;r&&g(r),s=o.size,u.forEach(function(e){var n=o.get(e);n&&o.set(e,(0,p.l8)(n))}),i(o,u)}}),y=n.onStderr(function(e){if(e.trim()===h)return g(f.F.EMPTY_RESULTS);g(f.F.INVALID_COMMAND)});m=function(){w(),y()};var b=(0,p.Qq)(o);n.request({args:b,noUserEnv:!0}).then(function(e){if(e.error)return e.error.trim()===h?g(f.F.EMPTY_RESULTS):g(f.F.INVALID_COMMAND);v("finished")}).catch(function(e){return d.Cp(Error("Ripgrep search command failed with error: ".concat(e))),g(f.F.INVALID_COMMAND)})}((0,r._)({execer:w,onComplete:function(r,i){if(b===n){o(!1);var a,l,s,u,d="finished"===r&&i&&i.bytes===p.mj;d&&t(f.F.PARTIAL_RESULTS),v&&c.vF.time("".concat(S," - complete"),Date.now()-Y,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(s=null==e?void 0:null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,hasExcludes:(null!==(u=null==e?void 0:null===(l=e.excludeGlobs)||void 0===l?void 0:l.length)&&void 0!==u?u:0)>0,latency:Date.now()-Y,isPartialResults:d})}},onError:function(e){b===n&&t(e)},onParse:function(t,r){if(b===n){if(i){if(v){var a,l,s,u;c.vF.time("".concat(S," - first_chunk"),Date.now()-Y,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(s=null==e?void 0:null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,hasExcludes:(null!==(u=null==e?void 0:null===(l=e.excludeGlobs)||void 0===l?void 0:l.length)&&void 0!==u?u:0)>0})}A((0,p.Nn)([],t,r)),i=!1}else A((0,p.Nn)(y,t,r));m&&o(!1)}},mode:"json",context:0},e))},200)}function A(e){var n=e.container,t=a()(function(e,t,o){(function(e){return y.apply(this,arguments)})((0,r._)({container:n,mode:"json",context:1,isCaseSensitive:!1},e)).then(function(e){var n=e.data?function(e){var n={},t=!0,r=!1,o=void 0;try{for(var a,l=e.entries()[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=(0,i._)(a.value,2),c=s[0],u=s[1];n[c]=u.lines.map(function(e){return{content:e.content,lineNumber:e.lineNumber,matches:e.matches.map(function(e){return{column:e.start,length:e.length}})}}).filter(function(e){return e.matches.length>0})}}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}return n}(e.data):{},r=e.error===f.F.PARTIAL_RESULTS;if(r);else if(e.error)return t({error:e.error,results:null,isPartialResult:r});return t({error:null,results:n,isPartialResult:r})}).catch(o)},200);return function(e){return new Promise(function(n,r){return t(e,n,r)})}}},53933:(e,n,t)=>{"use strict";t.d(n,{a:()=>l});var r=t(12584),i=t(41114),o=t(22422);function a(){var e=(0,r._)(["\n  fragment WorkspaceHeaderReplMetadataRepl on Repl {\n    id\n    title\n    iconUrl\n    isFeaturedRepl\n    user {\n      id\n      ...UserLinkUser\n    }\n    org {\n      id\n      name\n      image\n      slug\n      type\n    }\n    project {\n      id\n      title\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.J1)(a(),o.N)},54046:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M6.196 4.696a1.475 1.475 0 0 1 1.043-.432h2.897a.632.632 0 0 0 0-1.264H7.239A2.74 2.74 0 0 0 4.5 5.74v12.642a2.74 2.74 0 0 0 2.74 2.74h11.378c.35 0 .632-.283.632-.632v-8.534a.738.738 0 0 0-1.475 0v3.687H7.24a2.74 2.74 0 0 0-1.475.431V5.74c0-.39.156-.766.432-1.043ZM7.4 17.12h10.376v2.528H7.399a1.52 1.52 0 0 1-1.007-.37 1.197 1.197 0 0 1-.417-.894c0-.335.15-.657.417-.894a1.52 1.52 0 0 1 1.007-.37Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M16.389 2.266c-.13-.355-.648-.355-.778 0l-.893 2.44a.407.407 0 0 1-.264.247l-2.166.663a.396.396 0 0 0 0 .762l2.166.669c.123.038.22.13.264.247l.893 2.44c.13.355.648.355.778 0l.893-2.44a.407.407 0 0 1 .264-.247l2.166-.666a.396.396 0 0 0 0-.762l-2.166-.666a.407.407 0 0 1-.264-.247l-.893-2.44Z",clipRule:"evenodd"})]}))}},54258:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(17844),i=t(93629),o=t(17459),a=t(1889),l=t(38343);let s=function(e){var n=e.level,t=e.fontFamily,s=e.fontWeight,c=e.foreground,u=e.align,d=e.truncate,p=e.className,f=e.children,h=e.style,m=(0,o._)(e,["level","fontFamily","fontWeight","foreground","align","truncate","className","children","style"]),g=(0,r._)({fontSize:l.A.levels[n],fontFamily:l.A.fontFamily[void 0===t?"sans-serif":t],fontWeight:l.A.fontWeight[void 0===s?"medium":s],color:l.A.foreground[void 0===c?1:c],textAlign:void 0===u?"left":u},h);return void 0!==d&&d&&(g=(0,i._)((0,r._)({},g),{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"100%"})),(0,a.Y)("h".concat(n),(0,i._)((0,r._)({},m),{style:g,className:void 0===p?"":p,children:f}))}},54310:(e,n,t)=>{"use strict";t.d(n,{g:()=>a});var r=t(12694),i=t(86105),o=t(21462);function a(e){var n=e.items,t=e.maxVisibleItems,a=e.reverse,l=(0,r._)((0,o.useState)(!1),2),s=l[0],c=l[1],u=n.length-t,d=u>1,p=(0,o.useMemo)(function(){var e=a?(0,i._)(n).reverse():n;return d&&!s?a?e.slice(0,t):e.slice(-t):e},[n,d,s,t,a]);return{isExpanded:s,setIsExpanded:c,maxItemsReached:d,visibleItems:p,hiddenItemsCount:u}}},54401:(e,n,t)=>{"use strict";t.d(n,{J:()=>V});var r=t(1889),i=t(75152),o=t(24998),a=t(67668),l=t(29935),s=t(12694),c=t(82643),u=t(21462),d=t(90629),p=t(11597),f=t(67337),h=t(23718),m=t(86105),g=t(4880),v=t(16088),w=t(82315),y=t(84789),b=t(45771),S=t(6680),Y=t(61234),A=t(43974),C=t(26705),x=t(41845),k=t(35869),_=t(48795),D=(0,b.i7)({"0%":{backgroundColor:S.LU.accentPrimaryDimmer},"100%":{backgroundColor:"transparent"}}),E=(0,Y.x)({filter:[A.wp.p(4),A.wp.border({color:S.LU.outlineDimmest,direction:"bottom"})],tableRoot:[A.wp.flex.growAndShrink(1),A.wp.width("100%"),A.wp.overflow("auto"),{'&[data-resizing="true"]':{overflow:"hidden",pointerEvents:"none"}}],virtualTable:[A.wp.width("fit-content"),A.wp.position.relative],tableHeader:[A.wp.display.flex,A.wp.flex.row,A.wp.backgroundColor.backgroundDefault,A.wp.position.sticky,A.wp.zIndex(1),A.wp.top(0),A.wp.noSelect],headerCell:[A.wp.color.foregroundDefault,A.wp.fontWeight.medium,A.wp.fontSize(12),A.wp.px(6),A.wp.display.flex,A.wp.align.center,A.wp.border({color:S.LU.outlineDimmest,direction:"bottom"}),A.wp.border({color:S.LU.outlineDimmest,direction:"right"}),{height:25,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:first-child":{background:S.LU.backgroundDefault,position:"sticky",left:0,zIndex:1}}],tableRow:[A.wp.flex.row,{'&[data-highlighted="true"]':{animation:"".concat(D," ").concat(2e3,"ms ease-out forwards")}}],tableCell:[A.wp.display.flex,A.wp.align.center,A.wp.color.foregroundDimmer,A.wp.fontSize(12),A.wp.px(6),A.wp.border({color:S.LU.outlineDimmest,direction:"bottom"}),A.wp.border({color:S.LU.outlineDimmest,direction:"right"}),{height:25,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:first-child":{justifyContent:"center",position:"sticky",left:0,background:S.LU.backgroundDefault}}],resizeHandle:[A.wp.position.absolute,A.wp.top(0),A.wp.right(0),A.wp.height("100%"),A.wp.width(4),{cursor:"col-resize","&:hover":{backgroundColor:S.LU.accentPrimaryDefault}}]}),R=function(e,n){var t=(0,s._)((0,u.useState)(e),2),r=t[0],i=t[1],o=(0,u.useMemo)(function(){return new w.$S(e,{selector:function(e){return Object.values(e).join(" ")},casing:"case-insensitive"})},[e]);return(0,u.useEffect)(function(){if(!n){i(e);return}o.find(n).then(function(e){i(e.map(function(e){return e.item}))}).catch(function(){})},[e,o,n]),r},I=function(e){var n=(0,s._)((0,u.useState)(e),2),t=n[0],r=n[1],i=(0,s._)((0,u.useState)(null),2),o=i[0],a=i[1],l=(0,s._)((0,u.useState)(0),2),c=l[0],d=l[1],p=(0,s._)((0,u.useState)(0),2),f=p[0],h=p[1],g=(0,u.useCallback)(function(e,n){a(e),d(n.clientX),h(t[e])},[t]),v=(0,u.useCallback)(function(e){if(null!==o){var n=Math.max(50,Math.min(300,f+(e.clientX-c)));r(function(e){var t=(0,m._)(e);return t[o]=n,t})}},[o,f,c]),w=(0,u.useCallback)(function(){a(null)},[]);return(0,u.useEffect)(function(){if(null!==o){var e=function(e){return v(e)},n=function(){return w()};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",n),function(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)}}},[w,v,o]),{columnWidths:t,setColumnWidths:r,resizingColumn:o,handleResizeStart:g}};function F(e){var n=e.data,t=e.initialLine,i=e.openInEditor,o=(0,y.a)(),a=(0,s._)((0,u.useState)(""),2),l=a[0],c=a[1],d=(0,u.useMemo)(function(){if(0===n.length)return{headers:[],data:[],calculatedColumnWidths:[]};var e=[""].concat((0,m._)(n[0])),t=e.map(function(e,n){return{key:n.toString(),label:e,isRowHeader:0===n}}),r=[],i=Array(e.length).fill(0);n.slice(1).forEach(function(e,n){var o={0:(n+1).toString(),key:n.toString()};t.slice(1).forEach(function(n,t){var r=e[t]||"";o[(t+1).toString()]=r,i[t+1]=Math.max(i[t+1],r.length)}),r.push(o)});var o=i.map(function(e,n){return 0===n?25:Math.min(Math.max(8*Math.max(e,t[n].label.length),50),300)});return{headers:t,data:r,calculatedColumnWidths:o}},[n]),p=d.headers,f=d.data,h=d.calculatedColumnWidths,w=R(f,l),b=I(h),S=b.columnWidths,Y=b.setColumnWidths,A=b.resizingColumn,D=b.handleResizeStart,F=(0,s._)((0,u.useState)(null),2),T=F[0],P=F[1];(0,u.useEffect)(function(){Y(h)},[h,Y]);var L=(0,u.useRef)(null),U=(0,g.Te)({count:w.length,getScrollElement:function(){return L.current},estimateSize:function(){return 25},overscan:10,rangeExtractor:function(e){var n=new Set([0].concat((0,m._)((0,v.vp)(e))));return(0,m._)(n)}});return(0,u.useEffect)(function(){if(t&&w.length>t){var e=t-2;U.scrollToIndex(e,{align:"center"}),P(e);var n=setTimeout(function(){return P(null)},2e3);return function(){return clearTimeout(n)}}},[w.length,t,U]),(0,r.FD)(r.FK,{children:[(0,r.Y)(k.S,{css:E.filter,children:(0,r.Y)(x.I,{value:l,onChange:function(e){return c(e.target.value)},onClear:function(){return c("")}})}),(0,r.Y)("div",{css:E.tableRoot,ref:L,"data-resizing":null!==A,children:(0,r.FD)("div",{css:E.virtualTable,style:{height:"".concat(U.getTotalSize(),"px"),width:"".concat(S.reduce(function(e,n){return e+n},0),"px")},children:[(0,r.Y)("div",{css:E.tableHeader,children:p.map(function(e,n){return(0,r.FD)("div",{css:E.headerCell,style:{width:"".concat(S[n],"px")},children:[e.label,o||0===n?null:(0,r.Y)("div",{css:E.resizeHandle,onMouseDown:function(e){return D(n,e)},role:"separator"})]},e.key)})}),U.getVirtualItems().map(function(e){var n=w[e.index];return n?(0,r.Y)("div",{css:E.tableRow,"data-index":e.index,"data-highlighted":e.index===T,style:{position:"absolute",top:0,left:0,width:"100%",height:"".concat(e.size,"px"),transform:"translateY(".concat(25+e.start,"px)")},children:p.map(function(e,t){var o=n[e.key];return(0,r.Y)("div",{css:E.tableCell,style:{width:"".concat(S[t],"px")},children:0===t?(0,r.Y)(C.K0,{colorway:"primary",alt:"Edit at this line",onClick:function(){return i(parseInt(o,10)+1)},size:18,children:(0,r.Y)(_.A,{})}):o},e.key)})},e.key.toString()):null})]})})]})}var T=t(31425),P=t(26969),L=t(1566),U=t(3910),N=t(5408),O=t(56185),M=t(32633),B=(0,Y.x)({root:[A.wp.flex.column,A.wp.height("100%"),A.wp.width("100%"),A.wp.overflow("hidden")],errorContainer:[A.wp.p(8)],loadingContainer:[A.wp.flex.growAndShrink(1),A.wp.center]});function H(e){var n=e.filePath,i=e.initialLine,o=e.performPaneOperation,a=(0,f.A)().fs,m=(0,s._)((0,u.useState)([]),2),g=m[0],v=m[1],w=(0,u.useCallback)(function(e){o({operation:"replace",pane:{type:"codeEditor",data:{path:n,line:e}}}),o({operation:"commit"})},[o,n]);(0,L.Qt)(function(){return{commands:[{commands:[{match:h.G2,data:{label:"Open in Editor",icon:(0,r.Y)(N.A,{}),type:"action",run:function(){return w()}}}]}]}},[w]);var y=(0,s._)((0,u.useState)(!1),2),b=y[0],S=y[1],Y=(0,s._)((0,u.useState)(!0),2),A=Y[0],C=Y[1];return(0,u.useEffect)(function(){var e,r=(e=(0,l._)(function(e){var n;return(0,c.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t.e(5800).then(t.t.bind(t,75800,23))];case 1:return r.sent().default.parse(e,{complete:function(e){v(e.data),C(!1),S(!1)}}),[3,3];case 2:return n=r.sent(),d.Cp(n),S(!0),[3,3];case 3:return[2]}})}),function(n){return e.apply(this,arguments)});return a.watchTextFile(n,{onReady:function(e){return r(e.initialContent)},onChange:function(e){return r(e.latestContent)},onMoveOrDelete:function(e){e.eventType===p.dV.Delete&&o({operation:"replace",pane:{type:"commands",data:{autoFocus:!0}}})}})},[n,a,o]),(0,r.FD)(k.S,{css:B.root,children:[(0,r.Y)(T.ou,{path:n,performPaneOperation:o,children:(0,r.Y)(P.k,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:function(){return w()},icon:(0,r.Y)(N.A,{})})}),b?(0,r.Y)(k.S,{css:B.errorContainer,children:(0,r.Y)(U.N,{icon:(0,r.Y)(M.A,{}),colorway:"red",text:"This CSV could not be displayed."})}):(0,r.Y)(r.FK,{children:A?(0,r.Y)(k.S,{css:B.loadingContainer,children:(0,r.Y)(O.A,{})}):(0,r.Y)(F,{data:g,openInEditor:w,initialLine:i})})]})}var z=t(51895),W=t(79442),G=i.ZU.Object({type:i.ZU.Literal("csvPreview"),data:i.ZU.Object({path:i.ZU.String(),line:i.ZU.Optional(i.ZU.Integer())})}),V={Content:function(e){var n=e.options.performPaneOperation,t=e.pane.data,i=t.path,o=t.line;return(0,r.Y)(H,{filePath:i,performPaneOperation:n,initialLine:o})},Icon:function(e){var n=e.size;return(0,r.Y)(W.A,{size:n})},getTitle:function(e){return e.data.path?(0,a.WP)(e.data.path):"CSV Preview"},description:"Preview CSV files in a tabular format",category:z.bY.Other,decode:function(e){return o.WT.Decode(G,e)}}},54409:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(29935),i=t(82643),o=t(1889),a=t(21462),l=t(96907),s=t.n(l),c=t(81239),u=t(63892),d=t(67337),p=t(96866),f=t(58196),h=t(6620);function m(){var e=(0,d.A)(),n=(0,h.h)(h.bO),t=(0,h.h)(h.hQ),o=(0,h.Ou)(h.hQ),l=(0,h.ob)(h.hQ),m=(0,h.h)(h.E2),g=(0,h.cW)(),v=(0,h.wy)(),w=(0,h.Ff)(),y=(0,h.hq)(),b=(0,c.A)(),S=(0,p.J)().configs,Y=(0,h.ov)();return(0,a.useEffect)(function(){if(0!==S.length){var n=[],t=!1,r=!0,i=!1,a=void 0;try{for(var l,c=S[Symbol.iterator]();!(r=(l=c.next()).done);r=!0)!function(){var r=l.value,i=Promise.resolve(),a=v(r.id),c=s()(function(){var n=v(r.id),a=o();if(n===h.d_.Idle||(null==a?void 0:a.id)!==r.id){var l=(0,f.N)(r.id);i=i.then(function(){if(!t)return l.getInstalledPackages({id:r.id,services:e}).then(function(e){!t&&(w(r.id,e),g(r.id,h.d_.Idle))})})}},500);if(r.packagerFiles.length>0){var u=!0,d=!1,p=void 0;try{for(var m,y=r.packagerFiles[Symbol.iterator]();!(u=(m=y.next()).done);u=!0)!function(){var t=m.value;if(!t.endsWith("/")){var r=null!==a&&a!==h.d_.Initializing&&a!==h.d_.Uninitialized,i=e.fs.watchFilePath(t,{onChange:function(){if(!r){r=!0;return}c()}});n.push(i)}}()}catch(e){d=!0,p=e}finally{try{u||null==y.return||y.return()}finally{if(d)throw p}}}}()}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return function(){t=!0;var e=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(e=(o=a.next()).done);e=!0)(0,o.value)()}catch(e){r=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(r)throw i}}}}},[S,e.fs]),(0,a.useEffect)(function(){var n,t=!1;return(n=(0,r._)(function(){var n,r,o,a,l,s;return(0,i.YH)(this,function(i){n=!0,r=!1,o=void 0;try{for(a=function(){var n=s.value,r=v(n.id);if(r&&r!==h.d_.Uninitialized&&r!==h.d_.Initializing)return"continue";g(n.id,h.d_.Initializing),(0,f.N)(n.id).getInstalledPackages({id:n.id,services:e}).then(function(e){!t&&(w(n.id,e),g(n.id,h.d_.Idle))})},l=S[Symbol.iterator]();!(n=(s=l.next()).done);n=!0)a()}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return[2]})}),function(){return n.apply(this,arguments)})(),function(){t=!0}},[S]),(0,a.useEffect)(function(){if(null===t&&0!==n.length){var e=n[0];v(e.id)===h.d_.Idle&&y(e)}},[m,t,n]),(0,a.useEffect)(function(){if(null!==t){var n,o=!1;return(n=(0,r._)(function(){var n,r,a,s,c,d,p,m,v,y,S,A,C,x,k,_,D,E;return(0,i.YH)(this,function(i){switch(i.label){case 0:switch(n=(0,f.N)(t.id),t.kind){case h.Vr.Install:return[3,1];case h.Vr.Uninstall:return[3,6]}return[3,11];case 1:g(t.id,h.d_.Installing),r=!0,a=!1,s=void 0;try{for(c=t.pkgs[Symbol.iterator]();!(r=(d=c.next()).done);r=!0)p=d.value,(0,u.u4)(u.AZ.PACKAGE_MANAGER_USED,{action:"installed",packageId:p.name})}catch(e){a=!0,s=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw s}}i.label=2;case 2:return i.trys.push([2,4,,5]),[4,n.install({id:t.id,pkgs:t.pkgs,services:e})];case 3:return i.sent(),1===t.pkgs.length?b.showNotice("Installed ".concat(null!==(m=t.pkgs[0].name)&&void 0!==m?m:"package")):b.showNotice("Installed ".concat(t.pkgs.length," packages")),[3,5];case 4:return i.sent(),1===t.pkgs.length?b.showError("Failed to install ".concat(null!==(v=t.pkgs[0].name)&&void 0!==v?v:"package")):b.showError("Failed to install ".concat(t.pkgs.length," packages")),Y(t.id,t.pkgs),[3,5];case 5:return[3,11];case 6:g(t.id,h.d_.Uninstalling),y=!0,S=!1,A=void 0;try{for(C=t.pkgs[Symbol.iterator]();!(y=(x=C.next()).done);y=!0)k=x.value,(0,u.u4)(u.AZ.PACKAGE_MANAGER_USED,{action:"removed",packageId:k.name})}catch(e){S=!0,A=e}finally{try{y||null==C.return||C.return()}finally{if(S)throw A}}i.label=7;case 7:return i.trys.push([7,9,,10]),[4,n.uninstall({id:t.id,pkgs:t.pkgs,services:e})];case 8:return i.sent(),1===t.pkgs.length?b.showNotice("Removed ".concat(null!==(_=t.pkgs[0].name)&&void 0!==_?_:"package")):b.showNotice("Removed ".concat(t.pkgs.length," packages")),[3,10];case 9:return i.sent(),1===t.pkgs.length?b.showError("Failed to remove ".concat(null!==(D=t.pkgs[0].name)&&void 0!==D?D:"package")):b.showError("Failed to remove ".concat(t.pkgs.length," packages")),Y(t.id,t.pkgs),[3,10];case 10:return[3,11];case 11:if(o)return[2];return[4,n.getInstalledPackages({id:t.id,services:e})];case 12:if(E=i.sent(),o)return[2];return w(t.id,E),g(t.id,h.d_.Idle),l(null),[2]}})}),function(){return n.apply(this,arguments)})(),function(){o=!0}}},[t]),null}function g(e){var n=e.children,t=(0,h.PY)();return(0,o.FD)(h.tB.Provider,{value:t,children:[(0,o.Y)(m,{}),n]})}},54468:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(1889),i=t(65983);function o(e){var n=e.children,t=e.config,o=(0,i.ob)(i.Ai);return t.id&&o(t),(0,r.Y)(r.FK,{children:n})}function a(e){var n=e.children,t=e.config,a=(0,i.PY)();return(0,r.Y)(i.uB.Provider,{value:a,children:t?(0,r.Y)(o,{config:t,children:n}):n})}},54540:(e,n,t)=>{"use strict";t.d(n,{b:()=>c});var r=t(1889),i=t(45771),o=t(6680),a=t(43974),l=t(35869),s=(0,i.AH)([a.wp.borderRadius("full"),a.wp.position.absolute,a.wp.top(-3),a.wp.right(-3)]);function c(e){var n=e.color,t=void 0===n?o.LU.redStronger:n,i=e.small,a=e.className,c=i?6:8;return(0,r.Y)(l.S,{className:a,style:{backgroundColor:t,width:c,height:c,zIndex:2,boxShadow:"0 0 0 2px ".concat(o.LU.backgroundDefault)},css:s})}},54861:(e,n,t)=>{"use strict";t.d(n,{k:()=>o});var r=t(21462),i=t(84789);function o(){var e=(0,i.a)();return(0,r.useMemo)(function(){return!e&&function(){if("undefined"==typeof document)return!1;var e=document.createElement("input");return"webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e}()},[e])}},55343:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(22531),i=t(29760);function o(e,n,t){t&&i.A(e,n),n&&(void 0===n?"undefined":(0,r._)(n))==="object"?(n.skipOverflowHiddenElements=!0,i.A(e,n)):i.A(e,{skipOverflowHiddenElements:!0})}},55372:(e,n,t)=>{"use strict";t.d(n,{z:()=>o});var r=t(1889),i=t(45771);function o(){return(0,r.Y)(i.mL,{styles:[{body:{overflow:"hidden"}}]})}},55482:(e,n,t)=>{"use strict";t.d(n,{R:()=>i,U:()=>o});var r=t(75152),i=r.ZU.Object({title:r.ZU.String(),screen:r.ZU.Object({height:r.ZU.Number(),width:r.ZU.Number()})}),o=[{title:"iPhone SE",screen:{height:667,width:375}},{title:"iPhone XR",screen:{height:896,width:414}},{title:"iPhone 12 Pro",screen:{height:844,width:390}},{title:"iPhone 14 Pro Max",screen:{height:932,width:430}},{title:"Pixel 7",screen:{height:915,width:412}},{title:"Samsung Galaxy S8+",screen:{height:740,width:360}},{title:"Samsung Galaxy S20 Ultra",screen:{height:915,width:412}},{title:"Surface Duo",screen:{height:720,width:540}},{title:"Galaxy Z Fold 5",screen:{height:882,width:344}},{title:"Samsung Galaxy A51/71",screen:{height:914,width:412}}]},55530:(e,n,t)=>{"use strict";t.d(n,{N:()=>r});var r=function(e){return e.FileNode="FILE_NODE",e.FileHeaderTab="FILE_HEADER_TAB",e.Code="CODE",e.Pane="PANE",e.NewPane="NEW_PANE",e}({})},55675:(e,n,t)=>{"use strict";t.d(n,{G2:()=>v,R7:()=>m,hr:()=>d,jQ:()=>a,jg:()=>c,lY:()=>y,nZ:()=>b,ou:()=>f,x6:()=>S});var r=t(21462),i=t(44370),o=t(69338),a=function(e,n){var t=e.dir,r=e.channel,i=e.stringifiedCmd,o=e.cmd;return(!n.direction||t===n.direction)&&(!n.channels.length||!!n.channels.includes(o.channel))&&(!!(!n.regexp||!n.regexp.test||r.name&&n.regexp.test(r.name)||r.service&&n.regexp.test(r.service))||n.regexp.test(i))},l=(0,i.eU)([]),s=(0,i.eU)([]);function c(){return(0,r.useDeferredValue)((0,o.md)(s))}var u=(0,i.eU)(null,function(e,n,t){a(t,e(h))&&n(s,function(e){return e.concat(t)}),n(l,function(e){return e.concat(t)})});function d(){return(0,o.Xr)(u)}var p=(0,i.eU)(null,function(e,n){n(l,[]),n(s,[])});function f(){return(0,o.Xr)(p)}var h=(0,i.eU)({regexp:null,direction:"",highlightOnly:!1,channels:[]});function m(){return(0,o.md)(h)}var g=(0,i.eU)(null,function(e,n,t){var r;n(h,t),n(s,(r=e(l),(t.regexp||t.direction||t.channels.length)&&!t.highlightOnly?r.filter(function(e){return a(e,t)}):r))});function v(){return(0,o.Xr)(g)}var w=(0,i.eU)(!1);function y(){return(0,o.md)(w)}function b(){return(0,o.Xr)((0,r.useMemo)(function(){return(0,i.eU)(null,function(e,n,t){return n(w,t)})},[]))}function S(){return(0,o.Xr)((0,r.useMemo)(function(){return(0,i.eU)(null,function(e,n){return n(w,function(e){return!e})})},[]))}},56450:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7 2.25a.75.75 0 0 1 .692.462l5 12a.75.75 0 0 1-1.384.577L9.72 11.48H4.28l-1.587 3.808a.75.75 0 0 1-1.384-.578l5-12A.75.75 0 0 1 7 2.25ZM4.904 9.98h4.192L7 4.95 4.904 9.98ZM14.25 8a.75.75 0 0 1 .75-.75h4A3.75 3.75 0 0 1 21.25 14 3.75 3.75 0 0 1 19 20.75h-4a.75.75 0 0 1-.75-.75V8Zm1.5 6.75v4.5H19a2.25 2.25 0 0 0 0-4.5h-3.25Zm3.25-1.5a2.25 2.25 0 0 0 0-4.5h-3.25v4.5H19Z",clipRule:"evenodd"})}))}},56679:(e,n,t)=>{"use strict";t.d(n,{c:()=>u});var r=t(1889),i=t(317),o=t(61234),a=t(43974),l=t(2527),s=t(40043),c=(0,o.x)({root:[a.wp.py(8),a.wp.px(12),a.wp.borderRadius()]});function u(e){var n=e.aiName;return(0,r.Y)(l.ui,{elevated:!0,css:c.root,gap:8,align:"center",children:(0,r.FD)(s.EY,{children:["Guests are not allowed to use ",n," in ",i.Lm," Plan user's repls."]})})}},56711:(e,n,t)=>{"use strict";t.d(n,{T:()=>x});var r=t(17844),i=t(93629),o=t(1889),a=t(72004),l=t(26496),s=t(63892),c=t(83846),u=t(33508),d=t(21462);t(97378);var p=t(6680),f=t(61234),h=t(43974),m=t(93682),g=t(35869),v=h.kL.min(400),w=(0,f.x)({root:[h.wp.width("100%")],narrowContainer:[h.wp.flex.column,h.wp.gap(8),h.wp.width("100%"),h.wp.overflowX("auto"),h.wp.scrollbar.hidden,(0,c._)({margin:"0 auto"},v,{display:"none"})],narrowRow:[h.wp.flex.row,h.wp.gap(8),h.wp.width("100%"),{display:"flex",flexWrap:"nowrap",paddingLeft:16,"&::after":{content:'""',width:8,flexShrink:0}}],wideContainer:[h.wp.gap(8),h.wp.width("100%"),(0,c._)({display:"none"},v,{display:"flex",maxWidth:500,flexWrap:"wrap",alignSelf:"center",justifyContent:"center",width:"fit-content"})],button:[h.wp.maxWidth(350),(0,c._)({justifyContent:"flex-start",fontSize:p.LU.fontSizeDefault,color:p.LU.foregroundDimmer,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},v,{width:"auto",justifyContent:"center"})]});function y(e){var n=e.prompts,t=e.onClick,a=(0,d.useMemo)(function(){var e=Math.ceil(n.length/2);return{halfLength:e,firstRow:n.slice(0,e),secondRow:n.slice(e)}},[n]),l=a.halfLength,s=a.firstRow,c=a.secondRow,p=(0,d.useMemo)(function(){return n.slice(0,6)},[n]);return(0,o.FD)(g.S,{css:w.root,children:[(0,o.FD)(g.S,{css:w.narrowContainer,children:[(0,o.Y)(g.S,{css:w.narrowRow,children:s.map(function(e,n){return(0,u.n)(b,(0,i._)((0,r._)({},e),{index:n,key:e.description,onClick:function(){return t(e)}}))})}),(0,o.Y)(g.S,{css:w.narrowRow,children:c.map(function(e,n){return(0,u.n)(b,(0,i._)((0,r._)({},e),{index:n+l,key:e.description,onClick:function(){return t(e)}}))})})]}),(0,o.Y)(g.S,{css:w.wideContainer,row:!0,children:p.map(function(e,n){return(0,u.n)(b,(0,i._)((0,r._)({},e),{index:n,key:e.description,onClick:function(){return t(e)}}))})})]})}function b(e){(0,l.qK)();var n=void 0,t=null!=n?n:e.description;return(0,o.Y)(m.$n,{css:w.button,text:t,onClick:function(n){e.onClick()},"aria-label":t})}var S=t(42784),Y=t(40043),A=t(83378),C=(0,f.x)({root:[h.wp.overflowY("auto"),h.wp.flex.growAndShrink(1),h.wp.flex.column,h.wp.align.center,h.wp.width("100%"),{margin:"0 auto",containerType:"inline-size"}],content:[h.wp.flex.column,h.wp.gap(24),h.wp.py(32),h.wp.align.center,h.wp.justify.center,h.wp.width("100%"),h.wp.minHeight("100%"),h.wp.overflowX("auto")],headerSection:[h.wp.maxWidth(320),h.wp.px(8),{textAlign:"center"}],promptSuggestionsContainer:[h.wp.pb(8),h.wp.width("100%"),h.wp.overflowX("auto"),h.wp.scrollbar.hidden,h.wp.pb(8)],promptSuggestionsContent:[h.wp.flex.column,h.wp.align.center,h.wp.width("100%"),{maxWidth:"100%"}],headerIcon:[{color:p.LU.outlineStronger}],footerContainer:[h.wp.maxWidth("100%"),h.wp.px(8),{textAlign:"center"}]});function x(e){var n,t=(n=({sessionType:e.sessionType}).sessionType,(0,d.useMemo)(function(){return n===a.dF3.CHAT?[{icon:(0,o.Y)(S.A,{}),description:"Inspect for errors"},{icon:(0,o.Y)(S.A,{}),description:"Improve the visual design"},{icon:(0,o.Y)(S.A,{}),description:"Brainstorm new features"},{icon:(0,o.Y)(S.A,{}),description:"Add dark mode toggle"},{icon:(0,o.Y)(S.A,{}),description:"Optimize for mobile"},{icon:(0,o.Y)(S.A,{}),description:"Explain this code"}]:[{icon:(0,o.Y)(S.A,{}),description:"Check my app for bugs"},{icon:(0,o.Y)(S.A,{}),description:"Add payment processing"},{icon:(0,o.Y)(S.A,{}),description:"Connect with an AI Assistant"},{icon:(0,o.Y)(S.A,{}),description:"Add SMS message sending"},{icon:(0,o.Y)(S.A,{}),description:"Add a database"},{icon:(0,o.Y)(S.A,{}),description:"Add authenticated user login"}]},[n]));return(0,o.Y)(k,(0,i._)((0,r._)({},e),{promptSuggestions:t}))}function k(e){var n=e.titleContent,t=e.showPromptSuggestions,r=e.sessionType,i=e.onPromptSuggestionClick,c=e.promptSuggestions,u=e.footerContent,d=r===a.dF3.CHAT,p=d?l.BP:l.g$;return(0,o.Y)(g.S,{css:C.root,children:(0,o.FD)(g.S,{css:C.content,children:[(0,o.FD)(g.S,{css:C.headerSection,gap:16,children:[(0,o.Y)(g.S,{gap:8,align:"center",children:(0,o.FD)(o.FK,{children:[(0,o.Y)(A.A,{size:48,css:C.headerIcon,style:{transform:"scale(1.33)"}}),null!=n?n:(0,o.Y)(g.S,{row:!0,gap:4,align:"center",children:(0,o.Y)(Y.Y9,{level:1,variant:"subheadBig",children:"New chat with ".concat(p)})})]})}),(0,o.Y)(Y.EY,{color:"dimmest",children:d?l.C3:l.RB})]}),void 0===t||t?(0,o.Y)(g.S,{css:C.promptSuggestionsContainer,children:(0,o.Y)(g.S,{css:C.promptSuggestionsContent,children:(0,o.Y)(y,{onClick:function(e){var n,t=null!==(n=e.promptToFill)&&void 0!==n?n:e.description;(0,s.u4)(s.AZ.ASSISTANT_USED,{action:"prompt_suggestion_clicked",title:e.title}),null==i||i({intent:e.intent,text:t})},prompts:c})})}):null,u?(0,o.Y)(g.S,{css:C.footerContainer,children:u}):null]})})}},57198:(e,n,t)=>{"use strict";t.d(n,{Q:()=>o});var r=t(26496),i=t(68209);function o(){var e=(0,r.NC)().sessions.agent;return(0,i.Rj)(function(){return e.select(function(e){return null==e?void 0:e.id})},[e])}},57447:(e,n,t)=>{"use strict";t.d(n,{C:()=>l});var r=t(1889),i=t(28896),o=t(95525),a=t(9974);function l(e){var n=e.org,t=e.disabled,l=e.onClick,s=n?(0,i.EG)({slug:n.slug}):void 0,c=s?s.home.href:"/home",u=s?s.home.as:"/~";return(0,r.Y)(o.A,{"aria-label":"Home",alt:"Home",dataCy:"home-button",href:c,size:32,as:u,disabled:t,onClick:l,children:(0,r.Y)(a.A,{})})}},57501:(e,n,t)=>{"use strict";t.d(n,{W:()=>l});var r=t(29935),i=t(82643),o=t(21462),a=t(26496),l=function(){var e,n,t=(0,a.dI)(),l=(0,o.useCallback)((e=(0,r._)(function(e){var n,r,o,a,l;return(0,i.YH)(this,function(i){switch(i.label){case 0:n=e.file,r=e.onError,i.label=1;case 1:if(i.trys.push([1,7,,8]),!n.type.startsWith("image/"))return[3,3];return[4,s(n)];case 2:return a=i.sent(),[3,4];case 3:a=n,i.label=4;case 4:return o=a,[4,t.getResourceUploadUrl(o.type)];case 5:if(!(l=i.sent()).ok)return r("Failed to get upload URL for file: ".concat(o.name)),[2,void 0];if(!l.payload.downloadUrl)return r("Server didn't provide a download URL for: ".concat(o.name)),[2,void 0];return[4,fetch(l.payload.uploadUrl,{method:"PUT",body:o,headers:{"Content-Type":o.type}})];case 6:if(!i.sent().ok)return r("Failed to upload file: ".concat(o.name)),[2,void 0];return[2,{file:o,publicUrl:l.payload.downloadUrl}];case 7:return i.sent(),r("Error processing file: ".concat(n.name)),[2,void 0];case 8:return[2]}})}),function(n){return e.apply(this,arguments)}),[t]);return(0,o.useCallback)((n=(0,r._)(function(e){var n,t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return n=e.files,t=e.onError,[4,Promise.all(n.map(function(e){return l({file:e,onError:t})}))];case 1:return[2,r.sent().filter(function(e){return void 0!==e})]}})}),function(e){return n.apply(this,arguments)}),[l])},s=function(){var e=(0,r._)(function(e){var n,t,r,o,a;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(!e.type.startsWith("image/")||e.size<=3145728||"image/svg+xml"===e.type)return[2,e];i.label=1;case 1:if(i.trys.push([1,9,,10]),n=document.createElement("img"),!document.createElement("canvas").getContext("2d"))throw Error("Could not get canvas context");return[4,new Promise(function(t,r){n.onload=function(){return t()},n.onerror=function(){return r(Error("Failed to load image: ".concat(e.name)))},n.src=URL.createObjectURL(e)})];case 2:return i.sent(),t=n.width,r=n.height,[4,c(n,t,r,o=.7,e.type,e)];case 3:a=i.sent(),i.label=4;case 4:if(!(a.size>3145728&&o>.1))return[3,6];return[4,c(n,t,r,o=Math.max(.1,o-.1),e.type,e)];case 5:return a=i.sent(),[3,4];case 6:if(!(a.size>3145728&&t>100&&r>100))return[3,8];return[4,c(n,t=Math.floor(.9*t),r=Math.floor(.9*r),o,e.type,e)];case 7:return a=i.sent(),[3,6];case 8:return URL.revokeObjectURL(n.src),[2,a];case 9:return i.sent(),[2,e];case 10:return[2]}})});return function(n){return e.apply(this,arguments)}}(),c=function(e,n,t,r,i,o){var a=document.createElement("canvas");a.width=n,a.height=t;var l=a.getContext("2d");if(!l)throw Error("Could not get canvas context");return l.drawImage(e,0,0,n,t),new Promise(function(e){a.toBlob(function(n){if(!n)throw Error("Canvas to Blob conversion failed");e(new File([n],o.name,{type:i,lastModified:o.lastModified}))},i,r)})}},57642:(e,n,t)=>{"use strict";t.d(n,{$p:()=>d,XV:()=>a,h7:()=>l,lX:()=>u});var r=t(52097),i=t(46762),o=t(69543),a=.01,l=function(e,n){var t=n.resourceUsageType,r=n.forceGib,i=n.precision,o=n.skipUnits,a=n.additional,l=n.minimumValue,s=n.truncateToMillions,u=n.gibsDisplayAsBytes,d=c({input:e,resourceUsageType:t,forceGib:void 0!==r&&r,precision:void 0===i?4:i,minimumValue:void 0===l?null:l,truncateToMillions:void 0!==s&&s,gibsDisplayAsBytes:void 0!==u&&u});return void 0!==o&&o?d.formattedValue:void 0!==a&&a?[d.formattedValue,"additional",d.units].join(" "):[d.formattedValue,d.units].join(" ")};function s(e,n){var t=n.precision,r=n.minimumValue,i=n.forceGib,o=r&&0!==e;return e>=0x40000000*(null!=r?r:1)||i?o&&e<0x40000000*r?{formattedValue:"<".concat(r.toLocaleString(void 0,{minimumFractionDigits:t})),units:"GiB"}:{formattedValue:d(e).toFixed(t),units:"GiB"}:o&&e<1048576*r?{formattedValue:"<".concat(r.toLocaleString(void 0,{minimumFractionDigits:t})),units:"MiB"}:{formattedValue:u(e).toFixed(t),units:"MiB"}}var c=function(e){var n=e.input,t=e.resourceUsageType,a=e.forceGib,l=e.precision,c=e.minimumValue,u=e.truncateToMillions,d=e.gibsDisplayAsBytes,p=c&&0!==n&&n<c;switch(t){case"Bytes":return s(n,{precision:l,minimumValue:c,forceGib:a});case"GiB":if(0===n)return{formattedValue:n.toFixed(l),units:"GiB"};if(d)return s(0x40000000*n,{precision:l,minimumValue:c,forceGib:!1});if(p)return{formattedValue:"<".concat(c.toLocaleString(void 0,{minimumFractionDigits:l})),units:"GiB"};return{formattedValue:n.toFixed(l),units:"GiB"};case"GiB-months":if(0===n)return{formattedValue:n.toFixed(l),units:"GiB-months"};if(p)return{formattedValue:"<".concat(c.toLocaleString(void 0,{minimumFractionDigits:l})),units:"GiB-months"};return{formattedValue:n.toFixed(l),units:"GiB-months"};case"ComputeUnits":if(n>=1e6&&u)return{formattedValue:(n/1e6).toLocaleString(void 0,{maximumFractionDigits:n>=1e6&&u?2:0})+" million",units:"compute units"};return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"compute units"};case"ComputeHours":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"compute hours"};case"Requests":if(n>=1e6&&u)return{formattedValue:(n/1e6).toLocaleString(void 0,{maximumFractionDigits:n>=1e6&&u?2:0})+" million",units:"requests"};return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"requests"};case"Site":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"site"};case"Hours":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:2}),units:"hours"};case"Deployments":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:2}),units:"days"};case"Tokens":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"tokens"};case"Minutes":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"minutes"};case"Dollars":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:2,style:"currency",currency:"USD"}),units:"dollars"};case"PlanSteps":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"plan steps"};case"Checkpoints":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"checkpoints"};case"EditRequests":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:(0,o.A)(i.go)};case"None":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:""};default:(0,r.A)(t)}},u=function(e){return e/1048576},d=function(e){return e/0x40000000}},58196:(e,n,t)=>{"use strict";t.d(n,{N:()=>u});var r=t(29935),i=t(82643),o="index.html",a=/^\s*<script src="https:\/\/cdnjs\.cloudflare\.com\/ajax\/libs\/([^/]+)\/([^/]+)\/.+.js"><\/script>$/;let l={name:"html",getInstalledPackages:function(e){var n=e.services.fs;return(0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,n.stat(o)];case 1:var t;if(!e.sent().exists)return[2,[]];return[2,new Promise((t=(0,r._)(function(e){var t;return(0,i.YH)(this,function(r){return t=n.watchTextFile(o,{onReady:function(n){var r=n.initialContent,i=[],o=!0,l=!1,s=void 0;try{for(var c,u=r.split("\n")[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value.match(a);d&&i.push({name:d[1],version:d[2]})}}catch(e){l=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(l)throw s}}t(),e(i)},onError:function(){t(),e([])}}),[2]})}),function(e){return t.apply(this,arguments)}))]}})})()},getPackageInfo:function(e){var n=e.name;return(0,r._)(function(){var e,t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/info/".concat(encodeURIComponent(n)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=r.sent()).ok)return[2,void 0];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,e.json()];case 3:if(t=r.sent())return[2,{name:t.name,version:t.version,description:t.description,homepageURL:t.link,sourceCodeURL:t.include}];return[3,5];case 4:return r.sent(),[2,void 0];case 5:return[2]}})})()},search:function(e){var n=e.query;return(0,r._)(function(){var e;return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,fetch("/data/cdnjs/search/".concat(encodeURIComponent(n)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=t.sent()).ok)return[2,[]];return[4,e.json()];case 2:return[2,t.sent().map(function(e){return{name:e.name,version:e.version,description:e.description,homepageURL:e.link,sourceCodeURL:e.include}})]}})})()},install:function(e){var n=e.pkgs,t=e.services.fs;return(0,r._)(function(){var e,a,l,s,c,u,d;return(0,i.YH)(this,function(p){switch(p.label){case 0:return[4,t.stat(o)];case 1:if(!p.sent().exists)return[2];e=!0,a=!1,l=void 0,p.label=2;case 2:p.trys.push([2,7,8,9]),s=function(){var e;return(0,i.YH)(this,function(n){switch(n.label){case 0:var a;return e=u.value,[4,new Promise((a=(0,r._)(function(n){var a;return(0,i.YH)(this,function(l){return a=t.watchTextFile(o,{onReady:function(o){var l=o.initialContent,s=o.writeChange;return(0,r._)(function(){var r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:r='<script src="'.concat(e.sourceCodeURL,'"><\/script>\n'),-1===(o=l.indexOf("<script"))&&(o=l.indexOf("</body>")),-1===o&&(o=l.length),s({from:o,insert:r}),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,t.flush()];case 2:case 3:return i.sent(),[3,5];case 4:return a(),n(),[7];case 5:return[2]}})})()},onError:function(){a(),n()}}),[2]})}),function(e){return a.apply(this,arguments)}))];case 1:return n.sent(),[2]}})},c=n[Symbol.iterator](),p.label=3;case 3:if(e=(u=c.next()).done)return[3,6];return[5,(0,i.Ju)(s())];case 4:p.sent(),p.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return d=p.sent(),a=!0,l=d,[3,9];case 8:try{e||null==c.return||c.return()}finally{if(a)throw l}return[7];case 9:return[2]}})})()},uninstall:function(e){var n=e.pkgs,t=e.services.fs;return(0,r._)(function(){var e,l,s,c,u,d,p;return(0,i.YH)(this,function(f){switch(f.label){case 0:return[4,t.stat(o)];case 1:if(!f.sent().exists)return[2];e=!0,l=!1,s=void 0,f.label=2;case 2:f.trys.push([2,7,8,9]),c=function(){var e;return(0,i.YH)(this,function(n){switch(n.label){case 0:var l;return e=d.value,[4,new Promise((l=(0,r._)(function(n){var l;return(0,i.YH)(this,function(s){return l=t.watchTextFile(o,{onReady:function(o){var s=o.initialContent,c=o.writeChange;return(0,r._)(function(){var r,o,u,d,p,f,h,m,g;return(0,i.YH)(this,function(i){switch(i.label){case 0:r=0,o=!0,u=!1,d=void 0;try{for(p=s.split("\n")[Symbol.iterator]();!(o=(f=p.next()).done);o=!0)(m=(h=f.value).match(a))&&(g=m[1],e.name===g&&c({from:r,to:r+h.length+1})),r+=h.length+1}catch(e){u=!0,d=e}finally{try{o||null==p.return||p.return()}finally{if(u)throw d}}i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,t.flush()];case 2:case 3:return i.sent(),[3,5];case 4:return l(),n(),[7];case 5:return[2]}})})()},onError:function(){l(),n()}}),[2]})}),function(e){return l.apply(this,arguments)}))];case 1:return n.sent(),[2]}})},u=n[Symbol.iterator](),f.label=3;case 3:if(e=(d=u.next()).done)return[3,6];return[5,(0,i.Ju)(c())];case 4:f.sent(),f.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return p=f.sent(),l=!0,s=p,[3,9];case 8:try{e||null==u.return||u.return()}finally{if(l)throw s}return[7];case 9:return[2]}})})()}};var s=t(9406);let c={name:"upm",getInstalledPackages:function(e){var n=e.id,t=e.services.packager;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,t.listSpecfile(n)];case 1:if((e=r.sent()).error||null===e.packages)return[2,[]];return[2,e.packages]}})})()},getPackageInfo:function(e){var n=e.id,t=e.name,o=e.services.packager;return(0,r._)(function(){return(0,i.YH)(this,function(e){return[2,o.fetchPackageInfo(t,n)]})})()},search:function(e){var n=e.id,t=e.query,o=e.services.packager;return(0,r._)(function(){return(0,i.YH)(this,function(e){return[2,o.searchPackages(t,n)]})})()},install:function(e){var n=e.id,t=e.pkgs,o=e.services.packager;return(0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,o.addPackages(t,n)];case 1:if(!e.sent())throw Error("Package install failed");return[2]}})})()},uninstall:function(e){var n=e.id,t=e.pkgs,o=e.services.packager;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return e=t.filter(function(e){return e.name}).map(function(e){return e.name}),[4,o.removePackages(e,n)];case 1:if(!r.sent())throw Error("Package uninstall failed");return[2]}})})()}};function u(e){switch(e){case"html":return l;case"nix":return s.A;default:return c}}},58627:(e,n,t)=>{"use strict";t.d(n,{A9:()=>C,CX:()=>R,CY:()=>P,FL:()=>x,d1:()=>k,lb:()=>F,oh:()=>U,tD:()=>D});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(50175),s=t(68197);function c(){var e=(0,i._)(["\n  fragment AnnotationsUser on User {\n    id\n    username\n    fullName\n    image\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment AnnotationMessageContent on MessageContentType {\n    __typename\n    ... on TextMessageContentType {\n      text\n    }\n    ... on PreviewMessageContentType {\n      preview\n    }\n    ... on StatusMessageContentType {\n      status\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  fragment AnnotationsUIMessage on AnnotationMessage {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    anchor {\n      id\n    }\n    timeCreated\n    content {\n      __typename\n      ...AnnotationMessageContent\n    }\n    currentUserIsAuthor\n    seen\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  fragment AnnotationsUIAnchor on AnnotationAnchor {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    path\n    otVersion\n    indexStart\n    indexEnd\n    isResolved\n    isGeneral\n    messages {\n      id\n      ...AnnotationsUIMessage\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  query AnnotationAnchorsByRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        annotationAnchors {\n          id\n          ...AnnotationsUIAnchor\n        }\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  mutation CreateAnnotationAnchor(\n    $annotationAnchor: AnnotationAnchorInput!\n    $annotationMessage: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationAnchor(\n      annotationAnchor: $annotationAnchor\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,i._)(["\n  mutation UpdateAnnotationAnchor(\n    $id: String!\n    $changes: AnnotationAnchorChangesInput!\n  ) {\n    updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i._)(["\n  mutation CreateAnnotationMessage(\n    $replId: String!\n    $anchorId: String!\n    $annotationMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationMessage(\n      replId: $replId\n      anchorId: $anchorId\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function v(){var e=(0,i._)(["\n  mutation updateThreadPreview(\n    $threadId: String!\n    $messageId: String!\n    $message: String\n  ) {\n    updateThreadPreview(\n      threadId: $threadId\n      messageId: $messageId\n      message: $message\n    )\n  }\n"]);return v=function(){return e},e}function w(){var e=(0,i._)(["\n  subscription AnnotationUpdates($replId: String!) {\n    updatedAnnotation: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function y(){var e=(0,i._)(["\n  subscription MessagePreview($threadId: String!) {\n    threadPreview(threadId: $threadId) {\n      userId\n      messageId\n      message\n    }\n  }\n"]);return y=function(){return e},e}var b={},S=(0,o.J1)(c()),Y=(0,o.J1)(u()),A=(0,o.J1)(d(),S,Y),C=(0,o.J1)(p(),S,A),x=(0,o.J1)(f(),C);function k(e){var n=(0,r._)({},b,e);return a.I(x,n)}var _=(0,o.J1)(h(),C);function D(e){var n=(0,r._)({},b,e);return l.n(_,n)}var E=(0,o.J1)(m(),C);function R(e){var n=(0,r._)({},b,e);return l.n(E,n)}var I=(0,o.J1)(g(),C);function F(e){var n=(0,r._)({},b,e);return l.n(I,n)}var T=(0,o.J1)(v());function P(e){var n=(0,r._)({},b,e);return l.n(T,n)}var L=(0,o.J1)(w(),C);function U(e){var n=(0,r._)({},b,e);return s.R(L,n)}y()},58642:(e,n,t)=>{"use strict";t.d(n,{A:()=>er});var r=t(29935),i=t(17459),o=t(12694),a=t(82643),l=t(1889),s=t(21462),c=t(93107),u=t(14075),d=t(28094),p=t(94246),f=t(91222),h=t(16907),m=t(40208),g=t(11733),v=t(63892),w=t(67337),y=t(25868);function b(e,n){var t=[];return t.push((0,y.m_)("interpreter")),t.push((0,y.m_)("entrypoint")),e&&(t.push((0,y.Ez)(e)),t.push((0,y.eH)(e))),n?(t.push((0,y.Up)(n)),t.push((0,y.dA)(n))):(t.push((0,y.m_)("compile")),t.push((0,y.m_)("deployment/build"))),t}var S=t(67668),Y=function(e){return e.Unknown="UNKNOWN",e.Npm="NPM",e.Django="DJANGO",e.Flask="FLASK",e.FastAPI="FASTAPI",e.Pyramid="PYRAMID",e.Starlette="STARLETTE",e.Streamlit="STREAMLIT",e.Rails="RAILS",e.DotNet="DOTNET",e.Cargo="CARGO",e.Make="MAKE",e.RegularRun="REGULAR_RUN",e}({}),A="package.json",C="requirements.txt",x=RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i"),k=RegExp("((node_modules)|(venv)|(bower_components)|(vendor)|(build)|(dist)|(target)|(\\.git)|(\\.vscode)|(\\.idea)).+$","i");function _(){return(_=(0,r._)(function(e,n){var t,r,i,o,l,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t=e.initRunCommand,r=e.isCompiled,!((o=new Set(i=e.allFiles)).has("Makefile")||o.has("makefile")))return[3,1];return[2,"MAKE"];case 1:if(!o.has(A))return[3,2];return[2,"NPM"];case 2:if(!o.has("Cargo.toml"))return[3,3];return[2,"CARGO"];case 3:if(!r)return[3,4];return[2,"UNKNOWN"];case 4:if(!o.has("config/application.rb"))return[3,5];return[2,"RAILS"];case 5:if(!i.some(function(e){return"csproj"===(0,S.an)(e)}))return[3,6];return[2,"DOTNET"];case 6:if(!o.has(C))return[3,8];return[4,n.readFile(C)];case 7:if(!(l=a.sent()).error){if((s=l.content.toString()).includes("django"))return[2,"DJANGO"];if(s.includes("flask"))return[2,"FLASK"];if(s.includes("fastapi"))return[2,"FASTAPI"];else if(s.includes("pyramid"))return[2,"PYRAMID"];else if(s.includes("starlette"))return[2,"STARLETTE"];else if(s.includes("streamlit"))return[2,"STREAMLIT"]}return[3,9];case 8:if(x.test(t))return[2,"REGULAR_RUN"];a.label=9;case 9:return[2,"UNKNOWN"]}})})).apply(this,arguments)}function D(){return(D=(0,r._)(function(e){var n,t,r,i;return(0,a.YH)(this,function(o){switch(o.label){case 0:return[4,e.readFile(A)];case 1:n=o.sent();try{if(!n.error&&(r=null==(t=JSON.parse(n.content.toString()))?void 0:t.scripts,i=["dev","serve","watch","start:dev","start"].find(function(e){return null==r?void 0:r[e]})))return[2,"npm run ".concat(i)]}catch(e){}return[2,"node index.js"]}})})).apply(this,arguments)}function E(){return(E=(0,r._)(function(e,n,t){var r,i,o,l;return(0,a.YH)(this,function(a){switch(r=n.initRunCommand,o=(i=n.allFiles).find(function(e){return["main.py","app.py"].includes(e)}),e){case"NPM":return[2,function(e){return D.apply(this,arguments)}(t)];case"REGULAR_RUN":var s;if(null==(l=null!==(s=i.filter(function(e){return!k.test(e)}).find(function(e){return x.test(e)}))&&void 0!==s?s:null))return[2,null];return[2,r.replace(x,l)];case"DJANGO":return[2,"python3 manage.py runserver 0.0.0.0:3000"];case"FLASK":return[2,"python ".concat(o)];case"FASTAPI":case"STARLETTE":return[2,"uvicorn ".concat(null==o?void 0:o.replace(".py",""),":app --host 0.0.0.0 --port 3000")];case"PYRAMID":return[2,"pserve development.ini"];case"STREAMLIT":return[2,"streamlit run ".concat(o)];case"RAILS":return[2,"bundle exec rails server --binding=0.0.0.0"];case"DOTNET":return[2,"dotnet run"];case"CARGO":return[2,"cargo run"];default:return[2,null]}return[2]})})).apply(this,arguments)}function R(){return(R=(0,r._)(function(e,n,t,r){var i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(0===t.length)return[2,{projType:"UNKNOWN",runCommand:null,compileCommand:null}];return[4,function(e,n){return _.apply(this,arguments)}(i={initRunCommand:e,isCompiled:n,allFiles:t},r)];case 1:return l={projType:o=a.sent()},[4,function(e,n,t){return E.apply(this,arguments)}(o,i,r)];case 2:return[2,(l.runCommand=a.sent(),l.compileCommand=function(e){switch(e){case"MAKE":return"make";case"CARGO":case"DOTNET":case"NPM":return"";default:return null}}(o),l)]}})})).apply(this,arguments)}var I=t(6680),F=t(43974),T=t(2527),P=t(35869),L=t(10342),U=t(77672),N=t(17844),O=t(93629),M=t(45771),B=t(61234),H=(0,M.i7)({"0%":{opacity:.1},"50%":{opacity:1},"100%":{opacity:.1}}),z=(0,B.x)({one:{opacity:.1,animation:"".concat(H," 1.5s ease-in-out infinite"),animationDelay:"0s"},two:{opacity:.1,animation:"".concat(H," 1.5s ease-in-out infinite"),animationDelay:"0.1s"},three:{opacity:"0.1",animation:"".concat(H," 1.5s ease-in-out infinite"),animationDelay:"0.2s"}});let W=function(e){var n=(0,L._)({},(0,U._)(e));return(0,l.FD)(l.FK,{children:[(0,l.Y)("span",(0,O._)((0,N._)({},n),{css:z.one,children:"."})),(0,l.Y)("span",(0,O._)((0,N._)({},n),{css:z.two,children:"."})),(0,l.Y)("span",(0,O._)((0,N._)({},n),{css:z.three,children:"."}))]})};function G(e){var n=e.children;return(0,l.Y)(T.ui,{background:"default",css:[F.wp.borderRadius(8),{width:"100%",height:"calc(100% - ".concat(I.LU.space2,")"),backgroundColor:I.LU.backgroundDefault,overflowY:"auto",marginTop:"0px"}],children:(0,l.Y)(P.S,{css:[F.wp.p(16),F.wp.justify.center,F.wp.align.center,{flex:"1 1 auto"}],children:n})})}function V(){return(0,l.Y)(G,{children:(0,l.FD)(P.S,{children:[(0,l.Y)(P.S,{children:"We couldn't read your .replit file"}),(0,l.Y)("a",{css:[F.wp.pt(8),{fontSize:I.LU.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/replit-workspace/configuring-repl",children:"View docs"})]})})}function j(){return(0,l.Y)(G,{children:(0,l.Y)(P.S,{children:(0,l.FD)("p",{children:["Importing from GitHub",(0,l.Y)(W,{style:{color:I.LU.foregroundDefault}})]})})})}var Z=t(49547),q=t(30536),K=t(93682),$=t(31618),J=t(10091),Q=t(40043),X=t(56185),ee=t(32633),en=P.D.a,et=(0,B.x)({root:[F.wp.maxWidth(420),F.wp.display.flex,F.wp.gap(12),F.wp.py(4),{margin:"0 auto"}],section:[F.wp.display.flex,F.wp.p(12),F.wp.gap(12)],loading:[F.wp.center,F.wp.flex.growAndShrink(1)],multiParagraph:[F.wp.flex.column,F.wp.gap(8),{a:[F.wp.display.inline]}]});let er=function(e){var n,t,y,S,A,C,x,k,_,D,E,T,L,U,N,O,M,B,H,z,W,G,er,ei,eo,ea,el,es,ec,eu,ed,ep,ef,eh,em,eg,ev,ew=e.flow,ey=(0,i._)(e,["flow"]),eb=(n=ey.closeConfigPane,t=ey.openSidebar,y=ey.onNewPaneSelected,S=ey.openConsole,A=(0,g.pE)("gitImport","boolean"),C=(0,h.A)(),k=(x=(0,w.A)()).fs,_=x.dotReplit,E=(D=(0,o._)((0,s.useState)(null),2))[0],T=D[1],U=(L=(0,o._)((0,s.useState)(null),2))[0],N=L[1],O=(0,s.useCallback)(function(){y({type:"codeEditor",data:{path:".replit"}})},[y]),(0,s.useEffect)(function(){if(!E)return _.watch(function(e){T(e.config),"NOT_FOUND"!==e.error&&N(e.error)})},[_,E]),B=(M=(0,o._)((0,s.useState)(!1),2))[0],H=M[1],W=(z=(0,o._)((0,s.useState)(""),2))[0],G=z[1],ei=(er=(0,o._)((0,s.useState)(""),2))[0],eo=er[1],el=(ea=(0,o._)((0,s.useState)(!1),2))[0],es=ea[1],eu=(ec=(0,o._)((0,s.useState)(Y.Unknown),2))[0],ed=ec[1],ef=(ep=(0,o._)((0,s.useState)(!1),2))[0],eh=ep[1],(0,s.useEffect)(function(){if(!ef)return k.watchDir(".git",{onChange:function(e){eh(e.length>0)},onMoveOrDelete:function(){eh(!0)},onError:function(){eh(!1)}})}),(0,s.useEffect)(function(){(ef||!A)&&!function(){e.apply(this,arguments)}();function e(){return(e=(0,r._)(function(){var e,n,t,r,i,o,l,s,c,u,d,f,h,g,v,w,y;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(!E)return[2];return n=(0,p.a8)(null!==(e=E.run)&&void 0!==e?e:void 0),r=(0,p.a8)(null!==(t=E.compile)&&void 0!==t?t:void 0),i=!!E.compile,[4,k.listFiles()];case 1:return o=a.sent(),[4,k.readDir(".git")];case 2:if(l=a.sent(),o.error||null==o.files||A&&l.error)return[2];return s=o.files,[4,function(e,n,t,r){return R.apply(this,arguments)}(n,i,s,k)];case 3:if(u=(c=a.sent()).projType,d=c.runCommand,f=c.compileCommand,h=s.includes("Procfile"),g=function(e,n){return e||n},v=h?g(n,d):g(d,n),w=f||r,G(v||""),eo(w),es(u!==Y.Unknown&&u!==Y.RegularRun),ed(u),!A)return[3,6];return v||m.vF.warn("Failed to autosuggest run command"),u===Y.Unknown&&m.vF.warn("Failed to detect project type"),y=b(v||"",w),[4,_.updateDotReplit(y)];case 4:return a.sent(),[4,k.flush()];case 5:a.sent(),k.persist({skipDebounce:!0}),a.label=6;case 6:return[2]}})})).apply(this,arguments)}},[_,E,k,ef,A]),eg=(0,s.useCallback)((em=(0,r._)(function(e){var n,t,r,i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.run,t=e.compile,r=e.runChanged,i=e.compileChanged,o=e.projType,(0,v.u4)(v.AZ.NIX_GH_IMPORT_USED,{action:f.s.ConfigDone,isCompiled:""!==t,runChanged:r,compileChanged:i,projType:o,replId:C}),l=b(n,t),[4,_.updateDotReplit(l)];case 1:return a.sent(),k.flush().then(function(){k.persist({skipDebounce:!0})}),[2]}})}),function(e){return em.apply(this,arguments)}),[_,k,C]),{fs:k,applyConfig:eg,closeConfigPane:n,dotReplitConfig:E,dotReplitError:U,isApplyingConfig:B,setIsApplyingConfig:H,initialBuild:ei,initialRun:W,isFrameworkRecommended:el,projType:eu,openDotReplit:O,openSidebar:t,openConsole:S}),eS=(0,u.G)(),eY=eS.modules,eA=eS.configs,eC=(0,d.A)(),ex=(0,o._)((0,s.useState)("Overview"),2),ek=ex[0],e_=ex[1],eD=(0,s.useMemo)(function(){return null==eY?void 0:eY.filter(function(e){return"replit"!==e.id})},[eY]),eE=eb.dotReplitConfig,eR=eb.dotReplitError,eI=eb.initialRun,eF=eb.initialBuild,eT=void 0===eF?"":eF,eP=eb.openConsole,eL=eb.openDotReplit,eU=eb.applyConfig,eN=eb.isApplyingConfig,eO=eb.setIsApplyingConfig,eM=eb.closeConfigPane,eB=eb.openSidebar,eH=eb.projType,ez=!!eH&&eH===Y.Rails,eW=(0,c.W)(eI,function(e){if(!e)return{message:"Add a run command"}}),eG=(0,o._)((0,s.useState)(eT),2),eV=eG[0],ej=eG[1];if((0,s.useEffect)(function(){eW.setValue(eI)},[eI]),(0,s.useEffect)(function(){ej(null!=eT?eT:"")},[eT]),eR)return(0,l.Y)(V,{});if(!eE&&"githubImport"===ew)return(0,l.Y)(j,{});if(!eY||!eD||!eA||!eC)return(0,l.Y)(P.S,{css:et.loading,children:(0,l.Y)(X.A,{})});switch(ek){case"ModuleSearch":return(0,l.Y)(q.m,{onBack:function(){return e_("Overview")},disableCategorySelection:!0,initialCategory:"Modules",openConsole:eP});case"Overview":return(0,l.FD)(P.S,{css:et.root,children:[(0,l.FD)(P.S,{css:et.section,children:[(0,l.Y)(Q.Y9,{variant:"headerDefault",level:1,children:"Configure your App"}),(0,l.Y)(J.s,{color:"dimmer",css:et.multiParagraph,children:"githubImport"===ew?(0,l.FD)(l.FK,{children:[(0,l.FD)("p",{children:["Your code was successfully imported from GitHub. We've created a"," ",(0,l.Y)("a",{href:"",onClick:function(e){e.preventDefault(),eL()},children:".replit file"}),", which configures your App's behavior."," ",(0,l.Y)("a",{href:"https://docs.replit.com/replit-workspace/configuring-repl#replit-configuration-file",target:"_blank",rel:"noopener noreferrer",children:"Learn more about .replit files."})]}),(0,l.FD)("p",{children:["To get started, verify our recommended platform dependencies and commands. If you're still deciding, try"," ",(0,l.Y)(en,{onClick:function(){return null==ey?void 0:ey.onNewPaneSelected({type:"ghostwriterChat"})},children:"asking AI"}),"."]})]}):(0,l.Y)(l.FK,{children:(0,l.FD)("p",{children:["Before configuring your Run command, make sure you've installed any"," ",(0,l.Y)(en,{onClick:function(){return null==ey?void 0:ey.onNewPaneSelected({type:"dependencies"})},children:"languages and packages"})," ","necessary for your project. If you're still deciding, try"," ",(0,l.Y)(en,{onClick:function(){return null==ey?void 0:ey.onNewPaneSelected({type:"ghostwriterChat"})},children:"asking AI"}),"."]})})})]}),"githubImport"===ew?(0,l.FD)(P.S,{css:et.section,children:[(0,l.Y)(Q.Y9,{variant:"subheadDefault",level:2,children:"Modules"}),(0,l.Y)(Q.EY,{color:"dimmer",children:"Modules combine support for programming languages, formatters, and packagers."}),(0,l.Y)(Z.A,{modules:eD}),(0,l.Y)(K.$n,{stretch:!0,colorway:"primary",variant:"outlined",type:"submit",text:"Add more modules",onClick:function(){e_("ModuleSearch")}})]}):null,(0,l.FD)(P.S,{css:et.section,children:[(0,l.Y)(P.S,{row:!0,justify:"space-between",children:(0,l.Y)(Q.Y9,{variant:"subheadDefault",level:2,children:"Commands"})}),(0,l.Y)("form",{onSubmit:(ev=(0,r._)(function(e){return(0,a.YH)(this,function(n){switch(n.label){case 0:if(e.preventDefault(),eO(!0),!eW.value)return eW.validate(),[2];return[4,eU({run:eW.value,compile:null!=eV?eV:"",runChanged:eW.value!==eI,compileChanged:eV!==eT,projType:eH})];case 1:return n.sent(),"githubImport"===ew&&(eM(),null==eB||eB()),eO(!1),[2]}})}),function(e){return ev.apply(this,arguments)}),css:[{width:"100%"}],children:(0,l.Y)(P.S,{gap:8,children:(0,l.FD)(P.S,{gap:8,children:[(0,l.FD)(P.S,{gap:8,children:[eT?(0,l.FD)(P.S,{gap:4,children:[(0,l.Y)("label",{htmlFor:"compile-sel",children:"Compile command"}),(0,l.Y)(Q.EY,{variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,l.Y)($.pd,{disabled:eN,id:"compile-sel",type:"text",value:eV,placeholder:"Enter a command to compile the program",onChange:function(e){ej(e.currentTarget.value)},css:{"&:disabled":{color:I.LU.foregroundDimmer}}})]}):null,(0,l.Y)("label",{htmlFor:"run-sel",css:[F.wp.mt(4)],"data-cy":"import-config-run-command",children:"Run command"}),(0,l.Y)($.pd,{disabled:eN,id:"run-sel",dataCy:"import-config-run-command-input",type:"text",value:eW.value,placeholder:"Enter a command to run the program",onChange:function(e){eW.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:I.LU.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),eW.error||!eW.value?(0,l.FD)(P.S,{css:[F.wp.color.accentNegativeDefault,F.wp.rowWithGap(4),F.wp.align.center],children:[(0,l.Y)(ee.A,{size:12}),(0,l.Y)(P.S,{children:eW.error?eW.error.message:"Add a run command"})]}):null]}),(0,l.FD)(Q.EY,{color:"dimmer",variant:"small",children:["Use either a dev server or start command.",(0,l.Y)(en,{css:F.wp.color.accentPrimaryStronger,target:"_blank",href:"https://docs.replit.com/replit-workspace/configuring-repl#run-command",rel:"noopener noreferrer",children:"Not sure what to use or running multiple apps?"})]}),ez?(0,l.Y)(P.S,{children:(0,l.FD)(Q.EY,{variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,l.FD)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/additional-resources/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replit’s features."]})}):null,(0,l.Y)(P.S,{css:[F.wp.flex.column,F.wp.pt(16)],children:(0,l.Y)(K.$n,{stretch:!0,colorway:"primary",type:"submit",text:eN?"Saving...":"githubImport"===ew?"Confirm and close":"Save",loading:eN,disabled:eN||!!eW.error||!eW.value,dataCy:"import-config-done"})})]})})})]})]})}}},59147:(e,n,t)=>{"use strict";t.d(n,{S:()=>i});var r=t(21462);function i(e){var n=(0,r.useRef)(!1);(0,r.useEffect)(function(){!n.current&&(n.current=!0,e())},[e])}},59170:(e,n,t)=>{"use strict";t.d(n,{D:()=>s});var r=t(75152),i=t(24998),o=t(88184),a=r.ZU.Union(Object.values(o.ik).map(function(e){return r.ZU.Literal(e)})),l=r.ZU.Object({type:r.ZU.Literal("docs"),data:r.ZU.Optional(r.ZU.Object({url:r.ZU.Optional(r.ZU.Union([a,r.ZU.Null()]))}))}),s=function(e){return i.WT.Decode(l,e)}},59510:(e,n,t)=>{"use strict";t.d(n,{u:()=>nc});var r=t(1889),i=t(21462),o=t(75152),a=t(24998),l=t(12694),s=t(17844),c=t(12584),u=t(41114),d=t(86997);function p(){var e=(0,c._)(["\n  query IntegrationsPaneAuthorizations($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        authorizations {\n          editSecrets {\n            isAuthorized\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,u.J1)(p()),m=t(16907),g=t(79071),v=t(63892),w=t(24373),y=t(86105),b=t(45981),S=t.n(b),Y=t(82315),A=t(88184),C=t(67337),x=t(16902),k=t(92395),_=t(4092),D=(0,i.createContext)(void 0);function E(e){var n,t,i=e.children,o=(0,x.q)(),a=o.neonDatabases,l=o.loading,s=(0,k.G)(),c=s.buckets,u=s.loading,d=(0,_.x)(),p=d.isDotReplitAuthLoading,f=d.isDotReplitAuthEnabled;return n=a.length>0?"connected":l?"loading":"disconnected",t=c&&c.length>0?"connected":u?"loading":"disconnected",(0,r.Y)(D.Provider,{value:{neon:n,objectStorage:t,replAuth:f?"connected":p?"loading":"disconnected"},children:i})}function R(){var e=(0,i.useContext)(D);if(!e)throw Error("useConnectionStatus must be used within a ConnectionStatusProvider");return e}var I=t(29935),F=t(83846),T=t(93629),P=t(82643),L=t(47993),U=t(26496),N=t(74340),O=t(11438),M=t(84789),B=t(81239),H=t(73912),z=t(96866),W=t(1566),G=t(6680),V=t(86417),j=t(61234),Z=t(43974),q=t(93682),K=t(36245),$=t(74863),J=t(26705),Q=t(95949),X=t(12966),ee=t(2527),en=t(40043),et=t(37407),er=t(35869),ei=t(25584),eo=t(62451),ea=t(51732),el=t(54572),es=t(54239),ec=t(81975),eu=t(5408),ed=t(54046),ep=t(86278),ef=t(75141),eh=t(31412),em=Z.kL.max(300),eg=(0,j.x)({root:[Z.wp.flex.column,Z.wp.borderRadius(),Z.wp.backgroundColor.backgroundHigher,Z.wp.border({color:G.LU.outlineDimmer,width:1}),Z.wp.overflow("hidden")],summary:[Z.wp.flex.column,Z.wp.gap(4)],summaryHeader:[Z.wp.flex.shrink(1),Z.wp.gap(8),Z.wp.p(8),Z.wp.align.center,Z.wp.justify.spaceBetween,(0,F._)({},em,[Z.wp.flex.wrap])],summaryTitle:[Z.wp.flex.shrink(1)],summaryControls:[Z.wp.flex.shrink(1),{'&[data-open="true"]':{display:"flex",maxHeight:"100px",opacity:1},'&[data-open="false"]':{display:"none",maxHeight:"0",opacity:0},transition:"\n        max-height var(--transition-duration) ease-in-out,\n        opacity var(--transition-duration) ease-in-out,\n        visibility var(--transition-duration) linear\n      "}],connectedIcon:[Z.wp.backgroundColor.accentPositiveDimmer,Z.wp.border({color:G.LU.accentPositiveDimmest,width:2}),Z.wp.borderRadius(8)],summaryDetails:[Z.wp.flex.column,Z.wp.gap(4),{'&[data-open="true"]':{visibility:"visible",maxHeight:"100%",opacity:1},'&[data-open="false"]':{visibility:"hidden",maxHeight:"0",opacity:0},transition:"\n        max-height var(--transition-duration) ease-in-out,\n        opacity var(--transition-duration) ease-in-out,\n        visibility var(--transition-duration) linear\n      ",overflow:"hidden"}],summaryBody:[Z.wp.p(8),Z.wp.color.foregroundDimmer,{fontSize:G.LU.fontSizeSmall,lineHeight:G.LU.lineHeightSmall}],summaryFooter:[Z.wp.gap(4),{'&[data-open="true"]':{visibility:"visible",maxHeight:"100%",opacity:1},'&[data-open="false"]':{visibility:"hidden",maxHeight:"0",opacity:0},transition:"\n        max-height var(--transition-duration) ease-in-out,\n        opacity var(--transition-duration) ease-in-out,\n        visibility var(--transition-duration) linear\n      "}],sectionContainer:[Z.wp.backgroundColor.backgroundRoot,Z.wp.flex.growAndShrink(1)],sectionTitle:[(0,F._)({},"@media (max-width: ".concat(V.LO.mobileMax,"px)"),{display:"none"})],sectionButton:[(0,F._)({},"@media (max-width: ".concat(V.LO.mobileMax,"px)"),{"& > div":{gap:0}})],divider:[Z.wp.height(2),Z.wp.backgroundColor.backgroundHighest]}),ev=function(){return(0,r.Y)(ec.A,{color:G.LU.accentPositiveDefault,css:eg.connectedIcon})},ew={Configuration:{icon:(0,r.Y)(eh.A,{}),colorway:"primary",variant:"default",displayName:"Configure"},"Code samples":{icon:(0,r.Y)(eu.A,{}),variant:"outlined",displayName:"Code samples"},Docs:{icon:(0,r.Y)(ea.A,{}),variant:"outlined",displayName:"Docs"}},ey=function(e){var n=e.sectionTitles,t=e.selectedSection,i=e.setSelectedSection;return(0,r.Y)(er.S,{row:!0,gap:8,children:n.map(function(e){return(0,r.Y)(q.$n,{variant:ew[e].variant,colorway:ew[e].colorway,css:eg.sectionButton,style:{outlineColor:t===e?G.LU.outlineStronger:G.LU.outlineDefault},iconLeft:ew[e].icon,text:(0,r.Y)(en.EY,{css:eg.sectionTitle,children:ew[e].displayName}),onClick:function(){t===e?i(null):i(e)}},e)})})},eb=function(e){var n=e.sections,t=e.selectedSection;return(0,r.Y)(ee.ui,{elevated:!0,css:eg.sectionContainer,children:n.map(function(e){return(0,r.FD)(er.S,{style:{display:t===e.title?"flex":"none"},children:[(0,r.Y)($.a,{css:eg.divider}),e.content]},e.key)})})},eS=function(e){var n,t=e.icon,o=e.title,a=e.description,s=e.onClick,c=e.isConnected,u=e.sections,d=e.configIcon,p=void 0===d?(0,r.Y)(eh.A,{}):d,f=e.editSecretsAuthzErrorMessage,h=(0,l._)((0,i.useState)(!1),2),m=h[0],g=h[1],v=(0,l._)((0,i.useState)(null),2),w=v[0],y=v[1],b=(0,O.A)(m,150),S=m||b,Y=(0,M.a)();return(0,r.Y)(er.S,{tag:"li",css:eg.root,onMouseEnter:function(){Y||g(!0)},onMouseLeave:function(){Y||w||g(!1)},children:(0,r.FD)(er.S,{css:eg.summary,children:[(0,r.FD)(er.S,{onClick:Y?function(){return g(!m)}:void 0,css:eg.summaryHeader,row:!0,children:[(0,r.FD)(er.S,{row:!0,gap:8,align:"center",css:eg.summaryTitle,children:[c?(0,r.Y)(ev,{}):null,t,(0,r.Y)(en.EY,{style:{overflow:"hidden",flexShrink:1},variant:"subheadDefault",children:o})]}),(0,r.FD)(er.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(er.S,{row:!0,gap:8,align:"center",css:eg.summaryControls,"data-open":S,style:{"--transition-duration":Y?"0.1s":"0.3s"},children:u?(0,r.Y)(ey,{sectionTitles:null!==(n=null==u?void 0:u.map(function(e){return e.title}))&&void 0!==n?n:[],selectedSection:w,setSelectedSection:y}):(0,r.Y)(et.m_,{isDisabled:!f,tooltip:f,children:(0,r.Y)(q.$n,{colorway:"primary",onClick:s,iconLeft:p,text:"Configure"})})}),(0,r.Y)(J.K0,{onClick:function(){y(null),g(!m)},alt:S?"Hide":"Configure",children:S?(0,r.Y)(es.A,{}):(0,r.Y)(el.A,{})})]})]}),(0,r.Y)(er.S,{css:eg.summaryDetails,"data-open":S,style:{"--transition-duration":Y?"0s":"0.2s"},children:(0,r.Y)(er.S,{css:eg.summaryBody,children:a})}),(0,r.Y)(er.S,{css:eg.summaryFooter,"data-open":S,style:{"--transition-duration":Y?"0.1s":"0.3s"},row:!0,align:"center",justify:"end",children:u?(0,r.Y)(eb,{sections:u,selectedSection:w}):null})]})})},eY=(0,j.x)({accordionItemBody:[Z.wp.flex.column,Z.wp.gap(8),Z.wp.p(8)],configurationItem:[Z.wp.flex.column,Z.wp.gap(8)],configurationItemTitle:[Z.wp.fontWeight.bold,Z.wp.flex.row,Z.wp.align.end,Z.wp.gap(4)],configurationActions:[Z.wp.gap(8)],secretRow:[Z.wp.gap(4),{input:{height:22}}],markdownReset:[{"& > div":{"*":{fontSize:"".concat(G.LU.fontSizeSmall," !important"),lineHeight:"".concat(G.LU.lineHeightSmall," !important")},"p, ol":{color:G.LU.foregroundDimmer},a:{color:"".concat(G.LU.foregroundDefault," !important"),textDecoration:"underline"},ol:{marginLeft:G.LU.space16},h4:{marginBottom:0,marginTop:G.LU.space16,color:G.LU.foregroundDefault}}}]}),eA=function(e){var n=e.serviceName,t=e.items,o=e.isConnected,a=e.secrets,s=e.editSecretsAuthzErrorMessage,c=(0,B.A)(),u=(0,l._)((0,i.useState)(new Map(t.map(function(e){return[e.key,""]}))),2),d=u[0],p=u[1];(0,i.useEffect)(function(){p(a)},[a]);var f=(0,C.A)().secrets,h=(0,l._)((0,i.useState)(!1),2),m=h[0],g=h[1],w=(0,i.useCallback)((0,I._)(function(){var e;return(0,P.YH)(this,function(t){switch(t.label){case 0:g(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,f.addEntries(d)];case 2:return t.sent(),(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"configurationSaved",service:n}),[3,4];case 3:return e=t.sent(),c.showError(e.message),[3,4];case 4:return g(!1),[2]}})}),[d,c,f,n]),b=(0,l._)((0,i.useState)(!1),2),S=b[0],Y=b[1],A=(0,i.useCallback)((0,I._)(function(){var e,r;return(0,P.YH)(this,function(i){switch(i.label){case 0:g(!0),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(e=f).removeEntries.apply(e,(0,y._)(t.map(function(e){return e.key})))];case 2:return i.sent(),(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"configurationReset",service:n}),[3,4];case 3:return r=i.sent(),c.showError(r.message),[3,4];case 4:return Y(!1),g(!1),[2]}})}),[t,c,f,n]);return(0,r.FD)(er.S,{css:eY.accordionItemBody,children:[t.map(function(e){var n;return(0,r.FD)(er.S,{css:eY.configurationItem,children:[(0,r.FD)(er.S,{css:eY.configurationItemTitle,children:[e.title,e.required?null:(0,r.Y)(en.EY,{variant:"small",color:"dimmest",multiline:!1,children:"(optional)"})]}),(0,r.Y)(ei.Ay,{css:eY.markdownReset,children:e.description}),(0,r.FD)(er.S,{css:eY.secretRow,row:!0,align:"center",children:[(0,r.Y)(H.Ge,{value:e.key}),(0,r.Y)(H.iJ,{placeholder:e.placeholder,value:null!==(n=d.get(e.key))&&void 0!==n?n:"",canEditDisabledMessage:s,onChange:function(n){p(function(t){var r=new Map(t);return r.set(e.key,n),r})}})]})]},e.key)}),(0,r.FD)(er.S,{css:eY.configurationActions,row:!0,justify:"end",children:[o?(0,r.Y)(q.$n,{text:"Delete",colorway:"red",variant:"outlined",size:"small",onClick:function(){return Y(!0)},loading:m,disabled:void 0!==s}):null,(0,r.Y)(q.$n,{text:"Save",colorway:"primary",size:"small",onClick:w,loading:m,disabled:void 0!==s})]}),(0,r.Y)(H.g1,{keys:t.map(function(e){return e.key}),isOpen:S,onClose:function(){return Y(!1)},onConfirm:function(){return A()},loading:m})]})},eC=(0,j.x)({root:[Z.wp.flex.column,Z.wp.gap(8)],header:[Z.wp.mb(8),Z.wp.p(8),Z.wp.pb(0)],items:[Z.wp.flex.column,Z.wp.gap(8),Z.wp.overflowY("auto"),Z.wp.maxHeight(250),{marginLeft:"-var(".concat(G.LU.space8,")"),marginRight:"-var(".concat(G.LU.space8,")")}],item:[Z.wp.pl(8),Z.wp.width("100%"),Z.wp.flex.column,Z.wp.gap(8),{"&:not(:last-of-type)":[Z.wp.pb(8),{borderBottom:"1px solid ".concat(G.LU.outlineDimmest)}]}],itemHeader:[Z.wp.gap(4),Z.wp.fontWeight.bold],itemCodeRoot:[Z.wp.position.relative,Z.wp.minHeight(52)],itemCode:[Z.wp.font.code,Z.wp.overflowX("auto"),Z.wp.fontSize(12),Z.wp.width("100%"),Z.wp.pr(8),Z.wp.color.foregroundDimmer,{whiteSpace:"pre"}],itemCodeActions:[Z.wp.position.absolute,Z.wp.right(0),Z.wp.top(0),Z.wp.backgroundColor.backgroundDefault,Z.wp.flex.column,Z.wp.align.center,Z.wp.gap(4),Z.wp.pr(4)],askAiContainer:[Z.wp.p(8)]}),ex={JavaScript:{icon:(0,r.Y)(ep.A,{})},Python:{icon:(0,r.Y)(ef.A,{})}},ek=function(e){var n=e.items,t=e.serviceName,o=e.openPane,a=(0,l._)((0,i.useState)("JavaScript"),2),c=a[0],u=a[1],d=(0,z.J)().configs,p=(0,i.useCallback)(function(){return d.some(function(e){return["python2","python3"].includes(e.language)})?"Python":"JavaScript"},[d]);(0,i.useEffect)(function(){u(p())},[p]);var f=(0,W.Hw)(),h=(0,i.useCallback)(function(e){(0,L.flushSync)(function(){o({type:"ghostwriterChat"})});var n=f(function(e){var n=(0,l._)(e,2);return"ghostwriterChat"===(n[0],n[1]).type});(null==n?void 0:n.bindings.type)==="ghostwriterChat"&&n.bindings.setInputText(e)},[o,f]);return(0,r.FD)(er.S,{css:eC.root,children:[(0,r.Y)(er.S,{css:eC.header,row:!0,align:"center",justify:"space-between",children:(0,r.Y)(X.l,{items:Object.entries(ex).map(function(e){var n=(0,l._)(e,2),t=n[0],r=n[1];return(0,T._)((0,s._)({},r),{value:t})}),selectedKey:c,onSelectionChange:function(e){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"codeSampleLanguageChanged",service:t,language:e}),u(e)},"aria-label":"Select a language",children:function(e){return(0,r.Y)(Q.nh,{id:e.value,label:e.value,icon:e.icon},e.value)}})}),(0,r.Y)(er.S,{css:eC.items,children:n.map(function(e){return(0,r.FD)(er.S,{css:eC.item,children:[(0,r.FD)(er.S,{css:eC.itemHeader,row:!0,align:"center",children:[e.title,(0,r.Y)(J.K0,{tooltipPlacement:"right",colorway:void 0,alt:"Explain this code",onClick:function(){var n=e.code[c];(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"codeSampleExplained",sample:n,service:t,title:e.title,language:c}),h(["Can you explain this code sample for me?","","```",n,"```"].join("\n"))},children:(0,r.Y)(ed.A,{color:G.LU.tealStronger})})]}),(0,r.FD)(er.S,{css:eC.itemCodeRoot,children:[(0,r.Y)(N.A,{fontSize:12,language:c,code:e.code[c],css:eC.itemCode}),(0,r.Y)(er.S,{css:eC.itemCodeActions,children:(0,r.Y)(K.r,{tooltipPlacement:"left",textToCopy:e.code[c],onCopy:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"codeSampleCopied",service:t,sample:e.title,language:c})}})})]})]},e.title)})},c),(0,r.Y)(er.S,{css:eC.askAiContainer,children:(0,r.Y)(q.$n,{size:"small",text:"Get started with "+U.BP,iconLeft:(0,r.Y)(eo.A,{}),colorway:void 0,onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"codeSampleStartWithAi",service:t,language:c}),h("How do I use ".concat(t," in ").concat(c,"?"))}})})]})},e_=function(e){var n=e.configurationItems,t=e.codeSampleItems,o=e.title,a=e.description,c=e.openPane,u=e.editSecretsAuthzErrorMessage,d=e.icon,p=e.isConnected,f=(0,l._)((0,i.useState)({configuration:!1,codeSamples:!1}),2),h=f[0],m=f[1],g=(0,C.A)().secrets,w=(0,l._)((0,i.useState)(new Map),2),y=w[0],b=w[1];return(0,i.useEffect)(function(){return g.watch(function(e){b(e)})},[g]),(0,r.Y)(r.FK,{children:(0,r.Y)(eS,{title:o,description:a,icon:d,isConnected:p,editSecretsAuthzErrorMessage:u,onClick:function(){m(function(e){return(0,T._)((0,s._)({},e),{configuration:!0})}),(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"configurationOpened",service:o,source:"configureButton"})},onSectionToggle:function(e){m(function(n){var t=!n[e];return t&&(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"configuration"===e?"configurationOpened":"codeSampleOpened",service:o,source:"accordion"}),(0,T._)((0,s._)({},n),(0,F._)({},e,t))})},sections:[{key:"codeSamples",title:"Code samples",content:(0,r.Y)(ek,{serviceName:o,items:t,openPane:c}),isOpen:h.codeSamples},{key:"configuration",title:"Configuration",content:(0,r.Y)(eA,{serviceName:o,items:n,isConnected:p,secrets:y,editSecretsAuthzErrorMessage:u}),isOpen:h.configuration}]})})},eD=t(89001),eE=t(57205),eR=t(14854),eI=t(91892),eF=t(4761),eT=t(6558),eP=t(65037),eL=t(28465),eU=[{tags:["database","storage"],pane:{type:"database"},serviceName:"neon"},{tags:["database","storage","sql"],pane:{type:"neon"},serviceName:"neon"},{tags:["storage","files"],pane:{type:"objectStorage"},serviceName:"objectStorage"},{tags:["authentication"],pane:{type:"replAuth"},serviceName:"replAuth"}],eN=[{title:"OpenAI",description:"OpenAI offers cutting-edge AI models for various applications, including natural language processing and generation. Enhance your projects with state-of-the-art AI capabilities.",tags:["AI","LLM","chat"],icon:(0,r.Y)(eP.A,{}),configurationItems:[{key:"OPENAI_API_KEY",title:"API Key",description:"To get started, you'll need an API key from OpenAI. Visit the [API keys page](https://platform.openai.com/account/api-keys) in your OpenAI account, generate a new key, and paste it below.",placeholder:"sk-•••••••••••••••••••••",required:!0},{key:"OPENAI_ORG_ID",title:"Organization ID",description:"For accounts associated with multiple organizations, you can specify the [Organization ID](https://platform.openai.com/account/org-settings) to use. This is optional; if not provided, your default organization will be used."}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nfrom openai import OpenAI\n\napi_key = os.environ['OPENAI_API_KEY']\norganization_id = os.environ.get('OPENAI_ORG_ID')  # Optional\n\nclient = OpenAI(api_key=api_key, organization=organization_id)",JavaScript:"import { OpenAI } from 'openai';\n\nconst apiKey = process.env.OPENAI_API_KEY;\nconst organizationId = process.env.OPENAI_ORG_ID;  // Optional\n\nconst openai = new OpenAI({\n  apiKey,\n  organization: organizationId,\n});"}},{title:"Chat creation",code:{Python:'response = client.chat.completions.create(\n    model="gpt-3.5-turbo",\n    messages=[\n        {"role": "system", "content": "You are a helpful assistant."},\n        {"role": "user", "content": "Hello!"}\n    ]\n)\n\nprint(response.choices[0].message.content)',JavaScript:'const response = await openai.chat.completions.create({\n  model: "gpt-3.5-turbo",\n  messages: [\n    {role: "system", content: "You are a helpful assistant."},\n    {role: "user", content: "Hello!"}\n  ],\n});\n\nconsole.log(response.choices[0].message.content);'}},{title:"Image generation",code:{Python:'response = client.images.generate(\n    model="dall-e-3",\n    prompt="A futuristic cityscape with flying cars",\n    size="1024x1024",\n    quality="standard",\n    n=1,\n)\n\nimage_url = response.data[0].url\nprint(f"Generated image URL: {image_url}")',JavaScript:'const response = await openai.images.generate({\n  model: "dall-e-3",\n  prompt: "A futuristic cityscape with flying cars",\n  size: "1024x1024",\n  quality: "standard",\n  n: 1,\n});\n\nconst imageUrl = response.data[0].url;\nconsole.log(`Generated image URL: ${imageUrl}`);'}},{title:"Embedding generation",code:{Python:'response = client.embeddings.create(\n    model="text-embedding-ada-002",\n    input="The quick brown fox jumps over the lazy dog"\n)\nembedding = response.data[0].embedding\nprint(f"Embedding vector (first 5 elements): {embedding[:5]}")',JavaScript:'const response = await openai.embeddings.create({\n  model: "text-embedding-ada-002",\n  input: "The quick brown fox jumps over the lazy dog",\n});\nconst embedding = response.data[0].embedding;\nconsole.log(`Embedding vector (first 5 elements): ${embedding.slice(0, 5)}`);'}}]},{title:"Google AI (Gemini)",description:"Google AI's Gemini model represents the latest in machine learning technology. Integrate this powerful tool into your applications for advanced natural language processing and generation.",tags:["AI","LLM","chat"],icon:(0,r.Y)(function(e){return(0,r.FD)(eR.A,(0,T._)((0,s._)({},e),{children:[(0,r.Y)("g",{clipPath:"url(#clip0_7378_480)",children:(0,r.Y)("path",{fill:"url(#paint0_radial_7378_480)",d:"M24 12.024A12.783 12.783 0 0 0 12.024 24h-.048A12.782 12.782 0 0 0 0 12.024v-.048A12.782 12.782 0 0 0 11.976 0h.048A12.783 12.783 0 0 0 24 11.976v.048Z"})}),(0,r.FD)("defs",{children:[(0,r.FD)("radialGradient",{id:"paint0_radial_7378_480",cx:"0",cy:"0",r:"1",gradientTransform:"matrix(24.19889 8.18296 -65.55084 193.84876 2.382 9.755)",gradientUnits:"userSpaceOnUse",children:[(0,r.Y)("stop",{offset:".067",stopColor:"#9168C0"}),(0,r.Y)("stop",{offset:".343",stopColor:"#5684D1"}),(0,r.Y)("stop",{offset:".672",stopColor:"#1BA1E3"})]}),(0,r.Y)("clipPath",{id:"clip0_7378_480",children:(0,r.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})]})]}))},{}),configurationItems:[{key:"GOOGLE_AI_API_KEY",title:"API Key",description:"To use Gemini, you'll need to set up an API key. Go to the [Google AI Studio](https://makersuite.google.com/app/apikey) to create one. Once you have your key, enter it below to start using Gemini in your projects.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nimport google.generativeai as genai\n\ngenai.configure(api_key=os.environ['GOOGLE_AI_API_KEY'])",JavaScript:'const {\n  GoogleGenerativeAI,\n  HarmCategory,\n  HarmBlockThreshold,\n} = require("@google/generative-ai");\n\nconst genAI = new GoogleGenerativeAI(process.env.GOOGLE_AI_API_KEY);'}},{title:"Chat creation",code:{Python:"model = genai.GenerativeModel('gemini-pro')\nchat = model.start_chat()\n\nresponse = chat.send_message(\"Hello, how are you?\")\nprint(response.text)",JavaScript:'const model = genAI.getGenerativeModel({ model: "gemini-pro" });\n\nconst chat = model.startChat({\n  generationConfig: {\n    maxOutputTokens: 100,\n  },\n});\n\nconst result = await chat.sendMessage("Hello, how are you?");\nconst response = result.response;\nconsole.log(response.text());'}},{title:"Text generation",code:{Python:"model = genai.GenerativeModel('gemini-pro')\nresponse = model.generate_content(\"Write a short poem about artificial intelligence.\")\nprint(response.text)",JavaScript:'const model = genAI.getGenerativeModel({ model: "gemini-pro" });\nconst result = await model.generateContent("Write a short poem about artificial intelligence.");\nconsole.log(result.response.text());'}},{title:"Image analysis",code:{Python:"from PIL import Image\n\nmodel = genai.GenerativeModel('gemini-pro-vision')\nimg = Image.open('image.jpg')\nresponse = model.generate_content([\"Describe this image:\", img])\nprint(response.text)",JavaScript:'const fs = require(\'fs\');\n\nconst model = genAI.getGenerativeModel({ model: "gemini-pro-vision" });\n\nconst imageParts = [\n  {\n    inlineData: {\n      data: fs.readFileSync("image.jpg", {encoding: \'base64\'}),\n      mimeType: "image/jpeg"\n    }\n  },\n];\n\nconst result = await model.generateContent(["Describe this image:", ...imageParts]);\nconsole.log(result.response.text());'}}]},{title:"Anthropic (Claude)",description:"Anthropic offers safe AI models like Claude, enhancing applications with capabilities for analysis, writing, coding, and problem-solving.",tags:["AI","LLM","chat"],icon:(0,r.Y)(eD.A,{}),configurationItems:[{key:"ANTHROPIC_API_KEY",title:"API Key",description:"[Create an API key](https://console.anthropic.com/account/keys) and paste the key below. If you get an error, you may have reached your Anthropic usage limits. To view your usage, check your [Anthropic usage dashboard](https://console.anthropic.com/usage).",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:'import os\nimport anthropic\n\nclient = anthropic.Anthropic(api_key=os.environ["ANTHROPIC_API_KEY"])',JavaScript:"const Anthropic = require('@anthropic-ai/sdk');\n\nconst anthropic = new Anthropic({\n  apiKey: process.env.ANTHROPIC_API_KEY,\n});"}},{title:"Chat creation",code:{Python:'message = client.messages.create(\n    model="claude-3-opus-20240229",\n    max_tokens=1000,\n    messages=[\n        {"role": "user", "content": "Hello, Claude!"}\n    ]\n)\nprint(message.content[0].text)',JavaScript:"const message = await anthropic.messages.create({\n  model: 'claude-3-opus-20240229',\n  max_tokens: 1000,\n  messages: [\n    {role: 'user', content: 'Hello, Claude!'}\n  ],\n});\nconsole.log(message.content[0].text);"}},{title:"Streaming response",code:{Python:'with client.messages.stream(\n    model="claude-3-opus-20240229",\n    max_tokens=1000,\n    messages=[\n        {"role": "user", "content": "Write a short story about time travel."}\n    ]\n) as stream:\n    for text in stream.text_stream:\n        print(text, end="", flush=True)',JavaScript:"const stream = await anthropic.messages.stream({\n  model: 'claude-3-opus-20240229',\n  max_tokens: 1000,\n  messages: [\n    {role: 'user', content: 'Write a short story about time travel.'}\n  ],\n});\n\nfor await (const chunk of stream) {\n  if (chunk.type === 'content_block_delta') {\n    process.stdout.write(chunk.delta.text);\n  }\n}"}},{title:"Content classification",code:{Python:'message = client.messages.create(\n    model="claude-3-opus-20240229",\n    max_tokens=100,\n    messages=[\n        {"role": "user", "content": "Classify the sentiment of this text: \'I absolutely love this product!\'"}\n    ]\n)\nprint(message.content[0].text)',JavaScript:"const message = await anthropic.messages.create({\n  model: 'claude-3-opus-20240229',\n  max_tokens: 100,\n  messages: [\n    {role: 'user', content: \"Classify the sentiment of this text: 'I absolutely love this product!'\"}\n  ],\n});\nconsole.log(message.content[0].text);"}}]},{title:"Perplexity",description:"Perplexity AI provides powerful language models and APIs for various natural language processing tasks. Integrate advanced AI capabilities into your applications with ease.",tags:["AI","LLM","NLP"],icon:(0,r.Y)(eL.A,{}),configurationItems:[{key:"PERPLEXITY_API_KEY",title:"API Key",description:"To use Perplexity's API, you'll need an API key. Sign up for an account on the [Perplexity website](https://www.perplexity.ai/), navigate to your account settings, and generate a new API key. Paste it below.",placeholder:"pplx-••••••••••••••••••••••••••••••",required:!0}],codeSampleItems:[{title:"API Client Initialization",code:{Python:'import os\nimport requests\n\napi_key = os.environ[\'PERPLEXITY_API_KEY\']\nheaders = {\n    "Authorization": f"Bearer {api_key}",\n    "Content-Type": "application/json"\n}',JavaScript:"const apiKey = process.env.PERPLEXITY_API_KEY;\nconst headers = {\n  'Authorization': `Bearer ${apiKey}`,\n  'Content-Type': 'application/json'\n};"}},{title:"Text Generation",code:{Python:'url = "https://api.perplexity.ai/chat/completions"\ndata = {\n    "model": "sonar-medium-online",\n    "messages": [\n        {"role": "system", "content": "You are a helpful assistant."},\n        {"role": "user", "content": "What is the capital of France?"}\n    ]\n}\n\nresponse = requests.post(url, json=data, headers=headers)\nprint(response.json()[\'choices\'][0][\'message\'][\'content\'])',JavaScript:"const url = 'https://api.perplexity.ai/chat/completions';\nconst data = {\n  model: 'sonar-medium-online',\n  messages: [\n    {role: 'system', content: 'You are a helpful assistant.'},\n    {role: 'user', content: 'What is the capital of France?'}\n  ]\n};\n\nconst response = await fetch(url, {\n  method: 'POST',\n  headers: headers,\n  body: JSON.stringify(data)\n});\n\nconst result = await response.json();\nconsole.log(result.choices[0].message.content);"}}]},{title:"Mistral AI",description:"Mistral AI offers state-of-the-art language models and APIs for a wide range of AI applications. Leverage their powerful models to enhance your projects with advanced natural language processing capabilities.",tags:["AI","LLM","NLP"],icon:(0,r.Y)(function(e){return(0,r.FD)(eR.A,(0,T._)((0,s._)({},e),{children:[(0,r.Y)("path",{d:"M15 6v4h-2V6h2Zm4-4v4h-2V2h2ZM1 2h2v20H1V2Zm8 12h2v4H9v-4Zm8 0h2v8h-2v-8Z"}),(0,r.Y)("path",{fill:"#F7D046",d:"M19 2h4v4h-4V2ZM3 2h4v4H3V2Z"}),(0,r.Y)("path",{fill:"#F2A73B",d:"M15 10V6h8v4h-8ZM3 10V6h8v4H3Z"}),(0,r.Y)("path",{fill:"#EE792F",d:"M3 14v-4h20v4H3Z"}),(0,r.Y)("path",{fill:"#EB5829",d:"M11 14h4v4h-4v-4Zm8 0h4v4h-4v-4ZM3 14h4v4H3v-4Z"}),(0,r.Y)("path",{fill:"#EA3326",d:"M19 18h4v4h-4v-4ZM3 18h4v4H3v-4Z"})]}))},{}),configurationItems:[{key:"MISTRAL_API_KEY",title:"API Key",description:"To access Mistral AI's services, you need an API key. Visit the [Mistral AI platform](https://console.mistral.ai/), create an account, and generate a new API key. Enter it below.",placeholder:"mis-••••••••••••••••••••••••••••••",required:!0}],codeSampleItems:[{title:"Client Setup",code:{Python:"import os\nfrom mistralai.client import MistralClient\n\napi_key = os.environ['MISTRAL_API_KEY']\nclient = MistralClient(api_key=api_key)",JavaScript:"const apiKey = process.env.MISTRAL_API_KEY;\nconst headers = {\n  'Authorization': `Bearer ${apiKey}`,\n  'Content-Type': 'application/json'\n};"}},{title:"Chat Completion",code:{Python:'chat_response = client.chat(\n    model="mistral-tiny",\n    messages=[\n        {"role": "user", "content": "What are the main features of Python?"}\n    ]\n)\n\nprint(chat_response.choices[0].message.content)',JavaScript:'const url = \'https://api.mistral.ai/v1/chat/completions\';\nconst data = {\n  model: "mistral-tiny",\n  messages: [\n    {role: "user", content: "What are the main features of Python?"}\n  ]\n};\n\nconst response = await fetch(url, {\n  method: \'POST\',\n  headers: headers,\n  body: JSON.stringify(data)\n});\n\nconst result = await response.json();\nconsole.log(result.choices[0].message.content);'}},{title:"Embedding Generation",code:{Python:'embed_response = client.embeddings(\n    model="mistral-embed",\n    input=["Hello world", "The quick brown fox jumps over the lazy dog"]\n)\n\nfor embedding in embed_response.data:\n    print(f"Embedding (first 5 dimensions): {embedding.embedding[:5]}")',JavaScript:'const url = \'https://api.mistral.ai/v1/embeddings\';\nconst data = {\n  model: "mistral-embed",\n  input: ["Hello world", "The quick brown fox jumps over the lazy dog"]\n};\n\nconst response = await fetch(url, {\n  method: \'POST\',\n  headers: headers,\n  body: JSON.stringify(data)\n});\n\nconst result = await response.json();\nresult.data.forEach((embedding, index) => {\n  console.log(`Embedding ${index + 1} (first 5 dimensions): ${embedding.embedding.slice(0, 5)}`);\n});'}}]},{title:"Google Sheets",description:"Google Sheets API allows you to read, write, and modify Google Sheets. This integration uses a service account for authentication, suitable for server-side applications.",tags:["Google","Spreadsheets","Data"],icon:(0,r.Y)(eI.A,{}),configurationItems:[{key:"GOOGLE_SERVICE_ACCOUNT_JSON",title:"Service Account JSON",description:'The entire contents of your Google Cloud service account JSON key file. This includes all the necessary information for authentication.\n\n#### Creating a Service Account\n1. Go to [Google Cloud Console](https://console.cloud.google.com/) and sign in with your Google account.\n2. Select an existing project or create a new one (Click project dropdown > "New Project").\n3. Navigate to ["IAM & Admin" > "Service Accounts"](https://console.cloud.google.com/iam-admin/serviceaccounts) in the left sidebar.\n4. Click "+ CREATE SERVICE ACCOUNT".\n5. Enter a name and optional description, then click "CREATE AND CONTINUE".\n6. Grant appropriate permissions (e.g., "Editor" for Sheets access), then click "CONTINUE".\n7. (Optional) Grant users access, or click "DONE".\n8. In the service accounts list, click the three dots next to your new account > "Manage keys".\n9. Click "ADD KEY" > "Create new key", choose "JSON" format, and click "CREATE" to download the key file.\n10. Go to ["APIs & Services" > "Dashboard"](https://console.cloud.google.com/apis/dashboard), click ["+ ENABLE APIS AND SERVICES"](https://console.cloud.google.com/apis/library) up top.\n11. Search for and enable "Google Sheets API". Add "Google Docs API" if you\'re also using Google Docs.\n12. Open the JSON key file you downloaded, copy its entire contents, and paste it into this field.\n\nRemember to keep your key secure and never share it or commit it to Git. Follow the principle of least privilege when assigning roles.\n\n#### Getting a Spreadsheet ID\n1. Open the Google Sheet you want to access.\n2. Look at the URL in your browser. It will be in this format: `https://docs.google.com/spreadsheets/d/SPREADSHEET_ID/edit#gid=0`\n3. The SPREADSHEET_ID is the long string of letters, numbers, and hyphens between \'/d/\' and \'/edit\'.\n\n#### IMPORTANT: Granting Spreadsheet Access to Your Service Account\n1. Find your service account\'s email address in the JSON key file (look for "client_email").\n2. Open your Google Sheet.\n3. Click the "Share" button in the top right corner.\n4. In the "Share with people and groups" field, paste your service account\'s email address.\n5. Set the permission to "Editor" if you need write access, or "Viewer" for read-only access.\n6. Uncheck the "Notify people" box (optional).\n7. Click "Send" or "Share" (depending on your Google Workspace settings).',placeholder:'{ "type": "service_account", "project_id": "your-project-id", "private_key_id": "..." }',required:!0}],codeSampleItems:[{title:"Authentication Setup",code:{Python:"import os\nimport json\nfrom google.oauth2 import service_account\nfrom googleapiclient.discovery import build\n\nSERVICE_ACCOUNT_JSON = os.environ['GOOGLE_SERVICE_ACCOUNT_JSON']\nservice_account_info = json.loads(SERVICE_ACCOUNT_JSON)\n\ncredentials = service_account.Credentials.from_service_account_info(\n    service_account_info,\n    scopes=['https://www.googleapis.com/auth/spreadsheets']\n)\n\nsheets_service = build('sheets', 'v4', credentials=credentials)",JavaScript:"const { google } = require('googleapis');\n\nconst SERVICE_ACCOUNT_JSON = JSON.parse(process.env.GOOGLE_SERVICE_ACCOUNT_JSON);\n\nconst auth = new google.auth.GoogleAuth({\n  credentials: SERVICE_ACCOUNT_JSON,\n  scopes: ['https://www.googleapis.com/auth/spreadsheets'],\n});\n\nconst sheets = google.sheets({ version: 'v4', auth });"}},{title:"Read from Google Sheets",code:{Python:"SPREADSHEET_ID = 'your-spreadsheet-id'\nRANGE = 'Sheet1!A1:B5'\n\nresult = sheets_service.spreadsheets().values().get(\n    spreadsheetId=SPREADSHEET_ID,\n    range=RANGE\n).execute()\n\nvalues = result.get('values', [])\nfor row in values:\n    print(row)",JavaScript:"const SPREADSHEET_ID = 'your-spreadsheet-id';\nconst RANGE = 'Sheet1!A1:B5';\n\nconst response = await sheets.spreadsheets.values.get({\n  spreadsheetId: SPREADSHEET_ID,\n  range: RANGE,\n});\n\nconst rows = response.data.values;\nif (rows.length) {\n  rows.forEach(row => {\n    console.log(row);\n  });\n} else {\n  console.log('No data found.');\n}"}},{title:"Write to Google Sheets",code:{Python:"SPREADSHEET_ID = 'your-spreadsheet-id'\nRANGE = 'Sheet1!A1:B2'\nVALUES = [\n    ['Name', 'Score'],\n    ['Alice', 95],\n]\n\nresult = sheets_service.spreadsheets().values().update(\n    spreadsheetId=SPREADSHEET_ID,\n    range=RANGE,\n    valueInputOption='USER_ENTERED',\n    body={'values': VALUES}\n).execute()\n\nprint(f\"{result.get('updatedCells')} cells updated.\")",JavaScript:"const SPREADSHEET_ID = 'your-spreadsheet-id';\nconst RANGE = 'Sheet1!A1:B2';\nconst VALUES = [\n  ['Name', 'Score'],\n  ['Alice', 95],\n];\n\nconst response = await sheets.spreadsheets.values.update({\n  spreadsheetId: SPREADSHEET_ID,\n  range: RANGE,\n  valueInputOption: 'USER_ENTERED',\n  resource: { values: VALUES },\n});\n\nconsole.log(`${response.data.updatedCells} cells updated.`);"}}]},{title:"Google Docs",description:"Google Docs API allows you to create, read, and modify Google Docs. This integration uses a service account for authentication, suitable for server-side applications.",tags:["Google","Documents","Text Processing"],icon:(0,r.Y)(function(e){return(0,r.FD)(eR.A,(0,T._)((0,s._)({},e),{children:[(0,r.Y)("path",{fill:"#3086F6",d:"M18.818 24H4.636C3.736 24 3 23.264 3 22.364V1.636C3 .736 3.736 0 4.636 0h9.819l6 6v16.364c0 .9-.737 1.636-1.637 1.636Z"}),(0,r.Y)("path",{fill:"#0C67D6",d:"m14.455 0 6 6h-6V0Z"}),(0,r.Y)("path",{fill:"#FDFFFF",d:"M16.636 10.636H6.818V9.273h9.818v1.363Zm0 1.91H6.818v1.363h9.818v-1.364Zm-2.727 3.272H6.82v1.364h7.09v-1.364Z"})]}))},{}),configurationItems:[{key:"GOOGLE_SERVICE_ACCOUNT_JSON",title:"Service Account JSON",description:'The entire contents of your Google Cloud service account JSON key file. This includes all the necessary information for authentication.\n\n#### Creating a Service Account\n1. Go to [Google Cloud Console](https://console.cloud.google.com/) and sign in with your Google account.\n2. Select an existing project or create a new one (Click project dropdown > "New Project").\n3. Navigate to ["IAM & Admin" > "Service Accounts"](https://console.cloud.google.com/iam-admin/serviceaccounts) in the left sidebar.\n4. Click "+ CREATE SERVICE ACCOUNT".\n5. Enter a name and optional description, then click "CREATE AND CONTINUE".\n6. Grant appropriate permissions (e.g., "Editor" for Docs access), then click "CONTINUE".\n7. (Optional) Grant users access, or click "DONE".\n8. In the service accounts list, click the three dots next to your new account > "Manage keys".\n9. Click "ADD KEY" > "Create new key", choose "JSON" format, and click "CREATE" to download the key file.\n10. Go to ["APIs & Services" > "Dashboard"](https://console.cloud.google.com/apis/dashboard), click ["+ ENABLE APIS AND SERVICES"](https://console.cloud.google.com/apis/library) up top.\n11. Search for and enable "Google Docs API". Add "Google Sheets API" if you\'re also using Google Sheets.\n12. Open the JSON key file you downloaded, copy its entire contents, and paste it into this field.\n\nRemember to keep your key secure and never share it or commit it to Git. Follow the principle of least privilege when assigning roles.\n\n#### Getting a Document ID\n1. Open the Google Doc you want to access.\n2. Look at the URL in your browser. It will be in this format: `https://docs.google.com/document/d/DOCUMENT_ID/edit`\n3. The DOCUMENT_ID is the long string of letters, numbers, and hyphens between \'/d/\' and \'/edit\'.\n\n#### IMPORTANT: Granting Document Access to Your Service Account\n1. Find your service account\'s email address in the JSON key file (look for "client_email").\n2. Open your Google Doc.\n3. Click the "Share" button in the top right corner.\n4. In the "Share with people and groups" field, paste your service account\'s email address.\n5. Set the permission to "Editor" if you need write access, or "Viewer" for read-only access.\n6. Uncheck the "Notify people" box (optional).\n7. Click "Send" or "Share" (depending on your Google Workspace settings).',placeholder:'{ "type": "service_account", "project_id": "your-project-id", "private_key_id": "..." }',required:!0}],codeSampleItems:[{title:"Authentication Setup",code:{Python:"import os\nimport json\nfrom google.oauth2 import service_account\nfrom googleapiclient.discovery import build\n\nSERVICE_ACCOUNT_JSON = os.environ['GOOGLE_SERVICE_ACCOUNT_JSON']\nservice_account_info = json.loads(SERVICE_ACCOUNT_JSON)\n\ncredentials = service_account.Credentials.from_service_account_info(\n    service_account_info,\n    scopes=['https://www.googleapis.com/auth/documents']\n)\n\ndocs_service = build('docs', 'v1', credentials=credentials)",JavaScript:"const { google } = require('googleapis');\n\nconst SERVICE_ACCOUNT_JSON = JSON.parse(process.env.GOOGLE_SERVICE_ACCOUNT_JSON);\n\nconst auth = new google.auth.GoogleAuth({\n  credentials: SERVICE_ACCOUNT_JSON,\n  scopes: ['https://www.googleapis.com/auth/documents'],\n});\n\nconst docs = google.docs({ version: 'v1', auth });"}},{title:"Read from Google Docs",code:{Python:"DOCUMENT_ID = 'your-document-id'\n\nresult = docs_service.documents().get(documentId=DOCUMENT_ID).execute()\nprint(f\"The title of the document is: {result.get('title')}\")\n\ncontent = result.get('body').get('content')\nfor element in content:\n    if 'paragraph' in element:\n        for run in element['paragraph']['elements']:\n            if 'textRun' in run:\n                print(run['textRun']['content'])",JavaScript:"const DOCUMENT_ID = 'your-document-id';\n\nconst response = await docs.documents.get({\n  documentId: DOCUMENT_ID,\n});\n\nconsole.log(`The title of the document is: ${response.data.title}`);\n\nconst content = response.data.body.content;\ncontent.forEach(element => {\n  if (element.paragraph) {\n    element.paragraph.elements.forEach(run => {\n      if (run.textRun) {\n        console.log(run.textRun.content);\n      }\n    });\n  }\n});"}},{title:"Write to Google Docs",code:{Python:"DOCUMENT_ID = 'your-document-id'\n\nrequests = [\n    {\n        'insertText': {\n            'location': {\n                'index': 1,\n            },\n            'text': 'Hello from the Google Docs API!'\n        }\n    }\n]\n\nresult = docs_service.documents().batchUpdate(\n    documentId=DOCUMENT_ID,\n    body={'requests': requests}\n).execute()\n\nprint(f\"Document updated: {result.get('documentId')}\")",JavaScript:"const DOCUMENT_ID = 'your-document-id';\n\nconst requests = [\n  {\n    insertText: {\n      location: {\n        index: 1,\n      },\n      text: 'Hello from the Google Docs API!',\n    },\n  },\n];\n\nconst response = await docs.documents.batchUpdate({\n  documentId: DOCUMENT_ID,\n  requestBody: {\n    requests: requests,\n  },\n});\n\nconsole.log(`Document updated: ${response.data.documentId}`);"}}]},{title:"Slack",description:"Slack is a communication platform for teams to collaborate in real-time. Integrate with Slack to send messages, manage channels, and automate workflows.",tags:["communication","chat"],icon:(0,r.Y)(eF.A,{}),configurationItems:[{key:"SLACK_BOT_TOKEN",title:"Bot Token",description:"[Create a Slack app](https://api.slack.com/apps) and obtain a Bot Token. This token allows your bot to interact with your Slack workspace.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nfrom slack_sdk import WebClient\n\nclient = WebClient(token=os.environ['SLACK_BOT_TOKEN'])",JavaScript:"const { WebClient } = require('@slack/web-api');\n\nconst client = new WebClient(process.env.SLACK_BOT_TOKEN);"}},{title:"Message sending",code:{Python:'try:\n    response = client.chat_postMessage(\n        channel="#general",\n        text="Hello from your bot!"\n    )\n    print(f"Message sent: {response[\'ts\']}")\nexcept Exception as e:\n    print(f"Error sending message: {e}")',JavaScript:"try {\n  const result = await client.chat.postMessage({\n    channel: '#general',\n    text: 'Hello from your bot!',\n  });\n  console.log(`Message sent: ${result.ts}`);\n} catch (error) {\n  console.error(`Error sending message: ${error}`);\n}"}},{title:"File upload",code:{Python:'try:\n    response = client.files_upload_v2(\n        channels="#general",\n        file="path/to/file.txt",\n        title="Sample File",\n        initial_comment="Here\'s a file for your review."\n    )\n    print(f"File uploaded: {response[\'file\'][\'id\']}")\nexcept Exception as e:\n    print(f"Error uploading file: {e}")',JavaScript:"try {\n  const result = await client.files.uploadV2({\n    channels: '#general',\n    file: fs.createReadStream('path/to/file.txt'),\n    title: 'Sample File',\n    initial_comment: \"Here's a file for your review.\",\n  });\n  console.log(`File uploaded: ${result.file.id}`);\n} catch (error) {\n  console.error(`Error uploading file: ${error}`);\n}"}},{title:"Retrieving channel information",code:{Python:"try:\n    response = client.conversations_info(channel=\"C1234567890\")\n    print(f\"Channel name: {response['channel']['name']}\")\n    print(f\"Channel purpose: {response['channel']['purpose']['value']}\")\nexcept Exception as e:\n    print(f\"Error retrieving channel info: {e}\")",JavaScript:"try {\n  const result = await client.conversations.info({\n    channel: 'C1234567890'\n  });\n  console.log(`Channel name: ${result.channel.name}`);\n  console.log(`Channel purpose: ${result.channel.purpose.value}`);\n} catch (error) {\n  console.error(`Error retrieving channel info: ${error}`);\n}"}}]},{title:"Discord",description:"Discord is a communication platform designed for creating communities. Integrate with Discord to send messages, manage servers, and enhance user engagement.",tags:["communication","chat"],icon:(0,r.Y)(eE.A,{}),configurationItems:[{key:"DISCORD_BOT_TOKEN",title:"Bot Token",description:"[Create a Discord application](https://discord.com/developers/applications), add a bot to it, and paste the bot token below. This token allows your bot to interact with Discord servers.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nimport discord\nfrom discord.ext import commands\n\nintents = discord.Intents.default()\nintents.message_content = True\nbot = commands.Bot(command_prefix='!', intents=intents)",JavaScript:"const { Client, GatewayIntentBits } = require('discord.js');\n\nconst client = new Client({\n  intents: [\n    GatewayIntentBits.Guilds,\n    GatewayIntentBits.GuildMessages,\n    GatewayIntentBits.MessageContent,\n  ],\n});"}},{title:"Bot setup and message handling",code:{Python:"@bot.event\nasync def on_ready():\n    print(f'We have logged in as {bot.user}')\n\n@bot.command()\nasync def hello(ctx):\n    await ctx.send('Hello!')\n\nbot.run(os.environ['DISCORD_BOT_TOKEN'])",JavaScript:"client.once('ready', () => {\n  console.log(`Logged in as ${client.user.tag}!`);\n});\n\nclient.on('messageCreate', async message => {\n  if (message.content === '!hello') {\n    await message.reply('Hello!');\n  }\n});\n\nclient.login(process.env.DISCORD_BOT_TOKEN);"}},{title:"Slash command",code:{Python:'@bot.tree.command(name="greet", description="Greet a user")\nasync def greet(interaction: discord.Interaction, user: discord.Member):\n    await interaction.response.send_message(f"Hello, {user.mention}!")\n\n@bot.event\nasync def on_ready():\n    await bot.tree.sync()\n    print(f\'We have logged in as {bot.user}\')\n\nbot.run(os.environ[\'DISCORD_BOT_TOKEN\'])',JavaScript:"const { Client, GatewayIntentBits, REST, Routes, SlashCommandBuilder } = require('discord.js');\n\nconst client = new Client({ intents: [GatewayIntentBits.Guilds] });\n\nconst commands = [\n  new SlashCommandBuilder()\n    .setName('greet')\n    .setDescription('Greet a user')\n    .addUserOption(option => option.setName('user').setDescription('The user to greet').setRequired(true)),\n];\n\nclient.once('ready', async () => {\n  console.log(`Logged in as ${client.user.tag}!`);\n\n  const rest = new REST({ version: '10' }).setToken(process.env.DISCORD_BOT_TOKEN);\n  try {\n    await rest.put(Routes.applicationCommands(client.user.id), { body: commands });\n    console.log('Slash commands registered');\n  } catch (error) {\n    console.error(error);\n  }\n});\n\nclient.on('interactionCreate', async interaction => {\n  if (!interaction.isCommand()) return;\n\n  if (interaction.commandName === 'greet') {\n    const user = interaction.options.getUser('user');\n    await interaction.reply(`Hello, ${user}!`);\n  }\n});\n\nclient.login(process.env.DISCORD_BOT_TOKEN);"}},{title:"Sending embeds",code:{Python:'@bot.command()\nasync def embed(ctx):\n    embed = discord.Embed(title="Example Embed", description="This is an example embed.", color=0x00ff00)\n    embed.add_field(name="Field 1", value="Value 1", inline=False)\n    embed.add_field(name="Field 2", value="Value 2", inline=False)\n    await ctx.send(embed=embed)',JavaScript:"client.on('messageCreate', async message => {\n  if (message.content === '!embed') {\n    const embed = new EmbedBuilder()\n      .setTitle('Example Embed')\n      .setDescription('This is an example embed.')\n      .setColor(0x00ff00)\n      .addFields(\n        { name: 'Field 1', value: 'Value 1' },\n        { name: 'Field 2', value: 'Value 2' }\n      );\n    await message.channel.send({ embeds: [embed] });\n  }\n});"}}]},{title:"Stripe",description:"Stripe is a payment processing platform that allows businesses to accept online payments. Integrate with Stripe to manage transactions, subscriptions, and billing.",tags:["payments"],icon:(0,r.Y)(eT.A,{}),configurationItems:[{key:"STRIPE_SECRET_KEY",title:"Secret Key",description:"[Create a Stripe account](https://dashboard.stripe.com/register) and obtain your Secret Key from the [API keys page](https://dashboard.stripe.com/apikeys). This key allows access to your Stripe account for processing payments.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nimport stripe\n\nstripe.api_key = os.environ['STRIPE_SECRET_KEY']",JavaScript:"const stripe = require('stripe')(process.env.STRIPE_SECRET_KEY);"}},{title:"Create a payment intent",code:{Python:"try:\n    intent = stripe.PaymentIntent.create(\n        amount=2000,  # Amount in cents\n        currency='usd',\n        payment_method_types=['card'],\n    )\n    print(f\"PaymentIntent created: {intent.id}\")\nexcept stripe.error.StripeError as e:\n    print(f\"Error creating PaymentIntent: {e}\")",JavaScript:"try {\n  const paymentIntent = await stripe.paymentIntents.create({\n    amount: 2000, // Amount in cents\n    currency: 'usd',\n    payment_method_types: ['card'],\n  });\n  console.log(`PaymentIntent created: ${paymentIntent.id}`);\n} catch (error) {\n  console.error(`Error creating PaymentIntent: ${error.message}`);\n}"}},{title:"Create a customer",code:{Python:"try:\n    customer = stripe.Customer.create(\n        email='customer@example.com',\n        name='John Doe',\n        description='Test customer'\n    )\n    print(f\"Customer created: {customer.id}\")\nexcept stripe.error.StripeError as e:\n    print(f\"Error creating customer: {e}\")",JavaScript:"try {\n  const customer = await stripe.customers.create({\n    email: 'customer@example.com',\n    name: 'John Doe',\n    description: 'Test customer'\n  });\n  console.log(`Customer created: ${customer.id}`);\n} catch (error) {\n  console.error(`Error creating customer: ${error.message}`);\n}"}},{title:"Create a subscription",code:{Python:"try:\n    subscription = stripe.Subscription.create(\n        customer='cus_1234567890',\n        items=[{'price': 'price_1234567890'}]\n    )\n    print(f\"Subscription created: {subscription.id}\")\nexcept stripe.error.StripeError as e:\n    print(f\"Error creating subscription: {e}\")",JavaScript:"try {\n  const subscription = await stripe.subscriptions.create({\n    customer: 'cus_1234567890',\n    items: [{ price: 'price_1234567890' }]\n  });\n  console.log(`Subscription created: ${subscription.id}`);\n} catch (error) {\n  console.error(`Error creating subscription: ${error.message}`);\n}"}}]},{title:"HubSpot",description:"HubSpot provides a comprehensive CRM platform with powerful API capabilities. Integrate HubSpot's features into your applications to manage contacts, deals, marketing campaigns, and more using secure private apps.",tags:["CRM","Marketing","API"],icon:(0,r.Y)(function(e){return(0,r.Y)(eR.A,(0,T._)((0,s._)({},e),{children:(0,r.Y)("path",{fill:"#FF7A59",d:"M12.478 10.13a5.463 5.463 0 0 0-1.718 3.984 5.45 5.45 0 0 0 1.095 3.285L9.77 19.496a1.72 1.72 0 0 0-.59-.105 1.694 1.694 0 0 0-1.697 1.702A1.685 1.685 0 0 0 9.18 22.78c.455 0 .88-.164 1.205-.488a1.692 1.692 0 0 0 .417-1.71l2.106-2.114a5.477 5.477 0 0 0 8.814-4.35 5.475 5.475 0 0 0-4.641-5.42V6.103a1.924 1.924 0 0 0 1.188-1.807c0-1.099-.88-2.017-1.98-2.017-1.099 0-1.967.918-1.967 2.017 0 .805.451 1.495 1.188 1.807v2.577a5.45 5.45 0 0 0-1.798.573c-1.162-.88-4.948-3.61-7.113-5.256.05-.185.084-.379.084-.58 0-1.214-.99-2.2-2.207-2.2a2.2 2.2 0 0 0 0 4.402 2.2 2.2 0 0 0 1.129-.32l6.873 4.83Zm3.77 6.89a2.906 2.906 0 1 1 0-5.813 2.906 2.906 0 0 1 0 5.813Z"})}))},{}),configurationItems:[{key:"HUBSPOT_ACCESS_TOKEN",title:"Access Token",description:"To get started, you'll need to create a private app in HubSpot. Go to Settings > Account Setup > Integrations > Private Apps. Create a new private app, select the necessary scopes, and generate your access token. Paste the token below.",placeholder:"pat-na1-••••••••-••••-••••-••••-••••••••••••",required:!0}],codeSampleItems:[{title:"Authentication setup",code:{Python:"import os\nfrom hubspot import HubSpot\n\naccess_token = os.environ['HUBSPOT_ACCESS_TOKEN']\nclient = HubSpot(access_token=access_token)",JavaScript:"const hubspot = require('@hubspot/api-client');\n\nconst accessToken = process.env.HUBSPOT_ACCESS_TOKEN;\nconst hubspotClient = new hubspot.Client({ accessToken });"}},{title:"Fetch contacts",code:{Python:'from hubspot import HubSpot\n\naccess_token = os.environ[\'HUBSPOT_ACCESS_TOKEN\']\nclient = HubSpot(access_token=access_token)\n\ndef get_all_contacts():\n    all_contacts = []\n    after = None\n    while True:\n        contacts_page = client.crm.contacts.basic_api.get_page(\n            limit=100,\n            after=after,\n            properties=["firstname", "lastname", "email"]\n        )\n        all_contacts.extend(contacts_page.results)\n        if not contacts_page.paging:\n            break\n        after = contacts_page.paging.next.after\n    return all_contacts\n\ncontacts = get_all_contacts()\nfor contact in contacts:\n    print(f"Name: {contact.properties[\'firstname\']} {contact.properties[\'lastname\']}")\n    print(f"Email: {contact.properties[\'email\']}")\n    print("---")',JavaScript:"const hubspot = require('@hubspot/api-client');\n\nconst accessToken = process.env.HUBSPOT_ACCESS_TOKEN;\nconst hubspotClient = new hubspot.Client({ accessToken });\n\nasync function getAllContacts() {\n  const allContacts = [];\n  let after = undefined;\n  let hasMore = true;\n\n  while (hasMore) {\n    const apiResponse = await hubspotClient.crm.contacts.basicApi.getPage(\n      100,\n      after,\n      ['firstname', 'lastname', 'email']\n    );\n\n    allContacts.push(...apiResponse.results);\n\n    hasMore = !!apiResponse.paging;\n    after = hasMore ? apiResponse.paging.next.after : undefined;\n  }\n\n  return allContacts;\n}\n\ngetAllContacts()\n  .then(contacts => {\n    contacts.forEach(contact => {\n      console.log(`Name: ${contact.properties.firstname} ${contact.properties.lastname}`);\n      console.log(`Email: ${contact.properties.email}`);\n      console.log('---');\n    });\n  })\n  .catch(err => console.error('Error: ', err));"}}]}],eO=t(51895),eM=t(73301),eB=(0,j.x)({root:[Z.wp.px(8),Z.wp.flex.column,Z.wp.gap(12)],description:[Z.wp.flex.column,Z.wp.gap(4)],serviceList:[Z.wp.flex.column,Z.wp.gap(16),Z.wp.pb(8)],linkButton:[Z.wp.reset.button,Z.wp.linkStyle]});function eH(e){var n=e.openPane,t=e.query,o=e.editSecretsAuthzErrorMessage,a=(0,eO.Vv)(),s=a.getDescription,c=a.Icon,u=a.getTitle,d=R(),p=(0,C.A)().secrets,f=(0,l._)((0,i.useState)(new Map),2),h=f[0],m=f[1];(0,i.useEffect)(function(){return p.watch(function(e){m(e)})},[p]);var g=(0,i.useCallback)(function(e){return e.filter(function(e){return e.required}).every(function(e){return!!h.get(e.key)})},[h]),w=(0,i.useMemo)(function(){return eN.filter(function(e){return g(e.configurationItems)})},[g]),b=(0,i.useMemo)(function(){return eU.filter(function(e){return"connected"===d[e.serviceName]})},[d]),x=(0,i.useMemo)(function(){return(0,y._)(w).concat((0,y._)(b))},[w,b]),k=(0,i.useMemo)(function(){return new Y.Rk(x,{fuzzy:!1,selector:function(e){return"pane"in e?"".concat(u(e.pane)," ").concat(s(e.pane)," ").concat(e.tags.join(" ")):"".concat(e.title," ").concat(e.description," ").concat(e.tags.join(" "))}})},[x,s,u]),_=(0,i.useMemo)(function(){return t?k.find(t).map(function(e){return e.item}):x},[x,k,t]);return(0,r.FD)(er.S,{css:eB.root,children:[(0,r.Y)(en.EY,{variant:"subheadBig",children:"Connected Services"}),(0,r.Y)(er.S,{css:eB.description,children:(0,r.FD)(en.EY,{variant:"text",color:"dimmer",children:[(0,r.FD)("div",{children:["Connect your Repl to a variety of Replit's services and third-party services using"," ",(0,r.Y)("button",{css:eB.linkButton,onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"secretsOpened",source:"description"}),n({type:"envEditor"})},children:"Secrets"}),"."]}),(0,r.FD)("div",{children:["Never share or expose tokens in code."," ",(0,r.Y)(S(),{href:A.ik.SECRETS_SAFETY,target:"_blank",rel:"noopener",css:eB.linkButton,children:"Learn how Replit keeps your Secrets safe"}),"."]})]})}),_.length>0?(0,r.Y)(r.FK,{children:(0,r.Y)(er.S,{tag:"ul",css:eB.serviceList,children:_.map(function(e){if("pane"in e){var t,i=u(e.pane);return(0,r.Y)(eS,{title:i,description:null!==(t=s(e.pane))&&void 0!==t?t:"",icon:(0,r.Y)(c,{pane:e.pane}),onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"replitServiceOpened",service:i}),n(e.pane)},isConnected:!0,configIcon:(0,r.Y)(eM.A,{}),configIconPosition:"right"},i)}if("title"in e)return(0,r.Y)(e_,{title:e.title,icon:e.icon,isConnected:!0,description:e.description,configurationItems:e.configurationItems,codeSampleItems:e.codeSampleItems,openPane:n,editSecretsAuthzErrorMessage:o},e.title)})})}):(0,r.Y)(en.EY,{variant:"subheadDefault",children:"No matching services."})]})}var ez=t(90629),eW=t(80865),eG=t(39593),eV=t(24692),ej=t(31618),eZ=t(44885),eq=t(1018),eK=t(84296),e$=t(42784),eJ=(0,j.x)({root:[Z.wp.reset.button,Z.wp.overflow("hidden"),Z.wp.flex.row,Z.wp.align.center,Z.wp.justify.spaceBetween,Z.wp.p(8),Z.wp.gap(4),Z.wp.backgroundColor.backgroundHigher,Z.wp.border({color:G.LU.outlineDimmer,width:1}),Z.wp.borderRadius(),Z.wp.cursor.pointer,{"&:hover":{backgroundColor:G.LU.backgroundHighest,borderColor:G.LU.outlineDefault}}],title:[Z.wp.flex.row,Z.wp.align.center,Z.wp.gap(4)],content:[Z.wp.flex.column,Z.wp.gap(4)]}),eQ=function(e){var n=e.icon,t=e.title,i=e.description,o=e.onClick;return(0,r.FD)(er.S,{css:eJ.root,tag:"button",onClick:o,tabIndex:0,children:[(0,r.FD)(er.S,{css:eJ.content,children:[(0,r.FD)(en.EY,{variant:"subheadDefault",css:eJ.title,children:[(0,r.Y)(eK.Vx.Provider,{value:{size:16},children:n}),t]}),(0,r.Y)(en.EY,{variant:"small",color:"dimmer",children:i})]}),(0,r.Y)(eq.A,{})]})},eX=(0,j.x)({root:[Z.wp.flex.column,Z.wp.gap(8)],actions:[Z.wp.gap(8)]}),e0=function(e){var n,t=e.isOpen,o=e.setIsOpen,a=(0,m.A)(),c=(0,eG.i)(),u=(0,l._)((0,i.useState)(!1),2),d=u[0],p=u[1],f=(0,l._)((0,i.useState)({freeform:""}),2),h=f[0],g=f[1],w=(0,i.useId)(),y=!!h.freeform;return(0,i.useEffect)(function(){t||g({freeform:""})},[t]),(0,r.Y)(eZ.a,{isOpen:t,onRequestClose:function(){return o(!1)},children:(0,r.FD)(eV.lV,{onSubmit:(n=(0,I._)(function(e){var n;return(0,P.YH)(this,function(t){switch(t.label){case 0:if(e.preventDefault(),!y)return[2];p(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"feedbackSubmitted",freeform:h.freeform}),[4,fetch("https://integrations-feedback-bot.replit.app/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:h.freeform,replId:a,username:null==c?void 0:c.username})})];case 2:return t.sent(),[3,4];case 3:return n=t.sent(),ez.Cp(n),[3,4];case 4:return p(!1),o(!1),[2]}})}),function(e){return n.apply(this,arguments)}),css:eX.root,children:[(0,r.Y)(en.Y9,{variant:"headerDefault",level:2,children:"Integrations Feedback"}),(0,r.Y)(en.EY,{variant:"small",children:"Help us prioritize the services you want to use most in your Apps."}),(0,r.Y)(ej.ov,{rows:3,id:"".concat(w,"-freeform"),value:h.freeform,onChange:function(e){return g(function(n){return(0,T._)((0,s._)({},n),{freeform:e.target.value})})}}),(0,r.FD)(er.S,{css:eX.actions,justify:"end",row:!0,children:[(0,r.Y)(q.$n,{text:"Cancel",loading:d,onClick:function(){return o(!1)}}),(0,r.Y)(q.$n,{loading:d,disabled:!y,type:"submit",text:"Submit feedback",colorway:"primary"})]})]})})},e1=function(e){var n=e.onOpenFeedback;return(0,r.Y)(eQ,{icon:(0,r.Y)(e$.A,{}),title:"Don't see what you're looking for?",description:"Tell us what we're missing.",onClick:function(){return n()}})},e2=(0,j.x)({root:[Z.wp.px(8),Z.wp.flex.column,Z.wp.gap(12)],description:[Z.wp.flex.column,Z.wp.gap(4)],serviceList:[Z.wp.flex.column,Z.wp.gap(16),Z.wp.pb(8)],linkButton:[Z.wp.reset.button,Z.wp.linkStyle]});function e4(e){var n=e.openPane,t=e.query,o=e.editSecretsAuthzErrorMessage,a=(0,eW._P)({controlName:"flag-integrations-pane-feedback"}),s=(0,l._)((0,i.useState)(!1),2),c=s[0],u=s[1],d=(0,C.A)().secrets,p=(0,l._)((0,i.useState)(new Map),2),f=p[0],h=p[1];(0,i.useEffect)(function(){return d.watch(function(e){h(e)})},[d]);var m=(0,i.useCallback)(function(e){return e.filter(function(e){return e.required}).every(function(e){return!!f.get(e.key)})},[f]),g=(0,i.useMemo)(function(){return new Y.Rk(eN,{fuzzy:!1,selector:function(e){return"".concat(e.title," ").concat(e.description," ").concat(e.tags.join(" "))}})},[]),w=(0,i.useMemo)(function(){return t?g.find(t).map(function(e){return e.item}):eN},[g,t]);return(0,r.FD)(er.S,{css:e2.root,children:[(0,r.Y)(en.EY,{variant:"subheadBig",children:"External Services"}),(0,r.Y)(er.S,{css:e2.description,children:(0,r.FD)(en.EY,{variant:"text",color:"dimmer",children:[(0,r.FD)("div",{children:["Connect your App to a variety of third-party services using"," ",(0,r.Y)("button",{css:e2.linkButton,onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"secretsOpened",source:"description"}),n({type:"envEditor"})},children:"Secrets"}),"."]}),(0,r.FD)("div",{children:["Never share or expose tokens in code."," ",(0,r.Y)(S(),{href:A.ik.SECRETS_SAFETY,target:"_blank",rel:"noopener",css:e2.linkButton,children:"Learn how Replit keeps your Secrets safe"}),"."]}),a&&w.length>0?(0,r.FD)("div",{children:["Don't see what you're looking for?"," ",(0,r.Y)("button",{css:e2.linkButton,onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"feedbackOpened",source:"description"}),u(!0)},children:"Send us feedback"}),"."]}):null]})}),w.length>0?(0,r.Y)(r.FK,{children:(0,r.Y)(er.S,{css:e2.serviceList,children:w.map(function(e){return(0,r.Y)(e_,{title:e.title,icon:e.icon,description:e.description,configurationItems:e.configurationItems,codeSampleItems:e.codeSampleItems,openPane:n,isConnected:m(e.configurationItems),editSecretsAuthzErrorMessage:o},e.title)})})}):(0,r.Y)(en.EY,{variant:"subheadDefault",children:"No matching services."}),a&&0===w.length?(0,r.Y)(e1,{onOpenFeedback:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"feedbackOpened",source:"card"}),u(!0)}}):null,(0,r.Y)(e0,{isOpen:c,setIsOpen:u})]})}var e5=t(92496),e8=(0,j.x)({root:[Z.wp.px(8),Z.wp.pb(8),Z.wp.flex.column,Z.wp.gap(12)]});function e3(e){var n=e.openPane,t=e.query,o=(0,eO.Vv)(),a=o.getDescription,l=o.Icon,s=o.getTitle,c=R(),u=(0,i.useMemo)(function(){return new Y.Rk(eU,{fuzzy:!1,selector:function(e){return"".concat(s(e.pane)," ").concat(a(e.pane)," ").concat(e.tags.join(" "))}})},[a,s]),d=(0,i.useMemo)(function(){return t?u.find(t).map(function(e){return e.item}):eU},[u,t]);return(0,r.FD)(er.S,{css:e8.root,children:[(0,r.Y)(en.EY,{variant:"subheadBig",children:"Replit Services"}),(0,r.Y)(en.EY,{variant:"text",color:"dimmer",children:"Connect to Replit's storage and auth services."}),d.length>0?null:(0,r.Y)(en.EY,{variant:"subheadDefault",children:"No matching services."}),eU.map(function(e){var t,i=s(e.pane);return d.includes(e)&&i!==e5.v?(0,r.Y)(eS,{title:i,description:null!==(t=a(e.pane))&&void 0!==t?t:"",icon:(0,r.Y)(l,{pane:e.pane}),onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"replitServiceOpened",service:i}),n(e.pane)},isConnected:"connected"===c[e.serviceName],configIcon:(0,r.Y)(eM.A,{}),configIconPosition:"right"},i):null})]})}var e6=t(45771),e7=t(53723),e9=t(41845),ne=t(13278),nn=t(79571),nt=t(17367),nr=t(96415),ni=(0,e6.AH)([Z.wp.maxWidth(600),Z.wp.width("100%"),{alignSelf:"center"}]),no=(0,j.x)({root:[Z.wp.width("100%"),Z.wp.overflowY("auto"),Z.wp.flex.column,Z.wp.flex.grow(1),Z.wp.height("100%"),Z.wp.width("100%"),{margin:"0 auto"}],header:[ni,Z.wp.backgroundColor.backgroundDefault,Z.wp.flex.growAndShrink(0),Z.wp.p(8),Z.wp.flex.row,Z.wp.gap(12),Z.wp.position.sticky,Z.wp.top(0),Z.wp.zIndex(1),{alignSelf:"center","& > div:first-child":{flexGrow:1}}],content:[Z.wp.flex.growAndShrink(1),Z.wp.width("100%"),Z.wp.gap(24),Z.wp.pb(8),ni]});function na(e){var n,t,o=e.openPane,a=(0,l._)((0,i.useState)(null),2),c=a[0],u=a[1],p=(0,l._)((0,i.useState)(""),2),y=p[0],b=p[1],S=(0,m.A)(),Y=(0,w.A)("integrations-pane","integrations-toast").dismiss,A=(n=(0,s._)({},f,{variables:{replId:S}}),d.I(h,n)).data,C=(null==A?void 0:A.getRepl.__typename)==="Repl"?A.getRepl.authorizations.editSecrets:void 0,x=(null==C?void 0:C.isAuthorized)===!0?void 0:null!==(t=null==C?void 0:C.message)&&void 0!==t?t:"Checking Authorizations";return(0,i.useEffect)(function(){Y()},[Y]),(0,g.M)(v.AZ.INTEGRATIONS_PANE_USED,{action:"viewed"}),(0,r.Y)(E,{children:(0,r.FD)(er.S,{css:no.root,children:[(0,r.FD)(er.S,{css:no.header,children:[(0,r.Y)(e9.I,{placeholder:"Search for a service...",value:y,onChange:function(e){return b(e.target.value)},onBlur:function(){y&&(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"searchUsed",query:y})},onClear:function(){return b("")}}),(0,r.FD)(e7.e2,{name:"integrations-category",value:c,onChange:u,row:!0,children:[(0,r.Y)(e7.$O,{id:"all",value:null,text:"All",icon:(0,r.Y)(nt.A,{})}),(0,r.Y)(e7.$O,{id:"connected",value:"connected",text:"Connected",icon:(0,r.Y)(nn.A,{})}),(0,r.Y)(e7.$O,{id:"replit",value:"replit",text:"Replit",icon:(0,r.Y)(nr.A,{})}),(0,r.Y)(e7.$O,{id:"external",value:"external",text:"External",icon:(0,r.Y)(ne.A,{})})]})]}),(0,r.FD)(er.S,{css:no.content,children:[c&&"connected"!==c?null:(0,r.Y)(eH,{query:y,openPane:o,editSecretsAuthzErrorMessage:x}),c&&"replit"!==c?null:(0,r.Y)(e3,{query:y,openPane:o}),c&&"external"!==c?null:(0,r.Y)(e4,{query:y,openPane:o,editSecretsAuthzErrorMessage:x})]})]})})}var nl=t(67169),ns=o.ZU.Object({type:o.ZU.Literal("integrations")}),nc={Content:function(e){var n=e.options.performPaneOperation,t=(0,i.useCallback)(function(e){return n({operation:"open",secondary:!0,pane:e})},[n]);return(0,r.Y)(na,{openPane:t})},Icon:function(e){var n=e.size;return(0,r.Y)(nl.A,{size:n})},getTitle:function(){return"Integrations"},description:"Connect to Replit-native and external services",category:eO.bY.CloudServices,decode:function(e){return a.WT.Decode(ns,e)}}},59527:(e,n,t)=>{"use strict";t.d(n,{H:()=>s});var r=t(1889),i=t(3402),o=t(29253),a=t(40043),l=t(35869);function s(e){var n,t,s,c,u,d,p,f=(0,i.sx)({variables:{id:e.id}}).data,h=null==f?void 0:f.user;return e.showAvatarOnly?(0,r.Y)(o.e,{size:24,username:null!==(n=null==h?void 0:h.username)&&void 0!==n?n:"",fullName:null!==(t=null==h?void 0:h.fullName)&&void 0!==t?t:"",src:null!==(s=null==h?void 0:h.image)&&void 0!==s?s:""}):(0,r.FD)(l.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(o.e,{size:24,username:null!==(c=null==h?void 0:h.username)&&void 0!==c?c:"",fullName:null!==(u=null==h?void 0:h.fullName)&&void 0!==u?u:"",src:null!==(d=null==h?void 0:h.image)&&void 0!==d?d:""}),(0,r.Y)(a.EY,{variant:"small",color:"dimmer",children:null!==(p=null==h?void 0:h.username)&&void 0!==p?p:""})]})}},60099:(e,n,t)=>{"use strict";t.d(n,{x:()=>p});var r=t(1889),i=t(26496),o=t(61234),a=t(43974),l=t(3910),s=t(35869),c=t(32633),u="Connection to ".concat(i.BP," lost. Try refreshing the page."),d=(0,o.x)({root:[a.wp.px(8),a.wp.pb(8),{justifySelf:"end"}],errorBannerContainer:[a.wp.display.flex,a.wp.align.center,a.wp.flex.grow(1),a.wp.minHeight(32),a.wp.maxHeight(300),a.wp.overflow("auto")],errorBanner:[a.wp.minHeight("fit-content"),a.wp.p(8)]});function p(){return(0,r.Y)(s.S,{css:d.root,children:(0,r.Y)(s.S,{css:d.errorBannerContainer,justify:"center",children:(0,r.Y)(s.S,{css:d.errorBanner,children:(0,r.Y)(l.N,{icon:(0,r.Y)(c.A,{}),colorway:"red",text:u})})})})}},60128:(e,n,t)=>{"use strict";t.d(n,{W:()=>a,z:()=>o});var r=t(21462),i=new(t(85788)).N(new Map);function o(e){var n=e.type,t=e.position,o=void 0===t?"bottom":t,a=(0,r.useRef)(null);return(0,r.useEffect)(function(){var e=a.current;if(e instanceof HTMLElement)return i.update(function(t){var r=new Map(t);return r.set(n,{element:e,position:o}),r}),function(){i.update(function(t){var r,i=new Map(t);return(null===(r=i.get(n))||void 0===r?void 0:r.element)===e&&i.delete(n),i})}},[n,o]),a}function a(e){var n=i.current.get(e);return null!=n?n:null}},60275:(e,n,t)=>{"use strict";t.d(n,{o:()=>a});var r=t(37743),i=t(82643),o=t(11813),a=function(){function e(n,t,i,o){(0,r._)(this,e),this.a=n,this.b=t,this.chunks=i,this.map=o}var n=e.prototype;return n.line=function(e,n){return n===o.mn.A?this.a.line(e):this.b.line(e)},n.bounds=function(e){if(0===this.chunks.length)return null;var n=(0,o.Dk)(this.chunks[0],e),t=(0,o.Dk)(this.chunks[this.chunks.length-1],e),r=e===o.mn.A?this.a.length:this.b.length,i=Math.min(t.to,r);return{from:n.from,to:i}},n.hasChanges=function(){return this.chunks.length>0},n.updateA=function(n,t,r){var i=this.b,a=(0,o.Pt)(n,i,{chunks:this.chunks,changesA:t},r),l=(0,o.k1)(n,i,a);return new e(n,i,a,l)},n.updateB=function(n,t,r){var i=this.a,a=(0,o.Pt)(i,n,{chunks:this.chunks,changesB:t},r),l=(0,o.k1)(i,n,a);return new e(i,n,a,l)},n.getContainingChunk=function(e,n){for(var t=0,r=this.chunks.length-1;t<=r;){var i=t+r>>>1,a=this.chunks[i],l=(0,o.Dk)(a,n);if(e>=l.from&&e<=l.to)return a;e<l.from?r=i-1:e>l.to&&(t=i+1)}return null},n.getCorrespondingLine=function(e,n){var t=this.map.get(n===o.mn.A?-e:e);return t?this.line(t,(0,o.Nl)(n)):null},n.getLineChangeType=function(e,n){if(this.map.get(n===o.mn.A?-e:e))return o.DE.UNCHANGED;var t=this.line(e,n),r=this.getContainingChunk(t.from,n);return r?(0,o.$F)(this.a,this.b,t,n,r.changes,r):o.DE.UNCHANGED},n.getLineStats=function(){for(var e={added:0,removed:0},n=1;n<=this.a.lines;n++)this.getLineChangeType(n,o.mn.A)!==o.DE.UNCHANGED&&e.removed++;for(var t=1;t<=this.b.lines;t++)this.getLineChangeType(t,o.mn.B)!==o.DE.UNCHANGED&&e.added++;return e},n.iterLines=function(e){var n,t,r,a;return(0,i.YH)(this,function(i){switch(i.label){case 0:n=e===o.mn.A?this.a:this.b,t=1,i.label=1;case 1:if(!(t<=n.lines))return[3,4];return r=n.line(t),a=this.getCorrespondingLine(r.number,e),[4,{line:r,correspondingLine:a}];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}})},n.iterRanges=function(){var e,n,t,r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:e=0,i.label=1;case 1:if(!(e<this.chunks.length))return[3,6];n=this.chunks[e].fromA,t=this.chunks[e].fromB,r=0,i.label=2;case 2:if(!(r<this.chunks[e].changes.length))return[3,5];return o=this.chunks[e].changes[r],[4,{fromA:n+o.fromA,toA:n+o.toA,fromB:t+o.fromB,toB:t+o.toB}];case 3:i.sent(),i.label=4;case 4:return r++,[3,2];case 5:return e++,[3,1];case 6:return[2]}})},e.create=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.r6,i=(0,o.Pt)(n,t,void 0,r),a=(0,o.k1)(n,t,i);return new e(n,t,i,a)},e}()},60562:(e,n,t)=>{"use strict";t.d(n,{G:()=>o,n:()=>a});var r=t(10535),i=t(11305),o=function(e){var n=new Date(e),t=new Date;return 60>(0,r.A)(t,n)?"just now":(0,i.K)(n,!0)+" ago"},a=function(e){return new Date(e).toLocaleString()}},60629:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(21462),i=t(96907),o=t.n(i),a=t(49937);function l(e){!function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;(0,r.useEffect)(function(){if(null!=n)return n.portsState.subscribe(o()(function(n){if(null!=n){var t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.isOpen&&!l.configuration.isVnc){e.set(!0);return}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}e.set(!1)}},t))},[n,e,t])}((0,a.Av)(),e)}},60799:(e,n,t)=>{"use strict";t.d(n,{f:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query ReplTeamOrgSettings($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n            organization {\n              id\n              isAiEnabled\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l()),u=t(16907);function d(){var e,n,t,i,o=(t={variables:{replId:(0,u.A)()}},i=(0,r._)({},s,t),a.I(c,i)).data;return{isTeamWithAiDisabled:(null==o?void 0:o.repl.__typename)==="Repl"&&(null===(e=o.repl.owner)||void 0===e?void 0:e.__typename)==="Team"&&(null===(n=o.repl.owner.organization)||void 0===n?void 0:n.isAiEnabled)===!1}}},60990:(e,n,t)=>{"use strict";t.d(n,{b:()=>s});var r=t(12694),i=t(86105),o=t(21462),a=t(58270),l=t(71498);function s(e,n){var t,s,c=(0,a.yB)(),u=(0,l.X)(),d=null!==(s=null==c?void 0:c.client)&&void 0!==s?s:null,p=(0,o.useRef)(null),f=(t=(0,r._)((0,o.useState)(),2)[1],(0,o.useCallback)(function(e){try{t(function(){throw e})}catch(e){}},[]));(0,o.useEffect)(function(){if(p.current&&(p.current.abort(),p.current=null),d&&u){var n=new AbortController;p.current=n;var t=n.signal,r=[];t.addEventListener("abort",function(){var e=[],n=!0,t=!1,i=void 0;try{for(var o,a=r[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;try{l()}catch(n){e.push(n)}}}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}e.length&&(1===e.length?f(e[0]):"undefined"!=typeof AggregateError?f(AggregateError(e,"Multiple errors occurred during cleanup")):f(Error("Multiple errors occurred during cleanup")))});var i=function(e){if(t.aborted)try{e()}catch(e){f(e)}else r.push(e)};try{Promise.resolve(e(d,{session:u,signal:t,addCleanup:i})).then(function(e){e&&i(e)}).catch(function(e){n.abort(),f(e)})}catch(e){throw n.abort(),e}return function(){n.abort()}}},[d,u,f].concat((0,i._)(n)))}},61116:(e,n,t)=>{"use strict";t.d(n,{PF:()=>m,nw:()=>h});var r=t(37743),i=t(12694),o=t(82643),a=t(46723),l=t.n(a),s=l().DIFF_DELETE,c=l().DIFF_INSERT,u=l().DIFF_EQUAL;function d(e,n){var t=new(l()),r=t.diff_linesToChars_(e,n),i=r.chars1,o=r.chars2,a=r.lineArray,s=t.diff_main(i,o,!1);return t.diff_charsToLines_(s,a),s}function p(e){return e.split("\n").length-1}function f(e,n,t){if(e>0){var r=function e(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===t)return 0;var i=n.indexOf("\n",r);return -1===i?null:1===t?i+1:e(n,t-1,i+1)}(t,n);if(null!==r)return{lineNumber:n,character:r,padding:e}}return null}function h(e,n){var t=!1,r=!1;t="\n"===e[e.length-1],r="\n"===n[n.length-1];for(var o=d(e+(t?"":"\n"),n+(r?"":"\n")),a=0,l=0,h=[],m=[],g=[],v=[],w=0,y=0,b=0;b<o.length;b++){var S=(0,i._)(o[b],2),Y=S[0],A=p(S[1]);switch(Y){case s:var C,x=(0,i._)(null!==(C=o[b+1])&&void 0!==C?C:[],2),k=x[0],_=x[1];a+=A;for(var D=0;D<A;D++)h.push(a-D);var E=A;k===c&&(E-=p(_));var R=f(E,l,n);R&&v.push(R);break;case c:var I,F=(0,i._)(null!==(I=o[b-1])&&void 0!==I?I:[],2),T=F[0],P=F[1];l+=A;for(var L=0;L<A;L++)m.push(l-L);var U=A;T===s&&(U-=p(P));var N=f(U,a,e);N&&g.push(N);break;case u:l>y&&(y=l),a>w&&(w=a),a+=A,l+=A}}return{leftPadded:g.filter(function(e){return e.lineNumber<y}),rightPadded:v.filter(function(e){return e.lineNumber<w}),leftColored:h,rightColored:m,changedTrailingNewline:t!==r,leftTrailingNewline:t,rightTrailingNewline:r}}var m=function(){function e(n,t){(0,r._)(this,e),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===n[n.length-1],this.otherTrailingNewline="\n"===t[t.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var o=d(n,t),a=[],l=!0,p=!1,f=void 0;try{for(var h,m=o[Symbol.iterator]();!(l=(h=m.next()).done);l=!0){var g=(0,i._)(h.value,2),v=g[0],w=g[1].split("\n");""===w[w.length-1]&&w.pop();var y=!0,b=!1,S=void 0;try{for(var Y,A=w[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0){var C=Y.value;a.push([v,C])}}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}}}catch(e){p=!0,f=e}finally{try{l||null==m.return||m.return()}finally{if(p)throw f}}this.currentTrailingNewline&&!this.otherTrailingNewline?a.push([s,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?a.push([c,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&a.push([u,""]);var x=1,k=0,_=1,D=!0,E=!1,R=void 0;try{for(var I,F=a[Symbol.iterator]();!(D=(I=F.next()).done);D=!0){var T=(0,i._)(I.value,2),P=T[0],L=T[1];switch(P){case s:this.linePositions.set(x,k),this.lineLengths.set(x,L.length),this.deleted.add(x),k+=L.length+1,x++;break;case c:var U=x-1,N=this.inserted.get(U);N||(N=[],this.inserted.set(U,N)),N.push({number:_,content:L}),_++;break;case u:this.linePositions.set(x,k),this.lineLengths.set(x,L.length),k+=L.length+1,x++,_++}}}catch(e){E=!0,R=e}finally{try{D||null==F.return||F.return()}finally{if(E)throw R}}}var n=e.prototype;return n.startInsertions=function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null},n.lineIsDeleted=function(e){return this.deleted.has(e)},n.lineInsertions=function(e){var n=this.inserted.get(e);return n&&0!==n.length?n:null},n.lineInsertedContent=function(e){var n=this.lineInsertions(e);return n?n.map(function(e){return e.content}).join("\n"):null},n.offsetFor=function(e){var n,t,r;r=0+(null!==(t=null===(n=this.inserted.get(0))||void 0===n?void 0:n.length)&&void 0!==t?t:0);for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var o=this.lineInsertions(i);o&&(r+=o.length)}return r},n.linePosition=function(e){var n;return null!==(n=this.linePositions.get(e))&&void 0!==n?n:null},n.lineLength=function(e){var n;return null!==(n=this.lineLengths.get(e))&&void 0!==n?n:null},n.line=function(e){var n=this.linePosition(e),t=this.lineLength(e);if(null===n||null===t)return null;var r=this.offsetFor(e),i=this.lineIsDeleted(e),o=this.lineInsertions(e);return{number:e,from:n,to:n+t,length:t,offset:r,isDeleted:i,insertions:o}},n.lines=function(){var e,n,t,r,a,l,s,c;return(0,o.YH)(this,function(o){switch(o.label){case 0:e=!0,n=!1,t=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),r=this.linePositions[Symbol.iterator](),o.label=2;case 2:if(e=(a=r.next()).done)return[3,5];if(l=(0,i._)(a.value,1)[0],!(s=this.line(l)))throw Error("line should not be null");return[4,s];case 3:o.sent(),o.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return c=o.sent(),n=!0,t=c,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 8:return[2]}})},e}()},61136:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(12694),i=t(21462),o=t(31930),a=t(88390),l=t(67337);function s(){var e=(0,l.A)().container,n=(0,a.A)(e),t=(0,r._)((0,i.useState)(!1),2),s=t[0],c=t[1];return((0,i.useEffect)(function(){n===o.KN.CONNECTED&&c(!0)},[n]),s)?{didConnectOnce:s,didDisconnect:n!==o.KN.CONNECTED}:{didConnectOnce:!1,didDisconnect:!1}}},61377:(e,n,t)=>{"use strict";t.d(n,{i:()=>d});var r=t(4124),i=t(17844),o=t(12584),a=t(41114),l=t(86997);function s(){var e=(0,o._)(["\n  query WorkspaceShowAdmin {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return s=function(){return e},e}var c={},u=(0,a.J1)(s());function d(){var e,n,t=(e=(0,i._)({},c,void 0),l.I(u,e)).data,o=(0,r.useRouter)();return(null==t?void 0:null===(n=t.currentUser)||void 0===n?void 0:n.isAdmin)||!!o.query.debug}},61937:(e,n,t)=>{"use strict";t.d(n,{VP:()=>p,XI:()=>f,fI:()=>d});var r=t(17844),i=t(93629),o=t(17459),a=t(1889),l=t(61234),s=t(43974),c=t(35869),u=(0,l.x)({table:{},tableRow:[s.wp.rowWithGap(12),s.wp.align.center,s.wp.border({direction:"bottom"}),{boxSizing:"border-box"}],column:[s.wp.display.flex,s.wp.colWithGap(0),s.wp.justify.center,s.wp.border({direction:"right"}),{":last-child":{borderRight:0}}],cell:[s.wp.rowWithGap(4),s.wp.align.center,s.wp.color.foregroundDimmest,s.wp.justify.spaceBetween,s.wp.fontSize("small"),s.wp.mx(4),s.wp.py(2),{overflow:"hidden",whiteSpace:"nowrap"}]}),d=function(e){var n=e.children,t=(0,o._)(e,["children"]);return(0,a.Y)("tr",(0,i._)((0,r._)({css:u.tableRow},t),{children:(0,a.Y)(c.S,{row:!0,gap:0,children:n})}))},p=function(e){var n=e.header,t=e.width,r=e.last,i=e.children,o={};return(t&&(o.width=t),r&&(o.marginLeft="auto"),void 0!==n&&n)?(0,a.Y)("th",{style:o,children:(0,a.Y)(c.S,{css:u.cell,children:i})}):(0,a.Y)("td",{css:u.column,style:o,children:(0,a.Y)(c.S,{css:u.cell,children:i})})},f=function(e){var n=e.children;return(0,a.Y)("table",{css:u.table,children:n})}},62402:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M4.055 2.055A2.75 2.75 0 0 1 6 1.25h8a.75.75 0 0 1 .53.22l6 6c.141.14.22.331.22.53v12A2.75 2.75 0 0 1 18 22.75H6A2.75 2.75 0 0 1 3.25 20V4c0-.73.29-1.429.805-1.945ZM6 2.75A1.25 1.25 0 0 0 4.75 4v16A1.25 1.25 0 0 0 6 21.25h12A1.25 1.25 0 0 0 19.25 20V8.75H14a.75.75 0 0 1-.75-.75V2.75H6Zm8.75 1.06 3.44 3.44h-3.44V3.81ZM12 11.25a.75.75 0 0 1 .75.75v2.25H15a.75.75 0 0 1 0 1.5h-2.25V18a.75.75 0 0 1-1.5 0v-2.25H9a.75.75 0 0 1 0-1.5h2.25V12a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},62451:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(17844),i=t(93629),o=t(1889),a=t(6680),l=t(84296);function s(e){return(0,o.FD)(l.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.FD)("g",{clipPath:"url(#clip0_7329_267)",children:[(0,o.Y)("path",{fill:a.LU.tealDefault,d:"M7.714 0a3.429 3.429 0 0 1 3.429 3.429v.026a5.143 5.143 0 0 0 5.137 5.116h.006a3.429 3.429 0 0 1 0 6.858 5.143 5.143 0 0 0-5.143 5.142 3.429 3.429 0 1 1-3.429-3.428h.007a5.143 5.143 0 0 0-.007-10.286 3.429 3.429 0 0 1 0-6.857Z"}),(0,o.Y)("path",{fill:a.LU.tealStronger,d:"M11.143 12a3.429 3.429 0 1 0-6.857 0 3.429 3.429 0 0 0 6.857 0Z"}),(0,o.Y)("path",{fill:"url(#paint0_radial_7329_267)",d:"M7.714 0a3.429 3.429 0 0 1 3.429 3.429v.026a5.143 5.143 0 0 0 5.137 5.116h.006a3.429 3.429 0 0 1 0 6.858 5.143 5.143 0 0 0-5.143 5.142 3.429 3.429 0 1 1-3.429-3.428h.007a5.143 5.143 0 0 0-.007-10.286 3.429 3.429 0 0 1 0-6.857Z",opacity:".5"}),(0,o.Y)("path",{fill:"url(#paint1_radial_7329_267)",d:"M7.714 8.571a3.429 3.429 0 1 1 0 6.858 3.429 3.429 0 0 1 0-6.858Z",opacity:".5"})]}),(0,o.FD)("defs",{children:[(0,o.FD)("radialGradient",{id:"paint0_radial_7329_267",cx:"0",cy:"0",r:"1",gradientTransform:"rotate(44.479 -2.762 5.679)scale(29.1694)",gradientUnits:"userSpaceOnUse",children:[(0,o.Y)("stop",{stopColor:"#fff",stopOpacity:".79"}),(0,o.Y)("stop",{offset:"1"})]}),(0,o.FD)("radialGradient",{id:"paint1_radial_7329_267",cx:"0",cy:"0",r:"1",gradientTransform:"rotate(44.479 -2.763 5.679)scale(29.1694)",gradientUnits:"userSpaceOnUse",children:[(0,o.Y)("stop",{stopColor:"#fff",stopOpacity:".79"}),(0,o.Y)("stop",{offset:"1"})]}),(0,o.Y)("clipPath",{id:"clip0_7329_267",children:(0,o.Y)("path",{fill:"#fff",d:"M0 .274C0 .123.123 0 .274 0h23.452c.151 0 .274.123.274.274v23.452a.274.274 0 0 1-.274.274H.274A.274.274 0 0 1 0 23.726V.274Z"})})]})]}))}},62535:(e,n,t)=>{"use strict";t.d(n,{J9:()=>u});var r=t(12694),i=t(86105),o=t(67668),a=t(11597),l=["json","md","draw","txt"],s=[".gitignore",".replit"];function c(e,n){var t=new Map,a=!0,l=!1,s=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d,p=c.value,f=(0,o.an)(p);if(f&&(!n||f.startsWith(n))){var h=null!==(d=t.get(f))&&void 0!==d?d:0;t.set(f,h+1)}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return(0,i._)(t.entries()).sort(function(e,n){var t=(0,r._)(e,2)[1];return(0,r._)(n,2)[1]-t}).map(function(e){return(0,r._)(e,1)[0]})}function u(e,n){if(e.fileType===a.pt.Directory||!e.input)return[];if("."===e.input)return s.map(function(e){return{value:e,highlight:[{from:1,to:e.length}]}});if(e.input.startsWith("."))return s.filter(function(n){return n.startsWith(e.input)}).map(function(n){return{value:n,highlight:[{from:n.length-e.input.length,to:n.length}]}});var t=(0,o.an)(e.input),r=c(e.siblings.map(function(e){return e.filename}),t);if(r.length<3&&r.push.apply(r,(0,i._)(c(n(),t))),r.length<3){var u=t?l.filter(function(e){return e.startsWith(t)}):l;r.push.apply(r,(0,i._)(u))}return(0,i._)(new Set(r)).slice(0,3).map(function(n){var r=e.input;r.endsWith(".")?r=r.slice(0,-1):t&&(r=r.slice(0,-(t.length+1)));var i=r+"."+n;return{value:i,highlight:[{from:e.input.length,to:i.length}]}})}},63433:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M7 4.25c-.69 0-1.25.56-1.25 1.25v13.333c0 .69.56 1.25 1.25 1.25h10c.69 0 1.25-.56 1.25-1.25v-7.292a.625.625 0 1 1 1.25 0v7.292a2.5 2.5 0 0 1-2.5 2.5H7a2.5 2.5 0 0 1-2.5-2.5V5.5A2.5 2.5 0 0 1 7 3h4.375a.625.625 0 1 1 0 1.25H7Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M15.333 16.541c0 .345-.263.625-.588.625h-5.49c-.325 0-.588-.28-.588-.625s.263-.625.588-.625h5.49c.325 0 .588.28.588.625ZM15.333 10.083c0 .345-.263.625-.588.625h-5.49c-.325 0-.588-.28-.588-.625s.263-.625.588-.625h5.49c.325 0 .588.28.588.625Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M12 13.416c-.345 0-.625-.263-.625-.588v-5.49c0-.325.28-.588.625-.588s.625.263.625.588v5.49c0 .325-.28.588-.625.588ZM17.889 1.266c-.13-.355-.648-.355-.778 0l-.893 2.44a.407.407 0 0 1-.264.247l-2.166.663a.396.396 0 0 0 0 .762l2.166.669c.123.038.22.13.264.247l.893 2.44c.13.355.648.355.778 0l.893-2.44a.407.407 0 0 1 .264-.247l2.166-.666a.396.396 0 0 0 0-.762l-2.166-.666a.407.407 0 0 1-.264-.247l-.893-2.44Z",clipRule:"evenodd"})]}))}},63521:(e,n,t)=>{"use strict";t.d(n,{A:()=>c,T:()=>s});var r=t(12694),i=t(21462),o=t(44441),a=t(11597),l=t(67337),s=".tutorial";function c(){var e=(0,l.A)().fs,n=(0,r._)((0,i.useState)({isLoading:!0,isTutorial:!1}),2),t=n[0],c=n[1];return(0,i.useEffect)(function(){e.watchDir(o.Dl,{onChange:function(e){c({isLoading:!1,isTutorial:e.some(function(e){return e.type===a.pt.Directory&&e.filename===s})})},onMoveOrDelete:function(){c({isLoading:!1,isTutorial:!1})},onError:function(){c({isLoading:!1,isTutorial:!1})}})},[e]),t}},64039:(e,n,t)=>{"use strict";t.d(n,{O:()=>X,A:()=>er});var r=t(12694),i=t(1889),o=t(45981),a=t.n(o),l=t(21462),s=t(72004),c=t(26496),u=t(88184),d=t(30391),p=t(63892),f=t(96497),h=t(86105),m=t(35992),g=t(48686),v=t(2658),w=t(40563),y=t(68423),b=t(52920),S=t(38349),Y=t(6680),A=t(61234),C=t(43974),x=t(93682),k=t(24692),_=t(31618),D=t(2527),E=t(40043),R=t(37407),I=t(35869),F=t(41685),T=t(75251),P=t(79812),L=(0,A.x)({wrapper:[C.wp.borderRadius(4),C.wp.border({color:Y.LU.backgroundHigher})],root:[C.wp.colWithGap(8),C.wp.maxHeight(520),C.wp.overflow("hidden")],inputs:[C.wp.mb(4),C.wp.p(8)],tasks:[C.wp.pl(12)],nameWarning:[{color:Y.LU.redDefault}],taskItem:[C.wp.position.relative],buttons:[C.wp.flex.growAndShrink(1),C.wp.justify.end,C.wp.p(8),C.wp.border({direction:"top",color:Y.LU.backgroundHigher})],nameInput:[C.wp.my(4)]});function U(e){var n=(0,r._)((0,l.useState)(""),2),t=n[0],o=n[1],a=(0,r._)((0,l.useState)([{id:(0,g.Ak)(),config:null}]),2),s=a[0],c=a[1],u=(0,r._)((0,l.useState)("sequential"),2),d=u[0],f=u[1],Y=(0,S.XO)(),A=(0,l.useMemo)(function(){return!Y.includes(t)},[t,Y]),C=(0,l.useMemo)(function(){if(!t)return(0,v._)("Missing name");if(!A)return(0,v._)("".concat(t," already exists"));if(0===s.length)return(0,v._)("Missing tasks");var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=s[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(null===c.config)return(0,v._)("Invalid task");n.push(c.config)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return(0,v.Ok)({name:t,mode:d,author:e.userId,tasks:n})},[t,d,s,A,e.userId]);function U(e,n){if(s&&e!==n){var t=(0,h._)(s),i=(0,r._)(t.splice(e,1),1)[0];t.splice(n,0,i),c(t)}}return(0,i.Y)(D.ui,{css:L.wrapper,children:(0,i.FD)(k.lV,{css:L.root,onSubmit:function(n){(0,p.u4)(p.AZ.WORKFLOW_CREATED,{pane:"workflows",shellExecCount:s.reduce(function(e,n){var t;return(null===(t=n.config)||void 0===t?void 0:t.task)==="shell.exec"?e+1:e},0),packagerCount:s.reduce(function(e,n){var t,r;return(null===(t=n.config)||void 0===t?void 0:t.task)==="packager.installForAll"||(null===(r=n.config)||void 0===r?void 0:r.task)==="packager.installForLanguage"?e+1:e},0),mode:d,userId:e.userId}),n.preventDefault(),C.ok&&e.onCreate(C.value)},children:[(0,i.FD)(I.S,{css:L.inputs,gap:8,children:[(0,i.FD)(I.S,{gap:2,children:[(0,i.Y)(E.EY,{variant:"small",color:"dimmest",children:"Workflow"}),A?null:(0,i.Y)(E.EY,{variant:"small",css:L.nameWarning,children:"Duplicate workflow name"}),(0,i.Y)(_.pd,{css:L.nameInput,required:!0,placeholder:"Name",value:t,onChange:function(e){return o(e.currentTarget.value)}})]}),(0,i.FD)(I.S,{gap:2,children:[(0,i.Y)(E.EY,{variant:"small",color:"dimmest",children:"Mode"}),(0,i.Y)(b.n3,{mode:d,disabled:!1,onChange:f})]}),(0,i.FD)(I.S,{gap:2,children:[(0,i.Y)(E.EY,{variant:"small",color:"dimmest",children:"Tasks"}),s.length?(0,i.Y)(w.i,{mode:d}):null,(0,i.FD)(I.S,{css:L.tasks,gap:8,children:[(0,i.Y)(F.A,{children:s.map(function(e,n){var t;return(0,i.FD)(I.S,{css:L.taskItem,children:[(0,i.Y)(y.S2,{taskIndex:n,disabled:!1,format:!1,onReorder:U,onChange:function(e){c(function(t){return(0,m.jM)(t,function(t){t[n].config=e})})},onRemove:function(){c(function(e){return(0,m.jM)(e,function(e){e.splice(n,1)})})},initialConfig:null!==(t=s[n].config)&&void 0!==t?t:void 0}),(0,i.Y)(w.L,{mode:d,hideBottom:n>=s.length-1})]},e.id)})}),(0,i.Y)(x.$n,{text:"Add task",type:"button",onClick:function(){c(function(e){return(0,m.jM)(e,function(e){e.push({id:(0,g.Ak)(),config:null})})})},iconLeft:(0,i.Y)(T.A,{})})]})]})]}),(0,i.FD)(I.S,{css:L.buttons,row:!0,gap:12,children:[(0,i.Y)(x.$n,{text:"Cancel",onClick:e.onCancel}),(0,i.Y)(R.m_,{tooltip:C.ok?"Save Workflow":C.error,children:(0,i.Y)(x.$n,{iconLeft:(0,i.Y)(P.A,{}),colorway:"primary",disabled:!C.ok,text:"Save",type:"submit"})})]})]})})}var N=t(39593),O=t(67549),M=t(74863),B=t(26705),H=t(44885),z=t(74999),W=t(41845),G=t(3910),V=t(26600),j=t(56185),Z=t(84185),q=t(42727),K=t(19915),$=t(32633);function J(e){var n=(0,S.cQ)(),t=(0,f.I)(function(t){return function(){(0,p.u4)(p.AZ.WORKFLOW_RAN,{source:"workflowsPane"});var r,i=null===(r=n())||void 0===r?void 0:r[e];return!!i&&t.workflows.runWorkflow.rpc({workflowId:i.name})}},[n,e]),r=(0,S.Jl)(e),i=(0,f.I)(function(e){return function(){(0,p.u4)(p.AZ.WORKFLOW_STOPPED,{source:"workflowsPane"});var n,t=null===(n=r())||void 0===n?void 0:n.runId;return!!t&&e.workflows.stopRun.rpc({runId:t})}},[r]),o=(0,S.ch)(e);return(0,l.useMemo)(function(){return t&&i?{run:t,stop:i,isRunningObservable:o}:null},[t,i,o])}function Q(e){var n=e.index,t=(0,S.j3)(n),r=J(n),o=(0,d.A)(null==r?void 0:r.isRunningObservable);return t&&r?(0,i.Y)(I.S,{row:!0,gap:8,children:(0,i.Y)(x.$n,{size:"small",iconLeft:o?(0,i.Y)(q.A,{}):(0,i.Y)(Z.A,{}),text:t.name,onClick:function(){o?r.stop():r.run()}})}):null}function X(){var e=(0,S.hk)();return(0,i.Y)(I.S,{gap:8,children:e.map(function(e){return(0,i.Y)(Q,{index:e},e)})})}var ee=(0,A.x)({header:[C.wp.flex.growAndShrink(1)],wrapper:[C.wp.borderRadius(4),C.wp.backgroundColor.backgroundHigher],workflowName:[C.wp.flex.growAndShrink(1),C.wp.rowWithGap(8)],expandedContent:[C.wp.border({direction:"top"})]});function en(e){var n,t=e.index,o=e.readOnly,a=(0,S.j3)(t),s=(0,S.nd)(t),c=J(t),u=(0,d.A)(null==c?void 0:c.isRunningObservable),p=(0,r._)((0,l.useState)(!1),2),f=p[0],h=p[1],m=(0,S.oE)(),g=(0,S.jP)(),v=(0,l.useMemo)(function(){return(null==a?void 0:a.name)===g},[a,g]);return a?(0,i.FD)(D.ui,{children:[(0,i.Y)(O.A,{css:ee.wrapper,headerContent:(0,i.FD)(I.S,{css:ee.header,row:!0,gap:4,children:[c?(0,i.Y)(B.K0,{alt:u?"Stop workflow":"Run workflow",onClick:function(){u?c.stop():c.run()},children:u?(0,i.Y)(q.A,{}):(0,i.Y)(Z.A,{})}):null,(0,i.Y)(I.S,{css:ee.workflowName,align:"center",justify:"start",row:!0,children:(0,i.Y)(E.EY,{multiline:!1,children:a.name})}),(0,i.FD)(I.S,{row:!0,gap:4,align:"center",children:[s?(0,i.Y)(R.m_,{tooltip:s,children:(0,i.Y)($.A,{color:Y.LU.accentNegativeDefault})}):null,v?(0,i.Y)(R.m_,{tooltip:"Assigned to run button",maxWidth:150,children:(0,i.Y)(z.K,{text:"Run Button",colorway:"positive"})}):null,"agent"===a.author||(null===(n=a.metadata)||void 0===n?void 0:n.generated)?(0,i.Y)(R.m_,{tooltip:"Generated by ".concat(a.author),maxWidth:150,children:(0,i.Y)(z.K,{text:"Generated",colorway:"purple"})}):(0,i.Y)(B.K0,{alt:"Delete",onClick:function(){h(!0)},children:(0,i.Y)(K.A,{})})]})]}),children:(0,i.Y)(I.S,{css:ee.expandedContent,children:(0,i.Y)(b.Wu,{index:t,readOnly:o})})}),(0,i.Y)(H.a,{isOpen:f,onRequestClose:function(){return h(!1)},children:(0,i.Y)(V.A,{name:"Workflow",description:a.name,confirmDescription:"workflow",hideModal:function(){return h(!1)},delete:function(){return m(t)}})})]}):null}var et=(0,A.x)({wrapper:[C.wp.p(8),C.wp.colWithGap(8)],generatedList:[C.wp.py(8),{opacity:.7}],loading:[C.wp.center,C.wp.p(16)],error:[C.wp.center,C.wp.p(16)],searchBarWrapper:[C.wp.flex.growAndShrink(1)],divider:[C.wp.height(2),C.wp.backgroundColor.accentPrimaryDimmest]});function er(e){(0,S.gR)(e.isActive);var n=(0,r._)((0,l.useState)(""),2),t=n[0],o=n[1],d=(0,r._)((0,l.useState)(!1),2),f=d[0],h=d[1],m=(0,c.jt)(),g=(0,c.hT)(),v=(0,r._)((0,l.useState)(!1),2),w=v[0],y=v[1],b=(0,S.hk)(),Y=(0,S.mP)(),A=(0,S.XO)(),C=(0,S.Eo)(),k=(0,S.oh)(),_=(0,S.wb)(),D=(0,N.i)(),F=!!_||m&&(g===s.g32.AGENT_STATE_RUNNING||g===s.g32.AGENT_STATE_PAUSING),P=(0,l.useMemo)(function(){return b.reduce(function(e,n){return A[n].toLowerCase().includes(t.toLowerCase())&&e.push(n),e},[]).sort(function(e,n){var t,r,i,o,a=null!==(i=(null===(t=Y[e].metadata)||void 0===t?void 0:t.generated)||"agent"===Y[e].author)&&void 0!==i&&i,l=null!==(o=(null===(r=Y[n].metadata)||void 0===r?void 0:r.generated)||"agent"===Y[n].author)&&void 0!==o&&o;return a&&!l?1:!a&&l?-1:0})},[t,b,A,Y]),L=(0,l.useMemo)(function(){return P.filter(function(e){var n=Y[e];return!(n.metadata&&n.metadata.generated)&&"agent"!==n.author})},[P,Y]),B=(0,l.useMemo)(function(){return P.filter(function(e){return"agent"===Y[e].author})},[P,Y]),H=(0,l.useRef)(),z=function(){clearTimeout(H.current),H.current=setTimeout(function(){(0,p.u4)(p.AZ.WORKFLOWS_SEARCHED)},1e3)};return k?(0,i.Y)(I.S,{css:et.loading,children:(0,i.Y)(j.A,{})}):(0,i.FD)(I.S,{css:et.wrapper,children:[(0,i.FD)(I.S,{row:!0,gap:8,children:[(0,i.Y)(I.S,{css:et.searchBarWrapper,children:(0,i.Y)(W.I,{placeholder:"Search for a workflow...",value:t,onChange:function(e){z(),o(e.target.value)},onClear:function(){return o("")}})}),(0,i.Y)(x.$n,{isDisabled:F,colorway:"primary",iconLeft:(0,i.Y)(T.A,{}),text:"New Workflow",disabled:f,onClick:function(){h(!0)}})]}),(0,i.Y)(M.a,{}),f?(0,i.FD)(i.FK,{children:[(0,i.Y)(U,{onCreate:function(e){C(e),h(!1)},onCancel:function(){h(!1)},userId:null==D?void 0:D.id}),(0,i.Y)(M.a,{css:et.divider})]}):null,_?(0,i.Y)(I.S,{css:et.error,children:(0,i.Y)(R.m_,{tooltip:_.extras,children:(0,i.Y)(G.N,{icon:(0,i.Y)($.A,{}),colorway:"red",text:_.message})})}):null,(0,i.FD)(I.S,{gap:8,children:[L.length||_?null:(0,i.Y)(I.S,{align:"center",children:(0,i.Y)(E.EY,{children:(0,i.Y)(a(),{target:"_blank",href:u.ik.WORKFLOWS,children:"Learn more about configuring Workflows"})})}),L.length?L.map(function(e){return(0,i.Y)(en,{readOnly:F,index:e},e)}):null,B.length?(0,i.Y)(I.S,{children:(0,i.Y)(O.A,{headerContent:"Agent Workflows",expanded:w,onClick:function(){return y(!w)},children:(0,i.Y)(I.S,{css:et.generatedList,gap:8,children:B.map(function(e){return(0,i.Y)(en,{index:e,readOnly:F},e)})})})}):null]})]})}},64520:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 3.25a.75.75 0 0 1 .75.75v16a.75.75 0 0 1-1.5 0V4a.75.75 0 0 1 .75-.75Zm6 6a.75.75 0 0 1 .75.75v10a.75.75 0 0 1-1.5 0V10a.75.75 0 0 1 .75-.75Zm-12 4a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},65029:(e,n,t)=>{"use strict";t.d(n,{Ws:()=>b,i6:()=>Y,cA:()=>y,C3:()=>E,dz:()=>R,E3:()=>w,hb:()=>D,t5:()=>I,BH:()=>S,Ij:()=>F,fy:()=>A});var r=t(62019),i=t(37743),o=t(1833),a=t(17844),l=t(93629),s=t(49069),c=t(45773),u=t(29734),d=t(12694),p={"Anthropic API Key":/(sk-ant-api03-[\w-]{93}AA)/g,"AWS API Key":/AKIA[0-9A-Z]{16}/g,"AWS AppSync GraphQL Key":/da2-[a-z0-9]{26}/g,"AWS MWS ID":/mzn\.mws\.[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/g,"AWS client ID":/(A3T[A-Z0-9]|AKIA|AGPA|AIDA|AROA|AIPA|ANPA|ANVA|ASIA)[A-Z0-9]{16}/g,"Discord Bot Token":/(?:N|M|O)[a-zA-Z0-9]{23}\\.[a-zA-Z0-9-_]{6}\\.[a-zA-Z0-9-_]{27}/g,"Discord Webhook Url":/https?:\/\/(?:ptb\.|canary\.)?discord\.com\/api(?:\/v\d{1,2})?\/webhooks\/(\d{17,19})\/([\w-]{68})/gi,"Dynatrace Token":/dt0[a-zA-Z]{1}[0-9]{2}\\.[A-Z0-9]{24}\\.[A-Z0-9]{64}/gi,"Facebook Access Token":/EAACEdEose0cBA[0-9A-Za-z]+/g,"Facebook OAuth":/[fF][aA][cC][eE][bB][oO][oO][kK].*['|"][0-9a-f]{32}['|"]/g,"Github Personal Access Token":/ghp_[0-9a-zA-Z]{36}/g,"Github OAuth Access Token":/gho_[0-9a-zA-Z]{36}/g,"Github App Installation Access Token":/(ghu|ghs)_[0-9a-zA-Z]{36}/g,"Github App Refresh Token":/ghr_[0-9a-zA-Z]{76}/g,"Generic API Key":/[aA][pP][iI]_?[kK][eE][yY].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Generic Secret":/[sS][eE][cC][rR][eE][tT].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Google API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google Gmail API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google OAuth Access Token":/ya29\\.[0-9A-Za-z\\-_]+/g,"Google YouTube API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Heroku API Key":/[hH][eE][rR][oO][kK][uU].*[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/g,"MailChimp API Key":/[0-9a-f]{32}-us[0-9]{1,2}/g,"Mailgun API Key":/key-[0-9a-zA-Z]{32}/g,"Mapbox, Public Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"Mapbox, Secret Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"npm Access Token":/npm_[0-9a-zA-Z]{36}/g,"NuGet API Key":/oy2[a-z0-9]{43}/g,"OpenAI API Key":/sk-[a-zA-Z0-9]{48}/g,"PGP private key block":/-----BEGIN PGP PRIVATE KEY BLOCK-----/g,"Picatic API Key":/sk_live_[0-9a-z]{32}/g,"PyPI API Token":/pypi-AgEIcHlwaS5vcmc[A-Za-z0-9-_]{50,1000}/g,"SSH (DSA) private key":/-----BEGIN DSA PRIVATE KEY-----/g,"SSH (EC) private key":/-----BEGIN EC PRIVATE KEY-----/g,"SSH (RSA) private key":/-----BEGIN RSA PRIVATE KEY-----/g,"SendGrid API Key":/SG\\.[0-9A-Za-z\\-_]{22}\\.[0-9A-Za-z-_]{43}/g,"Shopify Access Token":/shpat_[a-fA-F0-9]{32}/g,"Shopify App Shared Secret":/shpss_[a-fA-F0-9]{32}/g,"Shopify Custom App Access Token":/shpca_[a-fA-F0-9]{32}/g,"Shopify Private App Password":/shppa_[a-fA-F0-9]{32}/g,"Slack Token":/(xox[pborsa]-[0-9]{12}-[0-9]{12}-[0-9]{12}-[a-z0-9]{32})/g,"Slack API Token":/xox[baprs]-([0-9a-zA-Z]{10,48})?/g,"Slack Live API Key":/(?:r|s)k_live_[0-9a-zA-Z]{24}/g,"Slack Test API Key":/(?:r|s)k_test_[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Bot Access Token":/xoxb-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Configuration Token":/xoxe.xoxp-1-[0-9a-zA-Z]{166}/g,"Slack, OAuth v2 Refresh Token":/xoxe-1-[0-9a-zA-Z]{147}/g,"Slack, OAuth v2 User Access Token":/xoxp-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack Webhook":/https:\/\/hooks.slack.com\/services\/T[a-zA-Z0-9_]{10}\/B[a-zA-Z0-9_]{10}\/[a-zA-Z0-9_]{24}/g,"Square Access Token":/sq0atp-[0-9A-Za-z\\-_]{22}/g,"Square OAuth Secret":/sq0csp-[0-9A-Za-z\\-_]{43}/g,"Stripe API Key":/sk_live_[0-9a-zA-Z]{24}/g,"Stripe Restricted API Key":/rk_live_[0-9a-zA-Z]{24}/g,"Twilio API Key":/SK[0-9a-fA-F]{32}/g,"Twitter Access Token":/[tT][wW][iI][tT][tT][eE][rR].*[1-9][0-9]+-[0-9a-zA-Z]{40}/g,"Twitter OAuth":/[tT][wW][iI][tT][tT][eE][rR].*['|"][0-9a-zA-Z]{35,44}['|"]/g},f={"Instagram oauth":/[0-9a-fA-F]{7}\.[0-9a-fA-F]{32}/g},h=t(63892),m=function(e){function n(e,t){var o;return(0,i._)(this,n),(o=(0,r._)(this,n)).id=e,o.result=t,o}return(0,o._)(n,e),n.range=function(e,n,t){return new this(e,t).range(n.from,n.to)},n.generateId=function(){return this.secretId++},n}(s.FB);m.secretId=0;var g=function(e){function n(e){var t;return(0,i._)(this,n),(t=(0,r._)(this,n)).key=e,t}return(0,o._)(n,e),n.from=function(e){return new this(e)},n}(s.FB),v=s.Pe.define({map:function(e,n){var t=s.om.of(e).map(n).iter(),r=t.from,i=t.to;return m.range(e.value.id,s.OF.cursor(r,i),e.value.result)}}),w=s.Pe.define(),y=s.Pe.define(),b=s.Pe.define(),S=s.Pe.define(),Y=s.Pe.define(),A=function(e){var n=e.state.field(R);if(!n.size)return!1;for(var t=n.iter(),r=[];t.value;){var i=t.from,o=t.to,a=t.value;r.push({from:i,to:o,value:a}),t.next()}var l=e.state.doc.length,c=s.VR.empty(l),u=[],d=[],p=!0,f=!1,m=void 0;try{for(var g,v=r[Symbol.iterator]();!(p=(g=v.next()).done);p=!0)!function(){var e=g.value,n=e.from,t=e.to,r=e.value,i=r.result.secret,o=s.VR.of({from:n,to:t,insert:i},l).map(c,!0);u=u.map(function(e){return e.map(o)});var a=(c=c.compose(o)).mapPos(n)+i.length;u.push(s.OF.cursor(a)),d.push(w.of(r.id)),(0,h.u4)(h.AZ.PASTE_SCANNER_USED,{action:"original_accepted",provider:r.result.provider})}()}catch(e){f=!0,m=e}finally{try{p||null==v.return||v.return()}finally{if(f)throw m}}return e.dispatch({changes:c,effects:d,selection:s.OF.create(u)}),!0},C=function(e){return!!e.state.facet(I)&&!!e.state.field(R).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return y.of(e)})}),!0)},x=function(e){return!e.state.facet(I)&&k(e)},k=function(e){return!!e.state.field(R).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return w.of(e)})}),!0)};function _(e,n){var t,r=null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text/plain");if(!r)return!1;var i=function(e){if(e.length>2e3)return!1;var n=!0,t=!1,r=void 0;try{for(var i,o=[p,f][Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=!0,s=!1,c=void 0;try{for(var u,h=Object.entries(a)[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var m=(0,d._)(u.value,2),g=m[0],v=m[1],w=e.search(v);if(!(w<0)){var y=e.match(v);if(y){var b=w+y[0].length;return{start:w,end:b,secret:e.slice(w,b),provider:g}}}}}catch(e){s=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(s)throw c}}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!1}(r);if(!i)return!1;e.preventDefault(),e.stopPropagation();var o=r.slice(0,i.start)+r.slice(i.end),c=m.generateId();return n.dispatch((0,l._)((0,a._)({},n.state.changeByRange(function(e){var n=e.from,t=e.to,r=s.OF.cursor(n+i.start);return{range:r,changes:{from:n,to:t,insert:o},effects:v.of(m.range(c,r,i))}})),{scrollIntoView:!0})),(0,h.u4)(h.AZ.PASTE_SCANNER_USED,{action:"secret_detected",provider:i.provider}),!0}var D=s.sU.define({create:function(){return s.om.empty},update:function(e,n){e=e.map(n.changes);var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(S)){var c=l.value,u=c.from,d=c.to,p=c.secret;e=e.update({add:[g.from(p).range(u,d)],filter:function(){return!1}})}l.is(Y)&&(e=s.om.empty)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}}),E=s.sU.define({create:function(){return null},update:function(e,n){var t=n.state.field(R,!1),r=!0,i=!1,o=void 0;try{for(var a,l=n.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;t&&c.is(y)&&(c.value instanceof s.yn?t.between(c.value.from,c.value.to,function(n,t,r){e=r}):e=c.value),c.is(b)&&(e=null)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return e}}),R=s.sU.define({create:function(){return s.om.empty},update:function(e,n){e=e.map(n.changes);var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)!function(){var n=o.value;n.is(v)&&(e=e.update({add:[n.value],sort:!0})),n.is(w)&&(e=n.value instanceof s.yn?e.update({filter:function(){return!1},filterFrom:n.value.from,filterTo:n.value.to}):e.update({filter:function(e,t,r){return r.id!==n.value}}))}()}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(){return[c.Lz.domEventHandlers({paste:_}),s.Nb.highest(c.w4.of([{key:"Mod-z",run:k},{key:"Enter",run:A},{key:"Tab",run:C,stopPropagation:!0},{key:"Escape",run:x}]))]}}),I=s.sj.define({combine:function(e){return e.some(Boolean)}}),F=u.Ly.of(function(e){var n=e.state.field(R,!1);if(!n||!n.size)return!1;var t=!1;return n.between(e.newSelection.main.from,e.newSelection.main.to,function(){return t=!0,!1}),t})},65037:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{d:"M22.28 9.823a5.979 5.979 0 0 0-.514-4.911 6.047 6.047 0 0 0-6.513-2.901A5.981 5.981 0 0 0 10.743 0a6.048 6.048 0 0 0-5.768 4.186 5.981 5.981 0 0 0-3.998 2.9 6.049 6.049 0 0 0 .744 7.09 5.978 5.978 0 0 0 .513 4.911 6.047 6.047 0 0 0 6.513 2.901 5.976 5.976 0 0 0 4.51 2.01 6.048 6.048 0 0 0 5.77-4.19 5.982 5.982 0 0 0 3.999-2.9 6.05 6.05 0 0 0-.746-7.088v.002ZM13.257 22.43a4.483 4.483 0 0 1-2.879-1.041c.037-.02.1-.055.142-.08l4.779-2.76a.777.777 0 0 0 .393-.68v-6.738l2.02 1.167a.07.07 0 0 1 .039.055v5.58a4.503 4.503 0 0 1-4.493 4.497Zm-9.662-4.127a4.478 4.478 0 0 1-.537-3.014c.036.021.098.06.142.085l4.779 2.76a.778.778 0 0 0 .785 0l5.835-3.369v2.333a.075.075 0 0 1-.029.062l-4.83 2.789a4.504 4.504 0 0 1-6.145-1.646ZM2.338 7.872A4.483 4.483 0 0 1 4.678 5.9l-.002.165v5.521c-.001.28.149.54.393.68l5.834 3.368-2.02 1.166a.071.071 0 0 1-.068.006l-4.832-2.792a4.503 4.503 0 0 1-1.646-6.141Zm16.594 3.862-5.834-3.37 2.02-1.165a.071.071 0 0 1 .068-.006l4.831 2.79a4.499 4.499 0 0 1-.694 8.116v-5.686a.777.777 0 0 0-.39-.68Zm2.01-3.026a6.493 6.493 0 0 0-.142-.084l-4.779-2.76a.778.778 0 0 0-.785 0L9.402 9.233V6.9a.075.075 0 0 1 .029-.062l4.83-2.787a4.497 4.497 0 0 1 6.68 4.657h.001ZM8.304 12.866l-2.02-1.167a.07.07 0 0 1-.04-.055v-5.58a4.498 4.498 0 0 1 7.377-3.454c-.037.02-.1.055-.142.08L8.7 5.45a.776.776 0 0 0-.393.68l-.003 6.736ZM9.401 10.5 12 9l2.599 1.5v3L12 15l-2.599-1.5v-3Z"})}))}},65043:(e,n,t)=>{"use strict";t.d(n,{q:()=>eI});var r=t(29935),i=t(17844),o=t(93629),a=t(12694),l=t(82643),s=t(21462),c=t(43628),u=t(11646),d=t(90654),p=t(11741),f=t(66757);function h(e){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(e){var n,t;return(0,l.YH)(this,function(r){return n=e.container,t=e.service,[2,new Promise(function(e){var r=n.openChannel({service:t},function(n){return e([n.channel,r]),r})})]})})).apply(this,arguments)}var g=function(e){return e.OUTPUT="OUTPUT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED",e.CHANNEL_OPENED="CHANNEL_OPENED",e}({}),v=t(90629),w=t(723),y=t(2658),b=function(e){return e.OUTPUT="OUTPUT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED",e.CHANNEL_OPENED="CHANNEL_OPENED",e}({}),S=t(80366),Y=t(71077),A=t(68376),C=t(63892),x=t(31930),k=t(88079),_=t(86105),D=t(54044),E=t(37743),R=t(40208),I=t(64254).hp,F=new TextEncoder,T=new TextDecoder,P=function(){var e=/[a-z\d_-]+: [a-z\d_ :;.,/"'?!(){}[\]@<>=+*#$&`|~^%-]+/.source;return RegExp("(".concat(e,"\\r\\n)*(").concat(e,")$"),"i")}(),L=function(){function e(n){(0,E._)(this,e),this.onMessage=n,this.buffer=new Uint8Array,this.read=this.read.bind(this)}var n=e.prototype;return n.consumeHeaders=function(){var e=function(e){var n=e.findIndex(function(n,t){return 13===n&&10===e[t+1]&&13===e[t+2]&&10===e[t+3]});if(-1!==n){var t=T.decode(e.slice(0,n)),r=t.match(P);if(!r)throw R.vF.error("Failed to parse LSP header, no matches",{fragment:t}),Error("Unable to match header, text: ".concat(t));var i=Object.create(null),o=r[0].split("\r\n"),a=!0,l=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,p=d.indexOf(":");if(-1===p)throw R.vF.error("Failed to parse LSP header, missing colon",{fragment:t}),Error('Message header must separate key and value using ":"');var f=d.substr(0,p),h=d.substr(p+1).trim();if("Content-Length"===f){var m=parseInt(h,10);if(isNaN(m))throw R.vF.error("Failed to parse LSP header, NaN content length",{fragment:t}),Error("Content-Length value must be a number.");i[f]=parseInt(h,10)}else i[f]=h}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}if(null==i["Content-Length"])throw R.vF.error("Failed to parse LSP header, no Content-Length",{fragment:t}),Error("Header must provide a Content-Length property.");return{headerLength:n,value:i}}}(this.buffer);if(e)return this.buffer=this.buffer.slice(e.headerLength+4),e},n.read=function(e){for(this.buffer=(n=this.buffer,t=F.encode(e),(r=new Uint8Array(n.length+t.length)).set(n),r.set(t,n.length),r);null!==(i=this.headers)&&void 0!==i?i:this.headers=this.consumeHeaders();){var n,t,r,i,o=this.headers.value["Content-Length"];if(this.buffer.length<o)return;var a=function(e,n,t){var r=T.decode(e.slice(0,n));try{return{json:JSON.parse(r),buffer:e.slice(n)}}catch(s){var i=I.from(e).toString();if(s instanceof SyntaxError&&"Unexpected end of JSON input"===s.message){R.vF.info("Failed to parse LSP message, falling back to json parsing",{buffer:i,length:n,rpcContent:r,attempt:"original-length",headers:JSON.stringify(t)});var o=function(e,n){for(var t=0,r=0,i=!1,o=0;o<e.length+1;o++){if(0!==o&&!t&&!r&&!i)return o;var a=e[o];switch(a){case 92:o++;continue;case 34:i=!i;continue}if(!i)switch(a){case 123:t++;break;case 125:t--;break;case 91:r++;break;case 93:r--}}return -1}(e,0);if(-1!==o){var a=e.slice(0,o),l=T.decode(a);try{return{json:JSON.parse(l),buffer:e.slice(o)}}catch(e){R.vF.error("Failed to parse LSP message",{givenError:e,buffer:i,length:n,rpcContent:r,attempt:"recomputed-length"})}}}else R.vF.error("Failed to parse LSP message",{givenError:s,buffer:i,length:n,rpcContent:r,attempt:"content-length"});return{json:void 0,buffer:e.slice(n)}}}(this.buffer,o,this.headers),l=a.json,s=a.buffer;if(this.headers=void 0,this.buffer=s,void 0!==l)try{this.onMessage(l)}catch(e){v.Cp(e)}}},e}(),U=t(64254).hp,N=t(32466),O=t(32826),M=t(23099),B=t.n(M),H=t(50522),z=t(38039),W=t(17459),G=t(22531),V=t(55301),j=t.n(V),Z=t(68321),q=t(96986),K=t(24138),$=t(93166),J=t(37094),Q=function(e){var n=e.configurationSupport;return{textDocument:{synchronization:{dynamicRegistration:!0,didSave:!0},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:["markdown","plaintext"]}},publishDiagnostics:{relatedInformation:!0,tagSupport:{valueSet:[1,2]}},formatting:{dynamicRegistration:!0},documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0,symbolKind:{valueSet:J.A}},semanticTokens:{dynamicRegistration:!0,requests:{range:!0,full:{delta:!0}},tokenTypes:$.aK,tokenModifiers:$.md,formats:[K.TokenFormat.Relative],overlappingTokenSupport:!0,multilineTokenSupport:!0,serverCancelSupport:!0,augmentsSyntaxTokens:!0},definition:{dynamicRegistration:!0,linkSupport:!0},typeDefinition:{dynamicRegistration:!0},implementation:{dynamicRegistration:!0},references:{dynamicRegistration:!0},rename:{dynamicRegistration:!0,prepareSupport:!0},completion:{dynamicRegistration:!0,contextSupport:!0,completionItem:{commitCharactersSupport:!0,documentationFormat:["markdown","plaintext"],labelDetailsSupport:!0,resolveSupport:{properties:["detail","documentation"]},snippetSupport:!0},completionList:{itemDefaults:["commitCharacters"]}},codeAction:{resolveSupport:{properties:["edit"]},dataSupport:!0,dynamicRegistration:!0,isPreferredSupport:!0,codeActionLiteralSupport:{codeActionKind:{valueSet:Object.values(K.CodeActionKind)}}},hover:{dynamicRegistration:!0,contentFormat:["markdown","plaintext"]}},workspace:{applyEdit:!0,didChangeConfiguration:n.clientToServer||n.serverToClient?{dynamicRegistration:!0}:void 0,configuration:n.serverToClient,semanticTokens:{refreshSupport:!0},executeCommand:{dynamicRegistration:!0},workspaceEdit:{documentChanges:!0,resourceOperations:[K.ResourceOperationKind.Create,K.ResourceOperationKind.Delete,K.ResourceOperationKind.Rename]}}}},X=function(){function e(){(0,E._)(this,e)}var n=e.prototype;return n.supports=function(e){return e.includes("css-language-server")},n.onResponse=function(e,n){return"textDocument/hover"===e?this.onHover(n):n},n.onHover=function(e){if("error"in e)return e;var n=e.result;return"cancelled"in e&&!1!==e.cancelled||!n?e:(Array.isArray(n.contents)&&(n.contents={kind:"markdown",value:["```html",n.contents[0],"```",n.contents[1],""].join("\n")}),(0,o._)((0,i._)({},e),{result:n}))},e}(),ee=function(){function e(){(0,E._)(this,e)}var n=e.prototype;return n.supports=function(e){return"module:dotnet-7.0/languageServer:omni-sharp"===e},n.onResponse=function(e,n){switch(e){case"textDocument/codeAction":return this.onCodeAction(n);case"textDocument/completion":return this.onCompletion(n)}return n},n.onCodeAction=function(e){return"error"in e&&-32801===e.error.code?{cancelled:!0,result:null}:e},n.onCompletion=function(e){return"error"in e&&-32801===e.error.code?{cancelled:!0,result:null}:e},e}(),en=[new(function(){function e(){(0,E._)(this,e)}var n=e.prototype;return n.supports=function(e){return e.includes("typescript-language-server")},n.onResponse=function(e,n){return"textDocument/completion"===e?this.onCompletion(n):n},n.onCompletion=function(e){if("error"in e||"cancelled"in e&&!1!==e.cancelled)return e;var n=e.result;if(!n)return e;Array.isArray(n)&&(n={isIncomplete:!1,items:n});for(var t=0;t<n.items.length;t++){var r=n.items[t];r.sortText&&r.sortText.startsWith("￿")&&(r.sortText=r.sortText.replace("￿",""))}return(0,o._)((0,i._)({},e),{result:n})},e}()),new X,new ee],et=function(){function e(){(0,E._)(this,e)}var n=e.prototype;return n.supports=function(){return!0},n.onResponse=function(e,n){return n},e}(),er=t(93843),ei=t(64254).hp;function eo(e,n){var t,r;return null!==(r=null===(t=H.Jh.from(e))||void 0===t?void 0:t.id)&&void 0!==r?r:n}var ea=function(e){return e.INITIALIZED="INITIALIZED",e.READY="READY",e.DIAGNOSTICS="DIAGNOSTICS",e.SERVER_STATE_CHANGE="SERVER_STATE_CHANGE",e.SERVER_HEALTH_CHANGE="SERVER_HEALTH_CHANGE",e.SERVER_CAPABILITIES_CHANGE="SERVER_CAPABILITIES_CHANGE",e.REQUEST="REQUEST",e.RESPONSE="RESPONSE",e.CANCEL_REQUEST="CANCEL_REQUEST",e.SEND_NOTIFICATION="SEND_NOTIFICATION",e.RECEIVE_NOTIFICATION="RECEIVE_NOTIFICATION",e.SEMANTIC_TOKENS_REFRESH="SEMANTIC_TOKENS_REFRESH",e}(ea||{});function el(){return Math.floor(0x7fffffff*Math.random())}function es(e){var n=JSON.stringify((0,o._)((0,i._)({},e),{jsonrpc:"2.0"})),t=ei.byteLength(n,"utf8");return"Content-Length: ".concat(t,"\r\n\r\n").concat(n)}function ec(e,n){var t,r,i,o,a,l;return n&&n?!!(B()(null==e?void 0:e.fileTypeAttrs,n.fileTypeAttrs)&&B()(null==e?void 0:null===(t=e.config)||void 0===t?void 0:t.startCommand,null===(r=n.config)||void 0===r?void 0:r.startCommand)&&B()(null==e?void 0:null===(i=e.config)||void 0===i?void 0:i.initializationOptionsJson,null===(o=n.config)||void 0===o?void 0:o.initializationOptionsJson)&&B()(null==e?void 0:null===(a=e.config)||void 0===a?void 0:a.configurationJson,null===(l=n.config)||void 0===l?void 0:l.configurationJson)):!!n==!!n}function eu(e,n){return ed.apply(this,arguments)}function ed(){return(ed=(0,r._)(function(e,n){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:return[4,e.exec("pwd")];case 1:if(null!==(t=r.sent()).error){if(!n())return[2,{error:Error("LSPNix: Could not get working directory "+t.error),workingDirectory:null}];return[2,eu(e,n)]}return[2,{error:null,workingDirectory:t.output.replace("\n","")}]}})})).apply(this,arguments)}var ep=t(83353),ef=t(67668),eh=function(e){return e.USER_JOIN="USER_JOIN",e.USER_LEAVE="USER_LEAVE",e.USERS_UPDATE="USERS_UPDATE",e.USER_OPENED_FILE="USER_OPENED_FILE",e.FOLLOWED_USER_CHANGED="FOLLOWED_USER_CHANGED",e.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED",e}({}),em=t(86073),eg=t(94372),ev=t(52690),ew=t(35992),ey=t(67201),eb=function(e){return e.MESSAGE="MESSAGE",e}(eb||{}),eS=function(){function e(n){(0,E._)(this,e),this.buffer=Array(n).fill(null),this.start=0,this.end=0,this.isFull=!1}var n=e.prototype;return n.write=function(e){this.buffer[this.end]=e,this.end=(this.end+1)%this.buffer.length,this.isFull&&(this.start=(this.start+1)%this.buffer.length),this.end===this.start&&(this.isFull=!0)},n.readAll=function(){return this.start!==this.end||this.isFull?this.start<this.end?this.buffer.slice(this.start,this.end).join(""):this.buffer.slice(this.start).concat(this.buffer.slice(0,this.end)).join(""):""},e}();function eY(e){var n=new eS(e.maxHistorySize),t=(0,f.Ay)();return{emitMessage:function(e){n.write(e),t.emit("MESSAGE",e)},onMessage:function(e){return t.on("MESSAGE",e),Promise.resolve().then(function(){return e(n.readAll())}),function(){return t.removeListener("MESSAGE",e)}}}}function eA(e){var n,t,r;return(null===(n=e.runner.id)||void 0===n?void 0:n.startsWith(".replit/"))?0:(null===(t=e.runner.id)||void 0===t?void 0:t.startsWith("module:"))?1:(null===(r=e.runner.id)||void 0===r?void 0:r.startsWith("language:"))?2:3}function eC(e){return 1e3*e.seconds+e.nanos/1e6}var ex=t(15278).P,ek=" \x1b[?25l",e_=function(e){return e.BEFORE_RUN="BEFORE_RUN",e.SERVER="SERVER",e.NONE="NONE",e.STOPPING="STOPPING",e}(e_||{}),eD=t(75250),eE=t(83846),eR=function(e){return e.CHANNEL_OPENED="CHANNEL_OPENED",e.EVENT_SENT="EVENT_SENT",e}({});function eI(e){var n=(0,a._)((0,s.useState)(null),2),t=n[0],m=n[1];return(0,s.useEffect)(function(){var n,t,s,E,I,F,T,P,M,V,K,$,J,X,ee,ei,ea,ed,eb,eS,e_,eI,eF,eT,eP,eL,eU,eN,eO,eM,eB,eH,ez,eW,eG,eV,ej,eZ=function(e){var n=c._.active();if(e.openTelemetryTracing)return(0,d.Ux)(n,"workspace.useCreateServices")}(e),eq=(s=void 0===(t=(n=(0,o._)((0,i._)({},e),{ctx:null==eZ?void 0:eZ.childCtx})).runnerMode)?"outputs":t,E=n.onUnrecoverableError,I=n.openMultipleFiles,F=n.openMultipleURLs,T=n.enableUserEvents,P=n.enableMultipleLSPClientsPerFile,M=n.enableReplspaceSshTokenPassthrough,V=n.onPresenceCommand,K=n.getColorForUser,$=n.openTelemetryTracing,J=n.ctx,X=n.shouldAutoFlushRef,ee=n.usePostgresqlNixmodule,ea=function(e){var n=e.container,t=e.enabled,s=e.onEventSent,c=(0,f.Ay)();s&&c.on(eR.EVENT_SENT,s);var u=null;function d(e,n){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e,r){var s,u,d,p,f,m,g,w;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(!t)return[2];return[4,function(){return h.apply(this,arguments)}()];case 1:if(d=l.sent(),f=null==(p=n.getContext())?void 0:null===(s=p.currentUser)||void 0===s?void 0:s.id,m=null==p?void 0:null===(u=p.repl)||void 0===u?void 0:u.id,g=window.location.href,w={userEvent:{eventName:e,eventData:function e(n){if((void 0===n?"undefined":(0,G._)(n))!=="object"||null===n||null===Object.getPrototypeOf(n))throw Error("encodeBareStruct must be called with a plain object");return{fields:Object.entries(n).reduce(function(n,t){var r=(0,a._)(t,2),l=r[0],s=r[1];return void 0===s||(void 0===s?"undefined":(0,G._)(s))==="object"&&s&&0===Object.keys(s).length?n:(0,o._)((0,i._)({},n),(0,eE._)({},l,function n(t){switch(void 0===t?"undefined":(0,G._)(t)){case"string":return{kind:"stringValue",stringValue:t};case"number":return{kind:"numberValue",numberValue:t};case"boolean":return{kind:"boolValue",boolValue:t};case"object":if(null===t)return{kind:"nullValue",nullValue:null};if(Array.isArray(t))return{kind:"listValue",listValue:{values:t.map(n)}};return{kind:"structValue",structValue:e(t)};default:throw Error("Unexpected value: ".concat(t))}}(s)))},{})}}((0,i._)({userId:f,replId:m,url:g},r))}},"open"!==d.status)return v.v4(function(e){e.setTag("service","user-events"),e.setExtra("command",w),e.setExtra("userId",f),e.setExtra("replId",m),e.setExtra("url",g),e.setExtra("channelId",d.id),v.Cp(Error("UserEvents channel is not open: ".concat(d.status)))}),[2];return c.emit(eR.EVENT_SENT,e,r),d.send(w),[2]}})})).apply(this,arguments)}function h(){return(h=(0,r._)(function(){return(0,l.YH)(this,function(e){return u?[2,u]:[2,new Promise(function(e){c.once(eR.CHANNEL_OPENED,function(n){e(n)})})]})})).apply(this,arguments)}return d("meta:start",{}),n.openChannel({service:"null",skip:function(){return!t}},function(e){var n=e.channel;return d("meta:ready",{}),u=n,c.emit(eR.CHANNEL_OPENED,n),function(){u=null}}),{emit:d}}({container:ei=(0,x.Ay)({onUnrecoverableError:E,ctx:J}),enabled:!!(void 0!==T&&T)}),ed=(0,N.A)({container:ei}),eb=function(e){var n=e.container,t=e.onCommand,i=e.getColorForUser,o=(0,f.Ay)();o.setMaxListeners(1/0);var a=[],s=null,c=[],u={},d=null;function p(){return h.apply(this,arguments)}function h(){return(h=(0,r._)(function(){return(0,l.YH)(this,function(e){return d?[2,d]:[2,new Promise(function(e){o.once(eh.USERS_UPDATE,function(){if(!d)throw Error("Expected presenceChannel to be set");e(d)})})]})})).apply(this,arguments)}function m(e){!B()(s,e)&&(s=e,o.emit(eh.FOLLOWED_USER_CHANGED,e))}function g(){return(g=(0,r._)(function(e){var n,t;return(0,l.YH)(this,function(r){switch(r.label){case 0:if((null==s?void 0:s.username)===e)throw Error("Already following user with username ".concat(e));if(!s)return[3,2];return[4,v()];case 1:r.sent(),r.label=2;case 2:return[4,p()];case 3:if(n=r.sent(),!(t=a.find(function(n){return n.username===e})))return[2];return m(t),t.sessions.forEach(function(e){n.send({followUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}function v(){return y.apply(this,arguments)}function y(){return(y=(0,r._)(function(){var e,n;return(0,l.YH)(this,function(t){switch(t.label){case 0:if(!s)throw Error("No user to unfollow");return e=s,m(null),[4,p()];case 1:return n=t.sent(),e.sessions.forEach(function(e){n.send({unfollowUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}return n.openChannel({service:"presence",name:"presencer"},function(e){var n=e.channel;return n.onCommand(function(e){null==t||t(e);var n={cmd:e,emitter:o,activeUsers:a,userIdToFile:u,followedUser:s,setFollowedUser:m,followingUsers:c,getColorForUser:i};switch(e.body){case"roster":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser,s=e.getColorForUser,c=n.roster;if(!!c){var u=c.user,d=c.files;if(u&&d){var p=new Set;if(r.splice(0,r.length),u.forEach(function(e){if(!(!e.id||!e.name||!e.roles||p.has(e.id))){var n=d.filter(function(n){return n.userId===e.id}).map(function(e){if(!e.session||!e.timestamp)throw Error("Expected session and associated with user");return{id:e.session,activeFile:e.file||null,timestamp:(0,em.iY)(e.timestamp)}}),t=null==s?void 0:s({userId:e.id});r.push({id:e.id,username:e.name,roles:e.roles,color:null!=t?t:(0,em.a4)(r),sessions:n}),p.add(e.id)}}),r.forEach(function(e){i[e.id]=(0,em.Ni)(e)}),t.emit(eh.USERS_UPDATE,(0,_._)(r)),a.filter(function(e){return!r.some(function(n){return n.id===e.id})}).forEach(function(e){var n=a.indexOf(e);-1!==n&&(a.splice(n,1),t.emit(eh.FOLLOWING_USERS_CHANGED,{followingUsers:(0,_._)(a),user:e,type:"unfollow"}))}),o){if(!r.some(function(e){return e.id===o.id})){l(null);return}var f=i[o.id];t.emit(eh.USER_OPENED_FILE,{user:o,file:f})}}}}(n);break;case"join":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.getColorForUser,a=n.join;if(a.id&&a.name&&a.roles&&a.session){var l=r.find(function(e){return e.id===a.id}),s=Math.floor(Date.now()/1e3),c=w.google.protobuf.Timestamp.create({seconds:s}),u=(0,em.iY)(c);if(l)l.sessions.push({id:a.session,activeFile:null,timestamp:u});else{var d=null==o?void 0:o({userId:a.id}),p={id:a.id,username:a.name,roles:a.roles,color:null!=d?d:(0,em.a4)(r),sessions:[{id:a.session,activeFile:null,timestamp:u}]};i[a.id]=null,r.push(p),t.emit(eh.USER_JOIN,p),t.emit(eh.USERS_UPDATE,(0,_._)(r))}}}(n);break;case"part":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser;if(n.part&&n.part.id&&n.part.session){var s=n.part,c=s.id,u=s.session,d=r.findIndex(function(e){return e.id===c}),p=r[d];if(1===p.sessions.length){r.splice(d,1),delete i[p.id],t.emit(eh.USER_LEAVE,p),t.emit(eh.USERS_UPDATE,(0,_._)(r)),o&&l(null);var f=a.findIndex(function(e){return e.id===p.id});-1!==f&&(a.splice(f,1),t.emit(eh.FOLLOWING_USERS_CHANGED,{followingUsers:(0,_._)(a),user:p,type:"unfollow"}))}else{p.sessions=p.sessions.filter(function(e){return e.id!==u});var h=(0,em.Ni)(p);i[p.id]!==h&&(i[p.id]=h,t.emit(eh.USER_OPENED_FILE,{user:p,file:h}))}}}(n);break;case"fileOpened":!function(e){var n=e.emitter,t=e.cmd,r=e.activeUsers,i=e.userIdToFile;if(t.fileOpened){var o=t.fileOpened,a=o.userId,l=o.file,s=o.timestamp,c=o.session,u=l||null;if(!a||!s)throw Error("Expected userId and timestamp associated with file opened command");var d=r.find(function(e){return e.id===a});if(!d)throw Error("Expected user with ID ".concat(a));var p=d.sessions.find(function(e){return e.id===c});if(!p)throw Error("Expected session with ID ".concat(p));p.activeFile=u,p.timestamp=(0,em.iY)(s),i[a]=u,n.emit(eh.USER_OPENED_FILE,{user:d,file:u})}}(n);break;case"followUser":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.followingUsers,o=n.followUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,em.fp)(a,r);!i.some(function(e){return e.id===l.id})&&(i.push(l),t.emit(eh.FOLLOWING_USERS_CHANGED,{followingUsers:(0,_._)(i),user:l,type:"follow"}))}(n);break;case"unfollowUser":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.followingUsers,o=n.unfollowUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,em.fp)(a,r),s=i.findIndex(function(e){return e.id===l.id});-1!==s&&(i.splice(s,1),t.emit(eh.FOLLOWING_USERS_CHANGED,{followingUsers:(0,_._)(i),user:l,type:"unfollow"}))}(n);break;case"sessionTimestampUpdated":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=n.sessionTimestampUpdated;if(!o.session||!o.timestamp)throw Error("Expected session and tiemstamp associated with update");var a=o.session,l=(0,em.fp)(a,r),s=i[l.id],c=l.sessions.find(function(e){return e.id===a});if(!c)throw Error("Expected user ".concat(l.id," to have a session with ID ").concat(a));c.timestamp=(0,em.iY)(o.timestamp);var u=c.activeFile;u!==s&&(i[l.id]=u,t.emit(eh.USER_OPENED_FILE,{user:l,file:u}))}(n)}}),d=n,function(){d=null}}),{onUserLeave:function(e){return o.on(eh.USER_LEAVE,e),function(){o.removeListener(eh.USER_LEAVE,e)}},onUserJoin:function(e){return o.on(eh.USER_JOIN,e),function(){o.removeListener(eh.USER_LEAVE,e)}},onActiveUsersChange:function(e){return o.on(eh.USERS_UPDATE,e),function(){o.removeListener(eh.USERS_UPDATE,e)}},onUserOpenedFile:function(e){return o.on(eh.USER_OPENED_FILE,e),function(){o.removeListener(eh.USER_OPENED_FILE,e)}},onFollowedUserChanged:function(e){return o.on(eh.FOLLOWED_USER_CHANGED,e),function(){o.removeListener(eh.FOLLOWED_USER_CHANGED,e)}},onFollowingUsersChanged:function(e){return o.on(eh.FOLLOWING_USERS_CHANGED,e),function(){o.removeListener(eh.FOLLOWING_USERS_CHANGED,e)}},getActiveFileForUser:function(e){var n=u[e];if(void 0===n)throw Error("Expected file for user with ID ".concat(e," to be defined"));return n},updateOpenFile:function(e){return(0,r._)(function(){return(0,l.YH)(this,function(n){switch(n.label){case 0:return[4,p()];case 1:return n.sent().send({openFile:{file:e}}),[2]}})})()},updateSessionTimestamp:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return[4,p()];case 1:return e.sent().send({updateSessionTimestamp:{}}),[2]}})})()},followUser:function(e){return g.apply(this,arguments)},unfollowUser:v,getActiveUsers:function(){return a},getFollowedUser:function(){return s},getFollowingUsers:function(){return c},getUserIdToFile:function(){return u},getPathToUserIds:function(){var e=new Map;return a.forEach(function(n){var t=n.id,r=u[t];r&&!function n(t,r){if(""!==t){e.has(t)||e.set(t,[]);var i,o=e.get(t);if(!o)throw Error("Expected user Ids");!o.some(function(e){return e===r})&&(null===(i=e.get(t))||void 0===i||i.push(r),n((0,ef._6)(t),r))}}(r,t)}),e}}}({container:ei,onCommand:V,getColorForUser:K}),eS=(0,p.A)({container:ei,fs:ed,ctx:J}),e_=function(e){var n,t,o,s=e.container,c=(0,f.Ay)(),u=null;function d(){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(){return(0,l.YH)(this,function(e){return u&&"open"===u.status?[2,u]:[2,new Promise(function(e){c.once(g.CHANNEL_OPENED,function(n){e(n)})})]})})).apply(this,arguments)}function m(){return v.apply(this,arguments)}function v(){return(v=(0,r._)(function(){return(0,l.YH)(this,function(e){return[2,h({container:s,service:"nix"})]})})).apply(this,arguments)}return s.openChannel({service:"nix"},function(e){var n=e.channel;return u=n,c.emit(g.CHANNEL_OPENED,n),function(){u=null}}),{searchPackages:(n=(0,r._)(function(e){var n,t,r,o,s,c=arguments;return(0,l.YH)(this,function(l){switch(l.label){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},[4,m()];case 1:return r=(t=a._.apply(void 0,[l.sent(),2]))[0],o=t[1],[4,r.request({nixPackageSearchRequest:(0,i._)({query:e},n)})];case 2:if((s=l.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(o(),s.error)return[2,{error:s.error,packages:null}];if(!s.nixPackageSearchResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:s.nixPackageSearchResponse.packages,error:null}]}})}),function(e){return n.apply(this,arguments)}),listPackages:(0,r._)(function(){var e,n,t,r;return(0,l.YH)(this,function(i){switch(i.label){case 0:return[4,m()];case 1:return n=(e=a._.apply(void 0,[i.sent(),2]))[0],t=e[1],[4,n.request({nixPackageListRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(t(),r.error)return[2,{error:r.error,packages:null}];if(!r.nixPackageListResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:r.nixPackageListResponse.packages,error:null}]}})}),getChannels:(0,r._)(function(){var e,n,t,r;return(0,l.YH)(this,function(i){switch(i.label){case 0:return[4,m()];case 1:return n=(e=a._.apply(void 0,[i.sent(),2]))[0],t=e[1],[4,n.request({nixChannelsRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channels:null}];if(t(),r.error)return[2,{error:r.error,channels:null}];if(!r.nixChannelsResponse)return[2,{error:"Response expected but none received",channels:null}];return[2,{channels:r.nixChannelsResponse.channels,error:null}]}})}),getLatestStableChannel:(0,r._)(function(){var e,n,t,r;return(0,l.YH)(this,function(i){switch(i.label){case 0:return[4,m()];case 1:return n=(e=a._.apply(void 0,[i.sent(),2]))[0],t=e[1],[4,n.request({nixChannelLatestStableRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channel:null}];if(t(),r.error)return[2,{error:r.error,channel:null}];if(!r.nixChannelLatestStableResponse)return[2,{error:"Response expected but none received",channel:null}];return[2,{channel:r.nixChannelLatestStableResponse.channel,error:null}]}})}),addPackages:(t=(0,r._)(function(e){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[4,t.sent().request({nixPackageAddRequest:{packages:e}})];case 2:if((n=t.sent()).channelClosed)return[2,"channel closed"];if(n.error)return[2,n.error];if(!n.nixPackageAddResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return t.apply(this,arguments)}),removePackages:(o=(0,r._)(function(e){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[4,t.sent().request({nixPackageRemoveRequest:{packages:e}})];case 2:if((n=t.sent()).channelClosed)return[2,"channel closed"];if(n.error)return[2,n.error];if(!n.nixPackageRemoveResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return o.apply(this,arguments)}),packageInfo:function(e){return(0,r._)(function(){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[4,t.sent().request({nixPackageInfoRequest:{name:e}})];case 2:if((n=t.sent()).channelClosed)return[2,{package:null,error:"channel closed"}];if(n.error)return[2,{package:null,error:n.error}];if(!n.nixPackageInfoResponse)return[2,{package:null,error:"response expected but non received"}];if(!n.nixPackageInfoResponse.package)return[2,{package:null,error:"package not found"}];return[2,{package:n.nixPackageInfoResponse.package,error:null}]}})})()}}}({container:ei}),eI=(0,A.A)({container:ei,dotReplit:eS}),eF=function(e){var n=e.container,t=e.forceTrace,i=e.track,o=(0,f.Ay)(),s=new Map;function c(e){var n=s.get(e);return n||(n={packagerChannel:null,didCallOpenChannel:!1,closeChannel:null},s.set(e,n)),n}function p(e){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(e){var t,r,i,o,s=arguments;return(0,l.YH)(this,function(l){switch(l.label){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:0,[4,h({container:n,service:"packager3"})];case 1:if(i=(r=a._.apply(void 0,[l.sent(),2]))[0],o=r[1],!e)return[3,3];return[4,i.request({packageSetPackagerRequest:{packagerId:e}})];case 2:l.sent(),l.label=3;case 3:if("open"!==i.status){if(t>5)throw Error("Failed to getAnonymousPackagerChannel");return[2,p(e,t+1)]}return[2,[i,o]]}})})).apply(this,arguments)}function g(e){return S.apply(this,arguments)}function S(){return(S=(0,r._)(function(e){var t;return(0,l.YH)(this,function(r){return((t=c(e)).didCallOpenChannel||function(e){var t=c(e);if(t.didCallOpenChannel)throw Error("Already called open channel");t.didCallOpenChannel=!0,t.closeChannel=n.openChannel({service:"packager3",name:e||"packager",action:w.api.OpenChannel.Action.ATTACH_OR_CREATE},function(n){var r=n.channel;return r.onCommand(function(n){if(null!=n.state){var t=n.state===w.api.State.Running;o.emit(b.STATE_CHANGED,t,e)}else null!=n.output?o.emit(b.OUTPUT,n.output,e):null!=n.error&&o.emit(b.ERROR,n.error,e)}),e?r.request({packageSetPackagerRequest:{packagerId:e}}).then(function(){t.packagerChannel=r,o.emit(b.CHANNEL_OPENED,r,e)}):(t.packagerChannel=r,o.emit(b.CHANNEL_OPENED,r,e)),function(){t.packagerChannel=null}})}(e),t.packagerChannel&&"open"===t.packagerChannel.status)?[2,t.packagerChannel]:[2,new Promise(function(n){o.once(b.CHANNEL_OPENED,function(t,r){r===e&&n(t)})})]})})).apply(this,arguments)}return{addPackages:function(e,n){return(0,r._)(function(){var t,r,o,a;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,g(n)];case 1:if("open"!==(r=l.sent()).status)return[2,!1];return o=e.map(function(e){return{name:e.name,spec:e.version}}),[4,r.request({packageAdd:{pkgs:o,useNewResponse:!0}})];case 2:if((a=l.sent()).channelClosed||a.error)return[2,!1];return(null===(t=a.packageAddResponse)||void 0===t?void 0:t.installedSystemDependencies)&&i&&i(u.AZ.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:n}),[2,!0]}})})()},removePackages:function(e,n){return(0,r._)(function(){var t,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:return[4,g(n)];case 1:if("open"!==(t=o.sent()).status)return[2,!1];return r=e.map(function(e){return{name:e}}),[4,t.request({packageRemove:{pkgs:r}})];case 2:if((i=o.sent()).channelClosed)return[2,!1];return[2,!!i.ok]}})})()},searchPackages:function(e,n){return(0,r._)(function(){var t,r,i,o;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,p(n)];case 1:return r=(t=a._.apply(void 0,[l.sent(),2]))[0],i=t[1],[4,r.request({packageSearch:{query:e}})];case 2:if((o=l.sent()).channelClosed)return[2,[]];if(i(),"packageSearchResp"===o.body&&o.packageSearchResp)return[2,o.packageSearchResp.results||[]];return v.Cp(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageSearchResp. Received error: ".concat(o.error))),[2,[]]}})})()},fetchPackageInfo:function(e,n){return(0,r._)(function(){var t,r,i,o;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,p(n)];case 1:return r=(t=a._.apply(void 0,[l.sent(),2]))[0],i=t[1],[4,r.request({packageInfo:{pkg:{name:e}}})];case 2:if((o=l.sent()).channelClosed)return[2,void 0];if(i(),"packageInfoResp"===o.body&&o.packageInfoResp)return[2,o.packageInfoResp.pkg||void 0];return v.Cp(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageInfoResp. Received error: ".concat(o.error))),[2,void 0]}})})()},installPackages:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r._)(function(){return(0,l.YH)(this,function(a){var s;return[2,(0,d.ce)(e,"packager.installPackages",(s=(0,r._)(function(e){var r,a,s;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,g(n)];case 1:if("open"!==(r=l.sent()).status)return[2,(0,y._)("ChannelClosed")];return[4,r.request({packageInstall:{useNewResponse:!0,disableGuess:o},traceInfo:(0,d.mY)(e),forceTrace:t})];case 2:if((a=l.sent()).error)return[2,(0,y._)(a.error)];if(a.channelClosed)return[2,(0,y._)("ChannelClosed")];if(!(s=a.packageInstallResponse))return[2,(0,y._)("No package install response found")];return s.installedSystemDependencies&&i&&i(u.AZ.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:n}),[2,(0,y.Ok)(s)]}})}),function(e){return s.apply(this,arguments)}))]})})()},listSpecfile:function(e){return(0,r._)(function(){var n,t,r,i,o,s,c;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,p(e)];case 1:return t=(n=a._.apply(void 0,[l.sent(),2]))[0],r=n[1],[4,t.request({packageListSpecfile:{}})];case 2:if((i=l.sent()).channelClosed)return[2,{packages:null,error:"channel closed"}];switch(r(),i.body){case"error":return[2,{packages:null,error:"list specfile failed: ".concat(i.error)}];case"packageListSpecfileResp":if(!(s=null===(o=i.packageListSpecfileResp)||void 0===o?void 0:o.pkgs))return[2,{packages:null,error:"list specfile returned an empty response"}];return[2,{packages:s,error:null}];default:return c="Unknown packager3 listSpecFile command ".concat(i.body,". ")+"Expected error or packageListSpecfileResp",v.Cp(Error(c)),[2,{packages:null,error:c}]}return[2]}})})()},getPackagerIds:function(){return Array.from(s.keys())},clearPackager:function(e){var n=s.get(e);(null==n?void 0:n.closeChannel)&&n.closeChannel(),s.delete(e)},onOutput:function(e){return o.on(b.OUTPUT,e),function(){o.removeListener(b.OUTPUT,e)}},onError:function(e){return o.on(b.ERROR,e),function(){o.removeListener(b.ERROR,e)}},onStateChanged:function(e){return o.on(b.STATE_CHANGED,e),function(){o.removeListener(b.STATE_CHANGED,e)}}}}({container:ei,forceTrace:$,track:C.u4}),eT=(0,eg.Ay)({container:ei,fs:ed,openMultipleFiles:I,openMultipleURLs:F,enableReplspaceSshTokenPassthrough:M}),eN=(eU={container:ei,beforeRun:(eP=(0,r._)(function(e,n){var t;return(0,l.YH)(this,function(o){var a;return t=(null==n?void 0:n.ctx)||c._.active(),[2,(0,d.ce)(t,"beforeRun",(a=(0,r._)(function(t){var o,a,c,p,f,h,m,g,v,w,y,b,S,Y,A,x;return(0,l.YH)(this,function(k){switch(k.label){case 0:return[4,(0,d.ce)(t,"toolchain.getConfigs",function(){return eI.getConfigs()})];case 1:if((o=k.sent()).disableInstallBeforeRun)return[2];return a=(0,i._)({},n),delete a.ctx,ea.emit("user:run:prerun",(0,i._)({runnerMode:s},a)),[4,(0,d.ce)(t,"fs.flush",(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:if(!(void 0===X||X.current))return[3,2];return[4,ed.flush()];case 1:e.sent(),e.label=2;case 2:return[2]}})}))];case 2:if(k.sent(),e&&e("prerun flush finished"),!(null==o?void 0:o.packagers))return[3,10];c=!0,p=!1,f=void 0,k.label=3;case 3:k.trys.push([3,8,9,10]),h=o.packagers[Symbol.iterator](),k.label=4;case 4:if(c=(m=h.next()).done)return[3,7];if(!(g=m.value).guessImports)return[3,6];return v=performance.now(),w=o.disableGuessImports,[4,eF.installPackages(t,g.id,w)];case 5:y=k.sent(),b=performance.now()-v,e&&(y.error?e("prerun packager install finished",{packagerId:g.id,language:g.language,errorMessage:y.error,success:!1}):(A=(Y=(null==(S=y.value)?void 0:S.guessedPkgs)||[]).length,e("prerun packager install finished",{packagerId:g.id,language:g.language,guessedPkgs:Y,guessedPkgsCount:A,guessedAnyPkgs:A>0,upmGuessDurationMs:null==S?void 0:S.upmGuessDurationMs,upmAddDurationMs:null==S?void 0:S.upmAddDurationMs,upmLockDurationMs:null==S?void 0:S.upmLockDurationMs,backendTotalDurationMs:null==S?void 0:S.totalDurationMs,frontendTotalDurationMs:b,success:!0}),A>0&&(0,C.u4)(u.AZ.PACKAGER_PACKAGES_GUESSED,{packages:Y}))),k.label=6;case 6:return c=!0,[3,4];case 7:return[3,10];case 8:return x=k.sent(),p=!0,f=x,[3,10];case 9:try{c||null==h.return||h.return()}finally{if(p)throw f}return[7];case 10:return ea.emit("user:run:initiate",{}),[2]}})}),function(e){return a.apply(this,arguments)}))]})}),eL=function(e,n){return eP.apply(this,arguments)})}).container,eO=eU.beforeRun,eB={mainClient:eM=(0,k.F)(null),connect:function(){return new Promise(function(e){!eM.current&&eN.openChannel({service:"debugger"},function(n){return eM.current=function(e){var n,t=e.channel,s=e.beforeRun,c=(0,k.F)("terminated"),u=(0,k.F)([]),d=(0,k.F)([]),p=(0,k.F)(new Map),h=(0,k.F)(null),m=(0,f.Ay)(),g=function(e,n){var t=new Map,o=new Map,s=new Map;function c(){return(c=(0,r._)(function(n){var r,c,u,d,p,f,h,m,g,v,w,y,b,S,Y,A,C,x,k,_,D,E,R,I,F,T,P,L,U,N,O,M,B,H,z,W,G,V,j,Z,q;return(0,l.YH)(this,function(K){switch(K.label){case 0:r=!0,c=!1,u=void 0,K.label=1;case 1:K.trys.push([1,6,7,8]),d=t.entries()[Symbol.iterator](),K.label=2;case 2:if(r=(p=d.next()).done)return[3,5];if(h=(f=(0,a._)(p.value,2))[0],m=f[1],void 0!==n&&n!==h)return[3,4];return[4,e({command:"setBreakpoints",arguments:{source:{name:h,path:h},breakpoints:m.map(function(e){return{line:e.line,logMessage:e.logMessage||void 0}})}})];case 3:if(!(g=K.sent()).success)return[3,4];v=!0,w=!1,y=void 0;try{for(b=o[Symbol.iterator]();!(v=(S=b.next()).done);v=!0){A=(Y=(0,a._)(S.value,2))[0],C=Y[1],(null===(x=C.source)||void 0===x?void 0:x.name)===h&&o.delete(A),k=!0,_=!1,D=void 0;try{for(E=s[Symbol.iterator]();!(k=(R=E.next()).done);k=!0)F=(I=(0,a._)(R.value,2))[0],I[1]===A&&s.delete(F)}catch(e){_=!0,D=e}finally{try{k||null==E.return||E.return()}finally{if(_)throw D}}}}catch(e){w=!0,y=e}finally{try{v||null==b.return||b.return()}finally{if(w)throw y}}T=g,P=!0,L=!1,U=void 0;try{for(N=T.body.breakpoints[Symbol.iterator]();!(P=(O=N.next()).done);P=!0)M=O.value,null!=M.id&&o.set(M.id,(0,i._)({source:{name:h,path:h}},M))}catch(e){L=!0,U=e}finally{try{P||null==N.return||N.return()}finally{if(L)throw U}}B=!0,H=!1,z=void 0;try{for(W=(function(e,n){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:if(e.length!==n.length)return[2];t=0,r.label=1;case 1:if(!(t<e.length))return[3,4];return[4,[e[t],n[t]]];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})(m,T.body.breakpoints)[Symbol.iterator]();!(B=(G=W.next()).done);B=!0)j=(V=(0,a._)(G.value,2))[0],Z=V[1],j.breakpointId&&null!=Z.id&&s.set(j.breakpointId,Z.id)}catch(e){H=!0,z=e}finally{try{B||null==W.return||W.return()}finally{if(H)throw z}}K.label=4;case 4:return r=!0,[3,2];case 5:return[3,8];case 6:return q=K.sent(),c=!0,u=q,[3,8];case 7:try{r||null==d.return||d.return()}finally{if(c)throw u}return[7];case 8:return[2]}})})).apply(this,arguments)}function u(){var e=new Map,n=new Set,r=!0,i=!1,l=void 0;try{for(var c,u=t.entries()[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var d=(0,a._)(c.value,2),p=d[0],f=d[1];if(0!==f.length){var h=[],m=!0,g=!1,v=void 0;try{for(var w,y=f[Symbol.iterator]();!(m=(w=y.next()).done);m=!0){var b=w.value;if(b.breakpointId&&b.line){var S=s.get(b.breakpointId),Y=void 0===S?void 0:o.get(S);Y&&n.add(S),h.push({dapId:S,pid1Id:b.breakpointId,line:Y&&Y.line||b.line,verified:!!(null==Y?void 0:Y.verified),logMessage:b.logMessage||void 0})}}}catch(e){g=!0,v=e}finally{try{m||null==y.return||y.return()}finally{if(g)throw v}}e.set(p,h)}}}catch(e){i=!0,l=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw l}}var A=!0,C=!1,x=void 0;try{for(var k,_=o.entries()[Symbol.iterator]();!(A=(k=_.next()).done);A=!0){var E=(0,a._)(k.value,2),R=E[0],I=E[1];if(!n.has(R)){var F=(0,D.f_)((null===(M=I.source)||void 0===M?void 0:M.path)||(null===(B=I.source)||void 0===B?void 0:B.name)||""),T=I.line;if(F&&T){var P=e.get(F);P||(P=[],e.set(F,P));var L=!1,U=!0,N=!1,O=void 0;try{for(var M,B,H,z=P[Symbol.iterator]();!(U=(H=z.next()).done);U=!0){var W=H.value;if(W.line===I.line){W.dapId=R,W.verified=I.verified,L=!0;break}}}catch(e){N=!0,O=e}finally{try{U||null==z.return||z.return()}finally{if(N)throw O}}L||P.push({dapId:R,line:T,verified:I.verified})}}}}catch(e){C=!0,x=e}finally{try{A||null==_.return||_.return()}finally{if(C)throw x}}return e}return{findPathByBreakpointId:function(e){var n=!0,r=!1,i=void 0;try{for(var o,l=t.entries()[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=(0,a._)(o.value,2),c=s[0];if(s[1].some(function(n){return n.breakpointId===e}))return c}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return null},getBreakpoints:u,flush:function(e){return c.apply(this,arguments)},handleDAPBreakpointEvent:function(e){var t=e.body,r=t.reason,a=t.breakpoint,l=a.id;if(null!=l){switch(r){case"changed":case"new":o.set(l,(0,i._)({},o.get(l),a));break;case"removed":o.delete(l);break;default:return}n(u())}},handlePID1BreakpointEvent:function(e){var r=e.absolutePath?(0,D.f_)(e.absolutePath):null;r&&(t.set(r,e.breakpoints||[]),n(u()))},handleDebugSessionEnded:function(){o.clear(),s.clear();var e=!0,r=!1,i=void 0;try{for(var l,c=t.entries()[Symbol.iterator]();!(e=(l=c.next()).done);e=!0){var d=(0,a._)(l.value,2),p=d[0],f=d[1];0===f.length&&t.delete(p)}}catch(e){r=!0,i=e}finally{try{e||null==c.return||c.return()}finally{if(r)throw i}}n(u())}}}(x,function(e){p.current=e}),v=(0,k.F)(!1),y=[],b=new L(function(e){if(y.push({time:Date.now(),direction:"in",data:e}),"event"===e.type)switch(e.event){case"continued":c.current="running";break;case"stopped":var n;c.current="paused",h.current=null!==(n=e.body.threadId)&&void 0!==n?n:null,m.emit("paused",e.body.reason),function(){F.apply(this,arguments)}();break;case"breakpoint":g.handleDAPBreakpointEvent(e)}else if("response"===e.type){var t=S.get(e.request_seq);t&&(S.delete(e.request_seq),t(e))}}),S=new Map,Y=100;function A(){c.current="terminated",u.current=[],d.current=[],h.current=null,g.handleDebugSessionEnded(),v.current=!1}var C=!1;function x(e){return E.apply(this,arguments)}function E(){return(E=(0,r._)(function(e){return(0,l.YH)(this,function(n){return[2,new Promise(function(n){var r,a=Y++;S.set(a,n);var l=(0,o._)((0,i._)({},e),{type:"request",seq:a});y.push({time:Date.now(),direction:"out",data:l});var s={debugInput:{session:"main",adapterInput:(r=JSON.stringify(l),"Content-Length: ".concat(U.byteLength(r),"\r\n\r\n").concat(r))}};y.push({time:Date.now(),direction:"out",data:s}),t.send(s)})]})})).apply(this,arguments)}function R(e){return I.apply(this,arguments)}function I(){return(I=(0,r._)(function(e){var n;return(0,l.YH)(this,function(r){switch(r.label){case 0:return y.push({time:Date.now(),direction:"out",data:e}),[4,t.request(e)];case 1:if(n=r.sent(),y.push({time:Date.now(),direction:"in",data:n}),n.error)throw n.error;return[2,n]}})})).apply(this,arguments)}function F(){return(F=(0,r._)(function(){var e,n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return u.current=[],d.current=[],[4,x({command:"stackTrace",arguments:{threadId:h.current}})];case 1:if(!(e=t.sent()).success||(u.current=e.body.stackFrames,0===u.current.length))return[2];return[4,x({command:"scopes",arguments:{frameId:u.current[0].id}})];case 2:if(!(n=t.sent()).success)return[2];return[4,Promise.all(n.body.scopes.map(function(e){return x({command:"variables",arguments:{variablesReference:e.variablesReference}}).then(function(n){return{response:n,parentVariableReference:e.variablesReference}})}))];case 3:return d.current=t.sent().filter(function(e){return e.response.success}).reduce(function(e,n){var t=n.response,r=n.parentVariableReference;return e.concat(t.body.variables.map(function(e){return(0,o._)((0,i._)({},e),{parentVariableReference:r})}))},[]),[2]}})})).apply(this,arguments)}function T(e){return P.apply(this,arguments)}function P(){return(P=(0,r._)(function(e){var n,r,i,o,a,d,p;return(0,l.YH)(this,function(l){switch(l.label){case 0:if("terminated"!==c.current)throw Error("Cant start while debugger is already running");return c.current="preinitializing",u.current=[],[4,s()];case 1:if(l.sent(),"stopping"===c.current)return c.current="terminated",[2];return C=!0,c.current="initializing",i={session:"main",readOnly:!1},e&&(i.debuggerId=e.debuggerOption.id,e.filePath&&(i.filePath=e.filePath)),o={debugMain:i},y.push({time:Date.now(),direction:"out",data:o}),[4,t.request(o)];case 2:if(a=l.sent(),y.push({time:Date.now(),direction:"in",data:a}),a.error)return m.emit("output",a.error),c.current="terminated",[2];return[4,x({command:"initialize",arguments:{clientID:"replit",clientName:"replit.com",adapterID:"cppdbg",pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0,supportsEvaluateForHovers:!0,supportsVariableType:!0,supportsVariablePaging:!0,supportsRunInTerminalRequest:!1,locale:"en-us",supportsProgressReporting:!0,supportsInvalidatedEvent:!0}})];case 3:if(!(d=l.sent()).success)return c.current="terminated",[2];return v.current=!!(null===(n=d.body)||void 0===n?void 0:n.supportsStepBack),p=!(null===(r=d.body)||void 0===r?void 0:r.supportsConfigurationDoneRequest),[4,g.flush()];case 4:if(l.sent(),p)return[3,6];return[4,x({command:"configurationDone"})];case 5:l.sent(),l.label=6;case 6:return"initializing"===c.current&&(c.current="running"),m.emit("started",p),[2]}})})).apply(this,arguments)}function N(e,n){return O.apply(this,arguments)}function O(){return(O=(0,r._)(function(e,n){var t,r,i,o;return(0,l.YH)(this,function(a){switch(a.label){case 0:return t=n.line,r=n.otIndex,i=n.otVersion,o=n.logMessage,[4,R({debugAddBreakpointRequest:{path:(0,D.H$)(e)||e,line:t,otIndex:r,otVersion:i,logMessage:o}})];case 1:if(a.sent(),"terminated"===c.current)return[3,3];return[4,g.flush(e)];case 2:a.sent(),a.label=3;case 3:return m.emit("breakpoint","added"),[2]}})})).apply(this,arguments)}function M(e){return B.apply(this,arguments)}function B(){return(B=(0,r._)(function(e){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return n=g.findPathByBreakpointId(e),[4,R({debugRemoveBreakpointRequest:{breakpointId:e}})];case 1:if(t.sent(),!("terminated"!==c.current&&n))return[3,3];return[4,g.flush(n)];case 2:t.sent(),t.label=3;case 3:return m.emit("breakpoint","removed"),[2]}})})).apply(this,arguments)}function H(){return(H=(0,r._)(function(e,n){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:if(!(t=g.findPathByBreakpointId(e)))return[2];return[4,R({debugUpdateBreakpointRequest:{breakpointId:e,logMessage:n.logMessage}})];case 1:if(r.sent(),"terminated"===c.current)return[3,3];return[4,g.flush(t)];case 2:r.sent(),r.label=3;case 3:return m.emit("breakpoint","updated"),[2]}})})).apply(this,arguments)}function z(){return(z=(0,r._)(function(e,n){var t,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:if(!(i=null===(r=p.current.get(e))||void 0===r?void 0:null===(t=r.find(function(e){return e.line===n.line&&void 0!==e.pid1Id}))||void 0===t?void 0:t.pid1Id))return[3,2];return[4,M(i)];case 1:return o.sent(),[3,4];case 2:return[4,N(e,n)];case 3:o.sent(),o.label=4;case 4:return[2]}})})).apply(this,arguments)}function W(e){return m.on("started",e),function(){m.removeListener("started",e)}}return t.onCommand(function(e){y.push({time:Date.now(),direction:"in",data:e});var n,t,r=e.debugOutput,i=e.debugState,o=e.debugBreakpointEvent,a=e.debugSessions;if(r){if("main"!==r.session)return;r.adapterOutput&&b.read(r.adapterOutput),r.output&&m.emit("output",r.output)}if(o&&g.handlePID1BreakpointEvent(o),i&&i.state===w.api.State.Stopped&&A(),((null==a?void 0:null===(n=a.sessions)||void 0===n?void 0:n.main)===w.api.State.Running||(null==i?void 0:i.state)===w.api.State.Running)&&"terminated"===c.current&&T(),(null==a?void 0:null===(t=a.sessions)||void 0===t?void 0:t.main)===w.api.State.Stopped||(null==i?void 0:i.state)===w.api.State.Stopped){if(C){C=!1;return}A()}}),{state:c,stackFrames:u,variables:d,breakpoints:p,supportsStepBack:v,onOutput:function(e){return m.on("output",e),function(){m.removeListener("output",e)}},onStarted:W,onPaused:function(e){return m.on("paused",e),function(){m.removeListener("paused",e)}},onBreakpoint:function(e){return m.on("breakpoint",e),function(){m.removeListener("breakpoint",e)}},sendInput:function(e){return(0,r._)(function(){var n,r;return(0,l.YH)(this,function(i){switch(i.label){case 0:return n={debugInput:{session:"main",input:e}},y.push({time:Date.now(),direction:"out",data:n}),[4,t.request(n)];case 1:if(r=i.sent(),y.push({time:Date.now(),direction:"in",data:r}),r.error)throw r.error;return[2]}})})()},fetchVariables:function(e){return(0,r._)(function(){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return[4,x({command:"variables",arguments:{variablesReference:e}})];case 1:if((n=t.sent()).success)return[2,n.body.variables.map(function(n){return(0,o._)((0,i._)({},n),{parentVariableReference:e})})];throw Error(n.message)}})})()},evaluate:function(e){var t=e.frameId,i=void 0===t?null===(n=u.current[0])||void 0===n?void 0:n.id:t,o=e.expression,a=e.context;return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return[4,x({command:"evaluate",arguments:{frameId:i,expression:o,context:a}})];case 1:return[2,e.sent()]}})})()},addBreakpoint:N,removeBreakpoint:M,updateBreakpoint:function(e,n){return H.apply(this,arguments)},toggleBreakpoint:function(e,n){return z.apply(this,arguments)},start:T,continue:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return u.current=[],c.current="running",[4,x({command:"continue",arguments:{threadId:h.current}})];case 1:return e.sent(),[2]}})})()},reverseContinue:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return u.current=[],c.current="running",[4,x({command:"reverseContinue",arguments:{threadId:h.current}})];case 1:return e.sent(),[2]}})})()},back:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return c.current="running",[4,x({command:"stepBack",arguments:{threadId:h.current}})];case 1:return e.sent(),[2]}})})()},next:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return c.current="running",[4,x({command:"stepIn",arguments:{threadId:h.current}})];case 1:return e.sent(),[2]}})})()},skip:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return c.current="running",[4,x({command:"next",arguments:{threadId:h.current,granularity:"line"}})];case 1:return e.sent(),[2]}})})()},stepOut:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return c.current="running",[4,x({command:"stepOut",arguments:{threadId:h.current}})];case 1:return e.sent(),[2]}})})()},stop:function(){return(0,r._)(function(){var e,n,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:if("terminated"===c.current)throw Error("Debugger already terminated");if(e=c.current,c.current="stopping","preinitializing"===e)return[2];if("initializing"!==e)return[3,2];return n=[],[4,Promise.race([new Promise(function(e){n.push(c.subscribe(function(){return e()}))}),new Promise(function(e){n.push(W(function(){return e()}))})])];case 1:if(o.sent(),n.forEach(function(e){return e()}),"terminated"===c.current)return[2];o.label=2;case 2:return r={debugStop:{session:"main"}},y.push({time:Date.now(),direction:"out",data:r}),[4,t.request(r)];case 3:if(i=o.sent(),y.push({time:Date.now(),direction:"in",data:i}),i.error)throw Error("Failed to stop debugger "+i.error);return[2]}})})()},getSource:function(e){return(0,r._)(function(){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return[4,x({command:"source",arguments:{source:{path:e}}})];case 1:if(!(n=t.sent()).success)throw Error(n.message);return[2,n.body.content]}})})()},getDebugLogs:function(){return Object.entries({state:c,stackFrames:u,variables:d,breakpoints:p,threadId:h}).map(function(e){var n=(0,a._)(e,2),t=n[0],r=n[1];return"".concat(t," = ").concat(JSON.stringify(r.current instanceof Map?(0,_._)(r.current):r.current,void 0,2))}).join("\n")+"\n\n"+y.map(function(e){return[new Date(e.time).toLocaleString(),"in"===e.direction?"->":"<-",JSON.stringify(e.data)].join(" ")}).join("\n")}}}({channel:n.channel,beforeRun:eO}),e(null),function(){eM.current=null}})})}},eH=(0,ep.kg)({container:ei,dotReplit:eS}),ez=function(e){var n;if("outputs"===e.mode?n=function(e){var n,t,o,a,s,c,u,p,h,m,g,v,y,b,S,Y,A,x,k=e.container,_=e.toolchain,D=e.beforeRun,E=e.packager,I=e.debuggest,F=(0,f.Ay)();F.setMaxListeners(100);var T=null,P={runId:(0,ey.A)(),runState:ev.ll.OFFLINE,runningStage:"NONE",outputBlocks:[]};function L(e){P=(0,ew.jM)(P,e)}function U(e){var n=P.outputBlocks.find(function(n){return n.id===e});if(!n)throw Error("can't find block for id: ".concat(e));F.emit(ev.sV.BLOCK_CHANGED,n)}function N(){F.emit(ev.sV.ALL_BLOCKS_CHANGED,P.outputBlocks)}function O(e){P.runState!==e&&(L(function(n){n.runState=e}),F.emit(ev.sV.STATE_CHANGE,e))}function M(){if(!T){O(ev.ll.OFFLINE);return}if("BEFORE_RUN"===P.runningStage){O(ev.ll.BEFORE_RUN);return}if("STOPPING"===P.runningStage){O(ev.ll.STOPPING);return}if("NONE"!==P.runningStage){O(ev.ll.RUNNING);return}O(ev.ll.IDLE)}function B(e,n){var t=(null!=n?n:P).outputBlocks.filter(function(n){return n.type===e}),r=t[t.length-1];if(r)return r}function z(e,n){var t;L(function(r){var i=B(e,r);i&&(t=i.id,n(i))}),t&&U(t)}function W(){return(W=(0,r._)(function(e,n){return(0,l.YH)(this,function(t){var o;return[2,(0,d.Lk)("outputs.run",(o=(0,r._)(function(t){var o,a,s,c,u,p,f,h,m,g;return(0,l.YH)(this,function(v){switch(v.label){case 0:if(P.runState!==ev.ll.IDLE&&P.runState!==ev.ll.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+P.runState);return s=P.outputBlocks.length>1&&P.outputBlocks[P.outputBlocks.length-1],(0,C.u4)(C.AZ.WS_CONSOLE_OUTPUT_STARTED,{replId:null===(o=k.getContext())||void 0===o?void 0:o.repl.id,runId:P.runId,lastBlock:s?(0,i._)({type:s.type,isDone:s.isDone,endTime:s.endTime,startTime:s.startTime},s.type===ev._B.EXECUTION?{executionMode:s.data.executionMode,exitCode:s.data.exitCode,stderr:s.data.stderr}:{},s.type===ev._B.DEBUGGER?{debugState:s.data.debugState}:{}):void 0,previousBlockNumber:P.outputBlocks.length,previousBlocksAvgTimeMs:P.outputBlocks.length>1?Math.floor(P.outputBlocks.reduce(function(e,n){return n.endTime&&n.startTime?e+(n.endTime-n.startTime):e},0)):void 0}),c=(0,ey.A)(),L(function(e){e.runId=c,e.runningStage="BEFORE_RUN"}),F.emit(ev.sV.LOCAL_RUN,e),M(),!n&&(p=function(e,n,t,r){if(!(null==e?void 0:e.runs))return[];var i=[];if(n=n.slice(),r){var o=n.indexOf(r);-1!==o&&n.splice(o,1),n.splice(0,0,r)}var a=!0,l=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;if(d.match(/(\.[a-z0-9]+)$/)){var p=!0,f=!1,h=void 0;try{for(var m,g=e.runs[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=m.value;if(v.fileParam||v.optionalFileParam){var w=(0,H.Z)(v.fileTypeAttrs);null===w&&v.language&&(w=H.Jh.from(v.language)),w&&(0,H.$h)(d,w)&&i.push({runner:v,filePath:d})}}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}var y=!0,b=!1,S=void 0;try{for(var Y,A=e.runs[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0){var C=Y.value;C.fileParam||i.push({runner:C})}}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}return function(e){e.sort(function(e,n){var t=eA(e),r=eA(n);return t!==r?t-r:e.runner.interpreter===n.runner.interpreter?0:e.runner.interpreter?-1:1})}(i),i}(_.configs.current,[],0,(null===(u=_.configs.current)||void 0===u?void 0:u.entrypoint)||null)).length>0&&(n=p[0]),[4,D(f=R.vF.timeStart({runnerId:null==n?void 0:n.runner.id,filePath:null==n?void 0:n.filePath,isInterpreter:null==n?void 0:n.runner.interpreter,replLanguage:null===(a=k.getContext())||void 0===a?void 0:a.repl.language}),{runId:c,channelId:null==T?void 0:T.id,type:"outputs",runConfig:n,ctx:t})];case 1:if(v.sent(),P.runId!==c||"NONE"===P.runningStage||"SERVER"===P.runningStage)return[2];if(!T)throw Error("State is RUNNING but outputs is null?");if("open"!==T.status)return[2];return(h=G()).isStopped||h.stop(),m={},n&&(m.runnerId=n.runner.id,m.filePath=n.filePath),g=T,[4,(0,d.ce)(t,"timeToRunning",(0,r._)(function(){var e,n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return e=performance.now(),g.send({runMain:m}),[4,new Promise(function(e){var n=g.onCommand(function(t){"state"===t.body&&(n(),e())})})];case 1:return t.sent(),n=performance.now()-e,f("run finished",{timeToRunningMs:n}),[2]}})}))];case 2:return v.sent(),[2]}})}),function(e){return o.apply(this,arguments)}))]})})).apply(this,arguments)}function G(){var e=I.mainClient.current,n=null==e?void 0:e.state.current;return{client:e,state:n,sendInput:function(n){return null==e?void 0:e.sendInput(n)},stop:function(){return null==e?void 0:e.stop()},isRunning:"running"===n,isStopped:null==n||"terminated"===n}}function V(){return(V=(0,r._)(function(e){var n,t;return(0,l.YH)(this,function(r){if(P.runState===ev.ll.OFFLINE)return[2];if(n=G(),t=P.outputBlocks[P.outputBlocks.length-1].type===ev._B.DEBUGGER,n.isRunning&&t&&n.sendInput(e),P.runState!==ev.ll.IDLE&&P.runState!==ev.ll.RUNNING)throw Error("Can only send input when running or idle");if(!T)throw Error("State is not OFFLINE but outputs is null?");return"open"!==T.status||T.send({input:e}),[2]})})).apply(this,arguments)}return t=(n={packager:E,updateState:L,getRunningBlockOfType:B,updateRunningBlockOfType:z,emitBlockUpdate:U}).packager,o=n.updateState,a=n.getRunningBlockOfType,s=n.updateRunningBlockOfType,c=n.emitBlockUpdate,(u=[]).push(t.onOutput(function(e){var n=a(ev._B.PACKAGER);null==n||n.data.emitMessage(e.replace(/\n/g,"\n\r"))})),u.push(t.onError(function(e){s(ev._B.PACKAGER,function(n){n.error?n.error+="\n"+e:n.error=e})})),u.push(t.onStateChanged(function(e){if(e){var n=(0,ey.A)();o(function(e){e.outputBlocks.push({id:n,localStartTime:Date.now(),isDone:!1,visualState:ev.p$.EXPANDED,type:ev._B.PACKAGER,data:(0,i._)({},eY({maxHistorySize:ex}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),c(n)}else s(ev._B.PACKAGER,function(e){e.data.emitMessage(ek),e.localEndTime=Date.now(),e.isDone=!0})})),g=(p={debuggest:I,updateState:L,updateRunningBlockOfType:z,getRunningBlockOfType:B,emitRunState:O,emitBlockUpdate:U,stopCurrentRun:function(){L(function(e){e.runningStage="BEFORE_RUN"}),null==T||T.send({clear:{}})}}).debuggest,v=p.updateState,y=p.updateRunningBlockOfType,b=p.getRunningBlockOfType,S=p.emitBlockUpdate,Y=p.emitRunState,A=p.stopCurrentRun,g.mainClient.subscribe(function(e){e&&(null==m||m(),null==h||h(),m=e.state.subscribe(function(e){if("initializing"===e){A();var n=(0,ey.A)();v(function(e){e.outputBlocks.push({id:n,localStartTime:Date.now(),isDone:!1,type:ev._B.DEBUGGER,visualState:ev.p$.EXPANDED,data:(0,i._)({debugState:"paused"},eY({maxHistorySize:ex}))})}),S(n),Y(ev.ll.RUNNING)}"paused"===e&&y(ev._B.DEBUGGER,function(e){e.data.debugState="paused"}),"running"===e&&y(ev._B.DEBUGGER,function(e){e.data.debugState="running"}),"stopping"===e&&Y(ev.ll.STOPPING),"terminated"===e&&(y(ev._B.DEBUGGER,function(e){e.localEndTime=Date.now(),e.data.emitMessage(ek),e.isDone=!0}),Y(ev.ll.IDLE))}),h=e.onOutput(function(e){var n=b(ev._B.DEBUGGER);null==n||n.data.emitMessage(e)}))}),k.openChannel({name:"output",service:"output"},function(e){var n=e.channel;return T=n,M(),n.onCommand(function(e){if(null!=e.state){var n=e.state===w.api.State.Stopped;"STOPPING"===P.runningStage&&n&&L(function(e){e.runningStage="NONE"}),n?"SERVER"===P.runningStage&&L(function(e){e.runningStage="NONE"}):L(function(e){e.runningStage="SERVER"}),M();return}if(null!=e.outputBlockStartEvent&&null!=e.outputBlockStartEvent.measureStartTime){if(void 0!==P.outputBlocks.find(function(e){return e.type===ev._B.EXECUTION&&!e.isDone}))return;var t=e.outputBlockStartEvent,r=t.cgroup,o=t.executionMode,a=eC(t.measureStartTime),l=(0,ey.A)();L(function(e){e.outputBlocks.push({id:l,localStartTime:Date.now(),startTime:a,isDone:!1,type:ev._B.EXECUTION,visualState:ev.p$.EXPANDED,data:(0,i._)({cgroup:r,executionMode:o===w.api.OutputBlockStartEvent.ExecutionMode.Run?"run":"interpret"},eY({maxHistorySize:ex}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),U(l)}if(null!=e.output){var s=B(ev._B.EXECUTION);null==s||s.data.emitMessage(e.output)}if(null!=e.hint){var c=B(ev._B.EXECUTION);null==c||c.data.emitMessage("\r\n\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n"))}if(null!=e.stderr&&z(ev._B.EXECUTION,function(n){n.data.stderr=(n.data.stderr||"")+e.stderr}),null!=e.error){var u=e.error;z(ev._B.EXECUTION,function(e){e.error?e.error+="\n"+u:e.error=u})}if(null!=e.outputBlockEndEvent&&null!=e.outputBlockEndEvent.measureEndTime){var d,p=e.outputBlockEndEvent.exitCode;(0,C.u4)(C.AZ.WS_CONSOLE_OUTPUT_RAN,{exitCode:p,replId:null===(d=k.getContext())||void 0===d?void 0:d.repl.id,runId:P.runId});var f=eC(e.outputBlockEndEvent.measureEndTime);z(ev._B.EXECUTION,function(e){e.data.emitMessage(ek),e.data.exitCode=p,e.localEndTime=Date.now(),e.endTime=f,e.isDone=!0})}}),function(){T=null,L(function(e){e.runId=(0,ey.A)(),e.runState=ev.ll.OFFLINE,e.runningStage="NONE",e.outputBlocks.forEach(function(e){if(!e.isDone){e.data.emitMessage(ek),e.localEndTime=Date.now(),e.isDone=!0;var n="Connection was lost";e.error?e.error+="\n"+n:e.error=n}})}),M(),N()}}),{mode:"outputs",run:function(e,n){return W.apply(this,arguments)},stopRun:function(){if(P.runState===ev.ll.RUNNING){var e=G();if(!e.isStopped){e.stop(),L(function(e){e.runningStage="STOPPING"}),M();return}if("BEFORE_RUN"===P.runningStage){L(function(e){e.runningStage="NONE"}),M();return}L(function(e){e.runningStage="STOPPING"}),M(),null==T||T.send({clear:{}})}},sendInput:function(e){return V.apply(this,arguments)},onLocalRun:function(e){return F.on(ev.sV.LOCAL_RUN,e),function(){F.removeListener(ev.sV.LOCAL_RUN,e)}},onStateChanged:function(e){return F.on(ev.sV.STATE_CHANGE,e),function(){return F.removeListener(ev.sV.STATE_CHANGE,e)}},getRunState:function(){return P.runState},getOutputBlocks:function(){return P.outputBlocks},clearBlockHistory:function(){L(function(e){e.outputBlocks=e.outputBlocks.filter(function(e){return!e.isDone})}),N()},onBlockChanged:function(e){return F.on(ev.sV.BLOCK_CHANGED,e),function(){return F.removeListener(ev.sV.BLOCK_CHANGED,e)}},onAllBlocksChanged:function(e){return F.on(ev.sV.ALL_BLOCKS_CHANGED,e),function(){return F.removeListener(ev.sV.ALL_BLOCKS_CHANGED,e)}},resizeTerminalForBlock:function(e,n){if(T&&"open"===T.status){var t=P.outputBlocks.find(function(n){return n.id===e});if(!t)throw Error("tried to resize terminal of non-existing block");!t.isDone&&T.send({resizeTerm:n})}},startBlock:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ev.p$.EXPANDED,t=(0,ey.A)();return L(function(r){r.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,visualState:n,type:e,data:(0,i._)({},eY({maxHistorySize:ex}))})}),U(t),{id:t}},endBlock:function(e){L(function(n){var t=n.outputBlocks.find(function(n){return n.id===e});if(!t)throw Error("couldn't find a block");t.data.emitMessage(ek),t.localEndTime=Date.now(),t.isDone=!0}),U(e)},writeOutputToBlock:function(e,n){var t=P.outputBlocks.find(function(n){return n.id===e});t&&t.data.emitMessage(n)},writeErrorToBlock:function(e,n){L(function(t){var r=t.outputBlocks.find(function(n){return n.id===e});if(!r)throw Error("couldn't find a block");r.error?r.error+="\n"+n:r.error=n}),U(e)},setBlockVisualState:function(e,n){L(function(t){var r=t.outputBlocks.find(function(n){return n.id===e});if(!r)throw Error("couldn't find a block");r.visualState=n}),U(e)}}}({container:e.container,toolchain:e.toolchain,beforeRun:e.beforeRun,packager:e.packager,debuggest:e.debuggest}):"html"===e.mode&&(n=function(e){var n=e.beforeRun,t=e.container,i=(0,f.Ay)(),o=ev.ll.OFFLINE,a="none",s=Math.random();function c(){var e=function(e){o!==e&&(o=e,i.emit(ev.sV.STATE_CHANGE,o))};if("none"!==a){e(ev.ll.RUNNING);return}e(ev.ll.IDLE)}function u(){return(u=(0,r._)(function(e){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:if(o!==ev.ll.IDLE&&o!==ev.ll.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+o);return s=t=Math.random(),i.emit(ev.sV.LOCAL_RUN,e),a="before-run",c(),[4,n(R.vF.timeStart({replLanguage:"html"}),{runId:t.toString(),type:"html"})];case 1:if(r.sent(),s!==t||"none"===a)return[2];return a="running",c(),a="none",c(),[2]}})})).apply(this,arguments)}return t.onConnectionStateChanged(function(e){e===x.KN.CONNECTED&&(a="none",c())}),{mode:"html",run:function(e){return u.apply(this,arguments)},stopRun:function(){if(o!==ev.ll.RUNNING)throw Error("stopRun must be called when running but got ".concat(o));a="none",c()},onStateChanged:function(e){return i.on(ev.sV.STATE_CHANGE,e),function(){i.removeListener(ev.sV.STATE_CHANGE,e)}},onLocalRun:function(e){return i.on(ev.sV.LOCAL_RUN,e),function(){i.removeListener(ev.sV.LOCAL_RUN,e)}},getRunState:function(){return o}}}({beforeRun:e.beforeRun,container:e.container})),!n)throw Error("mode not supported: "+e.mode);return n}({mode:s,container:ei,toolchain:eI,beforeRun:eL,packager:eF,debuggest:eB}),eW=function(e){var n=e.container,t=e.toolchain,s=e.fs,c=e.enableMultipleLSPClientsPerFile,u=void 0!==c&&c,d=new Map,p=new Map,h={},m=!0;function g(e){var n=h[e];if(!n)throw Error("LSPNix: removeLanguage called with lspId never configured");var t=n.client;if(t){n.client=null,t.destroy();var r=!0,i=!1,o=void 0;try{for(var l,s=d[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=(0,a._)(l.value,2),u=c[0],f=c[1],m=p.get(u);if(m){m.delete(t),p.set(u,m);var g=!0,v=!1,w=void 0;try{for(var y,b=f[Symbol.iterator]();!(g=(y=b.next()).done);g=!0)(0,y.value)(Array.from(m))}catch(e){v=!0,w=e}finally{try{g||null==b.return||b.return()}finally{if(v)throw w}}}}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}n.closeChannel(),delete h[e]}function y(e,n){if(h[e])throw Error("LSPNix: addLanguage called with lspId already configured");h[e]={client:null,option:n,closeChannel:function(){}},m&&A(e)}var b=new Map;function S(e){if(!m)return!1;var n=h[e];return!!n&&!n.client}function Y(e,n,t){new Date().getTime()-t.getTime()<5e3?n<3?setTimeout(function(){S(e)&&A(e,n+1)},1e3*Math.pow(2,n)):R.vF.error("LSP server is crash-looping. Giving up.",{lspId:e,appService:"lspnix"}):setTimeout(function(){S(e)&&A(e)})}function A(e){return C.apply(this,arguments)}function C(){return(C=(0,r._)(function(e){var t,c,g,y,S,A,C,x,k=arguments;return(0,l.YH)(this,function(_){switch(_.label){case 0:if(t=k.length>1&&void 0!==k[1]?k[1]:0,!m)throw Error("LSPNix: Called startClient while not enabled");if(!h[e])throw Error("LSPNix: No config found for lspId: ".concat(e));if(!b.get(e))return[3,2];return[4,b.get(e)];case 1:if(_.sent())return[2];_.label=2;case 2:if(g=(c=h[e]).client,c.closeChannel,y=c.option,g)throw Error("LSPNix: A previous client is already set for language: ".concat(e));return S=function(){},A=new Promise(function(e){S=e}),b.set(e,A),C=[],x=n.openChannel({service:"lsp2",skip:function(e){var n=e.repl.language,t=n.startsWith("nix")||n.startsWith("html");return t||(R.vF.error("Skipped opening lsp channel for non-nix repl",{language:n,appService:"lspnix"}),S(null)),!t}},function(c){var g=c.channel,A=null,k=!1,_=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!k){k=!0,n||(S(null),b.delete(e)),C.forEach(function(e){return e()}),null==A||A.destroy(),(null===(o=h[e])||void 0===o?void 0:o.client)===A&&(h[e].client=null),n&&m||x();var t=!0,r=!1,i=void 0;try{for(var o,l,s=d[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var c=(0,a._)(l.value,2),u=c[0],f=c[1],g=p.get(u);if(g&&A&&g.has(A)){g.delete(A),g.size?p.set(u,g):p.delete(u);var v=!0,w=!1,y=void 0;try{for(var Y,_=f[Symbol.iterator]();!(v=(Y=_.next()).done);v=!0)(0,Y.value)(Array.from(g))}catch(e){w=!0,y=e}finally{try{v||null==_.return||_.return()}finally{if(w)throw y}}}}}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}}};if("open"!==g.status){R.vF.error("LSPNix got a channel that wasn't open. This is expected to be impossible.",{lspId:e,appService:"lspnix"});return}var D=new Date;return g.request({startLSP:{languageServerId:e}}).then(function(c){if(!c.ok){R.vF.error("LSP server failed to start",{lspId:e,appService:"lspnix",serverError:c.error});return}if(m&&h[e]){C.push(g.onCommand(function(n){n.state===w.api.State.Stopped&&(R.vF.error("LSP server unexpectedly disconnected",{lspId:e,appService:"lspnix"}),_(),m&&Y(e,t,D))}));var x=0;eu(n,function(){return x++<5&&m&&ec(h[e].option,y)&&"open"===g.status}).then(function(n){if(!h[e]){R.vF.info("LSPNix: lsp map changed while getting working directory",{lspId:e,appService:"lspnix"});return}if(!ec(h[e].option,y)){R.vF.info("LSPNix: configuration changed while getting working directory",{lspId:e,appService:"lspnix"});return}if("open"!==g.status){R.vF.error("LSPNix: channel wasn't open after getting working directory",{lspId:e,appService:"lspnix"});return}if(n.error){R.vF.error("LSPNix: failed to get working directory",{lspId:e,appService:"lspnix",originalError:null===(k=n.error)||void 0===k?void 0:k.message});return}if(A=function(e){var n,t=e.connection,a=e.isSupportedFile,s=e.clientId,c=e.clientName,u=e.getWorkspaceConfiguration,d=e.onWorkspaceConfigurationChange,p=e.applyWorkspaceEdit,h=(0,f.Ay)();h.setMaxListeners(1/0);var m=null,g=er.b.OFFLINE,w=er.A.NOT_READY,y=null,b=!1,S=new Map,Y=new Map,A=null;function C(e){if(!m)throw Error("Expected rootUri");var n=e.slice(m.length+1);try{return decodeURIComponent(n)}catch(e){throw v.v4(function(t){t.setExtra("fragment_to_decode",n),v.Cp(e)}),e}}function x(e){if(!m)throw Error("Expected rootUri");if(e.startsWith("/"))throw Error("Path must be relative. Got: ".concat(e));return m+"/"+e}function k(e){g!==e&&(g!==er.b.INITIALIZED&&_(er.A.NOT_READY),g=e,h.emit("SERVER_STATE_CHANGE",g))}function _(e){w!==e&&(w=e,h.emit("SERVER_HEALTH_CHANGE",w))}function D(e){h.emit("SEND_NOTIFICATION",e),t.write(es(e))}function E(e){return I.apply(this,arguments)}function I(){return(I=(0,r._)(function(e){var n,r,a,c,u,d,p,f;return(0,l.YH)(this,function(l){if(c=void 0===(a=(r=void 0===(n=e.options)?{}:n).id)?el():a,u=r.signal,d=r.tap,p=(0,W._)(e,["options"]),!Number.isInteger(c))throw Error("Request ID must be an integer");return t.didClose()?[2,Promise.resolve({result:null,cancelled:!0})]:(h.emit("REQUEST",{id:c,data:p}),null==u||u.addEventListener("abort",function(){T(c)},{once:!0}),t.write(es((0,o._)((0,i._)({},p),{id:c}))),null===A&&(A=setTimeout(function(){_(er.A.STALLED)},3e4)),f=new Promise(function(e){Y.set(c,{requestData:p,resolve:e})}),d&&d(f),[2,f.then(function(e){null!==A&&(clearTimeout(A),A=null),g!==er.b.INITIALIZED||e.cancelled||_(er.A.READY);var n=(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=en[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(a.supports(e))return a}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return new et})(s).onResponse(p.method,e);if("error"in n){var t=n.error,r=t.code,i=t.message,o=t.data;R.vF.error("LSP request failed",{code:r,lspId:s,errorMessage:i,data:JSON.stringify(o),requestData:p})}return n})])})})).apply(this,arguments)}function F(e,n){t.write(es((0,o._)((0,i._)({},n),{id:e})))}function T(e){var n=Y.get(e);n&&(h.emit("CANCEL_REQUEST",e),n.resolve({result:null,cancelled:!0}),Y.delete(e),D({method:"$/cancelRequest",params:{id:e}}))}var P=0,U=new L(function(e){var n=Y.get(e.id);if(e.id&&n){var t=n.resolve;Y.delete(e.id);var r=e.result,a=e.error;if((void 0!==r||a)&&h.emit("RESPONSE",e),void 0!==r){P=0,t({result:r,cancelled:!1});return}if(a){P++,t({error:a}),P>20&&(R.vF.error("LSP experienced 20 consecutive errors. Setting server health to 'BROKEN",{lspId:s}),_(er.A.BROKEN),P=0);return}throw R.vF.error("LSP response message contained neither error nor result"),new q.A("Expected either message or error in LSP response").setExtra("message",JSON.stringify(e))}var l=e.method;if("client/registerCapability"===l){var c=e.params.registrations;if(!c||!Array.isArray(c))throw Error("Expected registrations array");c.forEach(function(e){var n=e.method;if(!n)throw Error("Expected registration method");if(!y)throw Error("Expected server capabilities");var t=e.registerOptions||!0;switch(n){case"textDocument/definition":y.definitionProvider=!0;break;case"textDocument/typeDefinition":y.typeDefinitionProvider=!0;break;case"textDocument/implementation":y.implementationProvider=!0;break;case"textDocument/references":y.referencesProvider=!0;break;case"textDocument/hover":y.hoverProvider=!0;break;case"textDocument/semanticTokens":y.semanticTokensProvider=t;break;case"textDocument/completion":y.completionProvider=t;break;case"textDocument/formatting":y.documentFormattingProvider=t;break;case"textDocument/rename":y.renameProvider=t;break;case"textDocument/codeAction":y.codeActionProvider=t;break;case"textDocument/signatureHelp":y.signatureHelpProvider=t;break;case"textDocument/didSave":if("number"==typeof y.textDocumentSync)break;y.textDocumentSync=(0,o._)((0,i._)({},y.textDocumentSync||{}),{save:t});break;case"textDocument/willSaveWaitUntil":if("number"==typeof y.textDocumentSync)break;y.textDocumentSync=(0,o._)((0,i._)({},y.textDocumentSync||{}),{willSave:!0});break;case"textDocument/didChange":if("number"==typeof y.textDocumentSync)break;y.textDocumentSync=(0,o._)((0,i._)({},y.textDocumentSync||{}),{change:t});break;case"textDocument/didOpen":case"textDocument/didClose":if("number"==typeof y.textDocumentSync)break;y.textDocumentSync=(0,o._)((0,i._)({},y.textDocumentSync||{}),{openClose:!0});break;case"workspace/executeCommand":y.executeCommandProvider=t;break;default:R.vF.info("Unexpected dynamically registered capability in LSP client",{method:n})}h.emit("SERVER_CAPABILITIES_CHANGE",y)}),F(e.id,{result:null,cancelled:!1});return}if("workspace/applyEdit"===l){p(e.params).then(function(n){F(e.id,{result:n,cancelled:!1})});return}if("textDocument/publishDiagnostics"===l){var d=C(e.params.uri),f=S.get(d);if(!f)return;var m=e.params.diagnostics;if(B()(f.diagnostics,m))return;f.diagnostics=m,h.emit("DIAGNOSTICS",{path:d,diagnostics:m});return}if("workspace/configuration"===l){var g,v=e.params,w=Array(v.items.length).fill(null),b=null!==(g=null==u?void 0:u())&&void 0!==g?g:null;b&&(w=v.items.map(function(e){return e.section?j()(b,e.section):b})),F(e.id,{result:w,cancelled:!1})}("window/logMessage"===l||"telemetry/event"===l)&&h.emit("RECEIVE_NOTIFICATION",e),"workspace/semanticTokens/refresh"===l&&h.emit("SEMANTIC_TOKENS_REFRESH")});function N(e){if(!y)throw Error("Expected client to be initialized");if(!y[e])throw Error("LSP Server does not support ".concat(e.replace(/Provider$/,"")));return y[e]}function O(e){return m&&e?e.filter(function(e){return"uri"in e?e.uri.startsWith(m):e.targetUri.startsWith(m)}):e}t.read(U.read);var M=function(){};return{initialize:function(e){var t=e.pwd,i=e.initializationOptions;return(0,r._)(function(){var e,r;return(0,l.YH)(this,function(o){switch(o.label){case 0:return k(er.b.INITIALIZING),m="file://".concat(t),[4,E({method:"initialize",params:{initializationOptions:i,capabilities:Q({configurationSupport:{serverToClient:!!u,clientToServer:!!d}}),processId:null,rootUri:m,workspaceFolders:[{name:m,uri:m}]}})];case 1:if("error"in(e=o.sent()))throw Error("Something went wrong initializing the LSP client: ".concat(e.error.message));if(e.cancelled)throw Error("Initialize request cancelled");if(!e.result)throw Error("Expected result in initialize request");return D({method:"initialized",params:{}}),y=e.result.capabilities,n=e.result.serverInfo,h.emit("SERVER_CAPABILITIES_CHANGE",y),k(er.b.INITIALIZED),d&&(M=d(function(e){D({method:"workspace/didChangeConfiguration",params:{settings:e}})})),u&&(r=u())&&D({method:"workspace/didChangeConfiguration",params:{settings:r}}),[2]}})})()},generateId:el,notify:{didOpen:function(e,n){if(!a(e))throw Error("Path not supported");var t,r=S.get(e);if(r&&0!==r.buffers){r.buffers++,S.set(e,r);return}var i=null!==(t=null==r?void 0:r.version)&&void 0!==t?t:0;S.set(e,{version:i,buffers:1,diagnostics:[]}),D({method:"textDocument/didOpen",params:{textDocument:{uri:x(e),languageId:eo(e,s),text:n,version:i}}})},didChange:function(e,n){var t=S.get(e);if(!t)throw Error('Document for "'.concat(e,'" is not open'));t.version++,D({method:"textDocument/didChange",params:{textDocument:{uri:x(e),version:t.version},contentChanges:n}})},didSave:function(e){if(!S.get(e))throw Error('Document for "'.concat(e,'" is not open'));N("textDocumentSync"),D({method:"textDocument/didSave",params:{textDocument:{uri:x(e)}}})},didClose:function(e){var n=S.get(e);if(!n)throw Error('Document for "'.concat(e,'" is not open'));n.buffers--,!(n.buffers>0)&&(D({method:"textDocument/didClose",params:{textDocument:{uri:x(e)}}}),S.delete(e))},cancelRequest:function(e){T(e)}},request:{completion:function(e,n,t,r){return N("completionProvider"),E({options:r,method:"textDocument/completion",params:{textDocument:{uri:x(e)},position:n,context:t}})},resolveCompletionItem:function(e){if(!N("completionProvider").resolveProvider)throw Error("LSP Server does not support resolving completion items");return E({method:"completionItem/resolve",params:e})},signatureHelp:function(e,n,t){return E({options:t,method:"textDocument/signatureHelp",params:{textDocument:{uri:x(e)},position:n}})},hover:function(e,n,t){return E({options:t,method:"textDocument/hover",params:{textDocument:{uri:x(e)},position:n}})},codeActions:function(e,n,t,r){var a=S.get(e);if(!a)throw Error("Document for path ".concat(e," is not open."));var l=a.diagnostics.filter(function(e){return(0,Z.Kk)(e.range,n)});return E({method:"textDocument/codeAction",params:{textDocument:{uri:x(e)},range:n,context:(0,o._)((0,i._)({},r),{diagnostics:l})},options:t})},resolveCodeAction:function(e){return E({method:"codeAction/resolve",params:e})},executeCommand:function(e,n){return E({method:"workspace/executeCommand",params:{command:e,arguments:n}})},format:function(e,n){return N("documentFormattingProvider"),E({method:"textDocument/formatting",params:{textDocument:{uri:x(e)},options:n}})},formatRange:function(e,n,t){return N("documentRangeFormattingProvider"),E({method:"textDocument/rangeFormatting",params:{textDocument:{uri:x(e)},range:n,options:t}})},findDefinitions:function(e,n,t){var a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,r._)(function(){var r,s;return(0,l.YH)(this,function(l){switch(l.label){case 0:return N("definitionProvider"),[4,E({options:t,method:"textDocument/definition",params:{textDocument:{uri:x(e)},position:n}})];case 1:if(!1!==(r=l.sent()).cancelled)return[2,r];return(s=r.result)&&a&&(s=O(Array.isArray(s)?s:[s])),[2,(0,o._)((0,i._)({},r),{result:s})]}})})()},findTypeDefinitions:function(e,n,t){var a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,r._)(function(){var r,s;return(0,l.YH)(this,function(l){switch(l.label){case 0:return N("typeDefinitionProvider"),[4,E({options:t,method:"textDocument/typeDefinition",params:{textDocument:{uri:x(e)},position:n}})];case 1:if(!1!==(r=l.sent()).cancelled)return[2,r];return(s=r.result)&&a&&(s=O(Array.isArray(s)?s:[s])),[2,(0,o._)((0,i._)({},r),{result:s})]}})})()},findImplementations:function(e,n,t){var a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,r._)(function(){var r,s;return(0,l.YH)(this,function(l){switch(l.label){case 0:return N("implementationProvider"),[4,E({options:t,method:"textDocument/implementation",params:{textDocument:{uri:x(e)},position:n}})];case 1:if(!1!==(r=l.sent()).cancelled)return[2,r];return(s=r.result)&&a&&(s=O(Array.isArray(s)?s:[s])),[2,(0,o._)((0,i._)({},r),{result:s})]}})})()},findReferences:function(e,n,t){return N("referencesProvider"),E({method:"textDocument/references",params:{textDocument:{uri:x(e)},position:n,context:t}})},rename:function(e,n,t,r){return N("renameProvider"),E({options:r,method:"textDocument/rename",params:{textDocument:{uri:x(e)},position:n,newName:t}})},prepareRename:function(e,n){var t=N("renameProvider");if("boolean"==typeof t||!t.prepareProvider)throw Error("LSP server does not support prepare rename");return E({method:"textDocument/prepareRename",params:{textDocument:{uri:x(e)},position:n}})},documentHighlights:function(e,n,t){return(0,r._)(function(){return(0,l.YH)(this,function(r){switch(r.label){case 0:return[4,E({options:t,method:"textDocument/documentHighlight",params:{position:n,textDocument:{uri:x(e)}}})];case 1:return[2,r.sent()]}})})()},documentSymbol:function(e,n){return(0,r._)(function(){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:return[4,E({options:n,method:"textDocument/documentSymbol",params:{textDocument:{uri:x(e)}}})];case 1:if(!("result"in(t=r.sent())))return[2,t];if(t.result)return[2,{result:t.result,cancelled:!1}];return[2]}})})()}},semanticTokensFull:function(e,n){if(!N("semanticTokensProvider").full)throw Error("LSP server does not support full semantic tokens");return E({options:n,method:"textDocument/semanticTokens/full",params:{textDocument:{uri:x(e)}}})},semanticTokensDelta:function(e,n,t){var r=N("semanticTokensProvider");if(!(null==r?void 0:r.full)||"object"!==(0,G._)(r.full)||!r.full.delta)throw Error("LSP server does not support delta semantic tokens");return E({options:t,method:"textDocument/semanticTokens/full/delta",params:{textDocument:{uri:x(e)},previousResultId:n}})},semanticTokensRange:function(e,n,t){if(!N("semanticTokensProvider").range)throw Error("LSP server does not support range semantic tokens");return E({options:t,method:"textDocument/semanticTokens/range",params:{textDocument:{uri:x(e)},range:n}})},onDiagnostics:(0,f.gT)(h,"DIAGNOSTICS"),onServerStateChange:(0,f.gT)(h,"SERVER_STATE_CHANGE"),onServerHealthChange:(0,f.gT)(h,"SERVER_HEALTH_CHANGE"),onServerCapabilitiesChange:(0,f.gT)(h,"SERVER_CAPABILITIES_CHANGE"),onRequest:(0,f.gT)(h,"REQUEST"),onResponse:(0,f.gT)(h,"RESPONSE"),onCancelRequest:(0,f.gT)(h,"CANCEL_REQUEST"),onSendNotification:(0,f.gT)(h,"SEND_NOTIFICATION"),onReceiveNotification:(0,f.gT)(h,"RECEIVE_NOTIFICATION"),onSemanticTokensRefresh:(0,f.gT)(h,"SEMANTIC_TOKENS_REFRESH"),shutdown:function(){for(var e in k(er.b.EXITING),S.clear(),Y)T(Number(e));M(),E({method:"shutdown"}).then(function(){D({method:"exit"}),k(er.b.EXITED),h.removeAllListeners()})},isDestroyed:function(){return b},destroy:function(){for(var e in b=!0,S.clear(),Y)T(Number(e));M(),k(er.b.EXITED),h.removeAllListeners()},getServerState:function(){return g},getServerHealth:function(){return w},getServerCapabilities:function(){return y},getServerInfo:function(){return n},getDiagnostics:function(e){var n=S.get(e);if(!n)throw Error("File with path ".concat(e," is not open."));return n.diagnostics},isOpen:function(e){return S.has(e)},documentUriToPath:C,pathToDocumentURI:x,isSupportedFile:a,getLanguageId:function(e){return eo(e,s)},clientId:s,clientName:c}}({connection:{read:function(e){"open"===g.status&&g.onCommand(function(n){n.output&&e(n.output)})},write:function(e){if("open"!==g.status){(null==A?void 0:A.isDestroyed())&&R.vF.error("LSPNix: tried to write to channel but the lsp client is already destroyed");return}g.send({input:e})},didClose:function(){return"open"!==g.status}},clientId:e,clientName:h[e].option.name,isSupportedFile:function(e){return(0,H.fu)(e,y)},applyWorkspaceEdit:(w=(0,r._)(function(e){var n;return(0,l.YH)(this,function(t){return(n=e.edit,A)?[2,(0,z.i)({edit:n,fs:s,client:A})]:[2,{applied:!1}]})}),function(e){return w.apply(this,arguments)}),getWorkspaceConfiguration:function(){if(!(null===(e=y.config)||void 0===e?void 0:e.configurationJson))return null;var e,n=null;try{n=JSON.parse(y.config.configurationJson)}catch(e){R.vF.error("Failed to parse LSP workspace configuration",{configurationJson:y.config.configurationJson})}return n}}),null===(x=y.config)||void 0===x?void 0:x.initializationOptionsJson)try{E=JSON.parse(y.config.initializationOptionsJson)}catch(e){R.vF.error("Failed to parse LSP initializationOptions",{initializationOptionsJson:y.config.initializationOptionsJson})}var c,w,x,k,E,I=A.initialize({pwd:n.workingDirectory,initializationOptions:E}).catch(function(n){if((null==n?void 0:n.message)!=="Initialize request cancelled")throw R.vF.error("LSPNix: failed to initialize client",{lspId:e,appService:"lspnix",originalError:null==n?void 0:n.message}),n});C.push(A.onServerHealthChange(function(n){if(n===er.A.BROKEN&&(R.vF.info("LSP: Server health broken",{lspId:e}),_(),m)){R.vF.info("LSP: retrying after server health broken",{lspId:e}),Y(e,t,D);return}}),A.onServerStateChange((c=(0,r._)(function(n){var t,r,i,o,s,c,f,m,v,w,Y,C,x,k,D;return(0,l.YH)(this,function(l){switch(l.label){case 0:if("open"!==g.status)return R.vF.info("LSPNix: channel wasn't open on state change",{lspId:e,appService:"lspnix",state:n}),_(),[2];if(!A)return R.vF.info("LSPNix: client was null on state change. This should never happen",{lspId:e,appService:"lspnix",state:n}),_(),[2];if(!ec(h[e].option,y))return R.vF.info("LSPNix: configuration changed and received state change",{lspId:e,appService:"lspnix",state:n}),_(),[2];if(n===er.b.EXITED)return R.vF.info("LSP server exited via 'exit' notification",{lspId:e,appService:"lspnix"}),_(),[2];if(n!==er.b.INITIALIZED)return[2];return[4,I];case 1:if(l.sent(),"open"!==g.status)return R.vF.info("LSPNix: channel wasn't open after initialization",{lspId:e,appService:"lspnix"}),_(),[2];S(A),b.delete(e),h[e].client=A,t=!0,r=!1,i=void 0;try{for(o=d[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){if(f=(c=(0,a._)(s.value,2))[0],m=c[1],(0,H.fu)(f,y)){if(v=p.get(f),u||!v||!v.size){w=v?v.add(A):new Set([A]),p.set(f,w),Y=!0,C=!1,x=void 0;try{for(k=m[Symbol.iterator]();!(Y=(D=k.next()).done);Y=!0)(0,D.value)(Array.from(w))}catch(e){C=!0,x=e}finally{try{Y||null==k.return||k.return()}finally{if(C)throw x}}}}}}catch(e){r=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}return[2]}})}),function(e){return c.apply(this,arguments)})))})}}),function(e){_(e.willReconnect)}}),h[e].closeChannel=x,[2]}})})).apply(this,arguments)}function x(e){var n=null==e?void 0:e.languageServers;if(!n||0===n.length){var t=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(h)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;g(l)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return}var s={},c=!0,u=!1,d=void 0;try{for(var p,f=n[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var m=p.value;s[m.id]=m}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}var v=!0,w=!1,b=void 0;try{for(var S,Y=Object.keys(h)[Symbol.iterator]();!(v=(S=Y.next()).done);v=!0){var A=S.value;s[A]||g(A)}}catch(e){w=!0,b=e}finally{try{v||null==Y.return||Y.return()}finally{if(w)throw b}}var C=!0,x=!1,k=void 0;try{for(var _,D=Object.keys(s)[Symbol.iterator]();!(C=(_=D.next()).done);C=!0){var E=_.value,R=h[E],I=s[E];if(!R){y(E,I);continue}ec(R.option,I)||(g(E),y(E,I))}}catch(e){x=!0,k=e}finally{try{C||null==D.return||D.return()}finally{if(x)throw k}}}function k(){return(k=(0,r._)(function(){var e;return(0,l.YH)(this,function(n){try{e=t.configs.current,x(e),t.configs.subscribe(x)}catch(e){R.vF.error("LSP initialization failed: "+e.message)}return[2]})})).apply(this,arguments)}return function(){k.apply(this,arguments)}(),{restart:function(e){if(m){var n=h[e];if(n){if(n.client){var t=!0,r=!1,i=void 0;try{for(var o,l,s=d[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var c=(0,a._)(l.value,2),u=c[0],f=c[1],g=p.get(u);if(g){g.delete(n.client),p.set(u,g);var v=!0,w=!1,y=void 0;try{for(var b,S=f[Symbol.iterator]();!(v=(b=S.next()).done);v=!0)(0,b.value)(Array.from(g))}catch(e){w=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw y}}}}}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}}n.closeChannel(),null===(o=n.client)||void 0===o||o.destroy(),n.client=null,A(e)}}},disable:function(){if(m){m=!1;var e=!0,n=!1,t=void 0;try{for(var r,i=Object.values(h)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.closeChannel(),null===(u=o.client)||void 0===u||u.destroy(),o.client=null;var l=!0,s=!1,c=void 0;try{for(var u,f,g=d[Symbol.iterator]();!(l=(f=g.next()).done);l=!0){var v=(0,a._)(f.value,2),w=v[0],y=v[1];if(p.has(w)){p.delete(w);var b=!0,S=!1,Y=void 0;try{for(var A,C=y[Symbol.iterator]();!(b=(A=C.next()).done);b=!0)(0,A.value)([])}catch(e){S=!0,Y=e}finally{try{b||null==C.return||C.return()}finally{if(S)throw Y}}}}}catch(e){s=!0,c=e}finally{try{l||null==g.return||g.return()}finally{if(s)throw c}}}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}}},enable:function(){if(!m){m=!0;var e=!0,n=!1,t=void 0;try{for(var r,i=Object.keys(h)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;A(o)}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}}},onClient:function(e,n){d.has(e)||d.set(e,[]),null===(s=d.get(e))||void 0===s||s.push(n);var t=!1,r=[],i=p.get(e);if(i&&i.size)r.push.apply(r,(0,_._)(Array.from(i)));else{var o=!0,a=!1,l=void 0;try{for(var s,c,f=Object.values(h)[Symbol.iterator]();!(o=(c=f.next()).done);o=!0){var m=c.value;if((0,H.fu)(e,m.option)&&m.client&&(r.push(m.client),!u))break}}catch(e){a=!0,l=e}finally{try{o||null==f.return||f.return()}finally{if(a)throw l}}}return Promise.resolve().then(function(){!t&&r.length&&n(r)}),function(){t=!0;var r,i=null!==(r=d.get(e))&&void 0!==r?r:[];d.set(e,i.filter(function(e){return e!==n}))}}}}({container:ei,toolchain:eI,fs:ed,enableMultipleLSPClientsPerFile:void 0!==P&&P}),eG=(0,O.A)({container:ei,fs:ed}),eV=function(e){var n,t,i=e.container,o=e.nixService,a=e.toolchain;function s(e){return c.apply(this,arguments)}function c(){return(c=(0,r._)(function(e){return(0,l.YH)(this,function(n){switch(n.label){case 0:if(e&&(t=void 0),!t){var i;t=new Promise((i=(0,r._)(function(e){var n,t;return(0,l.YH)(this,function(r){switch(r.label){case 0:return[4,o.listPackages()];case 1:if(null==(t=r.sent())?void 0:null===(n=t.packages)||void 0===n?void 0:n.some(function(e){return e.name.startsWith("pkgs.postgresql")}))return[3,3];return[4,o.addPackages(["pkgs.postgresql"])];case 2:return r.sent(),e(),[3,4];case 3:e(),r.label=4;case 4:return[2]}})}),function(e){return i.apply(this,arguments)}))}return[4,t];case 1:return n.sent(),[2]}})})).apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return(d=(0,r._)(function(e){return(0,l.YH)(this,function(n){if(!a)return[2,s(e)];if(e&&(t=void 0),!t){var i;t=new Promise((i=(0,r._)(function(e){var n,t;return(0,l.YH)(this,function(r){switch(r.label){case 0:if(null==(t=a.modules)?void 0:null===(n=t.current)||void 0===n?void 0:n.some(function(e){return e.id.startsWith("postgresql")}))return[3,2];return[4,a.addModule("postgresql-16")];case 1:return r.sent(),e(),[3,3];case 2:e(),r.label=3;case 3:return[2]}})}),function(e){return i.apply(this,arguments)}))}return[2]})})).apply(this,arguments)}return e.useNixmodule,{ensureNixPsqlPackageInstalled:s,ensureNixPsqlModuleInstalled:u,run:(n=(0,r._)(function(e){var n,t,r,o,a,s,c,d,p,f,h,m,g;return(0,l.YH)(this,function(l){switch(l.label){case 0:return n=e.query,t=e.connectionString,[4,u()];case 1:l.sent(),r=(0,Y.A)({container:i}),o=[],a=null,s=new S.e(function(e){return o.push(e)}),c=null,d=!1,p=new Promise(function(e){var n=r.onStateChanged(function(t){var r=t.state,i=t.stderrBuffer;if(r===w.api.State.Running){d=!0;return}d&&(c=i,n(),e())})}),r.onOutput(function(e){try{s.process(e)}catch(n){a||(a=n,v.Cp(n,function(n){return n.setExtra("chunk",e)}))}}),l.label=2;case 2:return l.trys.push([2,,5,6]),[4,r.request({args:["psql",t,"--csv","--command",n],splitStderr:!0})];case 3:return f=l.sent(),[4,p];case 4:return l.sent(),f.error&&!c&&(c=f.error),s.flush(),[3,6];case 5:return r.dispose(),[7];case 6:if(c)return[2,{columns:s.headers(),rows:o,error:c}];if(a)return h=a.message,[2,{columns:null!==(m=s.headers())&&void 0!==m?m:[],rows:o,error:h}];return[2,{columns:null!==(g=s.headers())&&void 0!==g?g:[],rows:o,error:null}]}})}),function(e){return n.apply(this,arguments)})}}({container:ei,nixService:e_,toolchain:eI,useNixmodule:ee}),ej=(0,eD.A)({container:ei}),{presence:eb,packager:eF,container:ei,fs:ed,runner:ez,debuggest:eB,dotReplit:eS,nixService:e_,lspnix:eW,git:eG,psql:eV,userEvents:ea,replspaceApi:eT,toolchain:eI,ports:eH,secrets:ej});return null==eZ||eZ.span.end(),m(eq),function(){m(null),setTimeout(function(){eq.container.destroy()},500)}},[e]),t}},65888:(e,n,t)=>{"use strict";t.d(n,{Sl:()=>p,aT:()=>f,r8:()=>c});var r=t(83846),i=t(21462),o=t(35992),a=t(68209),l=t(90001),s=t(6680);function c(){var e=(0,a.HJ)({open:!1,overlayed:!1,width:0}),n=(0,l.A)(function(n){e.set((0,o.jM)(e.current,function(e){var t=Math.min(n.width,240);e.overlayed=n.width<500+t,e.width=t}))}),t=(0,i.useCallback)(function(n){return e.set((0,o.jM)(e.current,function(e){e.open=null!=n?n:!e.open}))},[e]),r=(0,i.useCallback)(function(){var n=e.current,r=n.open,i=n.overlayed;r&&i&&t(!1)},[e,t]);return{state:e,setSidebarContainerEl:n,toggleSidebar:t,closeIfNeeded:r}}var u=(0,t(22498).v)(["sidebarTransform","sidebarWidth","sidebarHeight","paddingLeft","sidebarOpacity","sidebarPointerEvents","sidebarBorder","sidebarBlanketPointerEvents","sidebarBlanketOpacity"]),d=u.cssVars,p=u.styleTokens;function f(e){var n,t,i="calc(100% - ".concat(s.LU.space16,")"),o="translate(".concat(s.LU.space8,", ").concat(s.LU.space8,")");return e.open?(n={},(0,r._)(n,d.paddingLeft,e.overlayed?"0":e.width+6+"px"),(0,r._)(n,d.sidebarWidth,e.width+"px"),(0,r._)(n,d.sidebarOpacity,"1"),(0,r._)(n,d.sidebarBlanketOpacity,e.overlayed?"1":"0"),(0,r._)(n,d.sidebarBlanketPointerEvents,e.overlayed?"all":"none"),(0,r._)(n,d.sidebarPointerEvents,"all"),(0,r._)(n,d.sidebarTransform,o),(0,r._)(n,d.sidebarHeight,i),n):(t={},(0,r._)(t,d.paddingLeft,"0"),(0,r._)(t,d.sidebarWidth,e.width+"px"),(0,r._)(t,d.sidebarOpacity,"0"),(0,r._)(t,d.sidebarBlanketOpacity,"0"),(0,r._)(t,d.sidebarBlanketPointerEvents,"none"),(0,r._)(t,d.sidebarPointerEvents,"none"),(0,r._)(t,d.sidebarTransform,o),(0,r._)(t,d.sidebarHeight,i),t)}},65983:(e,n,t)=>{"use strict";t.d(n,{Ai:()=>p,Ot:()=>h,PY:()=>s,UK:()=>f,ob:()=>d,uB:()=>c});var r=t(12694),i=t(21462),o=t(44370),a=t(69338),l=t(50140);function s(){return(0,r._)((0,i.useState)(function(){return(0,o.y$)()}),1)[0]}var c=(0,i.createContext)(null);function u(){var e=(0,i.useContext)(c);if(!e)throw Error("Expected store in context");return e}var d=function(e){return(0,a.Xr)(e,{store:u()})},p=(0,o.eU)(null);function f(){return(0,a.md)(p,{store:u()})}function h(){return(0,l.yF)((0,i.useCallback)(function(e){return e(p)},[p]),{store:u()})}},65995:(e,n,t)=>{"use strict";t.d(n,{R:()=>I,y:()=>T});var r,i,o=t(83846),a=t(12694),l=t(1889),s=t(21462),c=t(81962),u=t(68209),d=t(2960),p=t(38687),f=t(68221),h=t(76893),m=t(79891),g=t(24491),v=t(55343),w=t(6680),y=t(61234),b=t(47258),S=t(22498),Y=t(43974),A=t(2527),C=t(40043),x=t(35869),k=t(76346),_=t(44144),D=(0,S.v)(["scrollToBottomTransform","opacity","overflowX","overflowY","flexDirection","buttonPx","buttonTop","buttonLeft","buttonBottom","buttonBorderRadius","buttonHeight","buttonWidth","buttonRight","scrollBehavior","scrollSnapType","padding","firstChildMargin","scrollHeight","scrollWidth","scrollTop","scrollHeight","clientHeight","trackPointerEvents","trackOpacity","trackWidth","trackTranstionDelay","trackHeight","trackPointerEvents","thumbWidth","thumbHeight","thumbTransform","thumbUIWidth"]),E=D.cssVars,R=D.styleTokens,I={height:R.scrollHeight,width:R.scrollWidth},F=(0,y.x)({root:[Y.wp.position.relative,Y.wp.flex.growAndShrink(1)],scroll:[Y.wp.flex.growAndShrink(1),{padding:R.padding,overflowY:R.overflowY,overflowX:R.overflowX,flexDirection:R.flexDirection,scrollBehavior:R.scrollBehavior,scrollSnapType:R.scrollSnapType,"&.scrollbar-hidden::-webkit-scrollbar":{display:"none"},overflow:"scroll",scrollbarWidth:"none"}],content:[Y.wp.flex.grow(1),{margin:R.firstChildMargin,flexDirection:R.flexDirection}],button:[Y.wp.reset.button,b.b.filledAndOutlined,Y.wp.position.absolute,Y.wp.align.center,Y.wp.rowWithGap(4),Y.wp.shadow(1),Y.wp.justify.center,{paddingRight:R.buttonPx,paddingLeft:R.buttonPx,top:R.buttonTop,bottom:R.buttonBottom,right:R.buttonRight,left:R.buttonLeft,borderRadius:R.buttonBorderRadius,height:R.buttonHeight,width:R.buttonWidth,opacity:"var(".concat(E.opacity,", 0)"),transform:R.scrollToBottomTransform,transitionProperty:"transform, opacity",transitionDuration:"300ms",transitionTimingFunction:"cubic-bezier(.4,1.60,.70,.8)"}]});function T(e){var n,t=e.children,r=e.snappiness,i=e.ramp,h=e.scrollerRef,g=e.shouldAutoScrollRef,w=e.scrollCache,y=e.scrollCacheKey,b=e.isHorizontal,S=e.padding,Y=e.alignToEnd,D=e.hideScrollbar,R=e.autoScrollBehavior,I=e.buttonOffset,T=void 0===I?0:I,P=function(e){var n,t,r,i,o,l,f,h,m,g,w,y,b,S,Y,A,C,x,k,_,D,E,R=e.snappiness,I=e.ramp,F=e.shouldAutoScrollRef,T=e.scrollCache,P=e.scrollCacheKey,L=e.isHorizontal,U=e.autoScrollBehavior,N=(0,u.HJ)(!1),O=(0,a._)((0,s.useState)(null),2),M=O[0],B=O[1],H=(0,a._)((0,s.useState)(null),2),z=H[0],W=H[1],G=(0,a._)((0,s.useState)(null),2),V=G[0],j=G[1],Z=(0,d.A)(T),q=(t=(n={scrollEl:z,isHorizontal:L,showButton:N,shouldAutoScrollRef:F}).scrollEl,r=n.isHorizontal,i=n.showButton,o=n.shouldAutoScrollRef,l=(0,u.HJ)({scrollTop:0,scrollHeight:0,clientHeight:0,scrollLeft:0,scrollWidth:0,clientWidth:0}),f=(0,u.HJ)("idle"),h=(0,u.HJ)(!1),(0,s.useEffect)(function(){var e=function(){n&&clearTimeout(n),!a&&(a=!0,requestAnimationFrame(function(){if(a=!1,t){var e=t.scrollWidth,s=t.scrollLeft,c=t.clientWidth,u=t.scrollHeight,d=t.scrollTop,p=t.clientHeight;r?f.set(l.current.scrollLeft>=s?"backwards":"forwards"):f.set(l.current.scrollTop>=d?"backwards":"forwards"),l.set({scrollHeight:u,scrollTop:d,clientHeight:p,scrollWidth:e,scrollLeft:s,clientWidth:c});var m=r?e-(s+c):u-(d+p);h.set(m<24),h.current&&!1===o.current&&(o.current=!0),n=setTimeout(function(){f.set("idle"),i.set(!h.current)},200)}}))};if(t){var n=null,a=!1;return e(),t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e),n&&clearTimeout(n)}}},[t,r,i,l,f,h,o]),{measurements:l,scrollDirection:f,isNearEnd:h}),K=q.measurements,$=q.scrollDirection,J=q.isNearEnd,Q=(m=(0,u.HJ)({width:0,height:0}),(0,s.useEffect)(function(){if(z){var e=null;return"undefined"!=typeof ResizeObserver&&(e=new ResizeObserver(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;a.target===z&&m.set({width:Math.round(a.contentRect.width),height:Math.round(a.contentRect.height)})}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}})).observe(z),function(){null==e||e.disconnect()}}},[z,m]),{scrollSize:m}).scrollSize,X=(w=(g={snappiness:R,ramp:I,shouldAutoScrollRef:F,autoScrollBehavior:U,isHorizontal:L,anchorEl:M,scrollEl:z,contentEl:V}).snappiness,y=g.ramp,b=g.shouldAutoScrollRef,S=g.autoScrollBehavior,Y=g.isHorizontal,A=g.anchorEl,C=g.scrollEl,x=g.contentEl,_=(k=(0,a._)((0,s.useState)(!1),2))[0],D=k[1],E=(0,s.useRef)(S),(0,s.useEffect)(function(){if(A&&C&&x){var e=0,n=new c.F3(function(n,t){if(e+=n,!b.current)return e=0,D(!1),t();if(Y){var r,i=C.scrollLeft;r=Math.max(Math.min(A.getBoundingClientRect().left-C.getBoundingClientRect().left+i,C.scrollWidth-C.clientWidth),0)}else i=C.scrollTop,r=Math.max(Math.min(A.getBoundingClientRect().top-C.getBoundingClientRect().top+i,C.scrollHeight-C.clientHeight),0);if("instant"===E.current)return e=0,Y?C.scrollLeft=r:C.scrollTop=r,D(!1),t();var o=function(e,n,t,r,i,o){var a=n-e;if(1>=Math.abs(a))return n;var l=1;t<o&&(l=t/o);var s=1-Math.exp(-i*l*r),c=(1-s)*e+s*n;return .5>Math.abs(c-e)?e+.5*Math.sign(a):c}(i,r,e,n,w,y);if(Y?C.scrollLeft=o:C.scrollTop=o,o===r)return e=0,D(!1),t();D(!0)}),t=new ResizeObserver(function(){b.current&&n.start()});return t.observe(A),t.observe(C),t.observe(x),b.current&&n.start(),function(){n.stop(),t.disconnect(),D(!1)}}},[w,y,b,Y,A,C,x]),{autoScrolling:_}).autoScrolling;return(0,s.useEffect)(function(){if(M&&z){if(X){N.set(!1);return}return(0,p.l)(M,function(){return N.set(!1),function(){N.set(!0)}},{root:z,rootMargin:"100px"})}},[N,X,M,z]),(0,s.useEffect)(function(){if(M&&z){var e=Z.current,n=e.get(P);return n?z.scrollTo(L?n:0,L?0:n):(0,v.A)(M,{behavior:"instant"}),function(){e.set(P,z.scrollTop)}}},[M,z,Z,P,L]),(0,s.useEffect)(function(){if(z)return z.addEventListener("wheel",e),z.addEventListener("pointerdown",n),z.addEventListener("pointerup",t),function(){z.removeEventListener("wheel",e),z.removeEventListener("pointerdown",n),z.removeEventListener("pointerup",t)};function e(e){if((L?e.deltaX:e.deltaY)<0){F.current=!1;return}}function n(){F.current=!1}function t(){J.current&&(F.current=!0)}},[z,F,L,J]),{showButton:N,anchorRef:B,scrollRef:W,scrollEl:z,contentRef:j,scrollToLatest:function(){M&&(0,v.A)(M,{behavior:"smooth"})},scrollSize:Q,measurements:K,scrollDirection:$,autoScrolling:X}}({snappiness:void 0===r?16:r,ramp:void 0===i?1:i,shouldAutoScrollRef:g,scrollCache:w,scrollCacheKey:y,isHorizontal:b,autoScrollBehavior:void 0===R?"instant":R}),U=P.showButton,N=P.anchorRef,O=P.scrollRef,M=P.contentRef,B=P.scrollToLatest,H=P.scrollSize,z=P.measurements,W=P.scrollEl,G=P.scrollDirection,V=P.autoScrolling,j=(0,s.useRef)(null),Z=(0,s.useRef)(null);(0,m.d)(Z,H,function(e){var n;return n={},(0,o._)(n,E.scrollHeight,e.height+"px"),(0,o._)(n,E.scrollWidth,e.width+"px"),n}),(0,m.d)(j,U,function(e){var n;return n={},(0,o._)(n,E.scrollToBottomTransform,b?"translate(".concat(16*!e-T,"px, -50%) scaleX(").concat(e?1:.25,")"):"translate(-50%, ".concat(16*!e-T,"px) scaleX(").concat(e?1:.25,")")),(0,o._)(n,E.opacity,e?"1":"0"),n},[b,T]);var q="0";Y&&(q=b?"0 0 0 auto":"auto 0 0 0");var K=(0,s.useCallback)(function(e){(0,f.P)(O,h)(e)},[O,h]);return(0,l.FD)(x.S,{innerRef:Z,css:F.root,style:(n={},(0,o._)(n,E.flexDirection,b?"row":"column"),(0,o._)(n,E.overflowY,b?"hidden":"auto"),(0,o._)(n,E.overflowX,b?"auto":"hidden"),(0,o._)(n,E.buttonBottom,b?"auto":"8px"),(0,o._)(n,E.buttonLeft,b?"auto":"50%"),(0,o._)(n,E.buttonRight,b?"4px":"auto"),(0,o._)(n,E.buttonTop,b?"50%":"auto"),(0,o._)(n,E.buttonHeight,b?"44px":"28px"),(0,o._)(n,E.buttonWidth,b?"44px":"auto"),(0,o._)(n,E.buttonBorderRadius,b?"44px":"16px"),(0,o._)(n,E.buttonPx,b?"12px":"6px"),(0,o._)(n,E.scrollBehavior,b&&!V?"smooth":"auto"),(0,o._)(n,E.scrollSnapType,b&&!V?"x mandatory":"none"),(0,o._)(n,E.padding,null!=S?S:"0"),(0,o._)(n,E.firstChildMargin,q),n),children:[(0,l.FD)(x.S,{css:F.scroll,innerRef:K,className:D?"scrollbar-hidden":void 0,children:[(0,l.Y)(x.S,{css:F.content,innerRef:M,style:b?{height:"100%"}:void 0,children:t}),(0,l.Y)(x.S,{innerRef:N}),W&&!D?(0,l.Y)(L,{shouldAutoScrollRef:g,scrollDirection:G,scrollEl:W,measurements:z}):null]}),(0,l.Y)(A.ui,{innerRef:j,css:F.button,elevated:!0,tag:"button",onClick:B,children:b?(0,l.Y)(_.A,{size:24}):(0,l.FD)(l.FK,{children:[(0,l.Y)(k.A,{size:12}),(0,l.Y)(C.EY,{variant:"small",children:"Scroll to latest"})]})})]})}var P=(0,y.x)({root:[(i={position:"absolute",width:R.trackWidth,height:R.trackHeight,opacity:R.trackOpacity,right:0,top:0,transition:"opacity 300ms",transitionDelay:R.trackTranstionDelay},(0,o._)(i,E.trackTranstionDelay,"600ms"),(0,o._)(i,E.thumbUIWidth,"40%"),(0,o._)(i,"pointerEvents",R.trackPointerEvents),(0,o._)(i,"&:hover, &:active",(r={},(0,o._)(r,E.trackTranstionDelay,"0ms"),(0,o._)(r,E.trackOpacity,"1 !important"),(0,o._)(r,E.trackPointerEvents,"auto !important"),(0,o._)(r,E.thumbUIWidth,"70%"),r)),i)],thumb:[Y.wp.position.absolute,Y.wp.py(4),Y.wp.px(2),Y.wp.align.end,{top:0,left:0,height:R.thumbHeight,transform:R.thumbTransform,width:R.thumbWidth,opacity:.5,"&:active":{opacity:.8}}],thumbUI:[{backgroundColor:w.LU.foregroundDimmest,transition:"width 200ms",width:R.thumbUIWidth},Y.wp.height("100%"),Y.wp.borderRadius(8)]});function L(e){var n=e.measurements,t=e.scrollDirection,r=e.scrollEl,i=e.shouldAutoScrollRef,a=(0,s.useRef)(null),c=(0,s.useRef)(!1),u=(0,s.useRef)(null),d=(0,s.useRef)(null),p=(0,s.useCallback)(function(){u.current&&clearTimeout(u.current),d.current&&clearTimeout(d.current)},[]),f=(0,s.useCallback)(function(){p(),!c.current&&(u.current=setTimeout(function(){(0,g.U)(a,(0,o._)({},E.trackOpacity,"0"))},600),d.current=setTimeout(function(){(0,g.U)(a,(0,o._)({},E.trackPointerEvents,"none"))},1200))},[p]);(0,s.useEffect)(function(){var e=function(e){var n;if("idle"===e){f();return}p(),(0,g.U)(a,(n={},(0,o._)(n,E.trackOpacity,"1"),(0,o._)(n,E.trackPointerEvents,"auto"),n))};e(t.current);var n=t.subscribe(e);return function(){n(),p()}},[t,f,p]),(0,m.d)(a,n,function(e){var n,t=e.clientHeight,r=e.clientHeight/e.scrollHeight*t,i=e.scrollHeight-e.clientHeight,a=i>0?e.scrollTop/i*(t-r):0,l=e.clientHeight>=e.scrollHeight?0:16;return n={},(0,o._)(n,E.trackWidth,l+"px"),(0,o._)(n,E.trackHeight,t+"px"),(0,o._)(n,E.thumbWidth,l+"px"),(0,o._)(n,E.thumbHeight,r+"px"),(0,o._)(n,E.thumbTransform,"translate(0, ".concat(a,"px)")),n});var v=(0,s.useCallback)(function(e){var t=0;i.current=!1;var o=!1;(0,h.j)(e,{start:function(){t=r.scrollTop},move:function(e){var i=e.delta;!o&&(o=!0,requestAnimationFrame(function(){o=!1;var e=n.current,a=e.clientHeight,l=e.scrollHeight,s=i.y/a;r.scrollTop=t+l*s}))}})},[r,n,i]),w=(0,s.useRef)(!1),y=(0,s.useCallback)(function(e){if(e.target===e.currentTarget){var t=e.currentTarget.getBoundingClientRect(),i=(e.clientY-t.y)/t.height;r.scrollTop=n.current.scrollHeight*i}},[r,n]),b=(0,s.useCallback)(function(e){e.deltaY<0&&(i.current=!1),!w.current&&(w.current=!0,requestAnimationFrame(function(){w.current=!1,r.scrollTop=r.scrollTop+e.deltaY}))},[r,i]);return(0,l.Y)(x.S,{innerRef:a,css:P.root,onMouseEnter:function(){c.current=!0,p()},onMouseLeave:function(){c.current=!1,f()},onWheel:b,onClick:y,children:(0,l.Y)(x.S,{css:P.thumb,onPointerDown:v,children:(0,l.Y)(x.S,{css:P.thumbUI})})})}},66151:(e,n,t)=>{"use strict";t.d(n,{M:()=>l});var r=t(72004),i=t(26496),o=t(73978),a=t(96842);function l(){(0,i.zv)("agent-state-changed",function(e){var n,t=null===(n=e.state.reason)||void 0===n?void 0:n.$kind;if(t){var r=new Map([["userPaused","user_paused"],["planConcluded","plan_concluded"],["waitingOnPlanApproval","waiting_on_plan_approval"],["waitingOnUserResponse","waiting_on_user_input"],["rateLimited","quota_reached"],["error","agent_error_encountered"],["stepLimitExceeded","step_limit_exceeded"]]).get(t);r&&(0,o.pI)({action:r,sessionId:e.sessionId})}});var e=(0,a.F)()?"starter":void 0;(0,i.zv)("received-completed-event",function(n){var t=n.event.contents.contents;if((0,r.VFn)(t,"agentTimelineEventContents")){var i=n.event.sessionId,a=t.agentTimelineEventContents,l=a.toolData;switch(a.toolName){case"propose_new_mvp_plan":return(0,o.pI)({action:"first_agent_message_received",sessionId:i,replOwnerPlanName:e});case"mark_current_step_as_succeeded":return(0,o.pI)({action:"step_completed",sessionId:i,replOwnerPlanName:e});case"mark_current_step_as_failed":return(0,o.pI)({action:"step_failed",sessionId:i,replOwnerPlanName:e})}if(l)switch(l.$kind){case"commitData":return(0,o.pI)({action:"checkpoint_created",sessionId:i,freeCheckpoint:l.commitData.billingRate===r.pSr.ZERO_RATED,replOwnerPlanName:e});case"agentPlanStepBegin":var s=l.agentPlanStepBegin.planStep,c=s.id,u=s.name,d=s.blueprints;return(0,o.pI)({action:"step_started",stepId:c,stepName:u,stepBlueprints:d,sessionId:i,replOwnerPlanName:e});case"blueprintsSetup":var p=l.blueprintsSetup.blueprintData;return(0,o.pI)({action:"blueprints_setup",stepBlueprints:p.map(function(e){return e.name}),sessionId:i,replOwnerPlanName:e})}}})}},66199:(e,n,t)=>{"use strict";t.d(n,{j:()=>l,k:()=>a});var r=t(17844),i=t(93629),o=t(86105),a=function(e,n){var t=new Map;if(e){var a=!0,l=!1,s=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;if("attachments"===d.path&&(null===(p=d.formType)||void 0===p?void 0:p.$kind)==="files"){var p,f,h=t.get("attachments");if((null==h?void 0:null===(f=h.formType)||void 0===f?void 0:f.$kind)==="files"){var m=(0,i._)((0,r._)({},d),{formType:(0,i._)((0,r._)({},d.formType),{files:(0,i._)((0,r._)({},d.formType.files),{files:(0,o._)(h.formType.files.files).concat((0,o._)(d.formType.files.files))})})});t.set(d.path,m);continue}}t.set(d.path,d)}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}}var g=!0,v=!1,w=void 0;try{for(var y,b=n[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var S=y.value;if("attachments"===S.path&&(null===(Y=S.formType)||void 0===Y?void 0:Y.$kind)==="files"){var Y,A,C=t.get("attachments");if((null==C?void 0:null===(A=C.formType)||void 0===A?void 0:A.$kind)==="files"){var x=(0,i._)((0,r._)({},S),{formType:(0,i._)((0,r._)({},S.formType),{files:(0,i._)((0,r._)({},S.formType.files),{files:(0,o._)(C.formType.files.files).concat((0,o._)(S.formType.files.files))})})});t.set(S.path,x);continue}}t.set(S.path,S)}}catch(e){v=!0,w=e}finally{try{g||null==b.return||b.return()}finally{if(v)throw w}}return Array.from(t.values())},l=function(e){var n=e.attachments,t=e.attachedUrls;return(0,o._)(n.filter(function(e){return!!e.publicUrl}).map(function(e){return{path:"attachments",formType:{files:{files:[{name:e.file.name,url:e.publicUrl,mimeType:e.file.type}]},$kind:"files"}}})).concat((0,o._)(t.map(function(e){return{path:"attachedUrls",formType:{files:{files:[{name:e.url,url:e.url,mimeType:"url/".concat(e.intent)}]},$kind:"files"}}})))}},66705:(e,n,t)=>{"use strict";t.d(n,{RG:()=>C,_W:()=>A,rS:()=>D,wo:()=>k});var r=t(1889),i=t(21462),o=t(72004),a=t(26496),l=t(80865),s=t(67337),c=t(90122),u=t(61280),d=t(76243),p=t(40919),f=t(9487),h=t(59527),m=t(6680),g=t(61234),v=t(43974),w=t(2527),y=t(88654),b=t(37407),S=t(35869),Y=(0,g.x)({userMessage:[v.wp.pb(16),v.wp.justify.end,v.wp.pl(32)],userMessageMain:[v.wp.flex.shrink(1),v.wp.align.end,v.wp.colWithGap(6),v.wp.maxWidth(400)],userMessageSurface:[v.wp.borderRadius(4),v.wp.px(8),v.wp.py(6),v.wp.colorMixBg(m.LU.accentPrimaryDefault,"transparent",.4),v.wp.maxWidth("100%"),{opacity:1,'&[data-acknowledged="false"]':{opacity:.6,backgroundColor:m.LU.accentPrimaryDimmer}}],userMessageAttachments:[v.wp.maxWidth("100%")],avatar:[v.wp.pt(6),v.wp.position.relative],timestamp:[v.wp.px(8),v.wp.rowWithGap(4)]});function A(e){var n=e.userId,t=e.created,i=e.children,o=(0,l._P)({controlName:"flag-agent-v2-web-ui"});return(0,r.FD)(S.S,{css:Y.userMessage,row:!0,gap:8,"data-event-type":"user-message","data-cy":"user-message",style:{paddingTop:16*!!o},children:[(0,r.FD)(S.S,{css:Y.userMessageMain,children:[i,t?(0,r.Y)(S.S,{css:Y.timestamp,children:(0,r.Y)(S.S,{children:(0,r.Y)(y.Dc,{live:!0,date:t,textVariant:"small",textColor:"dimmest",textTransform:"first-letter-capitalized"})})}):null]}),(0,r.Y)(S.S,{css:Y.avatar,children:(0,r.Y)(h.H,{id:n,showAvatarOnly:!0})})]})}function C(e){var n=e.userId,t=e.message,i=e.attachments,o=e.attachedUrls,a=e.created,l=e.acknowledged,s=e.readFile,c=e.targetedElement;return(0,r.FD)(A,{userId:n,created:a,children:[s?(0,r.Y)(x,{attachments:i,attachedUrls:o,readFile:s}):null,(0,r.Y)(k,{message:t,acknowledged:l,targetedElement:c})]})}function x(e){var n=e.attachments,t=e.attachedUrls,i=e.readFile;return 0===n.length&&0===t.length?null:(0,r.Y)(S.S,{css:Y.userMessageAttachments,children:(0,r.Y)(c.A,{fileAttachments:n.map(function(e){return(0,r.Y)(u.m1,{readFile:i,attachment:e,getAttachmentTypeDisclaimer:(0,d.F)({aiName:(0,a.Nn)({capitalizeFirstChar:!0})})},e.path)})})})}function k(e){var n=e.message,t=e.acknowledged,i=e.targetedElement;return n?(0,r.Y)(b.m_,{tooltip:"The agent is wrapping up its current step, and will respond shortly",isDisabled:t,children:(0,r.FD)(w.ui,{css:Y.userMessageSurface,elevated:!0,"data-acknowledged":t,children:[(0,r.Y)(p.d2,{text:n,messageState:o.qOk.COMPLETE}),i?(0,r.Y)(f.l,{targetedElement:i}):null]})}):null}function _(e){if(!e||e.sender.type!==o.utd.USER)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="messageEventContents")return null;var t=n.messageEventContents.agentAction.optionType;return{message:n.messageEventContents.content,uploadedFiles:n.messageEventContents.uploadedFiles,attachedUrls:n.messageEventContents.attachedUrls,userId:Number(e.sender.id),parentEventId:e.parentEventId,sessionId:e.sessionId,action:t,created:e.created,targetedElement:n.messageEventContents.targetedElement}}var D=(0,i.memo)(function(e){var n=e.eventId,t=(0,a.Al)(n,_),i=(0,a.xr)(n),o=(0,s.A)().fs;return t?(0,r.Y)(C,{readFile:o.readFile,userId:t.userId,message:t.message,attachments:t.uploadedFiles,attachedUrls:t.attachedUrls,created:t.created,acknowledged:i,targetedElement:t.targetedElement}):null})},67002:(e,n,t)=>{"use strict";t.d(n,{Nx:()=>ed,jl:()=>ep,Ay:()=>ef});var r=t(12694),i=t(86105),o=t(1889),a=t(4124),l=t(21462),s=t(7576),c=t.n(s),u=t(34951),d=t(17844),p=t(12584),f=t(41114),h=t(86997),m=t(41140);function g(){var e=(0,p._)(["\n  query MultiplayerManager($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n        authorizations {\n          editPermissions {\n            isAuthorized\n          }\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var v={},w=(0,f.J1)(g(),m._9),y=t(51939),b=t(4399),S=t(317),Y=t(8952),A=t(40043),C=function(e){var n=e.isOpen,t=e.onClose,r=e.onPurchaseComplete;return(0,o.Y)(Y.A,{isOpen:n,onClose:t,type:"purchase",contextualUpsell:(0,o.FD)(o.FK,{children:[(0,o.Y)(A.EY,{variant:"subheadBig",children:"Upgrade for more collaborators"}),(0,o.FD)(A.EY,{multiline:!0,children:["Share your Apps with up to ",y.z$," collaborators with Replit ",S.en]})]}),onPurchaseComplete:r,analyticsContext:{upgrade:{context:"workspace_multiplayer_header"}}})},x=t(96856),k=t(45981),_=t.n(k),D=t(86464),E=t(63892),R=t(6680),I=t(61234),F=t(62493),T=t(43974),P=t(4930),L=t(44885),U=t(35869),N=t(92111),O=t(44144),M=t(85845),B=t(82478),H=t(74406),z=t(65558),W=t(82022),G=function(e){var n=e.isOpen,t=e.onClose,r=(0,N.s)();return(0,l.useEffect)(function(){n&&(0,E.u4)(E.AZ.ORG_UPGRADE_MODAL_VIEWED,{surface:"workspace_multiplayer_header"})},[n]),(0,o.Y)(L.a,{fitContent:!0,centered:!0,maxWidth:400,isOpen:n,onRequestClose:t,noPadding:!0,children:(0,o.FD)(U.S,{css:j.self,children:[(0,o.Y)(U.S,{children:(0,o.FD)(U.S,{gap:2,children:[(0,o.Y)(A.EY,{variant:"subheadBig",children:"Join Teams for more collaborators"}),(0,o.Y)(A.EY,{multiline:!0,children:"Work across Apps with all your teammates"}),(0,o.FD)(U.S,{css:j.price,row:!0,gap:8,children:[(0,o.Y)(A.Y9,{variant:"headerDefault",level:3,css:j.priceText,children:r.Teams.costInCents.monthly?(0,o.Y)(A.Y9,{variant:"headerBig",level:3,css:j.priceText,children:(0,D.b0)(r.Teams.costInCents.monthly)}):(0,o.Y)("div",{css:j.priceLoader})}),(0,o.FD)(U.S,{children:[(0,o.Y)(A.EY,{variant:"small",color:"dimmest",children:"per user"}),(0,o.Y)(A.EY,{variant:"small",color:"dimmest",children:"per month"})]})]}),(0,o.FD)(U.S,{css:j.featureContainer,gap:16,children:[(0,o.Y)(V,{title:"Everything in ".concat(S.en),subtitle:"Unlimited private Apps, advanced AI chat, and more",icon:(0,o.Y)(B.A,{})}),(0,o.Y)(V,{title:"Shared projects and resources",subtitle:"Collaborate with your team in real-time",icon:(0,o.Y)(W.A,{})}),(0,o.Y)(V,{title:"Granular permissions",subtitle:"Manage permssions for each team member",icon:(0,o.Y)(M.A,{})}),(0,o.Y)(V,{title:"Centralized billing",subtitle:"Consolidate all your payments in one place",icon:(0,o.Y)(H.A,{})}),(0,o.Y)(U.S,{children:(0,o.Y)(_(),{href:"/pricing",target:"_blank",onClick:function(){(0,E.u4)(E.AZ.ORG_MORE_FEATURES_CLICKED,{surface:"workspace_multiplayer_header"})},children:(0,o.FD)(U.S,{css:j.viewMore,children:[(0,o.Y)(z.A,{}),(0,o.Y)(A.EY,{variant:"small",color:"dimmer",children:"View More Features"})]})})})]})]})}),(0,o.Y)(P.v,{iconRight:(0,o.Y)(O.A,{}),text:"Continue with ".concat(r.Teams.planName),href:r.Teams.href,onClick:function(){(0,E.u4)(E.AZ.ORG_CONTINUE_UPGRADE_CLICKED,{surface:"workspace_multiplayer_header"})},target:"_blank"})]})})},V=function(e){var n=e.title,t=e.subtitle,r=e.icon;return(0,o.FD)(U.S,{row:!0,gap:8,children:[(0,o.Y)(U.S,{css:j.featureIcon,children:r}),(0,o.FD)(U.S,{css:j.featureText,children:[(0,o.Y)(A.EY,{variant:"text",height:"singleLine",children:n}),t?(0,o.Y)(A.EY,{variant:"small",color:"dimmer",height:"singleLine",children:t}):null]})]})},j=(0,I.x)({priceLoader:[F.S.backgroundPulse(R.LU.backgroundHigher,"transparent"),T.wp.height("100%"),T.wp.width(50)],featureContainer:[T.wp.pt(12)],featureText:[T.wp.flex.grow(1),T.wp.pt(1),T.wp.colWithGap(8)],featureIcon:[T.wp.color.accentPrimaryStronger],price:[T.wp.pt(8)],priceText:[T.wp.fontWeight.normal],self:[T.wp.px(32),T.wp.py(16),T.wp.colWithGap(16),T.wp.backgroundColor.backgroundOverlay,T.wp.borderRadius()],viewMore:[T.wp.color.foregroundDimmest,T.wp.rowWithGap(8),T.wp.align.center,T.wp.cursor.pointer,{fontWeight:200}]}),Z=t(57761),q=t(18063),K=t(37407),$=t(56185),J=function(e){var n=e.modalState,t=e.setModalState,r=(0,x.X)(),i=(0,l.useCallback)(function(){"data"===r.type&&t({type:"open",onUpgradeSuccess:function(){}})},[r,t]);if("loading"===r.type)return(0,o.FD)(U.S,{css:Q.loading,row:!0,gap:4,align:"center",children:[(0,o.Y)($.A,{color:R.LU.foregroundDimmer}),(0,o.Y)(A.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]});if("data"!==r.type)return null;var a=r.collaboratorCount,s=r.collaboratorLimit,c=r.refetch,u=r.isStarterUser?(0,o.Y)(C,{isOpen:"open"===n.type,onClose:function(){return t({type:"closed"})},onPurchaseComplete:function(){"open"===n.type&&n.onUpgradeSuccess(),c()}}):(0,o.Y)(G,{isOpen:"open"===n.type,onClose:function(){return t({type:"closed"})}}),d=Math.max(0,s-a);return(0,o.FD)(U.S,{row:!0,gap:8,children:[(0,o.FD)(U.S,{css:Q.limitsContainer,align:"center",row:!0,gap:8,children:[(0,o.Y)(K.m_,{tooltip:"Your account is limited to ".concat(s," collaborators. Manage your collaborators on the Usage page."),children:(0,o.Y)(q.a,{colorway:"yellow",css:Q.pill,text:"".concat(a," / ").concat(s),onClick:i})}),(0,o.Y)(U.S,{css:Q.measureBarWrapper,onClick:i,children:(0,o.Y)(Z.W,{css:Q.measureBar,total:s,current:a,tooltip:"".concat(d," account collaborators remaining"),backgroundColor:R.LU.yellowDimmer,color:R.LU.yellowDefault})})]}),u]})},Q=(0,I.x)({pill:[T.wp.cursor.pointer,T.wp.borderRadius(4),T.wp.pr(0)],measureBar:[T.wp.height(8),T.wp.width(60)],measureBarWrapper:[T.wp.cursor.default],limitsContainer:[T.wp.borderRadius(4),T.wp.backgroundColor.yellowDimmest,T.wp.pr(8)],loading:[T.wp.flex.grow(1),T.wp.justify.center]}),X=t(75705),ee=t(93415),en=t(84976),et=t(28074),er=t(87736),ei=t(49937),eo=t(93682),ea=t(2527),el=t(81975),es=t(68449),ec=t(20627);function eu(e,n){return n.some(function(n){return n.id===e})}var ed={root:[T.wp.color.foregroundDefault,T.wp.colWithGap(12),T.wp.align.stretch,T.wp.flex.growAndShrink(1),T.wp.px(12)],header:[T.wp.flex.row,T.wp.justify.spaceBetween,T.wp.align.center],header_mobile:[T.wp.px(0)],titleContainer:[T.wp.flex.row,T.wp.rowWithGap(4),T.wp.align.center],limitsContainer:[T.wp.align.center,T.wp.rowWithGap(8)],loading:[T.wp.rowWithGap(4),T.wp.align.center,T.wp.flex.grow(1),T.wp.justify.center],measureBar:[T.wp.height(8),T.wp.width(60)],searchContainer:[T.wp.position.relative,T.wp.maxHeight(32)],userList:[T.wp.flex.column,T.wp.colWithGap(16),T.wp.scrollbar.thin,T.wp.position.relative,T.wp.overflowY("auto"),T.wp.flex.growAndShrink(1),{maxHeight:300,"::-webkit-scrollbar-thumb":[T.wp.backgroundColor.backgroundHighest,T.wp.borderRadius(4)],scrollbarColor:"".concat(R.LU.backgroundDefault," ").concat(R.LU.backgroundHighest)}],userGroup:{root:[T.wp.colWithGap(8)],titleContainer:[T.wp.rowWithGap(4),T.wp.align.center],title:[T.wp.fontWeight.medium]},emptyContainer:[T.wp.position.relative,T.wp.colWithGap(16),T.wp.py(16),T.wp.justify.start,{maxHeight:220}]},ep=function(e){var n=e.title,t=e.count,r=e.color,i=e.tooltip;return(0,o.FD)(U.S,{css:ed.userGroup.titleContainer,children:[(0,o.Y)(el.A,{color:r,size:6}),(0,o.Y)(A.EY,{variant:"small",css:ed.userGroup.title,multiline:!1,children:n}),(0,o.Y)(A.EY,{multiline:!1,variant:"small",color:"dimmest",css:ed.userGroup.title,children:t}),i?(0,o.Y)(K.m_,{tooltip:i,children:(0,o.Y)(ec.A,{})}):null]})};let ef=function(e){var n,t,s=e.replId,p=e.handleUpgradeTriggered,f=(0,a.useRouter)(),m=(0,ee.Po)(f),g=(0,x.X)(),S=(0,X.A)({isMobileApp:m,isTeam:!1,handleUpgradeTriggered:p,replId:s}),Y=S.addOrInviteReplMultiplayer,C=S.loadingAddMutation,k=(0,ei.Q4)(),_=(0,r._)((0,l.useState)({type:"closed"}),2),D=_[0],E=_[1],I=(0,r._)((0,l.useState)(!1),2),F=I[0],T=I[1],P=(n=(0,d._)({},v,{variables:{replId:s},pollInterval:8e3}),h.I(w,n)),L=P.data,N=P.loading,O=(null==L?void 0:L.repl.__typename)==="Repl"?L.repl:null,M=null==L?void 0:L.currentUser,B=(null!==(t=null==O?void 0:O.collaborators)&&void 0!==t?t:[]).reduce(function(e,n){var t=n.user;return(0,i._)(e).concat([t.username])},[]),H=(null==O?void 0:O.authorizations.editPermissions.isAuthorized)||!1,z=!!(O&&!B.length&&!O.multiplayerInvites.length),W=null==O?void 0:O.collaborators.map(function(e){return e.user}).filter(function(e){return e.id!==(null==M?void 0:M.id)}),G=null==W?void 0:W.filter(function(e){return e&&eu(e.id,k)}),V=null==W?void 0:W.filter(function(e){return e&&!eu(e.id,k)}),j=W?W.length:null,q=(0,o.FD)(o.FK,{children:[null===j||(null==M?void 0:M.isSubscribed)?null:(0,o.FD)(o.FK,{children:[(0,o.FD)(A.EY,{variant:"small",color:"dimmest","aria-hidden":!0,multiline:!1,children:[j," / ",y.vF]}),(0,o.Y)(Z.W,{css:ed.measureBar,total:y.vF,current:j,tooltip:"".concat(y.vF-j," free editors remaining")})]}),N||(null==M?void 0:M.isSubscribed)||m?null:(0,o.Y)(er.A,{size:"small",context:"workspace_multiplayer_header",onClickCallback:function(){p&&p(!0)},onCancel:function(){p&&p(!1)}})]});return(0,o.FD)(ea.ui,{background:"default",css:ed.root,children:[(0,o.FD)(o.FK,{children:[(0,o.FD)(U.S,{css:[ed.header,m&&ed.header_mobile],children:[(0,o.Y)(U.S,{css:ed.titleContainer,children:(0,o.Y)(A.EY,{variant:"subheadDefault",multiline:!1,children:"Multiplayers"})}),(0,o.FD)(U.S,{css:ed.limitsContainer,children:[N?(0,o.FD)(U.S,{css:ed.loading,children:[(0,o.Y)($.A,{color:R.LU.foregroundDimmer}),(0,o.Y)(A.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]}):null,"data"===g.type&&g.shouldEnforceMultiplayerLimit?(0,o.Y)(J,{setModalState:E,modalState:D}):q]})]}),H&&B&&O?(0,o.Y)(U.S,{css:ed.searchContainer,children:(0,o.Y)(et.A,{existingUsernames:B,onSubmit:function(e){if(!N||(null==M?void 0:M.isSubscribed)){if(!C){var n=new Set(("data"===g.type?(0,i._)(g.collaboratorsByRepl.values()).map(function(e){return e.users}).flat():[]).map(function(e){return e.username})),t="data"===g.type&&g.shouldEnforceMultiplayerLimit&&g.collaboratorCount>=g.collaboratorLimit&&!n.has(e),r={method:c()(e)?u.LI.Email:u.LI.Username,value:e},o=function(){return Y({variables:{input:{replId:s,target:r,level:u.Hy.Rw}}})};if(t){E({type:"open",onUpgradeSuccess:o});return}o()}}}})}):null,z?(0,o.Y)(U.S,{css:ed.emptyContainer,children:(0,o.Y)(U.S,{children:(0,o.Y)(A.EY,{color:"dimmest",multiline:!1,children:"No one else is here"})})}):(0,o.FD)(ea.ui,{css:ed.userList,children:[(null==G?void 0:G.length)?(0,o.FD)(U.S,{css:ed.userGroup.root,children:[(0,o.Y)(ep,{title:"Online",count:G.length||0,color:R.LU.greenStrongest}),G.map(function(e){return e?(0,o.Y)(en.A,{isPendingInvitation:!1,replId:s,canEditMultiplayers:H,user:e},e.id):null})]}):null,(null==V?void 0:V.length)?(0,o.FD)(U.S,{css:ed.userGroup.root,children:[(0,o.Y)(ep,{title:"Offline",count:V.length||0,color:R.LU.outlineStrongest}),null==V?void 0:V.map(function(e){return e?(0,o.Y)(en.A,{canEditMultiplayers:H,isPendingInvitation:!1,user:e,replId:s},e.id):null})]}):null,(null==O?void 0:O.multiplayerInvites.length)?(0,o.FD)(U.S,{css:ed.userGroup.root,children:[(0,o.Y)(ep,{title:"Pending Invitations",count:(null==O?void 0:O.multiplayerInvites.length)||0,color:R.LU.outlineStrongest}),O.multiplayerInvites.map(function(e){return(0,o.Y)(en.A,{canEditMultiplayers:H,replId:s,isPendingInvitation:!0,email:e.email},e.email)})]}):null]})]}),(null==M?void 0:M.isSubscribed)?(0,o.FD)(o.FK,{children:[(0,o.Y)(U.S,{children:(0,o.Y)(eo.$n,{text:"Refer a friend and earn more credits",iconLeft:(0,o.Y)(es.A,{}),onClick:function(){return T(!0)}})}),(0,o.Y)(b.Z,{isOpen:F,onClose:function(){return T(!1)},trackingContext:"workspace-invite-dialog"})]}):null]})}},67084:(e,n,t)=>{"use strict";t.d(n,{Gp:()=>r.jz,IW:()=>r.IW,_t:()=>i._t,ij:()=>i.jz});var r=t(96693),i=t(67287)},67101:(e,n,t)=>{"use strict";t.d(n,{T:()=>e2});var r=t(12694),i=t(86105),o=t(1889),a=t(21462),l=t(47993),s=t(26496),c=t(68209),u=t(52097),d=t(77739),p=t(93415),f=t(34951),h=t(72004),m=t(16907),g=t(75822),v=t(27906),w=t(40919),y=t(73912),b=t(97715);function S(e){if(!e||e.sender.type!==h.utd.AI)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)==="messageEventContents"){var t,r=(null===(t=n.messageEventContents.agentAction.optionType)||void 0===t?void 0:t.$kind)==="secretRequestAction"?n.messageEventContents.agentAction.optionType.secretRequestAction.secrets:null;return{message:n.messageEventContents.content,state:e.state,sessionId:e.sessionId,requestedSecrets:r,created:e.created}}if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var i=n.agentTimelineEventContents.toolData;if((null==i?void 0:i.$kind)==="messageData"){var o,a=(null===(o=i.messageData.agentAction.optionType)||void 0===o?void 0:o.$kind)==="secretRequestAction"?i.messageData.agentAction.optionType.secretRequestAction.secrets:null;return{message:i.messageData.content,sessionId:e.sessionId,state:e.state,requestedSecrets:a,created:e.created}}return null}var Y=(0,a.memo)(function(e){var n=e.eventId,t=e.addSecretEntries,i=e.removeSecretEntries,l=e.replaceAllExternalSecrets,c=e.isLast,u=e.waitingOnUserInput,d=e.openPane,p=e.showAvatar,h=(0,s.Al)(n,S),g=!!(u&&c),v=(0,s.nY)(n).hasBeenReverted,w=(0,s.D2)(),b=(0,m.A)(),Y=(0,r._)((0,y.WM)(b,l),1)[0],C=(0,a.useCallback)(function(e){return Y({variables:{input:{resourceId:b,resourceType:f.U9.Repl,secrets:e}}})},[Y,b]),x=(0,r._)((0,y.Nz)(b,l),1)[0],k=(0,a.useCallback)(function(e){return x({variables:{input:{resourceId:b,resourceType:f.U9.Repl,ids:e}}})},[x,b]);return!h||v?null:(0,o.Y)(A,{replId:b,sessionId:h.sessionId,isLast:c,requestedSecrets:h.requestedSecrets,highlighted:g,message:h.message,created:h.created,showAvatar:void 0===p||p,openPane:d,updateAgentState:w,addSecretEntries:t,removeSecretEntries:i,linkSecrets:C,unlinkSecrets:k})});function A(e){var n=e.replId,t=e.isLast,r=e.sessionId,i=e.message,l=e.highlighted,s=e.requestedSecrets,c=e.created,u=e.showAvatar,d=e.openPane,p=e.addSecretEntries,f=e.removeSecretEntries,m=e.updateAgentState,y=e.linkSecrets,S=e.unlinkSecrets,Y=(0,a.useCallback)(function(e,n){return d({type:"webview",data:{ports:{path:e,port:n,type:"local"}}})},[d]),A=(0,b.A)({openWebview:Y});return(0,o.FD)(g.e,{highlighted:l,timestamp:c,showAvatar:void 0===u||u,children:[(0,o.Y)(w.d2,{text:i||"…",messageState:h.qOk.COMPLETE,linkComponent:A}),(null==s?void 0:s.length)?(0,o.Y)(v.L,{replId:n,keys:s.map(function(e){return e.key}),addEntries:p,removeEntries:f,onComplete:function(){return m({sessionId:r,runState:h.g32.AGENT_STATE_RUNNING})},sessionId:r,isLast:t,linkSecrets:y,unlinkSecrets:S}):null]})}var C=t(18879),x=t(6680),k=t(61234),_=t(43974),D=t(93682),E=t(40043),R=t(35869),I=t(42795),F=t(54572),T=t(54239);function P(e){return e}var L=(0,k.x)({data:[_.wp.p(4),_.wp.border({direction:"bottom"})]}),U=(0,a.memo)(function(e){var n=e.eventId,t=e.isFirstOfType,i=e.isLastOfType,l=(0,r._)((0,a.useState)(!1),2),c=l[0],u=l[1],d=(0,s.Al)(n,P);return(0,o.FD)(R.S,{title:JSON.stringify(d,null,2),gap:4,align:"center",style:{paddingBottom:16*!!i},children:[t?(0,o.Y)(E.EY,{variant:"small",color:"dimmer",children:"Hidden events (debug only)"}):null,(0,o.Y)(D.$n,{size:"small",variant:"nofill",iconLeft:(0,o.Y)(I.A,{color:x.LU.redDefault}),iconRight:c?(0,o.Y)(T.A,{}):(0,o.Y)(F.A,{}),text:n,onClick:function(){return u(function(e){return!e})}}),c?(0,o.Y)(R.S,{css:L.data,children:(0,o.Y)(C.A,{json:d})}):null]})});function N(e){if(!e)return null;var n,t,r,i,o,a,l,s,c,u=e.contents.contents;if((null==u?void 0:u.$kind)!=="agentAskUserForActionRequest")return null;var d=u.agentAskUserForActionRequest,p=d.request,f=d.message;return(null==p?void 0:p.$kind)!=="nextStepRequest"?null:{message:f,debugEnabled:null!==(o=null===(n=p.nextStepRequest.debugRequest)||void 0===n?void 0:n.enabled)&&void 0!==o&&o,debugSelected:null!==(a=null===(t=p.nextStepRequest.debugRequest)||void 0===t?void 0:t.isSelected)&&void 0!==a&&a,keepWorkingEnabled:null!==(l=null===(r=p.nextStepRequest.keepWorkingRequest)||void 0===r?void 0:r.enabled)&&void 0!==l&&l,keepWorkingSelected:null!==(s=null===(i=p.nextStepRequest.keepWorkingRequest)||void 0===i?void 0:i.isSelected)&&void 0!==s&&s,newFeatureRequests:null!==(c=p.nextStepRequest.newFeatureRequests)&&void 0!==c?c:[],sessionId:e.sessionId}}function O(e){var n=e.message,t=e.waitingOnUserInput;return(0,o.Y)(g.e,{highlighted:t,children:(0,o.FD)(R.S,{gap:16,align:"start",children:[(0,o.Y)(E.EY,{children:n}),(0,o.Y)(R.S,{gap:12,align:"start",children:(0,o.Y)(E.EY,{children:"If everything looks good, I can start working on a new feature"})})]})})}var M=(0,a.memo)(function(e){var n=e.eventId,t=e.disabled,r=e.waitingOnUserInput,i=(0,s.Al)(n,N);return i?(0,o.Y)(O,{disabled:t,waitingOnUserInput:r,message:i.message}):null}),B=t(67337),H=t(66705);function z(e){if(!e)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentAskUserForActionResponse")return null;var t=n.agentAskUserForActionResponse.response;if(!t||"nextStepResponse"!==t.$kind)return null;var r=t.nextStepResponse;if(!r.response)return null;var i=r.response,o=null;switch(i.$kind){case"debugResponse":o="Fix issues";break;case"newFeatureResponse":o=i.newFeatureResponse.featureName;break;default:return null}return{senderUserId:parseInt(e.sender.id,10),message:o}}function W(e){var n=e.message,t=e.userId,r=e.readFile;return(0,o.Y)(H.RG,{userId:t,message:n,created:new Date,acknowledged:!0,attachments:[],attachedUrls:[],readFile:r})}var G=(0,a.memo)(function(e){var n=e.eventId,t=(0,s.Al)(n,z),r=(0,B.A)().fs;return t?(0,o.Y)(W,{message:t.message,userId:t.senderUserId,readFile:r.readFile}):null}),V=t(43464),j=t(28256),Z=t(78293),q=t(2527),K=t(88654),$=t(83846),J=t(17844),Q=t(93629),X=t(17459),ee=t(61239),en=t(22498),et=t(37743),er=t(85788),ei=function(){function e(){var n=this;(0,et._)(this,e),this.isExpandable=new er.N(!1),this.isExpanded=new er.N(!1),this.container=null,this.resizeObserver=null,this.intersectionObserver=null,this.animationFrameId=null,this.setContainer=function(e){if(null===e)return n.disconnect();n.container=e,n.resizeObserver||(n.resizeObserver=new ResizeObserver(function(){return n.scheduleMeasurement()})),n.intersectionObserver||(n.intersectionObserver=new IntersectionObserver(function(e){e.forEach(function(e){var t,r;n.container&&e.isIntersecting&&(n.scheduleMeasurement(),null===(t=n.intersectionObserver)||void 0===t||t.unobserve(e.target),null===(r=n.resizeObserver)||void 0===r||r.observe(n.container))})})),n.intersectionObserver.observe(n.container)},this.toggle=function(){n.isExpanded.set(!n.isExpanded.current)}}var n=e.prototype;return n.scheduleMeasurement=function(){var e=this;null!==this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.animationFrameId=requestAnimationFrame(function(){return e.measureOverflow()})},n.measureOverflow=function(){if(this.container&&!this.isExpanded.current){var e=this.isExpandable.current,n=this.container.scrollHeight>this.container.clientHeight;e!==n&&this.isExpandable.set(n)}},n.disconnect=function(){var e;null!==this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.intersectionObserver&&this.container&&this.intersectionObserver.unobserve(this.container),this.intersectionObserver=null,this.resizeObserver=null},e}(),eo=(0,k.x)({button:[_.wp.reset.button,{fontSize:"inherit",lineHeight:"inherit",color:x.LU.accentPrimaryStronger,cursor:"pointer",background:"linear-gradient(to right, transparent, ".concat(x.LU.surfaceBackground," 20%)"),":hover":{color:x.LU.accentPrimaryStrongest},":active":{color:x.LU.accentPrimaryDefault}}]}),ea=t(25584),el=(0,en.v)(["contentBackgroundColor"]),es=el.styleTokens,ec=el.cssVars,eu=(0,k.x)({root:[_.wp.position.relative,_.wp.overflow("hidden")],button:[_.wp.reset.button,_.wp.viewStyle,_.wp.rowWithGap(2),_.wp.align.start,_.wp.justify.center,_.wp.height(28),{fontSize:x.LU.fontSizeSmall,color:x.LU.accentPrimaryStronger,cursor:"pointer",fontWeight:x.LU.fontWeightMedium,":hover":{color:x.LU.accentPrimaryStrongest},":active":{color:x.LU.accentPrimaryDefault},'&[data-expanded="false"]':[_.wp.align.end,_.wp.position.absolute,_.wp.backgroundGradient(es.contentBackgroundColor,"transparent","top"),{width:"100%",bottom:0,left:0}]}]});function ed(e){var n=e.children,t=e.backgroundColor,r=void 0===t?x.LU.surfaceBackground:t,i=e.maxHeight,l=(0,X._)(e,["children","backgroundColor","maxHeight"]),s=(0,a.useMemo)(function(){return new ei},[]),u=(0,c.J2)(s.isExpanded),d=(0,c.J2)(s.isExpandable);return(0,o.FD)(R.S,{css:eu.root,innerRef:s.setContainer,style:(0,$._)({maxHeight:u?void 0:i},ec.contentBackgroundColor,r),children:[(0,o.Y)(ea.Ay,(0,Q._)((0,J._)({},l),{children:n})),d?(0,o.Y)(ep,{onClick:s.toggle,isExpanded:u}):null]})}function ep(e){var n=e.onClick,t=e.isExpanded;return(0,o.FD)(ee.$,{"data-expanded":t,onPress:n,css:eu.button,children:[(0,o.Y)(F.A,{rotate:180*!!t}),(0,o.Y)(E.EY,{variant:"small",children:t?"Show less":"Show more"})]})}var ef=t(99941),eh="color-mix(in srgb, ".concat(x.LU.blurpleDimmest," 25%, ").concat(x.LU.surfaceBackground,")"),em=(0,k.x)({root:[_.wp.py(8),_.wp.pl(8),_.wp.pr(12),_.wp.mx(32),_.wp.mb(16),_.wp.borderRadius(),_.wp.overflow("hidden"),{backgroundColor:eh}],icon:{paddingTop:3},body:[_.wp.flex.growAndShrink(1),_.wp.colWithGap(2),_.wp.justify.spaceBetween],stepText:[_.wp.pt(2)],footer:[_.wp.flex.wrap,_.wp.justify.spaceBetween,_.wp.align.center],timestamp:[_.wp.flex.wrap,_.wp.color.blurpleStrongest]});function eg(e){if(!e)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var t=n.agentTimelineEventContents.toolData;return(null==t?void 0:t.$kind)!=="agentPlanStepBegin"?null:{name:t.agentPlanStepBegin.planStep.name,created:e.created,sessionId:e.sessionId}}function ev(e){var n=e.eventId,t=(0,s.Al)(n,eg);return t?(0,o.Y)(ew,{name:t.name,created:t.created}):null}var ew=(0,a.memo)(function(e){var n=e.name,t=e.created;return(0,o.FD)(q.ui,{elevated:!0,css:em.root,row:!0,gap:8,children:[(0,o.Y)(R.S,{css:em.icon,children:(0,o.Y)(ef.A,{color:x.LU.blurpleStronger})}),(0,o.FD)(R.S,{css:em.body,children:[(0,o.Y)(ey,{name:n}),t?(0,o.Y)(R.S,{css:em.footer,row:!0,children:(0,o.Y)(eb,{date:t})}):null]})]})});function ey(e){var n=e.name;return(0,o.Y)(R.S,{css:em.stepText,children:(0,o.Y)(ed,{backgroundColor:eh,maxHeight:200,lineBreaks:!0,children:n})})}function eb(e){var n=e.date;return(0,o.FD)(R.S,{css:em.timestamp,row:!0,gap:4,children:[(0,o.Y)(E.EY,{variant:"small",children:"Started"}),(0,o.Y)(K.Dc,{textVariant:"small",live:!0,date:n})]})}var eS=t(84296);function eY(e){return(0,o.Y)(eS.Ay,(0,Q._)((0,J._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M1.155 13.024a1.25 1.25 0 0 1 0-2.048l8.628-6.04A1.25 1.25 0 0 1 11.75 5.96v4.6l8.033-5.624A1.25 1.25 0 0 1 21.75 5.96v12.08a1.25 1.25 0 0 1-1.967 1.024L11.75 13.44v4.599a1.25 1.25 0 0 1-1.967 1.024l-8.628-6.04Zm9.095-6.583L2.308 12l7.942 5.56V6.44Zm10 0L12.308 12l7.942 5.56V6.44Z",clipRule:"evenodd"})}))}var eA=t(30279),eC=(0,k.x)({buttonRow:[_.wp.flex.wrap],continueButton:[_.wp.color.foregroundDimmer]});function ex(e){return(0,o.Y)(g.e,{elevated:!0,children:(0,o.FD)(R.S,{gap:8,align:"start",children:[(0,o.Y)(w.d2,{text:"This step is taking longer than expected, which usually means I'm stuck or the request is more expensive than I had initially estimated.\n\nI recommend starting a new session to take a new focused approach to the problem we're encountering in this step.",messageState:h.qOk.COMPLETE}),e.state===h.MOh.PENDING?(0,o.FD)(R.S,{css:eC.buttonRow,row:!0,gap:8,align:"center",children:[(0,o.Y)(D.$n,{colorway:"primary",iconLeft:(0,o.Y)(eA.A,{}),text:"Start a new chat",onClick:e.onNewSession}),(0,o.Y)(D.$n,{iconLeft:(0,o.Y)(eY,{rotate:180}),text:"Skip to the next step in the plan",onClick:e.onAbortCurrentStep}),(0,o.Y)(E.EY,{children:"or"}),(0,o.Y)(D.$n,{css:eC.continueButton,variant:"underlined",text:"Continue working on this request",onClick:e.onContinueCurrentStep})]}):null,e.state===h.MOh.ACKNOWLEDGED_ABORT_CURRENT_STEP?(0,o.Y)(E.EY,{color:"dimmer",children:"The current step will be tried again…"}):null,e.state===h.MOh.ACKNOWLEDGED_CONTINUE_CURRENT_STEP?(0,o.Y)(E.EY,{color:"dimmer",children:"The step was skipped."}):null]})})}function ek(e){if(!e)return null;var n=e.contents.contents;return(null==n?void 0:n.$kind)!=="stepTooComplexEventContents"?null:{stepId:n.stepTooComplexEventContents.stepId,state:n.stepTooComplexEventContents.state,created:e.created}}var e_=(0,a.memo)(function(e){var n=e.eventId,t=e.onNewSession,r=(0,s.Al)(n,ek),i=(0,s.Rk)();if(!r)return null;var a=function(e){return i({eventId:n,stepId:r.stepId,choice:e})};return(0,o.Y)(ex,{state:r.state,onNewSession:t,onContinueCurrentStep:function(){return a(h.MOh.ACKNOWLEDGED_CONTINUE_CURRENT_STEP)},onAbortCurrentStep:function(){return a(h.MOh.ACKNOWLEDGED_ABORT_CURRENT_STEP)}})}),eD=t(56185);function eE(e){if(!e)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var t=n.agentTimelineEventContents.toolData;if((null==t?void 0:t.$kind)!=="thoughts")return null;var r=t.thoughts;return{thoughts:r.thoughts,redactedThoughtsMarkers:r.redactedThoughtsMarkers}}function eR(e){var n=(0,r._)((0,a.useState)(1),2),t=n[0],i=n[1],l=(0,a.useMemo)(function(){return 0===e.thoughts.length},[e.thoughts]);return(0,a.useEffect)(function(){var e;return function n(){e=setTimeout(function(){i(function(e){return e%3+1}),l&&n()},500)}(),function(){return clearTimeout(e)}},[l]),(0,o.Y)(g.e,{highlighted:!!(e.redactedThoughtsMarkers&&e.redactedThoughtsMarkers.length&&e.redactedThoughtsMarkers[e.redactedThoughtsMarkers.length-1].index===e.thoughts.length),children:(0,o.Y)(R.S,{gap:16,align:"start",children:0===e.thoughts.length?(0,o.FD)(R.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(eD.A,{}),(0,o.FD)(E.EY,{children:["Thinking",".".repeat(t)]})]}):(0,o.Y)(E.EY,{children:e.thoughts})})})}var eI=(0,a.memo)(function(e){var n=e.eventId,t=(0,s.Al)(n,eE);return t?(0,o.Y)(eR,{thoughts:t.thoughts,redactedThoughtsMarkers:t.redactedThoughtsMarkers}):null}),eF=t(98089),eT=t(25726),eP=t(16660),eL=t(95563),eU=t(91888),eN=t(28978),eO=t(73978),eM=t(4325),eB=t(42726),eH=t(19021),ez=t(27208),eW=t(16810),eG=t(47258),eV=t(1018),ej=t(93249),eZ=t.n(ej),eq=(0,k.x)({button:[eG.b.nofill]});function eK(e){var n=(0,r._)((0,a.useState)(!1),2),t=n[0],i=n[1],l=(0,s.Al)(e.eventId,j.bQ),c=(0,eL.A)();if(!l)return null;var u=l.summary,d=l.toolDataKind,p=l.state;return(0,o.FD)(R.S,{gap:12,children:[(0,o.FD)(R.S,{tag:"button",row:!0,gap:8,align:"center",justify:"space-between",clsx:eZ().button,css:eq.button,onClick:function(){return i(function(e){return!e})},children:[(0,o.FD)(R.S,{align:"center",row:!0,gap:8,clsx:eZ().buttonLeft,children:[(0,o.Y)(R.S,{"data-timeline-bar":!0,clsx:eZ().bar}),(0,o.Y)(eW.u,{kind:d,color:p===h.qOk.IN_PROGRESS?x.LU.blurpleStronger:void 0}),(0,o.Y)(ez.B,{summary:null!=u?u:"",variant:c?"small":"text",color:c?"dimmest":"dimmer"})]}),(0,o.Y)(eV.A,{rotate:90*!!t,color:x.LU.foregroundDimmest})]}),t?(0,o.Y)(e$,{openPane:e.openPane,eventId:e.eventId}):null]})}var e$=(0,a.memo)(function(e){var n=e.eventId,t=e.openPane,r=(0,s.Al)(n,eB.b);return r?(0,o.FD)(R.S,{justify:"center",gap:12,children:[r.message?(0,o.Y)(q.ui,{elevated:!0,clsx:eZ().thought,children:(0,o.FD)(E.EY,{children:[r.message," "]})}):null,(0,o.Y)(R.S,{clsx:eZ().progressRendererWrap,children:(0,o.Y)(eH.r,{data:r,openPane:t})})]}):null}),eJ=t(10073),eQ=t(54310),eX=t(65995),e0=t(89977),e1=(0,k.x)({buttonContainer:[_.wp.display.flex,_.wp.position.relative,_.wp.zIndex(10),{paddingBottom:48}],button:[_.wp.position.absolute,_.wp.mt(8),_.wp.reset.button,eG.b.filledAndOutlined,_.wp.align.center,_.wp.rowWithGap(4),_.wp.shadow(1),_.wp.justify.center,_.wp.borderRadius(16),_.wp.height(28),_.wp.px(8),{left:0,right:0,marginInline:"auto",width:"fit-content"}]});function e2(e){var n,t=(0,s.Yg)(e.sessionId),i=t.items,f=t.inProgressEventId,h=t.eventIdsWithAvatars,m=(0,eL.A)(),g=(0,a.useRef)(new Map),v=(0,p.m5)(),w=(0,a.useRef)(null),y=(0,r._)((0,a.useState)(100),2),b=y[0],S=y[1],A=null==i?void 0:i.slice(Math.max(0,i.length-b)),C=e.openPane,x=(0,a.useCallback)(function(e){return C({type:"git",data:{mode:{type:eN.C.COMMIT,hash:e}}})},[C]),k=e.sessionId,_=(0,d.A)(),D=(0,a.useCallback)(function(){C({type:"deployments",flow:{skipIntro:null!==_,isAgentDeployment:null!==_}}),(0,eO.pI)({action:"open_deployments_from_chat_banner",sessionId:k})},[C,k,_]),I=(0,c.J2)(e.statusBarHeight);return i&&0!==i.length?(0,o.Y)(o.FK,{children:(0,o.FD)(eX.y,{scrollCache:g.current,scrollCacheKey:e.sessionId,scrollerRef:w,shouldAutoScrollRef:e.shouldAutoscrollRef,padding:"".concat(eP.w,"px 8px ").concat(I+32,"px 8px"),hideScrollbar:v,autoScrollBehavior:v?"smooth":"instant",alignToEnd:!0,buttonOffset:I,children:[b<(null!==(n=null==i?void 0:i.length)&&void 0!==n?n:0)?(0,o.Y)(R.S,{css:e1.buttonContainer,children:(0,o.FD)(q.ui,{css:e1.button,elevated:!0,tag:"button",onClick:function(){var e;(0,l.flushSync)(function(){w.current&&(e=w.current.scrollHeight-w.current.scrollTop),S(function(e){return e+5})}),e&&w.current&&(w.current.scrollTop=w.current.scrollHeight-e)},children:[(0,o.Y)(e0.A,{size:12}),(0,o.Y)(E.EY,{variant:"small",children:"Show more"})]})}):null,null==A?void 0:A.map(function(n,t){var r,i,a=t===A.length-1;switch(n.type){case"userMessage":return(0,o.Y)(H.rS,{eventId:n.id},n.id);case"aiMessage":return(0,o.Y)(Y,{isLast:a,eventId:n.id,addSecretEntries:e.addSecretEntries,removeSecretEntries:e.removeSecretEntries,replaceAllExternalSecrets:e.replaceAllExternalSecrets,waitingOnUserInput:a&&e.waitingOnUserInput,openPane:e.openPane,showAvatar:m?null==h?void 0:h.has(n.id):void 0},n.id);case"timeline":return(0,o.Y)(e8,{eventId:n.id,onEventClick:e.onEventClick,inProgressEventId:f,showThoughtButton:e.showThoughtButton,openPane:e.openPane,showAvatar:m?null==h?void 0:h.has(n.id):void 0},n.id);case"revert":return(0,o.Y)(Z.H,{eventId:n.id,openPane:e.openPane},n.id);case"plan":return(0,o.Y)(V.mE,{waitingOnUserInput:a&&e.waitingOnUserInput,eventId:n.id},n.id);case"newSessionNudge":case"databaseNudge":return null;case"deploy":return(0,o.Y)(eT.K4,{onConfigure:D,paneType:"agentChat"},n.id);case"stepStarted":return(0,o.Y)(ev,{eventId:n.id},n.id);case"stepTooComplex":return(0,o.Y)(e_,{eventId:n.id,onNewSession:e.onNewSession},n.id);case"checkpoint":return(0,o.Y)(eM.W,{eventId:n.id,onOpenCommit:x,usageIndicatorVariant:e.checkpointUsageIndicatorVariant},n.id);case"nextStepRequest":return(0,o.Y)(M,{eventId:n.id,disabled:!a||e.disableSendingMessages,waitingOnUserInput:a&&e.waitingOnUserInput},n.id);case"nextStepResponse":return(0,o.Y)(G,{eventId:n.id},n.id);case"debug":return(0,o.Y)(U,{isFirstOfType:(null===(r=A[t-1])||void 0===r?void 0:r.type)!=="debug",isLastOfType:(null===(i=A[t+1])||void 0===i?void 0:i.type)!=="debug",eventId:n.id},n.id);case"startRapidBuild":return(0,o.Y)(eJ.V,{eventId:n.id},n.id);case"thoughts":return(0,o.Y)(eI,{eventId:n.id},n.id);default:(0,u.A)(n.type)}}),(0,o.Y)(eP.U,{})]})}):(0,o.Y)(eU.G,{})}var e4={"& > div:last-of-type":{"[data-timeline-bar]":{display:"none"}}},e5=(0,k.x)({root:[_.wp.pr(32)],expandableProgress:[_.wp.pb(16),e4],timeline:[e4,_.wp.flex.growAndShrink(1)],avatar:[_.wp.pt(2)]}),e8=(0,a.memo)(function(e){var n=e.eventId,t=e.onEventClick,r=e.inProgressEventId,l=e.showAvatar,c=e.showThoughtButton,u=e.openPane,d=(0,eL.A)(),f=(0,s.p2)(n),h=(0,a.useMemo)(function(){if(!f)return[];var e=[n].concat((0,i._)(f));return r&&(e=e.filter(function(e){return e!==r})),e},[n,f,r]),m=(0,eQ.g)({items:h,maxVisibleItems:d?2:3}),g=m.isExpanded,v=m.setIsExpanded,w=m.maxItemsReached,y=m.visibleItems,b=m.hiddenItemsCount,S=(0,p.m5)();return y.length?S?(0,o.FD)(R.S,{css:e5.expandableProgress,gap:4,children:[w?(0,o.Y)(j.L3,{isExpanded:g,onClick:function(){return v(!g)},hiddenItemsCount:b,small:d}):null,y.map(function(e){return(0,o.Y)(eK,{openPane:u,eventId:e},e)})]}):(0,o.FD)(R.S,{css:e5.root,row:!0,gap:8,"data-event-type":"ai-actions",style:{paddingBottom:d?x.LU.space8:x.LU.space16},children:[(0,o.Y)(R.S,{css:e5.avatar,"data-avatar":!0,children:(0,o.Y)(eF.l,{size:22,hidden:!(void 0===l||l)})}),(0,o.FD)(R.S,{css:e5.timeline,gap:4,children:[w?(0,o.Y)(j.L3,{isExpanded:g,onClick:function(){return v(!g)},hiddenItemsCount:b,small:d}):null,y.map(function(e){return(0,o.Y)(j.CV,{showThoughtButton:c,eventId:e,onClick:t},e)})]})]}):null})},67169:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M11.665 1.33a.75.75 0 0 1 .67 0l10 5a.75.75 0 0 1 0 1.34l-10 5a.75.75 0 0 1-.67 0l-10-5a.75.75 0 0 1 0-1.34l10-5ZM3.677 7 12 11.162 20.323 7 12 2.839 3.677 7ZM1.33 11.665a.75.75 0 0 1 1.006-.336L12 16.162l9.665-4.833a.75.75 0 0 1 .67 1.342l-10 5a.75.75 0 0 1-.67 0l-10-5a.75.75 0 0 1-.336-1.006Zm0 5a.75.75 0 0 1 1.006-.336L12 21.162l9.665-4.833a.75.75 0 0 1 .67 1.342l-10 5a.75.75 0 0 1-.67 0l-10-5a.75.75 0 0 1-.336-1.006Z",clipRule:"evenodd"})}))}},67203:(e,n,t)=>{"use strict";t.d(n,{n:()=>p,c:()=>f});var r=t(12584),i=t(41114),o=t(53933);function a(){var e=(0,r._)(["\n  fragment WorkspaceHeaderComputeAlertCurrentUser on CurrentUser {\n    id\n    userSubscriptionType\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  fragment WorkspaceHeaderComputeAlertRepl on Repl {\n    id\n    owner {\n      __typename\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s=(0,i.J1)(a()),c=(0,i.J1)(l());function u(){var e=(0,r._)(["\n  fragment ReplEnvironmentHeaderLeftCurrentUser on CurrentUser {\n    id\n    ...WorkspaceHeaderComputeAlertCurrentUser\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,r._)(["\n  fragment ReplEnvironmentHeaderLeftRepl on Repl {\n    id\n    slug\n    url\n    ...WorkspaceHeaderReplMetadataRepl\n    ...WorkspaceHeaderComputeAlertRepl\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}var p=(0,i.J1)(u(),s),f=(0,i.J1)(d(),o.a,c)},67286:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(46434),i=t(29935),o=t(82643),a=t(60990),l=t(95570);function s(){var e;return(0,a.b)((e=(0,i._)(function(e,n){var t,i,a,s,c,u,d,p;return(0,o.YH)(this,function(e){switch(e.label){case 0:return n.signal,[3,12];case 1:e.trys.push([1,6,7,12]),c=(0,r._)(t),e.label=2;case 2:return[4,c.next()];case 3:if(!(i=!(u=e.sent()).done))return[3,5];(d=u.value).ok&&(d.payload.extras?l.log("[pid2]: ".concat(d.payload.message),d.payload.extras):l.log("[pid2]: ".concat(d.payload.message))),e.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return p=e.sent(),a=!0,s=p,[3,12];case 7:if(e.trys.push([7,,10,11]),!(i&&null!=c.return))return[3,9];return[4,c.return()];case 8:e.sent(),e.label=9;case 9:return[3,11];case 10:if(a)throw s;return[7];case 11:return[7];case 12:return[2]}})}),function(n,t){return e.apply(this,arguments)}),[]),null}},67468:e=>{e.exports={root:"Footer_root__AmobS"}},67929:(e,n,t)=>{"use strict";t.d(n,{Tu:()=>I,tL:()=>O,Ai:()=>E,RY:()=>U,KO:()=>N,nW:()=>L,Uz:()=>S,b7:()=>M,wm:()=>y,Hi:()=>F,yr:()=>B,$6:()=>P,Uo:()=>b,PI:()=>Y,if:()=>eY,MO:()=>eU,gM:()=>eh,_f:()=>$,Je:()=>et,PY:()=>eN,Ge:()=>eF,J4:()=>eg,oh:()=>ep,d9:()=>_,b:()=>eI,f6:()=>q,IT:()=>ew,mg:()=>z});var r=t(29935),i=t(17844),o=t(12694),a=t(82643),l=t(21462),s=t(35992),c=t(44370),u=t(68820),d=t(2960),p=t(70906),f=t(35899),h=t(86105);function m(e,n){for(var t=e.indexPath,r=n.indexPath,i=Math.min(t.length,r.length),o=0;o<i;o++){if(t[o]>r[o])return 1;if(t[o]<r[o])return -1}return t.length-r.length}var g=t(86593),v=t(71156),w=function(e){return"item-"+e},y=(0,c.eU)(0),b=(0,c.eU)(0),S=(0,c.eU)(0),Y=(0,c.eU)(function(e){return e(y)+e(b)+e(S)}),A=(0,c.eU)({path:[],rows:[],items:[],placeholder:"",isLoading:!1}),C=(0,c.eU)(!0);function x(){return(0,v.h)(C)}var k=(0,c.eU)(!1);function _(){return(0,v.h)(k)}var D=(0,c.eU)(null),E=(0,c.eU)({}),R=(0,u.mg)(E,function(e){return!!e.openOnInput}),I=(0,u.mg)(E,function(e){return!!e.autoFocus}),F=(0,u.mg)(E,function(e){return e.keyboardShortcut}),T=(0,u.mg)(E,function(e){return e.command}),P=(0,u.mg)(E,function(e){return e.overscan}),L=(0,u.mg)(E,function(e){return e.footer}),U=(0,u.mg)(E,function(e){return e.focusRef}),N=(0,u.mg)(E,function(e){return e.compact?12:14}),O=(0,u.mg)(E,function(e){return!!e.compact}),M=(0,u.mg)(E,function(e){return!!e.fullWidth}),B=(0,u.mg)(E,function(e){return void 0!==e.minItemHeight?e.minItemHeight:e.compact?28:32}),H=(0,u.mg)(E,function(e){var n;return null!==(n=e.showToolDescriptions)&&void 0!==n&&n});function z(){return(0,v.h)(H)}var W=(0,c.eU)(function(e){return!e(R)}),G=(0,u.mg)(E,function(e){return!!e.compact}),V=(0,c.eU)(null),j=(0,c.eU)(function(e){return e(ee)>-1}),Z=(0,c.eU)(function(e){var n=e(A);return!n.isLoading&&0===n.rows.length});function q(){return(0,v.AI)(Z)}var K=(0,c.eU)({label:"",input:"",menu:""});function $(){return(0,v.h)(K)}var J=(0,c.eU)(""),Q=(0,c.eU)(""),X=(0,c.eU)(""),ee=(0,c.eU)(-1),en=(0,c.eU)(function(e){var n=e(ee);return e(er).findIndex(function(e){return"item"===e.type&&e.index===n})});function et(){return(0,v.h)(en)}var er=(0,c.eU)(function(e){return e(A).rows}),ei=(0,c.eU)(function(e){return e(A).items}),eo=(0,c.eU)(function(e){return e(ei).length}),ea=(0,c.eU)(function(e){return e(ey).filter(function(e){return"context"===e.data.type&&!!e.match})}),el=(0,c.eU)(function(e){return e(ea).length>0}),es=(0,c.eU)(!1),ec=(0,c.eU)(null,function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(es,!0);var i=e(E).command,o=Array.isArray(i)?[i[0]]:[i];n(A,function(e){return(0,s.jM)(e,function(e){e.path=o})}),e(eP).setPath(e(ey)),n(ee,-1),n(J,""),n(Q,""),n(X,""),e(R)&&n(C,!1),r.focus&&(null===(t=e(eD))||void 0===t||t.focus())}),eu=(0,c.eU)(function(e){return e(A).placeholder}),ed=(0,c.eU)(function(e){return e(A).isLoading});function ep(){return(0,v.h)(ed)}var ef=(0,c.eU)(function(e){return e(A).path.length});function eh(){return(0,v.h)(ef)}var em=(0,c.eU)(function(e){return e(el)||!!e(J)});function eg(){return(0,v.h)(em)}var ev=(0,c.eU)(null,function(){var e=(0,r._)(function(e,n,t,r){var i,o,l,s,c,u;function d(t){var r;n(ex,null!=t?t:"Something went wrong"),null===(r=e(eD))||void 0===r||r.focus()}return(0,a.YH)(this,function(a){switch(a.label){case 0:if("group"===t.data.type)return[2];if(n(V,t),o=e(E),"context"===t.data.type)return n(e_,s=t.path),n(ee,-1),e(eP).setPath(s),null===(l=e(eD))||void 0===l||l.focus(),[2];switch(t.data.type){case"output":case"error":return n(ec),null===(c=o.onSelect)||void 0===c||c.call(o,t),[2]}n(k,!0),u=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Promise.resolve(t.data.run(r.nativeEvent))];case 2:return u=a.sent(),[3,4];case 3:return a.sent(),n(k,!1),d(),[2];case 4:if(n(k,!1),(null==u?void 0:u.type)==="error")return d(u.message),[2];return n(ec),null===(i=o.onAction)||void 0===i||i.call(o),[2]}})});return function(n,t,r,i){return e.apply(this,arguments)}}());function ew(e){var n=(0,v.ob)(ev),t=(0,l.useMemo)(function(){return(0,u.mg)(er,function(n){return n[e]})},[e]),r=(0,v.h)(t),i="item"===r.type?r.index:null,o=(0,l.useMemo)(function(){return(0,c.eU)(function(e){return null!==i&&e(ee)===i})},[i]),a=(0,v.h)(o),s=(null==r?void 0:r.type)==="item"?function(e){return n(r.item,e)}:void 0,d="item"===r.type?{id:w(e),role:"option","aria-selected":a}:void 0;return{row:r,active:a,onClick:s,ariaAttrs:d}}var ey=(0,c.eU)(function(e){return e(A).path}),eb=(0,c.eU)(function(e){return 1===e(ey).length}),eS=(0,c.eU)(null,function(e,n,t){var r=e(ey),i=r.indexOf(t);-1!==i&&(r=r.slice(0,i+1),n(ee,0),e(eP).setPath(r),n(J,""))});function eY(){return{iconOnly:(0,v.h)(G),breadcrumbs:(0,v.h)(ea),onClick:(0,v.ob)(eS)}}function eA(e,n){return n.match.score-e.match.score}var eC=(0,c.eU)(null,function(e,n,t){if(e(X)===e(X)){var r,i=t.items.sort(eA),o=t.path.length?t.path[t.path.length-1]:null,a=(0,g.k)(i),l=a.items,s=a.rows,c=null!==(r=null==o?void 0:o.data)&&void 0!==r?r:null,u=null==c?void 0:c.description;e(G)&&(null==c?void 0:c.type)!=="group"&&(u=null==c?void 0:c.label),n(A,function(e){return{items:l,rows:s,isLoading:!!t.partial,path:t.path,placeholder:u||e.placeholder}}),s.length&&-1===e(ee)&&n(ee,0)}}),ex=(0,c.eU)(null,function(e,n,t){n(D,t),n(A,function(e){return{items:[],rows:[],isLoading:!1,path:e.path,placeholder:e.placeholder}})}),ek=(0,c.eU)(null,function(e,n,t){n(J,t),n(ee,t?0:-1),n(D,null),n(A,function(e){return(0,s.jM)(e,function(e){e.isLoading=!!t})}),e(R)&&n(C,!!t)}),e_=(0,c.eU)(null,function(e,n,t){n(A,function(e){return(0,s.jM)(e,function(e){e.items=[],e.rows=[],e.path=t})}),n(ek,""),n(Q,""),n(X,"")}),eD=(0,c.eU)(null),eE=(0,c.eU)(null,function(e,n,t){var r=e(ee);if(!(r<0)){var i=e(ei)[r];i&&n(ev,i,t)}}),eR=(0,c.eU)(null,function(e,n,t){var r=e(C),i=e(eo),o=e(ee);switch(t.key){case"ArrowDown":t.preventDefault();var a=o+1;n(ee,a<i?a:0),n(C,!0);return;case"ArrowUp":t.preventDefault(),n(ee,Math.max(-1,o-1));return;case"Home":t.preventDefault(),t.shiftKey?t.currentTarget.selectionStart=0:t.currentTarget.setSelectionRange(0,0);return;case"End":t.preventDefault();var l=t.currentTarget.value.length;t.shiftKey?t.currentTarget.selectionEnd=l:t.currentTarget.setSelectionRange(l,l);return;case"Escape":if(!e(J)||(t.preventDefault(),n(ek,""),n(Q,""),e(W)))return;n(C,!1);return;case"Enter":if(!r)return;t.preventDefault(),n(eE,t);return;case"PageUp":case"PageDown":if(!r)return;t.preventDefault();var s="PageUp"===t.key?-10:10;n(ee,function(e){return Math.max(Math.min(e+s,i-1),0)});return}});function eI(){var e=(0,v.h)(er),n=x(),t=(0,l.useRef)(null),r=eh(),i=(0,v.h)(K);return{rows:e,isOpen:n,scrollRef:t,currentPathIndex:r,ariaAttrs:{id:i.menu,"aria-labelledby":i.label,role:"listbox"}}}function eF(){var e,n,t,r,i=(0,v.ob)(eD),a=(0,v.h)(eu),s=(0,o._)((e=(0,v.h)(J),n=(0,v.ob)(ek),t=(0,v.ob)(Q),r=(0,o._)((0,l.useTransition)(),2)[1],[e,(0,l.useCallback)(function(e){var i="string"==typeof e?e:e.currentTarget.value;n(i),r(function(){return t(i)})},[n,r,t])]),2),c=s[0],u=s[1],d=(0,v.ob)(ee),p=(0,v.h)(ee),f=(0,v.h)(K),h=x();return{onBlur:function(){return d(-1)},onChange:u,placeholder:a,value:c,ref:i,disabled:_(),ariaAttrs:{id:f.input,role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-activedescendant":p>-1?w(p):"","aria-controls":f.menu,"aria-expanded":h,"aria-labelledby":f.label}}}var eT=(0,c.eU)(null,function(e,n,t){var r=Array.isArray(t)?t:[t];e(es)&&(r=[r[0]]);var i=e(Q);n(X,i),e(eP).setPath(r,i)}),eP=(0,c.eU)({}),eL=(0,c.eU)(null,function(e,n){var t=e(ey),r=e(ea);if(r.pop()){var i=r.pop();if(!i){n(ec);return}var o=t.indexOf(i);t=t.slice(0,o+1),n(ee,0),n(e_,t),e(eP).setPath(t)}});function eU(){var e,n,t,r,i,o,a,s=x(),c=(0,v.h)(em),u=(0,v.h)(J),f=(0,v.h)(Z),h=_(),m=(0,v.h)(D),g=(0,v.ob)(eR),w=(0,v.h)(j),y=(0,v.ob)(ec),b=(0,v.Ou)(eD);e=(0,v.h)(eP),n=(0,v.h)(T),t=(0,v.AI)(eb),r=(0,v.AI)(Q),i=(0,v.ob)(X),o=(0,v.ob)(eT),a=(0,d.A)(n),(0,l.useEffect)(function(){t.current&&o(n)},[e,t,n,r,o]),(0,l.useEffect)(function(){return t.subscribe(function(e){e&&o(a.current)})},[e,r,t,o,a]),(0,l.useEffect)(function(){var n=function(n){i(n),e.search(n)};return n(r.current),r.subscribe(n)},[e,r,t,i,a]);var S=(0,p.A)(function(){return function(){var e;return null===(e=b())||void 0===e?void 0:e.focus()}},[b]),Y=(0,v.ob)(eL);return{focus:S,onKeyDown:(0,p.A)(function(){return function(e){if("Backspace"===e.key&&!e.currentTarget.value){Y();return}return g(e)}},[g,Y]),inputValue:u,isOpen:s,isClearable:c,noResults:f,hasHighlightedItem:w,isRunning:h,actionError:m,clearCommands:y}}function eN(e){var n=(0,f.c)(),t={label:n("label"),input:n("input"),menu:n("menu")},r=(0,o._)((0,l.useState)(function(){var n,r,o=(0,c.y$)();o.set(K,t),o.set(E,e),o.set(C,!e.openOnInput),o.set(eP,function(e){var n=e.initialPath,t=e.partialUpdateTimeout,r=e.onUpdate,i=n,o=null,a=0;function l(e){o&&clearTimeout(o);var n=++a,l=0,s=[],c=i[i.length-1];if(!c.commands){r({items:s,path:i});return}void 0!==t&&(o=setTimeout(function(){s.length&&r({items:(0,h._)(s).sort(m),partial:!0,path:i})},t)),!function t(c,u,d){if(l++,!c.commands)throw Error("Expected commands");var p=(0,h._)(u).concat([c]),f=p.length===i.length;Promise.resolve(c.commands({active:f,searchQuery:e,path:p})).then(function(c){if(n!==a){o&&clearTimeout(o);return}l--,c.forEach(function(n,r){var i=(0,h._)(p).concat([n]),o=(0,h._)(d).concat([r]),a=n.match?n.match({searchQuery:e,data:n.data,path:i,active:f}):null;a&&s.push({path:i,data:n.data,match:a,indexPath:o}),n.commands&&t(n,p,o)}),!(l>0)&&(o&&clearTimeout(o),r({items:(0,h._)(s).sort(m),path:i}))})}(c,i.slice(0,i.length-1),[])}return{search:l,setPath:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i=e,l(n)},getPath:function(){return i}}}({initialPath:Array.isArray(e.command)?e.command:[e.command],partialUpdateTimeout:100,onUpdate:function(e){return o.set(eC,(0,i._)({},e))}}));var a=Array.isArray(e.command)?e.command[0]:e.command,l=null!==(r=null==a?void 0:null===(n=a.data)||void 0===n?void 0:n.description)&&void 0!==r?r:null;return l&&o.set(A,function(e){return(0,s.jM)(e,function(e){e.placeholder=l})}),o}),1)[0];return(0,l.useEffect)(function(){r.set(E,e)},[r,e]),r}},68376:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(29935),i=t(82643),o=t(88079),a=t(75641);function l(e){var n=e.container,t=e.dotReplit,l=(0,o.F)(null),s=(0,o.F)(null),c=(0,o.F)(null),u=(0,o.F)(null),d=null;function p(){return u.current?Promise.resolve(u.current):new Promise(function(e){var n=u.subscribe(function(t){t&&(n(),e(t))})})}return n.openChannel({service:"toolchain"},function(e){var n=e.channel;u.set(n);var t=n.onCommand(function(e){if(e.toolchainChanged){if(!e.toolchainChanged.configs)throw Error("Expected toolchain changed configs");l.current=e.toolchainChanged.configs}else if(e.nixModulesChanged){if(!e.nixModulesChanged.modules)throw Error("Expected modules changed modules");s.current=e.nixModulesChanged.modules,c.current=e.nixModulesChanged.modulesV2}});return n.request({toolchainGetRequest:{}}).then(function(e){var n;l.current=(null===(n=e.toolchainGetResponse)||void 0===n?void 0:n.configs)||null}),n.request({nixModulesGetRequest:{}}).then(function(e){var n;s.current=(null===(n=e.nixModulesGetResponse)||void 0===n?void 0:n.modules)||null}),n.request({nixModuleConfigGetRequest:{}}).then(function(e){var n;c.current=(null===(n=e.nixModuleConfigGetResponse)||void 0===n?void 0:n.modules)||null}),function(){t()}}),{configs:l,modules:s,moduleConfig:c,getConfigs:function(){return l.current?Promise.resolve(l.current):new Promise(function(e){var n=l.subscribe(function(t){if(n(),null===t)throw Error("Returned toolchain config should not be null");e(t)})})},getRegistry:function(){return(0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:if(d)return[2,d];return[4,p()];case 1:return[4,e.sent().request({nixModulesGetRegistryRequest:{}})];case 2:return[2,d=e.sent().nixModulesGetRegistryResponse||null]}})})()},getModuleConfig:function(){return(0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,p()];case 1:return[4,e.sent().request({nixModuleConfigGetRequest:{}})];case 2:return[2,e.sent().nixModuleConfigGetResponse||null]}})})()},setModuleConfig:function(e){return(0,r._)(function(){return(0,i.YH)(this,function(n){switch(n.label){case 0:return[4,p()];case 1:return[4,n.sent().request({nixModuleConfigSetRequest:{modules:e}})];case 2:return[2,n.sent().nixModuleConfigSetResponse||null]}})})()},addModule:function(e){return(0,r._)(function(){var n,r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:return r=[],[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.DO.NotFound)throw Error("Failed to read .replit"+o.error);if(-1!==(r=(null===(n=o.config)||void 0===n?void 0:n.modules)||[]).indexOf(e))return[3,3];return r.push(e),[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(r)}])];case 2:i.sent(),i.label=3;case 3:return[2]}})})()},removeModule:function(e){return(0,r._)(function(){var n,r,o,l;return(0,i.YH)(this,function(i){switch(i.label){case 0:return r=[],[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.DO.NotFound)throw Error("Failed to read .replit"+o.error);if((l=(r=(null===(n=o.config)||void 0===n?void 0:n.modules)||[]).filter(function(n){if(e===n)return!1;var t=n.match(/^(.+)\.nix$/);return(t&&t[1])!==e})).length===r.length)return[2];return[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(l)}])];case 2:return i.sent(),[2]}})})()},upgradeModule:function(e,n){return(0,r._)(function(){var r,o,l;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.DO.NotFound)throw Error("Failed to read .replit"+o.error);return l=((null===(r=o.config)||void 0===r?void 0:r.modules)||[]).map(function(t){return e===t?n:t}),[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(l)}])];case 2:return i.sent(),[2]}})})()},buildModules:function(){return(0,r._)(function(){var e,n;return(0,i.YH)(this,function(t){switch(t.label){case 0:return e=this,[4,p()];case 1:return n=t.sent(),[2,new Promise(function(t){var r=e.configs.subscribe(function(e){e&&(r(),t(void 0))});n.send({nixModulesBuildRequest:{}})})]}})}).apply(this)}}}},68383:(e,n,t)=>{"use strict";t.d(n,{A:()=>k});var r=t(12694),i=t(86105),o=t(1889),a=t(21462),l=t(14075),s=t(63892),c=t(69101),u=t(61234),d=t(43974),p=t(67549),f=t(74863),h=t(26705),m=t(2527),g=t(40043),v=t(37407),w=t(35869),y=t(67811),b=t(20627),S=t(56185),Y=t(19915),A=(0,u.x)({module:[d.wp.borderRadius(4),d.wp.width("100%"),d.wp.overflow("hidden")],submodule:[d.wp.p(4)],submoduleName:[d.wp.truncate,d.wp.mx(8),d.wp.flex.growAndShrink(1)],moduleHeader:[d.wp.flex.growAndShrink(1)],moduleActions:[d.wp.center],divider:[d.wp.backgroundColor.outlineDimmer]});function C(e){var n=e.isModifying,t=e.isInstalled,r=e.onInstallClick,i=e.onRemoveClick,a=e.module;if(n)return(0,o.Y)(h.K0,{alt:"Updating module",tooltipBehavior:"hidden",children:(0,o.Y)(S.A,{})});if(t){var l="replit"===a.id;return(0,o.Y)(h.K0,{alt:l?"The base module can't be removed":"Remove module",disabled:l,onClick:i,children:(0,o.Y)(Y.A,{})})}return(0,o.Y)(h.K0,{alt:"Add module",onClick:r,children:(0,o.Y)(y.A,{})})}function x(e){var n=e.module,t=e.isInstalled,i=(0,l.G)(),c=i.addModule,u=i.removeModule,d=(0,r._)((0,a.useState)(!1),2),p=d[0],f=d[1];return(0,a.useEffect)(function(){f(!1)},[t]),(0,o.FD)(w.S,{css:A.moduleHeader,row:!0,justify:"space-between",children:[(0,o.FD)(w.S,{row:!0,gap:12,children:[(0,o.Y)(g.EY,{children:n.name}),n.displayVersion?(0,o.Y)(g.EY,{color:"dimmer",children:n.displayVersion}):null]}),(0,o.FD)(w.S,{css:A.moduleActions,row:!0,gap:4,children:[n.description?(0,o.Y)(v.m_,{tooltip:n.description,children:(0,o.Y)(b.A,{})}):null,(0,o.Y)(C,{module:n,isInstalled:t,isModifying:p,onInstallClick:function(){f(!0),c(n.id),(0,s.u4)(s.AZ.NIX_MODULE_ADDED,{moduleId:n.id})},onRemoveClick:function(){f(!0),u(n.id),(0,s.u4)(s.AZ.NIX_MODULE_REMOVED,{moduleId:n.id})}})]})]})}function k(e){var n=e.module,t=e.defaultExpanded,r=e.isInstalled,a=(0,i._)(n.runners).concat((0,i._)(n.packagers),(0,i._)(n.formatters),(0,i._)(n.languageServers));return(0,o.Y)(m.ui,{elevated:!0,css:A.module,children:(0,o.FD)(p.A,{round:!1,defaultExpanded:t,headerContent:(0,o.Y)(x,{module:n,isInstalled:r}),children:[a.length>0?(0,o.Y)(f.a,{css:A.divider}):null,a.map(function(e){return(0,o.FD)(w.S,{css:A.submodule,row:!0,align:"center",children:[(0,o.Y)(c.A,{module:e}),(0,o.Y)(g.EY,{css:A.submoduleName,children:e.name}),e.displayVersion?(0,o.Y)(g.EY,{color:"dimmer",children:e.displayVersion}):null]},e.id)})]})})}},68423:(e,n,t)=>{"use strict";t.d(n,{S2:()=>G,YZ:()=>z});var r=t(17844),i=t(12694),o=t(1889),a=t(21462),l=t(14365),s=t(75322),c=t(75152),u=t(24998),d=t(33105),p=t(25782),f=t(96866),h=t(38349),m=t(61234),g=t(43974),v=t(31618),w=t(95949),y=t(12966),b=t(40043),S=t(35869),Y=(0,m.x)({root:[g.wp.rowWithGap(4),g.wp.align.center],input:[g.wp.flex.growAndShrink(1),g.wp.color.foregroundDefault],disabledInput:[g.wp.flex.growAndShrink(1),g.wp.borderRadius(4),g.wp.px(8),g.wp.py(4),g.wp.color.foregroundDefault,g.wp.backgroundColor.backgroundDefault,{opacity:.7}]});function A(e){switch(e.description){case"shell.exec":return(0,o.Y)(x,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value,icon:e.icon,showIcon:e.showIcon});case"workflow.run":return(0,o.Y)(C,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value,icon:e.icon,showIcon:e.showIcon});case"packager.installForLanguage":return(0,o.Y)(k,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value,icon:e.icon,showIcon:e.showIcon});case"packager.installForAll":return(0,o.Y)(k,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:"all",icon:e.icon,showIcon:e.showIcon});case"workspace.openWebview":return(0,o.Y)(_,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value,icon:e.icon,showIcon:e.showIcon});default:return(0,o.Y)(o.FK,{})}}function C(e){var n=(0,h.mP)().filter(function(e){var n;return!(null===(n=e.metadata)||void 0===n?void 0:n.generated)}).map(function(e){return{name:e.name,id:e.name}});return(0,o.FD)(S.S,{css:Y.root,children:[e.showIcon?e.icon:null,(0,o.Y)(y.l,{css:Y.input,isDisabled:e.disabled,onBlur:e.onArgsBlur,"aria-label":"Select a Workflow",selectedKey:e.value,onSelectionChange:function(n){e.handleChange({type:"args",args:n})},items:n,children:function(e){return(0,o.Y)(w.nh,{label:e.name},e.id)}})]})}function x(e){return(0,o.FD)(S.S,{css:Y.root,children:[e.showIcon?e.icon:null,e.disabled?(0,o.Y)(b.EY,{css:Y.disabledInput,children:e.value}):(0,o.Y)(v.pd,{css:Y.input,disabled:e.disabled,onBlur:e.onArgsBlur,placeholder:"shell command to execute",onChange:function(n){var t=n.currentTarget.value;e.handleChange({type:"args",args:t})},required:e.required,value:e.value,type:e.type})]})}function k(e){var n=(0,f.J)().configs.map(function(e){return{id:e.language}});return n.push({id:"all"}),(0,o.FD)(S.S,{css:Y.root,children:[e.showIcon?e.icon:null,(0,o.Y)(y.l,{css:Y.input,isDisabled:e.disabled,onBlur:e.onArgsBlur,"aria-label":"Select a Language to install",selectedKey:e.value,onSelectionChange:function(n){"all"===n?e.handleChange({type:"task",task:"packager.installForAll"}):e.handleChange({type:"task",task:"packager.installForLanguage",args:n})},items:n,children:function(e){return(0,o.Y)(w.nh,{label:e.id},e.id)}})]})}function _(e){return(0,o.FD)(S.S,{css:Y.root,children:[e.showIcon?e.icon:null,(0,o.Y)(v.pd,{css:Y.input,disabled:e.disabled,onBlur:e.onArgsBlur,placeholder:"port number (ex: 3000)",onChange:function(n){var t=n.currentTarget.value;e.handleChange({type:"args",args:Number(t)})},required:e.required,value:e.value,type:e.type})]})}var D=(0,m.x)({taskSelect:[g.wp.flex.growAndShrink(1)]});function E(e){var n;return(0,o.Y)(y.l,{isDisabled:e.disabled,"aria-label":"Select a task",selectedKey:"packager.installForAll"===(n=e.selectedKey)?"packager.installForLanguage":n,onSelectionChange:function(n){(function(e,n){if(!e.includes(n))throw Error("Invalid task name: ".concat(n," (expected one of ").concat(e,")"))})(e.supportedTasks,n),e.handleChange({type:"task",task:n})},items:e.items,css:D.taskSelect,children:function(e){return(0,o.Y)(w.nh,{label:e.description,icon:e.icon},e.id)}})}var R=t(74863),I=t(26705),F=t(2527),T=t(16586),P=t(5445),L=t(9885),U=t(52355),N=t(19915),O=new Map(d.Jc.anyOf.map(function(e){return[e.properties.task.const,e]})),M=["packager.installForAll","packager.installForLanguage","shell.exec","workflow.run"],B={"shell.exec":{description:"Execute Shell Command",icon:(0,o.Y)(U.A,{})},"packager.installForLanguage":{description:"Install Packages",icon:(0,o.Y)(P.A,{})},"workflow.run":{description:"Run Workflow",icon:(0,o.Y)(L.A,{})}},H={TASK:"task"};function z(e){var n=(0,h.b7)(e),t=(0,h.AK)(),r=(0,h.vJ)(),i=(0,h.wS)();return n?(0,o.Y)(G,{disabled:e.disabled,format:e.format,lastTask:e.lastTask,taskIndex:e.taskIndex,initialConfig:n,onArgsBlur:i,onChange:function(n,t){null!==n&&r(e,n,{persist:"task"===t})},onReorder:e.onReorder,onRemove:function(){return t(e)},simplified:e.simplified}):(0,o.Y)(b.EY,{children:"Task not found"})}c.ZU.Object({type:c.ZU.Literal("task"),taskIndex:c.ZU.Number()});var W=(0,m.x)({root:[g.wp.borderRadius(4),g.wp.p(6),g.wp.rowWithGap(6)],dragIcon:[g.wp.pt(6),{cursor:"grab"}],wrapper:[g.wp.flex.growAndShrink(1),g.wp.colWithGap(4)],taskInputs:[g.wp.flex.growAndShrink(1),g.wp.colWithGap(4)],dropIndicator:[g.wp.height(4),g.wp.backgroundColor.blueDefault,g.wp.m(8),g.wp.borderRadius()]});function G(e){var n,t,c,d,f,h,m,g=(0,a.useRef)(null),v=(0,i._)((0,a.useState)((null===(n=e.initialConfig)||void 0===n?void 0:n.task)||null),2),w=v[0],y=v[1],b=(0,i._)((0,a.useState)(e.initialConfig&&"args"in e.initialConfig?e.initialConfig.args:null),2),Y=b[0],C=b[1],x=e.disabled?Object.entries(B).map(function(e){var n=(0,i._)(e,2),t=n[0],o=n[1];return(0,r._)({id:t},o)}):Object.entries(B).filter(function(e){var n=(0,i._)(e,2),t=n[0];return n[1],M.includes(t)}).map(function(e){var n=(0,i._)(e,2),t=n[0],o=n[1];return(0,r._)({id:t},o)}),k=w?function(e){var n,t=O.get(e);if(!t||!("args"in t.properties))return null;var r=null===(n=t.required)||void 0===n?void 0:n.includes("args");return{type:t.properties.args.type,required:r}}(w):null,_=(0,i._)((0,l.i)(function(){return{type:H.TASK,item:function(){return{type:"task",taskIndex:e.taskIndex}},collect:function(e){return{isDragging:!!e.isDragging()}}}},[e]),2),D=_[0].isDragging,P=_[1],L=(0,i._)((0,s.H)(function(){return{accept:"task",drop:function(n){var t,r=n.taskIndex;null===(t=e.onReorder)||void 0===t||t.call(e,r,e.taskIndex)},collect:function(n){var t=n.getItem(),r=null==t?void 0:t.taskIndex,i=!!n.isOver()&&r!==e.taskIndex;return{isAbove:i&&r>e.taskIndex,isBelow:i&&r<e.taskIndex}}}},[e]),2),U=L[0],z=U.isAbove,G=U.isBelow,V=L[1];function j(n){var t,r,i,o="task"===n.type?{task:"task"===n.type?n.task:w,args:null!==(t=n.args)&&void 0!==t?t:void 0}:{task:w,args:n.args};y(o.task),C(o.args);var a=o.task?O.get(o.task):null;if(!a)return null;try{null===(r=e.onChange)||void 0===r||r.call(e,u.WT.Decode(a,o),n.type)}catch(t){null===(i=e.onChange)||void 0===i||i.call(e,null,n.type)}}return e.disabled||P(V(g)),(0,o.FD)(o.FK,{children:[z?(0,o.Y)(R.a,{css:W.dropIndicator}):null,(0,o.Y)(F.ui,{elevated:!0,disabled:e.disabled,innerRef:g,style:{opacity:D?.5:1},css:W.root,children:(0,o.Y)(S.S,{css:W.wrapper,children:(0,o.FD)(S.S,{row:!0,gap:4,align:"start",justify:"space-between",children:[e.disabled?null:(0,o.Y)(S.S,{css:W.dragIcon,children:(0,o.Y)(T.A,{})}),(0,o.FD)(S.S,{css:W.taskInputs,children:[e.simplified?null:(0,o.Y)(E,{disabled:e.disabled,handleChange:j,selectedKey:w,items:x,supportedTasks:M}),(0,o.Y)(A,{description:w,disabled:e.disabled,type:null==k?void 0:k.type,value:e.format?(0,p.ZM)(null!==(c=null==Y?void 0:Y.toString())&&void 0!==c?c:""):null!==(d=null==Y?void 0:Y.toString())&&void 0!==d?d:"",required:null!==(f=null==k?void 0:k.required)&&void 0!==f&&f,handleChange:j,onArgsBlur:e.onArgsBlur,showIcon:e.simplified,icon:w?null===(t=B[w])||void 0===t?void 0:t.icon:void 0})]}),e.disabled?null:(0,o.Y)(S.S,{row:!0,gap:8,children:(0,o.Y)(I.K0,{disabled:null!==(h=e.lastTask)&&void 0!==h&&h,alt:null!==(m=e.lastTask)&&void 0!==m&&m?"Workflow must have at least one task":"Remove task",onClick:e.onRemove,children:(0,o.Y)(N.A,{})})})]})})}),G?(0,o.Y)(R.a,{css:W.dropIndicator}):null]})}},68456:(e,n,t)=>{"use strict";t.d(n,{D:()=>s,H:()=>a});var r=t(44370),i=t(69338),o=(0,r.eU)(!1);function a(){return(0,i.md)(o)}var l=(0,r.eU)(null,function(e,n){return n(o,function(e){return!e})});function s(){return(0,i.Xr)(l)}},68686:(e,n,t)=>{"use strict";t.d(n,{H:()=>Y,j:()=>b});var r=t(12694),i=t(86105),o=t(1889),a=t(21462),l=t(69543),s=t(73912),c=t(6680),u=t(61234),d=t(47258),p=t(43974),f=t(93682),h=t(40043),m=t(35869),g=t(54572),v=t(54239),w=t(75251),y=t(32633);function b(e){var n=e.secrets,t=e.otherSecrets,i=new Map,o=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=(0,r._)(s.value,2),d=u[0],p=u[1];!n.has(d)&&i.set(d,p)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return{missing:i}}var S=(0,u.x)({root:[p.wp.borderRadius(8),{border:"1px solid "+c.LU.outlineDimmer}],button:[p.wp.reset.button,d.b.nofill,p.wp.rowWithGap(8),p.wp.align.center,p.wp.height(32),p.wp.px(8),{border:"0 none",borderBottomLeftRadius:0,borderBottomRightRadius:0}],buttonText:[p.wp.flex.growAndShrink(1),p.wp.rowWithGap(8),p.wp.align.center],expanded:[p.wp.px(8),p.wp.pb(8)],missingSecret:[p.wp.flex.growAndShrink(1)],subtitle:[{borderTop:"1px solid "+c.LU.outlineDimmest,top:-1},p.wp.py(8),p.wp.position.relative]});function Y(e){var n=e.secrets,t=e.otherSecrets,u=e.otherEnvName,d=e.onAddSecret,p=e.initialExpanded,Y=b({secrets:n,otherSecrets:t}).missing,A=(0,r._)((0,a.useState)(p),2),C=A[0],x=A[1],k=0===Y.size;if((0,a.useEffect)(function(){k&&x(!1)},[k]),k)return null;var _="".concat(Y.size," ").concat((0,l.A)("secret",Y.size)," out of sync"),D=1===Y.size?"A ".concat(u," secret is missing from this environment"):"".concat(Y.size," ").concat(u," secrets are missing from this environment");return(0,o.FD)(m.S,{css:S.root,children:[(0,o.FD)(m.S,{css:S.button,tag:"button",onClick:function(){return x(function(e){return!e})},children:[(0,o.FD)(m.S,{css:S.buttonText,children:[(0,o.Y)(y.A,{color:c.LU.orangeDefault}),(0,o.Y)(h.EY,{multiline:!1,children:_})]}),C?(0,o.Y)(v.A,{}):(0,o.Y)(g.A,{})]}),C?(0,o.FD)(m.S,{css:S.expanded,children:[(0,o.Y)(h.EY,{css:S.subtitle,color:"dimmer",children:D}),(0,o.Y)(m.S,{gap:8,children:(0,i._)(Y.entries()).map(function(e){var n=(0,r._)(e,2),t=n[0],i=n[1];return(0,o.FD)(m.S,{row:!0,gap:8,children:[(0,o.FD)(m.S,{css:S.missingSecret,row:!0,gap:8,children:[(0,o.Y)(s.Ge,{value:t}),(0,o.Y)(s.iJ,{value:i})]}),i?(0,o.Y)(f.$n,{iconLeft:(0,o.Y)(w.A,{}),variant:"outlined",text:"Add secret",onClick:function(){return d({key:t,value:i})}}):null]},t)})})]}):null]})}},68753:(e,n,t)=>{"use strict";t.d(n,{mJ:()=>d,vL:()=>f,yG:()=>p});var r=t(27213),i=t.n(r),o=t(49069),a=t(45773),l=t(75156),s=t(99672),c=t(67668),u=t(4630);function d(e){var n=e.view,t=e.event,r=e.clipboardText,a=e.filePath,l=n.state.selection;if(!a||!(0,c.e$)(a)||l.ranges.length>1||l.main.from===l.main.to||!r||!i()(r)){(function(){if(!t){var e=r||"";if(l.main.empty){var i=l.main.from+e.length;n.dispatch({changes:[{from:l.main.from,insert:e}],selection:o.OF.range(i,i)})}else n.dispatch(n.state.replaceSelection(e))}})();return}t&&t.preventDefault();var s=n.state.sliceDoc(l.main.from,l.main.to),u="[".concat(s,"](").concat(r,")"),d=l.main.from+u.length;n.dispatch({changes:{from:l.main.from,to:l.main.to,insert:u},selection:o.OF.range(d,d)})}var p=a.Lz.domEventHandlers({paste:function(e,n){var t;d({filePath:n.state.facet(l.Md),view:n,event:e,clipboardText:null===(t=e.clipboardData)||void 0===t?void 0:t.getData("Text")})}}),f=new s.k(function(e){return a.Lz.domEventHandlers({paste:function(n,t){var r=t.state.facet(l.Md),i=null==n?void 0:null===(p=n.clipboardData)||void 0===p?void 0:p.files,o=function(e){var n=t.state.selection.main.head;t.dispatch({changes:{from:n,insert:e},selection:{anchor:n,head:n+e.length}})};if(i){var a=!0,s=!1,d=void 0;try{for(var p,f,h=i[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){var m=f.value;r&&(0,c.e$)(r)&&(0,u.U)(m,e,r).then(o)}}catch(e){s=!0,d=e}finally{try{a||null==h.return||h.return()}finally{if(s)throw d}}}}})})},68966:(e,n,t)=>{"use strict";t.d(n,{Ve:()=>r,aF:()=>i,yN:()=>o});var r="Tools",i=600,o="CommandBar"},69098:(e,n,t)=>{"use strict";t.d(n,{Tr:()=>L,bt:()=>T,m1:()=>F});var r=t(29935),i=t(12694),o=t(82643),a=t(1889),l=t(21462),s=t(61239),c=t(43912),u=t(82871),d=t(61280),p=t(73978),f=t(4792),h=t(6680),m=t(61234),g=t(47258),v=t(43974),w=t(57667),y=t(2527),b=t(40043),S=t(35869),Y=t(64520),A=t(17844),C=t(93629),x=t(84296);function k(e){return(0,a.Y)(x.Ay,(0,C._)((0,A._)({},e),{children:(0,a.Y)("path",{fillRule:"evenodd",d:"M5 3.75c-.69 0-1.25.56-1.25 1.25v3.25h16.5V5c0-.69-.56-1.25-1.25-1.25H5ZM21.75 5A2.75 2.75 0 0 0 19 2.25H5A2.75 2.75 0 0 0 2.25 5v14A2.75 2.75 0 0 0 5 21.75h14A2.75 2.75 0 0 0 21.75 19V5Zm-1.5 4.75H3.75V19c0 .69.56 1.25 1.25 1.25h14c.69 0 1.25-.56 1.25-1.25V9.75ZM5.25 6A.75.75 0 0 1 6 5.25h8a.75.75 0 0 1 0 1.5H6A.75.75 0 0 1 5.25 6Zm11.5 0a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}var _=t(6761),D=t(54572),E=t(60147),R=t(76860),I=(0,m.x)({formLabel:[v.wp.color.foregroundDimmer,v.wp.font.default,v.wp.mb(6)],button:[v.wp.reset.button,v.wp.px(8),v.wp.py(6),g.b.filled,v.wp.textAlign.left,{"&:focus":{outline:"none"},"&:focus-visible":{outline:"2px solid ".concat(h.LU.accentPrimaryDimmer),outlineOffset:-2}}],selectedItemText:{flex:1},menuItemBase:[v.wp.borderRadius(),v.wp.px(8),v.wp.py(6),v.wp.flex.row,v.wp.justify.spaceBetween,v.wp.align.center,v.wp.cursor.pointer,{"&:hover":{backgroundColor:h.LU.accentPrimaryDimmer}}],attachments:{overflowX:"auto"}});function F(e){switch(e.stack){case"FULLSTACK_JS":return(0,a.Y)(k,{});case"STREAMLIT":return(0,a.Y)(Y.A,{});case"FLASK_VANILLA_JS":return(0,a.Y)(R.A,{});case"BEST_EFFORT_FALLBACK":return(0,a.Y)(E.A,{});default:return null}}function T(e){var n=e.value,t=e.setFormField,r=e.disabled,o=f.Z.find(function(e){return e.value===n}),u=(0,i._)((0,l.useState)(!1),2),d=u[0],h=u[1],m=(0,a.Y)(s.$,{css:I.button,isDisabled:r,children:(0,a.FD)(S.S,{row:!0,gap:4,align:"center",children:[(0,a.FD)(S.S,{css:I.selectedItemText,children:[(0,a.FD)(S.S,{row:!0,gap:6,align:"center",children:[o?(0,a.Y)(F,{stack:null==o?void 0:o.value}):null,(0,a.Y)(b.EY,{color:(null==o?void 0:o.title)?"default":"dimmest",children:(null==o?void 0:o.title)||"Select framework"})]}),o?(0,a.Y)(b.EY,{variant:"small",color:"dimmer",children:o.description}):null]}),(0,a.Y)(D.A,{rotate:180*!!d})]})});return(0,a.FD)(S.S,{gap:8,children:[(0,a.Y)(b.EY,{variant:"small",css:I.formLabel,children:"App type"}),(0,a.Y)(w.in,{trigger:m,onOpenChange:h,children:f.Z.map(function(e){return(0,a.Y)(c.Dr,{textValue:e.value,onAction:function(){n!==e.value&&(t({path:"stack",formType:{string:{value:e.value.trim()},$kind:"string"}}),(0,p.pI)({action:"lobby_stack_selected",stack:e.value}))},children:(0,a.Y)(P,{stack:e.value,selected:e===o,title:e.title,description:e.description})},e.value)})})]})}function P(e){var n=e.selected,t=e.title,r=e.description,i=e.stack;return(0,a.FD)(y.ui,{elevated:n,row:!0,gap:8,justify:"space-between",align:"center",css:I.menuItemBase,children:[(0,a.FD)(S.S,{children:[(0,a.FD)(S.S,{row:!0,gap:6,align:"center",children:[(0,a.Y)(F,{stack:i}),(0,a.Y)(b.EY,{children:t})]}),(0,a.Y)(b.EY,{variant:"small",color:"dimmer",children:r})]}),n?(0,a.Y)(_.A,{size:16}):null]})}function L(e){var n=e.files;return(0,a.FD)(S.S,{gap:8,children:[(0,a.Y)(b.EY,{variant:"small",css:I.formLabel,children:"Attachments"}),(0,a.Y)(S.S,{row:!0,gap:8,css:I.attachments,children:n.map(function(e){return(0,a.Y)(d.m1,{attachment:{path:e.name,mimeType:e.mimeType},readFile:(0,r._)(function(){var n;return(0,o.YH)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,fetch(e.url).then(function(e){return e.arrayBuffer()})];case 1:return n=t.sent(),[2,{content:new u.A(n),error:null}];case 2:return[2,{content:null,error:t.sent()}];case 3:return[2]}})}),getAttachmentTypeDisclaimer:function(){return null}},e.url)})})]})}},69101:(e,n,t)=>{"use strict";t.d(n,{A:()=>O});var r=t(1889),i=t(723),o=t(1542),a=t(88272),l=t(17844),s=t(93629),c=t(14854);function u(e){return(0,r.FD)(c.A,(0,s._)((0,l._)({},e),{children:[(0,r.Y)("path",{fill:"#3E474A",fillRule:"evenodd",d:"m19.91 5.492-6.945-4.123a2.62 2.62 0 0 0-2.68 0L3.34 5.492A2.77 2.77 0 0 0 2 7.878v8.245c0 .984.51 1.894 1.34 2.386l6.945 4.122a2.623 2.623 0 0 0 2.68 0l6.945-4.122a2.77 2.77 0 0 0 1.34-2.386V7.878a2.77 2.77 0 0 0-1.34-2.386Z",clipRule:"evenodd"}),(0,r.Y)("path",{fill:"#FEFEFE",d:"m3.583 18.087 6.945 4.122a2.15 2.15 0 0 0 1.097.302c.123 0 .244-.014.365-.035-.367-.111-.606-.494-.605-1.086v-8.097c0-.987.604-1.525 1.424-2.004l6.57-4.058c.606-.354 1.125-.22 1.355.271a2.272 2.272 0 0 0-1.067-1.588l-6.945-4.123a2.15 2.15 0 0 0-2.194 0L3.582 5.914a2.285 2.285 0 0 0-1.1 1.964v8.245c0 .808.421 1.56 1.1 1.964Z"}),(0,r.Y)("path",{fill:"#47B353",fillRule:"evenodd",d:"m18.09 16.92-1.73 1.035c-.046.027-.08.057-.08.112v.453c0 .055.037.078.083.051l1.756-1.067c.046-.027.053-.078.053-.133v-.4c0-.054-.037-.078-.082-.05Z",clipRule:"evenodd"}),(0,r.Y)("path",{fill:"#FEFEFE",fillRule:"evenodd",d:"M14.407 13.11c.056-.028.102.007.102.08l.006.599c.25-.1.468-.126.666-.08.042.01.061.069.044.138l-.132.53a.227.227 0 0 1-.06.106.138.138 0 0 1-.035.025.078.078 0 0 1-.051.009c-.09-.02-.304-.067-.641.103-.353.18-.477.486-.474.714.003.271.142.354.624.362.642.01.919.291.926.938.006.634-.333 1.316-.85 1.733l.01.593c.001.071-.045.153-.101.181l-.35.202c-.057.029-.103-.006-.104-.078l-.006-.582c-.3.125-.605.155-.8.077-.036-.015-.052-.069-.037-.13l.127-.536a.221.221 0 0 1 .063-.111.132.132 0 0 1 .033-.024.07.07 0 0 1 .056-.006c.21.07.478.037.736-.093.327-.166.546-.5.543-.832-.004-.3-.167-.426-.563-.429-.504.002-.975-.098-.982-.84-.007-.612.311-1.248.815-1.65l-.007-.598c0-.073.044-.154.102-.183l.34-.217Z",clipRule:"evenodd"})]}))}var d=t(79542),p=t(12253),f=t(16898),h=t(1840),m=t(13348),g=t(68958),v=t(6193),w=t(40849),y=t(81313),b=t(72115),S=t(4467),Y=t(28928);function A(e){return(0,r.FD)(c.A,(0,s._)((0,l._)({},e),{children:[(0,r.Y)("path",{fill:"#009118",d:"M12.902.99a1.815 1.815 0 0 0-1.804 0l-2.02 1.165c-2.064 1.19-4.128 2.38-6.192 3.568A1.74 1.74 0 0 0 2 7.233v9.534a1.75 1.75 0 0 0 .92 1.525c.297.165.59.336.884.507.484.282.969.565 1.467.819.925.475 2.082.58 3.018.085.76-.41 1.097-1.323 1.096-2.162.004-1.987.003-3.974.002-5.961V8.102c.018-.14-.082-.289-.228-.286-.35-.005-.7-.003-1.05 0-.132-.014-.261.101-.251.24-.003 1.637-.002 3.275-.002 4.913l-.001 4.467c.008.432-.272.848-.671.994-.452.172-.956.038-1.366-.187l-.74-.426-1.446-.834a.263.263 0 0 1-.115-.108.272.272 0 0 1-.033-.157V7.283a.292.292 0 0 1 .173-.293L8.21 4.37c1.21-.698 2.42-1.394 3.63-2.09a.28.28 0 0 1 .32 0l3.615 2.08 4.569 2.629a.296.296 0 0 1 .172.294V16.718a.273.273 0 0 1-.147.268l-4.218 2.43-3.845 2.215-.051.03c-.117.07-.25.15-.38.072-.403-.233-.804-.471-1.205-.71-.298-.177-.597-.355-.897-.53-.076-.05-.173-.071-.253-.016-.02.01-.038.021-.057.032-.296.163-.593.327-.915.431-.041.017-.085.03-.128.045-.119.037-.24.075-.316.18.094.132.231.21.368.288a1140.648 1140.648 0 0 0 2.571 1.517c.54.351 1.266.377 1.824.05l3.893-2.24c1.44-.83 2.879-1.66 4.32-2.489.544-.29.924-.89.92-1.524V7.234a1.738 1.738 0 0 0-.857-1.492L16.317 2.96 12.902.99Z"}),(0,r.Y)("path",{fill:"#009118",d:"M17.032 8.148c-1.074-.6-2.352-.633-3.546-.554-.863.089-1.77.338-2.398.984-.645.649-.785 1.697-.479 2.545.22.599.772.988 1.343 1.195.735.27 1.508.355 2.28.439.706.076 1.41.153 2.088.371.277.096.6.243.684.557.078.373-.007.806-.297 1.065-.52.43-1.226.46-1.871.489l-.105.004a45.379 45.379 0 0 0-.206-.002c-.754-.009-1.555-.018-2.205-.446-.367-.255-.525-.706-.59-1.136-.007-.134-.11-.257-.25-.247a50.703 50.703 0 0 0-1.046 0c-.122-.011-.248.08-.255.209-.028.768.254 1.564.83 2.075.674.607 1.582.842 2.455.943.929.093 1.878.087 2.792-.12.687-.164 1.376-.465 1.85-1.018.583-.672.697-1.673.436-2.51-.2-.625-.772-1.025-1.356-1.231-.795-.285-1.625-.397-2.456-.51-.645-.087-1.29-.174-1.92-.342l-.031-.01c-.244-.078-.528-.169-.634-.427-.118-.376-.018-.843.313-1.074.43-.306.977-.35 1.486-.378H14c.68-.008 1.4-.015 2.021.303.416.218.658.665.757 1.116.019.133.104.271.251.265.237.005.474.005.711.004l.328-.001c.12.009.25-.062.273-.189-.015-.943-.476-1.909-1.308-2.37Z"})]}))}var C=t(57242),x=t(75129);function k(e){return(0,r.FD)(c.A,(0,s._)((0,l._)({},e),{children:[(0,r.Y)("path",{fill:"#56B3B4",d:"M20.238 4.762h1.19a.59.59 0 0 1 .596.595.59.59 0 0 1-.595.595h-1.19a.59.59 0 0 1-.596-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M2.38 23.81h5.953a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.596Z"}),(0,r.Y)("path",{fill:"#BF85BF",d:"M16.667 14.286h3.571a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-3.571a.59.59 0 0 1-.596-.595.59.59 0 0 1 .596-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M9.524 14.286h4.762a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H9.524a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M2.38 14.286h4.763a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#BF85BF",d:"M2.38 19.048h5.953a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595ZM2.38 9.524h5.953a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M8.333 2.381h11.905a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H8.333a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M2.38 2.381h3.572a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M7.143 21.429h1.19a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M7.143 7.143h1.19a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595ZM2.38 21.429h2.382a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M2.38 7.143h2.382a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M11.905 11.905h9.524a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-9.524a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M5.952 11.905h3.572a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H5.952a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M2.38 11.905h1.191a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#BF85BF",d:"M13.095 4.762h4.762a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-4.762a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M2.38 4.762h8.334a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M5.952 16.667h10.715a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H5.952a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#BF85BF",d:"M2.38 16.667h1.191a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M16.667 7.143h5.952a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-5.952a.59.59 0 0 1-.596-.595.59.59 0 0 1 .596-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M16.667 9.524h5.952a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-5.952a.59.59 0 0 1-.596-.595.59.59 0 0 1 .596-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M2.38 0h14.287a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595A.59.59 0 0 1 2.38 0Z"})]}))}var _=t(75141),D=t(47611),E=t(68979),R=t(1757),I=t(79210),F=t(25728),T=t(79470),P=t(41113),L=t(5445),U=t(96415),N=t(99941);function O(e){var n=e.module,t=n.name.toLowerCase(),l=t.split(" ");return t.includes("node")?(0,r.Y)(A,{}):t.includes("typescript")?(0,r.Y)(T.A,{}):t.includes("python")||t.includes("pyright")?(0,r.Y)(_.A,{}):t.includes("c++")||t.includes("cpp")||t.includes("clang")||t.includes("ccls")?(0,r.Y)(f.A,{}):t.includes("java")||t.includes("maven")?(0,r.Y)(b.A,{}):t.includes("rust")||t.includes("cargo")?(0,r.Y)(R.A,{}):l.includes("go")||t.includes("gopls")?(0,r.Y)(v.A,{}):t.includes("ruby")?(0,r.Y)(E.A,{}):t.includes("elixir")?(0,r.Y)(g.A,{}):t.includes("bash")?(0,r.Y)(u,{}):t.includes("clojure")?(0,r.Y)(p.A,{}):t.includes("php")?(0,r.Y)(x.A,{}):t.includes("swift")?(0,r.Y)(F.A,{}):t.includes("haskell")?(0,r.Y)(w.A,{}):t.includes("lua")?(0,r.Y)(S.A,{}):t.includes("dart")?(0,r.Y)(m.A,{}):t.includes("css")?(0,r.Y)(h.A,{}):t.includes("html")?(0,r.Y)(y.A,{}):l.includes("r")?(0,r.Y)(D.A,{}):t.includes("nix")?(0,r.Y)(Y.A,{}):t.includes("npm")?(0,r.Y)(C.A,{}):"bun"===t?(0,r.Y)(d.A,{}):t.includes("prettier")?(0,r.Y)(k,{}):t.includes("vue")?(0,r.Y)(P.A,{}):t.includes("svelte")?(0,r.Y)(I.A,{}):t.includes(".replit")?(0,r.Y)(U.A,{}):n instanceof i.api.PackagerOption?(0,r.Y)(L.A,{}):n instanceof i.api.LanguageServerOption?(0,r.Y)(o.A,{}):n instanceof i.api.FormatterOption?(0,r.Y)(a.A,{}):n instanceof i.api.RunOption?(0,r.Y)(N.A,{}):(0,r.Y)(L.A,{})}},69596:(e,n,t)=>{"use strict";t.d(n,{A:()=>ea});var r,i=t(17844),o=t(93629),a=t(86105),l=t(1889),s=t(21462),c=t(52147),u=t(61234),d=t(43974),p=t(93682),f=t(40043),h=t(35869),m=t(74829);function g(e){var n=e.animate,t=e.diff,r=e.maxLines,i=(0,s.useMemo)(function(){return t.hunks.map(function(e){return e.lines}).flat()},[t]);return(0,l.Y)(h.S,{children:(0,l.Y)(m.Y,{animate:void 0!==n&&n,diffMode:!0,lines:i,maxLines:r},"diff-".concat(t.pathA,"-").concat(t.pathB))})}var v=t(83846),w=t(6680),y=t(78559),b=t(2527),S=w.LU.outlineDimmest,Y=(0,s.createContext)({});function A(){return(0,s.useContext)(Y)}function C(e){var n=e.diff,t=e.onPathClick,r=e.onViewFullDiff,i=e.children,o=(0,s.useMemo)(function(){var e=!0,t=!1,r=void 0;try{for(var i,o=n.headers[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if("index"===a.type)return{a:a.hashA,b:a.hashB}}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}},[n]),a=(0,s.useMemo)(function(){return{handlePathNavigation:t?function(e,r){var i="a"===e?n.pathA:n.pathB,a="a"===e?null==o?void 0:o.a:null==o?void 0:o.b;i&&t({path:i,revision:a,line:r})}:void 0,handleViewFullDiffNavigation:r?function(){var e=n.pathB||n.pathA,t=(null==o?void 0:o.b)||(null==o?void 0:o.a);e&&r({path:e,revision:t})}:void 0}},[n,t,r,o]);return(0,l.Y)(Y.Provider,{value:a,children:i})}var x=t(29935),k=t(12694),_=t(82643),D=t(80367),E=t(83013),R=t(73510),I=t(50522),F=t(12722);function T(){return(T=(0,x._)(function(e,n,t){var r,a,l,s,c,u,d;return(0,_.YH)(this,function(p){switch(p.label){case 0:if(0===e.hunks.length)return[2,e];if(r=e.pathA?I.Jh.from(e.pathA):null,a=e.pathB?I.Jh.from(e.pathB):null,l=null,s=null,!(r&&r.codeMirrorLanguage))return[3,4];if(!r.codeMirrorLanguage.support)return[3,1];return c=r.codeMirrorLanguage.support.language.parser,[3,3];case 1:return[4,r.codeMirrorLanguage.load()];case 2:c=p.sent().language.parser,p.label=3;case 3:l=c,p.label=4;case 4:if(!(a&&a.codeMirrorLanguage))return[3,8];if(!a.codeMirrorLanguage.support)return[3,5];return u=a.codeMirrorLanguage.support.language.parser,[3,7];case 5:return[4,a.codeMirrorLanguage.load()];case 6:u=p.sent().language.parser,p.label=7;case 7:s=u,p.label=8;case 8:if(t.aborted||!l&&!s)return[2,e];return d=e.hunks.map(function(e){var t=e.lines.filter(function(e){return null!==e.numberA}).map(function(e){return e.content}).join("\n"),r=e.lines.filter(function(e){return null!==e.numberB}).map(function(e){return e.content}).join("\n");e.heading&&(t=t?"".concat(e.heading,"\n").concat(t):"",r=r?"".concat(e.heading,"\n").concat(r):"");var a=(0,R.ZE)(t,n,l),c=(0,R.ZE)(r,n,s);return e.heading&&t&&a.shift(),e.heading&&r&&c.shift(),(0,o._)((0,i._)({},e),{lines:e.lines.map(function(n){if(null!==n.numberB)t="b",r=n.numberB;else if(null!==n.numberA)t="a",r=n.numberA;else throw Error("Invalid line, no number for either side");var t,r,l="a"===t?a[r-e.fromA]:c[r-e.fromB];if(!l)throw Error("Line not found in side ".concat(t));return(0,o._)((0,i._)({},n),{content:l})})})}),[2,(0,o._)((0,i._)({},e),{hunks:d})]}})})).apply(this,arguments)}var P=new WeakSet,L=t(27002),U=t(89635),N=t.n(U),O=t(69543),M=t(60274),B=t(73301),H="--number-width-a",z="--number-width-b",W=(0,u.x)({content:{marginLeft:w.LU.space8,wordBreak:"break-word",whiteSpace:"pre-wrap"},nbsp:{userSelect:"none"},span:{"&::selection":{backgroundColor:w.LU.accentPrimaryDimmer}},line:{display:"flex",flexDirection:"row",alignItems:"stretch",gap:"1ch",paddingLeft:"1ch",paddingRight:w.LU.space8,".is-patch-with-border &":{"&.is-added":{borderLeft:"1px solid ".concat(w.LU.accentPositiveDimmest)},"&.is-removed":{borderLeft:"1px solid ".concat(w.LU.accentNegativeDimmest)},"&.is-same":{borderLeft:"1px solid ".concat(S)}},"&.is-skipped":{paddingTop:w.LU.space4,paddingBottom:w.LU.space4,color:w.LU.foregroundDimmest,userSelect:"none"}},number:{flexShrink:0,whiteSpace:"nowrap",userSelect:"none",".is-added &":{color:w.LU.accentPositiveStronger},".is-removed &":{color:w.LU.accentNegativeStronger},".is-same &":{color:w.LU.foregroundDimmest},".is-skipped &":{position:"relative",left:"25%",color:w.LU.foregroundDimmest}},numberContainer:{display:"flex",flexDirection:"row",alignItems:"start",justifyContent:"flex-end",flexShrink:0,"&.is-side-a":{width:"var(".concat(H,")")},"&.is-side-b":{width:"var(".concat(z,")")}}});function G(e){var n=(0,F.D)().values;return(0,s.useMemo)(function(){if("same"===e)return"";var t="added"===e?n.global.accentPositiveDefault:n.global.accentNegativeDefault;return N()(t).alpha(.2).hex()},[e,n.global.accentPositiveDefault,n.global.accentNegativeDefault])}function V(e){var n=e.type,t=void 0===n?"same":n,r=e.changes,i=A().handleViewFullDiffNavigation,o=G(t);if(r<=0)return null;var a=!1,s=!1;return("removed"===t||"same"===t)&&(a=(0,l.Y)(M.A,{size:20})),("added"===t||"same"===t)&&(s=(0,l.Y)(M.A,{size:20})),(0,l.FD)("div",{className:"is-".concat(t," is-skipped"),css:W.line,style:{backgroundColor:o},children:[(0,l.Y)(Z,{side:"a",type:t,number:a}),(0,l.Y)(Z,{side:"b",type:t,number:s}),(0,l.Y)("div",{css:W.content,children:(0,l.Y)("span",{css:W.span,children:i?(0,l.Y)(p.$n,{text:"view ".concat(r," more ").concat((0,O.A)("change",r)),iconLeft:(0,l.Y)(B.A,{}),variant:"underlinedOnHover",colorway:"primary",onClick:function(){return i()}}):"".concat(r," more ").concat((0,O.A)("change",r)," not shown")})})]})}function j(e){var n=e.type,t=e.content,r=e.numberA,i=e.numberB,o=G(n);return(0,l.FD)("div",{className:"is-".concat(n),css:W.line,style:{backgroundColor:o},children:[(0,l.Y)(Z,{side:"a",type:n,number:void 0===r?null:r}),(0,l.Y)(Z,{side:"b",type:n,number:void 0===i?null:i}),(0,l.Y)("div",{className:"is-".concat(n),css:W.content,children:"string"==typeof t?(0,l.Y)("span",{css:W.span,children:t||(0,l.Y)("span",{css:W.nbsp,children:"\xa0"})}):t.map(function(e,n){var t=e.text,r=e.tags;return(0,l.Y)("span",{className:r,css:W.span,children:t||(0,l.Y)("span",{css:W.nbsp,children:"\xa0"})},n)})})]})}function Z(e){var n=e.side,t=e.type,r=e.number,i=A().handlePathNavigation;return!1===r?null:null===r?(0,l.Y)("div",{css:W.numberContainer,className:"is-side-".concat(n)}):(0,l.Y)("div",{css:W.numberContainer,className:"is-side-".concat(n),children:i&&"number"==typeof r?(0,l.Y)(p.$n,{text:(0,l.Y)("span",{css:W.number,children:r}),variant:"underlinedOnHover",onClick:function(){return i("removed"===t?"a":"b",r)}}):(0,l.Y)("span",{css:W.number,children:r})})}var q=(0,u.x)({hunk:[d.wp.flex.column,{":not(:first-of-type)":{borderTop:"1px solid ".concat(S)},":first-of-type [data-hunk-header]":{borderTopLeftRadius:3}}],header:[d.wp.colorMixBg(w.LU.interactiveBackground,w.LU.surfaceBackground),{gap:"1ch",padding:"".concat(w.LU.space4," 1ch"),".is-patch-with-border &":{borderLeft:"1px solid ".concat(S)}}],countAdded:[d.wp.textAlign.right,d.wp.color.accentPositiveStronger,d.wp.width("var(".concat(z,")"))],countRemoved:[d.wp.textAlign.right,d.wp.color.accentNegativeStronger,d.wp.width("var(".concat(H,")"))],sectionHeading:[d.wp.ml(8),d.wp.font.code,d.wp.color.foregroundDimmer],hunks:[d.wp.flex.column,d.wp.font.code,(r={lineHeight:w.LU.lineHeightSmall},(0,v._)(r,"> div:last-child"+L.v,d.wp.pb(2)),(0,v._)(r,"> div:first-child"+L.v,d.wp.pt(4)),r)]});function K(e){var n=e.hunk,t=e.hideHeader,r=e.maxLines,o=(0,s.useMemo)(function(){var e=0,t=0,r=!0,i=!1,o=void 0;try{for(var a,l=n.lines[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;"added"===s.type?t++:"removed"===s.type&&e++}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return{a:e,b:t}},[n]),a=(0,s.useMemo)(function(){return void 0!==r&&n.lines.length>r?n.lines.slice(0,r):n.lines},[n,r]);return(0,l.FD)(h.S,{css:q.hunk,children:[t?null:(0,l.FD)(h.S,{css:q.header,row:!0,align:"center","data-hunk-header":!0,children:[(0,l.FD)("span",{css:q.countRemoved,children:["-",o.a]}),(0,l.FD)("span",{css:q.countAdded,children:["+",o.b]}),n.heading?(0,l.Y)("span",{css:q.sectionHeading,children:n.heading}):null]}),(0,l.Y)(h.S,{css:q.hunks,children:a.map(function(e,n){return(0,l.Y)(j,(0,i._)({},e),n)})})]})}var $=t(44144),J=(0,u.x)({diff:[d.wp.flex.column,{"&.is-patch-with-border":d.wp.borderRadius(4)}],header:[d.wp.rowWithGap(8),d.wp.my(8),d.wp.align.center,d.wp.flex.wrap],headerFile:{lineHeight:1,"&.is-added":d.wp.color.accentPositiveStronger,"&.is-removed":d.wp.color.accentNegativeStronger},binaryTag:[d.wp.color.accentPrimaryStronger],container:[d.wp.flex.column,d.wp.overflow("hidden"),{".is-patch-with-border &":[d.wp.borderRadius(4),{"&.is-modified":{border:"1px solid ".concat(S),borderLeft:"none"},"&.is-added":{border:"1px solid ".concat(w.LU.accentPositiveDimmest),borderLeft:"none"},"&.is-removed":{border:"1px solid ".concat(w.LU.accentNegativeDimmest),borderLeft:"none"},"&.is-no-changes":{border:"1px solid ".concat(w.LU.outlineDimmer)},"&.is-binary":{border:"1px solid ".concat(w.LU.outlineDimmer)}}],"&.is-no-changes":[d.wp.p(8),d.wp.center],"&.is-binary":[d.wp.p(8),d.wp.center]}],file:[d.wp.flex.column,d.wp.font.code,{lineHeight:w.LU.lineHeightSmall,"> div:last-child":d.wp.pb(2),"> div:first-child":d.wp.pt(4)}]});function Q(e){var n,t,r,i,o,a,c=e.diff,u=e.maxLines,d=e.noHeader,p=e.noBorder,f=e.background,m=e.compressed,g=e.onPathClick,w=e.onViewFullDiff,y=(t=(n=(0,k._)((0,s.useState)(c),2))[0],r=n[1],i=(0,F.D)(),o=(0,s.useMemo)(function(){return(0,E.y)(i.values.editor.syntaxHighlighting)},[i.values.editor.syntaxHighlighting]),(0,s.useEffect)(function(){!(!o.module||P.has(o.module))&&(D.G.mount(document,o.module),P.add(o.module))},[o.module]),(0,s.useEffect)(function(){r(c);var e=0,n=!0,t=!1,i=void 0;try{for(var a,l=c.hunks[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var s=a.value;if((e+=s.lines.length)>1e3)return}}catch(e){t=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(t)throw i}}var u=new AbortController,d=u.signal;return(function(e,n,t){return T.apply(this,arguments)})(c,o,d).then(function(e){d.aborted||r(e)}),function(){u.abort()}},[c,o]),t),b=(0,s.useMemo)(function(){var e=0,n=0,t=0,r=0,i=!0,o=!1,a=void 0;try{for(var l,s=c.hunks[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var u=l.value,d=0,p=0,f=!0,h=!1,g=void 0;try{for(var v,w=u.lines[Symbol.iterator]();!(f=(v=w.next()).done);f=!0){var y=v.value;y.numberA&&(t=Math.max(t,y.numberA)),y.numberB&&(r=Math.max(r,y.numberB)),"removed"===y.type&&d++,"added"===y.type&&p++}}catch(e){h=!0,g=e}finally{try{f||null==w.return||w.return()}finally{if(h)throw g}}e=Math.max(e,d),n=Math.max(n,p)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}var b=t.toString().length,S=r.toString().length;if((!m||c.hunks.length>1)&&c.pathA&&c.pathB){var Y=e.toString().length+1,A=n.toString().length+1;b=Math.max(b,Y),S=Math.max(S,A)}return{a:b,b:S}},[c,m]);return(0,l.Y)(C,{diff:c,onPathClick:g,onViewFullDiff:w,children:(0,l.FD)(h.S,{css:J.diff,className:p?"":"is-patch-with-border",style:(a={},(0,v._)(a,H,"".concat(b.a,"ch")),(0,v._)(a,z,"".concat(b.b,"ch")),a),children:[!d&&(c.pathA||c.pathB)?(0,l.Y)(ee,{diff:y}):null,(0,l.Y)(et,{diff:y,compressed:m,background:f,maxLines:u})]})})}function X(){return(0,l.Y)(f.EY,{css:J.binaryTag,variant:"small",children:"Binary"})}function ee(e){var n=e.diff;if(n.pathA&&n.pathB&&n.pathA===n.pathB)return(0,l.FD)(h.S,{css:J.header,children:[(0,l.Y)(en,{diff:n,side:"b"}),n.binary?(0,l.Y)(X,{}):null]});if(n.pathA&&n.pathB&&n.pathA!==n.pathB)return(0,l.FD)(h.S,{css:J.header,children:[(0,l.Y)(en,{diff:n,side:"a"}),n.binary?(0,l.Y)(X,{}):null,(0,l.Y)($.A,{color:w.LU.foregroundDimmest}),(0,l.Y)(en,{diff:n,side:"b"}),n.binary?(0,l.Y)(X,{}):null]});var t=n.pathA?"a":"b";return(0,l.FD)(h.S,{css:J.header,children:[(0,l.Y)(en,{diff:n,side:t}),n.binary?(0,l.Y)(X,{}):null]})}function en(e){var n=e.diff,t=e.side,r=A().handlePathNavigation,i="a"===t?n.pathA:n.pathB,o="a"===t?n.pathB:n.pathA;if(!i)return null;var a="";o!==i&&(a="b"===t?"is-added":"is-removed");var s=(0,l.Y)(f.EY,{className:a,css:J.headerFile,children:i});return r?(0,l.Y)(p.$n,{text:s,iconLeft:(0,l.Y)(y.A,{path:i}),onClick:function(){return r(t)},variant:"underlinedOnHover"}):(0,l.FD)(l.FK,{children:[(0,l.Y)(y.A,{path:i}),s]})}function et(e){var n=e.diff,t=e.background,r=e.compressed,i=e.maxLines,o=null===t?void 0:t||"root";if(n.binary)return(0,l.Y)(b.ui,{className:"is-binary",css:J.container,background:o,children:(0,l.Y)(f.EY,{color:"dimmest",children:"Changes can't be shown for binary files."})});if(!n.hunks.length)return(0,l.Y)(b.ui,{className:"is-no-changes",css:J.container,background:o,children:(0,l.Y)(f.EY,{color:"dimmer",children:"No additional changes"})});if(n.pathA&&n.pathB){var a=0,s=n.hunks.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+ +("same"!==n.type)},0)},0),c=n.hunks.map(function(e){if(void 0!==i&&a>=i)return null;var t=void 0!==i?i-a:void 0;return s-=e.lines.slice(0,t).reduce(function(e,n){return e+ +("same"!==n.type)},0),a+=e.lines.length+1,(0,l.Y)(K,{hunk:e,hideHeader:r&&1===n.hunks.length,maxLines:t},a)});return(0,l.FD)(b.ui,{className:"is-modified",css:J.container,background:o,children:[c,(0,l.Y)(V,{changes:s})]})}var u=n.pathB?"b":"a",d="a"===u?"removed":"added",p=n.hunks.flatMap(function(e){return e.lines.filter(function(e){return e.type!==("a"===u?"added":"removed")}).map(function(e){return e.content})}),m=void 0!==i?p.slice(0,i):p,g=p.length-m.length;return(0,l.Y)(b.ui,{className:"is-".concat(d),css:J.container,background:o,children:(0,l.FD)(h.S,{css:J.file,children:[m.map(function(e,n){return(0,l.Y)(j,{type:d,content:e,numberA:"a"===u&&n+1,numberB:"b"===u&&n+1},n)}),g<=0?null:(0,l.Y)(V,{type:d,changes:g})]})})}var er=(0,u.x)({patch:d.wp.colWithGap(12),truncatedDiffsMessage:[d.wp.pt(4),d.wp.color.foregroundDimmest,d.wp.align.center,d.wp.justify.start]}),ei=/^diff --git /m;function eo(e){return{pathA:e.labelA,pathB:e.labelB,headers:[],binary:!1,hunks:e.hunks}}function ea(e){var n=e.patch,t=e.maxLines,r=e.maxDiffs,u=e.noHeader,d=e.noBorder,m=e.background,v=e.compressed,w=e.minimal,y=e.animate,b=void 0!==y&&y,S=e.onPathClick,Y=e.onViewFullDiff,A=(0,s.useMemo)(function(){return function e(n){return Array.isArray(n)?n.flatMap(function(n){return e(n)}):"string"==typeof n?ei.test(n)?(0,c.yf)(n):[eo((0,c.rj)(n))]:"headers"in n?[n]:[eo(n)]}(n)},[n]),C=(0,s.useMemo)(function(){var e=void 0!==r?Math.min(A.length,r):A.length;if(!v&&e===A.length)return A;for(var n=[],t=0;t<e;t++){var l=A[t];if(!v){n.push(l);continue}n.push((0,o._)((0,i._)({},l),{hunks:l.hunks.map(function(e){return function(e){for(var n,t,r,l,s=(0,a._)(e.lines),c=e.fromA,u=e.fromB,d=e.toA,p=e.toB;(null===(n=s[0])||void 0===n?void 0:n.type)==="same"&&(null===(t=s[1])||void 0===t?void 0:t.type)==="same";)s.shift(),c++,u++;for(;(null===(r=s[s.length-1])||void 0===r?void 0:r.type)==="same"&&(null===(l=s[s.length-2])||void 0===l?void 0:l.type)==="same";)s.pop(),d--,p--;return(0,o._)((0,i._)({},e),{fromA:c,fromB:u,toA:d,toB:p,lines:s})}(e)}).filter(function(e){return e.lines.length>0})}))}return n},[A,r,v]),x=A.length-C.length,k=1===x?"file":"files";return(0,l.FD)(h.S,{css:er.patch,children:[C.map(function(e,n){return w?(0,l.Y)(g,{diff:e,maxLines:t,animate:b},n):(0,l.Y)(Q,{diff:e,maxLines:t,noHeader:u,noBorder:d,background:m,compressed:v,onPathClick:S,onViewFullDiff:Y},n)}),x<=0?null:(0,l.Y)(h.S,{css:er.truncatedDiffsMessage,row:!0,gap:4,children:Y?(0,l.Y)(p.$n,{text:"view in full (".concat(x," more changed ").concat(k,")"),iconLeft:(0,l.Y)(B.A,{}),onClick:function(){return Y({})},variant:"underlinedOnHover",colorway:"primary"}):(0,l.FD)(f.EY,{children:[x," other changed ",k," not shown"]})})]})}},70275:(e,n,t)=>{"use strict";t.d(n,{ue:()=>P,le:()=>L,L5:()=>T});var r=t(29935),i=t(12694),o=t(82643),a=t(1889),l=t(21462),s=t(17844),c=t(12584),u=t(41114),d=t(50175);function p(){var e=(0,c._)(["\n  mutation AgentLobbyUpdateAgentPlanningStatus($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isAgentRepl\n          isInPlanningPhase\n        }\n      }\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,u.J1)(p()),m=t(72004),g=t(26496),v=t(85788),w=t(68209),y=t(2960),b=t(16907),S=t(73978),Y=t(75822),A=t(69098),C=t(662),x=t(66199),k=t(93682),_=t(40043),D=t(35869),E=t(44144),R=t(81879),I=t(40169),F=t.n(I);function T(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v,w,y,b=e.filter(function(e){var n;return(null==e?void 0:null===(n=e.formType)||void 0===n?void 0:n.$kind)==="string"}),S=null==b?void 0:null===(r=b.find(function(e){return"mvp_description"===e.path}))||void 0===r?void 0:null===(t=r.formType)||void 0===t?void 0:null===(n=t.string)||void 0===n?void 0:n.value,Y=null==b?void 0:null===(a=b.find(function(e){return"project_full_list"===e.path}))||void 0===a?void 0:null===(o=a.formType)||void 0===o?void 0:null===(i=o.string)||void 0===i?void 0:i.value,A=null==b?void 0:null===(c=b.find(function(e){return"suggested_features"===e.path}))||void 0===c?void 0:null===(s=c.formType)||void 0===s?void 0:null===(l=s.string)||void 0===l?void 0:l.value,C=null==b?void 0:null===(p=b.find(function(e){return"stack"===e.path}))||void 0===p?void 0:null===(d=p.formType)||void 0===d?void 0:null===(u=d.string)||void 0===u?void 0:u.value.trim(),x=null==b?void 0:null===(m=b.find(function(e){return"technologies"===e.path}))||void 0===m?void 0:null===(h=m.formType)||void 0===h?void 0:null===(f=h.string)||void 0===f?void 0:f.value,k=null!==(y=null==e?void 0:e.filter(function(e){var n;return(null==e?void 0:null===(n=e.formType)||void 0===n?void 0:n.$kind)==="files"}).map(function(e){return e.formType.files.files}).flat())&&void 0!==y?y:[];return{mvpDescription:S,mvpSuccessCriteria:null==b?void 0:null===(w=b.find(function(e){return"mvp_success_criteria"===e.path}))||void 0===w?void 0:null===(v=w.formType)||void 0===v?void 0:null===(g=v.string)||void 0===g?void 0:g.value,projectFullList:Y,suggestedFeatures:A,stack:C,technologies:x,attachments:k}}function P(e){var n,t,c,u=e.sessionId,p=e.onAgentSession,I=(0,g.NC)(),P=(0,w.J2)(u?I.sessions.get(u):I.sessions.lobby),N=(0,l.useMemo)(function(){return null==P?void 0:P.reduce(L,100)},[P]),O=(0,w.G9)(N),M=(0,l.useMemo)(function(){return null==N?void 0:N.result.map(function(e){return e.fields?T(e.fields):null})},[N]),B=(0,w.Rj)(function(){if(!N||!M)return null;var e=M.select(function(e){return!!((null==e?void 0:e.stack)&&(null==e?void 0:e.mvpDescription))}).filter(Boolean),n=N.result.select(function(e){return e.isStreaming});return v.cP.combine(e,n).select(function(e){var n=(0,i._)(e,2),t=n[0],r=n[1];return t&&!r})},[N,M],{default:!1}),H=(0,l.useMemo)(function(){return null==M?void 0:M.map(function(e){if(!e)return null;var n,t,r,i,o=(null==e?void 0:e.projectFullList)||(null==e?void 0:e.suggestedFeatures),a=o?o.split("\n").map(function(e){return e.trim().replace(/^- /,"")}).filter(Boolean):[];return{mvpPrompt:null!==(n=e.mvpDescription)&&void 0!==n?n:"",mvpSuccessCriteria:null!==(t=e.mvpSuccessCriteria)&&void 0!==t?t:"",stack:null!==(r=e.stack)&&void 0!==r?r:"",attachments:e.attachments,followupSteps:a,techStack:null!==(i=e.technologies)&&void 0!==i?i:""}})},[M]),z=(0,w.G9)(H),W=(0,l.useCallback)((n=(0,r._)(function(e){var n;return(0,o.YH)(this,function(t){return[2,null==P?void 0:P.appendEvent({kind:"message",intent:m.qRv.MESSAGE_ACTION_UNKNOWN,message:"",attachedForm:{formType:m.B73.ATTACHED_FORM_TYPE_REPL_CREATION_V1,fields:(0,x.k)(null==O?void 0:null===(n=O.current)||void 0===n?void 0:n.fields,[e])}})]})}),function(e){return n.apply(this,arguments)}),[P,O]),G=(0,b.A)(),V=(0,i._)((t=(0,s._)({},f,void 0),d.n(h,t)),1)[0],j=(0,y.A)(p),Z=(0,l.useCallback)((c=(0,r._)(function(e){var n,t,r,i;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,I.sessions.create({sessionType:m.dF3.AGENT_SESSION})];case 1:if(!(n=o.sent()).ok)return[2];if(t=n.payload,!P)return[3,3];return[4,P.reduce(U,100).result.once()];case 2:return i=o.sent().summary,[3,4];case 3:i="",o.label=4;case 4:return r=i,t.appendEvent({kind:"startRapidBuildEvent",mvpObjective:e.mvpPrompt,mvpSuccessCriteria:e.mvpSuccessCriteria,stack:e.stack,techStack:e.techStack,uploadedFiles:e.attachments.map(function(e){return{fileName:e.name,downloadUrl:e.url}}),followupSteps:e.followupSteps,extraDetails:r}),j.current(t.id,e.mvpPrompt),(0,S.pI)({action:"app_proposal_approved",sessionId:t.id,planText:e.mvpPrompt}),V({variables:{input:{id:G,isInPlanningPhase:!1}}}),[2]}})}),function(e){return c.apply(this,arguments)}),[I,j,G,V,P]),q=(0,w.J2)(M),K=null==q?void 0:q.mvpDescription,$=null==q?void 0:q.stack,J=(null==q?void 0:q.projectFullList)||(null==q?void 0:q.suggestedFeatures),Q=null==q?void 0:q.attachments;return(0,a.Y)(D.S,{clsx:F().root,align:"center",justify:"center",children:(0,a.Y)(D.S,{clsx:F().contentScroll,children:(0,a.FD)(D.S,{gap:8,clsx:F().content,children:[(0,a.FD)(D.S,{gap:16,children:[(0,a.FD)(D.S,{gap:8,children:[(0,a.FD)(D.S,{gap:8,row:!0,align:"center",children:[(0,a.Y)(R.A,{}),(0,a.Y)(_.EY,{variant:"subheadDefault",children:"Proposed app"})]}),K?(0,a.Y)(_.EY,{children:K}):null]}),$?(0,a.Y)(A.bt,{disabled:!B,value:$,setFormField:W}):null,(null==Q?void 0:Q.length)?(0,a.Y)(A.Tr,{files:Q}):null,J?(0,a.Y)(C.k,{features:J}):null]}),(0,a.FD)(D.S,{clsx:F().startBuildingButton,children:[(0,a.Y)(D.S,{css:B&&Y.W}),(0,a.Y)(k.$n,{size:"big",disabled:!B,onClick:function(){(null==z?void 0:z.current)&&Z(z.current)},text:"Start building",colorway:"blurple",iconRight:(0,a.Y)(E.A,{})})]})]})})})}var L={direction:"reverse",state:{fields:null,firstLoading:!0,isStreaming:!0},reducer:function(e,n){var t,r,i,o,a;if((null===(t=e.contents.contents)||void 0===t?void 0:t.$kind)==="messageEventContents"&&e.state===m.qOk.COMPLETE&&e.sender.type===m.utd.AI&&(null===(r=e.contents.contents.messageEventContents.content)||void 0===r?void 0:r.length)&&(n.firstLoading=!1),n.isStreaming=e.state!==m.qOk.COMPLETE,(null===(i=e.contents.contents)||void 0===i?void 0:i.$kind)==="messageEventContents"&&(null===(a=e.contents.contents.messageEventContents.attachedForm)||void 0===a?void 0:null===(o=a.fields)||void 0===o?void 0:o.length)>0)return n.firstLoading=!1,n.fields=e.contents.contents.messageEventContents.attachedForm.fields,!1}},U={direction:"forward",state:{summary:"Conversation Summary:\n"},reducer:function(e,n){var t;if((null===(t=e.contents.contents)||void 0===t?void 0:t.$kind)==="messageEventContents"&&e.state===m.qOk.COMPLETE&&e.contents.contents.messageEventContents.content){var r=e.contents.contents.messageEventContents.content,i=e.sender.type===m.utd.AI?"AI":"User";r.trim()&&("Conversation Summary:\n"!==n.summary&&(n.summary+="\n\n"),n.summary+="".concat(i,": ").concat(r))}}}},71077:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(29935),i=t(17459),o=t(82643),a=t(723),l=t(66757),s=function(e){return e.CHANNEL_OPENED="CHANNEL_OPENED",e.OUTPUT_RECEIVED="OUTPUT_RECEIVED",e.STDERR_RECEIVED="STDERR_RECEIVED",e.STATE_CHANGED="STATE_CHANGED",e}({});function c(e){var n,t=e.container,c=(0,l.Ay)(),u=null,d=!1;function p(){return(p=(0,r._)(function(){return(0,o.YH)(this,function(e){if(d)throw Error("closed");return u?[2,u]:[2,new Promise(function(e){c.once(s.CHANNEL_OPENED,function(n){e(n)})})]})})).apply(this,arguments)}var f="",h="",m=t.openChannel({service:"exec"},function(e){var n=e.channel,t=!1;return n.onCommand(function(e){if(null!=e.output)f+=e.output,c.emit(s.OUTPUT_RECEIVED,e.output);else if(null!=e.stderr)h+=e.stderr,c.emit(s.STDERR_RECEIVED,e.stderr);else if(null!=e.state){if(!t){t=!0;return}c.emit(s.STATE_CHANGED,{state:e.state,outputBuffer:f,stderrBuffer:h}),e.state===a.api.State.Stopped&&(f="",h="")}}),u=n,c.emit(s.CHANNEL_OPENED,n),function(){u=null}});return{request:(n=(0,r._)(function(e){var n,t,r,l,s,c,u,d,f,h;return(0,o.YH)(this,function(o){switch(o.label){case 0:return n=e.env,t=e.args,l=void 0===(r=e.lifecycle)?a.api.Exec.Lifecycle.NON_BLOCKING:r,c=void 0!==(s=e.splitStderr)&&s,u=e.noUserEnv,d=(0,i._)(e,["env","args","lifecycle","splitStderr","noUserEnv"]),[4,function(){return p.apply(this,arguments)}()];case 1:return h=(f=o.sent()).request({exec:{env:n,args:t,lifecycle:l,splitStderr:c,noUserEnv:null!=u&&u}}),l===a.api.Exec.Lifecycle.STDIN&&"stdin"in d&&(f.send({input:d.stdin}),f.send({inputClose:{}})),[2,h]}})}),function(e){return n.apply(this,arguments)}),onOutput:function(e){return c.on(s.OUTPUT_RECEIVED,e),function(){c.off(s.OUTPUT_RECEIVED,e)}},onStderr:function(e){return c.on(s.STDERR_RECEIVED,e),function(){c.off(s.STDERR_RECEIVED,e)}},onStateChanged:function(e){return c.on(s.STATE_CHANGED,e),function(){c.off(s.STATE_CHANGED,e)}},getStatus:function(){return u?u.status:"closed"},dispose:function(){d=!0,m(),u=null}}}},71120:(e,n,t)=>{"use strict";t.d(n,{E:()=>g,e:()=>m});var r=t(83846),i=t(1889),o=t(21462),a=t(72004),l=t(79891),s=t(98089),c=t(6680),u=t(40043),d=t(35869),p=t(10251),f=t.n(p),h=(0,c.CK)("StatusBar.module.css",["--y","--delay"]);function m(e){var n=e.session,t=(0,o.useMemo)(function(){return n.reduce(v,1).result.map(function(e){var n;return n={},(0,r._)(n,h.y,e?"-100%":"0"),(0,r._)(n,h.delay,e?"200ms":"0"),n})},[n]),a=(0,o.useRef)(null);return(0,l.d)(a,t),(0,i.Y)(g,{innerRef:a})}function g(e){return(0,i.Y)(d.S,{row:!0,gap:8,clsx:f().root,innerRef:e.innerRef,children:(0,i.FD)(d.S,{row:!0,gap:8,clsx:f().bar,align:"center",children:[(0,i.Y)(s.l,{loading:!0,size:16}),(0,i.Y)(u.EY,{clsx:f().text,children:"Thinking…"})]})})}var v={direction:"reverse",state:{isThinking:!1},map:function(e){return e.isThinking},reducer:function(e,n){return e.sender.type===a.utd.USER&&(n.isThinking=!0),e.sender.type===a.utd.AI&&(n.isThinking=e.state!==a.qOk.COMPLETE),!1}}},71156:(e,n,t)=>{"use strict";t.d(n,{AI:()=>p,Ou:()=>u,Pd:()=>l,h:()=>c,ob:()=>d});var r=t(21462),i=t(69338),o=t(50140),a=t(17843),l=(0,r.createContext)(void 0);function s(){var e=(0,r.useContext)(l);if(!e)throw Error("Expected store in context");return e}function c(e){var n=s();return(0,i.md)(e,{store:n})}function u(e){return(0,o.yF)((0,r.useCallback)(function(n){return n(e)},[e]),{store:s()})}var d=function(e){var n=s();return(0,i.Xr)(e,{store:n})};function p(e){return(0,a.k)(e,s())}},71498:(e,n,t)=>{"use strict";t.d(n,{X:()=>s});var r=t(12694),i=t(21462),o=t(47993),a=t(62622),l=t(58270);function s(){var e=(0,l.yB)(),n=(0,r._)((0,i.useState)(null),2),t=n[0],s=n[1];return(0,i.useEffect)(function(){var n=function(e){"created"===e.status?s({id:e.session.id,from:e.session.from,to:e.session.to}):"closed"===e.status&&(0,o.flushSync)(function(){s(null)})};if(e){var t=e.transport.sessions.get(a.wG);return t&&n({status:"created",session:t}),e.transport.addEventListener("sessionStatus",n),function(){s(null),e.transport.removeEventListener("sessionStatus",n)}}},[e]),t}},71508:(e,n,t)=>{"use strict";t.d(n,{oR:()=>y,HG:()=>b,s_:()=>S,Ju:()=>Y});var r=t(12694),i=t(21462),o=t(17844),a=t(12584),l=t(41114),s=t(86997),c=t(50175);function u(){var e=(0,a._)(["\n  query ReplConfigIsExtension($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,a._)(["\n  mutation UpdateReplConfigIsExtension(\n    $replId: String!\n    $isExtension: Boolean!\n  ) {\n    updateRepl(input: { id: $replId, isExtension: $isExtension }) {\n      repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,l.J1)(u()),h=(0,l.J1)(d()),m=t(24307),g=t(16907),v=t(67337),w=t(54601);function y(){var e,n=(0,i.useContext)(w.A),t=(0,r._)((0,i.useState)(null!==(e=null==n?void 0:n.replConfigIsExtension)&&void 0!==e&&e),2),o=t[0],a=t[1],l=(0,v.A)().dotReplit;return(0,i.useEffect)(function(){return l.watch(function(e){var n,t,r;a(null!==(r=null===(t=e.config)||void 0===t?void 0:null===(n=t.extension)||void 0===n?void 0:n.isExtension)&&void 0!==r&&r)})},[l]),o}function b(){var e=(0,r._)((0,i.useState)(null),2),n=e[0],t=e[1],o=(0,v.A)().dotReplit;return(0,i.useEffect)(function(){return o.watch(function(e){var n,r,i=null===(r=e.config)||void 0===r?void 0:null===(n=r.extension)||void 0===n?void 0:n.extensionID;i?t((0,m.PM)(i)):t(null)})},[o]),n}var S=function(){var e=(0,v.A)().dotReplit,n=(0,r._)((0,i.useState)(null),2),t=n[0],o=n[1];return(0,i.useEffect)(function(){return e.watch(function(e){var n,t,r=null===(t=e.config)||void 0===t?void 0:null===(n=t.extension)||void 0===n?void 0:n.staticDirectory;r?o({path:r,relativePath:r.replace(/^\.\//,"")}):o(null)})},[e]),t};function Y(){var e,n,t,a,l=(0,g.A)(),u=(e=(0,o._)({},p,{variables:{replId:l}}),s.I(f,e)),d=u.data,m=u.loading,w=u.error,y=(0,r._)((n=(0,o._)({},p,void 0),c.n(h,n)),1)[0],b=!m&&!w&&!!(null==d?void 0:d.repl)&&"Repl"===d.repl.__typename&&null!==(a=null===(t=d.repl.config)||void 0===t?void 0:t.isExtension)&&void 0!==a&&a,S=(0,r._)((0,i.useState)(!1),2),Y=S[0],A=S[1],C=(0,v.A)().dotReplit;(0,i.useEffect)(function(){return C.watch(function(e){var n,t,r;A(null!==(r=null===(t=e.config)||void 0===t?void 0:null===(n=t.extension)||void 0===n?void 0:n.isExtension)&&void 0!==r&&r)})},[C]),(0,i.useEffect)(function(){!m&&!w&&Y!==b&&y({variables:{replId:l,isExtension:Y},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{id:l,__typename:"Repl",config:{__typename:"ReplConfig",isExtension:Y}}}}})},[m,w,l,b,Y,y])}},71713:(e,n,t)=>{"use strict";t.d(n,{j:()=>h});var r=t(1889),i=t(26496),o=t(98089),a=t(28456),l=t(6680),s=t(61234),c=t(43974),u=t(93682),d=t(40043),p=t(35869),f=(0,s.x)({root:[c.wp.center,c.wp.p(8),c.wp.colWithGap(8),c.wp.borderRadius(),c.wp.border({color:l.LU.outlineDimmest})]});function h(e){var n=e.onNewSession,t=(0,a.M)();return(0,r.FD)(p.S,{css:f.root,style:t?{margin:"0 ".concat(l.LU.space8)}:void 0,children:[(0,r.Y)(d.EY,{variant:"small",color:"dimmer",children:"This chat has ended"}),(0,r.Y)(u.$n,{iconLeft:(0,r.Y)(o.l,{size:16}),onClick:n,text:"Start a new ".concat(i.g$," chat")})]})}},71895:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(80865);function i(){return(0,r._P)({controlName:"flag-smooth-agent"})}},71906:(e,n,t)=>{"use strict";t.d(n,{FZ:()=>c,Rf:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query ThreadsByFileHook($replId: String!, $path: String!) {\n    threadsByFile(replId: $replId, path: $path) {\n      ... on ThreadsByFileResult {\n        threads {\n          id\n          path\n          otVersion\n          indexStart\n          indexEnd\n          messageCount\n          unreadCount\n          user {\n            id\n            image\n            username\n          }\n          participants {\n            id\n            image\n            username\n          }\n          isGeneral\n          isResolved\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n=(0,r._)({},s,e);return a.I(c,n)}},72188:(e,n,t)=>{"use strict";t.d(n,{F:()=>o});var r=t(12584);function i(){var e=(0,r._)(["\n  fragment BuildStatusBadgeHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n      timeCreated\n      user {\n        id\n        displayName\n      }\n    }\n  }\n"]);return i=function(){return e},e}var o=(0,t(41114).J1)(i())},72542:(e,n,t)=>{"use strict";t.d(n,{K:()=>z});var r=t(12694),i=t(1889),o=t(21462),a=t(29935),l=t(82643),s=t(72004),c=t(80865),u=t(81239),d=t(73978),p=t(93682),f=t(24692),h=t(31618),m=t(40043),g=t(35869);function v(e){var n=e.showHeading,t=e.onSubmit,a=(0,r._)((0,o.useState)(""),2),l=a[0],s=a[1];return(0,i.Y)(f.lV,{onSubmit:function(e){e.preventDefault(),t(l)},children:(0,i.FD)(g.S,{gap:8,children:[void 0===n||n?(0,i.FD)(g.S,{gap:2,children:[(0,i.Y)(m.Y9,{variant:"subheadDefault",level:1,children:"Feedback"}),(0,i.Y)(m.EY,{color:"dimmer",children:"All feedback is reviewed by the Replit team."})]}):null,(0,i.FD)(g.S,{gap:8,style:{minHeight:120},children:[(0,i.Y)(h.ov,{placeholder:"Please share bugs, feature requests, and anything else related to your experience...",autoSize:!0,value:l,onChange:function(e){return s(e.currentTarget.value)},autoFocus:!0}),(0,i.Y)(p.$n,{colorway:"primary",text:"Send feedback",type:"submit"})]})]})})}var w=t(86105),y=t(6680),b=t(61234),S=t(47258),Y=t(43974),A=t(4930),C=t(18063),x=t(90821),k=t(4835),_=t(17844),D=t(93629),E=t(84296);function R(e){return(0,i.Y)(E.Ay,(0,D._)((0,_._)({},e),{children:(0,i.Y)("path",{fillRule:"evenodd",d:"M7.945 3.052a1.25 1.25 0 0 0-.835-.302h-3a1.25 1.25 0 0 0-1.243 1.357 19.04 19.04 0 0 0 2.953 8.335l.003.006a18.75 18.75 0 0 0 5.77 5.769l.005.004a19.04 19.04 0 0 0 8.296 2.953 1.25 1.25 0 0 0 1.356-1.251V16.901a1.25 1.25 0 0 0-1.072-1.268 13.592 13.592 0 0 1-2.97-.74l-.002-.001a1.251 1.251 0 0 0-1.317.28l-.002.001-1.267 1.267a.75.75 0 0 1-.9.122 16.75 16.75 0 0 1-6.282-6.281.75.75 0 0 1 .122-.901L8.828 8.11a1.25 1.25 0 0 0 .28-1.317v-.002a13.59 13.59 0 0 1-.741-2.97 1.25 1.25 0 0 0-.422-.77ZM7.107 1.25a2.75 2.75 0 0 1 2.747 2.372c.119.904.34 1.791.659 2.645A2.75 2.75 0 0 1 9.89 9.17l-.858.858a15.249 15.249 0 0 0 4.94 4.94l.86-.86v-.001a2.75 2.75 0 0 1 2.901-.62 12.085 12.085 0 0 0 2.652.66 2.75 2.75 0 0 1 2.365 2.781v2.99a2.752 2.752 0 0 1-3.011 2.748 20.54 20.54 0 0 1-8.954-3.185 20.25 20.25 0 0 1-6.226-6.226 20.54 20.54 0 0 1-3.186-9.007A2.75 2.75 0 0 1 4.11 1.25h2.998Z",clipRule:"evenodd"})}))}var I=[Y.wp.borderRadius(),Y.wp.px(12),Y.wp.py(16),S.b.filled,Y.wp.hover({backgroundColor:y.LU.accentPrimaryDimmer}),Y.wp.width("50%"),Y.wp.justify.center,Y.wp.flex.column],F=(0,b.x)({container:I,containerActive:(0,w._)(I).concat([Y.wp.backgroundColor.accentPrimaryDimmest,Y.wp.border({color:y.LU.accentPrimaryDimmer})]),headline:[Y.wp.fontWeight.medium],premiumPill:[Y.wp.display.inlineBlock,Y.wp.height("20px"),{verticalAlign:"middle"}],text:[Y.wp.width("100%")]});function T(e){var n=e.optionKey,t=e.icon,r=e.headline,o=e.description,a=e.isPremium,l=e.isActive,s=e.setSelectedOption;return(0,i.FD)(g.S,{css:l?F.containerActive:F.container,gap:6,onClick:function(){s(n)},children:[(0,i.FD)(g.S,{row:!0,gap:4,align:"center",children:[t,(0,i.Y)(m.EY,{variant:"subheadDefault",css:F.headline,children:r}),a?(0,i.Y)(C.a,{colorway:"green",text:"Premium",css:F.premiumPill}):null]}),(0,i.Y)(g.S,{row:!0,gap:4,align:"center",children:(0,i.Y)(m.EY,{variant:"small",color:"dimmer",css:F.text,children:o})})]})}var P=(0,b.x)({callOptionContainer:[Y.wp.width("100%"),Y.wp.flex.column,Y.wp.align.center,Y.wp.justify.center,Y.wp.height("100px"),Y.wp.border({color:y.LU.outlineDimmer}),Y.wp.borderRadius()],helpButtonContainer:[Y.wp.pr(6),{"@media (max-width: 600px)":{flexDirection:"column"}}]});function L(e){var n=e.onSubmit,t=(0,r._)((0,o.useState)(null),2),a=t[0],l=t[1],s=[{optionKey:"call",icon:(0,i.Y)(R,{size:20}),headline:"Schedule a call",description:"Have a discussion with a Replit employee over a video call.",isPremium:!0},{optionKey:"feedback",icon:(0,i.Y)(k.A,{size:20}),headline:"Share feedback & bugs",description:"Tell us about your experience. Feedback is reviewed by the Replit team."}];return(0,i.FD)(g.S,{gap:8,children:[(0,i.Y)(m.EY,{variant:"headerDefault",children:"Talk to us"}),(0,i.Y)(g.S,{row:!0,gap:8,css:P.helpButtonContainer,children:s.map(function(e){return(0,i.Y)(T,{icon:e.icon,headline:e.headline,description:e.description,isPremium:e.isPremium,optionKey:e.optionKey,isActive:a===e.optionKey,setSelectedOption:l},e.optionKey)})}),"call"===a?(0,i.Y)(g.S,{css:P.callOptionContainer,children:(0,i.Y)(A.v,{iconLeft:(0,i.Y)(x.A,{}),text:"Select a time to chat",colorway:"blue",target:"_blank",href:"https://calendly.com/kody-low-repl/replit-support"})}):null,"feedback"===a?(0,i.Y)(v,{showHeading:!1,onSubmit:function(e){n(e),l(null)}}):null]})}var U=t(23161),N=t(9907),O=t(44885);let M=function(e){var n=(0,U.A)(),t=(0,N.jl)(),a=(0,r._)((0,o.useState)(0),2),l=a[0],s=a[1],c=(0,o.useRef)(null),u="visualViewport"in window;(0,o.useEffect)(function(){if(!n){s(0);return}if(t&&u){var e=window.visualViewport;if(!e)return;var r=function(){s(window.innerHeight-e.height-e.offsetTop)};return r(),e.addEventListener("resize",r),e.addEventListener("scroll",r),function(){e.removeEventListener("resize",r),e.removeEventListener("scroll",r)}}n&&s(20)},[n,t,u]);var d=(0,o.useMemo)(function(){var t;return(0,D._)((0,_._)({},e.underlayProps||{}),{style:(0,D._)((0,_._)({},(null===(t=e.underlayProps)||void 0===t?void 0:t.style)||{}),{paddingBottom:n?l:void 0})})},[e.underlayProps,n,l]);return(0,i.Y)(O.a,(0,D._)((0,_._)({},e),{underlayProps:d,className:e.className,children:(0,i.Y)("div",{ref:c,children:e.children})}))};var B=(0,b.x)({container:[Y.wp.minWidth("300px"),{maxWidth:"90vw","@media (max-width: 600px)":{minWidth:"90vw"}}]});function H(e){var n,t=e.isOpen,r=e.onClose,p=e.onSubmit,f=e.session,h=e.source,m=void 0===h?"header":h,g=(0,u.A)(),w=g.showConfirm,y=g.showError,b=(n=(0,a._)(function(e){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:if(!f)return[2];return[4,f.submitUserFeedback({type:s.O3q.AGENT_FEEDBACK_UNKNOWN,comment:e})];case 1:return(null==(n=t.sent())?void 0:n.ok)?w("Feedback received."):y("Failed to send feedback. Please try again."),null==p||p(e),r(),[2]}})}),function(e){return n.apply(this,arguments)}),S=(0,c._P)({controlName:"flag-top-ai-spenders",type:"boolean"});return(0,o.useEffect)(function(){t&&f&&(0,d.pI)({action:"open_feedback_modal_from_".concat(m),sessionId:f.id})},[t,f,m]),(0,i.Y)(M,{isOpen:t,onRequestClose:r,centered:!0,css:B.container,children:S?(0,i.Y)(L,{onSubmit:b}):(0,i.Y)(v,{onSubmit:b})})}function z(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"command",t=arguments.length>2?arguments[2]:void 0,a=(0,r._)((0,o.useState)(!1),2),l=a[0],s=a[1],c=(0,o.useCallback)(function(){s(!0)},[]),u=(0,o.useCallback)(function(){s(!1)},[]),d=(0,o.useCallback)(function(){return e?(0,i.Y)(H,{isOpen:l,onClose:u,session:e,source:n,onSubmit:t}):null},[l,e,u,n,t]);return{openFeedbackModal:c,closeFeedbackModal:u,FeedbackModal:d}}},72618:(e,n,t)=>{"use strict";t.d(n,{$1:()=>l,jy:()=>o,mV:()=>a});var r=t(45771),i=t(6680),o=(0,r.AH)({position:"relative",overflowY:"auto",width:"100%",height:"100%",zIndex:3}),a=(0,r.AH)({position:"relative",overflowY:"auto",width:"100%",height:"100%",fontSize:"14px",backgroundColor:i.LU.backgroundDefault}),l=(0,r.AH)({display:"flex",alignItems:"stretch",width:"100%",height:"100%","& > .cm-editor":{flex:"1 1 auto",width:"100%"}})},72727:(e,n,t)=>{"use strict";t.d(n,{N:()=>cj});var r,i,o,a,l,s,c,u,d=t(17844),p=t(93629),f=t(12694),h=t(86105),m=t(1889),g=t(21462),v=t(75152),w=t(24998),y=t(44370),b=t(44725),S=t(3443),Y=t(4039),A=t(77703),C=t(94216),x=t(45941),k=t(8550),_=t(67668),D=t(80481),E=t(70906),R=t(93415),I=t(72004),F=t(26496),T=t(96907),P=t.n(T),L=t(6268),U=t(84789),N=t(23161),O=t(9907),M=t(20160),B=t(61234),H=t(43974),z=t(35869),W=t(84296);function G(e){return(0,m.Y)(W.Ay,(0,p._)((0,d._)({},e),{children:(0,m.Y)("path",{fillRule:"evenodd",d:"M9.53 3.47a.75.75 0 0 0-1.06 0l-5 5a.75.75 0 0 0 0 1.06l5 5a.75.75 0 0 0 1.06-1.06L5.81 9.75H16A3.25 3.25 0 0 1 19.25 13v7a.75.75 0 0 0 1.5 0v-7A4.75 4.75 0 0 0 16 8.25H5.81l3.72-3.72a.75.75 0 0 0 0-1.06Z",clipRule:"evenodd"})}))}function V(e){return(0,m.Y)(W.Ay,(0,p._)((0,d._)({},e),{children:(0,m.Y)("path",{fillRule:"evenodd",d:"M14.47 3.47a.75.75 0 0 1 1.06 0l5 5a.75.75 0 0 1 0 1.06l-5 5a.75.75 0 1 1-1.06-1.06l3.72-3.72H8A3.25 3.25 0 0 0 4.75 13v7a.75.75 0 0 1-1.5 0v-7A4.75 4.75 0 0 1 8 8.25h10.19l-3.72-3.72a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}var j=(0,B.x)({root:[H.wp.height(48),H.wp.backgroundColor.backgroundRoot,H.wp.display.flex,H.wp.justify.spaceBetween,H.wp.align.stretch,{fontFamily:"Monaco, Menlo, 'Ubuntu Mono', Consolas, source-code-pro, monospace",button:[H.wp.color.foregroundDefault,H.wp.fontSize(16),H.wp.flex.growAndShrink(1),{padding:"10px",fontFamily:"inherit",backgroundColor:"transparent",border:"0 none",flexBasis:"auto"}]}],fixedContainer:[H.wp.position.fixed,H.wp.width("100%"),H.wp.zIndex(100),H.wp.left(0)]}),Z=function(e){var n=e.buttons,t=e.onClick,r=e.onUndo,i=e.onRedo;return(0,m.FD)("nav",{css:j.root,children:[n.map(function(e){return(0,m.Y)("button",{onClick:function(n){n.stopPropagation(),n.preventDefault(),t(e)},children:void 0!==e.label?e.label:e.value},e.value)}),(0,m.Y)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),r()},children:(0,m.Y)(G,{})}),(0,m.Y)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),i()},children:(0,m.Y)(V,{})})]})},q=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],K=function(e){var n=e.path,t=(0,h._)(q).concat([{value:"= ",cursorOffset:2}]);return n.endsWith(".html")&&(t.unshift({value:"<>",cursorOffset:1}),t.unshift({label:"div",value:"<div></div>",cursorOffset:5})),t},$="visualViewport"in window;function J(e){var n=e.filePath,t=e.isLoading,r=(0,M.fZ)(),i=(0,U.a)({tablet:!1}),o=(0,O.jl)(),a=(0,N.A)();(0,g.useEffect)(function(){a&&r&&r.requestMeasure({read:function(){return{cursor:r.coordsAtPos(r.state.selection.main.head),scroller:r.scrollDOM.getBoundingClientRect()}},write:function(e){var n=e.cursor,t=e.scroller;if(n){var i=(n.top+n.bottom)/2,a=(t.top+t.bottom)/2;Math.abs(i-a)>5&&(r.scrollDOM.scrollTop+=i-a+50*!!o)}}})},[a,r,o]);var l=(0,f._)((0,g.useState)(0),2),s=l[0],c=l[1];if((0,g.useEffect)(function(){if(o){var e=window.visualViewport;if($&&e){var n=P()(function(){c(window.innerHeight-e.height-e.offsetTop)},100);return e.addEventListener("scroll",n),e.addEventListener("resize",n),function(){e.removeEventListener("scroll",n),e.removeEventListener("resize",n)}}}},[o]),!a||t||!i)return null;var u=(0,m.Y)(Z,{onUndo:function(){r&&((0,L.tN)(r),r.focus())},onRedo:function(){r&&((0,L.ZS)(r),r.focus())},onClick:function(e){if(r){var n,t=null!==(n=r.state.selection.ranges[0].from)&&void 0!==n?n:0;r.dispatch({changes:{from:t,insert:e.value},selection:{anchor:t+e.cursorOffset}}),r.focus()}},buttons:K({path:n})});return!o||$?(0,m.Y)(z.S,{css:j.fixedContainer,style:{bottom:s},children:u}):u}var Q=t(68221),X=t(10908),ee=t(67084),en=t(14545),et=t(17459),er=t(49069),ei=t(29935),eo=t(37743),ea=t(82643),el=t(23099),es=t.n(el),ec=t(45773),eu=t(23244),ed=t(75156),ep=t(92638),ef=t(92537),eh=t(68321),em=t(51578),eg=t(78596);function ev(e){var n,t;return null!==(t=null===(n=e.facet(ep.q))||void 0===n?void 0:n.isDocumentSymbolSupported)&&void 0!==t&&t}var ew=er.Pe.define(),ey=er.sU.define({create:function(){return null},update:function(e,n){var t=e;return(0,ef.C)(n,ew,function(e){t=e.value}),t}});function eb(){return(eb=(0,ei._)(function(e,n,t){var r,i,o,a,l,s,c,u,d;return(0,ea.YH)(this,function(p){switch(p.label){case 0:return[4,e.request.documentSymbol(n,{signal:t})];case 1:if(!(r=p.sent())||r.cancelled||!(i="result"in r&&!r.cancelled?r.result:null))return[2,null];o=[],a=!0,l=!1,s=void 0;try{for(c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)(d=u.value)&&"range"in d&&o.push(d)}catch(e){l=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}return[2,o.length?o:null]}})})).apply(this,arguments)}function eS(e){if("Debounced function cancelled"!==e.message)throw e}var eY=er.sU.define({create:function(){return[]},update:function(e,n){if(!(0,eu.$H)(n,ey,"selection"))return e;var t=n.state.field(ey);return t?function e(n,t,r){var i=r.find(function(e){var r=e.range;return(0,eh.TU)(n,r.end)>=t&&(0,eh.TU)(n,r.start)<=t});return null==i?[]:i.children?[i].concat(e(n,t,i.children)):[i]}(n.state.doc,n.state.selection.main.head,t):[]},compare:es()}),eA=t(26841),eC=t(71499),ex=t(58555),ek=t(86846),e_=t(37094),eD=t(6680),eE=t(92264),eR=t(90953),eI=t(76611),eF=t(1542),eT=t(6865),eP=t(13903),eL=t(60576),eU=t(12249),eN=t(56450),eO=t(17367),eM=t(5445),eB=t(90417),eH=t(32955),ez=function(e){var n=new Set(e_.A),t=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=(0,f._)(a.value,3),c=s[0],u=s[1],d=s[2];if(!n.has(c))throw Error("Symbol not supported by LSP client. Please add to the supported symbol icons array");t.set(c,[u,null!=d?d:eD.LU.foregroundDefault])}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t}([[ek.SymbolKind.Array,eO.A],[ek.SymbolKind.Boolean,eU.A],[ek.SymbolKind.Class,eR.A,eD.LU.yellowDefault],[ek.SymbolKind.Constant,eI.A,eD.LU.blueStronger],[ek.SymbolKind.Constructor,eP.A,eD.LU.blurpleDefault],[ek.SymbolKind.Enum,function(e){return(0,m.Y)(W.Ay,(0,p._)((0,d._)({},e),{children:(0,m.Y)("path",{fillRule:"evenodd",d:"M7.25 5A2.75 2.75 0 0 1 10 2.25h9A2.75 2.75 0 0 1 21.75 5v5A2.75 2.75 0 0 1 19 12.75h-.5a.75.75 0 0 1 0-1.5h.5c.69 0 1.25-.56 1.25-1.25V5c0-.69-.56-1.25-1.25-1.25h-9c-.69 0-1.25.56-1.25 1.25v4a.75.75 0 0 1-1.5 0V5Zm3 1a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5h-7a.75.75 0 0 1-.75-.75Zm0 3a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5h-7a.75.75 0 0 1-.75-.75Zm-8 5A2.75 2.75 0 0 1 5 11.25h9A2.75 2.75 0 0 1 16.75 14v5A2.75 2.75 0 0 1 14 21.75H5A2.75 2.75 0 0 1 2.25 19v-5ZM5 12.75c-.69 0-1.25.56-1.25 1.25v5c0 .69.56 1.25 1.25 1.25h9c.69 0 1.25-.56 1.25-1.25v-5c0-.69-.56-1.25-1.25-1.25H5ZM5.25 15a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75Zm0 3a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))},eD.LU.orangeDefault],[ek.SymbolKind.EnumMember,eH.A,eD.LU.blueStronger],[ek.SymbolKind.Event,eE.A],[ek.SymbolKind.Field,eB.A],[ek.SymbolKind.File,eT.A],[ek.SymbolKind.Function,eP.A,eD.LU.blurpleStronger],[ek.SymbolKind.Interface,function(e){return(0,m.Y)(W.Ay,(0,p._)((0,d._)({},e),{children:(0,m.Y)("path",{fillRule:"evenodd",d:"M17 7.75a4.25 4.25 0 1 0 0 8.5 4.25 4.25 0 0 0 0-8.5Zm-5.701 3.5a5.751 5.751 0 1 1 0 1.5H6.646a2.751 2.751 0 1 1 0-1.5H11.3ZM4 10.75a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z",clipRule:"evenodd"})}))},eD.LU.blueStronger],[ek.SymbolKind.Key,eL.A],[ek.SymbolKind.Method,eP.A,eD.LU.blurpleDefault],[ek.SymbolKind.Module,eM.A,eD.LU.purpleDefault],[ek.SymbolKind.Namespace,eF.A],[ek.SymbolKind.Object,eU.A,eD.LU.blueDimmer],[ek.SymbolKind.Operator,eU.A],[ek.SymbolKind.Package,eM.A,eD.LU.purpleDefault],[ek.SymbolKind.Property,eB.A],[ek.SymbolKind.String,eN.A],[ek.SymbolKind.Struct,eF.A],[ek.SymbolKind.TypeParameter,eH.A],[ek.SymbolKind.Variable,eH.A,eD.LU.blueStronger]]);function eW(e){var n,t=e.kind,r=e.size,i=(0,f._)(null!==(n=ez.get(t))&&void 0!==n?n:[eU.A,eD.LU.foregroundDefault],2),o=i[0],a=i[1];return(0,m.Y)(o,{color:a,size:void 0===r?16:r})}var eG=t(63892),eV=t(13777),ej=t(49785),eZ=t(56161),eq=t(45771),eK=t(47258),e$=(0,eq.AH)([eK.b.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),eJ={button:(0,eq.AH)([H.wp.reset.button,H.wp.p(2),H.wp.rowWithGap(4),H.wp.align.center,e$]),text:(0,eq.AH)({fontSize:eD.LU.fontSizeSmall})},eQ={opacity:1};function eX(e){var n=e.icon,t=e.text,r=e.innerRef,i=e.ariaProps,o=e.active,a=(0,eV.s)(i,r).buttonProps,l=(0,ej.M)({}),s=l.hoverProps,c=l.isHovered;return(0,m.FD)(z.S,(0,p._)((0,d._)({tag:"button",css:eJ.button,style:c||o?eQ:void 0,innerRef:r},(0,eZ.v)(a,s)),{children:[n?(0,g.cloneElement)(n,{size:12}):null,(0,m.Y)(z.S,{css:eJ.text,children:t})]}))}var e0={root:(0,eq.AH)([H.wp.p(4),H.wp.rowWithGap(4),H.wp.align.center]),text:(0,eq.AH)([H.wp.truncate,H.wp.flex.growAndShrink(1),{fontSize:eD.LU.fontSizeDefault}])};function e1(e){return(0,m.FD)(z.S,{css:[e0.root],children:[e.icon?(0,g.cloneElement)(e.icon,{size:16}):null,(0,m.Y)(z.S,{css:e0.text,children:e.text})]})}var e2=t(43803),e4=t(43010),e5=t(62883),e8=(0,eq.AH)([H.wp.p(4)]);function e3(e){var n=e.items,t=e.children,r=e.menuProps,i=e.selectedKeys,o=e.onAction,a=(0,e2.p)({items:n,children:t,selectedKeys:i,selectionMode:"single"}),l=(0,g.useRef)(null),s=(0,e4.b)((0,d._)({items:n,onAction:o},r),a,l);return(0,m.Y)(z.S,(0,p._)((0,d._)({},s.menuProps),{innerRef:l,css:e8,children:(0,h._)(a.collection).map(function(e){return(0,m.Y)(e9,{item:e,state:a},e.key)})}))}var e6={root:(0,eq.AH)([H.wp.flex.row,H.wp.align.center,H.wp.position.relative,e$]),selected:(0,eq.AH)([{opacity:1,backgroundColor:eD.LU.interactiveBackground}])},e7={opacity:1};function e9(e){var n=e.item,t=e.state,r=(0,g.useRef)(null),i=(0,e5.O)({key:n.key},t,r),o=i.menuItemProps,a=i.isSelected,l=(0,ej.M)({}),s=l.hoverProps,c=l.isHovered;return(0,m.Y)(z.S,(0,p._)((0,d._)({innerRef:r,css:[e6.root,a&&e6.selected],style:c||a?e7:void 0},(0,eZ.v)(o,s)),{children:n.rendered}))}var ne=t(61571),nn=t(82018),nt=t(56709),nr=t(3293),ni=t(2527),no={underlay:(0,eq.AH)([H.wp.coverContainer,H.wp.position.fixed]),surface:(0,eq.AH)([H.wp.borderRadius(8),{boxShadow:eD.LU.shadow2,border:"1px solid",borderColor:eD.LU.backgroundHighest}])};function na(e){var n=e.state,t=e.triggerRef,r=e.placement,i=e.children,o=(0,f._)((0,nr.A)("Popover"),2),a=o[0],l=o[1],s=(0,ne.f)({placement:r,triggerRef:t,popoverRef:a,offset:8},n),c=s.popoverProps,u=s.underlayProps;return(0,m.FD)(nn.hJ,{children:[(0,m.Y)(z.S,(0,p._)((0,d._)({},u),{css:no.underlay})),(0,m.FD)(ni.ui,(0,p._)((0,d._)({elevated:!0,css:no.surface,innerRef:l},c),{children:[(0,m.Y)(nt.R,{onDismiss:n.close}),i,(0,m.Y)(nt.R,{onDismiss:n.close})]}))]})}var nl=t(1018);function ns(e){return CSS.escape(e.name)}function nc(e){var n=e.selectedSymbol,t=e.symbols,r=e.moveCursor,i=e.icon,o=e.text,a=(0,eC.I)({onOpenChange:function(e){e&&(0,eG.u4)(eG.AZ.CODE_NAVIGATION_USED,{action:"opened"})}}),l=(0,g.useRef)(null),s=(0,ex.V)({},a,l),c=s.menuTriggerProps,u=s.menuProps,d=n?new Set([n.name]):void 0;return(0,m.FD)(m.FK,{children:[(0,m.Y)(eX,{text:o,icon:i,innerRef:l,ariaProps:c,active:a.isOpen}),a.isOpen?(0,m.Y)(na,{triggerRef:l,state:a,placement:"bottom left",children:(0,m.Y)(e3,{menuProps:u,items:t,selectedKeys:d,onAction:function(e){var n=t.find(function(n){return ns(n)===e});n&&(r(n.selectionRange.start),(0,eG.u4)(eG.AZ.CODE_NAVIGATION_USED,{action:"jumped"}))},children:function(e){return(0,m.Y)(eA.q,{children:(0,m.Y)(e1,{icon:(0,m.Y)(eW,{kind:e.kind}),text:e.name})},ns(e))}})}):null]})}var nu=(0,g.memo)(function(e){var n=e.symbols,t=e.symbolsPath,r=e.moveCursor,i=t.length?t[t.length-1]:null,o=i?i.children:n;return(0,m.FD)(m.FK,{children:[t.map(function(e,i){var o=0===i?n:t[i-1].children;return o?(0,m.FD)(g.Fragment,{children:[(0,m.Y)(nl.A,{size:12}),(0,m.Y)(nc,{symbols:o,icon:(0,m.Y)(eW,{size:12,kind:e.kind}),text:e.name,selectedSymbol:e,moveCursor:r})]},ns(e)):null}),(null==o?void 0:o.length)?(0,m.FD)(m.FK,{children:[(0,m.Y)(nl.A,{size:12}),(0,m.Y)(nc,{symbols:o,text:"...",moveCursor:r})]}):null]})}),nd=(0,g.memo)(function(e){var n,t=e.view,r=(0,g.useCallback)(function(e){null==t||t.dispatch({scrollIntoView:!0,selection:er.OF.cursor((0,eh.TU)(t.state.doc,e))}),null==t||t.focus()},[t]),i=(0,g.useDeferredValue)({symbols:(0,k.Vn)(t,ey),symbolsPath:(0,k.Vn)(t,eY)});return(null===(n=i.symbols)||void 0===n?void 0:n.length)?(0,m.Y)(nu,{symbols:i.symbols,symbolsPath:i.symbolsPath||[],moveCursor:r}):null}),np=t(71043),nf=t(31425),nh=t(26969),nm=t(49937),ng=t(74130),nv=t(88272),nw=t(56185),ny=(0,g.memo)(function(e){var n=e.path,t=e.performPaneOperation,r=e.isReadOnly,i=(0,M.fZ)(),o=(0,g.useCallback)(function(e){t({operation:"open",pane:(0,nf.af)(e)})},[t]);return(0,m.FD)(nf.Y9,{children:[(0,m.Y)(nf.Bm,{children:(0,m.Y)(np.D,{path:n,onFileClick:o,children:(0,m.Y)(nd,{view:i})})}),(0,m.Y)(nf.Yw,{children:(0,m.Y)(nb,{path:n,performPaneOperation:t,isReadOnly:r})})]})});function nb(e){return(0,m.FD)(m.FK,{children:[(0,m.Y)(nS,(0,d._)({},e)),(0,m.Y)(nY,(0,d._)({},e)),(0,m.Y)(nA,(0,d._)({},e)),(0,m.Y)(nC,(0,d._)({},e))]})}function nS(e){var n=e.path,t=(0,et._)(e,["path"]),r=(0,M.fZ)(),i=(0,k.Vn)(r,A.cS),o=(0,k.Vn)(r,A.hb),a=i||t.isReadOnly;return o&&r?(0,m.Y)(nh.k,{dataCy:"ws-format-btn",altText:"Format "+(0,_.WP)(n),buttonText:"Format",disabled:a,"aria-disabled":!!a||void 0,icon:i?(0,m.Y)(nw.A,{}):(0,m.Y)(nv.A,{}),onClick:function(){i||(0,A.BD)(r)}}):null}function nY(e){var n=e.path,t=e.performPaneOperation;return(0,_.e$)(n)?(0,m.Y)(nh.k,{altText:"Preview "+(0,_.WP)(n),buttonText:"Preview",icon:(0,m.Y)(ng.A,{}),onClick:function(){t({operation:"replace",pane:{type:"markdown",data:{path:n}}})}}):null}function nA(e){var n=e.path,t=e.performPaneOperation;return(0,_.Z7)(n)?(0,m.Y)(nh.k,{altText:"Preview "+(0,_.WP)(n),buttonText:"Preview",icon:(0,m.Y)(ng.A,{}),onClick:function(){t({operation:"replace",pane:{type:"media",data:{path:n}}})}}):null}function nC(e){var n=e.path,t=e.performPaneOperation,r=(0,nm.vO)();return(0,_.Zy)(n)?(0,m.Y)(nh.k,{altText:"Toggle Preview",buttonText:"Preview",icon:(0,m.Y)(ng.A,{}),onClick:function(){var e=r();t({operation:"replace",pane:{type:"csvPreview",data:{path:n,line:null==e?void 0:e.position.line}}})}}):null}var nx=t(4124),nk=t.n(nx),n_=t(83165),nD=t.n(n_),nE=t(18435),nR=t(99672),nI=t(30391),nF=t(67337),nT=t(54044),nP=new nR.k(function(e,n,t){return(0,nE.aQ)(e,n?(0,nT.vB)(n):null,t)}),nL=t(49881),nU=new nR.k(function(e){return e?ec.Lz.domEventObservers({keydown:function(e,n){(0,nL.A)(n,{message:"Editing is disabled while the agent is working",offset:n.state.selection.main.from,ignoreKeydown:!0})}}):null}),nN=t(90378),nO=t(64678),nM=t.n(nO),nB="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><circle cx="10" cy="10" r="10" fill="black" /></svg>\')',", linear-gradient(transparent, transparent)"),nH="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" d="M2.5 10H15.5M15.5 10L9.5 5M15.5 10L9.5 15M18 4V16"/></svg>\')',", linear-gradient(transparent, transparent)"),nz=ec.Lz.theme({".cm-vws-space":{backgroundColor:eD.LU.foregroundDimmest,maskImage:nB,maskSize:"0.375ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":nB,"-webkit-mask-size":"0.375ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325},"&.cm-vws-enclosed":{opacity:.5},"&.cm-vws-trailing":{opacity:.5},"&.cm-vws-selected":{opacity:.75}},".cm-vws-tab":{backgroundColor:eD.LU.foregroundDimmest,maskImage:nH,maskSize:"1.75ch 1.75ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":nH,"-webkit-mask-size":"1.75ch 1.75ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325,maskPosition:"left min(95%, 0.25ch) top 50%","-webkit-mask-position":"left min(95%, 0.25ch) top 50%"},"&.cm-vws-enclosed, &.cm-vws-trailing":{opacity:.5,maskPosition:"calc(50% - 0.25ch) 50%","-webkit-mask-position":"calc(50% - 0.25ch) 50%"},"&.cm-vws-selected":{opacity:.75}}}),nW=nM()(function(e,n,t){var r="cm-vws-".concat(" "===e?"space":"tab"," cm-vws-").concat(n).concat(t?" cm-vws-selected":"");return ec.NZ.mark({class:r})},function(e,n,t){return"".concat(e,"-").concat(n,"-").concat(t)});function nG(e,n,t){var r=e.facet(nZ);if(!r.leading&&!r.enclosed&&!r.trailing&&!r.selected)return[];for(var i=[],o=e.doc.lineAt(n),a=e.doc.lineAt(t),l=o.number;l<=a.number;l++)!function(o){var a=e.doc.line(o),l=a.text.length;if(0!==l){var s=0===a.text.trim().length,c=!!r.selected&&e.selection.ranges.some(function(e){return!e.empty&&e.from<a.to&&e.to>=a.from});if(r.leading||r.enclosed||r.trailing||c){if(s){if(r.leading||r.trailing||c)for(var u=0;u<l;u++)!function(o){var l=a.text[o],s=a.from+o;if(!(s<n)&&!(s>=t)&&(" "===l||"	"===l)){var u=c&&e.selection.ranges.some(function(e){return e.from<=s&&e.to>s});(r.leading||r.trailing||u)&&i.push(nW(l,"trailing",u).range(s,s+1))}}(u);return}for(var d=l-a.text.trimStart().length,p=a.text.trim().length,f=0;f<l;f++)!function(o){var l=a.text[o],s=a.from+o;if(!(s<n)&&!(s>=t)&&(" "===l||"	"===l)){var u=void 0;u=o>=d+p?"trailing":o>d?"enclosed":"leading";var f=c&&e.selection.ranges.some(function(e){return e.from<=s&&e.to>s});(r[u]||f)&&i.push(nW(l,u,f).range(s,s+1))}}(f)}}}(l);return i}var nV=function(){function e(n){(0,eo._)(this,e),this.decorations=ec.NZ.set(nG(n.state,0,n.state.doc.length))}return e.prototype.update=function(e){if((0,eu.$H)(e,nZ)){this.decorations=ec.NZ.set(nG(e.state,0,e.state.doc.length));return}var n=e.state.facet(nZ);if(e.docChanged||e.selectionSet&&n.selected){var t=this.decorations,r=null,i=null;if(e.selectionSet&&n.selected){var o=e.startState.selection.ranges.filter(function(e){return!e.empty}),a=(0,h._)(e.state.selection.ranges).concat((0,h._)(e.startState.selection.map(e.changes).ranges)).filter(function(e){return!e.empty});o.length&&(r=er.OF.create(o)),a.length&&(i=er.OF.create(a))}if(e.docChanged&&e.changes.iterChangedRanges(function(n,t,o,a){var l=er.OF.range(e.startState.doc.lineAt(n).from,e.startState.doc.lineAt(t).to);r=r?r.addRange(l):er.OF.create([l]);var s=er.OF.range(e.state.doc.lineAt(o).from,e.state.doc.lineAt(a).to);i=i?i.addRange(s):er.OF.create([s])}),r){var l=r.ranges;t=t.update({filter:function(e,n){return!l.some(function(t){return t.from<=e&&t.to>=n})},filterFrom:l[0].from,filterTo:l[l.length-1].to})}e.docChanged&&(t=t.map(e.changes)),i&&(t=t.update({add:i.ranges.map(function(n){return nG(e.state,n.from,n.to)}).flat()})),this.decorations=t}},e}(),nj=ec.Z9.fromClass(nV,{decorations:function(e){return e.decorations}}),nZ=er.sj.define({combine:function(e){var n;return null!==(n=e[0])&&void 0!==n?n:{}},enables:[nz,er.Nb.highest(nj)]}),nq=new nR.k(function(e,n,t,r){return e||n||t||r?nZ.of({leading:e,enclosed:n,trailing:t,selected:r}):null}),nK=t(34122),n$=t(50522),nJ=t(723),nQ=t(71077),nX=t(44269),n0=t(93341),n1=t(93501),n2=t(18988),n4=new nR.k(function(e,n,t,r,i,o){return e?e.formatters.map(function(e){var a;if(2===(a=e.id.split("/")).length&&a[1].includes("languageServer")){var l,s,c,u,f,m,g=t.find(function(n){return n.clientId===e.id});return g?(l=o,s=g,c=r,u=i,s&&s.isSupportedFile(l)&&c&&c.isFormatSupported&&(0,eg.A)(s).isFormatSupported&&u?nK.fC.of({format:(f=(0,ei._)(function(e,n,t){var r;return(0,ea.YH)(this,function(r){return[2,(n?s.request.formatRange(l,(0,eh.fj)(e,n),t):s.request.format(l,t)).then(function(n){return"error"in n||n.cancelled?{error:!0}:n.result?{result:(0,n0.A)(n.result,e.toString())}:{result:er.VR.empty(e.length)}})]})}),function(e,n,t){return f.apply(this,arguments)}),supportsRangeFormatting:(0,eg.A)(s).isFormatRangeSupported,identifier:s.clientId,name:s.clientName}):[]):[]}return(0,n$.fu)(o,e)?nK.fC.of({format:(m=(0,ei._)(function(t,r,i){var a,l,s,c,u;return(0,ea.YH)(this,function(f){switch(f.label){case 0:if(!e.startCommand)throw Error("Expected formatter command");return a=(0,nQ.A)({container:n}),(l=(0,h._)(e.startCommand.args)).push("-f",o),r&&(l.push("--range-start",String(r.main.from)),l.push("--range-end",String(r.main.to))),l.push("--tab-size",String(i.tabSize)),i.insertSpaces&&l.push("--insert-spaces"),i.trimFinalNewlines&&l.push("--trim-final-newlines"),i.trimTrailingWhitespace&&l.push("--trim-trailing-whitespace"),i.insertFinalNewline&&l.push("--insert-final-newline"),e.startCommand.lifecycle===nJ.api.Exec.Lifecycle.STDIN&&l.push("--stdin"),s="",c="",u=[a.onOutput(function(e){return s+=e}),a.onStderr(function(e){return c+=e}),a.dispose],[4,a.request((0,p._)((0,d._)({},e.startCommand),{args:l,lifecycle:nJ.api.Exec.Lifecycle.STDIN,stdin:t.toString()})).then(function(e){var n=e.error;return u.forEach(function(e){return e()}),n?{error:!0,message:c}:{result:s}})];case 1:return[2,f.sent()]}})}),function(e,n,t){return m.apply(this,arguments)}),supportsRangeFormatting:e.supportsRangeFormatting,identifier:e.id,name:e.name}):null}).filter(Boolean):null}),n5=t(27299),n8=t(52334),n3=t(62019),n6=t(1833),n7=function(e){function n(e){var t;return(0,eo._)(this,n),(t=(0,n3._)(this,n)).type=e,t}return(0,n6._)(n,e),n.from=function(e){switch(e){case"yours":return this.yours;case"base":return this.base;case"middle":return this.middle;case"theirs":return this.theirs}},n.range=function(e,n,t){return this.from(e).range(n,t)},n}(er.FB);function n9(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=[],o=t;o<=r;){var a=e.lineAt(o),l=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;if(e.text.length<n)return null;var t=e.text[0],r=function(e){switch(e){case"<":return"yours";case"|":return"base";case"=":return"middle";case">":return"theirs";default:return null}}(t);if(!r)return null;var i=t.repeat(n);return e.text.slice(0,n)!==i||e.text.length>n&&" "!==e.text[n]?null:r}(a,n);l&&i.push(n7.range(l,a.from,a.to)),o=a.to+1}return i}n7.yours=new n7("yours"),n7.base=new n7("base"),n7.middle=new n7("middle"),n7.theirs=new n7("theirs");var te=["yours","base","middle","theirs"];function tn(e){Array.isArray(e)&&(e=er.om.of(e));var n=[],t=[];if(0===e.size)return{hunks:n,hanging:t};for(var r=e.iter();null!==r.value;){var i,o,a,l={},s={},c=[],u=!0,d=!1,p=void 0;try{for(var f,m=te[Symbol.iterator]();!(u=(f=m.next()).done);u=!0){var g=f.value,v=r.value,w=r.from,y=r.to;if("base"!==g||v.type===g){if(v.type===g)l[g]={from:w,to:y},c.push({from:w,to:y,type:v.type});else if("yours"!==v.type)c.push({from:w,to:y,type:v.type});else break;if(r.next(),null===r.value)break}}}catch(e){d=!0,p=e}finally{try{u||null==m.return||m.return()}finally{if(d)throw p}}if(!l.yours||!l.middle||!l.theirs){t.push.apply(t,(0,h._)(c));continue}null!==(i=l.base)&&void 0!==i||(l.base=null),null!==(o=s.base)&&void 0!==o||(s.base=null);var b=null!==(a=l.base)&&void 0!==a?a:l.middle,S=l.yours.to+1,Y=b.from-1;if(s.yours=S<Y?{from:S,to:Y}:null,l.base){var A=l.base.to+1,C=l.middle.from-1;s.base=A<C?{from:A,to:C}:null}var x=l.middle.to+1,k=l.theirs.from-1;s.theirs=x<k?{from:x,to:k}:null;var _={from:l.yours.from,to:l.theirs.to,markers:l,content:s};n.push(_)}return{hunks:n,hanging:t}}var tt=er.sj.define({combine:function(e){return e.length?e[0]:7}}),tr=er.sU.define({create:function(e){var n=e.doc,t=e.facet(tt),r=er.om.of(n9(n,t)),i=tn(r);return{markers:r,hunks:i.hunks,hanging:i.hanging}},update:function(e,n){var t=n.newDoc,r=n.startState.facet(tt),i=n.state.facet(tt);if(r!==i){var o=er.om.of(n9(t,i)),a=tn(o);return{markers:o,hunks:a.hunks,hanging:a.hanging}}if(!n.docChanged)return e;var l=null,s=null,c=null,u=null;n.changes.iterChangedRanges(function(e,n,t,r){l=null===l?e:Math.min(l,e),s=null===s?n:Math.max(s,n),c=null===c?t:Math.min(c,t),u=null===u?r:Math.max(u,r)});var d=e.markers;if(null!==l&&null!==s){var p=n.startState.doc.lineAt(l).from,f=n.startState.doc.lineAt(s).to;d=d.update({filter:function(){return!1},filterFrom:p,filterTo:f})}d=d.map(n.changes),null!==c&&null!==u&&(d=d.update({add:n9(t,i,c,u)}));var h=tn(d);return{markers:d,hunks:h.hunks,hanging:h.hanging}}}),ti=ec.Lz.atomicRanges.from(tr,function(e){return function(){return e.markers}}),to=er.$t.changeFilter.of(function(e){var n=e.startState.field(tr);if(!e.docChanged||0===n.markers.size)return!0;var t=e.startState.doc,r=[];return e.changes.iterChanges(function(e,i,o,a,l){var s=l.length,c=Math.max(t.lineAt(e).from-1,0),u=Math.min(t.lineAt(i).to+1,t.length);n.markers.between(c,u,function(n,c){(!(e<=n)||!(i>=c))&&(0===s||(e!==c||"\n"!==l.sliceString(0,1))&&(i!==n||"\n"!==l.sliceString(s-1,s)))&&(o!==a||(i!==c+1||0!==t.lineAt(i).length)&&(e!==n-1||0!==t.lineAt(e).length))&&r.push(n-1,c+1)})}),!(r.length>0)||r}),ta=er.$t.transactionFilter.of(function(e){var n=e.docChanged?e.state.field(tr):e.startState.field(tr);if(0===n.markers.size)return e;var t=e.newSelection,r=!1,i=!1;do{i=!1;for(var o=0;o<t.ranges.length&&"break"!==function(e){var o=t.ranges[e],a=o.from,l=o.to,s=a,c=l;if(n.markers.between(a,l,function(e,n){var t=(e+n)/2;a>e&&a<n&&(s=a<t?e:n),l>e&&l<n&&(c=l<t?e:n)}),s!==a||c!==l){var u,d=o.anchor<o.head?s:c,p=o.anchor<o.head?c:s,f=o.goalColumn,h=null!==(u=o.bidiLevel)&&void 0!==u?u:void 0,m=er.OF.range(d,p,f,h);return t=t.replaceRange(m,e),i=!0,r=!0,"break"}}(o);o++);}while(i);return r?[e,{selection:t,sequential:!0}]:e}),tl=t(83846),ts="cm-git-conflict-marker-yours",tc="cm-git-conflict-marker-base",tu="cm-git-conflict-marker-middle",td="cm-git-conflict-marker-theirs",tp="cm-git-conflict-marker-hanging",tf="cm-git-conflict-content-yours",th="cm-git-conflict-content-base",tm="cm-git-conflict-content-theirs";function tg(e){var n=e.background,t=e.color,r=e.noBorder,i={color:t,backgroundColor:n,backgroundClip:"padding-box",paddingTop:eD.LU.space4,paddingBottom:eD.LU.space4,fontWeight:eD.LU.fontWeightBold};return void 0!==r&&r||(i.borderLeft="4px solid rgba(0, 150, 255, 0.1)",i.paddingLeft="2px"),i}function tv(e){return{backgroundColor:e.background,backgroundClip:"padding-box",borderLeft:"4px solid rgba(0, 150, 255, 0.1)",paddingLeft:"2px"}}var tw=ec.Lz.theme((r={},(0,tl._)(r,".".concat(ts),tg({background:"rgba(0, 150, 255, 0.1)",color:eD.LU.blueStrongest,noBorder:!0})),(0,tl._)(r,".".concat(tu),tg({background:"rgba(255, 0, 0, 0.1)",color:eD.LU.redStrongest})),(0,tl._)(r,".".concat(tc),tg({background:"rgba(255, 165, 0, 0.1)",color:eD.LU.orangeStrongest})),(0,tl._)(r,".".concat(td),tg({background:"rgba(0, 150, 255, 0.1)",color:eD.LU.blueStrongest,noBorder:!0})),(0,tl._)(r,".".concat(tp),tg({background:"rgba(100, 150, 255, 0.1)",color:eD.LU.blueStrongest,noBorder:!0})),(0,tl._)(r,".".concat(tf),tv({background:"rgba(0, 255, 0, 0.1)"})),(0,tl._)(r,".".concat(tm),tv({background:"rgba(255, 0, 0, 0.1)"})),(0,tl._)(r,".".concat(th),tv({background:"rgba(255, 165, 0, 0.1)"})),r)),ty={yours:{marker:ec.NZ.line({class:ts}),content:ec.NZ.line({class:tf})},base:{marker:ec.NZ.line({class:tc}),content:ec.NZ.line({class:th})},middle:{marker:ec.NZ.line({class:tu})},theirs:{marker:ec.NZ.line({class:td}),content:ec.NZ.line({class:tm})},hanging:{marker:ec.NZ.line({class:tp})}},tb=function(){function e(n){(0,eo._)(this,e),this.builder=new er.vB,this.doc=n}var n=e.prototype;return n.add=function(e,n){var t=this.doc.lineAt(e.from);if(t.to>=e.to){this.builder.add(t.from,t.from,n);return}for(var r=t.from;r<=e.to;)this.builder.add(r,r,n),r=this.doc.lineAt(r).to+1},n.finish=function(){return this.builder.finish()},e}(),tS=ec.Lz.decorations.from(tr,function(e){return function(n){var t=new tb(n.state.doc),r=!0,i=!1,o=void 0;try{for(var a,l=e.hunks[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;!(n.viewport.from>s.to)&&!(n.viewport.to<s.from)&&(t.add(s.markers.yours,ty.yours.marker),s.content.yours&&t.add(s.content.yours,ty.yours.content),s.markers.base&&t.add(s.markers.base,ty.base.marker),s.content.base&&t.add(s.content.base,ty.base.content),t.add(s.markers.middle,ty.middle.marker),s.content.theirs&&t.add(s.content.theirs,ty.theirs.content),t.add(s.markers.theirs,ty.theirs.marker))}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t.finish()}}),tY=ec.Lz.decorations.from(tr,function(e){return function(){var n=new er.vB,t=!0,r=!1,i=void 0;try{for(var o,a=e.hanging[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.add(l.from,l.from,ty.hanging.marker)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.finish()}}),tA=[tr,[ti,to,ta],[er.Nb.lowest(tw),tS,tY]],tC=t(11813),tx=function(){function e(n,t,r,i,o,a){(0,eo._)(this,e),this.original=n,this.current=t,this.chunks=r,this.desc=i,this.pending=o,this.ranges=a}var n=e.prototype;return n.hasChanges=function(){return this.ranges.length>0},n.update=function(n,t){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=this.original,l=this.chunks,s=this.desc,c=this.pending,u=this.ranges;if(Math.abs((this.pending?this.pending.length:this.current.length)-n.length)>=250||i){var d=(0,tC._c)(s,c,t).pending;l=(0,tC.Pt)(a,n,{chunks:l,changesB:d},o),s=(0,tC.fc)(l,a.length),c=null,u=(0,tC.Zl)(s)}else c=(r=(0,tC._c)(s,c,t)).pending,s=r.desc,u=(0,tC.Zl)(s);return c&&n.eq(a)&&(l=[],s=er.VR.empty(a.length),c=null,u=[]),new e(a,n,l,s,c,u)},n.isAccurate=function(){return null===this.pending},n.getLineChangeType=function(e){var n=this.current.line(e);return 0===this.original.length&&this.current.length>0?tC.DE.COVERED:(0,tC.$F)(this.original,this.current,n,tC.mn.B,this.ranges)},n.iterRanges=function(){return(0,ea.YH)(this,function(e){switch(e.label){case 0:return[5,(0,ea.Ju)(this.ranges)];case 1:return e.sent(),[2]}})},e.create=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tC.r6,i=(0,tC.Pt)(n,t,void 0,r),o=(0,tC.fc)(i,n.length),a=(0,tC.Zl)(o);return new e(n,t,i,o,null,a)},e}(),tk=t(40208),t_=er.sj.define({combine:function(e){var n;return null!==(n=e.filter(Boolean)[0])&&void 0!==n?n:null}}),tD=er.sU.define({create:function(){return null},update:function(e,n){var t=n.state.facet(t_);if(!t||Math.max(t.lines,n.newDoc.lines)>5e3||Math.max(t.length,n.newDoc.length)>4e5)return null;var r=performance.now(),i=tC.r6,o="unknown";e&&e.original.eq(t)?n.docChanged&&(e=e.update(n.newDoc,n.changes,!(n.isUserEvent("input.type")||n.isUserEvent("delete.forward")||n.isUserEvent("delete.backward")),i),o="update"):(e=tx.create(t,n.newDoc,i),o="create");var a=performance.now()-r;return a>1e3&&tk.vF.time("slow SloppyDiff.create recorded",a,{start:t.toString(),end:n.newDoc.toString(),scanLimit:i.scanLimit,type:o}),e}}),tE=t(44964),tR=(0,ec.cU)({class:tE.n1,renderEmptyElements:!0,lineMarker:function(e,n){var t=e.state.field(tD,!1);if(!t||!t.hasChanges())return tE.jn;if(0===t.original.length)return tE.Ww;var r=e.state.doc.lineAt(n.from);switch(t.getLineChangeType(r.number)){case tC.DE.COVERED:return tE.CI;case tC.DE.MODIFIED:return tE.tH;default:return tE.jn}},initialSpacer:function(e){return e.state.field(tD,!1)?tE.Ww:tE.jn},updateSpacer:function(e,n){var t=n.state.field(tD,!1)?tE.Ww:tE.jn;return e===t?e:t}}),tI=er.sj.define({enables:function(e){return[t_.computeN([e],function(n){return n.facet(e)}),tE.s,tD,er.Nb.highest(tR)]}}),tF=t(13337),tT=function(e){return e.GUTTER_DIFF="GUTTER_DIFF",e.INLINE_DIFF="INLINE_DIFF",e}({}),tP=er.Pe.define(),tL=er.Pe.define(),tU=er.sU.define({create:function(){return{head:null,mode:"GUTTER_DIFF"}},update:function(e,n){var t=e.head,r=e.mode,i=!0,o=!1,a=void 0;try{for(var l,s=n.effects[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;c.is(tP)?t=c.value:c.is(tL)&&(r=c.value)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return t!==e.head||r!==e.mode?{head:t,mode:r}:e},provide:function(e){return[tI.from(e,function(e){return"GUTTER_DIFF"===e.mode?e.head:null}),tF.X.from(e,function(e){return"INLINE_DIFF"===e.mode?e.head:null})]}}),tN=function(){function e(n,t,r){var i=this;(0,eo._)(this,e),this.view=n,this.git=t,this.path=r,this.disposed=!1,this.dispose=t.onRefresh(function(){return i.fetchThenUpdateState()}),this.fetchThenUpdateState()}var n=e.prototype;return n.fetchThenUpdateState=function(){var e=this;return(0,ei._)(function(){var n,t,r,i,o;return(0,ea.YH)(this,function(a){switch(a.label){case 0:return[4,e.git.getFileContents({path:e.path,revision:"HEAD",convertToBase64:(0,_.FN)(e.path)})];case 1:if(n=a.sent(),e.disposed||!(t=e.view.state.field(tU,!1)))return[2];return(!(o=null===(i=n.error?null:null!==(r=n.content)&&void 0!==r?r:"")?null:e.view.state.toText(i))!=!t.head||o&&t.head&&!o.eq(t.head))&&e.view.dispatch({effects:tP.of(o)}),[2]}})})()},n.destroy=function(){this.dispose(),this.disposed=!0},e}(),tO=t(80865),tM=new nR.k(function(e,n,t){var r=[n?[tU,ec.Z9.define(function(t){return new tN(t,e,n)})]:[]];return t||r.push(tA),r}),tB=t(20966),tH=t(53308),tz=t(52422),tW=t(24138),tG=t(84344),tV=t(88239),tj=t(24217),tZ=er.sj.define({combine:function(e){return e.some(Boolean)}}),tq=t(48122),tK=t(51175),t$=t(86466),tJ=function(){function e(){(0,eo._)(this,e),this.value="",this.pos=0}var n=e.prototype;return n.text=function(e){this.value=e,this.pos=0},n.tokenText=function(e){return this.value.substr(e.pos,e.len)},n.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var n,t=this.pos,r=0,i=this.value.charCodeAt(t);if("number"==typeof(n=e._table[i]))return this.pos+=1,{type:n,pos:t,len:1};if(e.isDigitCharacter(i)){n=8;do r+=1,i=this.value.charCodeAt(t+r);while(e.isDigitCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}}if(e.isVariableCharacter(i)){n=9;do i=this.value.charCodeAt(t+ ++r);while(e.isVariableCharacter(i)||e.isDigitCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}}n=10;do r+=1,i=this.value.charCodeAt(t+r);while(!isNaN(i)&&void 0===e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();i={},(0,tl._)(i,36,0),(0,tl._)(i,58,1),(0,tl._)(i,44,2),(0,tl._)(i,123,3),(0,tl._)(i,125,4),(0,tl._)(i,92,5),(0,tl._)(i,47,6),(0,tl._)(i,124,7),(0,tl._)(i,43,11),(0,tl._)(i,45,12),(0,tl._)(i,63,13),tJ._table=i;var tQ=function(){function e(){(0,eo._)(this,e),this._children=[],function(e,n){n.forEach(function(n){Object.defineProperty(e,n,{enumerable:!1,writable:!0})})}(this,["parent"])}var n=e.prototype;return n.appendChild=function(e){return e instanceof tX&&this._children[this._children.length-1]instanceof tX?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},n.replace=function(e,n){var t=e.parent,r=t.children.indexOf(e),i=t.children.slice(0);i.splice.apply(i,[r,1].concat((0,h._)(n))),t._children=i,function e(n,t){var r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;s.parent=t,e(s.children,s)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(n,t)},n.toString=function(){return this.children.reduce(function(e,n){return e+n.toString()},"")},n.len=function(){return 0},n.match=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=Object.entries(t9)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,f._)(i.value,2),l=a[0],s=a[1];if(this instanceof s&&l in e)return e[l](this)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}},(0,tq._)(e,[{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if(e instanceof t6)return e;e=e.parent}}}]),e}(),tX=function(e){function n(e){var t;return(0,eo._)(this,n),(t=(0,n3._)(this,n)).value=e,t}(0,n6._)(n,e);var t=n.prototype;return t.toString=function(){return this.value},t.toTextmateString=function(){return n.escape(this.value)},t.len=function(){return this.value.length},t.clone=function(){return new n(this.value)},n.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},n}(tQ),t0=function(e){function n(){return(0,eo._)(this,n),(0,n3._)(this,n,arguments)}return(0,n6._)(n,e),n}(tQ),t1=function(e){function n(e){var t;return(0,eo._)(this,n),(t=(0,n3._)(this,n)).index=e,t}(0,n6._)(n,e);var t=n.prototype;return t.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform)?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}"):"$".concat(this.index)},t.clone=function(){var e=new n(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n.compareByIndex=function(e,n){if(e.index===n.index)return 0;if(e.isFinalTabstop)return 1;if(n.isFinalTabstop)return -1;if(e.index<n.index)return -1;if(e.index>n.index)return 1;else return 0},(0,tq._)(n,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&this._children[0]instanceof t2?this._children[0]:void 0}}]),n}(t0),t2=function(e){function n(){var e;return(0,eo._)(this,n),e=(0,n3._)(this,n,arguments),e.options=[],e}(0,n6._)(n,e);var t=n.prototype;return t.appendChild=function(e){return e instanceof tX&&(e.parent=this,this.options.push(e)),this},t.toString=function(){return this.options[0].value},t.toTextmateString=function(){return this.options.map(function(e){return e.value.replace(/\||,|\\/g,"\\$&")}).join(",")},t.len=function(){return this.options[0].len()},t.clone=function(){var e=new n;return this.options.forEach(e.appendChild,e),e},n}(tQ),t4=function(e){function n(){var e;return(0,eo._)(this,n),e=(0,n3._)(this,n,arguments),e.regexp=RegExp(""),e}(0,n6._)(n,e);var t=n.prototype;return t.resolve=function(e){var n=this,t=!1,r=e.replace(this.regexp,function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=!0,n._replace(r.slice(0,-2))});return!t&&this._children.some(function(e){return e instanceof t5&&!!e.elseValue})&&(r=this._replace([])),r},t._replace=function(e){var n="",t=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l instanceof t5){var s=e[l.index]||"";s=l.resolve(s),n+=s}else n+=l.toString()}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n},t.toString=function(){return""},t.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map(function(e){return e.toTextmateString()}),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},t.clone=function(){var e=new n;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(function(e){return e.clone()}),e},n}(tQ),t5=function(e){function n(e,t,r,i){var o;return(0,eo._)(this,n),(o=(0,n3._)(this,n)).index=e,o.shorthandName=t,o.ifValue=r,o.elseValue=i,o}(0,n6._)(n,e);var t=n.prototype;return t.resolve=function(e){if("upcase"===this.shorthandName)return e?e.toLocaleUpperCase():"";if("downcase"===this.shorthandName)return e?e.toLocaleLowerCase():"";if("capitalize"===this.shorthandName)return e?e[0].toLocaleUpperCase()+e.substr(1):"";if("pascalcase"===this.shorthandName)return e?this._toPascalCase(e):"";if("camelcase"===this.shorthandName)return e?this._toCamelCase(e):"";else if(e&&"string"==typeof this.ifValue)return this.ifValue;else if(!e&&"string"==typeof this.elseValue)return this.elseValue;else return e||""},t._toPascalCase=function(e){var n=e.match(/[a-z0-9]+/gi);return n?n.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},t._toCamelCase=function(e){var n=e.match(/[a-z0-9]+/gi);return n?n.map(function(e,n){return 0===n?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},t.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},t.clone=function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)},n}(tQ),t8=function(e){function n(e){var t;return(0,eo._)(this,n),(t=(0,n3._)(this,n)).name=e,t}(0,n6._)(n,e);var t=n.prototype;return t.resolve=function(e){var n=e.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),void 0!==n&&(this._children=[new tX(n)],!0)},t.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0===this.children.length)?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}")},t.clone=function(){var e=new n(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n}(t0);function t3(e,n){for(var t=(0,h._)(e);t.length>0;){var r=t.shift();if(!n(r))break;t.unshift.apply(t,(0,h._)(r.children))}}var t6=function(e){function n(){return(0,eo._)(this,n),(0,n3._)(this,n,arguments)}(0,n6._)(n,e);var t=n.prototype;return t.offset=function(e){var n=0,t=!1;return(this.walk(function(r){return r===e?(t=!0,!1):(n+=r.len(),!0)}),t)?n:-1},t.fullLen=function(e){var n=0;return t3([e],function(e){return n+=e.len(),!0}),n},t.enclosingPlaceholders=function(e){for(var n=[],t=e.parent;t;)t instanceof t1&&n.push(t),t=t.parent;return n},t.resolveVariables=function(e){var n=this;return this.walk(function(t){return t instanceof t8&&t.resolve(e)&&delete n._placeholders,!0}),this},t.appendChild=function(e){return delete this._placeholders,(0,tK._)((0,t$._)(n.prototype),"appendChild",this).call(this,e)},t.replace=function(e,t){return delete this._placeholders,(0,tK._)((0,t$._)(n.prototype),"replace",this).call(this,e,t)},t.toTextmateString=function(){return this.children.reduce(function(e,n){return e+n.toTextmateString()},"")},t.clone=function(){var e=new n;return this._children=this.children.map(function(e){return e.clone()}),e},t.walk=function(e){t3(this.children,e)},(0,tq._)(n,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,n=[];this.walk(function(t){return t instanceof t1&&(n.push(t),e=!e||e.index<t.index?t:e),!0}),this._placeholders={all:n,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),n}(tQ),t7=function(){function e(){(0,eo._)(this,e),this._scanner=new tJ,this._token={type:14,pos:0,len:0}}var n=e.prototype;return n.text=function(e){return this.parse(e).toString()},n.parse=function(e,n,t){var r=new t6;return this.parseFragment(e,r),this.ensureFinalTabstop(r,null!=t&&t,null!=n&&n),r},n.parseFragment=function(e,n){var t=n.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(n););var r=new Map,i=[];n.walk(function(e){return e instanceof t1&&(e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):i.push(e)),!0});var o=function(e,t){var i=r.get(e.index);if(i){var a=new t1(e.index);a.transform=e.transform;var l=!0,s=!1,c=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value.clone();a.appendChild(p),p instanceof t1&&r.has(p.index)&&!t.has(p.index)&&(t.add(p.index),o(p,t),t.delete(p.index))}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}n.replace(e,[a])}},a=new Set,l=!0,s=!1,c=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value;o(p,a)}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}return n.children.slice(t)},n.ensureFinalTabstop=function(e,n,t){(n||t&&e.placeholders.length>0)&&!e.placeholders.find(function(e){return 0===e.index})&&e.appendChild(new t1(0))},n._accept=function(e,n){if(void 0===e||this._token.type===e){var t=!n||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),t}return!1},n._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},n._until=function(e){for(var n=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var t=this._scanner.next();if(0!==t.type&&4!==t.type&&5!==t.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(n.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},n._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},n._parseEscaped=function(e){var n;return!!(n=this._accept(5,!0))&&(n=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||n,e.appendChild(new tX(n)),!0)},n._parseTabstopOrVariableName=function(e){var n,t=this._token;return this._accept(0)&&(n=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(n)?new t1(Number(n)):new t8(n)),!0):this._backTo(t)},n._parseComplexPlaceholder=function(e){var n,t=this._token;if(!(this._accept(0)&&this._accept(3)&&(n=this._accept(8,!0))))return this._backTo(t);var r=new t1(Number(n));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new tX("${"+n+":")),r.children.forEach(e.appendChild,e),!0}else if(r.index>0&&this._accept(7))for(var i=new t2;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(t),!1}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(t),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(t)},n._parseChoiceElement=function(e){for(var n=this._token,t=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(n),!1;t.push(r)}return 0===t.length?(this._backTo(n),!1):(e.appendChild(new tX(t.join(""))),!0)},n._parseComplexVariable=function(e){var n,t=this._token;if(!(this._accept(0)&&this._accept(3)&&(n=this._accept(9,!0))))return this._backTo(t);var r=new t8(n);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new tX("${"+n+":")),r.children.forEach(e.appendChild,e),!0}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(t),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(t)},n._parseTransform=function(e){for(var n=new t4,t="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0)){t+=i=this._accept(6,!0)||i;continue}if(14!==this._token.type){t+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,n.appendChild(new tX(o));continue}if(!(this._parseFormatString(n)||this._parseAnything(n)))return!1}for(;!this._accept(4);){if(14!==this._token.type){r+=this._accept(void 0,!0);continue}return!1}try{n.regexp=new RegExp(t,r)}catch(e){return!1}return e.transform=n,!0},n._parseFormatString=function(e){var n=this._token;if(!this._accept(0))return!1;var t=!1;this._accept(3)&&(t=!0);var r=this._accept(8,!0);if(!r)return this._backTo(n),!1;if(!t)return e.appendChild(new t5(Number(r))),!0;if(this._accept(4))return e.appendChild(new t5(Number(r))),!0;if(!this._accept(1))return this._backTo(n),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new t5(Number(r),i)),!0):(this._backTo(n),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new t5(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new t5(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var l=this._until(1);if(l){var s=this._until(4);if(s)return e.appendChild(new t5(Number(r),void 0,l,s)),!0}}else{var c=this._until(4);if(c)return e.appendChild(new t5(Number(r),void 0,void 0,c)),!0}return this._backTo(n),!1},n._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new tX(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.asInsertText=function(n){return new e().parse(n).toString()},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),t9={Text:tX,Placeholder:t1,Variable:t8,FormatString:t5,Choice:t2},re=function(){function e(n){(0,eo._)(this,e),this.lines=n.split(/\r\n?|\n/).map(function(e){return new t7().parse(e).children})}return e.prototype.apply=function(n){var t=n.view,r=n.from,i=n.to,o=e.instantiate(this.lines,n),a=o.text,l=o.ranges,s={from:r,to:i,insert:er.EY.of(a)},c={changes:s,scrollIntoView:!0,annotations:tG.rK.of(n.completion)};if(l.length&&(c.selection=rl(l,0)),l.length>1){var u=new rr(l,0),d=c.effects=[ri.of(u)];void 0===t.state.field(ra,!1)&&d.push(er.Pe.appendConfig.of([ra,rc,ru]))}if(r===i&&!l.length){var p=er.VR.of(s,t.state.doc.length),f=t.state.selection.ranges.map(function(e){return e.map(p,0)});c.selection=er.OF.create(f,t.state.selection.mainIndex)}return c},e.resolveVariable=function(e,n){var t=n.view,r=n.from,i=n.path;switch(e){case"TM_FILENAME":return(0,n_.basename)(i);case"TM_FILENAME_BASE":return(0,n_.basename)(i,(0,n_.extname)(i));case"TM_DIRECTORY":return(0,n_.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(t.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return t.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(n,t){var r=t.view,i=t.from,o=r.state,a=[],l=[],s=o.doc.lineAt(i),c=/^\s*/.exec(s.text)[0],u=o.facet(b.Xt),f=!0,m=!1,g=void 0;try{for(var v,w,y=n[Symbol.iterator]();!(f=(w=y.next()).done);f=!0)!function(){var n=w.value,r=0,o="",s=function(e){var n=0,t=r;if(0===r&&(n=/^\t*/.exec(e)[0].length)){var i=c+u.repeat(n);e=i+e.slice(n),t+=i.length}return o+=e,r+=e.length,{line:a.length,from:t,to:r}},d=function(n){var o=!0,c=!1,u=void 0;try{for(var p,f=n[Symbol.iterator]();!(o=(p=f.next()).done);o=!0)p.value.match({Text:function(e){s(e.value)},Variable:function(n){var r=n.name,i=n.transform,o=e.resolveVariable(r,t);i&&(o=o.replace(i.regexp,function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return i.children.map(function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(n[e.index])}})}).filter(Boolean).join("")})),s(o)},Choice:function(e){s(e.options[0].value)},Placeholder:function(e){var n,t=a.length?i+a.map(function(e){return e.length}).reduce(function(e,n){return e+n}):i;if(null===(n=e.children)||void 0===n?void 0:n.length){var o={field:e.index,from:t+r,to:null};l.push(o),d(e.children),o.to=t+r}else{s("");var c=t+r;l.push({field:e.index,from:c,to:c})}}})}catch(e){c=!0,u=e}finally{try{o||null==f.return||f.return()}finally{if(c)throw u}}};d(n),a.push(o)}()}catch(e){m=!0,g=e}finally{try{f||null==y.return||y.return()}finally{if(m)throw g}}var S=(v=Math).max.apply(v,(0,h._)(l.map(function(e){return e.field})));return{text:a,ranges:l.map(function(e){var n=e.field,t=(0,et._)(e,["field"]);return(0,p._)((0,d._)({},t),{field:0===n?S:n-1})})}},e}(),rn=ec.NZ.widget({widget:new(function(e){function n(){return(0,eo._)(this,n),(0,n3._)(this,n,arguments)}(0,n6._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},t.ignoreEvent=function(){return!1},n}(ec.xO))}),rt=ec.NZ.mark({class:"cm-snippetField"}),rr=function(){function e(n,t){(0,eo._)(this,e),this.ranges=n,this.active=t,this.deco=ec.NZ.set(n.map(function(e){return(e.from===e.to?rn:rt).range(e.from,e.to)}))}var n=e.prototype;return n.map=function(n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,l=this.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value,c=function(e,n){var t=n.mapPos(e.from,-1,er.iR.TrackDel),r=n.mapPos(e.to,1,er.iR.TrackDel);return null==t||null==r?null:{field:e.field,from:t,to:r}}(s,n);if(!c)return null;t.push(c)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return new e(t,this.active)},n.isSelectionInsideField=function(e){var n=this;return e.ranges.every(function(e){return n.ranges.some(function(t){return t.field===n.active&&t.from<=e.from&&t.to>=e.to})})},e}(),ri=er.Pe.define({map:function(e,n){return null==e?void 0:e.map(n)}}),ro=er.Pe.define(),ra=er.sU.define({create:function(){return null},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(ri))return l.value;if(l.is(ro)&&e)return new rr(e.ranges,l.value)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e&&n.docChanged&&(e=e.map(n.changes)),e&&n.selection&&!e.isSelectionInsideField(n.selection)&&(e=null),e},provide:function(e){return ec.Lz.decorations.from(e,function(e){return e?e.deco:ec.NZ.none})}});function rl(e,n){var t=e.filter(function(e){return e.field===n}).map(function(e){return er.OF.range(e.from,e.to)});if(0!==t.length)return er.OF.create(t)}function rs(e){return function(n){var t,r=n.state,i=n.dispatch,o=r.field(ra,!1);if(!o||e<0&&0===o.active)return!1;var a=o.active+e,l=(t=Math).max.apply(t,(0,h._)(o.ranges.map(function(e){return e.field}))),s=e>0&&o.active>=l;return i(r.update({selection:rl(o.ranges,a),effects:ri.of(s?null:new rr(o.ranges,a))})),!0}}var rc=er.Nb.highest(ec.w4.of([{key:"Tab",run:rs(1),shift:rs(-1)},{key:"Escape",run:function(e){var n=e.state,t=e.dispatch;return!!n.field(ra,!1)&&(t(n.update({effects:ri.of(null)})),!0)}}])),ru=ec.Lz.domEventHandlers({mousedown:function(e,n){var t,r=n.state.field(ra,!1);if(!r||null==(t=n.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find(function(e){return e.from<=t&&e.to>=t});return!!i&&i.field!==r.active&&(n.dispatch({selection:rl(r.ranges,i.field),effects:ri.of(r.ranges.some(function(e){return e.field>i.field})?new rr(r.ranges,i.field):null)}),!0)}}),rd=t(35135),rp=t(40043),rf=t(25584),rh=(0,B.x)({styles0:[{p:{whiteSpace:"pre-wrap"}}]}),rm={p:{padding:"".concat(eD.LU.space2," ").concat(eD.LU.space8),lineHeight:1.4,marginBottom:"".concat(eD.LU.space8," !important")},"p:first-of-type":{marginTop:"".concat(eD.LU.space4," !important")},"p:last-of-type":{marginBottom:"".concat(eD.LU.space4," !important")},pre:{margin:"".concat(eD.LU.space2," ").concat(eD.LU.space8)},"pre + p":{borderTop:"1px solid ".concat(eD.LU.outlineDimmest),paddingTop:eD.LU.space4},"h1, h2, h3":{margin:"".concat(eD.LU.space8," !important"),marginTop:"".concat(eD.LU.space12," !important"),padding:"0 !important",paddingBottom:"".concat(eD.LU.space4," !important"),fontSize:"100% !important",borderBottom:"1px solid ".concat(eD.LU.backgroundHighest," !important"),lineHeight:1},"h1:first-of-type, h2:first-of-type, h3:first-of-type":{marginTop:"".concat(eD.LU.space4," !important")},hr:{margin:"".concat(eD.LU.space8," !important"),borderTop:"2px solid ".concat(eD.LU.backgroundHighest," !important")},li:{margin:"".concat(eD.LU.space2," ").concat(eD.LU.space8)},".lsp-completion-detail":{borderBottom:"1px solid ".concat(eD.LU.backgroundHighest),marginBottom:eD.LU.space4},".cm-line":{paddingLeft:eD.LU.space4,paddingRight:eD.LU.space4},".cm-content":{paddingLeft:eD.LU.space4,paddingRight:eD.LU.space4}},rg=(0,g.memo)(function(e){var n=e.content,t=e.className;return(0,m.Y)(z.S,{css:rm,children:(0,m.Y)(rf.Ay,{className:t,components:{code:function(e){return(0,m.Y)(rd.A,(0,d._)({minimal:!0,disableCopy:!0},e))}},children:n})})});function rv(e){var n=e.content,t=e.className;return"string"==typeof n?(0,m.Y)(rg,{css:rh.styles0,className:t,content:n}):n.kind===ek.MarkupKind.PlainText?(0,m.Y)(z.S,{children:(0,m.Y)(rp.EY,{className:t,children:n.value})}):(0,m.Y)(rg,{className:t,content:n.value})}var rw=t(64774),ry=new WeakMap,rb=t(96299),rS=t(49433),rY=t(70325),rA="cm-ghostwriter-hint-tooltip",rC=ec.Lz.theme((0,tl._)({".cm-ghostwriter-hint":{display:"none",width:"100%",backgroundColor:eD.LU.backgroundHigher,borderTop:"solid 1px ".concat(eD.LU.outlineDefault)}},".cm-tooltip-autocomplete.".concat(rA," .cm-ghostwriter-hint"),{display:"block"})),rx=(0,B.x)({hint:[H.wp.p(4),H.wp.rowWithGap(8),H.wp.align.center,H.wp.font.default,{opacity:.6}]});function rk(){return(0,m.FD)(z.S,{css:rx.hint,children:[(0,m.Y)(rY.A,{width:8,height:8}),(0,m.FD)(z.S,{row:!0,gap:4,align:"center",children:[(0,m.Y)(rS.Ay,{size:"small",dimmed:!1,shortcut:{key:"tab"}}),(0,m.Y)(rp.EY,{variant:"small",multiline:!1,children:"to use AI suggestion."})]})]})}var r_=ec.Z9.define(function(e){var n=function(){var n,t,r;return(0,h._)(e.dom.children).concat((0,h._)(null!==(r=null===(t=rb.vR.get(e))||void 0===t?void 0:null===(n=t.children[0])||void 0===n?void 0:n.children)&&void 0!==r?r:[])).filter(function(e){return e.classList.contains("cm-tooltip-autocomplete")})},t=function(e){return Array.from(e.children).filter(function(e){return e.classList.contains("cm-ghostwriter-hint")})},r=!1;return{update:function(){null!==(0,tG.DH)(e.state)&&Promise.resolve().then(function(){if(!r){var e=!0,i=!1,o=void 0;try{for(var a,l=n()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var s=a.value,c=t(s);if(0===c.length){var u=(0,rw.J)((0,m.Y)(rk,{}));u.className="cm-ghostwriter-hint",s.appendChild(u)}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}})},destroy:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=n()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var s=a.value,c=!0,u=!1,d=void 0;try{for(var p,f=t(s)[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value;s.removeChild(h)}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}r=!0}}});function rD(e){var n=Object.keys(e).join(""),t=/\w/.test(n);return t&&(n=n.replace(/\w/g,"")),"[".concat(t?"\\w":"").concat(n.replace(".","").replace(/[^\w\s]/g,"\\$&"),"]")}var rE="lsp-completion-keyboard-shortcuts",rR=ec.Lz.theme((o={"& .cm-tooltip-autocomplete":{"& > *":{marginRight:4},"& > *:last-child":{marginRight:0},"& .cm-completionLabel":{flexGrow:1,flexShrink:1,overflowX:"auto",textOverflow:"ellipsis"},"& .cm-completionDetail":{color:eD.LU.foregroundDimmer,fontSize:"85%",marginLeft:"unset"}}},(0,tl._)(o,"& .".concat(rE),{display:"none"}),(0,tl._)(o,'& [aria-selected="true"] .'.concat(rE),{float:"right",display:"inline-block"}),o)),rI=t(58364),rF=t(67315),rT=t(6636),rP=t(69543),rL=new(function(e){function n(){var e;return(0,eo._)(this,n),(e=(0,n3._)(this,n)).elementClass="cm-gutterElement-hidden",e}return(0,n6._)(n,e),n.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var n=document.createElement("span");return n.classList.add("cm-dot"),e.appendChild(n),e},n}(ec.wJ)),rU=function(e){function n(e){var t;return(0,eo._)(this,n),(t=(0,n3._)(this,n)).numLines=e,t}(0,n6._)(n,e);var t=n.prototype;return t.eq=function(e){return e.numLines===this.numLines},t.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,rP.A)("line",this.numLines)),e.className="cm-hidden-lines",e},n}(ec.xO),rN=ec.NZ.mark({class:"cm-searchResultMatch"}),rO=ec.Lz.baseTheme({".cm-hidden-lines":{color:eD.LU.foregroundDimmer,backgroundColor:eD.LU.backgroundHighest,display:"inline-block",width:"100%"},".cm-gutterElement-hidden":{backgroundColor:eD.LU.backgroundHighest},".cm-hidden-lines-gutter":{backgroundColor:eD.LU.backgroundHighest,display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:eD.LU.foregroundDimmest,borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid ".concat(eD.LU.backgroundHighest),borderRadius:eD.LU.borderRadius4},".cm-tooltip .cm-scroller:hover":{border:"2px solid ".concat(eD.LU.accentPrimaryDimmest),boxShadow:eD.LU.shadow1,cursor:"pointer"},".cm-searchResultMatch":{color:eD.LU.foregroundDefault,backgroundColor:eD.LU.accentPrimaryDimmest,outline:eD.LU.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:eD.LU.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}}),rM=t(40844),rB=t(91564),rH=t(26705),rz=t(78559),rW=t(54572),rG=t(28365),rV=(0,B.x)({snippetGroupText:[H.wp.pl(8),H.wp.py(8)],snippetGroupContainer:[H.wp.p(4)],loadingContainer:[H.wp.width(128),H.wp.height(128),H.wp.display.flex,H.wp.align.center,H.wp.justify.center],container:[H.wp.minWidth("375px"),H.wp.maxWidth("500px"),H.wp.pt(4),H.wp.overflowY("scroll")],firstReferenceDivider:[H.wp.border({direction:"bottom",color:eD.LU.backgroundHighest})],headerGroup:[H.wp.p(4)],headerContainer:[H.wp.pr(4)],header:[H.wp.p(4),H.wp.pl(8)],referencesGroups:[H.wp.p(4)],referencesHeader:[H.wp.p(4),H.wp.pl(8)]}),rj=function(e){return e.DEFINITION="DEFINITION",e.REFERENCES="REFERENCES",e}(rj||{});function rZ(e){var n=e.matchesMap,t=e.fileToContents,r=e.type,i=e.onClose,o=e.jumpToPosition,a=Object.keys(n);return 0===a.length?(0,m.Y)(rp.EY,{color:"dimmer",css:rV.snippetGroupText,multiline:!1,children:"REFERENCES"===r?"No references found":"No definitions found"}):(0,m.Y)(z.S,{children:a.map(function(e){var r,l,s=n[e],c=t[e],u=(l=(r=s.sort(function(e,n){return e.from-n.from})).map(function(e){var n=e.from,t=e.to;return rN.range(n,t)}),[ec.Z9.define(function(){return{}},{decorations:function(){return ec.NZ.set(l)}}),function(e,n){var t=[],r=1;e.forEach(function(i,o){var a=n.lineAt(i.from),l=n.lineAt(i.to);r<a.number-2&&t.push({startLine:r,endLine:a.number-2}),r=l.number+2,o===e.length-1&&r<n.lines&&t.push({startLine:r,endLine:n.lines})});var i=t.map(function(e){var t=n.line(e.startLine),r=n.line(e.endLine);return ec.NZ.replace({widget:new rU(e.endLine-e.startLine+1)}).range(t.from,r.to)}),o=t.map(function(e){var t=n.line(e.startLine);return ec.NZ.line({class:"cm-line-hidden"}).range(t.from)}),a=er.sU.define({create:function(){return ec.NZ.set(i)},update:function(e){return e},provide:function(e){return ec.Lz.decorations.from(e)}}),l=er.sU.define({create:function(){return ec.NZ.set(o)},update:function(e){return e},provide:function(e){return ec.Lz.decorations.from(e)}}),s=t.map(function(e){var t=n.line(e.startLine);return rL.range(t.from)});return[a,l,rO,ec.pK.of(er.om.of(s))]}(r,c)]);return(0,m.Y)(z.S,{css:rV.snippetGroupContainer,children:(0,m.Y)(r$,{path:e,extensions:[u],doc:c,numMatches:s.length,initiallyExpanded:1===a.length,onNavigateToCode:function(n){if(null!==n)o({path:e,line:n.line+1,col:n.character});else{var t=(0,f._)(s,1)[0],r=c.lineAt(t.from),a=t.from-r.from;o({path:e,line:r.number,col:a})}i()}})},e)})})}function rq(e){var n=e.onClose,t=e.references,r=e.definitions,i=e.jumpToPosition,o=(0,nF.A)().fs,a=(0,rB.A)(n,[]),l=(0,f._)((0,g.useState)({}),2),s=l[0],c=l[1],u=(0,f._)((0,g.useState)(!0),2),p=u[0],v=u[1];if((0,g.useEffect)(function(){var e=new Set((0,h._)(t).concat((0,h._)(r)).map(function(e){return e.path}));if(!e.size){v(!1);return}var n=!1;function i(){return(i=(0,ei._)(function(){var t;return(0,ea.YH)(this,function(r){switch(r.label){case 0:var i;return v(!0),t={},[4,Promise.all(Array.from(e).map((i=(0,ei._)(function(e){var n;return(0,ea.YH)(this,function(r){switch(r.label){case 0:return[4,o.readFile(e)];case 1:if((n=r.sent()).error)throw Error("Something went wrong reading file with path ".concat(e,". Received error: ").concat(n.error));return t[e]=er.EY.of(n.content.toString().split("\n")),[2]}})}),function(e){return i.apply(this,arguments)})))];case 1:if(r.sent(),v(!1),n)return[2];return c(function(e){return(0,d._)({},e,t)}),[2]}})})).apply(this,arguments)}return function(){i.apply(this,arguments)}(),function(){n=!0}},[o,t,r]),p)return(0,m.Y)(z.S,{css:rV.loadingContainer,children:(0,m.Y)(nw.A,{size:32})});var w={},y={};function b(e,n){var t=e.range,r=t.start,i=t.end;e.path in n||(n[e.path]=[]);var o=s[e.path],a=o.line(r.line+1),l=o.line(i.line+1);n[e.path].push({from:a.from+r.character,to:l.from+i.character})}return t.forEach(function(e){b(e,w)}),r.forEach(function(e){b(e,y)}),(0,m.FD)(z.S,{innerRef:a,css:rV.container,children:[(0,m.Y)(z.S,{css:rV.firstReferenceDivider,children:(0,m.FD)(z.S,{css:rV.headerGroup,children:[(0,m.FD)(z.S,{css:rV.headerContainer,row:!0,justify:"space-between",align:"center",children:[(0,m.Y)(rp.Y9,{level:2,variant:"subheadDefault",css:rV.header,children:"Definitions"}),(0,m.Y)(rH.K0,{alt:"Close",onClick:n,children:(0,m.Y)(rG.A,{})})]}),(0,m.Y)(rZ,{matchesMap:y,fileToContents:s,type:"DEFINITION",onClose:n,jumpToPosition:i})]})}),(0,m.Y)(z.S,{children:(0,m.FD)(z.S,{css:rV.referencesGroups,children:[(0,m.Y)(rp.Y9,{level:2,variant:"subheadDefault",css:rV.referencesHeader,children:"References"}),(0,m.Y)(rZ,{matchesMap:w,fileToContents:s,type:"REFERENCES",onClose:n,jumpToPosition:i})]})})]})}var rK=(0,B.x)({container:[H.wp.width("100%"),H.wp.p(4),H.wp.rowWithGap(4),H.wp.justify.spaceBetween,H.wp.align.center],left:[H.wp.flex.grow(1),H.wp.rowWithGap(8),H.wp.align.center],editor:[H.wp.p(4)],text:[H.wp.flex.shrink(1),{textOverflow:"ellipsis"}]});function r$(e){var n=e.path,t=e.doc,r=e.extensions,i=e.numMatches,o=e.onNavigateToCode,a=e.initiallyExpanded,l=(0,f._)((0,g.useState)(a),2),s=l[0],c=l[1];return(0,m.FD)(z.S,{children:[(0,m.FD)(z.S,{css:rK.container,children:[(0,m.FD)(z.S,{css:rK.left,children:[(0,m.Y)(rz.A,{path:n}),(0,m.Y)(rp.EY,{multiline:!1,title:n,css:rK.text,children:n}),(0,m.Y)(rp.EY,{color:"dimmest",multiline:!1,children:(0,rP.A)("match",i,!0)})]}),(0,m.Y)(rH.K0,{alt:s?"Collapse snippet":"Expand snippet",tooltipBehavior:"hidden",onClick:function(){return c(function(e){return!e})},children:(0,m.Y)(rW.A,{rotate:180*!!s,style:{transition:"200ms ease"}})})]}),(0,m.Y)(z.S,{css:rK.editor,style:{display:s?"block":"none"},children:(0,m.Y)(rM.f,{path:n,initialDoc:t,extensions:void 0===r?[]:r,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:o})})]})}var rJ=t(19953),rQ=t(47207),rX=t(9469);function r0(e){var n=e.content,t=e.className,r=e.showHoveredVariable,i=(0,D.gc)("fontSize").preferences;if("string"!=typeof n&&"kind"in n)return(0,m.Y)(rv,{content:n});var o=(Array.isArray(n)?n:[n]).map(function(e){return"string"==typeof e?e:"```"+e.language+"\n"+e.value+"\n```"}).join("\n");return(0,m.Y)(rf.Ay,{css:[{p:{fontSize:i.fontSize},hr:{display:"none"}},r?[H.wp.maxHeight(r1),H.wp.overflowY("auto")]:void 0],className:t,components:{code:function(e){return(0,m.Y)(rd.A,(0,d._)({minimal:!0,disableCopy:!0},e))}},children:o})}var r1=100;function r2(e){var n=e.className,t=e.content,r=e.textHovered,i=(0,nF.A)().debuggest,o=(0,nI.A)(i.mainClient),a=o&&("running"===o.state.current||"paused"===o.state.current),l=(0,f._)((0,g.useState)(!1),2),s=l[0],c=l[1],u=(0,f._)((0,g.useState)(void 0),2),p=u[0],h=u[1],v=a&&p;return(0,g.useEffect)(function(){function e(){return(e=(0,ei._)(function(){var e,n;return(0,ea.YH)(this,function(t){switch(t.label){case 0:if(!a)return[3,4];c(!0),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,o.evaluate({expression:r,context:"hover"})];case 2:return(null===(e=(n=t.sent()).body)||void 0===e?void 0:e.result)&&h((0,d._)({name:r,value:n.body.result},n.body)),[3,4];case 3:return c(!1),[7];case 4:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[o,a,r]),(0,m.FD)(z.S,{css:[rm,v?H.wp.maxHeight(r1+190):H.wp.maxHeight(190),H.wp.minHeight(30),H.wp.overflowY("auto"),H.wp.borderRadius(4),H.wp.backgroundColor.backgroundHigher],children:[s?void 0:(0,m.Y)(r0,{content:t,className:n,showHoveredVariable:!!v}),v?(0,m.Y)(z.S,{css:[H.wp.maxHeight(190),H.wp.overflowY("auto")],children:(0,m.Y)(rX.r,{depth:0,client:o,variable:p})}):void 0]})}var r4=t(18754),r5=t(76574),r8=t(29016),r3=(0,t(32898).D)(),r6=er.Pe.define(),r7=er.sU.define({create:function(){return null},update:function(e,n){if(n.isUserEvent("select")||n.isUserEvent("undo")||n.isUserEvent("redo"))return null;if(!n.isUserEvent("input.type")||n.changes.empty)return e;var t="";return n.changes.iterChanges(function(e,n,r,i,o){t=o.sliceString(0,1)}),t||null}}),r9=new rw.E(function(e){var n,t,r=e.help,i=e.index,o="1px solid ".concat(eD.LU.outlineDimmer),a="min(425px, 80vw)",l=r.signatures[i],s=r.signatures.length>1;if(!l)return null;var c=l.documentation,u=null!=r.activeParameter&&(null===(t=l.parameters)||void 0===t?void 0:null===(n=t[r.activeParameter])||void 0===n?void 0:n.documentation);return(0,m.FD)(z.S,{css:[H.wp.backgroundColor.backgroundHigher,{width:"max-content"}],row:!0,children:[s?(0,m.Y)(z.S,{css:[H.wp.pl(4),{borderRight:o,paddingBottom:5}],row:!0,children:(0,m.FD)("span",{css:[{alignSelf:"flex-end"},H.wp.p(4)],children:[i+1,"/",r.signatures.length]})}):null,(0,m.FD)(z.S,{children:[(0,m.Y)(z.S,{css:[H.wp.py(4),H.wp.pl(s?4:8),H.wp.pr(8),H.wp.maxHeight(100),H.wp.overflowY("scroll"),H.wp.font.code,{lineHeight:eD.LU.lineHeightSmall,maxWidth:a}],children:(0,m.Y)(ie,{signature:l,activeParameter:r.activeParameter})}),!!(c||u)&&(0,m.FD)(z.S,{css:[H.wp.px(s?4:8),H.wp.py(2),H.wp.maxHeight(200),H.wp.overflow("scroll"),{borderTop:o,maxWidth:a}],children:[u?(0,m.Y)(rv,{content:u}):null,c?(0,m.Y)(rv,{content:c}):null]})]})]})});function ie(e){var n,t=e.signature,r=t.label,i=t.parameters,o=e.activeParameter;if(null==o||!i)return(0,m.Y)("span",{children:r});var a=null===(n=i[o])||void 0===n?void 0:n.label;if(!a)return(0,m.Y)("span",{children:r});var l=(0,f._)("string"==typeof a?[r.indexOf(a),r.indexOf(a)+a.length]:a,2),s=l[0],c=l[1];return(0,m.FD)("div",{children:[(0,m.Y)("span",{children:r.slice(0,s)}),(0,m.Y)("strong",{children:a}),(0,m.Y)("span",{children:r.slice(c)})]})}function it(){return(it=(0,ei._)(function(e,n,t,r,i){return(0,ea.YH)(this,function(o){switch(o.label){case 0:var a;return[4,Promise.all(t.map((a=(0,ei._)(function(t){var o,a;return(0,ea.YH)(this,function(l){return(o=i.current.get(t.clientId))&&t.notify.cancelRequest(o),a=t.generateId(),i.current.set(t.clientId,a),[2,t.request.signatureHelp(r,(0,eh.Z3)(e.doc,n),{id:a}).then(function(e){return(i.current.get(t.clientId)===a&&i.current.set(t.clientId,null),"error"in e)?null:e.result})]})}),function(e){return a.apply(this,arguments)})))];case 1:return[2,o.sent().find(function(e){return null!==e&&e.signatures.length})]}})})).apply(this,arguments)}var ir=t(67201),ii=t(93843),io=new Map,ia=t(56961),il=t(95866),is=t(93166),ic={namespace:il._A.namespace,type:il._A.typeName,class:il._A.className,enum:il._A.typeName,interface:il._A.typeName,struct:il._A.typeName,typeParameter:il._A.typeName,parameter:il._A.variableName,variable:il._A.variableName,property:il._A.propertyName,enumMember:il._A.propertyName,event:il._A.typeName,function:il._A.function(il._A.variableName),method:il._A.function(il._A.propertyName),macro:il._A.macroName,keyword:il._A.keyword,modifier:il._A.modifier,comment:il._A.comment,string:il._A.string,number:il._A.number,regexp:il._A.regexp,operator:il._A.operator,decorator:il._A.function(il._A.annotation),angle:null,arithmetic:il._A.arithmeticOperator,attribute:il._A.attributeName,attributeBracket:il._A.bracket,bitwise:il._A.bitwiseOperator,boolean:il._A.bool,brace:il._A.brace,bracket:il._A.bracket,builtinAttribute:il._A.standard(il._A.attributeName),builtinType:il._A.standard(il._A.typeName),character:il._A.character,colon:il._A.punctuation,comma:il._A.separator,comparison:il._A.compareOperator,constParameter:il._A.constant(il._A.variableName),derive:il._A.function(il._A.annotation),deriveHelper:il._A.function(il._A.annotation),dot:il._A.derefOperator,escapeSequence:il._A.escape,invalidEscapeSequence:il._A.invalid,formatSpecifier:il._A.processingInstruction,generic:il._A.typeName,label:il._A.labelName,lifetime:il._A.special(il._A.variableName),logical:il._A.logicOperator,macroBang:il._A.macroName,parenthesis:il._A.paren,punctuation:il._A.punctuation,selfKeyword:il._A.self,selfTypeKeyword:il._A.self,semicolon:il._A.separator,typeAlias:il._A.typeName,toolModule:il._A.namespace,union:null,unresolvedReference:null,tomlArrayKey:il._A.propertyName,tomlTableKey:il._A.className},iu={declaration:il._A.definition,definition:il._A.definition,readonly:il._A.constant,static:il._A.constant,deprecated:null,abstract:null,async:il._A.special,modification:function(e){return e===il._A.keyword?il._A.modifier:null},documentation:function(e){return e===il._A.comment?il._A.docComment:e===il._A.string?il._A.docString:null},defaultLibrary:il._A.standard,attribute:null,callable:il._A.function,constant:il._A.constant,consuming:null,controlFlow:function(e){return e===il._A.keyword?il._A.controlKeyword:e===il._A.operator?il._A.controlOperator:null},crateRoot:null,injected:null,intraDocLink:function(){return il._A.url},library:null,macro:null,mutable:null,public:null,reference:null,trait:null,unsafe:null},id=new Set([il._A.comment,il._A.string,il._A.number,il._A.keyword,il._A.operator]),ip=new Map;function ih(){return(ih=(0,ei._)(function(e){var n,t,r,i,o,a,l,s,c,u,d;return(0,ea.YH)(this,function(p){switch(p.label){case 0:if(n=e.client,t=e.path,r=e.previous,i=e.doc,o=e.signal,a=(0,eg.A)(n),r&&a.isSemanticTokensDeltaSupported)l=n.semanticTokensDelta(t,r,{signal:o});else if(a.isSemanticTokensFullSupported)l=n.semanticTokensFull(t,{signal:o});else{if(!i||!a.isSemanticTokensRangeSupported)return[2,null];s=(0,eh.Z3)(i,0),c=(0,eh.Z3)(i,i.length),l=n.semanticTokensRange(t,{start:s,end:c},{signal:o})}return[4,l];case 1:if((u=p.sent())&&"error"in u&&-32802===u.error.code)return[2,!1];if(!u||u.cancelled||!(d="result"in u&&!u.cancelled?u.result:null))return[2,null];return[2,d]}})})).apply(this,arguments)}var im=function(){function e(n,t){(0,eo._)(this,e),this.data=n,this.id=t}var n=e.prototype;return n.reset=function(){this.data=[],this.id=null},n.update=function(e){if(!e){this.reset();return}if("edits"in e&&this.id){var n,t,r=e.edits.slice().sort(function(e,n){return n.start-e.start}),i=!0,o=!1,a=void 0;try{for(var l,s=r[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c,u,d=l.value;(null===(c=d.data)||void 0===c?void 0:c.length)?(u=this.data).splice.apply(u,[d.start,d.deleteCount].concat((0,h._)(d.data))):this.data.splice(d.start,d.deleteCount)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}this.id=null!==(t=e.resultId)&&void 0!==t?t:null}else if("data"in e)this.data=e.data,this.id=null!==(n=e.resultId)&&void 0!==n?n:null;else throw Error("Invalid semantic tokens response")},n.decorations=function(e,n){for(var t=n.doc,r=new er.vB,i=0,o=0,a=0;a<this.data.length;a+=5){var l=this.data[a],s=this.data[a+1],c=this.data[a+2],u=this.data[a+3],d=this.data[a+4];i+=l,o=l>0?s:o+s;var p=function(e,n,t){var r=(0,is.mW)(e,n);if(null===r)return null;var i=ic[r];if(!i)return null;var o=(0,is.sc)(e,t),a="".concat(r,":").concat(o.join(",")),l=ip.get(a);if(void 0!==l)return l;var s=o.map(function(e){if(void 0===iu[e])return null;var n=iu[e];return null===n?null:n}).filter(Boolean),c=!0,u=!1,d=void 0;try{for(var p,f=s[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=(0,p.value)(i);h&&(i=h)}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}return i&&id.has(i)&&(i=null),ip.set(a,i),i}(e,u,d);if(p){var f=(0,b.GY)(n,[p]);if(f){var h=(0,eh.TU)(t,{line:i,character:o}),m=(0,eh.TU)(t,{line:i,character:o+c}),g=ec.NZ.mark({class:f});r.add(h,m,g)}}}return r.finish()},e}(),ig=["typescript"],iv=function(){function e(n,t){var r=this;(0,eo._)(this,e),this.view=n,this.client=t,this.data=new im([],null),this.controller=null,this.disposables=[],this.pending=!1,this.running=!1,this.changes=null,this.decorations=ec.NZ.none,this.proneToDesync=ig.some(function(e){return t.clientId.includes(e)}),this.disposables.push(t.onSemanticTokensRefresh(function(){return r.refresh()}),t.onServerCapabilitiesChange(function(){return r.refresh()}));var i=n.state.facet(ed.Md);if(i){if(t.isOpen(i))this.run();else{var o=setTimeout(function(){t.isOpen(i)&&r.run()},500);this.disposables.push(function(){return clearTimeout(o)})}}}var n=e.prototype;return n.abort=function(){var e;this.pending=!1,null===(e=this.controller)||void 0===e||e.abort()},n.refresh=function(){this.abort(),this.data.reset(),this.run()},n.run=function(){if(this.pending=!0,!this.running){this.running=!0;var e=this;(0,ei._)(function(){var n;return(0,ea.YH)(this,function(t){switch(t.label){case 0:n=function(){var n,t,r,i,o,a,l,s,c,u,d;return(0,ea.YH)(this,function(p){switch(p.label){case 0:n=Date.now(),p.label=1;case 1:if(p.trys.push([1,3,,4]),e.pending=!1,e.changes=null,o=(i=e.view.state).facet(ed.Md),a=null===(r=e.client.getServerCapabilities())||void 0===r?void 0:null===(t=r.semanticTokensProvider)||void 0===t?void 0:t.legend,s=(l=(0,eg.A)(e.client)).isSemanticTokensFullSupported||l.isSemanticTokensRangeSupported,!o||!a||!s||!e.client.isOpen(o))return e.data.reset(),e.decorations.size>0&&(e.decorations=ec.NZ.none,e.view.dispatch()),[2,"continue"];return e.controller=new AbortController,[4,function(e){return ih.apply(this,arguments)}({client:e.client,path:o,previous:e.data.id,doc:i.doc,signal:e.controller.signal})];case 2:return!1===(c=p.sent())?e.pending=!0:e.controller.signal.aborted||(e.data.update(c),e.decorations=e.changes?e.data.decorations(a,i).map(e.changes):e.data.decorations(a,i),e.view.dispatch()),[3,4];case 3:return u=p.sent(),(0,ec.c_)(e.view.state,u),e.data.reset(),e.decorations=ec.NZ.none,e.changes=null,[3,4];case 4:if(e.controller=null,d=Date.now()-n,!(e.pending&&d<150))return[3,6];return[4,new Promise(function(e){return setTimeout(e,150-d)})];case 5:p.sent(),p.label=6;case 6:return[2]}})},t.label=1;case 1:if(!e.pending)return[3,3];return[5,(0,ea.Ju)(n())];case 2:return t.sent(),[3,1];case 3:return e.running=!1,e.changes=null,[2]}})})()}},n.update=function(e){e.docChanged&&this.decorations.size&&(this.decorations=this.decorations.map(e.changes))},n.postUpdate=function(e){(0,eu.$H)(e,ed.Md)?this.refresh():e.docChanged&&(this.running&&(this.changes=this.changes?this.changes.composeDesc(e.changes):e.changes),this.proneToDesync&&this.abort(),this.run())},n.destroy=function(){this.abort(),this.data.reset();var e=!0,n=!1,t=void 0;try{for(var r,i=this.disposables[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)()}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}this.disposables=[]},e}(),iw=new nR.k(function(e){if(!e||!e.length)return null;var n=e.map(function(e){return ec.Z9.define(function(n){return new iv(n,e)},{decorations:function(e){return e.decorations},provide:function(e){return ec.Lz.updateListener.of(function(n){var t;return null===(t=n.view.plugin(e))||void 0===t?void 0:t.postUpdate(n)})}})});return er.Nb.highest(n)}),iy=t(28504),ib=new nR.k(function(e){return tZ.of(e)}),iS=new nR.k(function(e){return rI.aM.of(e)}),iY=new nR.k(function(e){return ia.G.of(e)}),iA=t(92677),iC=ec.Lz.theme({"& .cm-gutters.cm-minimap-gutter":{backgroundColor:eD.LU.backgroundDefault,borderLeft:"1px solid ".concat(eD.LU.backgroundHigher)},"& .cm-minimap-box-shadow":{boxShadow:"unset"}}),ix=er.sU.define({create:function(e){return 0===e.doc.length||e.doc.lines>1e3},update:function(e,n){return n.docChanged?0===n.state.doc.length||n.state.doc.lines>1e3:e}}),ik=new nR.k(function(e,n,t){var r=function(){return{dom:document.createElement("div")}};return e?null:[iC,ix,iA.F.compute([tD,ix],function(e){if(e.field(ix,!1)||"blocks"!==n&&"characters"!==n)return null;var i=e.field(tD,!1),o={};if(i)for(var a=1;a<=e.doc.lines;a++)switch(i.getLineChangeType(a)){case tC.DE.COVERED:o[a]=t.values.global.greenDefault;break;case tC.DE.MODIFIED:o[a]=t.values.global.blueDefault}return{create:r,displayText:n,gutters:[o]}})]}),i_=t(38590),iD=er.sj.define({combine:function(e){var n;return null!==(n=e.find(function(e){return null!==e}))&&void 0!==n?n:null}}),iE=er.sj.define({combine:function(e){return iI(e)}}),iR=er.sj.define({combine:function(e){return iI(e)}});function iI(e){var n=[];return e.forEach(function(e){return e?n.push(e):void 0}),n}var iF=function(e){function n(e){var t;return(0,eo._)(this,n),(t=(0,n3._)(this,n)).diagnostic=e,t}return(0,n6._)(n,e),n.prototype.eq=function(e){return e instanceof n&&this.severityValue===e.severityValue},(0,tq._)(n,[{key:"severityValue",get:function(){switch(this.diagnostic.severity){case"error":return 3;case"warning":return 2;case"info":return 1;default:return 0}}},{key:"severityColor",get:function(){switch(this.diagnostic.severity){case"error":return"#d11";case"warning":return"orange";case"info":return"#999";default:return"#66d"}}}]),n}(er.FB);function iT(e){var n=new er.vB;return(0,S.i5)(e,function(e,t,r){n.add(t,r,new iF(e))}),n.finish()}var iP=er.sU.define({create:function(e){return iT(e)},update:function(e,n){return(0,eu.$H)(n,S._k)?iT(n.state):e.map(n.changes)},provide:function(e){return iE.compute([e],function(n){for(var t=new Map,r=n.field(e).iter();r.value;){for(var i=n.doc.lineAt(r.from),o=n.doc.lineAt(r.to),a=i.number;a<=o.number;){var l,s=null===(l=t.get(a))||void 0===l?void 0:l.severityValue;(!s||s<r.value.severityValue)&&t.set(a,r.value),a++}r.next()}return Array.from(t.entries()).map(function(e){var n=(0,f._)(e,2),t=n[0],r=n[1];return{color:r.severityColor,number:t,zIndex:r.severityValue}})})}}),iL="cm-with-scrollbar",iU="cm-scrollbar-gutter",iN="cm-scrollbar-inner",iO="cm-scrollbar-overlay-container",iM="cm-scrollbar-overlay",iB="cm-scrollbar-overlay-invisible",iH="cm-scrollbar-overlay-active",iz="--cm-scrollbar-overlay-height",iW=ec.Lz.theme((s={"&":{height:"100%",overflowY:"auto"}},(0,tl._)(s,"& .".concat(iU),{borderRight:0,boxSizing:"border-box",display:"flex",flexShrink:0,height:"100%",insetInlineStart:0,left:"unset",position:"sticky",right:0,top:0,width:"".concat(15,"px"),zIndex:200}),(0,tl._)(s,"& .".concat(iN),{height:"100%",position:"absolute",right:0,top:0,overflowY:"hidden",borderLeft:"1px solid",borderLeftColor:"inherit"}),(0,tl._)(s,"& .".concat(iN," > canvas"),{display:"block",height:"100%",width:"".concat(14,"px"),opacity:.6}),(0,tl._)(s,".".concat(iO),(l={position:"absolute",top:0,height:"100%",width:"100%"},(0,tl._)(l,"& .".concat(iM),(a={background:"rgb(121, 121, 121)",opacity:"0.2",position:"absolute",right:0,top:0,height:"max(".concat(20,"px, var(").concat(iz,"))"),width:"100%",transition:"top 0s ease-in 0ms"},(0,tl._)(a,"&:hover",{opacity:"0.3"}),(0,tl._)(a,"&.".concat(iB),{pointerEvents:"none",opacity:0}),a)),(0,tl._)(l,"& .".concat(iH),(0,tl._)({opacity:1,visibility:"visible",transition:"visibility 0s linear 0ms, opacity 300ms"},"& .".concat(iM),{opacity:"0.4"})),l)),(0,tl._)(s,"&.".concat(iL," .cm-scroller::-webkit-scrollbar"),{width:0}),(0,tl._)(s,"&.".concat(iL," .cm-scroller"),{scrollbarWidth:"none"}),s)),iG=function(){function e(n){(0,eo._)(this,e),this.dragInfo=null,this.view=n,this.container=document.createElement("div"),this.container.classList.add(iO),this.container.role="presentation",this.container.ariaHidden="true",this.handle=document.createElement("div"),this.handle.classList.add(iM),this.container.appendChild(this.handle);var t=n.dom.querySelector(".".concat(iN));t&&t.appendChild(this.container),this.observer=new ResizeObserver(this.resizeHandle.bind(this)),this.observer.observe(n.dom),this.container.addEventListener("mousedown",this.onMouseDown.bind(this)),window.addEventListener("mouseup",this.onMouseUp.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this))}var n=e.prototype;return n.resizeHandle=function(){var e=this;this.view.requestMeasure({key:"".concat(this,".resizeHandle"),read:function(){return{ratio:Math.min(1,e.view.scrollDOM.clientHeight/e.view.contentHeight)}},write:function(n){var t=n.ratio;e.handle.style.setProperty(iz,"".concat(100*t,"%")),1===t?e.handle.classList.add(iB):e.handle.classList.remove(iB)}})},n.updateHandlePosition=function(){var e=this;this.view.requestMeasure({key:"".concat(this,".onScroll"),read:function(){var n=e.view.contentHeight,t=e.view.scrollDOM.clientHeight,r=e.handle.getBoundingClientRect().height;return{scrollTop:Math.round(e.view.scrollDOM.scrollTop*((t-r)/(n-t)))}},write:function(n){var t=n.scrollTop;e.handle.style.top="".concat(t,"px")}})},n.onMouseDown=function(e){var n=this;if(2!==e.button){if(e.preventDefault(),e.target===this.handle){this.dragInfo={dragStartY:e.clientY},this.container.classList.add(iH);return}this.view.requestMeasure({key:"".concat(this,".onMouseDown"),read:function(){var t=n.view.scrollDOM.clientHeight,r=n.view.contentHeight;return{scrollTop:Math.max(0,e.clientY-e.target.getBoundingClientRect().top-t/r*t/2)/t*r}},write:function(e){var t=e.scrollTop;n.view.scrollDOM.scrollTop=t}})}},n.onMouseUp=function(){this.dragInfo&&(this.dragInfo=null,this.container.classList.remove(iH))},n.onMouseMove=function(e){if(this.dragInfo){e.preventDefault();var n=e.clientY-this.dragInfo.dragStartY;this.view.scrollDOM.scrollTop=this.view.scrollDOM.scrollTop+n/this.view.dom.clientHeight*this.view.contentHeight,this.view.scrollDOM.scrollTop>0&&Math.round(this.view.scrollDOM.scrollTop)<Math.round(this.view.contentHeight-this.view.dom.clientHeight)&&(this.dragInfo={dragStartY:e.clientY}),this.updateHandlePosition()}},n.update=function(e){(e.docChanged||e.geometryChanged)&&(this.resizeHandle(),this.updateHandlePosition())},n.destroy=function(){this.container.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),this.container.remove(),this.observer.disconnect()},e}(),iV=function(){function e(n){(0,eo._)(this,e),this.view=n;var t=n.state.facet(iD);if(!t)throw Error("expected config");this.dom=t.create(n).dom,this.dom.classList.add(iU);var r=document.createElement("div");r.classList.add(iN);var i=document.createElement("canvas");i.ariaHidden="true",this.context=i.getContext("2d"),r.appendChild(i),this.dom.appendChild(r),n.scrollDOM.insertBefore(this.dom,n.contentDOM.nextSibling),this.update()}var n=e.prototype;return n.shouldRedraw=function(e,n){return!!(!e||!n||(0,eu.$H)(e,"doc","selection","focus",iR,iE,b.R3,b.c1))||this.view.contentHeight!==this.previousContentHeight||2*n.scrollClientHeight!==this.previousCanvasHeight},n.update=function(e){var n=this;this.view.requestMeasure({key:this,read:function(){return{scrollClientHeight:n.view.scrollDOM.clientHeight}},write:function(t){var r=t.scrollClientHeight;if(n.context&&n.shouldRedraw(e,{scrollClientHeight:r})){n.previousContentHeight=n.view.contentHeight,n.context.canvas.width=28,n.context.canvas.height=2*r,n.previousCanvasHeight=n.context.canvas.height,n.context&&n.context.clearRect(0,0,n.context.canvas.width,n.context.canvas.height);var i=n.view.state.facet(iR),o=n.view.state.facet(iE),a=new Map,l=!0,s=!1,c=void 0;try{for(var u,d=o.entries()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p,h=(0,f._)(u.value,2),m=h[0],g=h[1],v=m%3,w=void 0,y=void 0,S=!0,Y=!1,A=void 0;try{for(var C,x=g[Symbol.iterator]();!(S=(C=x.next()).done);S=!0){var k,_=C.value;if(void 0===w||void 0===y){w=_,y=_;continue}if(y.number+1===_.number&&y.color===_.color&&y.zIndex===_.zIndex){y=_;continue}a.set(v,(null!==(k=a.get(v))&&void 0!==k?k:[]).concat([[w,y]])),w=_,y=_}}catch(e){Y=!0,A=e}finally{try{S||null==x.return||x.return()}finally{if(Y)throw A}}w&&y&&a.set(v,(null!==(p=a.get(v))&&void 0!==p?p:[]).concat([[w,y]]))}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}var D=!0,E=!1,R=void 0;try{for(var I,F=a.entries()[Symbol.iterator]();!(D=(I=F.next()).done);D=!0){var T=(0,f._)(I.value,2),P=T[0],L=T[1].sort(function(e,n){var t,r,i=(0,f._)(e,1)[0],o=(0,f._)(n,1)[0];return(null!==(t=i.zIndex)&&void 0!==t?t:0)-(null!==(r=o.zIndex)&&void 0!==r?r:0)}),U=!0,N=!1,O=void 0;try{for(var M,B=L[Symbol.iterator]();!(U=(M=B.next()).done);U=!0)!function(){var e=(0,f._)(M.value,2),t=e[0],i=t.color,o=t.number,a=e[1].number,l=n.view.state.doc.line(o),s=n.view.state.doc.line(a),c=1/0,u=-1/0;if((0,b.hw)(n.view.state).between(l.from,s.to,function(e,n){c>e&&(c=e),u<n&&(u=n)}),c<u){var d=n.view.state.doc.lineAt(c);d.number<=l.number&&(l=d),n.view.state.doc.lineAt(u).number>=s.number&&(s=d)}var p=l.number,h=s.number,m=!0,g=!1,v=void 0;try{for(var w,y=n.view.state.field(iq)[Symbol.iterator]();!(m=(w=y.next()).done);m=!0){var S=(0,f._)(w.value,2),Y=S[0],A=S[1];Y[0].number<l.number&&(p-=A),Y[1].number<s.number&&(h-=A)}}catch(e){g=!0,v=e}finally{try{m||null==y.return||y.return()}finally{if(g)throw v}}n.drawRange({scrollClientHeight:r,color:i,from:p,to:h,lane:P})}()}catch(e){N=!0,O=e}finally{try{U||null==B.return||B.return()}finally{if(N)throw O}}}}catch(e){E=!0,R=e}finally{try{D||null==F.return||F.return()}finally{if(E)throw R}}var H=!0,z=!1,W=void 0;try{for(var G,V=i[Symbol.iterator]();!(H=(G=V.next()).done);H=!0){var j=G.value,Z=!0,q=!1,K=void 0;try{for(var $,J=j[Symbol.iterator]();!(Z=($=J.next()).done);Z=!0){var Q=$.value,X=Q.color,ee=Q.number,en=ee,et=!0,er=!1,ei=void 0;try{for(var eo,ea=n.view.state.field(iq)[Symbol.iterator]();!(et=(eo=ea.next()).done);et=!0){var el=(0,f._)(eo.value,2),es=(0,f._)(el[0],1)[0],ec=el[1];es.number<ee&&(en-=ec)}}catch(e){er=!0,ei=e}finally{try{et||null==ea.return||ea.return()}finally{if(er)throw ei}}n.drawRange({scrollClientHeight:r,color:X,from:en})}}catch(e){q=!0,K=e}finally{try{Z||null==J.return||J.return()}finally{if(q)throw K}}}}catch(e){z=!0,W=e}finally{try{H||null==V.return||V.return()}finally{if(z)throw W}}}}})},n.destroy=function(){this.dom.remove()},n.drawRange=function(e){if(this.context){var n,t=(this.view.documentPadding.top+this.view.defaultLineHeight*(e.from-1))/this.view.contentHeight*e.scrollClientHeight,r=2;e.to&&(r=(this.view.documentPadding.top+this.view.defaultLineHeight*e.to)/this.view.contentHeight*e.scrollClientHeight-t)<4&&(t-=(4-r)/2,r=4),this.context.fillStyle=e.color,this.context.beginPath(),this.context.fillRect(9.333333333333334*(null!==(n=e.lane)&&void 0!==n?n:0),2*t,28/(void 0===e.lane?1:3),2*r)}},e}();function ij(e){for(var n=[],t=(0,b.hw)(e).iter();t.value;){var r=n[n.length-1];if(!r||r[0][1].to<t.to){var i=e.doc.lineAt(t.from),o=e.doc.lineAt(t.to);n.push([[i,o],o.number-i.number])}t.next()}return n}function iZ(e){return null!==e.facet(iD)}var iq=er.sU.define({create:function(e){return iZ(e)?ij(e):[]},update:function(e,n){return iZ(n.state)&&(0,eu.$H)(n,"doc",b.rI,iZ)?ij(n.state):e}}),iK=er.sj.define({combine:function(e){var n;return null!==(n=e.find(function(e){return null!==e}))&&void 0!==n?n:null},enables:function(e){return[iD.compute([e],function(n){return n.facet(e)}),iW,[iq,(0,eu.P$)(function(e){return new iV(e)},{isEnabled:function(e){return null!==e.facet(iD)},provide:function(){return ec.Lz.editorAttributes.of(function(e){return null!==e.state.facet(iD)?{class:iL}:null})}})],(0,eu.P$)(function(e){return new iG(e)},{isEnabled:function(e){return null!==e.facet(iD)},eventObservers:{scroll:function(){var e;null===(e=this.plugin())||void 0===e||e.updateHandlePosition()}}})]}}),i$=t(76724),iJ="cm-multiplayer-selection-green",iQ="cm-multiplayer-selection-red",iX="cm-multiplayer-selection-blue",i0="cm-multiplayer-selection-gold",i1="cm-multiplayer-selection-purple",i2="cm-multiplayer-selection-teal",i4="cm-multiplayer-selection-pink",i5=ec.Lz.theme((c={},(0,tl._)(c,".".concat(iJ),{background:"rgba(27, 196, 125, 0.2)"}),(0,tl._)(c,".".concat(iQ),{background:"rgba(239, 85, 51, 0.2)"}),(0,tl._)(c,".".concat(iX),{background:"rgba(24, 160, 251, 0.2)"}),(0,tl._)(c,".".concat(i0),{background:"rgba(255, 199, 0, 1)"}),(0,tl._)(c,".".concat(i1),{background:"rgba(144, 124, 255, 0.2)"}),(0,tl._)(c,".".concat(i2),{background:"rgba(0, 181, 206, 0.2)"}),(0,tl._)(c,".".concat(i4),{background:"rgba(238, 70, 211, 0.2)"}),c)),i8={"#1BC47D":iJ,"#EF5533":iQ,"#18A0FB":iX,"#FFC700":i0,"#907CFF":i1,"#00B5CE":i2,"#EE46D3":i4},i3=er.Pe.define(),i6=er.Pe.define(),i7=er.Pe.define(),i9=er.sU.define({create:function(){return{}},update:function(e,n){if(!n.changes.empty){var t=function(e){return n.changes.mapPos(Math.min(n.changes.length,e))},r={},i=!0,o=!1,a=void 0;try{for(var l,s=Object.values(e)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;r[c.id]=(0,p._)((0,d._)({},c),{position:t(c.position),selectionStart:t(c.selectionStart),selectionEnd:t(c.selectionEnd)})}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}e=r}var u=!0,h=!1,m=void 0;try{for(var g,v=n.effects[Symbol.iterator]();!(u=(g=v.next()).done);u=!0){var w=g.value;if(w.is(i$.k)&&(e=(0,d._)({},e)),w.is(i3)&&w.value.position<=n.newDoc.length&&((e=(0,d._)({},e))[w.value.id]=(0,d._)({},w.value)),w.is(i6)&&(e=(0,d._)({},e),w.is(i6)&&delete e[w.value]),w.is(i7)){e=(0,d._)({},e);var y=!0,b=!1,S=void 0;try{for(var Y,A=Object.entries(e)[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0){var C=(0,f._)(Y.value,2),x=C[0];C[1].username===w.value&&delete e[x]}}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}}}}catch(e){h=!0,m=e}finally{try{u||null==v.return||v.return()}finally{if(h)throw m}}return e},provide:function(e){return[i5,er.Nb.high((0,ec.qd)({above:!1,class:"cm-multiplayer-cursor-layer",update:function(n){return(0,eu.$H)(n,e)},markers:function(n){var t=n.state.field(e,!1);if(!t)return[];var r=[],i=!0,o=!1,a=void 0;try{for(var l,s=Object.values(t)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value,u=c.selectionStart,d=c.selectionEnd,p=c.color.selection;if(u!==d){var f=er.OF.range(u,d);r.push.apply(r,(0,h._)(ec.Ip.forRange(n,p,f)))}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return r}})),iR.compute([e],function(n){var t=n.field(e,!1);return t?Object.entries(t).map(function(e){var t=(0,f._)(e,2),r=(t[0],t[1]);return{color:r.color.cursor,number:n.doc.lineAt(r.selectionStart).number}}):[]})]}}),oe=function(){function e(n,t){var r=this;(0,eo._)(this,e),this.view=n,this.presence=t,this.destroyed=!1,this.followed=null,this.dispose=t.onFollowedUserChanged(function(e){return r.onFollowedUserChanged(e)}),Promise.resolve().then(function(){r.onFollowedUserChanged(t.getFollowedUser())})}var n=e.prototype;return n.onFollowedUserChanged=function(e){var n=this;if(!this.destroyed&&(this.followed=e,!!this.followed)){var t=this.view.state.field(i9,!1);if(t){var r=Object.values(t).find(function(e){var t;return e.username===(null===(t=n.followed)||void 0===t?void 0:t.username)});r&&this.jumpToPosition(r.position)}}},n.jumpToPosition=function(e){this.view.dispatch({effects:[ec.Lz.scrollIntoView(er.OF.cursor(e),{x:"center",y:"center"})]})},n.unfollow=function(){this.presence.getFollowedUser()&&this.presence.unfollowUser()},n.postUpdate=function(e){if(this.followed){var n=void 0,t=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,s=!0,c=!1,u=void 0;try{for(var d,p=l.effects[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var f=d.value;f.is(i3)&&f.value.username===this.followed.username&&(n=f)}}catch(e){c=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw u}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}n&&this.jumpToPosition(n.value.position)}},n.destroy=function(){this.destroyed=!0,this.dispose()},e}(),on=new nR.k(function(e){return ec.Z9.define(function(n){return new oe(n,e)},{provide:function(e){return ec.Lz.updateListener.of(function(n){var t;return null===(t=n.view.plugin(e))||void 0===t?void 0:t.postUpdate(n)})},eventHandlers:{click:function(){this.unfollow()},wheel:function(){this.unfollow()},keydown:function(e){"Control"!==e.key&&"Meta"!==e.key&&this.unfollow()}}})}),ot=t(58767),or=t(11597),oi=t(81239),oo=t(53669),oa=ec.Z9.define(function(e){var n=e.state.facet(ol),t=[];return{update:function(e){n=e.state.facet(ol);var t=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.changes.empty||this.pushTransaction(l)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}},flush:function(){t=[]},logs:function(){return t},pushEvent:function(n){var t={anchor:e.state.selection.main.anchor,head:e.state.selection.main.head,docLength:e.state.doc.length,time:Date.now(),type:n.type};n instanceof KeyboardEvent&&(t.key=n.key,t.metaKey=n.metaKey,t.shiftKey=n.shiftKey,t.altKey=n.altKey,t.ctrlKey=n.ctrlKey),n instanceof InputEvent&&(t.data=n.data,t.inputType=n.inputType,t.isComposing=n.isComposing),n instanceof CompositionEvent&&(t.data=n.data),this.pushLog(t)},pushTransaction:function(e){this.pushLog({userEvent:e.annotation(er.ZX.userEvent),changes:JSON.stringify(e.changes),time:Date.now(),type:"transaction"})},pushLog:function(e){n&&(t.push(e),t=t.slice(Math.max(0,t.length-100)))}}},{provide:function(e){var n=function(n,t){var r;return null===(r=t.plugin(e))||void 0===r?void 0:r.pushEvent(n)};return er.Nb.highest(ec.Lz.domEventHandlers({keypress:n,keydown:n,keyup:n,beforeinput:n,input:n,compositionstart:n,compositionupdate:n,compositionend:n}))}}),ol=er.sj.define({combine:function(e){return!!e.length&&e[0]}}),os=new nR.k(function(e){return ol.of(e)}),oc=t(49705),ou=t(45474),od=er.YH.define(),op=er.Pe.define(),of=er.sU.define({create:function(){return!0},update:function(e,n){return!(0,eu.$H)(n,op)&&e},provide:function(e){return i_.u.from(e)}}),oh=(0,B.x)({buttonLink:[H.wp.reset.button,H.wp.linkStyle]}),om="hide-editor-file-size-warning",og=oo.A.get(om,"boolean"),ov=function(){function e(n,t,r,i){var o=this;(0,eo._)(this,e),this.view=n,this.path=t,this.fs=r,this.writeChange=null,this.destroyed=!1,this.debug=(0,p._)((0,d._)({},i),{latestReceivedVersion:0,openVersion:0,initiatedChanges:0,previousInitiatedChanges:null}),this.dispose=r.watchTextFile(t,{onReady:function(e){var t=e.initialContent,r=e.writeChange,a=e.version;!o.destroyed&&(o.debug.latestReceivedVersion=a,o.debug.openVersion=a,o.debug.setBsodFilePathVersion({filePath:o.path,version:a}),o.debug.trackTimeToLoadFileEnd(o.path),o.writeChange=r,n.dispatch({changes:{from:0,to:n.state.doc.length,insert:t},effects:op.of(null),annotations:[er.ZX.addToHistory.of(!1),er.ZX.remote.of(!0),od.of(!0)]}),t.length>=0xa00000&&!0!==og&&(og=!0,oo.A.set(om,!0),i.showWarning((0,m.FD)(m.FK,{children:["Large files may be slow to edit. Consider using",(0,m.Y)("br",{}),"Cloud Services like"," ",(0,m.Y)("button",{onClick:function(){i.performPaneOperation({operation:"open",secondary:!0,pane:{type:"objectStorage"}})},css:oh.buttonLink,children:"Object Storage"})," ","and"," ",(0,m.Y)("button",{onClick:function(){i.performPaneOperation({operation:"open",secondary:!0,pane:{type:"neon"}})},css:oh.buttonLink,children:"PostgreSQL"}),"."]}),5e3)))},onChange:function(e){var t=e.changes,r=e.changeSource,i=e.version,a=e.userId;if(!o.destroyed){o.debug.latestReceivedVersion=i,o.debug.setBsodFilePathVersion({filePath:o.path,version:i});try{n.dispatch({changes:t,annotations:[er.ZX.remote.of(r===or.iC.Container),er.ZX.addToHistory.of(r===or.iC.Local||0===a),od.of(!0)]})}catch(e){o.debugThrowSyncRemoteOpError(t,r,e)}}},onError:function(){!o.destroyed&&(o.dispose=null,o.writeChange=null)},onMoveOrDelete:function(){!o.destroyed&&(o.dispose=null,o.writeChange=null)}})}var n=e.prototype;return n.postUpdate=function(e){if(e.docChanged&&this.writeChange){var n=!0,t=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!(a.annotation(er.ZX.remote)||a.annotation(od))){this.debug.initiatedChanges++;var l=a.annotation(ot.A)?{author:"ghostwriter"}:{};try{this.writeChange(a.changes,l),this.debug.previousInitiatedChanges=a.changes}catch(n){this.debugThrowWriteChangeError(e,a,n);break}}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}},n.destroy=function(){var e;this.destroyed=!0,null===(e=this.dispose)||void 0===e||e.call(this),this.dispose=null,this.writeChange=null,this.debug.deleteBsodFilePathVersion({filePath:this.path})},n.debugThrowSyncRemoteOpError=function(e,n,t){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=r.view.contentDOM.innerText;r.debug.throwBsod({origin:"Codemirror: ot/syncRemoteOp",error:t,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),changes:JSON.stringify(e),changeSource:n,otClientDoc:o,domText:a,cmDoc:r.view.state.doc.sliceString(0),openVersion:r.debug.openVersion,version:r.debug.latestReceivedVersion,initiatedChanges:r.debug.initiatedChanges}}),(0,ec.c_)(r.view.state,t)})},n.debugThrowWriteChangeError=function(e,n,t){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=e.view.contentDOM.innerText,l=e.view.plugin(oa),s=null==l?void 0:l.logs();null==l||l.flush(),r.debug.throwBsod({origin:"Codemirror: ot/writeChange",error:t,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),transactionChanges:JSON.stringify(n.changes),otherTransactionChanges:JSON.stringify(e.transactions.filter(function(e){return e!==n}).map(function(e){return e.changes})),transactionDoc:n.newDoc.sliceString(0),updateDoc:e.state.doc.sliceString(0),otClientDoc:o,domText:a,openVersion:r.debug.openVersion,latestReceivedVersion:r.debug.latestReceivedVersion,keystrokes:JSON.stringify(s)}})}),(0,ec.c_)(e.state,t)},e}(),ow=new nR.k(function(e,n,t){return ec.Z9.define(function(r){return new ov(r,e,n,t)},{provide:function(e){return[of,ec.Lz.updateListener.of(function(n){var t;return null===(t=n.view.plugin(e))||void 0===t?void 0:t.postUpdate(n)})]}})}),oy=ec.Lz.theme({".multiplayer-cursor":{width:"2px",left:"0",top:"0"},".multiplayer-cursor .multiplayer-label":{boxShadow:eD.LU.shadow1,borderRadius:eD.LU.borderRadius4,padding:"1px",position:"absolute",left:"0px",animation:"fadeOut 2s ease-in forwards",color:"white",display:"inline-block",whiteSpace:"nowrap"},".multiplayer-cursor:hover .multiplayer-label":{animation:"auto"}});function ob(e){e.style.transform="translate(-10000px, -10000px)"}var oS=/iPhone|iPad|iPod/i;function oY(){return!!window.navigator.userAgent.match(oS)||"ontouchstart"in window&&window.navigator.userAgent.includes("Macintosh")}function oA(e){var n=document.createElement("div");n.textContent=e.username,n.style.backgroundColor=e.color.cursor,n.classList.add("multiplayer-label");var t=document.createElement("div");return t.classList.add("multiplayer-cursor"),t.style.backgroundColor=e.color.cursor,t.style.position=oY()?"absolute":"fixed",t.appendChild(n),{dom:t,label:n}}var oC=new Map,ox=[oy,ec.Z9.define(function(e){var n=e.state.field(i9,!1),t=new Map((n?Object.values(n):[]).map(function(e){return[e.id,{view:oA(e),cursor:e}]})),r=!0,i=0,o="function"==typeof IntersectionObserver?new IntersectionObserver(function(e){Date.now()>i-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&c()},{threshold:[1]}):null;function a(){o&&(o.disconnect(),t.forEach(function(e){o.observe(e.view.dom)}))}function l(){if(n&&0!==Object.values(n).length&&(e.inView&&e.requestMeasure(u),r!==e.inView)){if(!(r=e.inView))t.forEach(function(e){ob(e.view.dom)})}}a();var s=null;function c(){null===s&&(s=setTimeout(function(){s=null,l()},50))}window.addEventListener("resize",c);var u={read:function(){return{editorRect:e.scrollDOM.getBoundingClientRect(),dimensions:new Map((n?Object.values(n):[]).map(function(n){var r=t.get(n.id),i=r?function(e,n){var t=oC.get(e);if(t)return t;var r=n.getBoundingClientRect().width;return oC.set(e,r),r}(n.username,r.view.label):null;return[n.id,{position:e.coordsAtPos(n.position),labelWidth:i}]}))}},write:function(e){t.forEach(function(n,t){var r=e.dimensions.get(t);!function(e){var n=e.cursorView,t=e.position,r=e.labelWidth,i=e.editorRect,o=n.dom,a=n.label;if(!t||!r){ob(o);return}var l=t.bottom-t.top;if(t.bottom<=i.top+l||t.top+l>=i.bottom||t.right<i.left-.1||t.left>i.right+.1){ob(o);return}var s=t.left+r-i.right,c="0px";s>0?(c="-".concat(s,"px"),a.style.borderBottomLeftRadius="4px"):a.style.borderBottomLeftRadius="0px",a.style.pointerEvents="none",a.style.transform="translate(".concat(c,", -100%)");var u=oY()?{x:t.left-i.left+"px",y:t.top-i.top+"px"}:{x:"calc(".concat(t.left,"px + var(--fixed-position-offset-x))"),y:"calc(".concat(t.top,"px + var(--fixed-position-offset-y))")},d=u.x,p=u.y;o.style.transform="translate(".concat(d,", ").concat(p,")"),o.style.height=l+"px"}({cursorView:n.view,position:(null==r?void 0:r.position)||null,labelWidth:(null==r?void 0:r.labelWidth)||null,editorRect:e.editorRect})})},key:"multiplayer-cursors-plugin-".concat((0,ir.A)())};return{update:function(r){r.transactions.length&&(i=Date.now());var o=r.state.field(i9,!1);if(o===r.startState.field(i9,!1)){r.geometryChanged&&l();return}var s=new Map,c=new Set;if(o){var u=new Map((0,h._)(t.values()).map(function(e){return[e.cursor.id,e.view]}));Object.values(o).forEach(function(n){var t=u.get(n.id);if(t)c.add(t),s.set(n.id,{view:t,cursor:n});else{var r=oA(n);s.set(n.id,{view:r,cursor:n}),e.dom.appendChild(r.dom)}})}t.forEach(function(e){!c.has(e.view)&&e.view.dom.remove()}),t=s,n=o,a(),l()},destroy:function(){window.removeEventListener("resize",c),t.forEach(function(e){e.view.dom.remove()}),n=void 0,t=new Map,null==o||o.disconnect(),s&&clearTimeout(s)},maybeMeasure:l}},{eventHandlers:{scroll:function(){this.maybeMeasure()}}})],ok=function(){function e(n,t,r,i){var o=this;(0,eo._)(this,e),this.view=n,this.destroyed=!1,this.colors=this.getColorMapFromUsers(i.getActiveUsers()),this.disposes=[],this.updateSelections=null,this.disposes.push(i.onUserLeave(function(e){!o.destroyed&&o.view.dispatch({effects:i7.of(e.username)})}),i.onActiveUsersChange(function(e){!o.destroyed&&(o.colors=o.getColorMapFromUsers(e))}),r.watchTextFile(t,{onReady:function(e){var n=e.updateSelections;!o.destroyed&&(o.updateSelections=n)},onCursor:function(e){if(!o.destroyed){var n=function(e){var n,t=e.cursor,r=e.usernameColorsMap,i=null===(n=t.user)||void 0===n?void 0:n.name;if(i){var o=t.id,a=t.position,l=t.selectionStart,s=t.selectionEnd,c=r[i];if(c&&o&&"number"==typeof a&&"number"==typeof l&&"number"==typeof s)return i3.of({id:o,username:i,position:a,color:{cursor:c,selection:i8[c]||""},selectionStart:l,selectionEnd:s})}}({cursor:e,usernameColorsMap:o.colors});n&&o.view.dispatch({effects:n})}},onRemoveCursor:function(e){!o.destroyed&&o.view.dispatch({effects:i6.of(e)})},onError:function(){o.updateSelections=null},onMoveOrDelete:function(){o.updateSelections=null}}))}var n=e.prototype;return n.getColorMapFromUsers=function(e){return e.reduce(function(e,n){return n.username&&n.color?(0,p._)((0,d._)({},e),(0,tl._)({},n.username,n.color)):e},{})},n.postUpdate=function(e){if(!(!e.selectionSet||e.transactions.every(function(e){return e.annotation(er.ZX.remote)}))&&this.updateSelections){var n=e.state.selection.ranges.map(function(e){return{position:e.head,selectionStart:e.from,selectionEnd:e.to}});this.updateSelections(n)}},n.destroy=function(){this.destroyed=!0,this.disposes.forEach(function(e){return e()})},e}(),o_=new nR.k(function(e,n,t){return[ox,i9,ec.Z9.define(function(r){return new ok(r,e,n,t)},{provide:function(e){return ec.Lz.updateListener.of(function(n){var t;return null===(t=n.view.plugin(e))||void 0===t?void 0:t.postUpdate(n)})}})]}),oD=t(68753),oE=t(65029),oR=t(22531),oI=t(85431),oF=t(55485),oT=t(93707),oP=t(93682),oL=t(31618),oU=t(44885),oN=t(38565),oO=(0,B.x)({buttons:[H.wp.display.flex,H.wp.rowWithGap(4),H.wp.justify.end],input:[H.wp.colWithGap(4),H.wp.flex.grow(1)],label:[H.wp.color.foregroundDimmer,H.wp.fontSize(12),H.wp.height(24),H.wp.justify.center],flexRow:[H.wp.display.flex,H.wp.rowWithGap(8),H.wp.align.center]}),oM={fontFamily:"text-security-disc"},oB=z.D.label;function oH(e){var n=(0,nF.A)().secrets,t=(0,g.useId)(),r=(0,g.useId)(),i=(0,f._)((0,g.useState)(""),2),o=i[0],a=i[1],l=(0,f._)((0,g.useState)(e.initialValue),2),s=l[0],c=l[1],u=(0,f._)((0,g.useState)(!1),2),d=u[0],p=u[1],h=(0,g.useRef)(null);return(0,g.useEffect)(function(){if(e.isOpen){var n;null===(n=h.current)||void 0===n||n.focus(),(0,eG.u4)(eG.AZ.PASTE_SCANNER_USED,{action:"modal_opened",provider:null==e?void 0:e.provider})}},[e.isOpen,null==e?void 0:e.provider]),(0,m.Y)(oT.n1,{contain:!0,children:(0,m.Y)(oU.a,{isOpen:e.isOpen,onRequestClose:e.onCancel,children:(0,m.FD)(z.S,{gap:16,children:[(0,m.Y)(rp.EY,{variant:"subheadBig",multiline:!1,children:"Add a key name for your secret value"}),(0,m.FD)(z.S,{css:oO.flexRow,children:[(0,m.FD)(z.S,{css:oO.input,children:[(0,m.Y)(oB,{css:oO.label,htmlFor:t,children:"Key"}),(0,m.Y)(oL.pd,{id:t,ref:h,value:o,onChange:function(e){return a(e.target.value)}})]}),(0,m.FD)(z.S,{css:oO.input,children:[(0,m.FD)(z.S,{css:oO.flexRow,children:[(0,m.Y)(oB,{css:oO.label,htmlFor:r,children:"Value"}),(0,m.Y)(rH.K0,{alt:"Toggle Secret",onClick:function(){return p(function(e){return!e})},tooltipPlacement:"top",children:d?(0,m.Y)(oN.A,{}):(0,m.Y)(ng.A,{})})]}),(0,m.Y)(oL.pd,{id:r,value:s,onChange:function(e){return c(e.target.value)},style:d?void 0:oM})]})]}),(0,m.FD)(z.S,{css:oO.buttons,children:[(0,m.Y)(oP.$n,{text:"Cancel",onClick:e.onCancel}),(0,m.Y)(oP.$n,{colorway:"primary",text:"Save Secret",disabled:0===o.length||0===s.length,onClick:(0,ei._)(function(){return(0,ea.YH)(this,function(t){switch(t.label){case 0:return[4,n.addEntries([{key:o,value:s}])];case 1:return t.sent(),e.onSaveSecret(o,s),(0,eG.u4)(eG.AZ.PASTE_SCANNER_USED,{action:"secret_created",provider:null==e?void 0:e.provider}),[2]}})})})]})]})})})}var oz=t(80703),oW=t(18680),oG=t(32633),oV=(0,B.x)({hint:[H.wp.align.center,H.wp.border({color:eD.LU.outlineDimmer,direction:"top"}),H.wp.color.foregroundDimmest,H.wp.display.flex,H.wp.flex.row,H.wp.px(8),H.wp.py(4),H.wp.rowWithGap(8)],info:[H.wp.p(8)],key:[H.wp.px(4)],wrapper:[H.wp.backgroundColor.backgroundHigher,H.wp.borderRadius(4),H.wp.cursor.default,H.wp.font.default],mobileButtons:[H.wp.flex.grow(1)],mobileHint:[H.wp.justify.center]}),oj={borderTop:"1px solid ".concat(eD.LU.outlineDimmer),borderBottom:"1px solid ".concat(eD.LU.outlineDimmer),borderRadius:0};function oZ(e){return(0,m.FD)(z.S,{css:oV.wrapper,style:e.onMobile?oj:void 0,children:[(0,m.FD)(z.S,{css:oV.info,style:{textAlign:e.onMobile?"center":"inherit"},children:[(0,m.Y)(z.S,{children:"The value you pasted looks like a secret."}),(0,m.Y)(z.S,{children:e.supportsSecrets?"Store it securely using our Secrets feature.":"Anyone will be able to see this."})]}),e.onMobile?(0,m.Y)(oK,(0,d._)({},e)):(0,m.Y)(oq,(0,d._)({},e))]})}function oq(e){return(0,m.FD)(m.FK,{children:[e.supportsSecrets?(0,m.FD)(z.S,{css:oV.hint,onClick:e.onClickUseSecrets,children:[(0,m.Y)(oW.A,{}),"Press",(0,m.Y)(z.S,{css:oV.key,children:(0,m.Y)(oz._y,{keyCombo:"Tab",small:!0})}),"to use Secrets"]}):null,(0,m.FD)(z.S,{css:oV.hint,onClick:e.onClickPasteAnyway,children:[(0,m.Y)(oG.A,{}),"Press",(0,m.Y)(z.S,{css:oV.key,children:(0,m.Y)(oz._y,{keyCombo:"Enter",small:!0})}),"to paste anyway"]}),e.supportsSecrets?null:(0,m.FD)(z.S,{css:oV.hint,onClick:e.onClickUndo,children:[(0,m.Y)(oG.A,{}),"Press",(0,m.Y)(z.S,{css:oV.key,children:(0,m.Y)(oz._y,{keyCombo:"Escape",small:!0})}),"to undo"]})]})}function oK(e){return(0,m.FD)(z.S,{css:[oV.hint,oV.mobileHint],children:[e.supportsSecrets?(0,m.Y)(oP.$n,{css:oV.mobileButtons,iconLeft:(0,m.Y)(oW.A,{}),text:"Use Secrets",onClick:e.onClickUseSecrets,colorway:"primary"}):null,(0,m.Y)(oP.$n,{css:oV.mobileButtons,iconLeft:(0,m.Y)(oG.A,{}),text:"Paste Anyway",onClick:e.onClickPasteAnyway}),e.supportsSecrets?null:(0,m.Y)(oP.$n,{css:oV.mobileButtons,iconLeft:(0,m.Y)(oW.A,{}),text:"Undo",onClick:e.onClickUndo})]})}var o$=t(22529),oJ=(0,B.x)({border:[H.wp.border({color:eD.LU.accentPrimaryDefault,direction:"y",width:1})],title:[H.wp.display.flex,H.wp.rowWithGap(8),H.wp.align.center,H.wp.justify.spaceBetween,H.wp.px(8),H.wp.pt(4),H.wp.font.default],wrapper:[H.wp.backgroundColor.backgroundRoot,H.wp.py(0),H.wp.position.relative,H.wp.zIndex(200)]});function oQ(e){var n;return n=e.onClose,(0,g.useEffect)(function(){var e=function(e){"Escape"===e.key&&n(e)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[n]),(0,m.Y)(oT.n1,{autoFocus:!0,children:(0,m.Y)(z.S,{css:oJ.wrapper,children:(0,m.FD)(z.S,{css:oJ.border,children:[(0,m.FD)(z.S,{css:oJ.title,children:[(0,m.FD)(rp.EY,{multiline:!1,children:["Access the secret ",(0,m.Y)("strong",{children:e.keyName}),":"]}),(0,m.Y)(rH.K0,{alt:"Close",onClick:e.onClose,children:(0,m.Y)(rG.A,{})})]}),(0,m.Y)(ni.ui,{background:"root",children:(0,m.Y)(o$.A,{keyName:e.keyName,filePath:e.filePath,onInsert:e.onInsert})})]})})})}var oX=t(82431),o0=oI.x.compute([oE.dz],function(e){var n=e.field(oE.dz).iter();if(null===n.value)return null;for(var t=[];null!==n.value;){var r=n.from,i=n.to,o=n.value;t.push({from:r,to:i,insert:o.result.secret}),n.next()}return t}),o1=function(e){function n(e,t){var r;return(0,eo._)(this,n),(r=(0,n3._)(this,n)).secret=e,r.as=t,r}(0,n6._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this,t=(0,rw.J)((0,m.Y)(oZ,{supportsSecrets:e.state.facet(oE.t5),onMobile:"pocket"===this.as,onClickUseSecrets:function(){e.dispatch({effects:oE.cA.of(n.secret)})},onClickPasteAnyway:function(){(0,oE.fy)(e),e.focus()},onClickUndo:function(){e.dispatch({effects:oE.E3.of(n.secret.id)}),e.focus()}}));return"pocket"===this.as&&(t.style.zIndex="200",t.style.position="relative",this.adjustForGutter(t,e)),t},t.updateDOM=function(e,n){return this.adjustForGutter(e,n),!0},t.adjustForGutter=function(e,n){var t=n.dom.querySelector(".cm-gutters");e.style.marginLeft=t?"-".concat(t.clientWidth,"px"):"inherit"},n}(ec.xO),o2=oX.X.compute([oE.C3],function(e){var n=e.facet(ed.Md),t=e.field(oE.C3);return t&&n?{key:"pasteScannerModal",node:function(e){var n;return(0,m.Y)(oH,{isOpen:!0,initialValue:t.result.secret,provider:t.result.provider,onSaveSecret:(n=(0,ei._)(function(n){var r,i,o,a,l;return(0,ea.YH)(this,function(s){for(r=e.state.field(oE.dz).iter(),i=[];r.value;)o=r.from,a=r.to,(l=r.value).id===t.id&&(i.push(oE.E3.of(l.id)),i.push(oE.BH.of({secret:n,from:o,to:a}))),r.next();return e.dispatch({effects:(0,h._)(i).concat([oE.Ws.of(null)])}),[2]})}),function(e){return n.apply(this,arguments)}),onCancel:function(){return e.dispatch({effects:oE.Ws.of(null)})}})}}:null}),o4=ec.Lz.decorations.compute([oE.hb],function(e){var n=e.field(oE.hb).iter(),t=n.from,r=n.to,i=n.value,o=e.facet(ed.Md);return i&&o?ec.NZ.set(ec.NZ.widget({widget:new o5(i.key,o),side:1,block:!0}).range(t,r)):ec.NZ.none}),o5=function(e){function n(e,t){var r;return(0,eo._)(this,n),(r=(0,n3._)(this,n)).key=e,r.filePath=t,r}(0,n6._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=(0,rw.J)((0,m.Y)(oQ,{keyName:this.key,filePath:this.filePath,onClose:function(){return e.dispatch({effects:oE.i6.of(null)})},onInsert:function(n){e.dispatch(e.state.changeByRange(function(e){return{range:er.OF.cursor(e.from+n.length),changes:{from:e.from,to:e.to,insert:n}}})),e.focus(),(0,eG.u4)(eG.AZ.PASTE_SCANNER_USED,{action:"secret_key_inserted"})}}));return this.adjustForGutter(n,e),n},t.updateDOM=function(e,n){return this.adjustForGutter(e,n),!0},t.adjustForGutter=function(e,n){var t=n.dom.querySelector(".cm-gutters");e.style.marginLeft=t?"-".concat(t.clientWidth,"px"):"inherit"},n}(ec.xO),o8=[o0,function(){var e=[oE.C3,oE.dz],n=function(e){if(null!=e.field(oE.C3,!1))return null;var n=e.field(oE.dz,!1);return n||null};return[ec.DK.compute(e,function(e){var t=n(e);if(!t||e.facet(oF.n))return null;for(var r=t.iter();r.value;){var i=function(){var e=new o1(r.value,"tooltip");return{v:{arrow:!0,pos:r.to,create:function(n){return{dom:e.toDOM(n)}}}}}();if("object"===(0,oR._)(i))return i.v}return null}),ec.Lz.decorations.compute(e,function(e){var t=n(e);if(!t||!e.facet(oF.n))return ec.NZ.none;var r=t.iter();if(!r.value)return ec.NZ.none;for(;r.value;){var i=new o1(r.value,"pocket");return ec.NZ.set(ec.NZ.widget({widget:i,side:1,block:!0}).range(r.to,r.to))}return ec.NZ.none})]}(),o2,o4],o3=t(78932),o6=new nR.k(function(e){return[oE.t5.of(!e),oE.hb,oE.dz,oE.C3,o8,oE.Ij]});function o7(e,n){var t=performance.now();tk.vF.time(e,t-n)}var o9=new nR.k(function(e){var n=e?.01:.001;return er.Nb.highest(ec.Lz.domEventHandlers({keydown:function(e){if(Math.random()<n){var t=e.timeStamp;requestAnimationFrame(function(){o7("editor input latency",t),"undefined"!=typeof requestIdleCallback?requestIdleCallback(function(){o7("editor input latency after layout",t)}):setTimeout(function(){o7("editor input latency after layout",t)})})}}}))}),ae=t(44987),an=t(48200),at=t(27213),ar=t.n(at),ai=[{regexp:/https?:\/\/[^\s)"']+/g,cursor:"pointer",onClick:function(e){ar()(e)&&window.open(e,"_blank")}}],ao=new nR.k(function(e){return e?null:(0,an.Ay)({key:"mod",rules:ai})}),aa=t(69945),al=t.n(aa),as=new Set,ac=al()(function(){var e=!0,n=!1,t=void 0;try{for(var r,i=as[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;(0,eG.u4)(eG.AZ.WS_TYPED,{fileExt:o})}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}as.clear()},18e4),au=ec.Lz.updateListener.of(function(e){if(!!e.docChanged){var n,t=e.state.facet(ed.Md);if(t){var r=(0,_.an)(t)||(0,_.WP)(t);if(!e.transactions.some(function(e){return e.annotation(er.ZX.remote)})){n=r,as.has(n)||(as.add(n),ac())}}}}),ad=t(50066),ap=ec.Lz.theme({".cm-ruler-element":{backgroundColor:eD.LU.backgroundHigher}}),af=er.sU.define({create:function(e){return 0===e.doc.length},update:function(e,n){return n.docChanged?0===n.state.doc.length:e}}),ah=(0,ec.qd)({above:!1,class:"cm-ruler-layer",update:function(e){return(0,eu.$H)(e,am,af,i$.k)},markers:function(e){if(e.state.field(af,!1))return[];var n=e.state.facet(am);if(0===n.length)return[];var t=[],r=e.dom.getBoundingClientRect(),i=e.contentDOM.getBoundingClientRect().left-r.left+6,o=r.width-2,a=Math.max(r.height,e.contentHeight),l=!0,s=!1,c=void 0;try{for(var u,d=n[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value,f=i+e.defaultCharacterWidth*p;f<o&&t.push(new ec.Ip("cm-ruler-element",f,0,2,a))}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}return t}}),am=er.sj.define({enables:[af,ah,ap]}),ag=new nR.k(function(e){return e.map(function(e){return am.of(e)})}),av=t(64786),aw=ec.Lz.theme({"& .cm-scrollbar-gutter":{backgroundColor:eD.LU.backgroundDefault},"& .cm-scrollbar-inner":{borderColor:eD.LU.backgroundHigher}}),ay=new nR.k(function(e,n){var t;return e?null:[aw,iK.of({create:function(){return{dom:document.createElement("div")}}}),iE.compute(["doc",tD],function(e){var t=e.field(tD,!1);if(!t)return null;for(var r=[],i=1;i<=e.doc.lines;i++)switch(t.getLineChangeType(i)){case tC.DE.COVERED:r.push({number:i,color:n.values.global.greenDefault,zIndex:1});break;case tC.DE.MODIFIED:r.push({number:i,color:n.values.global.blueDefault,zIndex:0})}return r}),iP,(t=({color:n.values.global.foregroundDefault}).color,iR.compute(["doc","selection"],function(e){return e.selection.ranges.map(function(n){var r=n.head;return{color:t,number:e.doc.lineAt(r).number,zIndex:1/0}})}))]}),ab=t(83265);function aS(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(n),o=i.next();!o.done&&r.length<t;)r.push(o.value),o=i.next();return r}var aY=t(2960),aA=t(90001),aC=t(94668),ax=t(76902),ak=t(53306),a_=t(74948),aD=t(3528),aE=t(14804);function aR(e){return e>420?"large":"small"}var aI=z.D.div,aF=(0,B.x)({root:[H.wp.px(4),H.wp.py(6),{borderBottom:"1px solid",borderColor:eD.LU.outlineDimmest}],panelButtonWrapper:[H.wp.center,H.wp.height(32)],content:[H.wp.display.grid,H.wp.flex.growAndShrink(1),{gridTemplateAreas:'"search search-controls"',gridTemplateRows:"1fr",gridTemplateColumns:"1fr max-content",gap:eD.LU.space8}],contentExpanded:[{gridTemplateAreas:'"search search-controls" "replace replace-controls"',gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr max-content"}],contentExpandedSmall:[{gridTemplateAreas:'"search" "search-controls" "replace" "replace-controls"',gridTemplateRows:"1fr max-content 1fr max-content",gridTemplateColumns:"1fr"}],contentSmall:[{gridTemplateAreas:'"search" "search-controls"',gridTemplateRows:"1fr max-content",gridTemplateColumns:"1fr"}],matchLabel:[H.wp.position.absolute,H.wp.top(0),H.wp.right(0),H.wp.height("100%"),H.wp.center,H.wp.pr(4)],searchInputWrapper:[H.wp.position.relative,{gridArea:"search"}],searchControls:[H.wp.display.flex,H.wp.align.center,H.wp.rowWithGap(8),H.wp.flex.wrap,{gridArea:"search-controls"}],replaceInputWrapper:[{gridArea:"replace"}],replaceControls:[H.wp.display.flex,H.wp.align.center,H.wp.rowWithGap(8),H.wp.flex.wrap,{gridArea:"replace-controls"}],searchSettings:H.wp.flex.row});function aT(e){var n=(0,g.useRef)(null);return(0,g.useEffect)(function(){if(n.current){var t;e!==(null===(t=n.current)||void 0===t?void 0:t.value)&&(n.current.value=e)}},[e]),n}var aP=new rw.E((0,g.forwardRef)(function(e,n){var t=e.view,r=e.query,i=e.updateQuery,o=(0,f._)((0,g.useState)(!1),2),a=o[0],l=o[1],s=(0,f._)((0,g.useState)([]),2),c=s[0],u=s[1],d=(0,f._)((0,g.useState)(null),2),p=d[0],h=d[1],v=c.length,w=(0,aY.A)(r),y=(0,aY.A)(c),b=aT(r.search),S=aT(r.replace);function Y(){(0,ab.Hg)(t);var e=t.state.selection.main;t.dispatch({effects:ec.Lz.scrollIntoView(e.from,{y:"center",x:"center"})}),!(v<=1)&&h(function(n){if(null===n){var t=c.findIndex(function(n){return n.from===e.from&&n.to===e.to});return -1===t?1:t+1}return n>=v?1:n+1})}function A(){(0,ab.ve)(t);var e=t.state.selection.main;t.dispatch({effects:ec.Lz.scrollIntoView(e.from,{y:"center",x:"center"})}),!(v<=1)&&h(function(n){if(null===n){var t=c.findIndex(function(n){return n.from===e.from&&n.to===e.to});return -1===t?1:t+1}return n<=1?v||1:n-1})}(0,g.useImperativeHandle)(n,function(){return{onSelectionSet:function(){var e=t.state.selection.main,n=y.current.findIndex(function(n){return n.from<=e.anchor&&n.to>=e.anchor});h(-1!==n?n+1:null)},onDocChanged:function(){u(aS(w.current,t.state.doc)),h(null)},onExpandRequested:function(){l(!0)}}},[t,w,y]),(0,g.useEffect)(function(){var e=aS(r,t.state.doc);u(e);var n=t.state.selection.main,i=e.findIndex(function(e){return e.from<=n.anchor&&e.to>=n.anchor});h(-1!==i?i+1:null)},[t,r]);var C=(0,f._)((0,g.useState)(function(){return aR(t.dom.clientWidth)}),2),x=C[0],k=C[1],_=(0,aA.A)(function(e){e.width&&k(aR(e.width))});function D(e){return(0,ec.TS)(t,e,"search-panel")}var E=v>0,R=r.search.length>0?"0 / 0":null,I=E?"".concat(p||1," / ").concat(v):R,F=I?8*I.length:null,T=(0,m.FD)(z.S,{css:aF.searchSettings,children:[(0,m.Y)(ak.A,{alt:"case sensitive",icon:(0,m.Y)(a_.A,{}),checked:r.caseSensitive,onClick:function(){i({caseSensitive:!r.caseSensitive})}}),(0,m.Y)(ak.A,{alt:"regular expressions",icon:(0,m.Y)(aD.A,{}),checked:r.regexp,onClick:function(){i({regexp:!r.regexp})}}),(0,m.Y)(ak.A,{alt:"whole words",icon:(0,m.Y)(aE.A,{}),checked:r.wholeWord,onClick:function(){i({wholeWord:!r.wholeWord})}})]}),P=[aF.content];return"small"!==x&&a?P.push(aF.contentExpanded):"small"===x&&a?P.push(aF.contentExpandedSmall):"small"!==x||a||P.push(aF.contentSmall),(0,m.Y)(aI,{ref:_,onKeyDown:function(e){D(e)&&e.preventDefault()},children:(0,m.FD)(ni.ui,{elevated:!0,css:aF.root,row:!0,gap:4,children:[(0,m.Y)(z.S,{css:aF.panelButtonWrapper,children:(0,m.Y)(rH.K0,{alt:a?"Close replace panel":"Show replace panel",size:32,onClick:function(){l(function(e){return!e})},children:(0,m.Y)(nl.A,{rotate:90*!!a,style:{transition:"200ms ease"}})})}),(0,m.FD)(z.S,{css:P,children:[(0,m.FD)(z.S,{css:aF.searchInputWrapper,children:[(0,m.Y)(ax.T,{ref:b,style:{padding:4,paddingRight:null!=F?F:void 0},placeholder:"Search",defaultValue:r.search,name:"search","main-field":"true",onKeyDown:function(e){if((0,aC.T$)(e)&&"f"===e.key){e.currentTarget.select();return}if(!("enter"!==e.key.toLowerCase()||D(e))){if(e.preventDefault(),e.shiftKey){A();return}Y()}},onChange:function(e){i({search:e})}}),I?(0,m.Y)(z.S,{css:aF.matchLabel,children:(0,m.Y)(rp.EY,{variant:"small",color:"dimmest",multiline:!1,children:I})}):null]}),(0,m.FD)(z.S,{css:aF.searchControls,children:[(0,m.FD)(z.S,{row:!0,children:[(0,m.Y)(rH.K0,{size:32,alt:"Previous",onClick:function(){A()},children:(0,m.Y)(nl.A,{rotate:-90})}),(0,m.Y)(rH.K0,{size:32,alt:"Next",onClick:function(){Y()},children:(0,m.Y)(nl.A,{rotate:90})})]}),(0,m.Y)(oP.$n,{text:"Select all",onClick:function(){(0,ab.Cj)(t),t.focus()}}),T]}),a?(0,m.FD)(m.FK,{children:[(0,m.Y)(z.S,{css:aF.replaceInputWrapper,children:(0,m.Y)(oL.pd,{ref:S,style:{padding:4},placeholder:"Replacement",name:"replace",defaultValue:r.replace,onKeyDown:function(e){!("enter"!==e.key.toLowerCase()||D(e))&&(e.preventDefault(),(0,ab.Aw)(t))},onChange:function(e){i({replace:e.target.value})}})}),(0,m.FD)(z.S,{css:aF.replaceControls,children:[(0,m.Y)(oP.$n,{text:"Replace",onClick:function(){(0,ab.Aw)(t)}}),(0,m.Y)(oP.$n,{text:"Replace all",onClick:function(){(0,ab.yh)(t)}})]})]}):null]}),(0,m.Y)(z.S,{css:aF.panelButtonWrapper,children:(0,m.Y)(rH.K0,{alt:"Close Search Panel",tooltipBehavior:"hidden",onClick:function(){(0,ab.jO)(t)},children:(0,m.Y)(rG.A,{})})})]})})})),aL=er.Pe.define(),aU=[(0,ab.$P)({createPanel:function(e){var n=!1,t=!1,r=!1,i=!1,o=!1,a=P()(function(n){var t,r,i,o,a,l,s=(0,ab.V8)(e.state),c=new ab.L0({search:null!==(t=n.search)&&void 0!==t?t:s.search,caseSensitive:null!==(r=n.caseSensitive)&&void 0!==r?r:s.caseSensitive,literal:null!==(i=n.literal)&&void 0!==i?i:s.literal,regexp:null!==(o=n.regexp)&&void 0!==o?o:s.regexp,replace:null!==(a=n.replace)&&void 0!==a?a:s.replace,wholeWord:null!==(l=n.wholeWord)&&void 0!==l?l:s.wholeWord});c.eq(s)||e.dispatch({effects:ab.Ri.of(c)})},300),l=aP.create({view:e,query:(0,ab.V8)(e.state),updateQuery:a});return{dom:l,top:!0,update:function(n){(0,eu.$H)(n,ab.Ri)&&aP.set(l,{view:e,query:(0,ab.V8)(n.state),updateQuery:a}),n.selectionSet&&!i&&(i=!0,requestAnimationFrame(function(){if(!t){var e;i=!1,null===(e=aP.ref(l))||void 0===e||e.onSelectionSet()}})),n.docChanged&&!r&&(r=!0,requestAnimationFrame(function(){if(!t){var e;r=!1,null===(e=aP.ref(l))||void 0===e||e.onDocChanged()}})),(0,eu.$H)(n,aL)&&!o&&(o=!0,requestAnimationFrame(function(){if(!t){var e;o=!1,null===(e=aP.ref(l))||void 0===e||e.onExpandRequested()}}))},mount:function(){!n&&(n=!0,requestAnimationFrame(function(){if(!t){n=!1;var e=l.querySelector("[main-field]");e&&(e.focus(),e.select())}}))},destroy:function(){return t=!0}}}}),ec.w4.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(e){return!!((0,ab.NK)(e.state)||(0,ab.pi)(e))&&(e.dispatch({effects:aL.of(null)}),!0)}}])],aN=t(43070),aO=t(16907),aM=null!==(u=globalThis.requestIdleCallback)&&void 0!==u?u:globalThis.requestAnimationFrame;function aB(e,n,t){var r=e.field(n,!1);if(void 0===r){if(void 0===t)throw Error("Field is not mounted on state");return t}return n.spec.toJSON(r,e)}function aH(e){for(var n=e.sliceString(0,200)+e.length,t=0,r=0;r<n.length;r++)t=(t<<5)-t+n.charCodeAt(r)|0;return(t>>>0).toString(36)}var az=function(){function e(n,t,r,i){var o=this;(0,eo._)(this,e),this.view=n,this.replId=t,this.cache=r,this.compartment=i,this.historyIsMounted=!1,this.destroyed=!1,this.pending=!1,this.scheduleCacheUpdate=this.scheduleCacheUpdate.bind(this),this.view.scrollDOM.addEventListener("scroll",this.scheduleCacheUpdate),this.view.state.field(of,!1)||Promise.resolve().then(function(){o.destroyed||o.apply()})}var n=e.prototype;return n.apply=function(){if(!this.historyIsMounted&&this.view.state.field(L.jN,!1)){(0,ec.c_)(this.view.state,Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view"));return}if(!this.key||this.view.state.field(of,!1)){if(this.historyIsMounted){var e,n,t=this.key?i_.u.of(!0):[];this.view.dispatch({effects:this.compartment.reconfigure(t)}),this.historyIsMounted=!1}return}var r=this.cache.get(this.key);if(!r||r.hash!==aH(this.view.state.doc)){this.view.dispatch({effects:this.compartment.reconfigure((0,L.b6)())}),this.historyIsMounted=!0;return}var i=er.OF.fromJSON(r.selection),o=[(e=r.scroll,(n=ec.Lz.scrollIntoView(e.pos,{y:"start",x:"start",yMargin:e.yDiff,xMargin:e.scrollLeft})).value.isSnapshot=!0,n),this.compartment.reconfigure([L.jN.init(function(e){var n,t;return n=L.jN,t=r.history,n.spec.fromJSON(t,e)}),(0,L.b6)()])];if(this.view.state.field(b.rI,!1))for(var a=0;a<r.folds.length;a+=2){var l=r.folds[a],s=r.folds[a+1];o.push(b.R3.of({from:l,to:s}))}this.view.dispatch({selection:i,effects:o}),this.historyIsMounted=!0},n.scheduleCacheUpdate=function(){var e=this;!this.pending&&(this.pending=!0,aM(function(){e.pending&&!e.destroyed&&(e.pending=!1,e.historyIsMounted&&e.key&&e.cache.set(e.key,{hash:aH(e.view.state.doc),scroll:function(e){var n=e.scrollDOM.scrollTop,t=e.scrollDOM.scrollLeft;if(0===n&&0===t)return{pos:0,yDiff:0,scrollLeft:0};var r=e.lineBlockAtHeight(n+8),i=r.from>=e.viewport.from||e.viewportLineBlocks[0].top-n>200?r:e.viewportLineBlocks[0];return{pos:i.from,yDiff:i.top-n,scrollLeft:t}}(e.view),selection:e.view.state.selection.toJSON(),history:aB(e.view.state,L.jN),folds:aB(e.view.state,b.rI,[])}))}))},n.postUpdate=function(e){if((0,eu.$H)(e,ed.Md,of)){this.apply();return}!this.pending&&this.historyIsMounted&&(0,eu.$H)(e,"doc","selection",L.jN,b.rI)&&this.scheduleCacheUpdate()},n.destroy=function(){this.destroyed=!0,this.view.scrollDOM.removeEventListener("scroll",this.scheduleCacheUpdate)},(0,tq._)(e,[{key:"key",get:function(){var e=this.view.state.facet(ed.Md);return e?"".concat(this.replId,":").concat(e):null}}]),e}(),aW=new nR.k(function(e,n){var t=new er.xx,r=ec.Z9.define(function(r){return new az(r,e,n,t)},{provide:function(e){return ec.Lz.updateListener.of(function(n){var t;null===(t=n.view.plugin(e))||void 0===t||t.postUpdate(n)})}});return[t.of(i_.u.of(!0)),r]}),aG=ec.Lz.theme({"&":{contain:"size"},"& > .cm-scroller":{contain:"strict"}}),aV=t(8300),aj=t(94146),aZ=t(95969),aq=new nR.k(function(e){var n=ec.Lz.domEventHandlers({scroll:P()(function(n,t){var r=0,i=0,o=!0,a=!1,l=void 0;try{for(var s,c=t.visibleRanges[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;r=Math.min(r,u.from),i=Math.max(r,u.to)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}e("user:scroll",{visibleLines:{from:t.state.doc.lineAt(r).number,to:t.state.doc.lineAt(i).number}})},250)}),t=P()(function(n,t,r){e("user:selection",{inputMethod:r,from:n,to:t})},250);return[n,ec.Lz.updateListener.of(function(n){var r=n.transactions,i=!0,o=!1,a=void 0;try{for(var l,s=r[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;c.isUserEvent("input.paste")&&e("user:paste",{}),c.isUserEvent("input.drop")&&e("user:new-drop",{}),c.isUserEvent("move.drop")&&e("user:move-drop",{}),c.isUserEvent("delete.cut")&&e("user:cut",{}),c.isUserEvent("input.complete")&&e("user:complete",{}),c.isUserEvent("select")&&t(c.newSelection.main.from,c.newSelection.main.to,c.isUserEvent("select.pointer")?"pointer":"keyboard"),c.isUserEvent("undo")&&e("user:undo",{}),c.isUserEvent("redo")&&e("user:redo",{})}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}})]}),aK=t(52097),a$=t(24948),aJ=t(32256),aQ=t(49259);function aX(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function a0(e,n){var t;return null==n?aX(e):{filePath:e,text:null!==(t=n.state.doc.toString())&&void 0!==t?t:"",selections:n.state.selection.ranges.map(function(e){var n=e.from;return{location:n,length:e.to-n}}),hasFocus:n.hasFocus}}function a1(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,ir.A)(),t={messageType:aQ.tF.TEXT_EDITOR_STATE,filePath:e.textEditorState.filePath,text:e.textEditorState.text,selections:e.textEditorState.selections,hasFocus:e.textEditorState.hasFocus,hasGhostwriterSuggestion:e.hasGhostwriterSuggestion,revisionId:e.revisionId};(0,a$._z)(t,n)}function a2(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,ir.A)(),t={messageType:aQ.tF.TEXT_EDITOR_CLOSED,filePath:e};(0,a$._z)(t,n)}function a4(e,n,t,r,i){return r===e&&r===t.textEditorState.filePath&&n===t.textEditorState.filePath&&i===t.revisionId}function a5(e){var n=e.map(function(e){return er.OF.range(e.location,e.location+e.length)});return er.OF.create(n)}function a8(e,n,t,r,i){var o,a,l,s,c,u,d,p,f,h,m=i.payload;if((0,aQ.$H)(m))return function(e,n,t,r,i){if(!a4(e,n,r,i.filePath,i.revisionId))return!1;var o=a5(i.selections);return t.dispatch({selection:o,scrollIntoView:!0}),!0}(e,n,t,r,m);if((0,aQ.m3)(m))return function(e,n,t,r,i){if(!a4(e,n,r,i.filePath,i.revisionId))return!1;var o=a5(i.selections);return t.dispatch({changes:{from:0,to:t.state.doc.length,insert:i.text},selection:o,scrollIntoView:!0}),!0}(e,n,t,r,m);if((0,aQ.XN)(m))return function(e,n,t,r,i){if(!a4(e,n,r,i.filePath,i.revisionId))return!1;var o=i.insertionRange,a=a5(i.selections);return t.dispatch({changes:{from:o.location,to:o.location+o.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,n,t,r,m);if((0,aQ.bb)(m))return!!a4(e,n,r,m.filePath,m.revisionId)&&(t.dispatch(t.state.replaceSelection(m.text)),!0);if((0,aQ.bj)(m))a4(e,n,r,m.filePath,m.revisionId)&&(0,oD.mJ)({filePath:e,view:t,clipboardText:m.text});else if((0,aQ.Ho)(m))switch(m.action){case aQ.wZ.REQUEST_BLUR:return function(e,n,t,r,i,o){if(!a4(e,n,r,i,o))return!1;t.contentDOM.blur()}(e,n,t,r,m.filePath,m.revisionId);case aQ.wZ.REQUEST_UNDO:return o=e,a=n,l=t,s=r,c=m.filePath,!!a4(o,a,s,c,m.revisionId)&&((0,L.tN)(l),!0);case aQ.wZ.REQUEST_REDO:return u=e,d=n,p=t,f=r,h=m.filePath,!!a4(u,d,f,h,m.revisionId)&&((0,L.ZS)(p),!0);case aQ.wZ.REQUEST_INDENT_SELECTION:return!!a4(e,n,r,m.filePath,m.revisionId)&&(L.UY(t),!0);case aQ.wZ.REQUEST_DEDENT_SELECTION:return!!a4(e,n,r,m.filePath,m.revisionId)&&(L.Mg(t),!0);case aQ.wZ.REQUEST_TOGGLE_COMMENT:return!!a4(e,n,r,m.filePath,m.revisionId)&&(L.qh(t),!0);case aQ.wZ.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION:return!!a4(e,n,r,m.filePath,m.revisionId)&&(0,aJ.R)(t);case aQ.wZ.REQUEST_FOCUS:return t.focus(),!0;default:throw Error("Unknown BridgeTextEditorAction.")}else throw Error("Invalid payload.")}var a3=t(29047),a6=t(50781),a7=t(38511),a9=t(6219),le=t(75322),ln=t(98444),lt=t(55530),lr=t(4630),li=t(48326),lo=t(72618),la=t(2197),ll=t(33067),ls=function(e){var n=parseInt(e.substring(1),16);return[n>>16&255,n>>8&255,255&n]},lc=t(68842);function lu(e,n,t){var r=n.clientWidth,i=t.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}var ld=t(71906);function lp(e,n,t,r){var i=(0,oi.A)().showError,o=(0,aO.A)(),a=(0,ld.Rf)({variables:{replId:o,path:e},onError:function(e){i(e.message)},skip:!r||n});return(0,g.useMemo)(function(){var r;return n||a.loading||a.error||!a.data||(null===(r=a.data.threadsByFile)||void 0===r?void 0:r.__typename)!=="ThreadsByFileResult"?{}:a.data.threadsByFile.threads.filter(function(n){return n.path===e&&(!t||!n.isResolved)}).reduce(function(e,n){return(0,p._)((0,d._)({},e),(0,tl._)({},n.id,n))},{})},[a.loading,a.data,a.error,e,n,t])}var lf=function(e){function n(){return(0,eo._)(this,n),(0,n3._)(this,n,arguments)}(0,n6._)(n,e);var t=n.prototype;return t.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},t.eq=function(e){return!1},t.destroy=function(e){},n}(er.FB);lf.prototype.elementClass="",lf.prototype.toDOM=void 0,lf.prototype.mapMode=er.iR.TrackBefore,lf.prototype.startSide=lf.prototype.endSide=-1,lf.prototype.point=!0;var lh=er.sj.define(),lm=er.sj.define(),lg=er.sj.define({combine:function(e){return e.some(function(e){return e})}}),lv=ec.Z9.fromClass(function(){function e(n){(0,eo._)(this,e),this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.width="0px",this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(lm).map(function(e){return new lS(n,e)});var t=!0,r=!1,i=void 0;try{for(var o,a=this.gutters[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;this.dom.appendChild(l.dom)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}this.fixed=!n.state.facet(lg),this.fixed&&(this.dom.style.position="sticky",this.dom.style.right="0"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM.nextSibling)}var n=e.prototype;return n.update=function(e){if(e.viewportChanged){var n=this.view.contentDOM.nextElementSibling;n&&n!==this.dom&&n.classList.contains("cm-minimap-gutter")&&e.view.scrollDOM.insertBefore(this.dom,e.view.contentDOM.nextSibling)}if(this.updateGutters(e)){var t=this.prevViewport,r=e.view.viewport,i=Math.min(t.to,r.to)-Math.max(t.from,r.from);this.syncGutters(i<(r.to-r.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(lg)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},n.syncGutters=function(e){var n=this,t=this.dom.nextSibling;e&&this.dom.remove();var r=er.om.iter(this.view.state.facet(lh),this.view.viewport.from),i=[],o=this.gutters.map(function(e){return new lb(e,n.view.viewport,-n.view.documentPadding.top)}),a=!0,l=!1,s=void 0;try{for(var c,u=this.view.viewportLineBlocks[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,p=void 0;if(Array.isArray(d.type)){var f=!0,h=!1,m=void 0;try{for(var g,v=d.type[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var w=g.value;if(w.type==ec._B.Text){p=w;break}}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}}else p=d.type==ec._B.Text?d:void 0;if(p){i.length&&(i=[]),ly(r,i,d.from);var y=!0,b=!1,S=void 0;try{for(var Y,A=o[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0)Y.value.line(this.view,p,i)}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}var C=!0,x=!1,k=void 0;try{for(var _,D=o[Symbol.iterator]();!(C=(_=D.next()).done);C=!0)_.value.finish()}catch(e){x=!0,k=e}finally{try{C||null==D.return||D.return()}finally{if(x)throw k}}e&&this.view.scrollDOM.insertBefore(this.dom,t)},n.updateGutters=function(e){var n=e.startState.facet(lm),t=e.state.facet(lm),r=e.docChanged||e.heightChanged||e.viewportChanged||!er.om.eq(e.startState.facet(lh),e.state.facet(lh),e.view.viewport.from,e.view.viewport.to);if(n==t){var i=!0,o=!1,a=void 0;try{for(var l,s=this.gutters[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)l.value.update(e)&&(r=!0)}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}else{r=!0;var c=[],u=!0,d=!1,p=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value,g=n.indexOf(m);g<0?c.push(new lS(this.view,m)):(this.gutters[g].update(e),c.push(this.gutters[g]))}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}var v=!0,w=!1,y=void 0;try{for(var b,S=this.gutters[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var Y=b.value;Y.dom.remove(),0>c.indexOf(Y)&&Y.destroy()}}catch(e){w=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw y}}var A=!0,C=!1,x=void 0;try{for(var k,_=c[Symbol.iterator]();!(A=(k=_.next()).done);A=!0){var D=k.value;this.dom.appendChild(D.dom)}}catch(e){C=!0,x=e}finally{try{A||null==_.return||_.return()}finally{if(C)throw x}}this.gutters=c}return r},n.destroy=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.gutters[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}this.dom.remove()},e}(),{provide:function(e){return ec.Lz.scrollMargins.of(function(n){var t=n.plugin(e);return t&&0!=t.gutters.length&&t.fixed?n.textDirection==ec.OP.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}:null})}});function lw(e){return Array.isArray(e)?e:[e]}function ly(e,n,t){for(;e.value&&e.from<=t;)e.from==t&&n.push(e.value),e.next()}var lb=function(){function e(n,t,r){(0,eo._)(this,e),this.gutter=n,this.height=r,this.localMarkers=[],this.i=0,this.cursor=er.om.iter(n.markers,t.from)}var n=e.prototype;return n.line=function(e,n,t){this.localMarkers.length&&(this.localMarkers=[]),ly(this.cursor,this.localMarkers,n.from);var r=t.length?this.localMarkers.concat(t):this.localMarkers,i=this.gutter.config.lineMarker(e,n,r);i&&r.unshift(i);var o=this.gutter;if(0!=r.length||o.config.renderEmptyElements){var a=n.top-this.height;if(this.i==o.elements.length){var l=new lY(e,n.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,n.height,a,r);this.height=n.bottom,this.i++}},n.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}},e}(),lS=function(){function e(n,t){var r,i=function(e){r.dom.addEventListener(e,function(r){var i=n.lineBlockAtHeight(r.clientY-n.documentTop);t.domEventHandlers[e](n,i,r)&&r.preventDefault()})};for(var o in(0,eo._)(this,e),this.view=n,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),t.domEventHandlers)r=this,i(o);this.markers=lw(t.markers(n)),t.initialSpacer&&(this.spacer=new lY(n,0,0,[t.initialSpacer(n)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}var n=e.prototype;return n.update=function(e){var n=this.markers;if(this.markers=lw(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}var r=e.view.viewport;return!er.om.eq(this.markers,n,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},n.destroy=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.elements[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}},e}(),lY=function(){function e(n,t,r,i){(0,eo._)(this,e),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(n,t,r,i)}var n=e.prototype;return n.update=function(e,n,t,r){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=t&&(this.dom.style.marginTop=(this.above=t)?t+"px":""),!function(e,n){if(e.length!=n.length)return!1;for(var t=0;t<e.length;t++)if(!e[t].compare(n[t]))return!1;return!0}(this.markers,r)&&this.setMarkers(e,r)},n.setMarkers=function(e,n){for(var t="cm-gutterElement",r=this.dom.firstChild,i=0,o=0;;){var a=o,l=i<n.length?n[i++]:null,s=!1;if(l){var c=l.elementClass;c&&(t+=" "+c);for(var u=o;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,s=!0;break}}else a=this.markers.length;for(;o<a;){var d=this.markers[o++];if(d.toDOM){d.destroy(r);var p=r.nextSibling;r.remove(),r=p}}if(!l)break;l.toDOM&&(s?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),s&&o++}this.dom.className=t,this.markers=n},n.destroy=function(){this.setMarkers(null,[])},e}(),lA=er.sj.define(),lC=er.sj.define({combine:function(e){return(0,er.QR)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,n){var t=Object.assign({},e);for(var r in n)!function(e){var r=t[e],i=n[e];t[e]=r?function(e,n,t){return r(e,n,t)||i(e,n,t)}:i}(r);return t}})}}),lx=function(e){function n(e){var t;return(0,eo._)(this,n),(t=(0,n3._)(this,n)).number=e,t}(0,n6._)(n,e);var t=n.prototype;return t.eq=function(e){return this.number==e.number},t.toDOM=function(){return document.createTextNode(this.number)},n}(lf);function lk(e,n){return e.state.facet(lC).formatNumber(n,e.state)}function l_(e){for(var n=9;n<e;)n=10*n+9;return n}lm.compute([lC],function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(lA)},lineMarker:function(e,n,t){return t.some(function(e){return e.toDOM})?null:new lx(lk(e,e.state.doc.lineAt(n.from).number))},lineMarkerChange:function(e){return e.startState.facet(lC)!=e.state.facet(lC)},initialSpacer:function(e){return new lx(lk(e,l_(e.state.doc.lines)))},updateSpacer:function(e,n){var t=lk(n.view,l_(n.view.state.doc.lines));return t==e.number?e:new lx(t)},domEventHandlers:e.facet(lC).domEventHandlers}});var lD=new(function(e){function n(){var e;return(0,eo._)(this,n),e=(0,n3._)(this,n,arguments),e.elementClass="cm-activeLineGutter",e}return(0,n6._)(n,e),n}(lf)),lE=(lh.compute(["selection"],function(e){var n=[],t=-1,r=!0,i=!1,o=void 0;try{for(var a,l=e.selection.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;if(s.empty){var c=e.doc.lineAt(s.head).from;c>t&&(t=c,n.push(lD.range(c)))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return er.om.of(n)}),t(86308)),lR=t(31165);let lI=function(e){var n=e.isOpen,t=e.threadId,r=(0,f._)((0,g.useState)(!1),2),i=r[0],o=r[1],a=(0,lE.Mk)({variables:{id:t},skip:"initial-spacer"===t});(0,g.useEffect)(function(){if(a&&!a.error){var e,n=null===(e=a.data)||void 0===e?void 0:e.thread;n&&o((null==n?void 0:n.__typename)==="AnnotationAnchor"&&(null==n?void 0:n.messages.some(function(e){return!e.seen})))}},[a]);var l={button:{alt:{default:"View threads",close:"Dismiss thread"}}};return(0,m.Y)(rH.K0,{alt:n?l.button.alt.close:l.button.alt.default,size:24,className:"thread-indicator",css:[H.wp.width(20),H.wp.height(20),H.wp.transition.snappy,H.wp.cursor.pointer,H.wp.display.flex,H.wp.borderRadius(8),H.wp.position.relative,H.wp.overflow("visible"),n?H.wp.color.accentPrimaryStrongest:H.wp.color.foregroundDimmest,{borderWidth:eD.LU.borderWidthDefault,borderStyle:"solid",borderColor:n?eD.LU.accentPrimaryDefault:"transparent",backgroundColor:n?eD.LU.accentPrimaryDimmer:eD.LU.backgroundHigher,outline:0},{":hover":{borderColor:n?eD.LU.accentPrimaryStronger:eD.LU.outlineDimmer,color:n?eD.LU.accentPrimaryStrongest:eD.LU.foregroundDimmer,background:n?eD.LU.accentPrimaryDefault+" !important":eD.LU.backgroundHighest},svg:{width:12,height:12}}],children:(0,m.FD)(m.FK,{children:[i?(0,m.Y)("div",{css:[H.wp.width(8),H.wp.height(8),H.wp.backgroundColor.redStronger,H.wp.position.absolute,H.wp.top(-1),H.wp.left(-1),H.wp.borderRadius("full")]}):null,(0,m.Y)(lR.A,{})]})})};var lF=t(33508),lT=t(39695),lP=t(11646),lL=t(18951),lU=t(80970),lN=t(17917),lO=t(31167),lM=t(8481);let lB=function(e){var n=e.caretSize,t=void 0===n?[8,12]:n,r=(0,et._)(e,["caretSize"]);return(0,m.FD)("svg",(0,p._)((0,d._)({width:t[0],height:t[1],viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),{children:[(0,m.Y)("mask",{id:"outline",fill:"white",children:(0,m.Y)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z"})}),(0,m.Y)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z",fill:"url(#gradient-fill)"}),(0,m.Y)("path",{d:"M0 8L-0.8 7.4L-2 9H0V8ZM12 8V9H14L12.8 7.4L12 8ZM5.2 1.06667L4.4 0.466667L5.2 1.06667ZM6.80033 1.06711L6.00033 1.66711L6.80033 1.06711ZM12 7H0V9H12V7ZM0.8 8.6L6 1.66667L4.4 0.466667L-0.8 7.4L0.8 8.6ZM6.00033 1.66711C7.87223 4.16297 9.13719 5.84959 11.2 8.6L12.8 7.4C10.7372 4.64959 9.47223 2.96297 7.60033 0.467109L6.00033 1.66711ZM6 1.66667L6.00033 1.66711L7.60033 0.467109C6.80082 -0.598902 5.20049 -0.600655 4.4 0.466667L6 1.66667Z",fill:"#0079F2",mask:"url(#outline)"}),(0,m.Y)("defs",{children:(0,m.FD)("linearGradient",{id:"gradient-fill",x1:"5.07692",y1:"0",x2:"5.07692",y2:"21.3333",gradientUnits:"userSpaceOnUse",children:[(0,m.Y)("stop",{stopColor:"#57ABFF"}),(0,m.Y)("stop",{offset:"1",stopColor:"#0079F2"})]})})]}))};var lH=t(86217),lz=t(45001),lW=t(17015),lG=t(18063),lV=t(99226),lj=t(13240),lZ=t(9200),lq=t(76346),lK=t(89977),l$=t(6761),lJ=t(98152),lQ=t(80525),lX=t(35801),l0=(0,B.x)({inlineThreadHeader:[H.wp.position.relative,H.wp.px(12),H.wp.py(8),{borderBottomWidth:eD.LU.borderWidthDefault,borderBottomStyle:"solid",borderBottomColor:eD.LU.outlineDimmest}],inlineThreadHeaderCaret:[H.wp.position.absolute,H.wp.height("fit-content"),H.wp.display.flex,H.wp.flex.row,H.wp.align.center],inlineThreadInputContainer:[H.wp.px(12),H.wp.pb(8),H.wp.pt(8),H.wp.border({color:eD.LU.outlineDimmest,direction:"top"}),{".popover-control-container":[H.wp.flex.grow(1)]}],inlineThreadInput:[H.wp.flex.row,H.wp.align.start,H.wp.rowWithGap(8),H.wp.width("full")],commentContainer:[H.wp.px(12),H.wp.py(12),H.wp.maxHeight(300),H.wp.overflowY("auto"),H.wp.colWithGap(16)]}),l1=function(e){var n,t,r=e.isCreating,i=e.threadId,o=e.filePath,a=e.isResolved,l=e.isLoading,s=e.isPlaceholder,c=e.caretPosition,u=e.onRequestClose,d=e.onResolveThread,p=e.openThreadsInbox,f={viewAll:"Inbox",next:"Next thread",previous:"Previous thread",dismiss:"Collapse"},h=lp(null===o?"":o,l,!0,!0),v=(0,D.gc)("fontSize").preferences.fontSize,w=[12,8];switch(v){case 10:w=[8,6];break;case 14:w=[10,6];break;case 18:w=[12,8];break;case 24:w=[14,10]}var y=(0,g.useMemo)(function(){return Object.values(h).sort(function(e,n){return e.indexStart-n.indexStart})},[h]),b=(0,g.useMemo)(function(){return y.findIndex(function(e){return e.id===i})},[y,i]),S=(0,lW.li)(),Y=(n=(0,ei._)(function(){var e;return(0,ea.YH)(this,function(e){return S(b===y.length-1?y[0].id:y[b+1].id),[2]})}),function(){return n.apply(this,arguments)}),A=(t=(0,ei._)(function(){var e;return(0,ea.YH)(this,function(e){return S(0===b?y[y.length-1].id:y[b-1].id),[2]})}),function(){return t.apply(this,arguments)});return(0,m.FD)(ni.ui,{background:"root",css:l0.inlineThreadHeader,row:!0,align:"center",justify:"space-between",children:[null!==c&&(0,m.Y)("span",{css:l0.inlineThreadHeaderCaret,style:{top:-w[1],left:c},children:(0,m.Y)(lB,{caretSize:w})}),(0,m.Y)(oP.$n,{iconLeft:(0,m.Y)(lQ.A,{}),onClick:function(){p()},text:f.viewAll,size:"small"}),y.length>1?(0,m.FD)(z.S,{row:!0,align:"center",gap:4,children:[(0,m.Y)(rH.K0,{alt:f.previous,onClick:A,children:(0,m.Y)(lK.A,{})}),(0,m.FD)(rp.EY,{color:"dimmest",variant:"small",multiline:!1,children:[b+1,"/",y.length]}),(0,m.Y)(rH.K0,{alt:f.next,onClick:Y,children:(0,m.Y)(lq.A,{})})]}):null,(0,m.FD)(z.S,{row:!0,align:"center",gap:4,children:[r||a||s?null:(0,m.Y)(oP.$n,{onClick:void 0===d?function(){}:d,text:"Resolve",size:"small",iconLeft:(0,m.Y)(l$.A,{})}),!r&&a?(0,m.Y)(lG.a,{text:"Resolved",colorway:"positive"}):null,(0,m.Y)(oP.$n,{onClick:void 0===u?function(){}:u,text:f.dismiss,size:"small",iconLeft:(0,m.Y)(lJ.A,{})})]})]})},l2=function(e){var n,t,r=e.threadId,i=e.isResolved,o=e.onMessageChange,a=e.onMessageSubmit,l=e.isPlaceholder,s=e.onRequestClose,c=void 0===s?function(){}:s,u=(0,f._)((0,g.useState)(""),2),h=u[0],v=u[1],w=(0,f._)((0,g.useState)((0,ir.A)()),2),y=w[0],b=w[1],S=(0,lN.A)().ref,Y=(0,g.useRef)(null),A={input:{placeholder:function(){return l?"Start a new thread… (Markdown is supported)":i?"Reply to re-open thread…":"Reply… (Markdown is supported)"}},submit:"Post reply",cancel:"Cancel"},C=function(){var e=h.trim();0!==e.length&&(a({message:e,messageId:y}),v(""),b((0,ir.A)()))},x=(0,lO.T)(),k=(0,lU.A)(),_=(0,f._)((0,lM.A)({"@":(n=(0,ei._)(function(e){var n,t;return(0,ea.YH)(this,function(r){return n=k.filter(function(e){return e.id!==x}),e&&(t=e.toLowerCase(),n=n.filter(function(e){return e.username.toLowerCase().startsWith(t)})),[2,n.slice(0,5).map(function(e){return{icon:(0,m.Y)(lZ.A,{username:e.username,fullName:e.fullName,url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})]})}),function(e){return n.apply(this,arguments)})}),2),D=_[0].suggestions,E=_[1],R=(0,lT.Bp)({items:(null==D?void 0:D.results)||[],defaultHighlightedIndex:0,isOpen:(null!==(t=null==D?void 0:D.results.length)&&void 0!==t?t:0)>0,onSelectedItemChange:function(e){var n=e.selectedItem;if(D&&n){var t=D.applySuggestion({targetValue:h,suggestionValue:n.value}),r=t.fullValue,i=t.cursorIndex;v(r),setTimeout(function(){Y.current&&(Y.current.setSelectionRange(i,i),Y.current.focus())})}}}),I=R.isOpen,F=R.getInputProps,T=R.getMenuProps,P=R.getItemProps,L=R.highlightedIndex,U=R.getComboboxProps;return(0,g.useEffect)(function(){var e="threads/drafts/".concat(r),n=oo.A.get(e,"string");n&&v(n);var t=Y.current;return function(){if(t){var n=t.value;if(0===n.length){oo.A.remove(e);return}oo.A.set(e,n)}}},[r]),(0,m.Y)(ni.ui,{background:"root",css:l0.inlineThreadInputContainer,children:(0,m.FD)("div",(0,p._)((0,d._)({css:l0.inlineThreadInput},U()),{children:[l?(0,m.Y)(oP.$n,{text:A.cancel,onClick:c}):null,(0,m.FD)("div",{css:[{width:"100%"}],children:[(0,m.Y)(oL.ov,(0,d._)({},F({ref:function(e){Y.current=e,S(e),E(e)},value:h,onChange:function(e){var n=e.target.value;v(n),o({message:n,messageId:y})},onKeyDown:function(e){!I&&(e.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),e.preventDefault(),C()))},onKeyUp:function(e){"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),c())},placeholder:A.input.placeholder(),css:[H.wp.height(32),H.wp.align.start,{resize:"vertical",width:"100%",flexGrow:1,caretColor:"auto"}],autoFocus:!0}))),(0,m.Y)("div",{css:{position:"relative"},children:(0,m.Y)("div",(0,p._)((0,d._)({},T({css:[{position:"absolute",top:eD.LU.space2,overflow:"hidden"},H.wp.borderRadius(16),H.wp.shadow(1),H.wp.backgroundColor.backgroundDefault]})),{children:null==D?void 0:D.results.map(function(e,n){return(0,lF.n)("div",(0,p._)((0,d._)({},P({item:e,index:n})),{key:e.value}),(0,m.FD)(lj.z,{spacing:2,css:[L===n?H.wp.backgroundColor.backgroundHighest:null,H.wp.p(8)],children:[e.icon,(0,m.Y)("div",{children:e.value})]}))})}))})]}),(0,m.Y)(z.S,{css:[H.wp.pt(4)],children:(0,m.Y)(rH.K0,{alt:A.submit,tooltipDelay:"long",onClick:C,children:(0,m.Y)(lX.A,{})})})]}))})},l4=function(e){var n,t,r=e.threadId,i=e.isCreating,o=e.isResolved,a=void 0!==o&&o,l=e.view,s=e.filePath,c=e.openThreadsInbox,u=(0,lz.A)(r,l,s),d=u.thread,p=u.loading,f=u.isPlaceholder,v=u.getLatestAnchor,w=u.updateThread,y=u.changeThreadMessage,b=u.finalizeThreadMessage,S=function(){null==l||l.dispatch({effects:[lc.Ky.of(null)]})},Y=(0,D.gc)("fontSize").preferences.fontSize,A=(0,g.useRef)(null);(0,lL.A)(d);var C=v(),x=l&&!p&&"number"==typeof(null==C?void 0:C.indexEnd)&&C.indexEnd<=l.state.doc.length?null===(t=l.coordsAtPos(C.indexEnd))||void 0===t?void 0:t.left:null,k=(null==l?void 0:l.dom.getBoundingClientRect().left)||null,_=Y;switch(Y){case 10:_=13;break;case 14:_=19;break;case 18:_=25;break;case 24:_=34}var E=(0,oi.A)().showConfirm,R=(0,aO.A)(),I=(0,g.useRef)(null),F=function(){I.current&&(I.current.scrollTop=I.current.scrollHeight)};(0,g.useEffect)(function(){setTimeout(function(){F()},0)},[null==d?void 0:d.messages]);var T=(0,g.useMemo)(function(){return(null==d?void 0:d.messages)?(0,h._)(d.messages).sort(function(e,n){return Date.parse(e.timeCreated)-Date.parse(n.timeCreated)}):[]},[null==d?void 0:d.messages]),P=(n=(0,g.useRef)(0),(0,aA.A)(function(e){var t=e.height;t!==n.current&&(null==l||l.requestMeasure()),n.current=t}));return(0,m.Y)("div",{css:[H.wp.width("100%"),H.wp.backgroundColor.backgroundRoot],children:(0,m.FD)(z.S,{innerRef:(0,Q.P)(A,P,{breadcrumb:"client/workspace/components/Threads/Inline.tsx:671"}),css:[H.wp.font.default,{borderTopWidth:eD.LU.borderWidthDefault,borderBottomWidth:eD.LU.borderWidthDefault,borderStyle:"solid",borderColor:eD.LU.accentPrimaryDefault}],children:[f||p?null:(0,m.Y)(l1,{isCreating:i,isResolved:a,isLoading:p,threadId:r,filePath:s,caretPosition:x&&k?x-k-6:null,isPlaceholder:f,onRequestClose:S,onResolveThread:function(){w({changes:{isResolved:!0}}),E("Thread resolved. You can reopen it from the inbox.")},openThreadsInbox:c}),p&&!f?(0,m.Y)(z.S,{style:{height:_},children:(0,m.Y)(lV.A,{viewBox:"0 0 400 21",backgroundColor:eD.LU.accentPrimaryDimmest,backgroundOpacity:0,foregroundColor:eD.LU.accentPrimaryDimmest,foregroundOpacity:.2,speed:1,children:(0,m.Y)("rect",{x:"0",y:"0",width:"100%",height:"100%"})})}):(0,m.FD)(m.FK,{children:[!i&&T.length>0?(0,m.Y)("div",{css:l0.commentContainer,style:{fontSize:Y},ref:I,children:T.map(function(e){return(0,m.Y)(lH.A,{thread:d,message:e},e.id)})}):null,(0,m.Y)(l2,{threadId:r,isPlaceholder:f,isResolved:a,onRequestClose:S,onMessageChange:y,onMessageSubmit:function(e){b(e),(0,eG.u4)(lP.AZ.MESSAGE_SENT,{replId:R,source:"threads",newThread:f})}})]})]})})},l5=function(e){function n(e,t){var r;return(0,eo._)(this,n),(r=(0,n3._)(this,n)).id=e,r.filePath=t,r}(0,n6._)(n,e);var t=n.prototype;return t.eq=function(e){return e.id===this.id},t.toDOM=function(e){var n=(0,rw.J)((0,m.Y)(l4,{threadId:this.id,view:e,filePath:this.filePath,openThreadsInbox:function(){return(0,rQ.zw)(e.state,{pane:{type:"threadInbox"}})}}));n.className="cm-thread-portal-widget";var t=e.dom.querySelector(".cm-scroller"),r=e.dom.querySelector(".cm-gutters");return t&&r&&lu(n,t,r),n},t.ignoreEvent=function(){return!0},n}(ec.xO),l8=function(e){function n(e,t){var r;return(0,eo._)(this,n),(r=(0,n3._)(this,n)).id=e,r.active=t,r}(0,n6._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this,t=(0,rw.J)((0,m.Y)(lI,{isOpen:this.active,threadId:this.id}));return t.className="cm-thread-indicator",t.style.display="inline",t.style.cursor="pointer",t.setAttribute("aria-hidden","true"),t.onclick=function(t){t.stopPropagation(),t.preventDefault(),e.dispatch({effects:[lc.Ky.of(e.state.field(lc.dg)===n.id?null:n.id)]})},t},t.eq=function(e){return e.id===this.id&&e.active===this.active},n}(lf),l3=[function(e){var n=[lv];return n}(),lm.of((0,d._)({},{class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return er.om.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},{class:"cm-thread-indicator-gutter",markers:function(e){var n=e.state.field(lc.K1),t=e.state.field(lc.dg);return er.om.of(Object.values(n).filter(function(e){return e.indexEnd!==e.indexStart}).map(function(n){var r=e.state.doc.lineAt(Math.min(n.indexStart,n.indexEnd)).from;return new l8(n.id,n.id===t).range(r)}),!0)},initialSpacer:function(){return new l8("initial-spacer",!1)}}))],l6=t(12722),l7=function(e,n,t,r,i){if(n===t)return null;var o=(0,f._)(r,2),a=o[0],l=o[1];return ec.NZ.mark({class:"replit-thread-highlight cm-thread-".concat(e),attributes:{style:"background-color: ".concat(i?l:a)},id:e}).range(n,t)},l9=new nR.k(function(e,n){return e?[er.Nb.highest(l3),lc.Am,lc.K1,lc.TW,lc.dg,ec.Lz.decorations.compute([lc.K1,lc.TW,lc.dg],function(e){var t=e.field(lc.K1),r=e.field(lc.TW),i=e.field(lc.dg),o=r||Object.values(t).find(function(e){return e.id===i});return ec.NZ.set((0,h._)(Object.values(t)).map(function(e){var t=o&&e.id===o.id;return l7(e.id,e.indexStart,e.indexEnd,n,t)}).filter(function(n){return null!==n&&n.from!==n.to&&n.from<=e.doc.length&&n.to<=e.doc.length}),!0)}),ec.Lz.decorations.compute([lc.K1,lc.TW,lc.dg,ed.Md],function(e){var n=e.field(lc.K1),t=e.field(lc.TW),r=e.field(lc.dg),i=e.facet(ed.Md);if(void 0===i)return ec.NZ.none;var o=(0,h._)(Object.values(n)).concat((0,h._)(t?[t]:[])).filter(Boolean).find(function(e){return e.id===r});return o?ec.NZ.set([ec.NZ.widget({widget:new l5(o.id,i),block:!0,side:1}).range(o.indexEnd)],!0):ec.NZ.none}),ec.Lz.updateListener.of(function(e){(0,ef.C)(e,i$.k,function(){var n=(0,h._)(e.view.dom.querySelectorAll(".cm-thread-portal-widget")),t=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(n.length&&t&&r){var i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;lu(c,t,r)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}})}),ec.Lz.updateListener.of(function(e){(0,ef.C)(e,lc.Mt,function(n){var t=n.value,r=e.state.field(lc.K1)[t];r&&e.view.dispatch({selection:{anchor:r.indexStart,head:r.indexStart},effects:[ec.Lz.scrollIntoView(r.indexStart,{x:"center",y:"center"})]})})})]:null}),se=t(6264);function sn(e){var n=e.selection.main.head,t=e.doc.lineAt(n);return{offset:n,line:t.number,column:n-t.from+1}}var st=new nR.k(function(e){return ec.Lz.focusChangeEffect.of(function(n,t){var r=n.facet(ed.Md);return r&&e(r,t?{type:"focus",position:sn(n)}:{type:"blur"}),null})}),sr=new nR.k(function(e){return ec.Lz.updateListener.of(function(n){if(n.selectionSet){var t=n.state.facet(ed.Md);t&&e(t,{type:"update",hasFocus:n.view.hasFocus,position:sn(n.state)})}})}),si=t(99667),so=new nR.k(function(){return(0,ec.BE)()}),sa=function(e){var n,t=(0,aj.A)((n=(0,ei._)(function(n){var t;return(0,ea.YH)(this,function(r){switch(r.label){case 0:return[4,n.status()];case 1:if((t=r.sent()).error)return[2,{error:t.error,isUnmerged:null}];if(t.changes.find(function(n){return n.path===e&&(n.type.index===aV.PX.UNMERGED||n.type.worktree===aV.PX.UNMERGED)}))return[2,{error:null,isUnmerged:!0}];return[2,{error:null,isUnmerged:!1}]}})}),function(e){return n.apply(this,arguments)}),[e]);return t||{error:null,isUnmerged:null}};function sl(e){var n,t,r,i,o,a,l,s,c,u,v,w,y,b,S,Y,E,I,F,T,L,U,N,B,H,z,W,G,V,j,Z,q,K,$,J,Q,X,ee,en,et,el,es,eA,eC,ex,e_,eE,eR,eI,eF,eT,eP,eL,eU,eN,eO,eM,eB,eH,ez,eW,eV,ej,eZ,eq,eK,e$,eJ,eQ,eX,e0,e1,e2,e4,e5,e8,e3,e6,e7,e9,ne,nn,nt,nr,ni,no,na,nl,ns,nc,nu,nd,np=e.filePath,nf=e.isHidden,nh=e.isReadOnly,ng=e.isReadOnlyWhileAgentWorking,nv=e.deeplink,nw=e.onDeeplinkUpdated,ny=e.performPaneOperation,nb=(0,nF.A)(),nS=nb.fs,nY=nb.debuggest,nA=nb.presence,nC=nb.runner,n_=(0,D.gc)("formatOnSave","rulers","minimapDisplay","showLeadingWhitespace","showEnclosedWhitespace","showTrailingWhitespace","showSelectedWhitespace").preferences,nE=(0,ad.A)(),nR=nE.ref,nT=nE.view,nO=(0,g.useCallback)(function(e){return ny({operation:"open",pane:e,secondary:!0})},[ny]);(0,M.Hn)(nT);var nM=(0,O.eG)(),nB=os.use(!!(null==nM?void 0:nM.match(/Chrome/i))&&!!(null==nM?void 0:nM.match(/Android/i))),nH="/replEnvironmentDesktop"===nk().pathname,nz=(0,g.useContext)(si.IC),nW=(0,oc.gR)(),nG=(t=(n={path:np,isHidden:nf}).path,r=n.isHidden,i=(0,se.EZ)(),o=st.use(i),a=sr.use(i),(0,g.useEffect)(function(){i(t,{type:r?"hidden":"unhidden"})},[r,i,t]),(0,g.useEffect)(function(){return function(){i(t,{type:"unmount"})}},[i,t]),(0,g.useMemo)(function(){return[o,a]},[o,a])),nV=(c=(l={view:nT,presence:nA,fs:nS,filePath:np,performPaneOperation:ny}).view,u=l.presence,v=l.fs,w=l.filePath,y=l.performPaneOperation,b=o_.use(w,v,u),S=on.use(u),E=(Y={filePath:w,fs:v,performPaneOperation:y}).filePath,I=Y.fs,F=Y.performPaneOperation,T=(0,ou.A)().trackTimeToLoadFileEnd,L=(0,oc.iO)(),U=(0,oc.jk)(),N=(0,oc.Qq)(),B=(0,oi.A)().showWarning,H=(0,g.useMemo)(function(){return{trackTimeToLoadFileEnd:T,throwBsod:L,setBsodFilePathVersion:U,deleteBsodFilePathVersion:N,showWarning:B,performPaneOperation:F}},[N,U,L,T,B,F]),z=ow.use(E,I,H),W=null===(s=(0,k.Vn)(c,i_.u))||void 0===s||s,G=(0,g.useMemo)(function(){return[z,b,S]},[z,b,S]),(0,g.useMemo)(function(){return{isLoading:W,extensions:G}},[W,G])),nj=nV.isLoading,nZ=nV.extensions,nK=function(){var e=(0,aO.A)(),n=(0,g.useContext)(aN.H);if(!n)throw Error("Expected codemirror state to be in codemirror state context");return aW.use(e,n)}(),n$=(j=(V={filePath:np,isLoading:nj}).filePath,Z=V.isLoading,q=(0,nF.A)().fs,K=(0,n1.A)(j),$=(0,D.gc)("acceptSuggestionOnCommitCharacter","codeIntelligence","codeActionsOnSave","semanticTokens").preferences,J=(0,tO._P)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),Q=(0,tO._P)({controlName:"flag-draft-buffers",logFlagToAnalytics:!1}),X=!(0,tO._P)({controlName:"flag-clui-ctx-menu-rename-all",logFlagToAnalytics:!1}),ee=Z||!$.codeIntelligence||!K.find(function(e){return e.isSupportedFile(j)}),en=(0,g.useMemo)(function(){return new eu.L(ee?[]:function(e,n,t,r,i){if(!n.length)return[];var o,a,l,s,c,u,g,v=[(a=(o={lspClients:n,path:t}).lspClients,l=o.path,ec.Z9.define(function(e){var n,t,r,i,o,s;return t=(n={lspClients:a,path:l,view:e}).lspClients,r=n.path,i=n.view,o=(0,ir.A)(),s=function(e){var n,t=io.get(e.clientId);return(null!==(n=null==t?void 0:t.get(r))&&void 0!==n?n:[])[0]===o},function(){var e=!0,n=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(e=(l=s.next()).done);e=!0){var c,u=l.value,d=io.get(u.clientId),p=null!==(c=null==d?void 0:d.get(r))&&void 0!==c?c:[];d?d.set(r,(0,h._)(p).concat([o])):io.set(u.clientId,new Map([[r,[o]]])),u.notify.didOpen(r,i.state.doc.toString())}}catch(e){n=!0,a=e}finally{try{e||null==s.return||s.return()}finally{if(n)throw a}}}(),{id:o,destroy:function(){var e=!0,n=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var s,c=a.value,u=io.get(c.clientId),d=(null!==(s=null==u?void 0:u.get(r))&&void 0!==s?s:[]).filter(function(e){return e!==o});c.getServerState()===ii.b.INITIALIZED&&c.isOpen(r)&&c.notify.didClose(r),0===d.length?null==u||u.delete(r):null==u||u.set(r,d)}}catch(e){n=!0,i=e}finally{try{e||null==l.return||l.return()}finally{if(n)throw i}}},update:function(e){if(e.docChanged){var n=!0,i=!1,o=void 0;try{for(var a,l,c=t[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var u,d=l.value;if(s(d)){var p=null===(u=d.getServerCapabilities())||void 0===u?void 0:u.textDocumentSync;if(p!==tW.TextDocumentSyncKind.None&&d.isOpen(r)){if(p===tW.TextDocumentSyncKind.Full){d.notify.didChange(r,[{text:e.view.state.doc.toString()}]);continue}a||(a=function(e,n){var t=[],r=n;return e.iterChanges(function(e,n,i,o,a){var l=a.sliceString(0),s=n-e,c=s+i;t.push({range:{start:(0,eh.Z3)(r,i),end:(0,eh.Z3)(r,c)},rangeLength:s,text:l}),r=r.replace(i,c,a)}),t}(e.changes,e.startState.doc)),d.notify.didChange(r,a)}}}}catch(e){i=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}}}}})),(0,x.E9)({lspClients:n,path:t}),function(e,n){function t(e){return(0,eg.A)(e).isTextDocumentSyncSupported}return ec.Z9.fromClass(function(){function r(e){(0,eo._)(this,r),this.dispose=this.listen(e.state.facet(ed.Md))}var i=r.prototype;return i.update=function(e){(0,eu.$H)(e,ed.Md)&&(this.dispose=this.listen(e.state.facet(ed.Md)))},i.destroy=function(){this.dispose&&this.dispose()},i.listen=function(r){if(this.dispose&&this.dispose(),r&&n.find(function(e){return t(e)}))return e.watchTextFile(r,{onFlush:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var s=a.value;if(t(s))(0,eg.A)(s).isTextDocumentSyncSaveSupported&&s.isOpen(r)&&s.notify.didSave(r)}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}})},r}())}(e,n),[ey,eY,ec.Z9.fromClass(function(){function e(t){(0,eo._)(this,e);var r=this;this.abortControllers=[],this.getSymbolMap=(0,em.A)((0,ei._)(function(){var e,i,o;return(0,ea.YH)(this,function(a){switch(a.label){case 0:if(!(e=t.state.facet(ed.Md)))return[2];return r.abortControllers=[],[4,Promise.all(n.map(function(n){if(!(0,eg.A)(n).isDocumentSymbolSupported)return null;var t=new AbortController;return r.abortControllers.push(t),function(e,n,t){return eb.apply(this,arguments)}(n,e,t.signal)}))];case 1:return i=a.sent(),t.dispatch({effects:ew.of(null!==(o=i.find(Boolean))&&void 0!==o?o:null)}),[2]}})}),{wait:200}),ev(t.state)&&this.getSymbolMap().catch(eS)}var t=e.prototype;return t.update=function(e){(0,eu.$H)(e,"doc",ep.q)&&ev(e.state)&&(this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap().catch(eS))},t.destroy=function(){this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap.isScheduled()&&this.getSymbolMap.cancel()},e}())]];return(0,tz.isMobile)()?v:(v.push([rR,rC,r_,(0,tG.yU)({defaultKeymap:!1,closeOnBlur:!1,tooltipClass:function(e){return(0,tV.R)(e)?rA:""},addToOptions:[{render:function(e,n){if(!(0,tV.R)(n))return null;var t=(0,rw.J)((0,m.Y)("div",{className:rE,children:(0,m.Y)(rS.Ay,{size:"inherit",shortcut:{key:"⏎"}})}));return t.style.display="inline-flex",t},position:200}],override:n.map(function(e){return(0,tG.Ar)(["LineComment","BlockComment"],function(e){var n=.01>Math.random(),t=0,r=function(t,r,i){if(n&&r){var o=e.getLanguageId(r);return tk.vF.info("lsp:autocomplete:".concat(t),(0,d._)({languageId:o},i)),(0,eG.u4)(eG.AZ.LSP_COMPLETION_USED,(0,d._)({type:t,sampleRate:.01},i))}};function i(){return(i=(0,ei._)(function(n){var i,o,a,l,s,c,u,g,v,w;return(0,ea.YH)(this,function(y){switch(y.label){case 0:if(!(o=e.getServerCapabilities())||!(null==o?void 0:o.completionProvider)||!(a=function(e,n){var t=e.state,r=e.pos;if(e.explicit)return{triggerKind:tW.CompletionTriggerKind.Invoked};var i=t.doc.lineAt(r),o=i.text[r-i.from-1],a=i.text.substring(0,r-i.from);return(null==n?void 0:n.includes(o))?{triggerKind:tW.CompletionTriggerKind.TriggerCharacter,triggerCharacter:o}:a.match(/\w$/)?{triggerKind:tW.CompletionTriggerKind.Invoked}:null}(n,(null==o?void 0:null===(i=o.completionProvider)||void 0===i?void 0:i.triggerCharacters)||[])))return[2,null];if(t&&e.notify.cancelRequest(t),!(l=n.state.facet(ed.Md)))throw Error("path not found");return t=e.generateId(),s=n.state.doc,[4,e.request.completion(l,(0,eh.Z3)(s,n.pos),a,{id:t})];case 1:if("error"in(c=y.sent())||(u=c.result,n.aborted||!u))return[2,null];return g=Array.isArray(u)?u:u.items,w=Array.isArray(u)?{}:null!==(v=u.itemDefaults)&&void 0!==v?v:{},[2,function(e){for(var n,t=e.context,r=e.items,i=e.itemDefaults,o=e.client,a=e.trackCompletion,l=e.startingDoc,s=null,c=function(){return s},u=(R=r.filter(function(e){return!!e.label}),I=["label","kind"],F=new Set,R.filter(function(e){var n=I.map(function(n){return e[n]}).join("␞");return!F.has(n)&&(F.add(n),!0)})).map(function(e){return{item:e,label:e.label,filterText:(e.filterText||e.label).toLowerCase(),sortText:(e.sortText||e.label).toLowerCase()}}),g=((u=u.sort(function(e,n){return e.sortText<n.sortText?-1:+(e.sortText>n.sortText)})).length%2?u.length-1:u.length)/2,v=0;v<=g;v++){if(0===v&&u[g]){u[g].boost=0;continue}var w=u[g-v];if(w){var y=u[g-v+1],b=y.sortText,S=y.boost,Y=void 0===S?0:S;w.boost=w.sortText===b?Y:Y+1}var A=u[g+v];if(A){var C=u[g+v-1],x=C.sortText,k=C.boost,_=void 0===k?0:k;A.boost=A.sortText===x?_:_-1}}var D=null!==(L=null===(T=u[0])||void 0===T?void 0:T.boost)&&void 0!==L?L:0,E=null!==(U=null===(P=u[u.length-1])||void 0===P?void 0:P.boost)&&void 0!==U?U:0;if(D>99||E<-99)for(var R,I,F,T,P,L,U,N,O=99/Math.max(Math.abs(D),Math.abs(E)),M=0;M<u.length;M++)u[M].boost=(null!==(N=u[M].boost)&&void 0!==N?N:0)*O;var B=(0,f._)(function(e){var n=Object.create(null),t=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value.filterText;n[s[0]]=!0;for(var c=1;c<s.length;c++)t[s[c]]=!0}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var u=rD(n)+rD(t)+"*$";return[RegExp("^"+u),new RegExp(u)]}(u),2),H=B[0],z=B[1],W=t.matchBefore(z),G=t.pos;function V(e,n){var t,r,s,u,g,v,w,y,b,S,Y,A,C,x;return b=n.state.facet(ed.Md),S=null!==(g=(0,tj.A)(n.state))&&void 0!==g?g:"unknown",Y=(0,eg.A)(o),A=e.item,C=e.boost,x={label:A.label,detail:Y.isCompletionLabelDetailsSupported?null===(t=A.labelDetails)||void 0===t?void 0:t.description:A.detail,type:null===(r=Object.entries(ek.CompletionItemKind).find(function(e){var n=(0,f._)(e,2),t=(n[0],n[1]);return A.kind===t}))||void 0===r?void 0:r[0].toLowerCase(),commitCharacters:n.state.facet(tZ)?null!==(y=null!==(w=null!==(v=A.commitCharacters)&&void 0!==v?v:i.commitCharacters)&&void 0!==w?w:null===(u=o.getServerCapabilities())||void 0===u?void 0:null===(s=u.completionProvider)||void 0===s?void 0:s.allCommitCharacters)&&void 0!==y?y:[]:void 0,boost:C},ry.set(x,e),x.apply=function(n,t,r,i){var s=function(e){var t=u?l:n.state.doc,r={from:(0,eh.TU)(t,e.start),to:(0,eh.TU)(t,e.end)};return u&&(r.from=u.mapPos(r.from),r.to=u.mapPos(r.to)),r};if(b){var u=c(),m=null!==(v=null===(g=e.resolved)||void 0===g?void 0:g.additionalTextEdits)&&void 0!==v?v:A.additionalTextEdits;if(A.insertTextFormat===ek.InsertTextFormat.Snippet){var g,v,w,y,Y,C=null;m&&(C={changes:m.map(function(e){return(0,p._)((0,d._)({},s(e.range)),{insert:e.newText})})});var x=new re(null!==(Y=null!==(y=null===(w=A.textEdit)||void 0===w?void 0:w.newText)&&void 0!==y?y:A.insertText)&&void 0!==Y?Y:A.label);if(A.textEdit&&"range"in A.textEdit){var k=i,_=s(A.textEdit.range);r=_.from,i=Math.max(i=_.to,k)}var D=C?[C,x.apply({view:n,from:r,to:i,path:b,completion:t})]:[x.apply({view:n,from:r,to:i,path:b,completion:t})];n.dispatch.apply(n,(0,h._)(D)),a("completion-accepted",b,{language:S,completionKind:A.kind,insertTextFormat:A.insertTextFormat});return}var E=[];if(A.textEdit){if(!("range"in A.textEdit))return;var R=s(A.textEdit.range);E.push((0,p._)((0,d._)({},R),{to:Math.max(R.to,n.state.selection.main.to),insert:A.textEdit.newText}))}else{var I=A.insertText||A.label,F=n.state.wordAt(i);F&&F.to>i&&I.includes(n.state.doc.sliceString(i,F.to))&&(i=F.to),E.push({from:r,to:i,insert:I})}var T=(0,f._)(E,1)[0],P="";null==m||m.forEach(function(e){var n=s(e.range);"from"in T&&n.from===T.from&&(P=e.newText),E.push((0,p._)((0,d._)({},n),{insert:e.newText}))});var L=i-r;n.state.selection.ranges.forEach(function(e){if(e!==n.state.selection.main){if(!("insert"in T)||!T.insert)throw Error("Expected insert in mainChange");var t=e.from-L,r=P+T.insert;E.push({from:t,to:e.to,insert:r})}});var U=er.VR.of(E.map(function(e){return"from"in e&&void 0!==e.to?(0,p._)((0,d._)({},e),{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e}),n.state.doc.length);a("completion-accepted",b,{language:S,completionKind:A.kind,insertTextFormat:A.insertTextFormat}),n.dispatch({annotations:tG.rK.of(t),changes:U,selection:er.OF.create(n.state.selection.ranges.map(function(e){return e.map(U,0)}),n.state.selection.mainIndex)}),A.command&&o.request.executeCommand(A.command.command,A.command.arguments)}},Y.isCompletionItemResolveSupported&&(x.info=(0,ei._)(function(){var n,t,r,i,l,s,c;return(0,ea.YH)(this,function(u){switch(u.label){case 0:if(t=null!==(n=e.resolved)&&void 0!==n?n:null)return[3,2];return[4,o.request.resolveCompletionItem(A)];case 1:if(t="result"in(r=u.sent())?r.result:null,r.cancelled||null===t)return[2,null];e.resolved=t,u.label=2;case 2:if(i=Math.floor(0x7fffffff*Math.random()),l=[],b&&t.detail&&t.detail!==A.detail&&t.detail!==A.label&&(c=["```"+((s=b.lastIndexOf("."))>=0?b.slice(s+1):"md"),t.detail,"```"].join("\n"),l.push((0,m.Y)(rv,{className:t.documentation?"lsp-completion-detail":void 0,content:{value:c,kind:"markdown"}},"".concat(i,"-detail")))),t.documentation&&l.push((0,m.Y)(rv,{content:t.documentation},"".concat(i,"-documentation"))),0===l.length)return[2,null];return a("resolution-presented",b,{language:S,resolutionSource:"request",completionKind:A.kind}),[2,{dom:(0,rw.J)((0,m.Y)("div",{children:l}))}]}})})),x}return W&&(G=W.from),u.length&&a("completion-options-presented",t.state.facet(ed.Md),{language:null!==(n=(0,tj.A)(t.state))&&void 0!==n?n:"unknown"}),{from:G,options:u.map(function(e){return V(e,t)}),validFor:H,update:function(e,n,t,r){return(0,p._)((0,d._)({},e),{options:e.options.map(function(e){var n,t=null!==(n=ry.get(e))&&void 0!==n?n:null;return t?V(t,r):e})})},map:function(e,n){return s=s?s.composeDesc(n):n,e}}}({context:n,startingDoc:s,items:g,itemDefaults:w,client:e,trackCompletion:r})]}})})).apply(this,arguments)}return function(e){return i.apply(this,arguments)}}(e))})})],function(e){var n={current:new Map};function t(){return(t=(0,ei._)(function(t,i){var o,a,l,s,c,u;return(0,ea.YH)(this,function(d){switch(d.label){case 0:if(!(a=t.facet(ed.Md))||(l=t.field(r,!1),s=t.field(r7,!1),!(c=e.filter(function(e){var n,t,r,i=null!==(r=null===(t=e.getServerCapabilities())||void 0===t?void 0:null===(n=t.signatureHelpProvider)||void 0===n?void 0:n.triggerCharacters)&&void 0!==r?r:[];return!!(i.length&&(l||s&&i.includes(s)))})).length))return[2,null];return[4,function(e,n,t,r,i){return it.apply(this,arguments)}(t,i,c,a,n)];case 1:if(!(null==(u=d.sent())?void 0:null===(o=u.signatures)||void 0===o?void 0:o.length))return[2,null];return[2,u]}})})).apply(this,arguments)}var r=er.sU.define({create:function(){return null},update:function(e,n){return n.isUserEvent("select.pointer")?null:(e&&n.newSelection.main.from!==e.pos&&(e=(0,p._)((0,d._)({},e),{pos:n.newSelection.main.from})),(0,ef.C)(n,r3.effect,function(t){var r=t.value;e=r?{pos:n.newSelection.main.from,help:r,index:0}:null}),(0,ef.C)(n,r6,function(n){var t=n.value;if(e){var r=e.help.signatures.length,i=(r+e.index+t)%r;e=i>=e.help.signatures.length||i<0?null:(0,p._)((0,d._)({},e),{index:i})}}),e)},provide:function(e){var n=function(n){var t=n.state.field(e);if(!t)throw Error("expected nonnull field");var r=r9.create({help:t.help,index:t.index});return{dom:r,update:function(n){r9.update(r,function(r){var i=n.state.field(e);return i&&i!==t?{help:i.help,index:i.index}:r})}}};return ec.DK.compute([e],function(t){var r=t.field(e);return r?{pos:r.pos,create:n,above:!0}:null})}}),i=ec.Z9.define(function(){var n,r=P()((n=(0,ei._)(function(e){var n,r,i;return(0,ea.YH)(this,function(o){switch(o.label){case 0:if(!(n=e.state.selection.main).empty)return[3,2];return r=e.state.field(r3.state,!1),[4,function(e,n){return t.apply(this,arguments)}(e.state,n.from)];case 1:(i=o.sent())&&!r&&(0,tG.N)(e),e.dispatch({effects:r3.effect.of(i)}),o.label=2;case 2:return[2]}})}),function(e){return n.apply(this,arguments)}),0);return{update:function(n){e.some(function(e){return(0,eg.A)(e).isSignatureHelpSupported})&&n.selectionSet&&n.state.selection.main.empty&&r(n.view)}}});function o(e,n){var t=e.state.field(r3.state,!1);return"active"!==(0,tG.DH)(e.state)&&null!=t&&("navigate"!==n||t.signatures.length>1)}var a=function(e){return function(n){return!!o(n,"navigate")&&(n.dispatch({effects:r6.of(e)}),!0)}},l=[{key:"ArrowDown",run:a(1)},{key:"ArrowUp",run:a(-1)},{key:"Escape",run:function(e){return!!o(e,"dismiss")&&(e.dispatch({effects:r3.effect.of(null)}),!0)}}];return[r,r3.state,r7,i,er.Nb.high(ec.w4.of(l))]}(n),(s=function(e){var n,t=null;return(0,ec.Ux)((n=(0,ei._)(function(n,r){var i,o,a,l,s,c;return(0,ea.YH)(this,function(u){switch(u.label){case 0:if(n.state.facet(r4.f)||!(0,eg.A)(e).isHoverSupported||!(i=n.state.facet(ed.Md)))return[2,null];o=(0,eh.Z3)(n.state.doc,r);try{a=n.state.wordAt(r)}catch(e){return[2,null]}if(t){if(t.from===(null==a?void 0:a.from)&&t.to===(null==a?void 0:a.to))return[2,null];e.notify.cancelRequest(t.id)}return t={id:l=e.generateId(),from:null==a?void 0:a.from,to:null==a?void 0:a.to},[4,e.request.hover(i,o,{id:l})];case 1:if(s=u.sent(),t=null,"error"in s||null===(c=s.result))return[2,null];return[2,function(e){var n,t,r=e.hover,i=e.state,o=e.offset;if((Array.isArray(r.contents)||"string"==typeof r.contents)&&0===r.contents.length)return null;var a="",l=i.doc;if(r.range)n=(0,eh.TU)(l,r.range.start),t=(0,eh.TU)(l,r.range.end),a=l.sliceString(n,t);else if(t=void 0,(n=o)<=i.doc.length){var s=i.wordAt(n);s?(a=l.sliceString(s.from,s.to),n=Math.min(n,s.from),t=s.to):a=l.sliceString(n,n+1)}return{pos:n,end:t,create:function(e){var n=(0,rw.J)((0,m.Y)(r2,{content:r.contents,textHovered:a}));return n.classList.add("hover-tooltip"),n.style.padding="0",{dom:n,mount:function(){!function(e,n){n.forEach(function(n){return setTimeout(e,n)})}(function(){(0,ec.Pq)(e)},[0,50,200,1e3])}}},above:!0}}({hover:c,offset:r,state:n.state})]}})}),function(e,t){return n.apply(this,arguments)}),{hideOn:function(e){return!e.annotation(er.ZX.remote)&&!!(e.isUserEvent("input")||e.isUserEvent("delete")||e.isUserEvent("select")||e.state.facet(r4.f))},hoverTime:0})},[er.Nb.highest(n.map(function(e){return s(e)})),ec.Lz.domEventObservers({mousedown:function(e,n){!(e.target instanceof HTMLElement&&e.target.matches(".cm-tooltip *"))&&(0,ec.n6)(n.state)&&n.dispatch({effects:ec.vo})},keydown:function(e,n){"Escape"===e.key&&(0,ec.n6)(n.state)&&n.dispatch({effects:ec.vo})},scroll:function(e,n){(0,ec.n6)(n.state)&&n.dispatch({effects:ec.vo})}})]),(0,rI.Qb)(n,e,r),(0,r5.Of)({lspClients:n}),(c=er.Pe.define(),u=er.Pe.define(),[ec.Lz.updateListener.of((g=(0,ei._)(function(e){var t,r,i,o,a,l,s,f,m,g,v,w,y,b,S,Y,A,C,x,k,_,D,E,R,I,F,T,P,L,U,N,O,M;return(0,ea.YH)(this,function(B){switch(B.label){case 0:if(!n.some(function(e){var n=(0,eg.A)(e);return n.isFindReferencesSupported||n.isFindDefinitionSupported}))return[2];t=null,r=!0,i=!1,o=void 0;try{for(a=e.transactions[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){s=l.value,f=!0,m=!1,g=void 0;try{for(v=s.effects[Symbol.iterator]();!(f=(w=v.next()).done);f=!0)(y=w.value).is(rT.x)&&(t=y.value)}catch(e){m=!0,g=e}finally{try{f||null==v.return||v.return()}finally{if(m)throw g}}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(!t||!(b=e.view.state.facet(ed.Md)))return[2];S=e.state.doc,Y=(0,eh.Z3)(S,t),A=[],C=!0,x=!1,k=void 0;try{for(_=function(){var e=E.value,n=(0,eg.A)(e);n.isFindDefinitionSupported&&A.push(e.request.findDefinitions(b,Y).then(function(n){return{client:e,response:n,type:"definition"}})),n.isFindReferencesSupported&&A.push(e.request.findReferences(b,Y,{includeDeclaration:!1}).then(function(n){return{client:e,response:n,type:"references"}}))},D=n[Symbol.iterator]();!(C=(E=D.next()).done);C=!0)_()}catch(e){x=!0,k=e}finally{try{C||null==D.return||D.return()}finally{if(x)throw k}}return R=Promise.all(A),(0,rF.o8)(e.view,R),[4,R];case 1:I=B.sent(),F=[],T=[],P=!0,L=!1,U=void 0;try{for(N=function(){var e=M.value,n=e.client,t=e.response,r=e.type;if("error"in t)throw Error("Something went wrong fetching references: ".concat(t.error.message));var i=(0,rJ.U)(t.result);if(!i)return"continue";"definition"===r&&F.push.apply(F,(0,h._)(i.map(function(e){return(0,p._)((0,d._)({},e),{path:n.documentUriToPath(e.uri)})}))),"references"===r&&T.push.apply(T,(0,h._)(i.map(function(e){return(0,p._)((0,d._)({},e),{path:n.documentUriToPath(e.uri)})})))},O=I[Symbol.iterator]();!(P=(M=O.next()).done);P=!0)N()}catch(e){L=!0,U=e}finally{try{P||null==O.return||O.return()}finally{if(L)throw U}}if(!F.length&&!T.length)return(0,nL.A)(e.view,{message:"No references found",offset:t}),e.view.dispatch({effects:u.of(null)}),[2];return e.view.dispatch({effects:c.of({references:T,definitions:F})}),[2]}})}),function(e){return g.apply(this,arguments)})),er.sU.define({create:function(){return null},update:function(e,n){var t=e,r=!0,i=!1,o=void 0;try{for(var a,l=n.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;s.is(c)&&(t=s.value),s.is(u)&&(t=null)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t},provide:function(e){return[ec.w4.of([{key:"Escape",run:function(n){return!!n.state.field(e)&&(n.dispatch({effects:u.of(null)}),!0)}}]),ec.DK.compute([e],function(n){var t=n.field(e),r=n.facet(ed.Md);if(!t)return null;var i=n.selection.asSingle().main;return{pos:i.from,end:i.to,create:function(e){var n=(0,rw.J)((0,m.Y)("div",{children:(0,m.Y)(rq,(0,p._)((0,d._)({},t),{onClose:function(){e.dispatch({effects:u.of(null)})},jumpToPosition:function(n){if(n.path!==r){(0,rQ.Tq)(e.state,{path:n,secondary:!1});return}var t=n.line,i=n.col;(0,tB.$)({view:e,line:t,col:i}),e.focus()}}))}));return n.classList.add("replit-tooltip"),n.style.padding="0",n.style.overflow="scroll",{dom:n}}}})]}})]),(0,r8.q)(e,n,i)),v)}(q,K,j,Q,X))},[K,j,q,Q,ee,X]),et=(0,g.useMemo)(function(){return new eu.L(function(){return ep.X.of(K.map(function(e){return(0,eg.A)(e)}))})},[K]),(0,g.useEffect)(function(){return!K.length||ee?en.set(null):(0,iy.xW)(K.map(function(e){return e.onServerCapabilitiesChange(function(){et.set(ep.X.of(K.map(function(e){return(0,eg.A)(e)})))})}))},[et,K,en,ee]),[et.extension,en.extension,ib.use($.acceptSuggestionOnCommitCharacter),iS.use($.codeActionsOnSave),iY.use($.codeIntelligence),iw.use($.semanticTokens&&J?K:null)]),nJ=(es=(el={debuggest:nY,filePath:np}).debuggest,eA=el.filePath,ex=(eC=(0,nF.A)()).fs,e_=eC.container,eE=(0,nI.A)(es.mainClient),eI=(eR=(0,f._)((0,g.useState)(null),2))[0],eF=eR[1],(0,g.useEffect)(function(){var e;return(e=(0,ei._)(function(){var e,n;return(0,ea.YH)(this,function(t){switch(t.label){case 0:return[4,e_.exec("printenv","REPL_HOME")];case 1:return(e=t.sent()).error||!e.output?eF(null):(n=e.output.trim(),eF(nD().join(n,eA))),[2]}})}),function(){return e.apply(this,arguments)})(),function(){}},[e_,eA]),nP.use(eE,eI,ex));(0,tB.A)({filePath:np,view:nT,isLoading:nj,deeplink:nv,onDeeplinkUpdated:nw});var nQ=(eP=(eT={view:nT,filePath:np}).view,eL=eT.filePath,eU=(0,nF.A)().fs,(0,f._)((0,le.H)({accept:[lt.N.Code,ln.FILE],drop:function(e,n){if(eP){var t=n.getClientOffset(),r=t?eP.posAtCoords(t):null;if(null!==r){var i=function(e){eP.focus(),eP.dispatch({changes:{from:r,insert:e},selection:{anchor:r,head:r+e.length}})};if(e.type===lt.N.Code)i(e.code);else{var o=!0,a=!1,l=void 0;try{for(var s,c=e.files[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;eL&&(0,_.e$)(eL)&&(0,lr.U)(u,eU,eL).then(i)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}}}}}),2)[1]),n0=(0,n5.A)({filePath:np}),n3=(eO=(eN={view:nT,filePath:np,isLoading:nj,enable:nH}).view,eM=eN.filePath,eB=eN.isLoading,eH=eN.enable,ez=(0,lW.Ln)(),(0,g.useEffect)(function(){eO&&ez&&eO.dispatch({effects:[lc.Ky.of(ez),lc.Mt.of(ez)]})},[eO,ez]),eW=(0,l6.D)().theme,ej=(eV=(0,f._)((0,g.useState)([eD.LU.accentPrimaryDimmest,eD.LU.accentPrimaryDimmer]),2))[0],eZ=eV[1],(0,g.useEffect)(function(){var e=ls(eW.values.global.accentPrimaryDimmest);eZ(["rgba(".concat(e.join(","),", 0.5)"),eD.LU.accentPrimaryDimmer])},[eW]),eq=lp(eM,eB,!0,eH),eK=(0,nF.A)().fs,eJ=(e$=(0,ll.ah)(eM)).contentRef,eQ=e$.loadedFile,eX=e$.transformSelectionRef,(0,g.useEffect)(function(){var e=!1,n=eX.current,t=eJ.current;if(eQ&&n&&t&&!eB&&eO){var r=Object.values(eq);if(0===r.length){eO.dispatch({effects:lc.IF.of({})});return}Promise.all(r.map(function(e){return(0,ll.gu)({anchor:e,version:eK.getOTVersion(eM),transformSelection:n,content:t})})).then(function(n){if(!e){var t=n.filter(function(e){return!!e}).map(function(e){if(!e)throw Error("expected resolved anchor");return(0,d._)({},e.anchor,null==e?void 0:e.newSelection)});return eO.dispatch({effects:lc.IF.of(t.reduce(function(e,n){return e[n.id]=n,e},{}))}),function(){e=!0,eO&&eO.dispatch({effects:lc.IF.of({})})}}})}},[eq,eO,eQ,eK,eX,eJ,eM,eB]),l9.use(eH,ej));e2=(e0={view:nT,filePath:np}).view,e4=e0.filePath,e5=(0,nx.useRouter)(),e8=(0,R.Po)(e5),e3=(0,g.useRef)({revisionId:(0,ir.A)(),textEditorState:aX(e4),hasGhostwriterSuggestion:!1}),e6=(0,g.useRef)(e4),e7=null!==(e1=null==e2?void 0:e2.plugin(k.Pb))&&void 0!==e1?e1:null,(0,g.useEffect)(function(){if(e8&&e2&&e7&&!e7.destroyed){var e=function(e){a1(e3.current,e.messageId)},n=function(n){a8(e4,e6.current,e2,e3.current,n)?e(n):(0,a$.Cf)(n.messageId)},t=function(n){a8(e4,e6.current,e2,e3.current,n)?e(n):(0,a$.Cf)(n.messageId)},r=function(r){try{var i=r.data;if(!(0,aQ.F5)(i)||i.protocolVersion!==aQ.V2)return;var o=i.payload;i.messageDirection===aQ.SU.TO_NATIVE&&(0,aQ.Yf)(o)&&(e6.current=o.activePaneFilePath),(0,a$.Vd)(r,function(r){var o=r.type;switch(o){case aQ.tF.TEXT_EDITOR_STATE_REQUEST:e(i);break;case aQ.tF.REQUEST_SET_SELECTION:case aQ.tF.REQUEST_REPLACE_SELECTION:case aQ.tF.REQUEST_SET_TEXT:case aQ.tF.REQUEST_INSERT_TEXT:case aQ.tF.REQUEST_PASTE_TEXT:n(i);break;case aQ.tF.TEXT_EDITOR_REQUEST_ACTION:t(i);break;default:(0,aK.A)(o)}})}catch(e){throw Error("Invalid message: ".concat(e))}};window.addEventListener("message",r),e3.current={revisionId:(0,ir.A)(),textEditorState:a0(e4,e2),hasGhostwriterSuggestion:(0,tV.R)(e2.state)},a1(e3.current);var i=!1,o=!1,a=e7.bind({changed:function(e){var n;return e.docChanged?(i=!0,!0):!!e.selectionSet||!!e.focusChanged||(null===(n=e3.current)||void 0===n?void 0:n.hasGhostwriterSuggestion)!==(0,tV.R)(e.state)},callback:function(){var e=i?(0,ir.A)():e3.current.revisionId;i=!1,e3.current={revisionId:e,textEditorState:a0(e4,e2),hasGhostwriterSuggestion:(0,tV.R)(e2.state)},a1(e3.current)},destroy:function(){window.removeEventListener("message",r),o||(a2(e4),o=!0)}});return function(){window.removeEventListener("message",r),a(),o||(a2(e4),o=!0)}}},[e2,e4,e8,e7]);var n6=(e9=(0,aZ.j)({path:np}),aq.use(e9)),n7=sa(np).isUnmerged,n9=(nn=(ne={filePath:np,enableConflicts:!0===n7}).filePath,nt=ne.enableConflicts,nr=(0,tO._P)({controlName:"flag-editor-git-conflict-markers",logFlagToAnalytics:!1}),ni=(0,nF.A)().git,tM.use(ni,void 0===nn?null:nn,!(void 0!==nt&&nt)||!nr)),te=(0,R.m5)(),tn=ao.use(te),tt=oD.vL.use(nS),tr=o9.use(te),ti=ag.use(n_.rulers),to=(0,l6.D)(),ta=ik.use(te,n_.minimapDisplay,to),tl=ay.use(te,to),ts=(0,tO._P)({controlName:"flag-draft-buffers"}),tc=A.EI.use(nS,nC,ts,n_.formatOnSave),tu=(no={filePath:np},na=(0,nF.A)().container,nl=(0,nX.I)(),ns=(0,D.gc)("codeIntelligence").preferences,nc=(0,n1.A)(no.filePath),nu=(0,n2.A)(nc),n4.use(nl,na,nc,nu,ns.codeIntelligence,no.filePath)),td=nq.use(n_.showLeadingWhitespace,n_.showEnclosedWhitespace,n_.showTrailingWhitespace,n_.showSelectedWhitespace),tp=(0,nN.T)({analyticsSurface:"workspace_editor"}),tf=(0,a6.MC)({path:np}),th=(0,a6.o0)({path:np}),tm=(0,a6.r9)({path:np}),tg=(0,g.useCallback)(function(){nT&&tf(nT,"shortcut")},[nT,tf]),tv=(0,a9.U)({isMobile:te,generateCode:tf,filePath:np}),tw=(0,g.useCallback)(function(){nO({type:"ghostwriterChat"})},[nO]),ty=(0,n8.m)({onGenerateCode:tg,onReplyInChat:tw}),tb=(0,la.EF)(),tS=tb.onContextMenu,tY=tb.closeContextMenu,tA=tb.openContextMenu,tC=tb.isVisible,tx=(0,g.useCallback)(function(e){nT&&(0,ec.TS)(nT,e,"context-menu")&&(tY(),e.stopPropagation(),e.preventDefault())},[tY,nT]),t_=(0,a6.B6)({path:np,view:nT}),tD=(0,g.useCallback)(function(e){tS(e,{command:t_(),width:275,onKeyDownHandler:tx})},[t_,tS,tx]),tE=(0,g.useCallback)(function(e,n){tA({target:e,command:[t_(),n],width:275,onKeyDownHandler:tx})},[t_,tx,tA]),tR=a6.F0.use(te,tC,tD),tI=a7.a.use(tE),tF=(0,g.useCallback)(function(e){tA({target:{x:e.right-275,y:e.top},width:275,command:t_(),onKeyDownHandler:tx})},[t_,tx,tA]),tT=(0,li.C)({editCode:tm,explainCode:th,generateCode:tf,onMoreClick:tF}),tP=(nd=(0,o3.g)(),o6.use(nd)),tL=so.use(),tU=(0,rQ.tT)(ny),tN=av.o.use(nS,nC,ts),tq=nU.use(ng);return(0,m.Y)("div",{css:lo.mV,"data-cy":nj?"loading-workspace-cm-editor":"workspace-cm-editor-".concat(np),children:(0,m.Y)(ae.Ay,{ref:nR,elementRef:nQ,css:lo.$1,filePath:np,hideTooltips:nf,readOnly:nh,extensions:[tR,tI,nZ,nJ,nK,n$,tv,tL,tn,nB,tr,n9,tl,ta,oD.yG,tt,oa,ty,tP,aG,ti,td,tc,tu,C.OR,n6,n0,n3,aU,au,te?[]:tT,nG,tH.f,tU,tN,tp,tq],onException:function(e){var n,t={filePath:np,cursorPosition:JSON.stringify(null==nz?void 0:null===(n=nz.get(nm.J0))||void 0===n?void 0:n.position),fileVersion:nW({filePath:np})};if(nT){var r=nT.plugin(oa),i=null==r?void 0:r.logs();null==r||r.flush(),t.domText=nT.contentDOM.innerText,t.keystrokes=JSON.stringify(i),t.selection=JSON.stringify(nT.state.selection.main.toJSON()),t.updateDoc=nT.state.doc.sliceString(0)}(0,a3.Q)(e,{tags:{origin:"CodemirrorEditor: useEditor/onException",codemirror:!0},extras:t})},noHistory:!0})})}var ss=t(98668),sc=t(43912),su=t(58467),sd=t(61239),sp=t(30043),sf=t(35992),sh=t(69338),sm=t(6553),sg=t(60274),sv=(0,y.eU)(0),sw=(0,y.eU)(new Map([["normal",[]],["compact",[]]])),sy=(0,y.eU)(null,function(e,n,t){var r=e(sA);n(sw,function(e){return(0,sf.jM)(e,function(e){var n=e.get(r);if(!n)throw Error("Expect width for: "+r);n[t.index]=t.width})})}),sb=(0,y.eU)(null,function(e,n,t){n(sw,function(e){return(0,sf.jM)(e,function(e){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)(0,f._)(o.value,2)[1].slice(0,t)}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}})})}),sS=(0,y.eU)(function(e){var n=new Map([["normal",0],["compact",0]]),t=!0,r=!1,i=void 0;try{for(var o,a=e(sw)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,f._)(o.value,2),s=l[0],c=l[1],u=0,d=!0,p=!1,h=void 0;try{for(var m,g=c[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){var v=m.value;void 0!==v&&(u+=v)}}catch(e){p=!0,h=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw h}}n.set(s,u)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),sY=(0,y.eU)(function(e){if("normal"===e(sA))return null;var n=e(sw).get("compact");if(!n)return null;var t=e(sv)-24,r=0,i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;if(void 0!==c){if((t-=c)>0){r++;continue}return r}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return null}),sA=(0,y.eU)(function(e){var n,t=e(sv);return(null!==(n=e(sS).get("normal"))&&void 0!==n?n:0)>t?"compact":"normal"}),sC=(0,B.x)({item:[H.wp.viewStyle,eK.b.listItem,H.wp.p(6),H.wp.rowWithGap(4),H.wp.align.center,{fontSize:eD.LU.fontSizeSmall}]});function sx(e){var n=(0,f._)((0,g.useState)(null),2),t=n[0],r=n[1],i=null!==t&&(null===(c=e.items[t])||void 0===c?void 0:c.popover);if(i)return(0,m.Y)(m.FK,{children:i});var o=[],a=!0,l=!1,s=void 0;try{for(var c,u,d=e.items[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var p=u.value;!p.onClick&&!p.popover&&o.push(p.key)}}catch(e){l=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw s}}return(0,m.Y)(sc.W1,{disabledKeys:o,onAction:function(n){var t=!0,i=!1,o=void 0;try{for(var a,l=e.items[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value;if(s.key===n){if(s.onClick){s.onClick();break}s.popover&&r(e.items.indexOf(s));break}}}catch(e){i=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}},children:e.items.map(function(e){return(0,m.Y)(sc.Dr,{id:e.key,css:sC.item,children:(0,m.Y)(sk.Provider,{value:function(){},children:(0,g.cloneElement)(e.item,{presentation:"overflowMenu"})})},e.key)})})}var sk=(0,g.createContext)(function(e){});function s_(){return(0,g.useContext)(sk)}var sD=(0,B.x)({button:[H.wp.viewStyle,H.wp.reset.button,H.wp.rowWithGap(4),H.wp.center,H.wp.color.foregroundDimmest,H.wp.hover([H.wp.color.foregroundDefault]),H.wp.height("100%"),{fontSize:12,"&:has(*)":[H.wp.px(4),eK.b.nofill,H.wp.borderRadius(0)]}],tooltip:[H.wp.backgroundColor.backgroundHighest,H.wp.borderRadius(4),H.wp.color.foregroundDimmer,H.wp.p(4),H.wp.border({color:eD.LU.outlineDefault}),{fontSize:12}]});function sE(e){var n=(0,aA.A)(function(n){return e.onWidth(n.width)}),t=(0,f._)((0,g.useState)(null),2),r=t[0],i=t[1];return(0,m.Y)(z.S,{innerRef:n,children:(0,m.FD)(su.k$,{isDisabled:null==r||e.hidden,children:[(0,m.Y)(sd.$,{isDisabled:e.isDisabled||e.hidden,css:sD.button,style:e.hidden?{opacity:0,pointerEvents:"none"}:void 0,onPress:function(){var n;return null===(n=e.onClick)||void 0===n?void 0:n.call(e)},children:(0,m.Y)(sk.Provider,{value:i,children:e.children})}),(0,m.Y)(su.m_,{placement:"top",offset:8,css:sD.tooltip,children:r})]})})}var sR=(0,B.x)({root:[H.wp.flex.growAndShrink(1),H.wp.position.relative,{"& > div:first-of-type > button":{borderBottomLeftRadius:4},"& > div:button:last-of-type > button":{borderBottomRightRadius:4}}],middle:[H.wp.flex.growAndShrink(1)],moreButton:[{width:24},H.wp.reset.button,H.wp.center,eK.b.nofill,H.wp.height("100%"),H.wp.position.absolute,H.wp.right(0),H.wp.top(0)]});function sI(e){var n=e.left.filter(Boolean),t=e.right.filter(Boolean),r=(0,f._)((0,g.useState)(function(){return(0,y.y$)()}),1)[0],i=(0,sh.md)(sA,{store:r}),o=(0,sh.md)(sY,{store:r}),a=(0,sh.Xr)(sy,{store:r}),l=(0,sh.Xr)(sv,{store:r}),s=(0,aA.A)(function(e){return l(e.width)}),c=n.length-1,u=(0,h._)(n).concat((0,h._)(t)),d=(0,sh.Xr)(sb,{store:r}),p=u.length;return(0,g.useEffect)(function(){d(p)},[d,p]),(0,m.Y)(m.FK,{children:(0,m.FD)(z.S,{className:e.className,css:sR.root,row:!0,innerRef:s,children:[u.map(function(e,n){return e.popover?(0,m.FD)(g.Fragment,{children:[(0,m.FD)(sp.zM,{children:[(0,m.Y)(sE,{onWidth:function(e){return a({index:n,width:e})},hidden:null!==o&&n>=o,isDisabled:!e.popover&&!e.onClick,children:(0,g.cloneElement)(e.item,{presentation:i})}),(0,m.Y)(sm.g_,{placement:n<=c?"top left":"top right",children:e.popover})]}),n===c?(0,m.Y)(z.S,{css:sR.middle}):null]},e.key):(0,m.FD)(g.Fragment,{children:[(0,m.Y)(sE,{onWidth:function(e){return a({index:n,width:e})},onClick:e.onClick,hidden:null!==o&&n>=o,isDisabled:!e.popover&&!e.onClick,children:(0,g.cloneElement)(e.item,{presentation:i})}),n===c?(0,m.Y)(z.S,{css:sR.middle}):null]},e.key+n)}),null===o?null:(0,m.FD)(sp.zM,{children:[(0,m.Y)(sd.$,{css:sR.moreButton,children:(0,m.Y)(sg.A,{size:12})}),(0,m.Y)(sm.g_,{placement:"top right",children:(0,m.Y)(sx,{items:u.slice(o)})})]})]})})}var sF=t(67197),sT=t(63433);function sP(e){var n=e.presentation,t=(0,D.gc)("codeSuggestion").preferences.codeSuggestion,r=s_();return(0,g.useEffect)(function(){r("compact"===n?"AI":null)},[r,n]),(0,m.FD)(m.FK,{children:[(0,m.Y)(rY.A,{size:12,color:t?eD.LU.blurpleDefault:void 0}),"compact"===n?null:(0,m.Y)(z.S,{children:"AI"})]})}var sL=(0,B.x)({root:[H.wp.p(8),H.wp.maxWidth(260)],featureTitle:[H.wp.flex.growAndShrink(1),H.wp.fontWeight.medium]});function sU(){var e=(0,g.useId)(),n=(0,D.gc)("codeSuggestion"),t=n.preferences.codeSuggestion,r=n.update;return(0,m.FD)(z.S,{css:sL.root,children:[(0,m.FD)(z.S,{row:!0,gap:8,align:"center",children:[(0,m.FD)(z.S,{css:sL.featureTitle,row:!0,gap:4,align:"center",children:[(0,m.Y)(sT.A,{color:eD.LU.blurpleDefault}),(0,m.Y)(rp.EY,{children:"AI Autocomplete"})]}),(0,m.FD)(z.S,{row:!0,gap:4,align:"center",children:[(0,m.Y)(z.S,{tag:"label",htmlFor:e,children:(0,m.Y)(rp.EY,{color:"dimmer",variant:"small",children:"Enable"})}),(0,m.Y)(sF.S,{id:e,checked:t,name:"Code Complete",onChange:function(){return r({codeSuggestion:!t})}})]})]}),(0,m.FD)(z.S,{gap:8,children:[(0,m.Y)(rp.EY,{color:"dimmer",variant:"small",children:"Suggest lines of code as you type based on existing context."}),(0,m.FD)(z.S,{row:!0,gap:4,align:"center",children:[(0,m.Y)(rp.EY,{color:"dimmer",variant:"small",children:"Press"}),(0,m.Y)(oz._y,{small:!0,keyCombo:"Tab"}),(0,m.Y)(rp.EY,{color:"dimmer",variant:"small",children:"to accept result"})]})]})]})}var sN=t(51297),sO=function(e){return e[e.Loading=0]="Loading",e[e.Ready=1]="Ready",e[e.Exited=2]="Exited",e[e.Stalled=3]="Stalled",e[e.Partial=4]="Partial",e[e.Missing=5]="Missing",e[e.Disabled=6]="Disabled",e}(sO||{}),sM=(0,y.eU)(new Map),sB=(0,y.eU)(null,function(e,n,t,r){n(sM,function(e){return(0,sf.jM)(e,function(e){var n=e.get(t);n&&e.set(t,(0,p._)((0,d._)({},n),{state:r}))})})}),sH=(0,y.eU)(null,function(e,n,t,r){n(sM,function(e){return(0,sf.jM)(e,function(e){var n=e.get(t);n&&e.set(t,(0,p._)((0,d._)({},n),{health:r}))})})}),sz=(0,y.eU)(null,function(e,n,t,r){n(sM,function(e){return(0,sf.jM)(e,function(e){var i=new Set,o=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)!function(){var t,o=s.value;i.add(o.clientId),null===(t=e.get(o.clientId))||void 0===t||t.dispose(),e.set(o.clientId,{client:o,health:o.getServerHealth(),state:o.getServerState(),restart:function(){return r.restart(o.clientId)},dispose:(0,iy.xW)([o.onServerStateChange(function(e){return n(sB,o.clientId,e)}),o.onServerHealthChange(function(e){return n(sH,o.clientId,e)})])})}()}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}var u=!0,d=!1,p=void 0;try{for(var h,m=e.entries()[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var g=(0,f._)(h.value,2),v=g[0],w=g[1].dispose;i.has(v)||(w(),e.delete(v))}}catch(e){d=!0,p=e}finally{try{u||null==m.return||m.return()}finally{if(d)throw p}}})})});function sW(e){switch(e){case 3:return 4;case 0:return 3;case 1:return 2;case 2:return 1;default:return 0}}function sG(e){return e.health===ii.A.STALLED?3:e.state===ii.b.INITIALIZING||e.state===ii.b.INITIALIZED&&e.health!==ii.A.READY?0:e.health===ii.A.READY?1:e.state===ii.b.EXITED?2:5}function sV(e){return(0,sh.md)(e,{store:function(){var e=(0,g.useContext)(sj);if(!e)throw Error("Expected store in context");return e}()})}var sj=(0,g.createContext)(null);function sZ(e){var n,t,r,i=(n=e.filePath,t=e.lspnix,r=(0,f._)((0,g.useState)(function(){return(0,y.y$)()}),1)[0],(0,g.useEffect)(function(){return t.onClient(n,function(e){return r.set(sz,e,t)})},[n,t,r]),r);return(0,m.Y)(sj.Provider,{value:i,children:e.children})}var sq=t(74863),sK=t(38224);function s$(e){return(0,m.Y)(W.Ay,(0,p._)((0,d._)({},e),{children:(0,m.Y)("path",{fill:eD.LU.foregroundDefault,d:"M8.25 4c-.764 0-1.407.125-1.932.394-.538.276-.905.68-1.143 1.15-.426.842-.425 1.904-.425 2.74v.09c0 .963-.017 1.666-.263 2.153a1.069 1.069 0 0 1-.49.492c-.248.127-.637.229-1.247.229a.75.75 0 0 0 0 1.5c.61 0 .999.101 1.248.229.235.12.383.283.49.492.245.486.262 1.19.262 2.153v.09c0 .835-.001 1.898.425 2.74.238.47.605.874 1.143 1.15.525.268 1.168.393 1.932.393a.75.75 0 0 0 0-1.5c-.61 0-.999-.1-1.248-.228a1.07 1.07 0 0 1-.489-.493c-.246-.486-.263-1.19-.263-2.152v-.09c0-.836.001-1.899-.424-2.74a2.587 2.587 0 0 0-.614-.794c.263-.228.464-.498.614-.794.425-.842.425-1.904.424-2.74v-.09c0-.963.017-1.666.263-2.153.106-.209.254-.371.49-.492C7.25 5.6 7.64 5.5 8.25 5.5a.75.75 0 0 0 0-1.5ZM15.75 4a.75.75 0 0 0 0 1.5c.61 0 1 .101 1.248.229.236.12.384.283.49.492.246.487.263 1.19.263 2.153v.09c-.001.836-.002 1.898.424 2.74.15.296.351.566.614.794a2.586 2.586 0 0 0-.614.794c-.426.841-.425 1.904-.424 2.74v.09c0 .963-.017 1.666-.263 2.152a1.07 1.07 0 0 1-.49.493c-.249.127-.637.229-1.248.229a.75.75 0 1 0 0 1.5c.765 0 1.408-.126 1.932-.394.539-.276.906-.68 1.144-1.15.426-.842.425-1.905.425-2.74v-.09c0-.964.016-1.667.263-2.153a1.07 1.07 0 0 1 .489-.492c.249-.128.637-.23 1.248-.23a.75.75 0 0 0 0-1.5c-.61 0-1-.1-1.248-.228a1.069 1.069 0 0 1-.49-.492c-.246-.487-.262-1.19-.262-2.153v-.09c0-.836.001-1.898-.425-2.74a2.567 2.567 0 0 0-1.144-1.15C17.158 4.125 16.515 4 15.751 4Z"})}))}function sJ(e){return(0,m.FD)(W.Ay,(0,p._)((0,d._)({},e),{children:[(0,m.Y)("path",{fill:eD.LU.foregroundDimmer,fillRule:"evenodd",d:"M6.25 4.5c-.764 0-1.407.117-1.932.37a2.49 2.49 0 0 0-1.143 1.078c-.426.79-.425 1.785-.425 2.57v.084c0 .903-.017 1.562-.263 2.018a1.037 1.037 0 0 1-.49.462c-.248.12-.637.215-1.247.215-.414 0-.75.315-.75.703 0 .388.336.703.75.703.61 0 .999.095 1.248.215.235.113.383.266.49.462.245.456.262 1.115.262 2.018v.085c0 .784-.001 1.78.425 2.57.238.44.605.819 1.143 1.078.525.252 1.168.369 1.932.369.414 0 .75-.315.75-.703 0-.389-.336-.704-.75-.704-.61 0-.999-.095-1.248-.214a1.037 1.037 0 0 1-.489-.462c-.246-.456-.263-1.115-.263-2.019v-.084c0-.784.001-1.78-.424-2.57A2.452 2.452 0 0 0 3.212 12c.263-.214.464-.467.614-.745.425-.789.425-1.785.424-2.569v-.084c0-.904.017-1.563.263-2.02.106-.195.254-.348.49-.46.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.704 0-.388-.336-.703-.75-.703Zm11.5 0c-.415 0-.75.315-.75.703 0 .389.335.704.75.704.61 0 .999.095 1.248.214.235.113.383.266.489.462.246.456.263 1.115.263 2.019v.084c0 .784-.002 1.78.424 2.57.15.277.351.53.614.744a2.452 2.452 0 0 0-.614.745c-.425.789-.425 1.785-.424 2.569v.084c0 .904-.017 1.563-.263 2.02a1.037 1.037 0 0 1-.49.46c-.248.12-.637.215-1.247.215-.415 0-.75.315-.75.704 0 .388.335.703.75.703.764 0 1.407-.117 1.932-.37a2.49 2.49 0 0 0 1.143-1.078c.426-.79.425-1.785.425-2.57v-.084c0-.903.017-1.562.263-2.018.105-.196.254-.349.49-.462.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.703 0-.388-.336-.703-.75-.703-.61 0-.999-.095-1.248-.215a1.036 1.036 0 0 1-.49-.462c-.245-.456-.262-1.115-.262-2.018v-.085c0-.784.001-1.78-.425-2.57a2.49 2.49 0 0 0-1.143-1.078c-.525-.252-1.168-.369-1.932-.369Z",clipRule:"evenodd"}),(0,m.Y)("path",{fill:eD.LU.accentPositiveStronger,d:"M16.09 9.227a.692.692 0 0 1-.047.978l-5.077 4.615a.692.692 0 0 1-.932 0l-2.307-2.098a.692.692 0 0 1 .931-1.024l1.842 1.674 4.611-4.192a.692.692 0 0 1 .978.047Z"})]}))}function sQ(e){return(0,m.FD)(W.Ay,(0,p._)((0,d._)({},e),{children:[(0,m.Y)("path",{fill:"#F66",fillRule:"evenodd",d:"M8.47 8.47a.75.75 0 0 1 1.06 0L12 10.94l2.47-2.47a.75.75 0 1 1 1.06 1.06L13.06 12l2.47 2.47a.75.75 0 1 1-1.06 1.06L12 13.06l-2.47 2.47a.75.75 0 0 1-1.06-1.06L10.94 12 8.47 9.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}),(0,m.Y)("path",{fill:eD.LU.foregroundDimmer,fillRule:"evenodd",d:"M6.25 4.5c-.764 0-1.407.117-1.932.37a2.49 2.49 0 0 0-1.143 1.078c-.426.79-.425 1.785-.425 2.57v.084c0 .903-.017 1.562-.263 2.018a1.037 1.037 0 0 1-.49.462c-.248.12-.637.215-1.247.215-.414 0-.75.315-.75.703 0 .388.336.703.75.703.61 0 .999.095 1.248.215.235.113.383.266.49.462.245.456.262 1.115.262 2.018v.085c0 .784-.001 1.78.425 2.57.238.44.605.819 1.143 1.078.525.252 1.168.369 1.932.369.414 0 .75-.315.75-.703 0-.389-.336-.704-.75-.704-.61 0-.999-.095-1.248-.214a1.037 1.037 0 0 1-.489-.462c-.246-.456-.263-1.115-.263-2.019v-.084c0-.784.001-1.78-.424-2.57A2.452 2.452 0 0 0 3.212 12c.263-.214.464-.467.614-.745.425-.789.425-1.785.424-2.569v-.084c0-.904.017-1.563.263-2.02.106-.195.254-.348.49-.46.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.704 0-.388-.336-.703-.75-.703Zm11.5 0c-.415 0-.75.315-.75.703 0 .389.335.704.75.704.61 0 .999.095 1.248.214.235.113.383.266.489.462.246.456.263 1.115.263 2.019v.084c0 .784-.002 1.78.424 2.57.15.277.351.53.614.744a2.452 2.452 0 0 0-.614.745c-.425.789-.425 1.785-.424 2.569v.084c0 .904-.017 1.563-.263 2.02a1.037 1.037 0 0 1-.49.46c-.248.12-.637.215-1.247.215-.415 0-.75.315-.75.704 0 .388.335.703.75.703.764 0 1.407-.117 1.932-.37a2.49 2.49 0 0 0 1.143-1.078c.426-.79.425-1.785.425-2.57v-.084c0-.903.017-1.562.263-2.018.105-.196.254-.349.49-.462.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.703 0-.388-.336-.703-.75-.703-.61 0-.999-.095-1.248-.215a1.036 1.036 0 0 1-.49-.462c-.245-.456-.262-1.115-.262-2.018v-.085c0-.784.001-1.78-.425-2.57a2.49 2.49 0 0 0-1.143-1.078c-.525-.252-1.168-.369-1.932-.369Z",clipRule:"evenodd"})]}))}function sX(e){return(0,m.FD)(W.Ay,(0,p._)((0,d._)({},e),{children:[(0,m.Y)("path",{fill:eD.LU.yellowStronger,fillRule:"evenodd",d:"M12 7.33c.368 0 .667.298.667.667v2.822l2.323-1.394a.667.667 0 1 1 .686 1.143l-2.38 1.429 2.38 1.428a.667.667 0 1 1-.686 1.143l-2.323-1.394v2.823a.667.667 0 0 1-1.334 0v-2.823L9.01 14.568a.667.667 0 0 1-.686-1.143l2.38-1.428-2.38-1.429a.667.667 0 0 1 .686-1.143l2.323 1.394V7.997c0-.369.299-.667.667-.667Z",clipRule:"evenodd"}),(0,m.Y)("path",{fill:eD.LU.foregroundDimmer,fillRule:"evenodd",d:"M6.25 4.5c-.764 0-1.407.117-1.932.37a2.49 2.49 0 0 0-1.143 1.078c-.426.79-.425 1.785-.425 2.57v.084c0 .903-.017 1.562-.263 2.018a1.037 1.037 0 0 1-.49.462c-.248.12-.637.215-1.247.215-.414 0-.75.315-.75.703 0 .388.336.703.75.703.61 0 .999.095 1.248.215.235.113.383.266.49.462.245.456.262 1.115.262 2.018v.085c0 .784-.001 1.78.425 2.57.238.44.605.819 1.143 1.078.525.252 1.168.369 1.932.369.414 0 .75-.315.75-.703 0-.389-.336-.704-.75-.704-.61 0-.999-.095-1.248-.214a1.037 1.037 0 0 1-.489-.462c-.246-.456-.263-1.115-.263-2.019v-.084c0-.784.001-1.78-.424-2.57A2.452 2.452 0 0 0 3.212 12c.263-.214.464-.467.614-.745.425-.789.425-1.785.424-2.569v-.084c0-.904.017-1.563.263-2.02.106-.195.254-.348.49-.46.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.704 0-.388-.336-.703-.75-.703Zm11.5 0c-.415 0-.75.315-.75.703 0 .389.335.704.75.704.61 0 .999.095 1.248.214.235.113.383.266.489.462.246.456.263 1.115.263 2.019v.084c0 .784-.002 1.78.424 2.57.15.277.351.53.614.744a2.452 2.452 0 0 0-.614.745c-.425.789-.425 1.785-.424 2.569v.084c0 .904-.017 1.563-.263 2.02a1.037 1.037 0 0 1-.49.46c-.248.12-.637.215-1.247.215-.415 0-.75.315-.75.704 0 .388.335.703.75.703.764 0 1.407-.117 1.932-.37a2.49 2.49 0 0 0 1.143-1.078c.426-.79.425-1.785.425-2.57v-.084c0-.903.017-1.562.263-2.018.105-.196.254-.349.49-.462.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.703 0-.388-.336-.703-.75-.703-.61 0-.999-.095-1.248-.215a1.036 1.036 0 0 1-.49-.462c-.245-.456-.262-1.115-.262-2.018v-.085c0-.784.001-1.78-.425-2.57a2.49 2.49 0 0 0-1.143-1.078c-.525-.252-1.168-.369-1.932-.369Z",clipRule:"evenodd"})]}))}function s0(e){var n=e.filePath,t=e.presentation,r=(0,M.fZ)(),i=(0,k.Vn)(r,ed.ql),o=(0,g.useMemo)(function(){var e,t,r,o;return(r=null===(e=n$.Jh.from(n))||void 0===e?void 0:e.name)?r:(r=null==i?void 0:null===(t=i.language)||void 0===t?void 0:t.name)&&r.length>0?(o=r).slice(0,1).toUpperCase()+o.slice(1).toLowerCase():(r=(0,_.an)(n),i)?r:"Plain Text"},[n,i]),a=(0,k.Vn)(r,nK.lu),l=(0,f._)((0,g.useState)(a?{title:a.name,value:a.id}:void 0),2),s=l[0],c=l[1],u=(0,g.useRef)(!1);(0,g.useEffect)(function(){!u.current&&(null==s?void 0:s.value)!==(null==a?void 0:a.id)&&c(a?{title:a.name,value:a.id}:void 0)},[s,a]);var d=s_();(0,g.useEffect)(function(){d("Language support"+("compact"===t?" (".concat(o,")"):""))},[d,t,o]);var p=sV((0,g.useMemo)(function(){return(0,y.eU)(function(e){var n;return null!==(n=Array.from(e(sM).values()).map(function(e){return sG(e)}).sort(function(e,n){return sW(n)-sW(e)})[0])&&void 0!==n?n:5})},[]));return(0,m.FD)(m.FK,{children:[(0,m.Y)(s7,{state:p}),"compact"===t?null:(0,m.Y)(z.S,{children:o})]})}var s1=(0,B.x)({menu:[H.wp.p(8),H.wp.colWithGap(8),H.wp.maxWidth(390),H.wp.minWidth(390)],file:[H.wp.pl(4),H.wp.display.inlineFlex,H.wp.rowWithGap(4),H.wp.align.center,{verticalAlign:"top"}],section:[H.wp.rowWithGap(8),H.wp.align.center,H.wp.justify.spaceBetween],header:[H.wp.colWithGap(2),H.wp.flex.shrink(1)],staticWidth:[H.wp.flex.grow(0),H.wp.flex.shrink(1)],variableWidth:[H.wp.flex.grow(1),H.wp.flex.shrink(0),{flexBasis:0}],flexEnd:[H.wp.align.end],red:[H.wp.color.redDefault],row:[H.wp.rowWithGap(8),H.wp.align.center]});function s2(e){var n=e.filePath,t=e.openSettings,r=(0,M.fZ)(),i=(0,nF.A)().dotReplit,o=(0,k.Vn)(r,nK.lu),a=(0,k.Vn)(r,nK.et),l=(0,f._)((0,g.useState)(o?{title:o.name,value:o.id}:void 0),2),s=l[0],c=l[1],u=(0,g.useRef)(!1),h=(0,g.useMemo)(function(){var e;return null!==(e=null==a?void 0:a.map(function(e){return{title:e.name,value:e.id,icon:void 0}}))&&void 0!==e?e:[]},[a]);return(0,m.FD)(z.S,{css:s1.menu,children:[(0,m.FD)(rp.Y9,{level:1,children:["Language support for ",(0,m.FD)("span",{css:s1.file,children:[(0,m.Y)(rz.A,{path:n,size:16})," ",(0,m.Y)("span",{children:(0,_.WP)(n)})]})]}),(0,m.Y)(sq.a,{}),(0,m.Y)(s4,{openSettings:t}),a&&s?(0,m.FD)(m.FK,{children:[(0,m.Y)(sq.a,{}),(0,m.FD)(z.S,{css:s1.section,children:[(0,m.Y)(z.S,{css:[s1.header,s1.staticWidth],children:(0,m.Y)(rp.EY,{multiline:!1,children:"Code Formatter"})}),1===a.length?(0,m.Y)(z.S,{css:[s1.header,s1.variableWidth,s1.flexEnd],children:(0,m.Y)(rp.EY,{multiline:!1,children:s.title})}):(0,m.Y)(z.S,{row:!0,gap:4,children:(0,m.Y)(sK.l,{placement:"top",items:h,selectedItem:(0,p._)((0,d._)({},s),{icon:u.current?(0,m.Y)(nw.A,{size:12}):void 0}),disabled:u.current,onChange:function(e){e.value!==s.value&&(u.current=!0,c(e),(function(e,n){return s9.apply(this,arguments)})(i,{path:n,formatterId:e.value}).finally(function(){return u.current=!1}))}})})]})]}):null]})}function s4(e){var n=e.openSettings,t=sV((0,g.useMemo)(function(){return(0,y.eU)(function(e){return Array.from(e(sM).values()).map(function(e){return{clientId:e.client.clientId,clientName:e.client.clientName,restart:function(){return e.restart()}}})})},[]));return(0,m.FD)(m.FK,{children:[t.map(function(e){return(0,m.Y)(z.S,{css:s1.section,children:(0,m.Y)(s8,{languageServerId:e.clientId,name:e.clientName,restart:function(){return e.restart()},openSettings:n})},e.clientId)}),0===t.length?(0,m.Y)(z.S,{css:s1.section,children:(0,m.Y)(s3,{openSettings:n})}):null]})}function s5(e){var n=(0,m.Y)("a",{tabIndex:0,role:"button",onClick:e.restart,onKeyDown:function(n){"Enter"===n.key&&e.restart()},children:"Restart"});switch(e.state){case 0:return(0,m.Y)(rp.EY,{multiline:!1,color:"dimmer",children:"Loading"});case 1:return(0,m.Y)(rp.EY,{multiline:!1,color:"dimmer",children:"Active"});case 3:return(0,m.FD)(z.S,{css:s1.row,children:[(0,m.Y)(rp.EY,{css:s1.red,multiline:!1,children:"Stalled"})," ",n]});case 2:return(0,m.FD)(z.S,{css:s1.row,children:[(0,m.Y)(rp.EY,{css:s1.red,multiline:!1,children:"Stopped"})," ",n]});default:return null}}function s8(e){var n,t=sV((n=e.languageServerId,(0,g.useMemo)(function(){return(0,y.eU)(function(e){var t=e(sM).get(n);return t?sG(t):5})},[n])));switch(t){case 0:case 1:case 2:case 3:return(0,m.FD)(m.FK,{children:[(0,m.Y)(z.S,{css:[s1.header,s1.variableWidth],children:(0,m.Y)(rp.EY,{multiline:!1,children:e.name})}),(0,m.Y)(z.S,{css:[s1.header,s1.staticWidth],children:(0,m.Y)(s5,{restart:e.restart,state:t})})]});default:return null}}function s3(e){return(0,D.gc)("codeIntelligence").preferences.codeIntelligence?(0,m.Y)(z.S,{css:s1.header,children:(0,m.Y)(rp.EY,{color:"dimmer",children:"Limited language support because the language server is not available."})}):(0,m.Y)(z.S,{css:s1.header,children:(0,m.FD)(rp.EY,{multiline:!0,color:"dimmer",children:["Code intelligence is disabled. Enable it in settings.",(0,m.Y)("br",{}),(0,m.Y)("a",{tabIndex:0,role:"button",onClick:e.openSettings,onKeyDown:function(n){"Enter"===n.key&&e.openSettings()},children:"Open settings"})]})})}var s6=function(e){return e[e.Loading=0]="Loading",e[e.Ready=1]="Ready",e[e.Exited=2]="Exited",e[e.Stalled=3]="Stalled",e[e.Partial=4]="Partial",e[e.Missing=5]="Missing",e[e.Disabled=6]="Disabled",e}(s6||{});function s7(e){switch(e.state){case 3:case 6:case 4:return(0,m.Y)(sX,{size:16});case 0:return(0,m.Y)(nw.A,{size:16,color:eD.LU.blueStronger});case 1:return(0,m.Y)(z.S,{dataCy:"ws-code-intelligence-active",children:(0,m.Y)(sJ,{size:16})});case 2:return(0,m.Y)(sQ,{size:16});case 5:return(0,m.Y)(s$,{size:16})}}function s9(){return(s9=(0,ei._)(function(e,n){var t,r;return(0,ea.YH)(this,function(i){return(t=".".concat((0,sN.QC)(n.path)),r="rules/formatter/fileExtensions/".concat(t,"/id"),n.formatterId)?[2,e.updateDotReplit([{path:"rules/formatter/fileExtensions",op:"add",value:JSON.stringify((0,tl._)({},"".concat(t),{id:n.formatterId}))}])]:[2,e.updateDotReplit([{path:r,op:"remove"}])]})})).apply(this,arguments)}var ce=t(69671);function cn(e){var n,t=e.presentation,r=(0,aj.A)((n=(0,ei._)(function(e){var n,t,r,i;return(0,ea.YH)(this,function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:if((n=o.sent()).error)return[2,n];if(t=n.type,r=null,t===aV.UN.INITIALIZING)return[3,3];return[4,e.status()];case 2:if((i=o.sent()).error)return[2,i];r=i,o.label=3;case 3:return[2,{branchName:null==r?void 0:r.branch,error:null}]}})}),function(e){return n.apply(this,arguments)})),i=!r||r.error?null:r.branchName,o=s_();return(0,g.useEffect)(function(){o("compact"===t&&i?i:null)},[o,t,i]),i?(0,m.FD)(m.FK,{children:[(0,m.Y)(ce.A,{color:eD.LU.foregroundDimmer,size:12}),"compact"===t?null:(0,m.Y)(z.S,{children:i})]}):null}function ct(e){if(e.facet(i_.u))return"";var n=e.selection,t="",r=0;if(n.ranges.length>1){r=n.ranges.reduce(function(e,n){return e+(n.to-n.from)},0);var i=n.ranges.length;t="".concat(i," selections")}else{var o=n.ranges[0],a=e.doc.lineAt(o.head),l=o.head-a.from;r=o.to-o.from,t="Ln ".concat(a.number,", Col ").concat(l+1)}return r>0&&(t+=" (".concat(r," chars)")),t}function cr(e){var n=e.view,t=(0,g.useRef)(null);return(0,g.useEffect)(function(){var e,r=t.current,i=null!==(e=n.plugin(k.Pb))&&void 0!==e?e:null;if(r&&i&&!i.destroyed){var o=null,a=n.state;r.textContent=ct(a);var l=i.bind({changed:function(e){return(0,eu.$H)(e,"selection",i_.u)},callback:function(e){a=e.state,null===o&&(o=requestAnimationFrame(function(){o=null,r.textContent=a?ct(a):""}))}});return function(){l(),null!==o&&cancelAnimationFrame(o),r.textContent=""}}},[n]),(0,m.Y)("span",{ref:t,"data-cy":"current-position"})}var ci=t(35809);function co(e){var n=e.presentation,t=s_();return(0,g.useEffect)(function(){t("compact"===n?"History":null)},[t,n]),(0,m.FD)(m.FK,{children:["compact"===n?null:(0,m.Y)(z.S,{children:"History"}),(0,m.Y)(ci.A,{size:12})]})}var ca=t(72233),cl=t(40261);function cs(e,n,t){var r=[],i=0,o=!0,a=!1,l=void 0;try{for(var s,c=e.iterLines()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value,d=i;if(i=i+u.length+1,0!==u.length){var p=(0,cl.t)(u,n),f=u.trimStart(),h=d+(u.length-f.length);if(0!==p&&d!==h){var m="";if(t===ca.c.TABS){var g=Math.floor(p/n),v=p%n;m="	".repeat(g)+" ".repeat(v)}else t===ca.c.SPACES&&(m=" ".repeat(p));m+f!==u&&r.push({from:d,to:h,insert:m})}}}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return er.VR.of(r,e.length)}var cc=t(74116),cu=t(90017),cd=t(3910),cp=t(59086),cf=t(31412),ch=t(67552),cm=(0,B.x)({menu:[H.wp.p(8),H.wp.colWithGap(8),H.wp.maxWidth(410)],file:[H.wp.pl(4),H.wp.display.inlineFlex,H.wp.rowWithGap(4),H.wp.align.center,{verticalAlign:"top"}],section:[H.wp.rowWithGap(8),H.wp.align.center,H.wp.justify.spaceBetween],header:[H.wp.colWithGap(2),H.wp.flex.shrink(1)],sizeInput:{border:"none"}});function cg(e){var n,t=e.filePath,r=e.openSettings,i=(0,D.gc)("indentDetection","indentSize").preferences,o=(0,M.fZ)(),a=(0,k.Vn)(o,i_.u),l=null!==a&&!!i.indentDetection&&a,s=(0,k.Vn)(o,cc._t),c=(0,k.Vn)(o,cc.WD),u=(0,k.Vn)(o,cc.xu),d=null!==(n=(0,k.Vn)(o,er.$t.tabSize))&&void 0!==n?n:i.indentSize,p="	"===(0,k.Vn)(o,b.Xt)?ca.c.TABS:ca.c.SPACES,v=(0,f._)((0,g.useState)(!1),2),w=v[0],y=v[1],S=(0,f._)((0,g.useState)(p),2),Y=S[0],A=S[1],C=(0,f._)((0,g.useState)(d),2),x=C[0],E=C[1],R=(0,f._)((0,g.useState)(!1),2),I=R[0],F=R[1],T=(0,f._)((0,g.useState)(!1),2),P=T[0],L=T[1],U=(0,f._)((0,g.useState)(!1),2),N=U[0],O=U[1],B=(0,f._)((0,g.useState)(!1),2),H=B[0],W=B[1];(0,g.useEffect)(function(){I||(A(p),E(d))},[p,d,I]),(0,g.useEffect)(function(){w||(A(p),E(d),F(!1))},[w,p,d]),(0,g.useEffect)(function(){Y===p&&x===d&&F(!1)},[Y,x,p,d]),(0,g.useEffect)(function(){if(P||N||H){var e=setTimeout(function(){L(!1),O(!1),W(!1)},1e3);return function(){return clearTimeout(e)}}},[P,N,H]),l&&w&&y(!1);var G=(0,g.useCallback)(function(){if(o){var e=cs(o.state.doc,d,p);o.dispatch({changes:e,effects:cc.mh.of(!0)}),O(!0)}},[o,p,d]),V=(0,g.useCallback)(function(){o&&(o.dispatch({effects:cc.mh.of(!0)}),o.state.field(cc.WD)&&o.dispatch({effects:cc.SF.of({type:void 0,size:void 0})}),W(!0))},[o]),j=(0,g.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(o){var n=void 0,t=[cc.SF.of({type:Y,size:x})];if(e){if(Y!==p&&(n=cs(o.state.doc,d,Y)),Y===ca.c.SPACES&&x!==d){var r=function(e,n,t,r){if(n===ca.c.TABS)return er.VR.empty(e.length);var i=" ".repeat(r),o=[],a=0,l=!0,s=!1,c=void 0;try{for(var u,d=e.iterLines()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value,f=a;if(a=a+p.length+1,0!==p.length){var h=(0,cl.t)(p,t),m=p.trimStart(),g=f+(p.length-m.length);if(0!==h&&f!==g){var v=Math.floor(h/t),w=h%t,y=i.repeat(v)+" ".repeat(w);y+m!==p&&o.push({from:f,to:g,insert:y})}}}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}return er.VR.of(o,e.length)}(n?n.apply(o.state.doc):o.state.doc,Y,d,x);n=n?n.compose(r):r}n&&t.push(cc.mh.of(!0))}o.dispatch({changes:n,effects:t}),F(!1),L(!0)}},[o,p,d,Y,x]),Z=(0,g.useCallback)(function(){y(!1),r()},[r]),q=(0,g.useMemo)(function(){if(c){var e=c.size,n=c.type===ca.c.SPACES?"spaces":"tabs";return"This file appears to use a unit of ".concat(e," ").concat(n,".")}return u?"Indentation detection hasn't been run on this file yet.":"This file is too small for indentation detection."},[c,u]);return(0,m.FD)(z.S,{css:cm.menu,children:[(0,m.FD)(rp.Y9,{level:1,children:["Indentation for",(0,m.FD)("span",{css:cm.file,children:[(0,m.Y)(rz.A,{path:t,size:16})," ",(0,m.Y)("span",{children:(0,_.WP)(t)})]})]}),s?(0,m.Y)(cd.N,{colorway:"warning",icon:(0,m.Y)(oG.A,{}),text:"This file type requires that ".concat(s===ca.c.SPACES?"spaces":"tabs"," be used for indentation.")}):null,(0,m.Y)(sq.a,{}),(0,m.FD)(z.S,{css:cm.section,children:[(0,m.FD)(z.S,{css:cm.header,children:[(0,m.Y)(rp.EY,{multiline:!1,children:"Indentation unit"}),(0,m.Y)(rp.EY,{variant:"small",color:"dimmer",children:"The size and character to use when indenting lines."})]}),(0,m.FD)(z.S,{row:!0,gap:4,children:[(0,m.Y)(cu.fq,{css:cm.sizeInput,size:x,onChange:function(e){e!==x&&(E(e),F(!0))}}),(0,m.Y)(sK.l,{items:(0,h._)(cu.pi),selectedItem:cu.pi.find(function(e){return e.value===(Y===ca.c.SPACES?"spaces":"tabs")}),onChange:function(e){var n=(null==e?void 0:e.value)==="spaces"?ca.c.SPACES:ca.c.TABS;n!==Y&&(A(n),F(!0))}})]})]}),(0,m.Y)(sq.a,{}),i.indentDetection?(0,m.FD)(m.FK,{children:[(0,m.FD)(z.S,{css:cm.section,children:[(0,m.FD)(z.S,{css:cm.header,children:[(0,m.Y)(rp.EY,{multiline:!1,children:"Detected indentation unit"}),(0,m.Y)(rp.EY,{variant:"small",color:"dimmer",children:q})]}),H?(0,m.Y)(oP.$n,{colorway:"positive",text:"Detected!",iconLeft:(0,m.Y)(l$.A,{}),onClick:V}):(0,m.Y)(oP.$n,{text:c?"Re-detect":"Detect",iconLeft:(0,m.Y)(cp.A,{}),disabled:!u&&!c,onClick:V})]}),(0,m.Y)(sq.a,{})]}):null,(0,m.FD)(z.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,m.Y)(oP.$n,{text:"Global settings",iconLeft:(0,m.Y)(cf.A,{}),onClick:Z}),(0,m.Y)(z.S,{row:!0,gap:4,children:P||N?(0,m.Y)(m.FK,{children:P?(0,m.Y)(oP.$n,{text:"Saved!",colorway:"positive",iconLeft:(0,m.Y)(l$.A,{}),onClick:function(){return j(!1)}}):(0,m.Y)(oP.$n,{text:"Re-indented!",colorway:"positive",iconLeft:(0,m.Y)(l$.A,{}),onClick:G})}):(0,m.Y)(m.FK,{children:I?(0,m.FD)(m.FK,{children:[(0,m.Y)(oP.$n,{text:"Save and re-indent",colorway:"primary",iconLeft:(0,m.Y)(ch.A,{}),onClick:function(){return j(!0)}}),(0,m.Y)(oP.$n,{text:"Save",iconLeft:(0,m.Y)(l$.A,{}),onClick:function(){return j(!1)}})]}):(0,m.Y)(oP.$n,{text:"Re-indent file",iconLeft:(0,m.Y)(ch.A,{}),onClick:G})})})]})]})}function cv(e){var n,t=e.presentation,r=(0,D.gc)("indentDetection","indentSize").preferences,i=(0,M.fZ)(),o=(0,k.Vn)(i,i_.u),a=null!==o&&!!r.indentDetection&&o,l=null!==(n=(0,k.Vn)(i,er.$t.tabSize))&&void 0!==n?n:r.indentSize,s="	"===(0,k.Vn)(i,b.Xt)?ca.c.TABS:ca.c.SPACES,c=s_();return(0,g.useEffect)(function(){c("File Indentation")},[c]),(0,m.FD)(m.FK,{children:[(0,m.Y)(cy,{type:s,loading:a}),"compact"===t?null:(0,m.Y)(cb,{type:s,size:l,loading:a})]})}function cw(e){var n=e.size,t=void 0===n?16:n,r=(0,et._)(e,["size"]);return(0,m.Y)(W.Ay,(0,p._)((0,d._)({size:t},r),{children:(0,m.Y)("circle",{cx:t,cy:t,r:t/2,fillRule:"evenodd"})}))}function cy(e){var n=e.type;return e.loading?(0,m.Y)(nw.A,{size:12}):n===ca.c.SPACES?(0,m.Y)(cw,{color:eD.LU.foregroundDimmer,size:12}):(0,m.Y)(ch.A,{color:eD.LU.foregroundDimmer,size:12})}function cb(e){var n=e.type,t=e.size;if(e.loading)return(0,m.Y)(rp.EY,{variant:"small",color:"dimmest",children:"Detecting..."});var r=n===ca.c.SPACES?"Spaces":"Tabs";return(0,m.FD)(rp.EY,{variant:"small",color:"dimmer",children:[r,": ",t]})}var cS=t(94713),cY=t(1566),cA=t(33977),cC=(0,B.x)({group:[H.wp.align.center,H.wp.rowWithGap(4)]});function cx(e){var n,t,r,i,o,a,l,s,c,u=e.filePath,d=e.presentation,p=(n=u,r=(t=(0,f._)((0,g.useState)(null),2))[0],i=t[1],o=(0,n1.A)(n),a=(0,cA.t3)(),l=(0,cY.gB)(),(0,g.useEffect)(function(){var e=function(e){var t,r=a().find(function(e){var n=(0,f._)(e,2);return"problems"===(n[0],n[1]).type});if(r){var i=l(r[0]);i&&"problems"===i.type&&(null===(t=i.updateProblems)||void 0===t||t.call(i,n,e))}},t=function(t){if(t.path===n){var r=[],a=!0,l=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;d.isOpen(n)&&r.push.apply(r,(0,h._)(d.getDiagnostics(t.path)))}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}i(r),e(r)}},r=[],s=!0,c=!1,u=void 0;try{for(var d,p=o[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var m=d.value;m.isOpen(n)&&r.push.apply(r,(0,h._)(m.getDiagnostics(n)))}}catch(e){c=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw u}}i(r),e(r);var g=[],v=!0,w=!1,y=void 0;try{for(var b,S=o[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var Y=b.value;g.push(Y.onDiagnostics(function(e){return t(e)}))}}catch(e){w=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw y}}return function(){g.forEach(function(e){return e()}),a().some(function(e){var t=(0,f._)(e,2),r=(t[0],t[1]);return"codeEditor"===r.type&&r.data.path===n})||e([])}},[o,n,a,l]),r),v=(0,g.useMemo)(function(){var e,n;return p?(n=(e=p).reduce(function(e,n){return void 0===n.severity||(e[n.severity]=(e[n.severity]||0)+1),e},{}),e.length>0&&0===Object.keys(n).length&&(n[ek.DiagnosticSeverity.Error]=e.length),n):null},[p]),w=v&&null!==(s=v[ek.DiagnosticSeverity.Error])&&void 0!==s?s:0,y=v&&null!==(c=v[ek.DiagnosticSeverity.Warning])&&void 0!==c?c:0,b=null===v,S=s_();return((0,g.useEffect)(function(){if(b){S(null);return}var e="";0===w&&0===y&&(e="No problems"),w>0&&(e+="".concat((0,rP.A)("Error",w),": ").concat(w)),y>0&&(e.length>0&&(e+=", "),e+="".concat((0,rP.A)("Warning",y),": ").concat(y)),S(e)},[S,d,b,y,w]),v)?(0,m.FD)(z.S,{align:"center",row:!0,gap:8,children:[(0,m.FD)(z.S,{css:cC.group,children:[(0,m.Y)(cS.A,{severity:ek.DiagnosticSeverity.Error,size:12}),"compact"===d?null:(0,m.Y)(rp.EY,{color:"dimmer",variant:"small",multiline:!1,children:String(w)})]}),(0,m.FD)(z.S,{css:cC.group,children:[(0,m.Y)(cS.A,{severity:ek.DiagnosticSeverity.Warning,size:12}),"compact"===d?null:(0,m.Y)(rp.EY,{color:"dimmer",variant:"small",multiline:!1,children:String(y)})]})]}):null}var ck=t(4505);function c_(e){var n=e.presentation,t=e.toggled?"Diffing":"Diff",r=s_();return(0,g.useEffect)(function(){r("compact"===n?t:null)},[r,n,t]),(0,m.FD)(m.FK,{children:[(0,m.Y)(ck.A,{color:eD.LU.foregroundDimmer,size:12}),"compact"===n?null:(0,m.Y)(z.S,{children:t})]})}var cD=t(14854);function cE(e){return(0,m.Y)(cD.A,(0,p._)((0,d._)({},e),{children:(0,m.Y)("path",{fill:"#009118",fillRule:"evenodd",d:"m15.09 2-.29.29v1.066l.254.255h1.342v1.03L7.52 13.65V3.624h1.475l.303-.304V2.242l-.28-.217H1.255L1 2.28v1.102l.258.258h1.35v18.465l.255.254h1.534l6.467-6.682a.512.512 0 0 1 .006-.016l.335-.939a.49.49 0 0 1 .142-.207l.32-.275a.49.49 0 0 1 .32-.118h.383L23 3.138V2.29L22.71 2h-7.62Zm-3.273 12.693-.183.157-.01.008-.004.012-.014.041-.331.928.25.25h1.083l.274-.276.301-1.035-.215-.215h-1l-.15.13Zm-1.871 2.714-.12.48h.774l-1.66 4.745h2.288l.133-.43h-.65l1.642-4.795H9.946Zm7.498.017-.514.583h-.885l-.546-.566h-1.826l-.149.445h.617l-1.592 4.695h1.914l.129-.38h-.46l1.065-3.355h2.039l-1.164 3.735h1.847l.143-.344h-.457l1.082-3.408h1.953l-1.181 3.752h2.034l.145-.38h-.528l1.31-4.257-.373-.503h-1.473l-.497.547h-.936l-.514-.564h-1.183Z",clipRule:"evenodd"})}))}var cR=(0,B.x)({text:[{textTransform:"capitalize"}]});function cI(e){var n=e.presentation,r=(0,f._)((0,g.useState)(null),2),i=r[0],o=r[1],a=(0,g.useRef)(null),l=(0,g.useRef)(null),s=s_(),c=(0,M.fZ)(),u=(0,D.gc)("keyboardHandler").preferences,d=(null==u?void 0:u.keyboardHandler)==="vim",p=(0,g.useCallback)(function(e){var t=null!=e?e:"";if(c&&i&&void 0===e){var r,o,u=i.getCM(c);t=null!==(o=null==u?void 0:null===(r=u.state.vim)||void 0===r?void 0:r.mode)&&void 0!==o?o:"normal"}s("compact"===n?t:null),l.current=t,a.current&&a.current.innerText!==t&&(a.current.innerText=t||"")},[c,i,s,n]);return(0,g.useEffect)(function(){d&&!i&&t.e(3748).then(t.bind(t,77476)).then(function(e){o(e),p()})},[d,i,p]),(0,g.useEffect)(function(){if(c&&d&&i){var e,n=a.current,t=null!==(e=c.plugin(k.Pb))&&void 0!==e?e:null;if(n&&t&&!t.destroyed)return t.bind({changed:function(){var e,n,t=i.getCM(c),r=null!==(n=null==t?void 0:null===(e=t.state.vim)||void 0===e?void 0:e.mode)&&void 0!==n?n:"";return l.current!==r},callback:function(){p()}})}},[c,d,i,p]),d?(0,m.FD)(m.FK,{children:[(0,m.Y)(cE,{size:12}),"compact"===n?null:(0,m.Y)("span",{css:cR.text,ref:a})]}):null}var cF=(0,B.x)({root:[{borderTop:"1px solid ".concat(eD.LU.backgroundHigher)},{height:"29px",contain:"strict"}]}),cT=(0,g.memo)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,v,w,y,b,S,Y,A,C,x,_=e.filePath,D=e.performPaneOperation,E=(0,g.useCallback)(function(e){return D({operation:"open",pane:e,secondary:!0})},[D]),R=(0,g.useCallback)(function(){return E({type:"preferences"})},[E]),I=(n=(0,ss.Ay)(),(0,ss.mS)(n)?{item:(0,m.Y)(sP,{}),popover:(0,m.Y)(sU,{}),key:"ai"}:null),F=(r=(t={filePath:_,openSettings:R}).filePath,i=t.openSettings,{item:(0,m.Y)(s0,{filePath:r,openSettings:i}),popover:(0,m.Y)(s2,{openSettings:i,filePath:r}),key:"codeIntelligence"}),T=(o=(0,tO._P)({controlName:"flag-lsp-diagnostics-in-footer",logFlagToAnalytics:!1}),a=(0,M.fZ)(),o?{item:(0,m.Y)(cx,{filePath:_}),onClick:a?function(){return(0,tH.Q)(a)}:void 0,key:"lspDiagnostics"}:null),P=(0,tO._P)({controlName:"flag-status-bar-branch",logFlagToAnalytics:!1})?{item:(0,m.Y)(cn,{}),onClick:function(){return E({type:"git"})},key:"currentBranch"}:null,L=(l=(0,tO._P)({controlName:"flag-editor-git-inline-diff",logFlagToAnalytics:!1}),f=(s=(0,M.fZ)(),c=(0,k.Vn)(s,tU),u=!s||!c||null===c.head,d=(null==c?void 0:c.mode)===tT.INLINE_DIFF,p={toggle:(0,g.useCallback)(function(){if(!s)return null;s.dispatch({effects:tL.of(d?tT.GUTTER_DIFF:tT.INLINE_DIFF)})},[s,d]),toggled:d,disabled:u}).toggle,h=p.toggled,v=p.disabled,l&&!v?{item:(0,m.Y)(c_,{toggled:h}),onClick:f,key:"toggleDiff"}:null),U={item:(0,m.Y)(cI,{}),key:"vimMode"},N=(w=(0,M.fZ)())?{item:(0,m.Y)(cr,{view:w}),onClick:function(){return(0,ab.cB)(w)},key:"currentPosition"}:null,O=(b=(y={filePath:_,performPaneOperation:D}).filePath,S=y.performPaneOperation,Y=(0,g.useCallback)(function(){S({operation:"replace",pane:{type:"history",data:{path:b}}})},[S,b]),{item:(0,m.Y)(co,{}),key:"history",onClick:Y}),B=(C=(A={filePath:_,openSettings:R}).filePath,x=A.openSettings,{item:(0,m.Y)(cv,{}),popover:(0,m.Y)(cg,{filePath:C,openSettings:x}),key:"indentation"});return(0,m.Y)(sI,{css:cF.root,left:[I,F,T,P,L,U],right:[N,B,O]})});function cP(e){var n=(0,nF.A)().lspnix;return(0,m.Y)(sZ,{filePath:e.filePath,lspnix:n,children:(0,m.Y)(cT,(0,d._)({},e))})}var cL=t(21389),cU=(0,B.x)({root:[H.wp.position.relative,H.wp.flex.column,H.wp.overflowY("hidden"),H.wp.width("100%"),H.wp.height("100%")]});function cN(e){var n,t,r,i,o=(0,g.useRef)(null),a=(n=(0,en.Jw)(X.C.id,X.j.Editor),t=(0,en.Jw)(ee.IW.id,ee.Gp.ViewFile),r=(0,en.Jw)(ee._t.id,ee.ij.ViewCSSFile),i=(0,en.Jw)(ee._t.id,ee.ij.ViewTSFile),(0,Q.P)(n,t,r,i)),l=(0,N.A)(),s=(0,F.jt)(),c=(0,cL.hT)(),u=s&&(c===I.g32.AGENT_STATE_RUNNING||c===I.g32.AGENT_STATE_PAUSING);return(0,m.FD)(z.S,{innerRef:(0,Q.P)(a,o,{breadcrumb:"client/workspace/components/CodeEditorWrapper.tsx:64"}),css:cU.root,children:[(0,m.Y)(ny,{performPaneOperation:e.performPaneOperation,path:e.filePath,isReadOnly:e.isReadOnly}),(0,m.Y)("div",{css:lo.jy,children:(0,m.Y)(sl,{filePath:e.filePath,hideMobileKeyboardToolbar:e.hideMobileKeyboardToolbar,isHidden:e.isHidden,isReadOnly:u,isReadOnlyWhileAgentWorking:u,deeplink:e.deeplink,onDeeplinkUpdated:e.onDeeplinkUpdated,performPaneOperation:e.performPaneOperation})}),(0,m.Y)("div",{style:{display:l?"none":"block"},children:(0,m.Y)(cP,{filePath:e.filePath,performPaneOperation:e.performPaneOperation})}),e.hideMobileKeyboardToolbar?null:(0,m.Y)(J,{filePath:e.filePath,isLoading:!1})]})}var cO=t(23718),cM=(0,B.x)({root:[H.wp.coverContainer,H.wp.center,H.wp.p(16)]});function cB(e){var n=e.message;return(0,m.Y)(z.S,{css:cM.root,children:(0,m.Y)(z.S,{children:(0,m.Y)(cd.N,{icon:(0,m.Y)(oG.A,{}),colorway:"orange",text:n})})})}var cH=t(41594),cz=t(51895);function cW(e){return(0,m.Y)(W.Ay,(0,p._)((0,d._)({},e),{children:(0,m.Y)("path",{fillRule:"evenodd",d:"M20.75 12a.75.75 0 0 0-.75-.75H4a.75.75 0 0 0 0 1.5h16a.75.75 0 0 0 .75-.75Zm-6-6a.75.75 0 0 0-.75-.75H4a.75.75 0 0 0 0 1.5h10a.75.75 0 0 0 .75-.75Zm-4 12a.75.75 0 0 0-.75-.75H4a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 .75-.75Z",clipRule:"evenodd"})}))}var cG=t(46030),cV=v.ZU.Object({type:v.ZU.Literal("codeEditor"),data:v.ZU.Object({path:v.ZU.Union([v.ZU.String({minLength:1}),v.ZU.Null()]),line:v.ZU.Optional(v.ZU.Number()),col:v.ZU.Optional(v.ZU.Number())})}),cj={Content:function(e){var n=e.pane,t=e.options;return(0,m.Y)(cq,(0,p._)((0,d._)({},n.data),{isActive:t.isActive,isHidden:t.isHidden,performPaneOperation:t.performPaneOperation}))},Icon:function(e){var n=e.pane,t=e.size;return(0,m.Y)(rz.A,{path:n.data.path||"",size:t})},getTitle:function(e){return e.data.path?(0,_.WP)(e.data.path):"No file open"},category:cz.bY.WorkspaceFeatures,decode:function(e){return w.WT.Decode(cV,e)}};function cZ(e){var n,t,r,i,o,a,l,s,c,u=e.path,d=e.performPaneOperation,p=(0,M.fZ)(),f=(0,E.A)(function(){return p?{match:cO.G2,data:{type:"action",label:"Toggle all folds",icon:(0,m.Y)(nl.A,{}),run:function(){0===(0,b.hw)(p.state).size?(0,b.hY)(p):(0,b._I)(p)}}}:null},[p]),v=(0,k.Vn)(p,Y.T);(0,g.useEffect)(function(){v&&d({operation:"commit"})},[v,d]);var w=(0,nf.KA)({path:u,performPaneOperation:d}),y=(n=(0,M.fZ)(),t=(0,k.Vn)(n,A.hb),(0,E.A)(function(){if(n&&t)return{match:cO.G2,data:{label:"Format "+(0,_.WP)(u),icon:(0,m.Y)(nv.A,{}),type:"action",run:function(){(0,A.BD)(n)}}}},[t,u,n])),I=(r=(0,R.m5)(),o=(i=(0,D.gc)("minimapDisplay")).preferences.minimapDisplay,a=i.update,(0,E.A)(function(){return r?null:{match:cO.G2,data:{label:"Minimap",icon:(0,m.Y)(cW,{}),type:"context"},commands:function(e){var n=e.active,t=e.searchQuery;return n||t?[{value:"none",label:"Hide",icon:(0,m.Y)(oN.A,{})},{value:"characters",label:"Characters",icon:(0,m.Y)(eN.A,{})},{value:"blocks",label:"Blocks",icon:(0,m.Y)(eU.A,{})}].filter(function(e){return e.value!==o}).map(function(e){return{match:cO.G2,data:{type:"action",label:e.label,icon:e.icon,run:function(){a({minimapDisplay:e.value})}}}}):[]}}},[a,o,r])),F=(l=function(){return d({operation:"replace",pane:{type:"history",data:{path:u}}})},(0,E.A)(function(){return{match:cO.G2,data:{label:"History",icon:(0,m.Y)(ci.A,{}),type:"action",run:function(){l()}}}},[l])),T=(s=(0,nm.vO)(),(0,E.A)(function(){var e=void 0;if((0,_.e$)(u)&&(e={type:"markdown",data:{path:u}}),(0,_.Z7)(u)&&(e={type:"media",data:{path:u}}),(0,_.Zy)(u)&&(e={type:"csvPreview",data:{path:u}}),e)return{match:cO.G2,data:{label:"Preview",icon:(0,m.Y)(ng.A,{}),type:"action",run:function(){if(e){if("csvPreview"===e.type){var n;e.data.line=null===(n=s())||void 0===n?void 0:n.position.line}d({operation:"replace",pane:e})}}}}},[s,u,d])),P=(c=(0,cA.JZ)(),{match:cO.G2,data:{label:"Reveal in file tree",icon:(0,m.Y)(cG.A,{}),type:"action",run:function(){c(u)}}});return(0,cY.Qt)(function(){if(p){var e=[],n=[],t=[];return y&&e.push(y),T&&n.push(T),I&&n.push(I),f&&n.push(f),t.push(P),t.push(F),w&&e.push.apply(e,(0,h._)(w)),{type:"codeEditor",commands:[{name:"File Operations",commands:e},{name:"View",commands:n},{name:"Navigation",commands:t}].filter(function(e){return e.commands.length>0}),getEditorView:function(){return p},getCurrentSelectionText:function(){if(!p.state.selection.main.empty)return p.state.sliceDoc(p.state.selection.main.from,p.state.selection.main.to)},insertGhostwriterChatCode:function(e,n){(0,C.fJ)({view:p,insert:e,overwrite:n})},revertGhostwriterChatCode:function(){(0,C.sz)(p)},fetchProblems:function(){return(0,S.H_)(p),(0,x.VS)(p.state)}}}},[p,y,T,F,I,f,P,w]),(0,cY.HP)(function(){return p},[p]),null}function cq(e){var n,t,r,i,o,a,l,s,c=e.path,u=e.line,d=e.col,p=e.isActive,h=e.isHidden,v=e.performPaneOperation,w=(0,f._)((0,g.useState)(!h),2),b=w[0],S=w[1];b||h||S(!0);var Y=(0,f._)((0,g.useState)(function(){return(0,y.y$)()}),1)[0],A=(0,f._)((0,g.useState)(function(){return(0,y.y$)()}),1)[0],C=(t=(n={path:c,replaceEditorPath:(0,g.useCallback)(function(e){v({operation:"replace",pane:{type:"codeEditor",data:{path:e}}})},[v]),getFileRenameInProgress:(0,nm.u6)()}).path,r=n.replaceEditorPath,i=n.getFileRenameInProgress,o=(0,nF.A)().fs,l=(a=(0,f._)((0,g.useState)(null),2))[0],s=a[1],(0,g.useEffect)(function(){if(t){if(t.startsWith("/"))return s('Cannot open "'.concat(t,'"')),function(){s(null)};var e=o.watchPathStat(t,{onNewStat:function(e){var n=i();if(!e.exists){if((null==n?void 0:n.from)===t){r(n.to);return}s('No file found at "'.concat(t,'", it may have been deleted'));return}if(e.type===or.pt.Directory){s('"'.concat(t,'" is a directory'));return}s(null)},onError:function(){s('Unknown error occured while read "'.concat(t,'", try re-opening the editor'))}});return function(){e(),s(null)}}},[i,o,t,r]),l),x=(0,E.A)(function(){return{line:u,col:d}},[u,d]),k=(0,E.A)(function(){return function(){v({operation:"replace",pane:{type:"codeEditor",data:{path:c}}})}},[v,c]);return c?C?(0,m.Y)(cB,{message:C}):h&&!b?null:(0,m.Y)(M.dz.Provider,{value:Y,children:(0,m.FD)(cH.GK.Provider,{value:A,children:[(0,m.Y)(cN,{filePath:c,isHidden:null!=h&&h,deeplink:x,onDeeplinkUpdated:k,hideMobileKeyboardToolbar:!0,performPaneOperation:v},c),(0,m.Y)(cZ,{path:c,isActive:p,performPaneOperation:v})]})}):null}},73050:(e,n,t)=>{"use strict";t.d(n,{F4:()=>i,l0:()=>s});var r=t(86105);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[],i=function(e){return e.forEach(function(e){return e&&t.push("-g",e)})},l=[],c=[],u=!0,d=!1,p=void 0;try{for(var f,h=e[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value,g=a(m);g.startsWith("**")?l.push(g):c.push(g)}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}return c.length>0&&(i(["!*"]),new Set(c).forEach(function(e){i((function(e){var n=function(e){Array.isArray(i[e])||(i[e]=[]);var n,o=t[e],a=o.startsWith("{")&&o.endsWith("}")?s(o.substring(1,o.length-1),","):[o];(n=i[e]).push.apply(n,(0,r._)(a.map(function(n){var t=i[e-1];return t&&t.length>0?t.map(function(e){return"".concat(e,"/").concat(n)}):n}).flat(2)))},t=s(e,"/").filter(function(e){return e.length>0});"**"!==t[t.length-1]&&t.push("**");for(var i={},o=0;o<t.length;o++)n(o);return Object.values(i).flat(2)})(e).map(o))})),i(l),i(n.map(function(e){return"!".concat(o(a(e)))})),t}function o(e){return e.startsWith("**")||e.startsWith("/")?e:"/".concat(e)}function a(e){return e.replaceAll(/\*/g,function(e,n,t){return n>0&&("*"===t[n-1]||"\\"===t[n-1])||n<t.length-1&&"*"===t[n+1]?e:"**"})}var l=function(){var e={},n={},t=function(t,r){e[t]=r,n[r]=t};return t("{","}"),t("(",")"),t("[","]"),{hasKey:function(n){return n in e},getKey:function(n){return e[n]},hasValue:function(e){return e in n},getValue:function(e){return n[e]}}}();function s(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(0===e.length)return[];var t=[],r=[],i="",o=!0,a=!1,s=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;if(d===n){if(0===r.length){t.push(i),i="";continue}}else if(l.hasKey(d))r.push(d);else if(l.hasValue(d)&&r.pop()!==l.getValue(d))return[e];i+=d}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return 0!==r.length?[e]:(i.length>0&&t.push(i),t)}},73106:(e,n,t)=>{"use strict";t.d(n,{L:()=>T});var r=t(12694),i=t(1889),o=t(21462),a=t(26496),l=t(317),s=t(98855),c=t(63892),u=t(8952),d=t(87736),p=t(961),f=t(5814),h=t(5644),m=t(6680),g=t(61234),v=t(43974),w=t(26705),y=t(57761),b=t(6553),S=t(3910),Y=t(40043),A=t(35869),C=t(74406),x=t(56185),k=t(30094),_="agent_freemium_quota";function D(e){var n=e.title,t=e.current,r=e.max,o=e.quotaExpiresAt,a=(0,s.M)({expiryDate:o}),l=a.expiryDisplayText,c=a.expiryDisplayTextColor;return(0,i.FD)(A.S,{gap:6,children:[(0,i.FD)(A.S,{css:I.usageMeterAndTitle,children:[(0,i.FD)(A.S,{row:!0,align:"center",gap:4,children:[(0,i.Y)(Y.EY,{height:"singleLine",children:n}),l?(0,i.Y)(Y.EY,{variant:"small",style:{color:c},children:"| ".concat(l)}):null]}),(0,i.FD)(Y.EY,{height:"singleLine",color:"dimmer",children:[t," / ",r]})]}),(0,i.Y)("div",{children:(0,i.Y)(y.W,{css:I.measureBar,total:r,current:t,color:m.LU.blueDefault,tooltipHidden:!0})})]})}var E=(0,g.x)({root:[v.wp.border({color:m.LU.orangeDimmer}),v.wp.borderRadius(),v.wp.py(4),v.wp.px(6),v.wp.colorMixBg(m.LU.orangeDimmer,"transparent",.25)],text:[v.wp.color.orangeStronger]});function R(){return(0,i.Y)(A.S,{css:E.root,children:(0,i.Y)(Y.EY,{css:E.text,children:"You've used 100% of your free AI quota."})})}var I=(0,g.x)({popoverWrapper:[v.wp.p(8),v.wp.width(280)],header:[v.wp.fontWeight.bold],measureBar:[v.wp.height(8)],usageMeterAndTitle:[v.wp.display.flex,v.wp.flex.row,v.wp.justify.spaceBetween,v.wp.align.center],iconBadgeWrapper:[v.wp.position.relative]});function F(e){var n=e.limit,t=e.usage,s=e.isShowingAlertExplanation,c=e.quotaExpiresAt,p=(0,r._)((0,o.useState)(!1),2),f=p[0],m=p[1],g=(0,h.A)();if(!n||void 0===t)return(0,i.Y)(x.A,{});var v=t>=n,w=Math.floor(t/n*100),y="You've used ".concat(w,"% of your ").concat(l.Lm," plan checkpoints. ").concat(a.g$," creates checkpoints when it's finished a significant piece of work.");return(0,i.FD)(i.FK,{children:[(0,i.Y)(A.S,{gap:4,children:(0,i.Y)(D,{title:"Checkpoints",quotaExpiresAt:c,current:t,max:n})}),v?(0,i.Y)(R,{}):null,s?(0,i.Y)(S.N,{text:y,colorway:"primary"}):null,(0,i.Y)(d.A,{text:"Upgrade for more",colorway:"brand",variant:"outlined",context:_,iconLeft:(0,i.Y)(C.A,{}),highlightUpsell:"agent"}),(0,i.Y)(u.A,{isOpen:f,onClose:function(){return m(!1)},type:"purchase",analyticsContext:{upgrade:{context:_}},onPurchaseComplete:g,reloadPageAfterPurchaseComplete:!0})]})}function T(){var e,n=(0,r._)((0,o.useState)(!1),2),t=n[0],l=n[1],s=(0,p.i)().agentCheckpoints,u=(0,r._)((0,o.useState)(!1),2),d=u[0],h=u[1];return(0,f.N)({usage:null==s?void 0:s.usage,limit:null==s?void 0:s.limit,percentThreshold:f.h,onHitThreshold:function(){l(!0),h(!0)}}),(0,f.N)({usage:null==s?void 0:s.usage,limit:null==s?void 0:s.limit,percentThreshold:100,onHitThreshold:function(){(0,c.u4)(c.AZ.AGENT_USED,{action:"hit_freemium_quota"})}}),(0,i.FD)(b.Wv,{isOpen:t,onOpenChange:function(e){l(e),e||h(!1)},label:"Usage",placement:"bottom start",children:[(0,i.Y)(w.K0,{alt:"Usage",disabled:!s,children:(0,i.Y)(A.S,{css:I.iconBadgeWrapper,children:(0,i.Y)(k.A,{})})}),(0,i.Y)(A.S,{css:I.popoverWrapper,children:(0,i.FD)(A.S,{gap:12,children:[(0,i.FD)(Y.EY,{css:I.header,children:[a.g$," usage"]}),(0,i.Y)(F,{limit:null==s?void 0:s.limit,usage:null==s?void 0:s.usage,isShowingAlertExplanation:d,quotaExpiresAt:null!==(e=null==s?void 0:s.quotaExpiresAt)&&void 0!==e?e:void 0})]})})]})}},73301:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M17.5 18.75c.69 0 1.25-.56 1.25-1.25v-11c0-.69-.56-1.25-1.25-1.25h-11c-.69 0-1.25.56-1.25 1.25v6.25a.75.75 0 0 1-1.5 0V6.5A2.75 2.75 0 0 1 6.5 3.75h11a2.75 2.75 0 0 1 2.75 2.75v11a2.75 2.75 0 0 1-2.75 2.75h-6.25a.75.75 0 0 1 0-1.5h6.25Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M8.25 9A.75.75 0 0 1 9 8.25h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0v-4.19l-9.97 9.97a.75.75 0 0 1-1.06-1.06l9.97-9.97H9A.75.75 0 0 1 8.25 9Z",clipRule:"evenodd"})]}))}},73912:(e,n,t)=>{"use strict";t.d(n,{g1:()=>ep.g1,R6:()=>eO,Ge:()=>ep.Ge,iJ:()=>ep.iJ,Ay:()=>eZ,WM:()=>ej,Nz:()=>eV});var r=t(29935),i=t(83846),o=t(17844),a=t(93629),l=t(12694),s=t(86105),c=t(82643),u=t(1889),d=t(21462),p=t(34951),f=t(6960),h=t(88184),m=t(81239),g=t(16907),v=t(78932),w=t(63892),y=t(52690),b=t(67337),S=t(33698),Y=t(45981),A=t.n(Y),C=t(33078),x=t(61234),k=t(43974),_=t(3910),D=t(35869),E=t(20627),R=(0,x.x)({buttonLink:[k.wp.reset.button,k.wp.linkStyle]});function I(){return(0,u.Y)(C.A,{pane:{type:"envEditor"},bodyText:(0,u.FD)(D.S,{gap:4,children:[(0,u.FD)("div",{children:[(0,u.Y)("code",{children:"HTML/CSS/JS"})," Apps don't support secrets since they are statically hosted."]}),(0,u.Y)("div",{children:(0,u.Y)(A(),{href:h.ik.SECRETS,target:"_blank",rel:"noopener",children:"Visit the secrets documentation to learn more."})})]})})}function F(e){var n=e.performPaneOperation,t=e.editSecretsAuthz;return(0,u.Y)(C.A,{pane:{type:"envEditor"},bodyText:(0,u.FD)(D.S,{gap:4,children:[t.isAuthorized?null:(0,u.Y)(_.N,{icon:(0,u.Y)(E.A,{}),text:t.message}),(0,u.Y)("div",{children:(0,u.Y)(A(),{href:h.ik.SECRETS_SAFETY,target:"_blank",rel:"noopener",children:"Learn how Replit keeps your Secrets safe."})}),(0,u.FD)("div",{children:["Not sure where to start?"," ",(0,u.Y)("button",{onClick:function(){n({operation:"open",pane:{type:"integrations"}}),(0,w.u4)(w.AZ.TOOL_OPENED,{source:"secretsPaneNudge",tool:"integrations"})},css:R.buttonLink,children:"Explore Integrations."})]})]})})}function T(e){var n=e.message;return(0,u.Y)(C.A,{pane:{type:"envEditor"},bodyText:(0,u.FD)(D.S,{gap:4,children:[(0,u.Y)("div",{children:n}),(0,u.Y)("div",{children:(0,u.Y)(A(),{href:h.ik.SECRETS,target:"_blank",rel:"noopener",children:"Visit the secrets documentation to learn more."})})]})})}var P=t(22529),L=t(41502),U=t(49937),N=t(6680),O=t(93682),M=t(67197),B=t(26705),H=t(2527),z=t(40043),W=t(37407),G=t(74130),V=t(38565),j=t(79571),Z=(0,x.x)({root:[k.wp.flex.column,k.wp.p(8),k.wp.colWithGap(8)],header:[k.wp.gap(4),k.wp.align.start,{"& > *:first-child":[k.wp.flex.growAndShrink(1),{alignSelf:"end"}]}],list:[k.wp.flex.column,k.wp.borderRadius(),k.wp.overflow("hidden")],item:[k.wp.display.grid,k.wp.align.center,k.wp.justify.spaceBetween,k.wp.px(8),k.wp.py(12),k.wp.border({direction:"bottom",color:N.LU.outlineDimmer,width:1}),{gridTemplateColumns:"1fr 1fr","&:last-child":{borderBottom:"none"},"> *:last-child":{justifyContent:"end"}}],itemName:[k.wp.flex.row,k.wp.gap(8),k.wp.align.center,k.wp.overflow("hidden"),{"*":{overflow:"hidden",textOverflow:"ellipsis"}}],itemValue:[k.wp.overflow("hidden"),k.wp.flex.row,k.wp.gap(4),k.wp.align.center,{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"},span:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}]}),q=function(e){var n=e.name,t=e.value,r=e.checked,i=e.onCheck,o=e.disabled,a=e.disabledReason,s=e.linked,c=(0,l._)((0,d.useState)(!0),2),p=c[0],f=c[1];return(0,u.FD)(D.S,{css:Z.item,children:[(0,u.FD)("div",{css:Z.itemName,children:[s?(0,u.Y)(W.m_,{tooltip:"Linked to Account Secrets",children:(0,u.Y)(j.A,{color:N.LU.accentPrimaryStronger})}):(0,u.Y)(M.S,{checked:r,onChange:i,id:"secret-".concat(n),name:"Select secret",disabled:o}),(0,u.Y)("label",{htmlFor:"secret-".concat(n),children:n}),o&&!s&&a?(0,u.Y)(W.m_,{tooltip:a,children:(0,u.Y)(E.A,{color:N.LU.foregroundDimmer})}):null]}),(0,u.FD)(D.S,{css:Z.itemValue,"data-sensitive":p,children:[(0,u.Y)("span",{children:p?"****************":t}),(0,u.Y)(B.K0,{alt:p?"Hide secret":"Show secret",onClick:function(){return f(!p)},children:p?(0,u.Y)(V.A,{}):(0,u.Y)(G.A,{})})]})]})};function K(e){var n=e.secrets,t=e.onSelectSecrets,r=e.actionText,i=e.helpText,o=e.existingKeys,a=e.linkedSecrets,s=void 0===a?[]:a,c=(0,l._)((0,d.useState)(new Set),2),p=c[0],f=c[1],h=s.length>=10,m=s.length+p.size>=10,g=(0,d.useCallback)(function(){return n.filter(function(e){return p.has(e.name)})},[n,p]),v=new Set(s.map(function(e){return e.secret.id}));return(0,u.FD)(D.S,{css:Z.root,children:[h?(0,u.Y)(_.N,{colorway:"warning",icon:(0,u.Y)(E.A,{}),text:"You've reached the limit of ".concat(10," linked secrets. Please unlink some secrets before adding more.")}):m?(0,u.Y)(_.N,{colorway:"warning",icon:(0,u.Y)(E.A,{}),text:"Selecting another secret would exceed the limit of ".concat(10," linked secrets.")}):null,(0,u.FD)(D.S,{css:Z.header,row:!0,justify:"space-between",children:[(0,u.Y)(z.EY,{variant:"subheadDefault",children:"Account secrets are only visible to you."}),(0,u.Y)(O.$n,{colorway:"primary",text:r,disabled:0===p.size,onClick:function(){return t(g())},size:"small"})]}),(0,u.Y)(z.EY,{color:"dimmer",children:i}),(0,u.Y)(H.ui,{elevated:!0,css:Z.list,children:n.map(function(e){return(0,u.Y)(q,{checked:p.has(e.name),onCheck:function(n){(!n||!(s.length+p.size>=10))&&f(function(t){var r=new Set(t);return n?r.add(e.name):r.delete(e.name),r})},value:e.value||"",name:e.name,linked:v.has(e.id),disabled:o.has(e.name)||h||!p.has(e.name)&&m,disabledReason:o.has(e.name)?"A secret with this name already exists in this Repl":h?"Secret limit reached. Please unlink some secrets before adding more.":m&&!p.has(e.name)?"Cannot select more secrets. This would exceed the limit of ".concat(10):void 0},e.name)})})]})}var $=t(90629),J=t(3443),Q=t(45773),X=t(44987),ee=t(50066),en=t(909),et=t(95758),er=t(44885),ei=t(6761),eo=t(1542),ea=t(20882),el=t(6865),es=w.AZ.ENV_EDITOR_USED;function ec(e){var n,t=e.secrets,i=e.update,o=e.disabledMessage,a=(0,l._)((0,d.useState)(!1),2),s=a[0],p=a[1],f=(0,l._)((0,d.useState)(!1),2),h=f[0],m=f[1],g=(0,l._)((0,d.useState)(!1),2),v=g[0],y=g[1],b=(0,l._)((0,d.useState)(0),2),S=b[0],Y=b[1],A=(0,l._)((0,d.useState)(0),2),C=A[0],x=A[1],E=0===S,R=(0,J.bu)(function(e){var n=e.state.doc.toString(),t=0===C?eu(n):ed(n);return Y(t),(0,w.u4)(es,{action:0===t?"rawEditorUpdatedSuccess":"rawEditorUpdatedError"}),[]}),I=(0,ee.A)(),F=I.ref,T=I.view,P=function(){!h&&p(!1)},L=function(){y(!1),p(!0),(0,w.u4)(es,{action:"rawEditorOpened"})},U=function(){if(!T)return!1;var e=T.state.doc.toString(),n=0===C?eu(e):ed(e);return Y(n),0===n},M=(n=(0,r._)(function(){var e,n;return(0,c.YH)(this,function(t){switch(t.label){case 0:if(!T||!U())return[2];m(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),e=T.state.doc.toString(),[4,i(0===C?new Map(Object.entries(JSON.parse(e)).map(function(e){var n=(0,l._)(e,2);return[n[0],n[1]]})):en.A.parse(e))];case 2:return t.sent(),m(!1),y(!0),setTimeout(function(){P(),setTimeout(function(){y(!1)},500)},500),[3,4];case 3:return n=t.sent(),$.Cp(n),(0,w.u4)(es,{action:"rawEditorUpdatedError"}),Y(4),m(!1),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)});return(0,d.useEffect)(function(){if(T){var e=0===C?JSON.stringify(Object.fromEntries(t.entries()),null,2):en.A.serialize(t);0===C&&"{}"===e&&(e="{\n  \n}"),T.dispatch({changes:{from:0,to:T.state.doc.length,insert:e}}),T.dispatch({selection:{anchor:T.state.doc.length-2*(0===C)}}),T.focus()}},[T,t,C]),(0,u.FD)(W.m_,{isDisabled:void 0===o,tooltip:o,children:[(0,u.FD)(D.S,{row:!0,gap:8,children:[(0,u.Y)(O.$n,{onClick:function(){x(0),L()},text:"Edit as JSON",iconLeft:(0,u.Y)(eo.A,{}),size:"small",disabled:void 0!==o||h}),(0,u.Y)(O.$n,{onClick:function(){x(1),L()},text:"Edit as .env",iconLeft:(0,u.Y)(el.A,{}),size:"small",disabled:void 0!==o||h})]}),(0,u.Y)(er.a,{isOpen:s,onRequestClose:function(){return P()},children:(0,u.FD)(D.S,{gap:24,children:[(0,u.Y)(z.Y9,{level:1,variant:"headerDefault",children:"Raw Secrets Editor"}),(0,u.Y)(z.EY,{children:0===C?"Secrets are specified in JSON. Values must be strings.":'Secrets are specified in .env format (KEY="value").'}),(0,u.Y)(H.ui,{css:[k.wp.borderRadius(8),k.wp.transition.snappy,k.wp.p(4),{border:"1px solid ".concat(N.LU.outlineDimmer),":hover":{borderColor:N.LU.outlineStronger}}],elevated:!0,children:(0,u.Y)(X.Ay,{ref:F,readOnly:h||v,extensions:[R,Q.w4.of([{key:(0,et.FM)({cmdOrCtrl:!0,key:"Enter"}),run:function(){return M(),!0},preventDefault:!0,stopPropagation:!0}])],language:0===C?"json":"properties",hideGutter:!0})}),(0,u.FD)(D.S,{row:!0,gap:4,justify:"end",children:[!E&&(0,u.Y)(_.N,{icon:(0,u.Y)(ea.A,{}),colorway:"negative",text:function(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return'Make sure the data is in valid .env format (KEY="value").';case 3:return"Make sure that all values are strings.";case 5:return"Make sure that all keys are non-empty strings.";case 4:return"There was an error saving the secrets.";default:return""}}(S)}),(0,u.FD)(D.S,{row:!0,gap:12,children:[(0,u.Y)(O.$n,{onClick:P,text:"Cancel"}),(0,u.Y)(O.$n,{iconLeft:(0,u.Y)(ei.A,{}),stretch:!0,colorway:v?"positive":"primary",text:v?"Saved!":"Save",disabled:!E||h||v,onClick:function(){return M()}})]})]})]})})]})}function eu(e){try{var n=JSON.parse(e);for(var t in n){if("string"!=typeof t||"string"!=typeof n[t])return 3;if(!t.trim())return 5}return 0}catch(e){return 1}}function ed(e){try{var n=e.replace(/#.*$/gm,"").split("\n"),t="",r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;if((t+=(t?"\n":"")+c).trim()){var u=(t.match(/'/g)||[]).length,d=(t.match(/"/g)||[]).length;if(u%2!=0||d%2!=0){if(c===n[n.length-1])return 2;continue}t=""}}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var p=en.A.parse(e),f=!0,h=!1,m=void 0;try{for(var g,v=p[Symbol.iterator]();!(f=(g=v.next()).done);f=!0)if(!(0,l._)(g.value,1)[0].trim())return 5}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}return 0}catch(e){return 2}}var ep=t(15572),ef=t(45771),eh=t(4930),em=t(74863),eg=t(62456),ev=t(31618),ew=t(51820),ey=t(60738),eb=t(2613),eS=t(68190),eY=t(38224),eA=t(51732),eC=t(48795),ex=t(56185),ek=t(75251),e_=t(97783),eD=t(31412),eE=t(19915),eR=(0,ef.AH)([k.wp.center,k.wp.coverContainer]),eI=k.kL.max(420),eF=(0,x.x)({root:[k.wp.flex.column,k.wp.flex.growAndShrink(1),k.wp.height("100%")],body:[k.wp.flex.growAndShrink(1),k.wp.overflowY("auto")],header:[k.wp.border({color:N.LU.outlineDimmest,width:1,direction:"bottom"}),k.wp.overflowX("auto"),k.wp.overflowY("hidden")],tabs:[k.wp.flex.growAndShrink(1),{height:"100%",'[role="tablist"]':{height:"100%","& > *":{borderRadius:0}}}],tabExtraText:(0,i._)({},eI,{display:"none"}),headerButtons:[k.wp.gap(8),k.wp.p(8)],addSecretTitleContainer:[k.wp.width("40%")],addSecretValueSection:[k.wp.flex.growAndShrink(1)],secretSelect:[k.wp.minWidth(48)],addSecretContainer:[k.wp.flex.column,k.wp.colWithGap(8),k.wp.py(8),k.wp.flex.column,k.wp.colWithGap(8)],addSecretValue:[],addSecretValueLabel:[{label:[k.wp.display.flex,k.wp.flex.row,k.wp.gap(4),k.wp.align.center]}]}),eT=(0,x.x)({body:[k.wp.flex.growAndShrink(1),k.wp.overflowY("auto")],footer:[k.wp.p(4),k.wp.border({color:N.LU.outlineDimmer,width:1,direction:"top"}),{"& > *":{width:"fit-content"}}],accessSecret:[k.wp.px(8),k.wp.py(16),k.wp.colWithGap(8)],link:[k.wp.linkStyle,k.wp.color.foregroundDefault]}),eP=["SLACK_API_KEY","GOOGLE_API_KEY","MONGO_API_KEY","FIREBASE_API_KEY"];function eL(e){var n=e.onClose,t=e.onAdd,r=e.otherKeys,i=(0,l._)((0,d.useState)(!0),2),s=i[0],c=i[1],p=(0,l._)((0,d.useState)({key:"",value:""}),2),f=p[0],h=p[1],m=(0,l._)((0,d.useState)(function(){var e=Math.floor(Math.random()*eP.length);return eP[e]}),1)[0],g=(0,d.useMemo)(function(){return null!==f.key.match(ep.Hs)},[f.key]),v=(0,d.useMemo)(function(){return r.includes(f.key)?"Secret already exists":!g&&f.key?ep.ll:void 0},[r,f.key,g]),w=f.key.length>0&&!v,y=function(){w&&(t({key:f.key.trim(),value:f.value}),h({key:"",value:""}))};return(0,u.FD)(D.S,{css:eF.addSecretContainer,onKeyDown:function(e){"Enter"===e.key&&y()},children:[(0,u.FD)(D.S,{row:!0,gap:8,children:[(0,u.Y)(D.S,{css:eF.addSecretTitleContainer,children:(0,u.FD)(eb.A_,{validate:function(){return v},validationBehavior:"aria",isRequired:!0,minLength:1,maxLength:128,name:"secretKey",value:f.key,onChange:function(e){return h(function(n){return(0,a._)((0,o._)({},n),{key:e})})},isInvalid:!!v,children:[(0,u.Y)(ew.J,{color:"dimmer",multiline:!1,children:"Key"}),(0,u.Y)(ev.pd,{placeholder:m,autoComplete:"off",autoFocus:!0}),(0,u.Y)(eg.bg,{children:v})]})}),(0,u.Y)(D.S,{css:eF.addSecretValueSection,gap:4,children:(0,u.FD)(eb.A_,{isRequired:!0,minLength:1,name:"secretValue",value:f.value,onChange:function(e){return h(function(n){return(0,a._)((0,o._)({},n),{value:e})})},css:eF.addSecretValue,children:[(0,u.FD)(ew.J,{color:"dimmer",multiline:!1,css:eF.addSecretValueLabel,children:["Value",(0,u.Y)(B.K0,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return c(!s)},size:12,children:s?(0,u.Y)(G.A,{}):(0,u.Y)(V.A,{})})]}),(0,u.Y)(ev.pd,{"data-sensitive":s,autoComplete:"off"})]})})]}),(0,u.FD)(D.S,{row:!0,gap:8,justify:"end",children:[(0,u.Y)(O.$n,{size:"small",text:"Cancel",onClick:function(){return n()}}),(0,u.Y)(O.$n,{size:"small",text:"Add Secret",colorway:"primary",disabled:!w,onClick:y})]})]})}var eU=[k.wp.flex.row,k.wp.rowWithGap(8),k.wp.align.center],eN=(0,x.x)({root:[k.wp.height("100%"),k.wp.borderRadius(8),{'& [aria-haspopup="listbox"]':[k.wp.height(32)]}],item:eU,itemDanger:[eU,{color:N.LU.accentNegativeStronger}]});function eO(e){var n=e.onEdit,t=e.onDelete,r=e.onSearch;return(0,u.Y)(H.ui,{elevated:!0,css:eN.root,children:(0,u.Y)(eS.A,{label:"Options",items:[{label:(0,u.FD)(D.S,{css:eN.item,children:[(0,u.Y)(eC.A,{}),(0,u.Y)(z.EY,{multiline:!1,children:"Edit"})]}),onClick:n},r&&{label:(0,u.FD)(D.S,{css:eN.item,children:[(0,u.Y)(e_.A,{}),(0,u.Y)(z.EY,{multiline:!1,children:"Find Usages"})]}),onClick:r},{label:(0,u.FD)(D.S,{css:eN.itemDanger,children:[(0,u.Y)(eE.A,{}),(0,u.Y)(z.EY,{multiline:!1,children:"Delete"})]}),isDestructive:!0,onClick:t}].filter(Boolean),onItemClick:function(e){var n;return null===(n=e.onClick)||void 0===n?void 0:n.call(e)}})})}var eM=(0,x.x)({container:[k.wp.py(8)],blankSecretsContainer:[k.wp.px(8)],nonBlankSecretsContainer:[k.wp.px(8)],secretItem:[k.wp.p(8),k.wp.borderRadius(8),k.wp.backgroundColor.backgroundRoot]});function eB(e){var n=e.secrets,t=e.onUpdateSecret,r=e.onDeleteSecret,i=e.onAddSecret,o=e.showAddSecret,a=e.onSearch,c=e.onClose,p=e.editAuthorizationErrorMessage,f=e.linkedSecrets,h=e.userSecrets,m=e.onUpdateLink,g=e.onUnlink,v=(0,d.useMemo)(function(){return new Set((0,s._)(n.keys()).concat((0,s._)((null==f?void 0:f.map(function(e){return e.alias}))||[])))},[n,f]),w=(0,d.useMemo)(function(){return(0,s._)(n.entries()).filter(function(e){var n=(0,l._)(e,2);return""===(n[0],n[1])})},[n]),y=(0,d.useMemo)(function(){return(0,s._)(n.entries()).filter(function(e){var n=(0,l._)(e,2);return""!==(n[0],n[1])})},[n]);return o||0!==w.length||0!==y.length||(null==f?void 0:f.length)?(0,u.FD)(D.S,{css:eM.container,gap:8,children:[0!==w.length&&(0,u.FD)(u.FK,{children:[(0,u.FD)(D.S,{css:eM.blankSecretsContainer,gap:8,children:[(0,u.Y)(z.EY,{variant:"subheadDefault",multiline:!1,children:"Configure missing Secret values"}),(0,u.Y)(z.EY,{variant:"small",children:"This App contains Secrets that might be required. Add values to ensure the code runs as expected."}),(0,u.Y)(D.S,{gap:8,children:w.map(function(e){var n=(0,l._)(e,2),i=n[0],o=n[1];return(0,u.Y)(H.ui,{elevated:!0,css:eM.secretItem,children:(0,u.Y)(ep.aL,{secret:{key:i,value:o},onUpdateSecret:t,onDeleteSecret:r,onSearchSecret:function(){},editAuthorizationErrorMessage:p})},i)})})]}),(0,u.Y)(em.a,{})]}),(0,u.FD)(D.S,{css:eM.nonBlankSecretsContainer,gap:8,children:[o?(0,u.Y)(eL,{onClose:c,onAdd:i,otherKeys:Object.keys(n)}):null,y.map(function(e){var n=(0,l._)(e,2),i=n[0],o=n[1];return(0,u.Y)(ep.aL,{secret:{key:i,value:o},onUpdateSecret:t,onDeleteSecret:r,onSearchSecret:a,editAuthorizationErrorMessage:p},i)}),f&&f.length>0?(0,u.FD)(u.FK,{children:[y.length>0?(0,u.Y)(em.a,{}):null,f.map(function(e){return(0,u.Y)(ep.x7,{link:e,onUpdateLink:m,onUnlink:g,userSecrets:h,existingKeys:v},e.id)})]}):null]})]}):null}function eH(e){var n=e.secrets,t=e.activeFile,r=(0,l._)((0,d.useState)(n.keys().next().value),2),i=r[0],o=r[1];return(0,L.A)(t)&&(0,P.M)(t,i)&&n.size>0?(0,u.FD)(D.S,{css:eT.accessSecret,children:[(0,u.FD)(D.S,{row:!0,gap:8,align:"center",children:[(0,u.Y)(z.EY,{multiline:!1,children:"Access secret"}),(0,u.Y)(eY.l,{css:eF.secretSelect,items:(0,s._)(n.keys()).map(function(e){return{title:e}}),selectedItem:{title:i},onChange:function(e){return o(e.title)}})]}),(0,u.Y)(P.A,{elevated:!0,keyName:i,filePath:t})]}):null}var ez=(0,x.x)({container:[k.wp.p(8)],text:[k.wp.flex.growAndShrink(1)]}),eW=function(e){var n,t,i,o,a,l=e.performPaneOperation,s=e.getRunState,d=e.showAddSecret,p=e.setShowAddSecret,f=e.secrets,g=e.editAuthorization,S=e.error,Y=e.dismissibleElement,A=Y.isDone,C=Y.setAsDone,x=e.linkedSecrets,k=e.userSecrets,R=e.onUpdateLink,P=e.onUnlink,L=(0,m.A)().showConfirm,N=(0,b.A)().secrets,O=(0,U.rM)(),M=(0,v.g)(),B=function(){p(!1)},H=(n=(0,r._)(function(e){return(0,c.YH)(this,function(n){return(0,w.u4)(w.AZ.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),N.addEntries([{key:e.key,value:e.value}]),s()===y.ll.RUNNING&&L("Re-run your App to use this secret"),B(),[2]})}),function(e){return n.apply(this,arguments)}),W=(t=(0,r._)(function(e,n){var t;return(0,c.YH)(this,function(r){return(0,w.u4)(w.AZ.ENV_EDITOR_USED,{action:"updated",multiline:n.value.includes("\n")}),(t=new Map(f)).delete(e),t.set(n.key,n.value),N.replaceAll(t),[2]})}),function(e,n){return t.apply(this,arguments)}),G=(i=(0,r._)(function(e){return(0,c.YH)(this,function(n){return(0,w.u4)(w.AZ.ENV_EDITOR_USED,{action:"deleted"}),N.removeEntries(e),[2]})}),function(e){return i.apply(this,arguments)}),V=f.size>0||x&&x.length>0;return M?(0,u.Y)(I,{}):!g||S?(0,u.Y)(T,{message:null!==(a=null==S?void 0:S.message)&&void 0!==a?a:"Unable to determine secret eligibility, please refresh your browser."}):(0,u.FD)(u.FK,{children:[(0,u.FD)(D.S,{css:eT.body,children:[g.isAuthorized&&!A?(0,u.Y)(D.S,{css:ez.container,children:(0,u.Y)(_.N,{icon:(0,u.Y)(E.A,{}),closable:!0,closeAction:function(){return C()},colorway:"primary",text:(0,u.FD)(z.EY,{css:ez.text,children:["Secrets are accessible to anyone who has access to this App. To restrict secret access, you must update App invite permissions. For more information, visit"," ",(0,u.Y)("a",{href:h.ik.SECRETS,target:"_blank",css:eT.link,children:"our documentation"}),"."]})})}):null,V||!1!==d?null:(0,u.Y)(F,{performPaneOperation:l,editSecretsAuthz:g}),(0,u.Y)(eB,{secrets:f,onUpdateSecret:W,onDeleteSecret:G,onAddSecret:H,showAddSecret:d,onSearch:function(e){return l({operation:"open",pane:{type:"searchReplace",data:{initialQuery:e}}})},editAuthorizationErrorMessage:g.isAuthorized?void 0:g.message,onClose:B,linkedSecrets:x,userSecrets:k,onUpdateLink:R,onUnlink:P}),O&&V?(0,u.Y)(eH,{secrets:f,activeFile:O}):null]}),(0,u.Y)(D.S,{css:eT.footer,children:(0,u.Y)(ec,{secrets:f,update:(o=(0,r._)(function(e){return(0,c.YH)(this,function(n){switch(n.label){case 0:return[4,N.replaceAll(e)];case 1:return n.sent(),[2]}})}),function(e){return o.apply(this,arguments)}),disabledMessage:g.isAuthorized?void 0:g.message})})]})},eG={SECRETS:0,ACCOUNT_SECRETS:1};function eV(e,n){return(0,f.AH)({update:function(t,r,i){var l=r.data,s=i.variables;(null==l?void 0:l.unlinkSharedSecrets.__typename)==="UnlinkSharedSecretsResult"&&t.updateQuery({query:f.tD,variables:{replId:e}},function(e){if(!(null==e?void 0:e.getRepl)||"Repl"!==e.getRepl.__typename||!s)return e;var t,r,i=null!==(r=null===(t=e.getRepl.sharedSecretLinks)||void 0===t?void 0:t.filter(function(e){return!s.input.ids.includes(e.id)}))&&void 0!==r?r:[];return n(i.map(function(e){return{key:e.alias,url:e.secret.signedUrl}})),(0,a._)((0,o._)({},e),{getRepl:(0,a._)((0,o._)({},e.getRepl),{sharedSecretLinks:i})})})}})}function ej(e,n){return(0,f.DX)({update:function(t,i){var l=i.data;return(0,r._)(function(){var r,i,u,d,p,h;return(0,c.YH)(this,function(c){switch(c.label){case 0:if((null==l?void 0:l.linkSharedSecrets.__typename)!=="LinkSharedSecretsResult")return[3,2];return i=l.linkSharedSecrets.links,p=(null==(u=t.readQuery({query:f.tD,variables:{replId:e}}))?void 0:null===(r=u.getRepl)||void 0===r?void 0:r.__typename)==="Repl"&&null!==(d=u.getRepl.sharedSecretLinks)&&void 0!==d?d:[],[4,n((h=(0,s._)(p).concat((0,s._)(i))).map(function(e){return{key:e.alias,url:e.secret.signedUrl}}))];case 1:c.sent(),t.updateQuery({query:f.tD,variables:{replId:e}},function(e){return(null==e?void 0:e.getRepl)&&"Repl"===e.getRepl.__typename?(0,a._)((0,o._)({},e),{getRepl:(0,a._)((0,o._)({},e.getRepl),{sharedSecretLinks:h})}):e}),c.label=2;case 2:return[2]}})})()}})}function eZ(e){var n,t,i,v,y=e.getRunState,Y=e.performPaneOperation,A=(0,g.A)(),C=(0,b.A)().secrets,x=(0,l._)(eV(A,C.replaceAllExternalSecrets),1)[0],k=(0,l._)(ej(A,C.replaceAllExternalSecrets),1)[0],_=(0,l._)((n=(0,b.A)().secrets,(0,f.vC)({update:function(e,t){var r=t.data;if((null==r?void 0:r.updateSharedSecretLink.__typename)==="SharedSecretLink"){var i=r.updateSharedSecretLink;e.updateQuery({query:f.tD,variables:{replId:A}},function(e){if((null==e?void 0:null===(t=e.getRepl)||void 0===t?void 0:t.__typename)!=="Repl")return e;var t,r,l,s=null!==(l=null===(r=e.getRepl.sharedSecretLinks)||void 0===r?void 0:r.map(function(e){return e.id===i.id?i:e}))&&void 0!==l?l:[];return n.replaceAllExternalSecrets(s.map(function(e){return{key:e.alias,url:e.secret.signedUrl}})),(0,a._)((0,o._)({},e),{getRepl:(0,a._)((0,o._)({},e.getRepl),{sharedSecretLinks:s})})})}}})),1)[0],E=(0,l._)((0,d.useState)(eG.SECRETS),2),R=E[0],I=E[1],F=(0,l._)((0,d.useState)(new Map),2),T=F[0],P=F[1],L=(0,l._)((0,d.useState)(!1),2),U=L[0],N=L[1],M=(0,m.A)(),B=(0,S.Z)("editors-have-secret-access-warning"),H=(0,f.d3)({variables:{replId:A}}),z=H.data,G=H.loading,V=H.error,j=(null==z?void 0:z.getRepl.__typename)==="Repl"?z.getRepl:void 0,Z=null==j?void 0:j.authorizations.editSecrets,q=(0,f.bM)({variables:{replId:A}}),$=q.data,J=q.loading,Q=(0,f.m1)({fetchPolicy:"cache-and-network",ssr:!1}).data,X=(0,d.useMemo)(function(){if((null==$?void 0:$.getRepl.__typename)==="Repl"&&$.getRepl.sharedSecretLinks)return $.getRepl.sharedSecretLinks},[$]),ee=(0,d.useMemo)(function(){var e;return(null==Q?void 0:null===(e=Q.currentUser)||void 0===e?void 0:e.secrets.__typename)==="SharedSecretConnection"?Q.currentUser.secrets.items:[]},[Q]),en=(0,d.useMemo)(function(){return new Set((0,s._)(T.keys()).concat((0,s._)((null==X?void 0:X.map(function(e){return e.alias}))||[])))},[T,X]),et=(0,d.useMemo)(function(){return ee.map(function(e){return{id:e.id,value:e.value||""}})},[ee]);(0,d.useEffect)(function(){(0,w.xm)(w.AZ.ENV_EDITOR_USED,{action:"opened",tab:R===eG.ACCOUNT_SECRETS?"account":"repl"})},[R]),(0,d.useEffect)(function(){var e=C.watch(function(e){P(e)});return function(){e()}},[C,P]);var er=(t=(0,r._)(function(e){return(0,c.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,k({variables:{input:{resourceId:A,resourceType:p.U9.Repl,secrets:e.map(function(e){return{secretId:e.id,alias:e.name}})}}})];case 1:return n.sent(),M.showConfirm("Secrets linked to this App"),I(eG.SECRETS),(0,w.u4)(w.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"secrets-pane",count:e.length,keys:e.map(function(e){return e.name})}),[3,3];case 2:return n.sent(),M.showError("Failed to link secrets"),[3,3];case 3:return[2]}})}),function(e){return t.apply(this,arguments)});return!T||G||J||B.isLoading?(0,u.Y)(D.S,{css:eR,children:(0,u.Y)(ex.A,{size:24})}):(0,u.FD)(D.S,{css:eF.root,children:[(0,u.FD)(D.S,{css:eF.header,row:!0,gap:8,align:"center",children:[(0,u.Y)(ey.tU,{selectedIndex:R,onSelectionChange:function(e){return I(e)},css:eF.tabs,children:(0,u.FD)(ey.wb,{withDividers:!1,withUnderline:!1,children:[(0,u.FD)(ey.oz,{children:["App ",(0,u.Y)("span",{css:eF.tabExtraText,children:"Secrets"})]},eG.SECRETS),(null==j?void 0:j.isOwner)?(0,u.FD)(ey.oz,{children:["Account ",(0,u.Y)("span",{css:eF.tabExtraText,children:"Secrets"})]},eG.ACCOUNT_SECRETS):null]})}),(0,u.FD)(D.S,{css:eF.headerButtons,row:!0,children:[(0,u.Y)(eh.v,{iconLeft:(0,u.Y)(eA.A,{}),href:h.ik.SECRETS,size:"small",text:"Docs",target:"_blank"}),R===eG.SECRETS?(0,u.Y)(W.m_,{isDisabled:null==Z?void 0:Z.isAuthorized,tooltip:null==Z?void 0:Z.message,children:(0,u.Y)(O.$n,{iconLeft:(0,u.Y)(ek.A,{}),text:(0,u.FD)(u.FK,{children:["New ",(0,u.Y)("span",{css:eF.tabExtraText,children:"Secret"})]}),colorway:"primary",size:"small",disabled:!(null==Z?void 0:Z.isAuthorized),onClick:function(){return N(!0)}})}):null,R===eG.ACCOUNT_SECRETS?(0,u.Y)(W.m_,{isDisabled:null==Z?void 0:Z.isAuthorized,tooltip:null==Z?void 0:Z.message,children:(0,u.Y)(eh.v,{iconLeft:(0,u.Y)(eD.A,{}),text:(0,u.FD)(u.FK,{children:["Manage ",(0,u.Y)("span",{css:eF.tabExtraText,children:"Account"})]}),colorway:"primary",size:"small",href:"/account#account-secrets",target:"_blank"})}):null]})]}),(0,u.FD)(D.S,{css:eF.body,children:[R===eG.SECRETS?(0,u.Y)(eW,{getRunState:y,performPaneOperation:Y,showAddSecret:U,setShowAddSecret:N,secrets:T,dismissibleElement:B,editAuthorization:Z,error:V,linkedSecrets:X,userSecrets:et,onUpdateLink:(i=(0,r._)(function(e,n){return(0,c.YH)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,_({variables:{input:{id:e,resourceId:A,resourceType:p.U9.Repl,alias:n}}})];case 1:return t.sent(),M.showConfirm("Secret link updated"),[3,3];case 2:return t.sent(),M.showError("Failed to update secret link"),[3,3];case 3:return[2]}})}),function(e,n){return i.apply(this,arguments)}),onUnlink:(v=(0,r._)(function(e){return(0,c.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,x({variables:{input:{resourceId:A,resourceType:p.U9.Repl,ids:[e]}}})];case 1:return n.sent(),M.showConfirm("Secret unlinked"),[3,3];case 2:return n.sent(),M.showError("Failed to unlink secret"),[3,3];case 3:return[2]}})}),function(e){return v.apply(this,arguments)})}):null,R===eG.ACCOUNT_SECRETS?(0,u.Y)(K,{secrets:ee,actionText:"Link to this App",helpText:"Linked secrets will stay in sync with your Account Secrets.",existingKeys:en,onSelectSecrets:er,linkedSecrets:X}):null]})]})}},73918:e=>{e.exports={textGrid:"TextGrid_textGrid__XASL1",dotChar:"TextGrid_dotChar__IMDgf",textChar:"TextGrid_textChar__z0SfA",textAdded:"TextGrid_textAdded__FKtZ_",textRemoved:"TextGrid_textRemoved__LHxaI",gridLine:"TextGrid_gridLine__DUXek"}},74370:(e,n,t)=>{"use strict";t.d(n,{DY:()=>f,LM:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(34495);function s(){var e=(0,i._)(["\n  fragment ConvertedToProjectModalRepl on Repl {\n    id\n    org {\n      id\n    }\n    project {\n      id\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  query ConvertedToProjectModal($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        org {\n          id\n          slug\n        }\n        project {\n          id\n          title\n          mainRepl {\n            id\n          }\n        }\n        ...CreateProjectForkRepl\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},d=(0,o.J1)(s()),p=(0,o.J1)(c(),l.T);function f(e){var n=(0,r._)({},u,e);return a.I(p,n)}},74673:(e,n,t)=>{"use strict";t.d(n,{J:()=>u,f:()=>c});var r=t(17844),i=t(1889),o=t(47993),a=t(94965),l=t(45771),s=t(6680),c=t(43974).U3-1;function u(e){var n=e.targetElement,t=e.transparent,u=e.disableAnimation,p=(0,a.my)(n);if(null==p||null==n)return null;var f=(0,l.AH)({backgroundColor:t?"transparent":s.LU.backgroundOverlay,zIndex:c,position:"fixed",transition:u?"all":"all 0.5s ease-out"});return(0,o.createPortal)((0,i.FD)(i.FK,{children:[(0,i.Y)("div",{id:"wat",css:[d((0,r._)({side:"left-top"},p)),f]}),(0,i.Y)("div",{css:[d((0,r._)({side:"top-right"},p)),f]}),(0,i.Y)("div",{css:[d((0,r._)({side:"right-bottom"},p)),f]}),(0,i.Y)("div",{css:[d((0,r._)({side:"bottom-left"},p)),f]})]}),document.body)}function d(e){var n=e.side,t=e.rect,r=e.docWidth,i=e.docHeight;switch(n){case"left-top":return(0,l.AH)({top:0,left:0,width:Math.max(0,t.left),height:Math.max(0,t.bottom)});case"top-right":return(0,l.AH)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,t.left),"px)"),height:Math.max(0,t.top)});case"right-bottom":return(0,l.AH)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,t.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,t.top),"px)")});case"bottom-left":return(0,l.AH)({bottom:0,left:0,width:Math.max(0,t.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,t.bottom),"px)")})}}},74829:(e,n,t)=>{"use strict";t.d(n,{Y:()=>h});var r=t(12694),i=t(86105),o=t(1889),a=t(21462),l=t(23099),s=t.n(l),c=t(93682),u=t(2527),d=t(35869),p=t(73918),f=t.n(p);function h(e){var n=e.lines,t=e.maxLines,l=void 0===t?20:t,c=e.animate,u=void 0!==c&&c,p=e.diffMode,h=void 0!==p&&p,m=e.showControls,w=(0,r._)((0,a.useState)(80),2),y=w[0],b=w[1],S=(0,a.useRef)(null);(0,a.useEffect)(function(){S.current&&b(Math.min(Math.floor(S.current.clientWidth/8),100))},[]);var Y=(0,a.useMemo)(function(){return n.length<=8?8:l},[n,l]),A=(0,a.useMemo)(function(){return Array(Y).fill(null).map(function(){return Array(y).fill(null).map(function(){return{char:"\xb7",isText:!1,diffType:"same"}})})},[Y,y]),C=(0,r._)((0,a.useState)(A),2),x=C[0],k=C[1],_=(0,r._)((0,a.useState)(0),2),D=_[0],E=_[1],R=(0,r._)((0,a.useState)(u),2),I=R[0],F=R[1],T=(0,a.useRef)(null),P=(0,a.useRef)(performance.now()),L=(0,a.useRef)(x);(0,a.useEffect)(function(){L.current=x},[x]);var U=(0,a.useCallback)(function(){for(var e=Array(Y).fill(null).map(function(){return Array(y).fill(null).map(function(){return{char:"\xb7",isText:!1,diffType:"same"}})}),t=0;t<Y;t++)!function(t){var r=D-t;if(!(r<0)&&!(r>=n.length)){var o=Y-1-t,a=void 0,l="same";if(h&&"string"!=typeof n[r]){var s=n[r];a=s.content,l=s.type}else a=n[r];var c=a.trimStart(),u=a.length-c.length,d=[];if(u>y)d=Array(y).fill(null).map(function(){return{char:"\xb7",isText:!1,diffType:l}});else{var p=Array(u).fill(null).map(function(){return{char:"\xb7",isText:!1,diffType:l}}),f=c.slice(0,y-u).split("").map(function(e){return{char:e,isText:!0,diffType:l}});for(d=(0,i._)(p).concat((0,i._)(f));d.length<y;)d.push({char:"\xb7",isText:!1,diffType:l})}e[o]=d}}(t);s()(e,L.current)||k(e)},[D,n,h,Y,y]),N=(0,a.useCallback)(function(e){if(e-P.current>=100){var t=D+1;if(t>=n.length){F(!1);return}E(t),P.current=e}T.current=requestAnimationFrame(N)},[D,n.length]);return(0,a.useEffect)(function(){return u&&I&&(T.current=requestAnimationFrame(N)),function(){T.current&&cancelAnimationFrame(T.current)}},[u,N,I]),(0,a.useEffect)(function(){F(u),u||E(Y)},[u,Y]),(0,a.useEffect)(function(){U()},[D,U]),(0,o.FD)(d.S,{innerRef:S,children:[(0,o.Y)("pre",{className:f().textGrid,children:x.map(function(e,n){return(0,o.Y)(g,{line:e,lineIndex:n,numRows:Y},n)})}),void 0!==m&&m?(0,o.Y)(v,{animate:u,isAnimating:I,setTextPosition:E,setIsAnimating:F,lines:n,textPosition:D}):null]})}var m=(0,a.memo)(function(e){var n=e.char,t=e.isText,r=e.diffType,i=e.opacity,l=(0,a.useMemo)(function(){return t?"same"===r?f().textChar:"".concat(f().textChar," ").concat("added"===r?f().textAdded:f().textRemoved):f().dotChar},[t,r]);return(0,o.Y)("span",{className:l,style:{opacity:t?i:.7*i},children:n})}),g=(0,a.memo)(function(e){var n=e.line,t=e.lineIndex,r=e.numRows,i=(0,a.useMemo)(function(){var e=r/2;return .5+.5*(1-Math.abs(t-e)/e)},[t,r]);return(0,o.Y)("div",{className:f().gridLine,children:n.map(function(e,n){return(0,o.Y)(m,{char:e.char,isText:e.isText,diffType:e.diffType,opacity:i},n)})})}),v=(0,a.memo)(function(e){var n=e.animate,t=e.isAnimating,r=e.textPosition,i=e.setTextPosition,l=e.setIsAnimating,s=e.lines,d=(0,a.useCallback)(function(){i(0),l(n)},[n,l,i]),p=(0,a.useCallback)(function(){l(!1),i(function(e){var n=e+1;return n>=s.length?e:n})},[s.length,l,i]),f=(0,a.useCallback)(function(){l(function(e){return!e})},[l]),h=(0,a.useCallback)(function(){l(!1),i(Math.max(0,s.length-1))},[s.length,l,i]),m=r===s.length-1;return(0,o.FD)(u.ui,{row:!0,gap:8,children:[(0,o.Y)(c.$n,{size:"small",onClick:d,text:"Restart"}),m?null:(0,o.Y)(c.$n,{size:"small",onClick:f,text:t?"Pause":"Play"}),t||m?null:(0,o.FD)(o.FK,{children:[(0,o.Y)(c.$n,{size:"small",onClick:p,text:"Step Forward"}),(0,o.Y)(c.$n,{size:"small",onClick:h,text:"Step to End"})]})]})})},74948:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M1.012 18.902h1.784l1.413-3.98H9.89l1.413 3.98h1.783L7.928 4.852H6.172l-5.16 14.05Zm8.343-5.489-2.25-6.339h-.11l-2.25 6.34h4.61ZM16.34 18.772c.544.251 1.15.377 1.818.377.613 0 1.132-.091 1.557-.274.425-.183.766-.405 1.022-.666.257-.26.44-.505.55-.734h.082v1.427h1.619v-6.943c0-.837-.137-1.505-.412-2.004-.274-.498-.62-.87-1.036-1.118a3.733 3.733 0 0 0-1.283-.487 6.416 6.416 0 0 0-1.166-.123c-.53 0-1.07.073-1.62.22a4.114 4.114 0 0 0-1.509.754c-.457.357-.823.855-1.098 1.495l1.537.55c.179-.385.487-.746.927-1.085.439-.338 1.045-.507 1.818-.507.745 0 1.3.187 1.667.562.37.375.556.901.556 1.578v.055c0 .26-.094.444-.282.549-.183.105-.476.18-.878.226-.398.041-.917.103-1.557.186-.49.064-.977.15-1.462.26-.48.105-.919.266-1.317.48a2.518 2.518 0 0 0-.954.892c-.238.376-.356.865-.356 1.469 0 .686.16 1.271.48 1.756.32.48.752.848 1.297 1.105Zm3.684-1.455c-.44.252-.979.378-1.62.378-.644 0-1.177-.142-1.598-.426-.416-.288-.624-.713-.624-1.276 0-.412.11-.736.33-.974.223-.243.516-.423.877-.542.366-.124.76-.213 1.18-.268.174-.023.4-.05.68-.082.283-.037.574-.078.87-.124.303-.05.568-.107.797-.171.233-.069.384-.144.453-.227v1.482a2.569 2.569 0 0 1-1.345 2.23Z",clipRule:"evenodd"})}))}},74999:(e,n,t)=>{"use strict";t.d(n,{K:()=>c});var r=t(17844),i=t(93629),o=t(17459),a=t(1889),l=t(18063),s=t(35869).D.button;function c(e){var n=e.iconLeft,t=e.iconRight,c=e.text,u=e.innerRef,d=e.colorway,p=(0,o._)(e,["iconLeft","iconRight","text","innerRef","colorway"]);return(0,a.FD)(s,(0,i._)((0,r._)({ref:u},p),{css:[(0,l.w)({colorway:d,clickable:!0,variant:"filled",iconLeft:!!n,iconRight:!!t}),{color:"inherit"}],children:[n,(0,a.Y)("span",{children:c}),t]}))}},75705:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(12694),i=t(90629),o=t(41140),a=t(34951),l=t(11646),s=t(96856),c=t(81239),u=t(63892);let d=function(e){var n=e.isMobileApp,t=e.isTeam,d=e.handleUpgradeTriggered,p=e.replId,f=(0,c.A)(),h=f.showConfirm,m=f.showError,g=(0,s.X)(),v=function(e,n){i.ZQ({message:n}),i.Cp(Error(e.message)),m("Something unexpected happened, please try again.")},w=(0,r._)((0,o.t)({onError:function(e){return v(e,"useAddOrInviteReplMultiplayerMutation")},onCompleted:function(e){var r,i,o,s=e.addOrInviteReplMultiplayer;switch(s.__typename){case"NotFoundError":case"UnauthorizedError":m(s.message);return;case"UserError":if(s.message.includes("reached the limit")){if(n&&!t){m("You have reached the invite limit for a free account. Please upgrade to add more collaborators.");return}if(!n&&d){d(!0);return}}m(s.message);return;case"AddOrInviteReplMultiplayerOuput":"MultiplayerInvite"===s.result.__typename?(r=a.LI.Email,i=s.result.email):(r=a.LI.Username,i=(null===(o=s.result.user)||void 0===o?void 0:o.username)?"@".concat(s.result.user.username):"user")}"data"===g.type&&g.refetch(),(0,u.u4)(l.AZ.MULTIPLAYER_INVITED,{replId:p,inviteMethod:r}),h("Added ".concat(i))}}),2);return{addOrInviteReplMultiplayer:w[0],loadingAddMutation:w[1].loading}}},75822:(e,n,t)=>{"use strict";t.d(n,{W:()=>_,e:()=>E});var r,i,o,a=t(83846),l=t(17844),s=t(93629),c=t(1889),u=t(98089),d=t(95563),p=t(45771),f=t(6680),h=t(86417),m=t(61234),g=t(22498),v=t(43974),w=t(2527),y=t(88654),b=t(35869),S=(0,g.v)(["contentBackgroundColor","footerHeight","footerOpacity"]),Y=S.cssVars,A=S.styleTokens,C=(0,p.i7)({"0%":{offsetDistance:"-20%",opacity:0},"10%":{opacity:1},"20%":{opacity:1},"30%":{offsetDistance:"120%",opacity:0},"100%":{opacity:0}}),x=(0,p.i7)({"0%":{borderColor:f.LU.blurpleDimmest,boxShadow:"0 0 4px ".concat(f.LU.blurpleDimmest)},"50%":{borderColor:f.LU.blurpleDefault,boxShadow:"0 0 4px ".concat(f.LU.blurpleDefault)},"100%":{borderColor:f.LU.blurpleDimmest,boxShadow:"0 0 4px ".concat(f.LU.blurpleDimmest)}}),k="linear-gradient(to right, transparent, black 20%, black 80%, transparent)",_=[v.wp.borderRadius(),(r={},(0,a._)(r,v.$_.prefersReducedMotion,{display:"none"}),(0,a._)(r,"position","absolute"),(0,a._)(r,"top","-1px"),(0,a._)(r,"left","-1px"),(0,a._)(r,"width","calc(100% + 2px)"),(0,a._)(r,"height","calc(100% + 2px)"),(0,a._)(r,"overflow","hidden"),(0,a._)(r,"pointerEvents","none"),(0,a._)(r,"clipPath","inset(0 round 4px)"),(0,a._)(r,"WebkitClipPath","inset(0 round 4px)"),(0,a._)(r,"@supports (offset-path: rect(0% auto 100% auto))",{"&::before":{pointerEvents:"none",content:'""',position:"absolute",left:0,top:0,height:"64px",width:"64px",offsetPath:"rect(0% auto 100% auto)",background:"radial-gradient(".concat(f.LU.blurpleStrongest,", ").concat(f.LU.blurpleDefault,", transparent)"),animation:"".concat(C," 8s linear infinite"),transform:"rotate(45deg)",transformOrigin:"center",maskImage:k,WebkitMaskImage:k}}),(0,a._)(r,"@supports not (offset-path: rect(0% auto 100% auto))",{border:"1px solid transparent",animation:"".concat(x," 3s ease-in-out infinite"),background:"none",overflow:"visible"}),r)],D=(0,m.x)({root:[v.wp.pr(32),(o={containerType:"inline-size"},(0,a._)(o,Y.footerHeight,"28px"),(0,a._)(o,Y.footerOpacity,"1"),(0,a._)(o,'+ [data-event-type*="ai"] [data-avatar]',{visibility:"hidden"}),(0,a._)(o,':has(+ [data-event-type="ai-message"], + [data-event-type="secrets"],  + [data-event-type="plan"])',(i={paddingBottom:4},(0,a._)(i,Y.footerHeight,"0px"),(0,a._)(i,Y.footerOpacity,"0"),i)),o)],avatar:[v.wp.pt(6),v.wp.position.relative],main:[v.wp.position.relative,v.wp.flex.shrink(1),v.wp.colWithGap(6)],contentWrapper:[v.wp.position.relative],contentBorder:_,content:[v.wp.borderRadius(4),v.wp.px(8),v.wp.py(6),v.wp.position.relative,{backgroundColor:A.contentBackgroundColor}],footer:[v.wp.px(8),(0,s._)((0,l._)({},function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return{transitionProperty:n.join(", "),transitionDuration:h.Ds.duration,transitionTimingFunction:h.Ds.timingFunction}}("height","opacity")),{height:A.footerHeight,opacity:A.footerOpacity})]});function E(e){var n,t=e.elevated,r=void 0===t||t,i=e.showAvatar,o=e.highlighted,l=e.children,s=e.timestamp,p=(0,d.A)();return(0,c.FD)(b.S,{css:D.root,row:!0,gap:10,"data-event-type":"ai-message",style:(n={},(0,a._)(n,Y.contentBackgroundColor,o?"color-mix(in srgb, ".concat(f.LU.blurpleDimmest," 25%, ").concat(f.LU.interactiveBackground,")"):r?f.LU.interactiveBackground:f.LU.backgroundDefault),(0,a._)(n,"paddingBottom",p?f.LU.space2:f.LU.space16),n),children:[(0,c.Y)(b.S,{css:D.avatar,"data-avatar":!0,children:(0,c.Y)(u.l,{size:22,hidden:!(void 0===i||i)})}),(0,c.FD)(b.S,{css:D.main,children:[(0,c.FD)(b.S,{css:D.contentWrapper,children:[o?(0,c.Y)(b.S,{css:D.contentBorder}):null,(0,c.Y)(w.ui,{elevated:r,css:D.content,children:l})]}),s&&!p?(0,c.Y)(b.S,{css:D.footer,"data-timestamp":!0,children:(0,c.Y)(y.Dc,{live:!0,date:s,textVariant:"small",textColor:"dimmest",textTransform:"first-letter-capitalized"})}):null]})]})}},76089:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(1889),i=t(61234),o=t(43974),a=t(35869),l=t(56185),s=(0,i.x)({root:[o.wp.coverContainer,o.wp.center]});function c(){return(0,r.Y)(a.S,{css:s.root,children:(0,r.Y)(l.A,{size:32})})}},76400:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M11.863 2.632a.75.75 0 0 1-.05.814 6.25 6.25 0 0 0 8.741 8.74.75.75 0 0 1 1.193.673A9.749 9.749 0 1 1 11.14 2.253a.75.75 0 0 1 .722.379ZM9.747 4.036a8.25 8.25 0 1 0 10.217 10.217A7.75 7.75 0 0 1 9.747 4.036Z",clipRule:"evenodd"})}))}},76828:(e,n,t)=>{"use strict";t.d(n,{w:()=>g});var r=t(17844),i=t(93629),o=t(12694),a=t(1889),l=t(21462),s=t(47993),c=t(90329),u=t(91564),d=t(90001),p=t(53447),f=t(6680),h=t(37407),m=t(50192);function g(e){var n=e.targetElement,t=e.activeStep,g=e.goto,v=e.currentStepIndex,w=e.totalSteps,y=e.done,b=e.disableAnimation,S=e.placement,Y=e.cypressCloseData,A=e.onClickOutside,C=e.innerRef,x=e.width,k=e.colorway,_=e.doneText,D=(0,o._)((0,l.useState)(null),2),E=D[0],R=D[1],I=(0,o._)((0,l.useState)(null),2),F=I[0],T=I[1],P=(0,c.E)(n,E,{placement:void 0===S?"right":S,modifiers:[{name:"arrow",options:{element:F,padding:8}},{name:"offset",options:{offset:[0,16]}},{name:"preventOverflow",options:{padding:8}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}},{name:"computeStyles",options:{adaptive:!1}}]}),L=(0,d.A)(function(){var e;null===(e=P.update)||void 0===e||e.call(P)},{type:"throttle",wait:100});(0,l.useEffect)(function(){L(n)},[n,L]),(0,l.useImperativeHandle)(C,function(){return{updateTooltip:function(){var e;null===(e=P.update)||void 0===e||e.call(P)}}});var U=(0,u.A)(function(){A&&A()},[A]);return(0,s.createPortal)((0,a.FD)("div",(0,i._)((0,r._)({ref:function(e){U.current=e,R(e)},style:P.styles.popper,css:{transition:b?"all":"all 0.5s ease-out",zIndex:p.v+1,width:null!=x?x:320}},P.attributes.popper),{children:[(0,a.Y)(m.p,{title:t.title,subtitle:t.subtitle,icon:t.icon,content:t.content,onDismiss:y,currentStepIndex:v,onCurrentStepChange:g,totalSteps:w,cypressCloseData:void 0===Y?"tour-tooltip-close-button":Y,hideCloseButton:t.hideCloseButton,hideNavigation:t.hideNavigation,colorway:k,doneText:_}),(0,a.Y)("span",{style:P.styles.arrow,css:[h.RE,{"&::after":k?{backgroundColor:f.ky[k].dimmest,border:"1px solid "+f.ky[k].dimmer}:{backgroundColor:f.LU.backgroundDefault,border:"1px solid "+f.LU.backgroundHighest}}],ref:T})]})),document.body)}},76893:(e,n,t)=>{"use strict";function r(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0===t.moveThreshold;e.preventDefault();var i={x:e.pageX,y:e.pageY},o={x:0,y:0};n.start&&n.start({mouse:i,shiftKey:e.shiftKey});var a=function(e){var a={x:e.pageX,y:e.pageY};if(o={x:a.x-i.x,y:a.y-i.y},void 0!==t.moveThreshold&&!r){if(Math.abs(o.x)<t.moveThreshold&&Math.abs(o.y)<t.moveThreshold)return;r=!0}n.move({delta:o,shiftKey:e.shiftKey,mouse:a})},l=null,s=function(e){e.preventDefault(),l&&cancelAnimationFrame(l),l=requestAnimationFrame(function(){a(e)})},c=function(){l&&cancelAnimationFrame(l),document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",c),document.removeEventListener("touchcancel",c),(void 0===t.moveThreshold||r)&&n.end&&n.end({delta:o,shiftKey:e.shiftKey})};document.addEventListener("pointermove",s),document.addEventListener("pointerup",c),document.addEventListener("touchcancel",c)}t.d(n,{j:()=>r})},76902:(e,n,t)=>{"use strict";t.d(n,{T:()=>k,O:()=>C});var r=t(17844),i=t(93629),o=t(1889),a=t(21462),l=t(70906),s=t(94668),c=t(35992),u=t(44370),d=t(12694),p=t(69338);function f(){return(0,d._)((0,a.useState)(function(){return(0,u.y$)()}),1)[0]}var h=(0,a.createContext)(null),m=function(e){return(0,p.Xr)(e,{store:function(){var e=(0,a.useContext)(h);if(!e)throw Error("Expected store in context");return e}()})},g=(0,u.eU)(-1),v=(0,u.eU)([]),w=(0,u.eU)(void 0),y=(0,u.eU)(null,function(e,n,t){var r=e(w);switch(r&&(clearTimeout(r.id),r.cb()),t){case"forward":n(g,function(n){return Math.min(e(v).length,n+1)});break;case"backward":n(g,function(e){return Math.max(0,e-1)})}var i=e(v),o=e(g);return o>=i.length?"":i[o]}),b=(0,u.eU)(null,function(e,n,t){clearTimeout(null===(r=e(w))||void 0===r?void 0:r.id);var r,i=function(){if(t.length>0){var r=!1;n(v,function(n){return(0,c.jM)(n,function(n){if(t!==n[e(g)])for(r=!0,n.push(t);n.length>20;)n.shift()})}),r&&n(g,e(v).length-1)}n(w,void 0)};n(w,{id:setTimeout(i,2e3),cb:i})}),S=t(31618);function Y(e){var n,t=m(b),o=(n=m(y),{forward:(0,l.A)(function(){return function(){return n("forward")}},[n]),backward:(0,l.A)(function(){return function(){return n("backward")}},[n])}),c=o.forward,u=o.backward,d=(0,a.useRef)(e.value);return(0,a.useEffect)(function(){e.value!==(null==d?void 0:d.current)&&(e.value&&t(e.value),d.current=e.value)},[t,e.value]),(0,i._)((0,r._)({},e),{onKeyDown:(0,l.A)(function(){return function(n){if(n.shiftKey||(0,s.T$)(n)){null===(r=e.onKeyDown)||void 0===r||r.call(e,n);return}var t,r,i=n.currentTarget,o=!!i.value.match(/\n/);if("ArrowUp"===n.key){if(o&&i.selectionStart&&i.selectionStart>0)return;e.onChange(u()),n.preventDefault(),n.stopPropagation();return}if("ArrowDown"===n.key){if(o&&i.selectionEnd&&i.selectionEnd<i.value.length)return;e.onChange(c()),n.preventDefault(),n.stopPropagation();return}null===(t=e.onKeyDown)||void 0===t||t.call(e,n)}},[u,c,e]),onChange:(0,l.A)(function(){return function(n){e.onChange(n.target.value)}},[e])})}var A=(0,a.forwardRef)(function(e,n){var t=Y(e);return(0,o.Y)(S.ov,(0,r._)({ref:n},t))}),C=(0,a.forwardRef)(function(e,n){var t=f();return(0,o.Y)(h.Provider,{value:t,children:(0,o.Y)(A,(0,r._)({ref:n},e))})}),x=(0,a.forwardRef)(function(e,n){var t=Y(e);return(0,o.Y)(S.pd,(0,r._)({ref:n},e,t))}),k=(0,a.forwardRef)(function(e,n){var t=f();return(0,o.Y)(h.Provider,{value:t,children:(0,o.Y)(x,(0,r._)({ref:n},e))})})},77167:(e,n,t)=>{"use strict";t.d(n,{Ik:()=>s,jq:()=>l,r$:()=>a});var r=t(78932),i=t(12120),o=t(94869);function a(e){return 80===e||443===e}function l(e,n){var t=new URL(e);return!n||a(n)?(t.hostname.endsWith(".localhost")?t.port="8081":t.port&&(t.port=""),t):(t.port=n.toString(),t)}function s(e){var n,t,a,s=e.container,c=e.ports,u=e.addDevToolsSuffix,d=!(t=(0,o.w)(c)).length||t.some(function(e){return 80===e.configuration.externalPort})?80:null!==(n=t[0].configuration.externalPort)&&void 0!==n?n:80,p=(0,i.A)(s),f=(0,r.g)();if(!d&&!f||!p)return null;var h=l(p,d).toString(),m=l(p+"/__replco/workspace_iframe.html",d).toString();return{iframeSrc:void 0===u||u?m:(a=new URL(h)).hostname.endsWith(".localhost")?h:(a.protocol="https:",a.toString()),presentationUrl:h,baseUrl:p}}},77739:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(12694),i=t(21462),o=t(67337);function a(){var e=(0,o.A)().dotReplit,n=(0,r._)((0,i.useState)(null),2),t=n[0],a=n[1];return(0,i.useEffect)(function(){return e.watch(function(e){var n;if(e.error)return a(null);a((null===(n=e.config.deployment)||void 0===n?void 0:n.target)||null)})},[e]),t}},77999:(e,n,t)=>{"use strict";t.d(n,{I:()=>s,f:()=>l});var r=t(12584),i=t(41114);function o(){var e=(0,r._)(['\n  fragment ReplEnvironmentTourCurrentUser on CurrentUser {\n    id\n    hasSeenProjectsTour2024: tourSeen(name: "workspace-repo-projects-tour")\n    hasSeenSidebarTour2022: tourSeen(name: "workspace-desktop-sidebar-tour")\n    hasSeenWorkspaceTour2021: tourSeen(name: "workspace-desktop-tour")\n    hasSeenWorkspaceTour2022: tourSeen(name: "workspace-desktop-new-user-tour")\n    hasSeenWorkspaceTour2024: tourSeen(name: "workspace-desktop-tour-2024")\n    timeCreated\n  }\n']);return o=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment ReplEnvironmentTourRepl on Repl {\n    id\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n        }\n      }\n    }\n    lesson {\n      id\n    }\n    project {\n      id\n    }\n    config {\n      isInPlanningPhase\n    }\n  }\n"]);return a=function(){return e},e}var l=(0,i.J1)(o()),s=(0,i.J1)(a())},78044:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(4124),i=t(21462),o=t(52097),a=t(93415),l=t(24948),s=t(49259);function c(e){var n=e.sendInput,t=e.paste,c=(0,r.useRouter)(),u=(0,a.Po)(c);(0,i.useEffect)(function(){if(u){var e=function(e,t){n(t)?(0,l.XE)(e):(0,l.Cf)(e)},r=function(e){"unknown"===e||(0,o.A)(e)},i=function(n){(0,l.V)(n,function(n){var i=n.type;switch(i){case s.tF.SHELL_INSERT_INPUT:e(n.id,n.input);break;case s.tF.SHELL_COMMAND:r(n.command);break;case s.tF.SHELL_PASTE_TEXT:t(n.text)?(0,l.XE)(n.id):(0,l.Cf)(n.id);break;default:(0,o.A)(i)}})};return window.addEventListener("message",i),function(){window.removeEventListener("message",i)}}},[u,n,t])}},78293:(e,n,t)=>{"use strict";t.d(n,{H:()=>Y,x:()=>C});var r=t(1889),i=t(21462),o=t(3402),a=t(26496),l=t(77581),s=t(80865),c=t(16902),u=t(28456),d=t(6680),p=t(61234),f=t(43974),h=t(93682),m=t(2527),g=t(40043),v=t(88654),w=t(35869),y=t(76860),b=t(81207),S=(0,p.x)({root:[f.wp.py(8),f.wp.pl(8),f.wp.pr(12),f.wp.mx(32),f.wp.mb(16),f.wp.borderRadius()],hidden:[f.wp.mx(32),f.wp.mb(16),f.wp.textAlign.center,f.wp.position.relative],hiddenText:[f.wp.backgroundColor.backgroundRoot,f.wp.px(8),f.wp.zIndex(1),{marginLeft:"auto",marginRight:"auto"}],hiddenHr:[f.wp.position.absolute,f.wp.width("100%"),f.wp.border({direction:"top",color:d.LU.outlineDimmest,style:"dashed"}),f.wp.top("50%")],icon:{paddingTop:3},body:[f.wp.flex.growAndShrink(1),f.wp.colWithGap(2),f.wp.justify.spaceBetween],stepText:[f.wp.pt(2)],footer:[f.wp.flex.wrap,f.wp.justify.spaceBetween,f.wp.align.center],timestamp:[f.wp.flex.wrap],revertControls:[f.wp.color.foregroundDimmer]}),Y=(0,i.memo)(function(e){var n=e.eventId,t=e.openPane,i=(0,a.R6)(n);return i?(0,r.Y)(C,{reverterId:i.reverterId,revertedAt:i.revertedAt,revertedCommitId:i.revertedCommitId,revertHiddenCount:i.revertHiddenCount,openPane:t}):null});function A(e){var n=e.commitId,t=e.openPane,i=(0,c.q)(),o=i.neonDatabases;return i.currentUser&&0!==o.length?(0,r.Y)(w.S,{css:S.revertControls,row:!0,gap:6,align:"center",children:(0,r.Y)(h.$n,{onClick:function(){t({type:"neon",data:{openAtTab:{type:"settings",data:{restoreToCommitId:n}}}})},iconLeft:(0,r.Y)(y.A,{}),size:"small",variant:"outlined",text:"Restore database to here"})}):null}function C(e){var n=e.reverterId,t=e.revertedAt,i=e.revertedCommitId,o=e.revertHiddenCount,a=e.openPane,c=(0,s._P)({controlName:l.g5,logFlagToAnalytics:!1}),p=(0,u.M)();return(0,r.FD)(r.FK,{children:[(0,r.FD)(w.S,{css:S.hidden,style:p?{margin:"16px 12px"}:void 0,children:[(0,r.FD)(g.EY,{css:S.hiddenText,color:"dimmest",variant:"small",children:[o," event",o>1?"s":""," hidden after rolling back"]}),(0,r.Y)(w.S,{css:S.hiddenHr})]}),(0,r.FD)(m.ui,{elevated:!0,css:S.root,row:!0,gap:8,style:p?{borderRadius:8,margin:"16px 12px"}:void 0,children:[(0,r.Y)(w.S,{css:S.icon,children:(0,r.Y)(b.A,{color:d.LU.foregroundDimmest})}),(0,r.FD)(w.S,{css:S.body,children:[(0,r.Y)(w.S,{css:S.stepText,children:(0,r.Y)(g.EY,{children:"Rollback completed"})}),(0,r.FD)(w.S,{css:S.footer,row:!0,children:[(0,r.Y)(x,{date:t,reverterId:n}),c?(0,r.Y)(A,{commitId:i,openPane:a}):null]})]})]})]})}function x(e){var n,t=e.date,i=Number(e.reverterId),a=(0,o.sx)({variables:{id:i}}).data;return(0,r.FD)(w.S,{css:S.timestamp,row:!0,gap:4,style:{color:d.LU.foregroundDefault},children:[(0,r.FD)(g.EY,{variant:"small",color:"dimmer",children:["Performed",(null==a?void 0:null===(n=a.user)||void 0===n?void 0:n.username)?" by ".concat(a.user.username):""]}),(0,r.Y)(v.Dc,{textVariant:"small",textColor:"dimmer",live:!0,date:t})]})}},78745:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M3 8.276a4.259 4.259 0 0 1 4.259-4.259h8.965a4.259 4.259 0 0 1 4.259 4.259v8.965a4.259 4.259 0 0 1-4.259 4.259H7.26A4.259 4.259 0 0 1 3 17.241V8.276Zm4.259-2.914a2.914 2.914 0 0 0-2.914 2.914v8.965a2.914 2.914 0 0 0 2.914 2.914h8.965a2.914 2.914 0 0 0 2.914-2.914V8.276a2.914 2.914 0 0 0-2.914-2.914H7.26Z",clipRule:"evenodd"}),(0,o.Y)("path",{d:"M9.948 5.057A3.057 3.057 0 0 1 13.006 2h6.436A3.057 3.057 0 0 1 22.5 5.057v6.437a3.057 3.057 0 0 1-3.058 3.058h-6.436a3.057 3.057 0 0 1-3.058-3.058V5.057Z"})]}))}},78932:(e,n,t)=>{"use strict";t.d(n,{g:()=>o});var r=t(21462),i=t(54601);function o(){var e=(0,r.useContext)(i.A);if(!e)throw Error("Expected Repl info to be in context");return"html"===e.language}},79040:(e,n,t)=>{"use strict";t.d(n,{A:()=>w});var r=t(46434),i=t(29935),o=t(12694),a=t(82643),l=t(1889),s=t(21462),c=t(31167),u=t(60990),d=t(17966),p=t(17602),f=t(61234),h=t(43974),m=t(35869),g=t(64254).hp,v=(0,f.x)({terminalWrapper:[h.wp.overflow("hidden"),{"& .xterm":[h.wp.borderRadius(0,0,4,4)]}]});function w(e){var n,t=e.processId,f=e.openPane,h=e.maxHeight,w=e.interactive,y=void 0!==w&&w,b=(0,c.T)(),S=(0,s.useId)(),Y=(0,p.V)(),A=(0,d.Ui)({maxHeight:h,openPane:f}),C=A.visibleHeight,x=A.bufferHeight,k=A.wrapperResizeRef,_=A.xterm,D=A.xtermRef,E=(0,o._)((0,s.useState)(null),2),R=E[0],I=E[1],F=(0,s.useCallback)(function(e){return I(function(){return e}),function(){}},[]);return(0,u.b)((n=(0,i._)(function(e,n){var o,l,s,c,u,d,p,f,h,m,v,w,Y,A;return(0,a.YH)(this,function(C){switch(C.label){case 0:var x;if(o=n.signal,!b||!R||!_)return[2];s=(l=e.shellExec.connect.stream({id:t,userId:b,processViewId:S},{signal:o})).resReadable,c=l.reqWritable,u=function(e){y&&c.write({$kind:"stdin",stdin:new Uint8Array(g.from(e))})},d=_.onResize((x=(0,i._)(function(n){return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,e.shellExec.resize.rpc({id:t,userId:b,processViewId:S,size:n})];case 1:return r.sent(),[2]}})}),function(e){return x.apply(this,arguments)})),p=_.onData(u),f=!1,h=!1,C.label=1;case 1:C.trys.push([1,6,7,12]),v=(0,r._)(s),C.label=2;case 2:return[4,v.next()];case 3:if(!(f=!(w=C.sent()).done))return[3,5];if(!(Y=w.value).ok){if("UNEXPECTED_DISCONNECT"===Y.payload.code||"CANCEL"===Y.payload.code||"NO_PROCESS_MATCHING_ID"===Y.payload.code||"PROCESS_IS_NOT_RUNNING"===Y.payload.code)return[3,5];throw Error("[".concat(Y.payload.code,"]: ").concat(Y.payload.message))}"output"===Y.payload.$kind&&R(Y.payload.output),C.label=4;case 4:return f=!1,[3,2];case 5:return[3,12];case 6:return A=C.sent(),h=!0,m=A,[3,12];case 7:if(C.trys.push([7,,10,11]),!(f&&null!=v.return))return[3,9];return[4,v.return()];case 8:C.sent(),C.label=9;case 9:return[3,11];case 10:if(h)throw m;return[7];case 11:return[7];case 12:return[2,function(){d.dispose(),p.dispose()}]}})}),function(e,t){return n.apply(this,arguments)}),[b,y,R,t,S,_]),(0,l.Y)(m.S,{css:v.terminalWrapper,style:{height:C,background:null==Y?void 0:Y.background},children:(0,l.Y)(d._x,{xterm:_,wrapperResizeRef:k,bufferHeight:x,setOnMessage:F,children:(0,l.Y)(d.DJ,{xtermRef:D,visibleHeight:C,maxHeight:h})})})}},79071:(e,n,t)=>{"use strict";t.d(n,{M:()=>l,r:()=>s});var r=t(86105),i=t(21462),o=t(59147),a=t(63892),l=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];(0,o.S)(function(){a.u4.apply(void 0,(0,r._)(n))})},s=function(e,n,t,r){var o=(0,i.useRef)(!1);(0,i.useEffect)(function(){!o.current&&t()&&((0,a.u4)(e,n),o.current=!0)},r)}},79183:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(16907),i=t(12120),o=t(67337);function a(){var e=(0,o.A)().container,n=(0,r.A)(),t=(0,i.A)(e,{fallbackToReplCo:!1});if(!t)return null;var a=new URL(t).host,l=a.indexOf(":"),s="22";return -1!==l&&(a=a.substring(0,l),s="2022"),{sshUser:n,sshHostname:a,sshPort:s}}},79626:(e,n,t)=>{"use strict";t.d(n,{B:()=>i,q:()=>r});var r={findOrCreateFile:3,searchFileContents:2,fork:.5,createNewRepl:.5,askAi:.7,codeSearch:.5,myRepls:.5,settings:.5},i={files:.98,settings:.9,toolDescription:.8,askAi:.7,codeSearch:.5,fileContentsSearch:.4}},79768:(e,n,t)=>{"use strict";t.d(n,{A:()=>u,o:()=>c});var r=t(12694),i=t(21462),o=t(54558),a=t(67668),l=t(80865),s=t(87208),c=function(){var e=(0,l._P)({controlName:"flag-draft-buffers"}),n=(0,s.UI)(),t=(0,i.useRef)(!1);return(0,i.useEffect)(function(){t.current=n||!1===e},[n,e]),t};let u=function(e,n){var t=(0,s.UI)(),c=(0,r._)((0,i.useState)(!1),2),u=c[0],d=c[1],p=(0,l._P)({controlName:"flag-draft-buffers"});return(0,i.useEffect)(function(){if(!n||!(0,a.m6)(n)||!p||(0,o.jX)((0,o.mc)(n))){d(!1);return}d(!1===e.isFileOrDirSaved(n));var t=e.watchTextFile(n,{onFileSavedChanged:function(e){d(!e)}});return function(){t()}},[e,n,p]),p&&null!==n&&!1===t&&u}},79812:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14A1.25 1.25 0 0 0 5 20.25h1.25V13a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 .75.75v7.25H19A1.25 1.25 0 0 0 20.25 19V8.31l-2.5-2.5V8a.75.75 0 0 1-.75.75H7A.75.75 0 0 1 6.25 8V3.75H5Zm0-1.5A2.75 2.75 0 0 0 2.25 5v14A2.75 2.75 0 0 0 5 21.75h14A2.75 2.75 0 0 0 21.75 19V8a.75.75 0 0 0-.22-.53l-5-5a.75.75 0 0 0-.53-.22H5Zm2.75 1.5v3.5h8.5V4.31l-.56-.56H7.75Zm8.5 16.5v-6.5h-8.5v6.5h8.5Z",clipRule:"evenodd"})}))}},80418:(e,n,t)=>{"use strict";t.d(n,{Nf:()=>l,X$:()=>c,zg:()=>s});var r=t(21462),i=t(44370),o=t(99667),a=(0,i.eU)(!1);function l(){return(0,o.h)(a)}function s(){var e=(0,o.ob)(a);return(0,r.useCallback)(function(){return e(!0)},[e])}function c(e){var n=(0,o.ob)(a),t=(0,r.useRef)(!1);(0,r.useEffect)(function(){!t.current&&(t.current=!0,n(e))},[n,e])}},80469:(e,n,t)=>{"use strict";t.d(n,{W1:()=>Y,mJ:()=>S});var r=t(12694),i=t(1889),o=t(21462),a=t(72004),l=t(26496),s=t(68209),c=t(11438),u=t(80865),d=t(4631),p=t(81531),f=t(6659),h=t(60128),m=t(89358),g=t(82745),v=t(53046),w=t(35869),y=t(47554),b=t.n(y);function S(){return{hasFlagAgentDebugInfoButton:(0,u._P)({controlName:"flag-agent-debug-info-button"}),hasFlagAgentVisualEditorButton:(0,u._P)({controlName:"flag-agent-visual-editor-button"}),hasAgentDeepThinkingFlag:(0,u._P)({controlName:"flag-machine-meditation"})}}function Y(e){var n=e.disabled,t=e.loading,u=e.sessionId,v=e.sendMessage,y=e.inputRef,Y=e.shouldAutoscrollRef,C=e.waitingOnUserInput,x=e.feedbackButton,k=e.isSubmitDisabled,_=e.submitDisabledReason,D=e.onStatusBarHeightChange,E=(0,l.JB)(u),R=S(),I=R.hasFlagAgentDebugInfoButton,F=R.hasFlagAgentVisualEditorButton,T=R.hasAgentDeepThinkingFlag,P=(0,c.A)(E,1e3),L=(0,p.$)({sessionId:u,sendMessage:v,shouldAutoscrollRef:Y}),U=L.uploadFilesHandler,N=L.onSubmit,O=(0,l.NC)(),M=(0,s.J2)(O.sessions.agent),B=(0,s.Rj)(function(){return null==M?void 0:M.reduce(A,100)},[M]),H=(0,h.z)({type:"agent"}),z=(0,r._)((0,o.useState)(void 0),2),W=z[0],G=z[1];(0,o.useEffect)(function(){var e=void 0;switch(null==P?void 0:P.eventType){case"nextStepRequest":e="Or suggest another idea…";break;case"databaseNudge":e="Or continue working without a database…"}G(e)},[P]);var V=P?(0,i.Y)(m.y,{event:P,onSuggestionsToggle:function(){G(void 0)},disableFeatureSelect:k}):void 0;return(0,i.FD)(w.S,{clsx:b().root,innerRef:H,children:[u?(0,i.Y)(g.eA,{sessionId:u,inProgressEventId:B,waitingOnUserInput:C,onHeightChange:D}):null,(0,i.Y)(d.A,{header:V,placeholderText:W,sessionId:null!=u?u:void 0,persistenceKey:"agent-mode-input-".concat(u),status:t?"loading":"composing",onSubmit:N,inputRef:y,uploadFiles:U,disabled:n,isSubmitDisabled:k,submitDisabledReason:_,debugButton:I&&u?(0,i.Y)(f.A,{sessionId:u,sessionType:a.dF3.AGENT_SESSION}):null,feedbackButton:n?null:x,showDeepThinkingControl:T,showVisualSelector:F})]})}var A={direction:"reverse",state:{eventId:null},map:function(e){return e.eventId},reducer:function(e,n){if((0,v.F)(e)&&e.state===a.qOk.IN_PROGRESS)return n.eventId=e.id,!1}}},80525:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7.24 3.25h9.52a2.751 2.751 0 0 1 2.462 1.526l3.449 6.888a.75.75 0 0 1 .079.336v6A2.75 2.75 0 0 1 20 20.75H4A2.75 2.75 0 0 1 1.25 18v-6a.75.75 0 0 1 .08-.336l3.448-6.888A2.75 2.75 0 0 1 7.24 3.25Zm0 1.5a1.25 1.25 0 0 0-1.118.694l-.001.002-2.907 5.804H8a.75.75 0 0 1 .624.334l1.777 2.666H13.6l1.777-2.666A.75.75 0 0 1 16 11.25h4.786l-2.907-5.804v-.002a1.25 1.25 0 0 0-1.119-.694m4.49 8h-4.849l-1.777 2.666a.75.75 0 0 1-.624.334h-4a.75.75 0 0 1-.624-.334L7.599 12.75H2.75V18A1.25 1.25 0 0 0 4 19.25h16A1.25 1.25 0 0 0 21.25 18v-5.25Zm-4.49-8H7.24h9.52Z",clipRule:"evenodd"})}))}},80555:e=>{e.exports={root:"StatusBar_root__VAd65",inner:"StatusBar_inner___uizE",surface:"StatusBar_surface__n_ES9",text:"StatusBar_text__WBKUG"}},80703:(e,n,t)=>{"use strict";t.d(n,{Jn:()=>a.Jn,LH:()=>l.LH,SJ:()=>a.SJ,_y:()=>l._y,jM:()=>s});var r=t(1889),i=t(21462),o=t(95758),a=t(75978),l=t(30778);function s(e){var n=(0,a.PY)(e);return(0,r.FD)(a.J_.Provider,{value:n,children:[e.children,(0,r.Y)(c,{})]})}function c(){var e=(0,a.bU)(),n=(0,i.useRef)(null);return(0,i.useEffect)(function(){var t=function(t){var r=(0,o.te)(t);if(r){var i=r;n.current&&(i=(0,o.Y)(n.current,r));var l=e(i);switch(l.kind){case a.VO.NoMatch:n.current=null;break;case a.VO.WaitingForChord:n.current=l.key,t.preventDefault();break;case a.VO.MatchFound:n.current=null;var s=!0,c=!1,u=void 0;try{for(var d,p=l.matches[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var f=d.value,h=f.run,m=f.bubble,g=void 0===m||m;if(!1!==h()&&(t.preventDefault(),!g))break}}catch(e){c=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw u}}}}};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}},[e]),null}},80970:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query ThreadReplCollaborators($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on User {\n            id\n            username\n            image\n            fullName\n          }\n          ... on Team {\n            id\n            username\n            image\n          }\n        }\n        permissions {\n          id\n          user {\n            id\n            username\n            image\n            fullName\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l()),u=t(16907);function d(){var e=(l={variables:{replId:(0,u.A)()}},d=(0,r._)({},s,l),a.I(c,d)).data;if((null==e?void 0:e.repl.__typename)!=="Repl")return[];var n=[];(null===(p=e.repl.owner)||void 0===p?void 0:p.username)&&"User"===e.repl.owner.__typename&&n.push(e.repl.owner);var t=!0,i=!1,o=void 0;try{for(var l,d,p,f,h=e.repl.permissions[Symbol.iterator]();!(t=(f=h.next()).done);t=!0){var m,g=f.value;(null===(m=g.user)||void 0===m?void 0:m.username)&&n.push(g.user)}}catch(e){i=!0,o=e}finally{try{t||null==h.return||h.return()}finally{if(i)throw o}}return n}},81531:(e,n,t)=>{"use strict";t.d(n,{$:()=>m,o:()=>g});var r=t(29935),i=t(82643),o=t(21462),a=t(72004),l=t(26496),s=t(54086),c=t(67337),u=t(95120),d=t(12694),p=t(1566),f=t(73978),h=t(33054);function m(e){var n,t=e.sessionId,r=e.sendMessage,i=e.shouldAutoscrollRef;(0,l.Ih)(null!=t?t:null);var s=(0,f.Ay)(),c=(n=(0,p.Hw)(),(0,o.useCallback)(function(){var e,t=n(function(e){var n=(0,d._)(e,2);return"agentProgress"===(n[0],n[1]).type});if((null==t?void 0:null===(e=t.bindings)||void 0===e?void 0:e.type)!=="agentProgress")return!1;t.bindings.autoScroll()},[n])),u=(0,h.Zo)(),m=u.toggleVisualEditor,v=u.element,w=(0,o.useCallback)(function(e,n,o,l){i.current=!0,c();var u=n.map(function(e){return{path:e.path,mimeType:e.file.type}});r({model:a.e3q.ADVANCED,message:e,uploadedFiles:u,attachedUrls:o,intent:a.qRv.AGENT,kind:"message",enableDeepThinking:l,webviewTargetedElement:null!=v?v:void 0},{newSessionType:a.dF3.AGENT_SESSION}),s({action:"user_message_sent",messageText:e,sessionId:t||void 0}),v&&m()},[t,r,c,s,i,v,m]);return{uploadFilesHandler:g(),onSubmit:w}}function g(){var e,n=(0,c.A)().fs;return(0,o.useCallback)((e=(0,r._)(function(e){var t,r;return(0,i.YH)(this,function(i){switch(i.label){case 0:return t=e.files,r=e.onError,[4,(0,s.Zn)({parentPath:u.Ls,files:t,fs:n,overwrite:!0,onError:function(e){return r(e.error)}})];case 1:return i.sent(),[2]}})}),function(n){return e.apply(this,arguments)}),[n])}},81582:(e,n,t)=>{"use strict";t.d(n,{P:()=>w});var r=t(12694),i=t(1889),o=t(21462),a=t(44249),l=t(22200),s=t(88390),c=t(67337),u=t(61234),d=t(43974),p=t(93682),f=t(44885),h=t(40043),m=t(35869),g=(0,u.x)({splitContainer:[d.wp.mt(8)],text:[d.wp.mt(8)]}),v=function(){var e=(0,r._)((0,o.useState)(navigator.onLine),2),n=e[0],t=e[1];return(0,o.useEffect)(function(){var e=function(){t(navigator.onLine)};return window.addEventListener("online",e),window.addEventListener("offline",e),function(){window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),n},w=function(){var e=(0,c.A)().container,n=(0,r._)((0,o.useState)(!1),2),t=n[0],u=n[1],d=(0,o.useRef)(!1),w=(0,s.A)(e),y=(0,o.useMemo)(function(){return w===a.KN.CONNECTED},[w]),b=(0,l.T)(),S=v(),Y=(0,o.useCallback)(function(){u(!1)},[]),A=(0,o.useCallback)(function(){location.reload()},[]);return(0,o.useEffect)(function(){if(!d.current&&!y&&b&&S){var e=setTimeout(function(){u(!0),d.current=!0},6e4);return function(){return clearTimeout(e)}}},[y,b,S]),(0,i.Y)(f.a,{isOpen:t,onRequestClose:Y,maxWidth:360,centered:!0,children:(0,i.FD)(m.S,{gap:8,children:[(0,i.Y)(h.Y9,{level:2,variant:"subheadBig",children:"You are disconnected"}),(0,i.Y)(h.EY,{css:g.text,children:"Your connection to the server has been lost and reconnection attempts have failed. Please refresh the page to continue."}),(0,i.FD)(m.S,{css:g.splitContainer,row:!0,gap:8,justify:"space-between",children:[(0,i.Y)(p.$n,{text:"Cancel",onClick:Y}),(0,i.Y)(m.S,{row:!0,gap:8,children:(0,i.Y)(p.$n,{text:"Refresh",onClick:A,colorway:"blue"})})]})]})})}},81920:(e,n,t)=>{"use strict";t.d(n,{A:()=>m});var r=t(21462),i=t(17844),o=t(12584),a=t(41114),l=t(68197);function s(){var e=(0,o._)(["\n  subscription WorkspaceUserCanWrite($replId: String!) {\n    currentUserCanWrite(replId: $replId)\n  }\n"]);return s=function(){return e},e}var c={},u=(0,a.J1)(s()),d=t(11597),p=t(26561),f=t(16907),h=t(67337);function m(){var e,n,t=(0,h.A)().fs,o=(e={variables:{replId:(0,f.A)()}},n=(0,i._)({},c,e),l.R(u,n)).data,a=(null==o?void 0:o.currentUserCanWrite)===!1;(0,r.useEffect)(function(){a&&window.location.reload()},[a]);var s=(0,r.useCallback)(function(){return a||t.getStatus()===d.sn.Clean?p.Nn.NavigateAnyway:p.Nn.PromptUser},[t,a]);(0,p.Ay)({shouldPreventNavCb:s})}},81975:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M1.25 12C1.25 6.063 6.063 1.25 12 1.25S22.75 6.063 22.75 12 17.937 22.75 12 22.75 1.25 17.937 1.25 12Z",clipRule:"evenodd"})}))}},82142:(e,n,t)=>{"use strict";t.d(n,{F:()=>c});var r=t(12694),i=t(1889),o=t(21462),a=t(44370),l=t(29824),s=t(91331);function c(e){var n=(0,r._)((0,o.useState)(function(){var n,t,r,i,o,s,c;return t=(n={fs:e.fs,container:e.container,dotReplit:e.dotReplit,ports:e.ports,secrets:e.secrets}).container,r=n.fs,i=n.dotReplit,o=n.ports,s=n.secrets,(c=(0,a.y$)()).set(l.xs,t),c.set(l.fg,r),c.set(l.Vc,i),c.set(l.kK,o),c.set(l.$s,s),c}),1)[0];return(0,i.FD)(s.rF.Provider,{value:n,children:[e.children,(0,i.Y)(l.JH,{replId:e.replId,orgId:e.orgId})]})}},82745:(e,n,t)=>{"use strict";t.d(n,{AN:()=>B,JH:()=>W,eA:()=>U});var r=t(83846),i=t(12694),o=t(1889),a=t(21462),l=t(72004),s=t(26496),c=t(88184),u=t(90001),d=t(28256),p=t(53046),f=t(27208),h=t(73978),m=t(98089),g=t(28456),v=t(6680),w=t(86417),y=t(61234),b=t(22498),S=t(43974),Y=t(93682),A=t(40043),C=t(88654),x=t(35869),k=t(20627),_=t(92647),D=t(9885),E=t(32633),R=["Thinking","Reviewing your message","Considering options","Determining next steps"],I=(0,b.v)(["backgroundColor","color","transform"]),F=I.cssVars,T=I.styleTokens,P=(0,y.x)({root:[S.wp.px(16),S.wp.position.absolute,{left:0,width:"100%",top:0,height:0}],content:[S.wp.pl(6),S.wp.borderRadius(4,4,0,0),S.wp.rowWithGap(6),S.wp.align.center,S.wp.minHeight(28),{transform:T.transform,backgroundColor:T.backgroundColor,color:T.color,transitionProperty:"background-color, color, transform",transitionDuration:w.Ds.duration,transitionTimingFunction:w.Ds.timingFunction,"> span":[S.wp.flex.growAndShrink(1)],"> button":{marginLeft:"auto",borderTopLeftRadius:0,borderBottomLeftRadius:0,borderBottomRightRadius:0}}],rateLimited:[S.wp.minHeight(28),S.wp.flex.growAndShrink(1)],rateLimitedContent:[S.wp.flex.growAndShrink(1)],rateLimitedResetText:{"> span":[S.wp.py(4)],span:[{display:"inline",lineHeight:1},S.wp.flex.growAndShrink(1)]}});function L(e){return e?(0,p.F)(e):null}function U(e){var n=e.sessionId,t=e.inProgressEventId,r=e.waitingOnUserInput,l=e.onHeightChange,c=(0,i._)((0,a.useState)(!1),2),u=c[0],d=c[1],p=(0,s.dt)(n),f=(0,s.D2)();r&&(p={state:"waitingOnUserResponse"});var m=(0,s.Al)(t||null,L),g=(0,s.E8)(n);return(0,a.useEffect)(function(){if((null==p?void 0:p.state)==="running"&&!t){var e=setTimeout(function(){(0,h.pI)({action:"thinking_loop",sessionId:n}),g()},3e4);return function(){clearTimeout(e)}}},[p,t,n,g]),(0,a.useEffect)(function(){d(!1)},[p]),u&&(p=null),(0,o.Y)(N,{sessionId:n,inProgressEventSummary:m,updateAgentRunState:f,status:p,onHeightChange:l})}function N(e){var n=e.status,t=e.sessionId,i=e.inProgressEventSummary,a=e.hidePauseButton,s=e.updateAgentRunState,c=e.onHeightChange,d=(0,u.A)(function(e){e.heightChanged&&(null==c||c(e.height))});return(0,o.Y)(x.S,{css:P.root,style:function(e){if(null===e)return n={},(0,r._)(n,F.backgroundColor,"transparent"),(0,r._)(n,F.color,"transparent"),(0,r._)(n,F.transform,"translateY(-100%)"),n;var n,t,i,o,a,l,s,c,u="translateY(-100%)";if("disconnected"===e.state)return t={},(0,r._)(t,F.backgroundColor,v.LU.yellowStronger),(0,r._)(t,F.color,v.LU.backgroundRoot),(0,r._)(t,F.transform,u),t;if("running"===e.state)return i={},(0,r._)(i,F.backgroundColor,v.LU.blurpleDimmest),(0,r._)(i,F.color,v.LU.foregroundDefault),(0,r._)(i,F.transform,u),i;if("pausing"===e.state)return o={},(0,r._)(o,F.backgroundColor,v.LU.greyDimmer),(0,r._)(o,F.color,v.LU.foregroundDefault),(0,r._)(o,F.transform,u),o;if("waitingOnUserResponse"===e.state)return a={},(0,r._)(a,F.backgroundColor,v.LU.backgroundHigher),(0,r._)(a,F.color,v.LU.foregroundDefault),(0,r._)(a,F.transform,u),a;var d=e.transitionReason;switch(null==d?void 0:d.$kind){case"stepLimitExceeded":case"error":case"authorizationFailed":return l={},(0,r._)(l,F.backgroundColor,v.LU.yellowStronger),(0,r._)(l,F.color,v.LU.backgroundRoot),(0,r._)(l,F.transform,u),l;case"userPaused":return s={},(0,r._)(s,F.backgroundColor,v.LU.greyDimmest),(0,r._)(s,F.color,v.LU.foregroundDefault),(0,r._)(s,F.transform,u),s;default:return c={},(0,r._)(c,F.backgroundColor,v.LU.backgroundHigher),(0,r._)(c,F.color,v.LU.foregroundDefault),(0,r._)(c,F.transform,u),c}}(n),children:(0,o.FD)(x.S,{css:P.content,innerRef:d,children:[(null==n?void 0:n.state)==="disconnected"?(0,o.Y)(O,{}):null,(null==n?void 0:n.state)==="running"?(0,o.Y)(B,{inProgressEventSummary:i,onPause:function(){return s({sessionId:t,runState:l.g32.AGENT_STATE_PAUSED})},hidePauseButton:void 0!==a&&a}):null,(null==n?void 0:n.state)==="pausing"?(0,o.Y)(H,{}):null,(null==n?void 0:n.state)==="paused"?(0,o.Y)(z,{sessionId:t,transitionReason:null==n?void 0:n.transitionReason,onResume:function(){return s({sessionId:t,runState:l.g32.AGENT_STATE_RUNNING})}}):null,(null==n?void 0:n.state)==="waitingOnUserResponse"?(0,o.Y)(M,{}):null]})})}function O(){return(0,o.FD)(o.FK,{children:[(0,o.Y)(E.A,{}),(0,o.Y)(A.EY,{children:"".concat((0,s.Nn)({capitalizeFirstChar:!0})," lost connection. Try refreshing the page.")})]})}function M(){return(0,o.FD)(o.FK,{children:[(0,o.Y)(_.A,{}),(0,o.FD)(A.EY,{multiline:!1,color:"dimmer",children:["Paused"," ",(0,o.FD)(A.EY,{color:"dimmest",children:["(",s.g$," is waiting for your response)"]})]})]})}function B(e){var n=e.inProgressEventSummary,t=e.onPause,r=e.hidePauseButton,l=(0,i._)((0,a.useState)(R[0]),2),s=l[0],c=l[1];(0,a.useEffect)(function(){if(n){c(R[0]);return}var e=null;return function n(){e=setTimeout(function(){c(function(e){var n=(R.indexOf(e)+1)%R.length;return R[n]}),n()},5e3)}(),function(){e&&clearTimeout(e)}},[n]);var u=(0,g.M)();return(0,o.FD)(o.FK,{children:[(0,o.Y)(m.l,{loading:!0,size:16}),(0,o.Y)(x.S,{tag:"span",css:d.Vb,style:u?{paddingLeft:6}:void 0,children:n?(0,o.Y)(f.B,{summary:n}):(0,o.FD)(A.EY,{multiline:!1,children:[s,"..."]})}),void 0!==r&&r?null:(0,o.Y)(Y.$n,{iconLeft:(0,o.Y)(_.A,{}),size:"small",variant:"nofill",colorway:"blurple",text:"Pause",onClick:t})]})}function H(){return(0,o.FD)(o.FK,{children:[(0,o.Y)(_.A,{}),(0,o.FD)(A.EY,{multiline:!1,color:"dimmer",children:["Pausing… ",(0,o.Y)(A.EY,{color:"dimmest",children:" (Waiting for action to complete)"})]})]})}function z(e){var n=e.sessionId,t=e.transitionReason,r=e.onResume;switch(null==t?void 0:t.$kind){case"stepLimitExceeded":return(0,o.FD)(o.FK,{children:[(0,o.Y)(E.A,{}),(0,o.FD)(A.EY,{children:["Reached maximum step limit (",t.stepLimitExceeded.maxSteps," steps)"]})]});case"rateLimited":return(0,o.Y)(W,{timeWhenReset:t.rateLimited.timeWhenReset});case"authorizationFailed":if(t.authorizationFailed.code===l.HkE.INSUFFICIENT_BUDGET)return(0,o.FD)(o.FK,{children:[(0,o.Y)(E.A,{}),(0,o.Y)(A.EY,{children:"Budget exceeded"})]});return(0,o.FD)(o.FK,{children:[(0,o.Y)(E.A,{}),(0,o.Y)(A.EY,{children:t.authorizationFailed.message})]});case"error":return(0,o.FD)(o.FK,{children:[(0,o.Y)(E.A,{}),(0,o.FD)(A.EY,{children:[(0,s.Nn)({capitalizeFirstChar:!0})," encountered an error."," "]}),(0,o.Y)(Y.$n,{text:"Try again",colorway:"yellow",variant:"nofill",size:"small",onClick:function(){r(),(0,h.pI)({action:"attempted_try_again",sessionId:n})}})]});default:return(0,o.FD)(o.FK,{children:[(0,o.Y)(_.A,{}),(0,o.FD)(A.EY,{multiline:!1,color:"dimmer",children:[(0,s.Nn)({capitalizeFirstChar:!0})," is paused"]}),(0,o.Y)(Y.$n,{iconLeft:(0,o.Y)(D.A,{}),size:"small",variant:"nofill",colorway:"grey",text:"Resume",onClick:r})]})}}function W(e){var n=e.timeWhenReset;return(0,o.FD)(x.S,{css:P.rateLimited,row:!0,gap:6,align:"center",children:[(0,o.Y)(k.A,{}),(0,o.Y)(x.S,{css:P.rateLimitedContent,children:(0,o.FD)(A.EY,{children:["You've hit the usage limit for"," ",(0,s.Nn)({variant:"casual",capitalizeFirstChar:!1}),"."," ",(0,o.FD)(A.EY,{css:P.rateLimitedResetText,children:["Usage will reset"," ",(0,o.Y)(C.Dc,{date:n,dateFormat:"relative",live:!0}),"."," ",(0,o.FD)("a",{target:"_blank",href:c.ik.AGENT,children:["Learn more"," "]})]})]})})]})}},83010:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(21462),i=t(80481),o=t(16907),a=t(63892),l=t(67337),s=new Set([3e3,3001,3002,3003,3306,4e3,4200,5e3,5432,5173,6e3,6800,7e3,7001,8e3,8008,8080,8081,8888,9e3,9001,1e4,25565,25577,8887,27017,27018]);function c(){var e=(0,l.A)().container,n=(0,i.gc)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,t=(0,o.A)();(0,r.useEffect)(function(){return e.onPortOpened(function(e){var r=e.port,i=e.address,o=e.isForwarded,l=e.isVnc,c=e.externalPort;if(o){(0,a.u4)(a.AZ.WS_PORT_OPENED,{type:l?"vnc":"webview",replId:t,port:r,externalPort:c,address:i,webviewAutoOpenOnPortOpened:n});return}(0,a.u4)(a.AZ.WS_UNFORWARDED_PORT_OPENED,{port:r,isCommon:s.has(r),address:i,type:l?"vnc":"webview",replId:t,externalPort:c})})},[e,t,n])}},83353:(e,n,t)=>{"use strict";t.d(n,{ZA:()=>v,Zd:()=>b,gH:()=>y,kg:()=>_,s$:()=>S,th:()=>A});var r=t(29935),i=t(17844),o=t(93629),a=t(86105),l=t(82643),s=t(90629),c=t(23099),u=t.n(c),d=t(35992),p=t(96907),f=t.n(p),h=t(52097),m=t(88079),g=t(82891),v=new Set([3e3,3001,3002,3003,4200,5e3,5173,6e3,6800,80,8e3,8008,8080,8081,8099,9e3]);function w(e,n){return new Set(Array.from(e).filter(function(e){return!n.has(e)}))}var y=function(e){return e.FORWARDED="FORWARDED",e.INTERNAL_ONLY="INTERNAL_ONLY",e.NO_MORE_EXTERNAL_PORTS_AVAILABLE="NO_MORE_EXTERNAL_PORTS_AVAILABLE",e.MISCONFIGURED="MISCONFIGURED",e.CONFIG_MISSING="CONFIG_MISSING",e}({});function b(e){var n=e.type;switch(n){case"FORWARDED":case"MISCONFIGURED":return e.externalPort;case"INTERNAL_ONLY":case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return;default:(0,h.A)(n)}}function S(e){var n;return null!==(n=e.isLocalhost)&&void 0!==n&&n}function Y(e){return e===g.wF}function A(e){return e===g.no}function C(e){return Y(e.localPort)}function x(e){return e?w(v,new Set(e.map(function(e){return b(e.configuration)}))):v}function k(e){var n,t=e.localPort,r=x(e.portsState.current);if(0!==r.size){var i=r.has(80),o=r.has(t);return i?80:o?t:Array.from(r).sort()[0]}}function _(e){var n=e.container,t=e.dotReplit,c=(0,m.F)(null),p=(0,m.F)(!1),g=(0,m.F)("only-global"),v=f()((0,r._)(function(){var e;return(0,l.YH)(this,function(n){switch(n.label){case 0:if(!c.current)return[2];return e=c.current.filter(function(e){return!e.isTemporary}).map(function(e){var n=e.configuration.type;switch(n){case"FORWARDED":case"MISCONFIGURED":return(0,i._)({localPort:e.configuration.localPort,externalPort:e.configuration.externalPort},S(e.configuration)?{exposeLocalhost:!0}:void 0);case"INTERNAL_ONLY":return{localPort:e.configuration.localPort};case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return!1;default:(0,h.A)(n)}}).filter(Boolean).sort(function(e,n){return e.localPort-n.localPort}),[4,t.updateDotReplit([{op:"add",path:"ports",value:JSON.stringify(e)}])];case 1:return n.sent(),[2]}})}),1e3,{leading:!1,trailing:!0});function y(){p.set(!0),v()}return function(e){var n=e.container,t=e.dotReplit,r=e.portsState,l=e.writeDotReplitPortsConfig,c=e.isThisServiceUpdatingDotReplit,p=e.forwardPortsAutomatically;function f(e){return e.sort(function(e,n){var t,r;return(null!==(t=e.configuration.localPort)&&void 0!==t?t:0)-(null!==(r=n.configuration.localPort)&&void 0!==r?r:0)})}var h=[];function m(e){try{var n=function(e){var n=e.portsState,t=e.portInfo,r=e.forwardPortsAutomatically;if(null===n.current)throw Error("processOpenedPort can only assign ports if dotReplit config was read");var a={pid:t.pid,cgroup:t.cgroup,address:t.address,cmdline:t.cmdline},l="127.0.0.1"===a.address,s=Y(t.port),c=A(t.port),u=n.current.find(function(e){return e.configuration.localPort===t.port});if(void 0!==u)return{isOpen:!0,isTemporary:!!s||u.isTemporary,processInfo:a,configuration:(0,o._)((0,i._)({},u.configuration),{isLocalhost:l})};if(c)return{isOpen:!0,isTemporary:!0,processInfo:a,configuration:{type:"FORWARDED",localPort:t.port,externalPort:t.port,isLocalhost:l,isVnc:s}};if("none"===r.current||"only-global"===r.current&&l||s)return{isOpen:!0,isTemporary:!0,processInfo:a,configuration:{type:"INTERNAL_ONLY",localPort:t.port,isLocalhost:l,isVnc:s}};var d=k({localPort:t.port,portsState:n});return void 0===d?{isOpen:!0,isTemporary:!1,processInfo:a,configuration:{type:"NO_MORE_EXTERNAL_PORTS_AVAILABLE",localPort:t.port,isLocalhost:l,isVnc:s}}:{isOpen:!0,isTemporary:!1,processInfo:a,configuration:{type:"FORWARDED",localPort:t.port,externalPort:d,isLocalhost:l,isVnc:s}}}({portsState:r,portInfo:e,forwardPortsAutomatically:p}),t=!1;r.update(function(r){if(!r)throw Error("processOpenedPort can only execute if we red .replit first");return(0,d.jM)(r,function(i){var o=i.findIndex(function(n){return n.configuration.localPort===e.port});return -1===o?(o=r.length,t=!0):u()(r[o].configuration,n.configuration)||(t=!0),i[o]=n,f(i)})}),t&&l()}catch(e){throw s.v4(function(n){n.setTag("service","ports"),s.Cp(e)}),e}}function g(e){try{var n=!1;r.update(function(t){if(!t)throw Error("onPortClosed can only execute if we red .replit first");return(0,d.jM)(t,function(t){var r,i=t.findIndex(function(n){return n.configuration.localPort===e.port});if(-1!==i){var o=t[i];o.isTemporary||(r=o.configuration.localPort,32768<=r&&r<=60999)?(t.splice(i,1),n=!0):o.isOpen=!1}})}),n&&l()}catch(e){throw s.v4(function(n){n.setTag("service","ports"),s.Cp(e)}),e}}n.onPortOpened(function(e){null===r.current?h.push({type:"portOpen",portInfo:e}):m(e)}),n.onPortClosed(function(e){null===r.current?h.push({type:"portClose",portInfo:e}):g(e)}),t.watch(function(e){var n,t=e.config,l=null!==(n=null==t?void 0:t.ports)&&void 0!==n?n:[];if(!0===c.current){var s=r.current;if(!s||l.length!==s.length)return;l.every(function(e,n){var t,r=s[n];return e.localPort===r.configuration.localPort&&e.externalPort===(null!==(t=b(r.configuration))&&void 0!==t?t:0)})&&c.set(!1);return}r.update(function(e){e||(e=[]);var n=new Set(l.map(function(e){return e.localPort}).filter(function(e){return null!=e})),t=new Set(e.map(function(e){return e.configuration.localPort})),r=new Set(e.filter(function(e){return e.isOpen}).map(function(e){return e.configuration.localPort})),s=w(n,t),c=(m=new Set((0,a._)(Array.from(n)).concat((0,a._)(Array.from(r)))),new Set(Array.from(t).filter(function(e){return m.has(e)}))),u=[],d=!0,p=!1,h=void 0;try{for(var m,g,v=c[Symbol.iterator]();!(d=(g=v.next()).done);d=!0)!function(){var n=g.value,t=e.find(function(e){return e.configuration.localPort===n}),r=l.find(function(e){return e.localPort===n});if(!t)throw Error("couldn't find match for local port: ".concat(n));if(!r)return u.push((0,o._)((0,i._)({},t),{configuration:{type:"CONFIG_MISSING",localPort:t.configuration.localPort,isLocalhost:S(t.configuration),isVnc:C(t.configuration)}}));var a=t.configuration;a=null!=r.externalPort&&0!==r.externalPort?{type:x(u).has(r.externalPort)?"FORWARDED":"MISCONFIGURED",localPort:t.configuration.localPort,externalPort:r.externalPort,isLocalhost:S(t.configuration),isVnc:C(t.configuration)}:{type:"INTERNAL_ONLY",localPort:t.configuration.localPort,isLocalhost:S(t.configuration),isVnc:C(t.configuration)},u.push((0,o._)((0,i._)({},t),{configuration:a}))}()}catch(e){p=!0,h=e}finally{try{d||null==v.return||v.return()}finally{if(p)throw h}}var y=!0,b=!1,A=void 0;try{for(var k,_=s[Symbol.iterator]();!(y=(k=_.next()).done);y=!0)!function(){var e,n=k.value,t=l.find(function(e){return e.localPort===n});if(!t)throw Error("couldn't find match for local port: ".concat(n));var r=null!=t.externalPort&&0!==t.externalPort?t.externalPort:void 0;if(void 0!==r){var i,o=x(u).has(r);u.push({isOpen:!1,isTemporary:!1,configuration:{type:o?"FORWARDED":"MISCONFIGURED",localPort:n,externalPort:r,isLocalhost:null!==(i=t.exposeLocalhost)&&void 0!==i&&i,isVnc:Y(n)}})}else u.push({isOpen:!1,isTemporary:!1,configuration:{type:"INTERNAL_ONLY",localPort:n,isLocalhost:null!==(e=t.exposeLocalhost)&&void 0!==e&&e,isVnc:Y(n)}})}()}catch(e){b=!0,A=e}finally{try{y||null==_.return||_.return()}finally{if(b)throw A}}return f(u)}),h.length>0&&(h.forEach(function(e){var n=e.type,t=e.portInfo;"portOpen"===n?m(t):"portClose"===n&&g(t)}),h=[])})}({container:n,dotReplit:t,portsState:c,writeDotReplitPortsConfig:y,isThisServiceUpdatingDotReplit:p,forwardPortsAutomatically:g}),{tryExposingPortAutomatically:function(e){var n=k({localPort:e,portsState:c});void 0!==n&&(c.update((0,d.jM)(function(t){if(t){var r=t.find(function(n){return n.configuration.localPort===e});r&&(r.isTemporary=!1,r.configuration={type:"FORWARDED",localPort:e,externalPort:n,isLocalhost:r.configuration.isLocalhost,isVnc:Y(e)})}})),y())},updateDotReplitPortsMapping:function(e,n,t){c.update((0,d.jM)(function(r){var i,o=null==r?void 0:r.find(function(n){return n.configuration.localPort===e}),a=t;void 0===a&&(a=null!==(i=null==o?void 0:o.configuration.isLocalhost)&&void 0!==i&&i);var l=void 0!==n?{type:"FORWARDED",localPort:e,externalPort:n,isLocalhost:a,isVnc:Y(e)}:{type:"INTERNAL_ONLY",localPort:e,isLocalhost:a,isVnc:Y(e)};o?(o.isTemporary=!1,o.configuration=l):(r||(r=[]),r.push({isOpen:!1,isTemporary:!1,configuration:l}))})),y()},removeDotReplitPortsMapping:function(e,n){c.update((0,d.jM)(function(t){var r;void 0!==(r=void 0!==n?null==t?void 0:t.findIndex(function(t){return t.configuration.localPort===e&&("FORWARDED"===t.configuration.type||"MISCONFIGURED"===t.configuration.type)&&t.configuration.externalPort===n}):null==t?void 0:t.findIndex(function(n){return n.configuration.localPort===e}))&&(null==t||t.splice(r,1))})),y()},portsState:c,setForwardPortsAutomatically:function(e){g.set(e)}}}},83378:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14.19l2.72-2.72a.75.75 0 0 1 .53-.22h12A1.25 1.25 0 0 0 20.25 15v-3a.75.75 0 0 1 1.5 0v3A2.75 2.75 0 0 1 19 17.75H7.31l-3.78 3.78A.75.75 0 0 1 2.25 21V5A2.75 2.75 0 0 1 5 2.25h7a.75.75 0 0 1 0 1.5H5Z",clipRule:"evenodd"}),(0,o.Y)("path",{d:"M19 1a.8.8 0 0 1 .8.8v2.4h2.4a.8.8 0 0 1 0 1.6h-2.4v2.4a.8.8 0 0 1-1.6 0V5.8h-2.4a.8.8 0 0 1 0-1.6h2.4V1.8A.8.8 0 0 1 19 1Z"})]}))}},84031:(e,n,t)=>{"use strict";t.d(n,{G:()=>r});var r=function(e){return e.Starter="starter",e.Paid="paid",e}({})},84271:(e,n,t)=>{"use strict";t.d(n,{S:()=>nA,D:()=>nS});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(1889),s=t(21462),c=t(35992),u=t(71672),d=t(39969),p=t(34951),f=t(77581),h=t(97302),m=t(11597),g=t(16369),v=t(29824),w=t(59539),y=t(42545),b=t(17844),S=t(12584),Y=t(41114),A=t(86997);function C(){var e=(0,S._)(["\n  query CheckReplitAppSubdomainAvailability(\n    $subdomain: String!\n    $deploymentId: String\n  ) {\n    replitAppSubdomainAvailability(\n      subdomain: $subdomain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on ReplitAppSubdomainAvailabilityResult {\n        available\n        message\n      }\n      ... on UserError {\n        errorMessage: message\n      }\n    }\n  }\n"]);return C=function(){return e},e}var x={},k=(0,Y.J1)(C()),_=t(91564),D=t(80865),E=t(2960),R=t(73912),I=t(6680),F=t(61234),T=t(47258),P=t(62493),L=t(43974),U=t(35899),N=t(53723),O=t(26705),M=t(31618),B=t(3910),H=t(2527),z=t(40043),W=t(37407),G=t(35869),V=t(6761),j=t(28365),Z=t(5408),q=t(4505),K=t(13278),$=t(79571),J=t(56185),Q=t(32633),X=(0,F.x)({self:[L.wp.flex.growAndShrink(1)],input:[L.wp.color.greyStrongest],loading:[P.S.backgroundPulse(I.LU.backgroundHighest,I.LU.backgroundHigher)],error:[L.wp.color.accentNegativeStronger]}),ee=function(e){var n=e.id,t=e.value,r=e.loading,i=e.disabled,o=e.onChange,a=e.error,c=e.placeholder,u=e.type,d=void 0===u?"text":u,p=e.onFocus,f=(0,h.mU)(t),m=(0,s.useId)();return d||(d="text"),(0,l.FD)(G.S,{css:X.self,gap:4,children:[(0,l.Y)(M.pd,{id:n,value:!r&&f?t:"",onChange:function(e){return o(e.target.value)},css:r?X.loading:X.input,disabled:r||i,"aria-describedby":m,placeholder:r?"":c,type:d,onFocus:p}),a?(0,l.Y)(G.S,{css:X.error,"aria-live":"polite","aria-atomic":"true",id:m,children:(0,l.Y)("span",{children:a})}):null]})},en=[L.wp.borderRadius(8),L.wp.width(32),L.wp.height(32),T.b.filled,L.wp.justify.center,L.wp.align.center],et=(0,F.x)({root:[L.wp.rowWithGap(8),L.wp.align.center],iconButton:[L.wp.height("100%"),L.wp.borderRadius(8),{"& button":L.wp.height(32)}],keyInput:[L.wp.width("40%")],valueInput:[L.wp.flex.growAndShrink(1)],secretDifferentInDev:[en,L.wp.color.orangeStrongest],secretSameInDev:[en,L.wp.color.accentPrimaryStrongest],deploymentOnly:[en,L.wp.color.accentPrimaryStrongest]});function er(e){var n=e.existsInDev,t=e.isDifferentInDev;return e.isAutoSynced?(0,l.Y)(W.m_,{tooltip:"This secret is automatically synced to your deployment",children:(0,l.Y)(G.S,{css:et.deploymentOnly,children:(0,l.Y)($.A,{})})}):n?t?(0,l.Y)(W.m_,{tooltip:"The value of this secret differs from the workspace value",children:(0,l.Y)(G.S,{css:et.secretDifferentInDev,children:(0,l.Y)(q.A,{})})}):(0,l.Y)(W.m_,{tooltip:"The value of this secret is the same as the workspace value",children:(0,l.Y)(G.S,{css:et.secretSameInDev,children:(0,l.Y)(Z.A,{})})}):(0,l.Y)(W.m_,{tooltip:"This secret only exists as a deployment secret",children:(0,l.Y)(G.S,{css:et.deploymentOnly,children:(0,l.Y)(K.A,{})})})}var ei=function(e){var n=e.index,t=e.name,r=e.value,o=e.disabled,a=e.updateEnvVarName,c=e.updateEnvVarValue,u=e.removeEnvVar,d=e.otherKeys,p=e.devSecrets,f=e.canEditDevSecretsDisabledMessage,h=e.canEditDeploySecretsDisabledMessage,m=e.syncedSecrets,g=(0,U.c)(),v=(0,i._)((0,s.useState)(""===t||""===r),2),w=v[0],y=v[1],b=!!(t&&r),S=(0,E.A)(b),Y=(0,_.A)(function(){Y.current&&S.current&&y(!1)},[S]),A=!!(p&&p.has(t)),C=!!(A&&p&&p.get(t)!==r),x=void 0===h;return w?(0,l.FD)(l.FK,{children:[(0,l.FD)(G.S,{css:et.root,innerRef:Y,children:[(0,l.Y)(G.S,{css:et.keyInput,children:(0,l.Y)(M.pd,{placeholder:"Name",id:"".concat(g,"-name-").concat(n),value:t,onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&b&&y(!1)},disabled:o})}),(0,l.Y)(G.S,{css:et.valueInput,children:(0,l.Y)(M.pd,{placeholder:"Value",name:"".concat(g,"-value-").concat(n),value:r,onChange:function(e){return c(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&b&&y(!1)},disabled:o})}),o?null:(0,l.Y)(H.ui,{elevated:!0,css:et.iconButton,children:(0,l.Y)(O.K0,{alt:"Add",tooltipBehavior:"hidden",onClick:function(){b?y(!1):u()},children:b?(0,l.Y)(V.A,{}):(0,l.Y)(j.A,{})})})]}),d.includes(t)?(0,l.FD)(z.EY,{variant:"small",css:{color:I.LU.accentNegativeDefault},children:['Secret "',t,'" already exists']}):null]}):(0,l.FD)(G.S,{css:et.root,children:[void 0===f?(0,l.Y)(er,{existsInDev:A,isDifferentInDev:C,isAutoSynced:m.has(t)}):null,(0,l.Y)(R.Ge,{value:t}),(0,l.Y)(R.iJ,{value:r,canEditDisabledMessage:h}),x?(0,l.Y)(R.R6,{onEdit:function(){return y(!0)},onDelete:function(){return u()}}):null]})},eo=function(e){var n,t,r,i,o,a=e.id,c=e.subdomain,u=e.deploymentId,d=e.onChange,p=e.updateValidity,h=(0,D._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:f.co}),m=h!==f.co,g=(n={variables:{subdomain:c,deploymentId:u},skip:0===c.length},t=(0,b._)({},x,n),A.I(k,t)),v=g.data,w=g.loading,y=g.error,S=(null==v?void 0:v.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"&&v.replitAppSubdomainAvailability.available,Y=(null==v?void 0:v.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"?v.replitAppSubdomainAvailability.message:null==v?void 0:null===(r=v.replitAppSubdomainAvailability)||void 0===r?void 0:r.errorMessage;return((0,s.useEffect)(function(){p(S)},[S]),y)?(0,l.Y)(B.N,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,l.FD)(G.S,{children:[(0,l.FD)(G.S,{row:!0,gap:4,align:"center",children:[(0,l.Y)(M.pd,{id:a,placeholder:"subdomain",value:c,onChange:function(e){return d(e.target.value)}}),(0,l.FD)(z.EY,{multiline:!1,children:[(null===(o=window)||void 0===o?void 0:null===(i=o.location)||void 0===i?void 0:i.hostname)!=="replit.com"?".staging":"",".",h]})]}),(0,l.FD)(G.S,{row:!0,gap:4,css:[L.wp.pt(4)],align:"center",children:[w?(0,l.FD)(l.FK,{children:[(0,l.Y)(J.A,{}),(0,l.Y)(z.EY,{multiline:!1,children:"Checking availability"})]}):null,S?(0,l.FD)(l.FK,{children:[(0,l.Y)(V.A,{color:"green"}),(0,l.Y)(z.EY,{css:[L.wp.color.greenDefault],multiline:!1,children:"Available"})]}):null,S||w?null:(0,l.FD)(l.FK,{children:[(0,l.Y)(Q.A,{color:"red"}),(0,l.Y)(z.EY,{css:[L.wp.color.redDefault],multiline:!1,children:Y})]}),m?(0,l.Y)(B.N,{colorway:"warning",text:"The ".concat(f.co," domain is currently unavailable, please use the ").concat(h," URL above.")}):null]})]})},ea=function(e){var n=e.appType,t=e.onChange,r=(0,U.c)();return(0,l.Y)(N.e2,{name:"deploymentTargetSelector",value:n,onChange:t,row:!0,css:[L.wp.width("100%"),L.wp.flex.row],children:[{value:p.JX.Server,name:"Web Server",description:"ex. an API or website"},{value:p.JX.Worker,name:"Background Worker",description:"ex. a Discord or Slack bot"}].map(function(e,n){return(0,l.Y)(G.S,{css:[L.wp.flex.grow(1)],children:(0,l.Y)(W.m_,{tooltip:e.description,children:(0,l.Y)(N.$O,{id:r(e.value),value:e.value,text:e.name})})},n)})})},el=t(86960),es=t(96354),ec=t(53677),eu=t(9853),ed=t(83846),ep=t(6724),ef=t.n(ep),eh=t(17599),em=t(30391),eg=t(83353),ev=t(61937),ew=t(67549),ey=t(20882),eb=(0,F.x)({self:[L.wp.mt(8)],accordion:[L.wp.mb(0)],textButton:[L.wp.cursor.pointer,L.wp.reset.button,L.wp.color.accentPrimaryStronger,L.wp.focusRing,L.wp.hover(L.wp.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],tableHeader:[L.wp.color.foregroundDimmer,L.wp.m(4),L.wp.textAlign.left],tableWrapper:[L.wp.mb(8),L.wp.colWithGap(8),(0,ed._)({},eh.sX,L.wp.rowWithGap(0))],table:[L.wp.flex.column,L.wp.width("100%"),(0,ed._)({},eh.sX,[L.wp.width("50%"),L.wp.colWithGap(6),{"&:first-child":{table:{borderRight:"1px solid "+I.LU.outlineDimmer}}}])],ghostRow:[L.wp.display.none,(0,ed._)({},eh.sX,L.wp.display.flex)]}),eS=function(e){var n=e.text,t=e.onClick;return(0,l.Y)("button",{css:eb.textButton,onClick:t,children:n})};function eY(e){var n=e.hasPortsConfigured,t=e.hasPort80Configured,r=e.hasConflictingPorts,i=e.hasLocalhostPort80,o=e.openNetworkingPane;return n?t?r?(0,l.Y)(B.N,{text:(0,l.FD)(l.FK,{children:["Potential port conflict. Make sure no External Ports have conflicts in your configuration and that you only have one External Port configured on port :80. Open the"," ",(0,l.Y)(eS,{text:"Networking pane to resolve.",onClick:o})]}),colorway:"warning"}):i?(0,l.Y)(B.N,{text:(0,l.FD)(l.FK,{children:["Hosting your deployment on localhost can cause security or performance issues in some cases. Open the"," ",(0,l.Y)(eS,{text:"Networking pane to configure.",onClick:o})]}),colorway:"primary"}):(0,l.Y)(B.N,{text:(0,l.FD)(l.FK,{children:["Deployment forwarding to External Port :80. Open the"," ",(0,l.Y)(eS,{text:"Networking pane to configure.",onClick:o})]}),colorway:"primary"}):(0,l.Y)(B.N,{text:(0,l.FD)(l.FK,{children:["Potential port issue. Deployments require an External Port configured on port :80. Open the"," ",(0,l.Y)(eS,{text:"Networking pane to configure.",onClick:o})]}),colorway:"warning"}):(0,l.Y)(B.N,{text:(0,l.FD)(l.FK,{children:["No ports configured. Deployments will automatically forward the first Internal Port that opens. Open the"," ",(0,l.Y)(eS,{text:"Networking pane to configure.",onClick:o})]})})}var eA=function(e){return 80===(0,eg.Zd)(e.configuration)};function eC(e){var n=e.portState,t=(0,eg.s$)(n.configuration),r=(0,eg.Zd)(n.configuration),i=eA(n);return(0,l.FD)(l.FK,{children:[(0,l.FD)(ev.VP,{width:"50%",children:[(0,l.Y)(z.EY,{children:t?"localhost":"0.0.0.0"}),i&&t?(0,l.Y)(ey.A,{size:16,color:I.ky.primary.default}):null]}),(0,l.FD)(ev.VP,{width:"50%",children:[(0,l.FD)(z.EY,{children:[":",r]}),i?(0,l.Y)(V.A,{size:16,color:I.ky.positive.default}):(0,l.Y)(j.A,{size:16,color:I.ky.negative.default})]})]})}function ex(e){var n=e.ports,t=e.openNetworkingPane,r=(0,em.A)(n.portsState),o=(null==r?void 0:r.filter(function(e){return(0,eg.Zd)(e.configuration)}).sort(function(e,n){var t,r;return(null!==(t=(0,eg.Zd)(e.configuration))&&void 0!==t?t:0)-(null!==(r=(0,eg.Zd)(n.configuration))&&void 0!==r?r:0)}))||null,a=null==o?void 0:o.find(eA),c=!!a,u=!!(o&&o.length>0),d=!!o&&!!a&&!!(o.filter(eA).length>1||o.some(function(e){return(0,eg.Zd)(e.configuration)===a.configuration.localPort})),p=!!(a&&(0,eg.s$)(a.configuration)),f=u&&!c||d,h=(0,i._)((0,s.useState)(!1),2),m=h[0],g=h[1];return(0,l.Y)(ew.A,{headerContent:(0,l.FD)(G.S,{row:!0,gap:4,align:"center",children:[(0,l.Y)(el.K,{id:"deploymentPortConfiguration",title:"Port configuration",information:"Configure which port your deployment should use for incoming requests."}),f?(0,l.Y)(Q.A,{size:16,color:I.ky.warning.strongest}):null]}),expanded:m,onClick:function(){return g(!m)},css:eb.accordion,children:(0,l.FD)(G.S,{css:eb.self,gap:8,children:[(0,l.Y)(eY,{hasPortsConfigured:u,hasPort80Configured:c,hasConflictingPorts:d,hasLocalhostPort80:p,openNetworkingPane:t}),(0,l.Y)(G.S,{children:(0,l.FD)(G.S,{css:eb.tableWrapper,children:[(0,l.FD)(G.S,{css:eb.table,children:[(0,l.Y)(z.EY,{css:eb.tableHeader,children:"Deployment expects:"}),(0,l.FD)(ev.XI,{children:[(0,l.FD)(ev.fI,{children:[(0,l.Y)(ev.VP,{header:!0,width:"50%",children:"Host"}),(0,l.Y)(ev.VP,{header:!0,width:"50%",children:"External Port"})]}),(0,l.FD)(ev.fI,{children:[(0,l.Y)(ev.VP,{width:"50%",children:(0,l.Y)(z.EY,{children:"0.0.0.0"})}),(0,l.FD)(ev.VP,{width:"50%",children:[(0,l.Y)(z.EY,{children:":80"}),(0,l.Y)(V.A,{size:16,color:I.ky.positive.default})]})]}),u&&o?ef()((null==o?void 0:o.length)-1).map(function(e){return(0,l.Y)(ev.fI,{css:eb.ghostRow,children:(0,l.Y)(ev.VP,{children:(0,l.Y)(z.EY,{children:"\xa0"})})},e)}):null]})]}),(0,l.FD)(G.S,{css:eb.table,children:[(0,l.Y)(z.EY,{css:eb.tableHeader,children:"Your External Port configuration(s):"}),(0,l.FD)(ev.XI,{children:[(0,l.FD)(ev.fI,{children:[(0,l.Y)(ev.VP,{header:!0,width:"50%",children:"Host"}),(0,l.Y)(ev.VP,{header:!0,width:"50%",children:"External Port"})]}),u?null==o?void 0:o.map(function(e){return(0,l.Y)(ev.fI,{children:(0,l.Y)(eC,{portState:e})},e.configuration.localPort)}):(0,l.FD)(ev.fI,{children:[(0,l.Y)(ev.VP,{width:"50%",children:(0,l.Y)(z.EY,{children:"-"})}),(0,l.Y)(ev.VP,{width:"50%",children:(0,l.Y)(z.EY,{children:"-"})})]})]})]})]})})]})})}var ek=t(45981),e_=t.n(ek),eD=t(317),eE=t(25933),eR=t(91396),eI=t(7146),eF=t(75877),eT=(0,F.x)({titleRow:[L.wp.gap(8),L.wp.align.center]});function eP(e){var n=e.isPrivate,t=e.setIsPrivate,r=e.isRedeploy,i=(0,eE.ET)(),o=i.loading,a=i.orgId,s=!o&&!a;return(0,l.Y)(l.FK,{children:(0,l.Y)(eR.w,{id:"privateDeployments",title:(0,l.FD)(l.FK,{children:[(0,l.FD)(G.S,{css:eT.titleRow,row:!0,children:[(0,l.Y)(z.EY,{color:"dimmer",children:"Private Deployment"}),s?(0,l.Y)(eF.A,{plan:"Teams",size:"small",tooltipProps:{description:"Private Deployments are only available on Replit ".concat(eD.$B,".")}}):null]}),(0,l.FD)(z.EY,{variant:"small",color:"dimmest",children:[s?(0,l.Y)(l.FK,{children:"Limit deployment access to team members."}):(0,l.FD)(l.FK,{children:["Limit deployment access to team members who have edit access.",r?" Visibility changes apply after next deployment.":""]})," ",(0,l.Y)(e_(),{legacyBehavior:!0,target:"_blank",href:"https://docs.replit.com/cloud-services/deployments/private-deployments",children:"Learn more"})]})]}),children:(0,l.Y)(eI.d,{"aria-label":"Private Deployments",isSelected:n,onChange:function(e){t(e)}})})})}var eL=t(19570),eU=t(61239),eN=t(59669),eO=t(93629),eM=t(5839),eB=t(39452),eH=t(96907),ez=t.n(eH),eW=t(61598),eG=t(6553),eV=t(54572),ej=t(20627),eZ=(0,F.x)({self:{ul:{maxHeight:"300px"}},select:[L.wp.border()],error:[L.wp.color.accentNegativeStronger],button:[L.wp.reset.button,L.wp.viewStyle,T.b.nofill,L.wp.align.center,L.wp.display.inlineFlex,{borderColor:T.b.outlined.borderColor}],popover:[L.wp.width("max-content"),L.wp.overflow("auto"),L.wp.p(1),L.wp.minWidth(240)],listbox:[L.wp.maxHeight(300),L.wp.minWidth(300),L.wp.overflow("auto")],dropdownItemAndContainer:[L.wp.flex.row,L.wp.align.center,T.b.listItem,L.wp.px(8),L.wp.py(4)],selectedItemAndContainer:[L.wp.px(8),L.wp.py(4),L.wp.justify.spaceBetween,L.wp.align.center,L.wp.rowWithGap(8)],selectedTimezoneCode:[L.wp.textAlign.left,L.wp.rowWithGap(8)],timezoneCode:[L.wp.textAlign.left,L.wp.rowWithGap(8)],header:[L.wp.pt(8),L.wp.px(8),L.wp.pb(4),L.wp.flex.growAndShrink(1),{borderBottom:"1px solid ".concat(I.LU.outlineDimmest)}],search:[L.wp.p(8),{borderBottom:"1px solid ".concat(I.LU.outlineDimmest)}],searchInput:[L.wp.width("100%")],dropdownHeader:[L.wp.fontWeight.medium],loading:[L.wp.maxWidth(70),P.S.backgroundPulse(I.LU.backgroundHighest,I.LU.backgroundHigher)]});function eq(e){var n=e.initialTimezone,t=e.onChange,r=e.loading,o=e.error,a=(0,i._)((0,s.useState)(),2),c=a[0],u=a[1],d=(0,s.useId)();return(0,s.useEffect)(function(){if(!r){if(n&&!c){u(n);return}if(!c&&!n){var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if((0,f._j)(e)){t(e),u(e);return}var i="America/Los_Angeles";i&&(t(i),u(i))}}},[t,c,n,r]),(0,l.FD)(G.S,{css:eZ.self,children:[r||!c?(0,l.Y)(M.pd,{css:eZ.loading,disabled:!0}):(0,l.Y)(e1,{selectedTzCode:c,onSelectionChange:function(e){"string"==typeof e&&(t(e),u(e))},css:eZ.select}),o?(0,l.Y)(G.S,{css:eZ.error,"aria-live":"polite","aria-atomic":"true",id:d,children:(0,l.Y)("span",{children:o})}):null]})}var eK=(0,F.x)({self:[eZ.dropdownItemAndContainer,L.wp.justify.spaceBetween,{backgroundColor:I.LU.interactiveBackground}]});function e$(e){var n=e.title;return(0,l.FD)(G.S,{css:eZ.selectedItemAndContainer,children:[(0,l.Y)(G.S,{css:eZ.selectedTimezoneCode,align:"center",children:(0,l.Y)(z.EY,{variant:"text",color:"dimmer",children:n})}),(0,l.Y)(eV.A,{})]})}function eJ(e){var n=e.tzCode,t=e.selected;return(0,l.FD)(G.S,{css:t?eK.self:eZ.dropdownItemAndContainer,children:[(0,l.Y)(G.S,{css:eZ.timezoneCode,align:"center",children:(0,l.Y)(z.EY,{variant:"text",color:t?"default":"dimmer",children:n.replace(/_/g," ").replace(/\//g,", ")})}),(0,l.Y)(G.S,{align:"center",row:!0,children:t?(0,l.Y)(V.A,{size:16}):null})]})}var eQ=(0,F.x)({self:[eZ.button,L.wp.align.center,L.wp.px(8),L.wp.py(4),(0,ed._)({},L.$_.min("mobileMax"),[L.wp.rowWithGap(4)])]});function eX(e){return e.toLowerCase().replaceAll("_"," ")}var e0=eW.m.map(function(e){var n=e.value,t=e.abbr,r=e.utc,i=eX(n),a=eX(t),l=r.map(function(e){return{tzCode:e,normalizedUtcValue:eX(e)}});return(0,eO._)((0,b._)({},e),{normalizedValue:i,normalizedAbbr:a,normalizedUtc:l,searchableText:eX([e.value,e.abbr].concat((0,o._)(e.utc)).join(" "))})});function e1(e){var n=e.selectedTzCode,t=e.onSelectionChange,r=(0,i._)((0,s.useState)(""),2),o=r[0],a=r[1],c=(0,i._)((0,s.useState)(eW.m),2),u=c[0],d=c[1],p=(0,i._)((0,s.useState)(eW.m.find(function(e){return e.utc.includes(n)})),2),f=p[0],h=p[1];(0,s.useEffect)(function(){h(eW.m.find(function(e){return e.utc.includes(n)}))},[n]);var m=ez()(function(e){d(function(e){if(!e)return eW.m;var n=eX(e);return e0.map(function(t){var r=0,i=t.searchableText,o=t.normalizedValue,a=t.normalizedAbbr,l=t.normalizedUtc,s=t.utc;if(i.includes(n)){o.includes(n)&&(r+=10/(o.indexOf(n)+1)),a.includes(n)&&(r+=8/(a.indexOf(n)+1));var c=s;return l.some(function(e){return e.normalizedUtcValue.includes(n)})&&(r+=5,e.length>=3&&(c=l.map(function(e){var t=e.tzCode,r=e.normalizedUtcValue;return r.includes(n)?{tzCode:t,utcScore:5/(r.indexOf(n)+1)}:{tzCode:t,utcScore:0}}).sort(function(e,n){return n.utcScore-e.utcScore}).map(function(e){return e.tzCode}))),(0,eO._)((0,b._)({},t),{utc:c,score:r})}return(0,eO._)((0,b._)({},t),{score:0})}).filter(function(e){return e.score>0}).sort(function(e,n){return n.score-e.score})}(e))},100),g=function(e){a(e),m(e)};return(0,l.FD)(eL.l6,{onSelectionChange:t,"aria-label":"Timezone Select",children:[f?(0,l.Y)(eU.$,{css:eZ.button,children:(0,l.Y)(e$,{title:f.abbr})}):(0,l.Y)(W.m_,{tooltip:"Could not detect valid timezone. Please try again, or contact support.",children:(0,l.FD)(eU.$,{css:eQ.self,children:[(0,l.Y)(z.EY,{color:"dimmer",children:"Select"}),(0,l.Y)(ej.A,{})]})}),(0,l.FD)(eG.g_,{noArrow:!0,css:eZ.popover,background:"default",placement:"bottom right",children:[(0,l.Y)(G.S,{css:eZ.search,children:(0,l.Y)(M.pd,{css:eZ.searchInput,value:o,onChange:function(e){return g(e.target.value)},placeholder:"Search"})}),(0,l.Y)(eN.qF,{css:eZ.listbox,children:u.map(function(e){var t=e.value,r=e.abbr,i=e.utc;return(0,l.FD)(eM.wn,{children:[(0,l.Y)(eB.Y,{css:eZ.header,children:(0,l.FD)(z.EY,{variant:"small",color:"dimmest",css:eZ.dropdownHeader,children:[t," (",r,")"]})}),i.map(function(e){return(0,l.Y)(eN.nh,{id:e,textValue:e,children:(0,l.Y)(eJ,{tzCode:e,selected:e===n})},e)})]},t)})})]})]})}var e2=t(68682),e4=t(72004),e5=t(26496),e8=t(68209),e3=t(18960),e6=t(63892),e7={scheduleToCronExpression:{inputTarget:e4.Hnw.ENGLISH,outputTarget:e4.Hnw.CRON},cronExpressionToSchedule:{inputTarget:e4.Hnw.CRON,outputTarget:e4.Hnw.ENGLISH}},e9=function(e){var n,t,o,l,c,u,d,p,f,h,m,g,v,w,y,S=e.type,Y=e.onTranslation,A=e.onError,C=(0,s.useRef)(null),x=(0,i._)((0,s.useState)(!1),2),k=x[0],_=x[1],D=function(e,n){(0,e3.Q)({error:Error(e),context:"useScheduledMachineConfigurationTranslator"}),A(n||e)},E=(o=(n={onTranslation:function(e,n,t){if(!k){if(C.current&&clearTimeout(C.current),n){if(!e){Y("Unable to derive valid translation from description");return}var r,i=(r=e.match(/`([^`]+)`(?=[^`]*$)/))?r[1]:null;if(!i||"scheduleToCronExpression"===S&&!(0,e2.isValidCron)(i)){Y("Unable to derive valid Cron expression from description");return}Y(i),(0,e6.u4)(e6.AZ.DEPLOYMENT_SCHEDULE_TRANSLATION_GENERATED,{type:S,translation:e,prompt:t})}}},onError:function(e){return D(e,"Error translating description")}}).onTranslation,l=n.onError,c=(0,e5.NC)(),d=(u=(0,i._)((0,s.useState)(!1),2))[0],p=u[1],h=(f=(0,i._)((0,s.useState)(null),2))[0],m=f[1],g=(0,s.useRef)(""),v=(0,s.useCallback)((t=(0,r._)(function(e){var n;return(0,a.YH)(this,function(t){switch(t.label){case 0:return p(!0),g.current=e.content,[4,c.sessions.create({sessionType:e4.dF3.SINGLE_USE_SESSION})];case 1:if(!(n=t.sent()).ok)return p(!1),l("Failed to create session"),[2];return m(n.payload),[4,n.payload.appendEvent({kind:"translate",content:e.content,inputTarget:e.inputTarget,outputTarget:e.outputTarget,modelType:e4.e3q.BASIC})];case 2:return t.sent().ok||(p(!1),l("Failed to send translation request")),[2]}})}),function(e){return t.apply(this,arguments)}),[c.sessions,l]),w=(0,s.useMemo)(function(){return null==h?void 0:h.reduce(ne,"global").result},[h]),(0,e8.q3)(w,{next:function(e){(null==e?void 0:e.completed)&&d&&p(!1),(null==e?void 0:e.code)&&o(e.code,e.completed,g.current)}}),{sendMessage:v,loading:d}),R=E.sendMessage,I=E.loading,F=(y=(0,r._)(function(e){var n;return(0,a.YH)(this,function(t){return(C.current&&clearTimeout(C.current),e)?"cronExpressionToSchedule"!==S||(0,e2.isValidCron)(e)?(n=e7[S],R((0,eO._)((0,b._)({},n),{content:e})),C.current=setTimeout(function(){_(!0),D("Translation timed out")},8e3)):Y("Invalid cron expression"):Y(""),[2]})}),function(e){return y.apply(this,arguments)});return(0,s.useEffect)(function(){return function(){C.current&&clearTimeout(C.current)}},[C]),{translate:F,loading:I}},ne={direction:"reverse",state:{code:null,completed:!1},reducer:function(e,n){(0,e4.VFn)(e.contents.contents,"messageEventContents")&&e.sender.type===e4.utd.AI&&(n.code=(0,e4.QNh)(e.contents.contents).content,n.completed=e.state===e4.qOk.COMPLETE&&!!n.code)}};function nn(){return(0,l.FD)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.Y)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.97978 15.6465C2.78451 15.8417 2.78451 16.1583 2.97978 16.3536L7.64644 21.0202C7.8417 21.2155 8.15829 21.2155 8.35355 21.0202C8.54881 20.825 8.54881 20.5084 8.35355 20.3131L4.54044 16.5L9.66666 16.5C9.9428 16.5 10.1667 16.2762 10.1667 16C10.1667 15.7239 9.9428 15.5 9.66666 15.5L4.54044 15.5L8.35355 11.6869C8.54881 11.4916 8.54881 11.1751 8.35355 10.9798C8.15829 10.7845 7.8417 10.7845 7.64644 10.9798L2.97978 15.6465Z",fill:I.LU.blurpleStronger}),(0,l.Y)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.3889 12.2661C16.259 11.9113 15.741 11.9113 15.6111 12.2661L14.7182 14.7055C14.675 14.8237 14.577 14.9153 14.4536 14.9531L12.2883 15.6156C11.9044 15.7331 11.9037 16.2592 12.2873 16.3776L14.4544 17.0466C14.5773 17.0846 14.6749 17.1761 14.718 17.2939L15.6111 19.7339C15.741 20.0887 16.259 20.0887 16.3889 19.7339L17.2819 17.2942C17.3251 17.1762 17.4228 17.0846 17.546 17.0468L19.7122 16.381C20.0959 16.263 20.0959 15.737 19.7122 15.619L17.546 14.9532C17.4228 14.9154 17.3251 14.8238 17.2819 14.7058L16.3889 12.2661Z",fill:I.LU.blurpleStronger}),(0,l.Y)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M29.0202 15.6465C29.2155 15.8417 29.2155 16.1583 29.0202 16.3536L24.3536 21.0202C24.1583 21.2155 23.8417 21.2155 23.6465 21.0202C23.4512 20.825 23.4512 20.5084 23.6465 20.3131L27.4596 16.5L22.3333 16.5C22.0572 16.5 21.8333 16.2762 21.8333 16C21.8333 15.7239 22.0572 15.5 22.3333 15.5L27.4596 15.5L23.6465 11.6869C23.4512 11.4916 23.4512 11.1751 23.6465 10.9798C23.8417 10.7845 24.1583 10.7845 24.3536 10.9798L29.0202 15.6465Z",fill:I.LU.blurpleStronger})]})}var nt=L.kL.min(480),nr=(0,F.x)({cronConfig:[L.wp.pb(16),L.wp.flex.growAndShrink(1),(0,ed._)({},nt,[L.wp.colWithGap(0),L.wp.rowWithGap(8),L.wp.align.start])],scheduledLabeledInput:[L.wp.flex.growAndShrink(1)],crontabLabeledInput:[L.wp.flex.growAndShrink(1),L.wp.maxWidth(128)],translationSwitch:[L.wp.flex.shrink(1),L.wp.mb(4),(0,ed._)({transform:"rotate(90deg)",alignSelf:"flex-start"},nt,{transform:"rotate(0deg)",marginBottom:0,paddingTop:30})],translationSwitchIcon:[L.wp.height(32),L.wp.width(32),L.wp.center],timezoneSelect:[L.wp.flex.shrink(1),(0,ed._)({minWidth:75},nt,{paddingTop:30})],timeoutConfig:[L.wp.flex.growAndShrink(1),L.wp.width("100%"),L.wp.align.start,L.wp.pb(8)],selectedItemAndContainer:[L.wp.px(8),L.wp.py(4),L.wp.justify.spaceBetween,L.wp.align.center,L.wp.rowWithGap(8)],selectedTimeoutUnits:[L.wp.textAlign.left,L.wp.rowWithGap(8)],button:[L.wp.reset.button,L.wp.viewStyle,T.b.nofill,L.wp.align.center,L.wp.display.inlineFlex,{borderColor:T.b.outlined.borderColor},L.wp.minWidth(100)],timeoutUnitsDropdown:[L.wp.ml(4)],dropdownItemAndContainer:[L.wp.flex.row,L.wp.align.center,T.b.listItem,L.wp.px(8),L.wp.py(4)],dropdownItem:[L.wp.textAlign.left,L.wp.rowWithGap(8)],popover:[L.wp.width("max-content"),L.wp.overflow("auto"),L.wp.p(1),L.wp.minWidth(120)]}),ni=(0,F.x)({self:[nr.dropdownItemAndContainer,L.wp.justify.spaceBetween,{backgroundColor:I.LU.interactiveBackground}]}),no=["minutes","hours"];function na(e,n){var t=parseInt(e,10);return isNaN(t)?0:"hours"===n.toLowerCase()?3600*t:60*t}function nl(e){return/^\d+$/.test(e.trim())&&!isNaN(parseInt(e,10))}function ns(e,n){return nl(e)&&na(e,n)>86400}function nc(e){var n=e.title;return(0,l.FD)(G.S,{css:nr.selectedItemAndContainer,children:[(0,l.Y)(G.S,{css:nr.selectedTimeoutUnits,align:"center",children:(0,l.Y)(z.EY,{variant:"text",color:"dimmer",children:n})}),(0,l.Y)(eV.A,{})]})}function nu(e){var n=e.item,t=e.selected;return(0,l.FD)(G.S,{css:t?ni.self:nr.dropdownItemAndContainer,children:[(0,l.Y)(G.S,{css:nr.dropdownItem,align:"center",children:(0,l.Y)(z.EY,{variant:"text",color:t?"default":"dimmer",children:n})}),(0,l.Y)(G.S,{align:"center",row:!0,children:t?(0,l.Y)(V.A,{size:16}):null})]})}function nd(e){var n=e.callback,t=e.delay,r=(0,s.useRef)();return(0,s.useEffect)(function(){return function(){r.current&&clearTimeout(r.current)}},[]),{callerFunction:function(e){r.current&&clearTimeout(r.current),r.current=setTimeout(function(){return n(e)},t)}}}function np(e){var n=e.crontab,t=e.setCrontab,r=e.crontabError,o=e.timezone,a=e.setTimezone,c=e.timezoneError,u=e.loading,d=void 0!==u&&u,p=e.timeoutValue,f=e.setTimeoutValue,h=e.timeoutUnits,m=e.setTimeoutUnits,g=e.setTimeoutValueError,v=(0,i._)((0,s.useState)(!1),2),w=v[0],y=v[1],b=(0,i._)((0,s.useState)(null),2),S=b[0],Y=b[1],A=(0,i._)((0,s.useState)(null),2),C=A[0],x=A[1],k=(0,i._)((0,s.useState)("scheduleToCronExpression"),2),_=k[0],D=k[1],E="scheduleToCronExpression"===_,R="cronExpressionToSchedule"===_,F=e9({type:_,onTranslation:function(e){y(!1),E?t(e):R&&x(e)},onError:function(e){y(!1),Y(e)}}),T=F.translate,P=F.loading,L=nd({callback:function(e){return T(e)},delay:3e3}).callerFunction,U=nd({callback:y,delay:500}).callerFunction,N=function(e,n){switch(n){case"scheduleToCronExpression":x(e);break;case"cronExpressionToSchedule":t(e)}O&&y(!1),""!==e&&null!==e&&(U(!0),L(e))},O=P||w;if((0,s.useEffect)(function(){g(!nl(p)||ns(p,h))},[p,h,g]),S)return(0,l.FD)(G.S,{children:[(0,l.Y)(G.S,{css:nr.crontabLabeledInput,children:(0,l.Y)(el.K,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",warning:"".concat(S,". Enter valid Cron expression."),grow:!0,children:(0,l.Y)(ee,{id:"cronExpression",value:n,placeholder:"* * * * *",loading:d,disabled:!1,onChange:t,error:r})})}),(0,l.Y)(G.S,{css:nr.timezoneSelect,children:(0,l.Y)(eq,{initialTimezone:o,onChange:a,error:c,loading:d})})]});var M="";return nl(p)?ns(p,h)&&(M="Please enter a value less than the maximum of 24 hours"):M="Please enter a positive whole number",(0,l.FD)(G.S,{children:[(0,l.FD)(G.S,{css:nr.cronConfig,gap:8,children:[(0,l.Y)(G.S,{css:nr.scheduledLabeledInput,children:(0,l.Y)(el.K,{id:"schedule",title:"Schedule description",information:"Describe when you want your scheduled deployment to run",grow:!0,children:(0,l.Y)(ee,{id:"describeSchedule",value:C,placeholder:n?"":"Every day at 3:00 AM",loading:d,disabled:O&&!E,onChange:function(e){return N(e,"scheduleToCronExpression")},onFocus:function(){return D("scheduleToCronExpression")}})})}),(0,l.Y)(G.S,{css:nr.translationSwitch,children:(0,l.Y)(W.m_,{tooltip:"When you type, Replit AI will translate between these properties",children:(0,l.Y)(G.S,{css:nr.translationSwitchIcon,children:O?(0,l.Y)(J.A,{color:I.LU.blurpleStronger}):(0,l.Y)(nn,{})})})}),(0,l.Y)(G.S,{css:nr.crontabLabeledInput,children:(0,l.Y)(el.K,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",grow:!0,children:(0,l.Y)(ee,{id:"cronExpression",value:n,placeholder:"* * * * *",loading:d,disabled:O&&!R,onChange:function(e){return N(e,"cronExpressionToSchedule")},onFocus:function(){return D("cronExpressionToSchedule")},error:r})})}),(0,l.Y)(G.S,{css:nr.timezoneSelect,children:(0,l.Y)(eq,{initialTimezone:o,onChange:a,error:c,loading:d})})]}),(0,l.Y)(G.S,{css:nr.timeoutConfig,row:!0,children:(0,l.Y)(el.K,{id:"timeout",title:"Job timeout",information:"The maximum amount of time each execution of your scheduled job will run before being stopped",grow:!0,children:(0,l.FD)(G.S,{row:!0,children:[(0,l.Y)(ee,{id:"timeoutValue",value:p,placeholder:"",loading:d,disabled:!1,onChange:function(e){return f(null!=e?e:"")},error:M,type:"number"}),(0,l.FD)(eL.l6,{css:nr.timeoutUnitsDropdown,defaultSelectedKey:no[0],selectedKey:h,onSelectionChange:function(e){return m(e.toString())},children:[(0,l.Y)(eU.$,{css:nr.button,children:(0,l.Y)(nc,{title:h})}),(0,l.Y)(eG.g_,{css:nr.popover,background:"default",placement:"bottom right",children:(0,l.Y)(eN.qF,{children:no.map(function(e){return(0,l.Y)(eN.nh,{id:e,textValue:e,children:(0,l.Y)(nu,{item:e,selected:e===h})},e)})})})]})]})})})]})}var nf=t(98015),nh=t(68686),nm=["DATABASE_URL"],ng=t(93682),nv=t(44885),nw=t(99054),ny=t(75251);function nb(){return(nb=(0,r._)(function(e){var n,t,r,i,o,l,s,c,u,d,p,f,h,g,v,w,y;return(0,a.YH)(this,function(a){switch(a.label){case 0:n=["webpack.config.js","vite.config.js","webpack.config.ts","vite.config.ts"],t=!0,r=!1,i=void 0,a.label=1;case 1:a.trys.push([1,6,7,8]),o=n[Symbol.iterator](),a.label=2;case 2:if(t=(l=o.next()).done)return[3,5];return s=l.value,[4,e.stat(s)];case 3:if(!((c=a.sent()).exists&&c.type===m.pt.File))return[3,4];return[2,"dist"];case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return u=a.sent(),r=!0,i=u,[3,8];case 7:try{t||null==o.return||o.return()}finally{if(r)throw i}return[7];case 8:d=["dist","build","public"],p=!0,f=!1,h=void 0,a.label=9;case 9:a.trys.push([9,14,15,16]),g=d[Symbol.iterator](),a.label=10;case 10:if(p=(v=g.next()).done)return[3,13];return w=v.value,[4,e.stat(w)];case 11:if(!((y=a.sent()).exists&&y.type===m.pt.Directory))return[3,12];return[2,w];case 12:return p=!0,[3,10];case 13:return[3,16];case 14:return u=a.sent(),f=!0,h=u,[3,16];case 15:try{p||null==g.return||g.return()}finally{if(f)throw h}return[7];case 16:return[2]}})})).apply(this,arguments)}function nS(e){var n=e.replId,t=e.isNewDeployment,o=e.provider,l=e.fs,c=e.secrets,d=e.onOptions,h=e.onError,m=e.dotReplit,g=(0,u.m)(),v=(0,i._)((0,s.useState)(!0),2),w=v[0],y=v[1],b=(0,E.A)(h),S=(0,E.A)(d),Y=(0,D._P)({controlName:f.bT,default:!1}),A=(0,s.useRef)(new Set);return(0,s.useEffect)(function(){var e=!1;function s(){return(s=(0,r._)(function(){var r,s,u,d,f,h,v,w,b,C;return(0,a.YH)(this,function(a){switch(a.label){case 0:return r=p.JX.Server,s=null,u=null,d=null,f=null,[4,c.read()];case 1:return h=a.sent(),[4,Promise.all([t?(0,es.n9)({secrets:c,replId:n,apolloClient:g}):Y?function(e){var n=e.secrets,t=e.syncedSecrets,r=[],o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=(0,i._)(s.value,2),d=u[0],p=u[1];nm.includes(d)&&(t.add(d),r.push({name:d,value:p}))}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return r}({secrets:h,syncedSecrets:A.current}):null,(0,es.XE)(m)])];case 2:if(w=(v=i._.apply(void 0,[a.sent(),2]))[0],b=v[1],e)return[2];if(t)switch(o){case p.Q0.Gce:r=b.ignorePorts?p.JX.Worker:p.JX.Server;break;case p.Q0.CloudRun:r=p.JX.CloudRun;break;case p.Q0.Static:r=p.JX.Static;break;case p.Q0.Cron:r=p.JX.Cron}else b.appType&&(r=b.appType);if(u=b.buildCommand,r===p.JX.Static)return[3,3];return s=b.runCommand,[3,6];case 3:if(!b.publicDir)return[3,4];return d=b.publicDir,[3,6];case 4:return[4,function(e){return nb.apply(this,arguments)}(l)];case 5:(C=a.sent())&&(d=C),a.label=6;case 6:return o===p.Q0.Gce&&(f=b.ignorePorts),S.current({appType:r,envVars:w,buildCommand:u,runCommand:s,publicDir:d,ignorePorts:f}),y(!1),[2]}})})).apply(this,arguments)}try{!function(){s.apply(this,arguments)}()}catch(e){b.current(e.message),y(!1)}return function(){e=!0}},[Y,g,n,o,l,m,b,S,t,c,A]),{loading:w,syncedSecrets:A.current}}var nY=(0,F.x)({self:L.wp.colWithGap(16),footer:L.wp.colWithGap(0),ctaGroup:[L.wp.pt(12)],deployButton:L.wp.flex.grow(1),secretsModalButtons:[L.wp.pt(8)]}),nA=function(e){var n,t,u,m,b=e.deploymentId,S=e.replId,Y=e.initialSubdomain,A=e.provider,C=e.machine,x=e.secrets,k=e.fs,_=e.ports,E=e.dotReplit,R=e.onDeploy,I=e.onCancel,F=e.onError,T=e.initialSecretsSyncExpanded,P=e.openNetworkingPane,L=e.hasAgentSession,U=(0,v.uS)(),N=(0,v.Tp)().deployBuild,O=(0,d.HT)({skip:!b,variables:{id:null!=b?b:""},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){var n=(null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"?e.hostingDeployment:null;if(n){if(n.replitAppSubdomain&&(ef(n.replitAppSubdomain),eg(!0)),n.currentBuild.machineJob&&(eE(n.currentBuild.machineJob.timezone),eU(n.currentBuild.machineJob.crontab),n.currentBuild.machineJob.timeoutSeconds)){var t,r,i,a=n.currentBuild.machineJob.timeoutSeconds;a%3600==0?(r=a/3600,i="Hours"):(r=Math.floor(a/60),i="Minutes"),e0(r.toString()),e4(i)}var l=n.currentBuild.envVars.map(function(e){return{name:e.name,value:e.value}}),s=new Set(l.map(function(e){return e.name})),c=[],u=!0,d=!1,p=void 0;try{for(var f,h=eH[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value,g=m.name,v=m.value;s.has(g)||c.push({name:g,value:v})}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}ez((0,o._)(c).concat((0,o._)(l))),null!=n.currentBuild.isPrivate&&e9(n.currentBuild.isPrivate)}}}),M=O.data,B=O.loading,H=(0,d.TO)({variables:{replId:S}}).data,V=nS({replId:S,provider:A,fs:k,secrets:x,dotReplit:E,isNewDeployment:!b,onError:F,onOptions:function(e){e.appType&&es(e.appType),e.envVars&&ez(e.envVars),e.ignorePorts&&eV(e.ignorePorts),e.buildCommand&&ey(e.buildCommand),e.runCommand&&eY(e.runCommand),e.publicDir&&eq(e.publicDir)}}),j=V.loading,Z=V.syncedSecrets,q=(null==M?void 0:null===(u=M.hostingDeployment)||void 0===u?void 0:u.__typename)==="HostingDeployment"?M.hostingDeployment:null,K=null==q?void 0:q.currentBuild,$=void 0!==K,Q=(null==H?void 0:H.getRepl.__typename)==="Repl"?H.getRepl.authorizations:void 0,X=null==Q?void 0:Q.editDeploymentSecrets,en=null==Q?void 0:Q.editSecrets,et=(0,i._)((0,s.useState)(p.JX.Server),2),er=et[0],es=et[1],ed=(0,i._)((0,s.useState)(Y),2),ep=ed[0],ef=ed[1],eh=(0,i._)((0,s.useState)(!1),2),em=eh[0],eg=eh[1],ev=(0,i._)((0,s.useState)(null),2),ew=ev[0],ey=ev[1],eb=(0,i._)((0,s.useState)(null),2),eS=eb[0],eY=eb[1],eA=(0,i._)((0,s.useState)(void 0),2),eC=eA[0],ek=eA[1],e_=(0,i._)((0,s.useState)(null),2),eD=e_[0],eE=e_[1],eR=(0,i._)((0,s.useState)(void 0),2),eI=eR[0],eF=eR[1],eT=(0,i._)((0,s.useState)(null),2),eL=eT[0],eU=eT[1],eN=(0,i._)((0,s.useState)(void 0),2),eO=eN[0],eM=eN[1],eB=(0,i._)((0,s.useState)(null!==(m=null==K?void 0:K.envVars.map(function(e){return{name:e.name,value:e.value}}))&&void 0!==m?m:[]),2),eH=eB[0],ez=eB[1],eW=(0,i._)((0,s.useState)(!1),2),eG=eW[0],eV=eW[1],ej=(0,i._)((0,s.useState)(null),2),eZ=ej[0],eq=ej[1],eK=(0,i._)((0,s.useState)(void 0),2),e$=eK[0],eJ=eK[1],eQ=(0,i._)((0,s.useState)("10"),2),eX=eQ[0],e0=eQ[1],e1=(0,i._)((0,s.useState)(no[0]),2),e2=e1[0],e4=e1[1],e5=(0,i._)((0,s.useState)(!1),2),e8=e5[0],e3=e5[1],e6=(0,i._)((0,s.useState)(!1),2),e7=e6[0],e9=e6[1],ne=(0,D._P)({controlName:f.I0,logFlagToAnalytics:!1}),nn=(0,nf.o)({controlName:f.I0,default:!1}),nt=(0,ec.g)({secrets:x,replId:S}).devSecrets;(0,s.useEffect)(function(){(0,y.Ae)({context:"deploy_options"})},[]);var nr=(0,s.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,t=e.value;ez(function(e){return(0,c.jM)(e,function(e){e.push({name:null!=n?n:"",value:null!=t?t:""})})})},[ez]),ni=function(e,n){ez(function(t){return(0,c.jM)(t,function(t){t[e].name=n})})},nl=function(e,n){ez(function(t){return(0,c.jM)(t,function(t){t[e].value=n})})},ns=function(e){ez(function(n){return(0,c.jM)(n,function(n){n.splice(e,1)})})},nc=er!==p.JX.Static,nu=A===p.Q0.Gce,nd=er===p.JX.Static,nm=A!==p.Q0.Cron&&!(null==q?void 0:q.replitAppSubdomain),nb=A===p.Q0.Cron,nA=er===p.JX.Server||er===p.JX.CloudRun,nC=A!==p.Q0.Cron&&(ne||nn),nx=(n=(0,r._)(function(){var e,n,t,r,i,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t=(!nm||em)&&ep.length?ep:void 0,i=null!==(r=null==q?void 0:null===(n=q.currentBuild)||void 0===n?void 0:null===(e=n.machineJob)||void 0===e?void 0:e.failureNotifications)&&void 0!==r&&r,!t)return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,N({envVars:eH.filter(function(e){return(0,h.zV)(e)}),subdomain:t,machineConfigurationId:(null==C?void 0:C.configurationId)||void 0,maxMachineInstances:(null==C?void 0:C.maxInstances)||void 0,machineJob:eD&&eL?{timezone:eD,crontab:eL,timeoutSeconds:na(eX,e2),failureNotifications:i}:void 0,config:{buildCommand:ew,runCommand:eS,appType:er,ignorePorts:eG,publicDir:eZ},isPrivate:e7,hasAgentSession:L})];case 2:return a.sent(),R(),[3,4];case 3:if((o=a.sent())instanceof g.kS)return ek("Run command cannot be empty."),[2];if(o instanceof g.uF)return eJ("Public directory cannot be empty."),[2];if(o instanceof g.xF)return eF(o.message||"Invalid timezone."),[2];if(o instanceof g.f_)return eM(o.message||"Invalid crontab."),[2];return F(o.message),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)}),nk=(0,i._)((0,s.useState)(!1),2),n_=nk[0],nD=nk[1],nE=(0,i._)((0,s.useState)(!1),2),nR=nE[0],nI=nE[1],nF=(0,(0,v.mj)().getDeployabilityByProvider)(A,e7),nT=$?nF.redeploy.isAuthorized:nF.deploy.isAuthorized,nP=B||j||!nT||U===w.d.Preparing||e8,nL=nP||nm&&!em,nU=eH.map(function(e){return e.name}),nN=(t=(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return nD(!0),[4,x.addEntries(eH.map(function(e){return{key:e.name,value:e.value}}))];case 1:return e.sent(),nD(!1),nI(!1),[2]}})}),function(){return t.apply(this,arguments)}),nO=j?(0,l.FD)(l.FK,{children:[(0,l.Y)(el.r,{}),(0,l.Y)(el.r,{}),(0,l.Y)(el.r,{})]}):(0,l.FD)(l.FK,{children:[nb?(0,l.Y)(np,{crontab:eL,setCrontab:eU,crontabError:eO,timezone:eD,setTimezone:eE,timezoneError:eI,loading:B,timeoutValue:eX,setTimeoutValue:e0,timeoutUnits:e2,setTimeoutUnits:e4,setTimeoutValueError:e3}):null,nm?(0,l.Y)(el.K,{id:"primaryDomain",title:"Primary domain",information:"You can add more custom domains after deploying",children:(0,l.Y)(eo,{id:"primaryDomain",subdomain:ep,deploymentId:b||void 0,onChange:ef,updateValidity:eg})}):null,nC?(0,l.Y)(eP,{isPrivate:e7,setIsPrivate:e9,isRedeploy:$}):null,nd?(0,l.Y)(el.K,{id:"publicDir",title:"Public directory",information:"The public directory is the folder where the browser should start when serving your static site",children:(0,l.Y)(ee,{id:"publicDir",value:eZ,onChange:eq,loading:j,disabled:nP,error:e$})}):null,(0,l.Y)(el.K,{id:"buildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",optional:!0,children:(0,l.Y)(ee,{id:"buildCommand",value:ew,onChange:ey,loading:j,disabled:nP})}),nc?(0,l.Y)(el.K,{id:"runCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,l.Y)(ee,{id:"runCommand",value:eS,onChange:eY,loading:j,disabled:nP,error:eC})}):null,(0,l.Y)(el.K,{id:"envVars",title:"Deployment secrets",information:"Secrets, or environment variables, are private keys you can use to access APIs and services",children:(0,l.FD)(G.S,{gap:12,children:[eH.length>0?eH.map(function(e,n){var t=e.name,r=e.value;return(0,l.Y)(ei,{index:n,name:t,value:r,updateEnvVarName:function(e){return ni(n,e)},updateEnvVarValue:function(e){return nl(n,e)},removeEnvVar:function(){return ns(n)},disabled:nP,otherKeys:nU.filter(function(e,t){return t!==n}),devSecrets:nt,syncedSecrets:Z,canEditDevSecretsDisabledMessage:(null==en?void 0:en.isAuthorized)===!1?en.message:void 0,canEditDeploySecretsDisabledMessage:(null==X?void 0:X.isAuthorized)===!1?X.message:void 0},n)}):null,nt&&(null==en?void 0:en.isAuthorized)&&(null==X?void 0:X.isAuthorized)?(0,l.Y)(nh.H,{secrets:new Map(eH.map(function(e){return[e.name,e.value]})),otherSecrets:nt,otherEnvName:"workspace",onAddSecret:function(e){return nr({name:e.key,value:e.value})},initialExpanded:T}):null,(0,l.Y)(W.m_,{tooltip:null==X?void 0:X.message,isDisabled:null==X?void 0:X.isAuthorized,children:(0,l.Y)(ng.$n,{onClick:function(){(0,y.Rl)({replId:S}),nr()},text:"Add deployment secret",iconLeft:(0,l.Y)(ny.A,{}),disabled:B||!(null==X?void 0:X.isAuthorized)})})]})}),nu?(0,l.Y)(el.K,{id:"deploymentAppType",title:"App type",information:"Configure your app based on whether it needs to serve traffic from the web.",children:(0,l.Y)(ea,{appType:er,onChange:function(e){es(e),eV((e===p.JX.Server||e===p.JX.Worker)&&e===p.JX.Worker)}})}):null,nA?(0,l.Y)(ex,{ports:_,openNetworkingPane:P}):null]});return(0,l.FD)(l.FK,{children:[(0,l.FD)(G.S,{css:nY.self,children:[nO,(0,l.FD)(G.S,{css:nY.footer,children:[(0,l.Y)(eu.Y,{deployability:nF,isRedeploy:$}),(0,l.FD)(G.S,{css:nY.ctaGroup,row:!0,gap:8,children:[K?(0,l.Y)(ng.$n,{text:"Cancel",onClick:I}):null,(0,l.Y)(G.S,{css:nY.deployButton,children:(0,l.Y)(ng.$n,{colorway:"primary",onClick:nx,text:U===w.d.Preparing&&"Preparing..."||j&&"Fetching options..."||"Deploy",iconLeft:j||U===w.d.Preparing?(0,l.Y)(J.A,{}):(0,l.Y)(nw.A,{}),disabled:nL})})]})]})]}),(0,l.Y)(nv.a,{isOpen:nR,onRequestClose:function(){n_||nI(!1)},children:(0,l.FD)(G.S,{gap:8,children:[(0,l.Y)(z.EY,{variant:"subheadBig",children:"Copy secrets from Deployment to Development?"}),(0,l.Y)(z.EY,{children:"Are you sure you want to copy all of your secrets from Deployment to Development? Secrets already present in Development will be overwritten and lost permanently."}),(0,l.FD)(G.S,{css:nY.secretsModalButtons,row:!0,gap:8,justify:"end",children:[(0,l.Y)(ng.$n,{text:"Cancel",disabled:n_,onClick:function(){nI(!1)}}),(0,l.Y)(ng.$n,{text:"Yes, copy secrets",colorway:"negative",disabled:n_,loading:n_,onClick:nN})]})]})})]})}},84976:(e,n,t)=>{"use strict";t.d(n,{A:()=>T});var r=t(1889),i=t(45981),o=t.n(i),a=t(12694),l=t(90629),s=t(17844),c=t(12584),u=t(41114),d=t(50175),p=t(41140);function f(){var e=(0,c._)(["\n  mutation RemoveMultiplayerUser($replId: String!, $username: String!) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,c._)(["\n  mutation DeleteMultiplayerInvite($replId: String!, $email: String!) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          collaborators {\n            user {\n              ...MultiplayerUser\n            }\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var m={},g=(0,u.J1)(f(),p._9),v=(0,u.J1)(h(),p._9),w=t(96856),y=t(81239);let b=function(){var e,n,t=(0,y.A)(),r=t.showConfirm,i=t.showError,o=(0,w.X)(),c=function(e,n){l.ZQ({message:n}),l.Cp(Error(e.message)),i("Something unexpected happened, please try again.")},u=(0,a._)((e=(0,s._)({},m,{onError:function(e){return c(e,"useRemoveMultiplayerUser")},onCompleted:function(e){var n,t=null===(n=e.removeMultiplayerUser.user)||void 0===n?void 0:n.username;t?r("@".concat(t," removed")):r("User removed"),"data"===o.type&&o.refetch()}}),d.n(g,e)),2),p=u[0],f=u[1].loading,h=(0,a._)((n=(0,s._)({},m,{onError:function(e){return c(e,"useDeleteMultiplayerInviteMutation")},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInvite.__typename){i(e.deleteMultiplayerInvite.message);return}if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var n=e.deleteMultiplayerInvite.email;r("Invite canceled for ".concat(n))}}}),d.n(v,n)),2);return{removeMultiplayerUser:p,loadingRemoveUser:f,deleteMultiplayerInvite:h[0],loadingDeleteInvite:h[1].loading}};var S=t(56871),Y=t(6680),A=t(61234),C=t(43974),x=t(26705),k=t(40043),_=t(4343),D=t(35869),E=t(9200),R=t(38828),I=t(28365),F=(0,A.x)({root:[C.wp.px(16),C.wp.py(4),C.wp.flex.row,C.wp.rowWithGap(8),C.wp.align.center,C.wp.cursor.default,C.wp.justify.spaceBetween],userContainer:C.wp.color.foregroundDefault,userContainer_pending:[C.wp.flex.grow(1),C.wp.flex.row,C.wp.rowWithGap(8),C.wp.align.center,{fontStyle:"italic"}]});let T=function(e){var n,t=e.isPendingInvitation,i=e.canEditMultiplayers,a=e.replId,l=b(),s=l.removeMultiplayerUser,c=l.loadingRemoveUser,u=l.deleteMultiplayerInvite,d=l.loadingDeleteInvite,p=!t,f=p?(0,r.Y)(E.A,{size:"m",url:e.user.image,username:e.user.username,fullName:e.user.fullName}):(0,r.Y)(R.A,{color:Y.LU.outlineDefault,size:32}),h=p?e.user.username:e.email;return(0,r.FD)(D.S,{css:F.root,children:[p?(0,r.Y)(S.A,{username:e.user.username,children:(0,r.Y)(o(),{legacyBehavior:!0,href:"/@".concat(e.user.username),passHref:!0,children:(0,r.Y)(D.D.a,{css:F.userContainer,children:(0,r.Y)(_.K,{username:e.user.username,src:null!==(n=e.user.image)&&void 0!==n?n:null})})})}):(0,r.FD)(D.S,{css:[F.userContainer_pending],children:[f,(0,r.Y)(k.EY,{color:p?"default":"dimmest",multiline:!1,children:h})]}),(0,r.FD)(D.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(k.EY,{color:"dimmest",variant:"small",multiline:!1,children:e.isPendingInvitation?"Invited":"Can edit"}),i?(0,r.Y)(x.K0,{alt:p?"Remove member":"Cancel invitation",onClick:function(){i&&!c&&!d&&(p?s({variables:{replId:a,username:e.user.username}}):u({variables:{replId:a,email:e.email}}))},children:(0,r.Y)(I.A,{size:12})}):null]})]})}},85077:(e,n,t)=>{"use strict";t.d(n,{D:()=>o});var r=t(11597),i=function(e){if(1===e.length)return e[0].type===r.pt.File?"file":"folder";if(e.length>1){var n=e.filter(function(e){return e.type===r.pt.File}).length,t=e.filter(function(e){return e.type===r.pt.Directory}).length,i=n>1?"files":"file",o=t>1?"folders":"folder",a="file";return n>0&&t>0?a="".concat(i," and ").concat(o):n>0?a="".concat(i):t>0&&(a="".concat(o)),"".concat(a)}return""};function o(e){var n=i(e),t=1===e.length?n:"".concat(e.length," ").concat(n),r=e.slice(0,5).map(function(e){return e.path}).join(", ");return{name:t,description:e.length>5?"".concat(r," and ").concat(e.length-5," more ").concat(i(e.slice(5))):r,confirmDescription:t}}},85144:(e,n,t)=>{"use strict";t.d(n,{A:()=>c,E:()=>u});var r=t(1889),i=t(6680),o=t(43974),a=t(40043),l=t(35869),s=t(74967);let c=function(e){var n=e.textVariant,t=e.showImage;return(0,r.FD)(l.S,{css:[o.wp.center,o.wp.textAlign.center,o.wp.px(16),o.wp.colWithGap(8),o.wp.flex.growAndShrink(1)],children:[(0,r.Y)(u,{textVariant:n}),t?(0,r.Y)(s.A,{src:"/public/images/ghostwriter/orb.png",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(i.LU.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1}):null]})};function u(e){var n=e.textVariant;return(0,r.FD)(a.EY,{variant:n,children:["AI Chat is currently unavailable. For more information, visit"," ",(0,r.Y)("a",{href:"https://status.replit.com",target:"_blank",children:"our status page."})]})}},86198:(e,n,t)=>{"use strict";t.d(n,{A:()=>m});var r=t(12694),i=t(21462),o=t(17844),a=t(12584),l=t(41114),s=t(50175);function c(){var e=(0,a._)(["\n  mutation ReplFsUpdated($replId: String!) {\n    updateReplTimeUpdated(id: $replId) {\n      ... on Repl {\n        id\n        timeUpdated\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},d=(0,l.J1)(c()),p=t(51578),f=t(31930),h=t(67337);function m(){var e,n,t,a,l,c,m,g=(0,r._)((e=(0,o._)({},u,void 0),s.n(d,e)),1)[0],v=(0,h.A)().fs,w=(a=(0,h.A)().container,c=(l=(0,r._)((0,i.useState)(null!==(t=null===(n=a.getContext())||void 0===n?void 0:n.repl)&&void 0!==t?t:null),2))[0],m=l[1],(0,i.useEffect)(function(){return a.onConnectionStateChanged(function(e){var n,t;e===f.KN.CONNECTED&&m(null!==(t=null===(n=a.getContext())||void 0===n?void 0:n.repl)&&void 0!==t?t:null)})},[m,a]),c),y=null==w?void 0:w.authorizations.editFileContents.isAuthorized,b=null==w?void 0:w.id;(0,i.useEffect)(function(){if(y&&b){var e=(0,p.A)(function(){return g({variables:{replId:b}})},{wait:6e4,maxWait:6e5}),n=v.onStatusChange(function(){e()});return function(){e.isScheduled()&&e.flush(),n()}}},[v,b,y,g])}},86217:(e,n,t)=>{"use strict";t.d(n,{A:()=>G});var r=t(12694),i=t(1889),o=t(45981),a=t.n(o),l=t(21462),s=t(17844),c=t(12584),u=t(41114),d=t(50175),p=t(58627);function f(){var e=(0,c._)(["\n  mutation DeleteThreadMessage($id: String!) {\n    deleteThreadMessage(messageId: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var h={},m=(0,u.J1)(f(),p.A9),g=t(31167),v=t(80865),w=t(81239),y=t(60562),b=t(17040),S=t(79833),Y=t(29206),A=t(5275),C=t(26394),x=t(80481),k=t(35135),_=t(14677),D=t(45771),E=t(6680),R=t(25584),I=["a","pre","code","em","strong","p","ul","ol","li","img","del","h1","h2","h3","h4","h5","h6","sup","sub","br","hr","blockquote","span","div"];let F=(0,l.memo)(function(e){var n=e.content,t=(0,x.gc)("fontSize").preferences.fontSize,r=(0,l.useCallback)(function(e){return(0,i.Y)(k.A,(0,s._)({},e))},[]);return(0,i.Y)("div",{css:[{"& ol":{paddingInlineStart:"20px"},"& ul":{paddingInlineStart:"20px",listStyle:"initial"}}],children:(0,i.Y)(b.$,{css:(0,D.AH)({wordBreak:"break-word",boxSizing:"border-box",whiteSpace:"normal",lineHeight:1.5,color:E.LU.foregroundDefault,fontFamily:"".concat(E.LU.fontFamilyDefault," !important"),fontSize:t,textSizeAdjust:"100%","h1, h2, h3, h4, h5, h6":{color:E.LU.foregroundDefault,fontWeight:E.LU.fontWeightMedium,marginBottom:E.LU.space16,lineHeight:1.25,wordWrap:"break-word"},"h1, h2":{paddingBottom:E.LU.space8,borderBottom:"1px solid ".concat(E.LU.backgroundHigher),marginTop:E.LU.space32},h1:{fontSize:"2em"},h2:{fontSize:"1.5em"},h3:{fontSize:"1.25em",marginTop:E.LU.space24},h4:{fontSize:"1em",marginTop:E.LU.space16},h5:{fontSize:"0.875em"},h6:{color:E.LU.foregroundDimmer,fontSize:"0.85em"},".anchor":{float:"left",lineHeight:1,marginLeft:"calc(-1 * ".concat(E.LU.space16,")"),paddingRight:E.LU.space4},".anchor:focus":{outline:"none"},p:{marginBottom:E.LU.space16,fontSize:t,fontFamily:"".concat(E.LU.fontFamilyDefault," !important")},"p:last-child":{marginBottom:0},table:{borderSpacing:0,borderCollapse:"collapse",display:"block",width:"100%",overflow:"auto",marginBottom:E.LU.space16,wordBreak:"normal",th:{fontWeight:E.LU.fontWeightMedium},"td, th":{padding:"".concat(E.LU.space8," ").concat(E.LU.space12),border:"1px solid ".concat(E.LU.backgroundHighest),minWidth:"16ch"},tr:{backgroundColor:E.LU.backgroundDefault,borderTop:"1px solid ".concat(E.LU.backgroundHighest)},"tr:nth-of-type(2n)":{backgroundColor:E.LU.backgroundRoot}},"hr:after":{clear:"both"},"li > p":{marginBottom:0},li:{marginTop:E.LU.space4},dd:{marginLeft:0},"ol, ul":{paddingLeft:E.LU.space16,marginTop:0,marginBottom:0},ul:{listStyle:"initial",listStyleType:"disc",marginBottom:E.LU.space16},ol:{listStyle:"decimal",marginBottom:E.LU.space16},"ol ol, ol ul, ul ol, ul ul":{paddingLeft:E.LU.space16,marginTop:0,marginBottom:0,paddingBottom:0},"ul ul":{listStyleType:"circle"},"ul ul ul":{listStyleType:"square"},"ol ol, ul ol":{listStyleType:"lower-roman"},"ol ol ol, ol ul ol, ul ol ol, ul ul ol":{listStyleType:"lower-alpha"},pre:{fontFamily:"".concat(E.LU.fontFamilyCode," !important"),margin:"".concat(E.LU.space16," 0"),borderRadius:4,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",color:E.LU.foregroundDefault},"pre:last-child":{marginBottom:"0 !important"},blockquote:{padding:"0 1em",marginBottom:E.LU.space16,borderLeft:"".concat(E.LU.space2," solid ").concat(E.LU.backgroundHighest),paddingLeft:E.LU.space16},"blockquote > *":{color:"".concat(E.LU.foregroundDimmer," !important")},"blockquote > :last-child":{marginBottom:"0 !important",borderBottom:"none !important"},"blockquote > :first-child":{marginTop:"0 !important"},kbd:{display:"inline-block",padding:"3px 5px",font:"11px ".concat(E.LU.fontFamilyCode),color:E.LU.foregroundDimmer,verticalAlign:"middle",backgroundColor:E.LU.backgroundHigher,border:"none",borderRadius:3,boxShadow:"inset 0 -1px 0 ".concat(E.LU.backgroundHighest)},a:{color:E.LU.accentPrimaryStronger,backgroundColor:"initial"},"> :first-child":{marginTop:"0 !important",paddingTop:"0 !important"},"> :last-child":{borderBottom:"none !important",marginBottom:"0 !important",paddingBottom:"0 !important"},'[type="checkbox"]':{boxSizing:"border-box",marginRight:E.LU.space8,padding:0},details:{marginBottom:E.LU.space16,display:"block",background:E.LU.backgroundHigher,borderRadius:E.LU.borderRadius4,padding:E.LU.space16},summary:{display:"list-item",userSelect:"none",cursor:"pointer",fontWeight:E.LU.fontWeightBold},"details[open] > summary":{borderBottom:"1px solid ".concat(E.LU.backgroundHighest),marginBottom:E.LU.space16,paddingBottom:E.LU.space16},hr:{height:1,backgroundColor:E.LU.backgroundHigher,margin:"".concat(E.LU.space24," 0"),border:0}}),allowedElements:I,remarkPlugins:[R.yN,A.A,C.A,Y.A],linkTarget:"_blank",rehypePlugins:[S.A],components:{code:r,img:_.A},children:n})})});var T=t(43974),P=t(18063),L=t(3910),U=t(40043),N=t(37407),O=t(4343),M=t(35869),B=t(68190),H=t(51732),z=t(6761),W=t(19915);let G=(0,l.memo)(function(e){var n,t=e.thread,o=e.message,c=(0,g.T)(),u=(0,w.A)().showError,p=(0,r._)((n=(0,s._)({},h,{onError:function(e){u(e.message)},onCompleted:function(e){var n;(null===(n=e.deleteThreadMessage)||void 0===n?void 0:n.__typename)==="UserError"&&u(e.deleteThreadMessage.message)}}),d.n(m,n)),2),f=p[0],b=p[1].loading,S=(0,v._P)({controlName:"flag-threads-dropdown-menu",default:!1,type:"boolean",logFlagToAnalytics:!1}),Y=!!(t&&t.indexStart===t.indexEnd),A={statusBanner:{resolved:"Thread resolved. Re-open it any time in the inbox.",unresolved:"Thread re-opened"},outdated:"Outdated",outdatedTooltip:"The code has changed since the comment was left"},C=(0,l.useMemo)(function(){return{diff:(0,y.G)(o.timeCreated),full:(0,y.n)(o.timeCreated)}},[o]);if(!o.user)return null;var x=c===o.user.id?[{label:"Delete",icon:(0,i.Y)(W.A,{}),isDestructive:!0}]:[];return(0,i.FD)(M.S,{children:[(0,i.FD)(M.S,{css:[T.wp.pb(4)],row:!0,justify:"space-between",children:[(0,i.FD)(M.S,{row:!0,align:"center",gap:8,children:[(0,i.Y)(a(),{legacyBehavior:!0,passHref:!0,href:"/@".concat(o.user.username),children:(0,i.Y)("a",{children:(0,i.Y)(O.K,{small:!0,src:o.user.image,username:o.user.username})})}),(0,i.Y)("p",{children:(0,i.Y)(N.m_,{tooltip:C.full,placement:"top",children:(0,i.Y)(U.EY,{variant:"small",color:"dimmer",multiline:!1,children:C.diff})})}),x.length>0&&S?(0,i.Y)(B.A,{items:x,onItemClick:function(e){"Delete"!==e.label||b||f({variables:{id:o.id}})},label:"More"}):null]}),Y?(0,i.Y)(N.m_,{tooltip:A.outdatedTooltip,children:(0,i.Y)(P.a,{colorway:"negative",text:A.outdated})}):null]}),"StatusMessageContentType"===o.content.__typename&&"resolved"===o.content.status?(0,i.Y)(L.N,{colorway:"positive",icon:(0,i.Y)(z.A,{}),text:A.statusBanner.resolved}):null,"StatusMessageContentType"===o.content.__typename&&"unresolved"===o.content.status?(0,i.Y)(L.N,{colorway:"primary",icon:(0,i.Y)(H.A,{}),text:A.statusBanner.unresolved}):null,"TextMessageContentType"===o.content.__typename&&(0,i.Y)(F,{content:o.content.text})]})})},86308:(e,n,t)=>{"use strict";t.d(n,{ET:()=>S,Mk:()=>m,c_:()=>h,eP:()=>y,v4:()=>v});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(50175),s=t(58627);function c(){var e=(0,i._)(["\n  query CodemirrorThread($id: String!) {\n    thread: annotationAnchor(id: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation CreateThread(\n    $thread: AnnotationAnchorInput!\n    $message: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThread: createAnnotationAnchor(\n      annotationAnchor: $thread\n      annotationMessage: $message\n      highlight: $highlight\n    ) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation UpdateThread($id: String!, $changes: AnnotationAnchorChangesInput!) {\n    updateThread: updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation CreateThreadMessage(\n    $replId: String!\n    $threadId: String!\n    $threadMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThreadMessage: createAnnotationMessage(\n      replId: $replId\n      anchorId: $threadId\n      annotationMessage: $threadMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var f={},h=(0,o.J1)(c(),s.A9);function m(e){var n=(0,r._)({},f,e);return a.I(h,n)}var g=(0,o.J1)(u(),s.A9);function v(e){var n=(0,r._)({},f,e);return l.n(g,n)}var w=(0,o.J1)(d(),s.A9);function y(e){var n=(0,r._)({},f,e);return l.n(w,n)}var b=(0,o.J1)(p(),s.A9);function S(e){var n=(0,r._)({},f,e);return l.n(b,n)}},86351:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(46434),i=t(29935),o=t(82643),a=t(60990),l=t(52690);function s(e){var n;(0,a.b)((n=(0,i._)(function(n,t){var i,a,s,c,u,d,p,f,h,m,g;return(0,o.YH)(this,function(o){switch(o.label){case 0:i=t.signal,s=(a=n.agentToolRun.workspace.stream({},{signal:i})).reqWritable,c=a.resReadable,u=!1,d=!1,o.label=1;case 1:o.trys.push([1,7,8,13]),f=(0,r._)(c),o.label=2;case 2:return[4,f.next()];case 3:if(!(u=!(h=o.sent()).done))return[3,6];if(!(m=h.value).ok||"run"!==m.payload.$kind)return[3,5];return e.getRunState()===l.ll.RUNNING&&e.stopRun(),[4,e.run(l.QG.AGENT_RUN)];case 4:o.sent(),s.write({$kind:"ok"}),o.label=5;case 5:return u=!1,[3,2];case 6:return[3,13];case 7:return g=o.sent(),d=!0,p=g,[3,13];case 8:if(o.trys.push([8,,11,12]),!(u&&null!=f.return))return[3,10];return[4,f.return()];case 9:o.sent(),o.label=10;case 10:return[3,12];case 11:if(d)throw p;return[7];case 12:return[7];case 13:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[e])}},86593:(e,n,t)=>{"use strict";t.d(n,{Z:()=>l,k:()=>a});var r=t(12694),i=t(86105),o=t(19761);function a(e){var n=new Map;e.forEach(function(e){var t=e.path.slice(0,-1),r="section:"+(0,o.p)(t),i=n.get(r);if(i)i.items.push(e);else{var a=t[t.length-1],l=(null==a?void 0:a.data.type)==="group"||1===t.length;n.set(r,{type:"section",path:t,score:e.match.score,items:[e],unlabeled:l,key:r,tooltip:"context"===a.data.type?null==a?void 0:a.data.tooltip:void 0})}});var t=(0,i._)(n.entries()).sort(function(e,n){var t=(0,r._)(e,2),i=(t[0],t[1]),o=(0,r._)(n,2);return(o[0],o[1]).score-i.score}),a={items:[],rows:[]},l=0;t.forEach(function(e){var n=(0,r._)(e,2),t=n[0],i=n[1];a.rows.push({type:i.type,key:t,path:i.path,unlabeled:i.unlabeled,tooltip:i.tooltip}),i.items.forEach(function(e){a.items.push(e),a.rows.push({type:"item",item:e,index:l++})})});var s=a.rows[0];return(null==s?void 0:s.type)==="section"&&s.unlabeled&&a.rows.shift(),a}function l(e,n){var t=[],r=!0,o=!1,a=void 0;try{for(var l,s=e.slice(n)[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value;"group"!==c.data.type&&t.push(c.data.label)}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return(0,i._)(new Set(t))}},86635:e=>{e.exports={container:"SuggestDeploy_container__mhqVk",assistant:"SuggestDeploy_assistant__3QtV_",message:"SuggestDeploy_message__iTjaA",cannotDeploy:"SuggestDeploy_cannotDeploy__k4COd",status:"SuggestDeploy_status__pC0MY",isConfiguredManually:"SuggestDeploy_isConfiguredManually__AoTAt",isStale:"SuggestDeploy_isStale__2mrmU",properties:"SuggestDeploy_properties__fshqC",propertiesHeader:"SuggestDeploy_propertiesHeader__Coxab",propertiesTitle:"SuggestDeploy_propertiesTitle__04Wis",propertiesButton:"SuggestDeploy_propertiesButton__xb2aJ",isExpanded:"SuggestDeploy_isExpanded__GCiLA",propertyListWrapper:"SuggestDeploy_propertyListWrapper__Ie_1h",propertyList:"SuggestDeploy_propertyList__eFFXV",propertyTerm:"SuggestDeploy_propertyTerm__96oby"}},86752:(e,n,t)=>{"use strict";t.d(n,{Bg:()=>Y,XH:()=>b,aW:()=>g,jN:()=>w});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(50175),s=t(40085);function c(){var e=(0,i._)(["\n  fragment HostingActivityLogBuild on HostingBuild {\n    id\n    status\n    hasDeployLogs\n    provider\n    timeCreated\n    user {\n      id\n      displayName\n      username\n      fullName\n      image\n    }\n    debugSummary {\n      ...BuildDebugSummary\n    }\n    rollbackSourceBuildId\n    envVars {\n      name\n      value\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment HostingActivityLogLine2 on HostingActivityLog {\n    id\n    build {\n      ...HostingActivityLogBuild\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n    isRollbackCandidate\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  query HostingDeploymentActivityLogs2(\n    $replId: String!\n    $after: String\n    $count: Int\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n              rollbackSourceBuildId\n              envVars {\n                name\n                value\n              }\n            }\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine2\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  query HostingActivityLogBuildHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n        }\n      }\n    }\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation RollbackHostingBuild($input: RollbackHostingBuildInput!) {\n    rollbackHostingBuild(input: $input) {\n      ... on RollbackHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}var h={},m=(0,o.J1)(c(),s.mY),g=(0,o.J1)(u(),m),v=(0,o.J1)(d(),g);function w(e){var n=(0,r._)({},h,e);return a.I(v,n)}var y=(0,o.J1)(p());function b(e){var n=(0,r._)({},h,e);return a.I(y,n)}var S=(0,o.J1)(f(),s.UQ,s.Zc);function Y(e){var n=(0,r._)({},h,e);return l.n(S,n)}},86832:(e,n,t)=>{"use strict";t.d(n,{G:()=>_,Y:()=>D});var r=t(29935),i=t(12694),o=t(82643),a=t(1889),l=t(90629),s=t(10274),c=t(23718),u=t(95758),d=t(53799),p=t(6680),f=t(61234),h=t(43974),m=t(78559),g=t(40043),v=t(35869),w=t(79626),y=t(68924),b=t(97783),S=t(32633),Y=(0,f.x)({root:[h.wp.flex.growAndShrink(1),h.wp.p(8)],singleLine:[{whiteSpace:"nowrap",fontFamily:p.LU.fontFamilyCode},h.wp.truncate,h.wp.color.foregroundDimmest]});function A(e){var n=e.path,t=e.line;return(0,a.FD)(v.S,{css:Y.root,gap:4,align:"start",children:[(0,a.FD)(v.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(m.A,{path:n,size:12}),(0,a.FD)(g.EY,{variant:"small",color:"dimmest",multiline:!1,children:[n.replace(/^\.\//,""),":",t.lineNumber]})]}),(0,a.Y)(v.S,{css:Y.singleLine,children:(0,a.Y)(y.eK,{source:t.content,matches:t.matches})})]})}function C(){return(0,a.FD)(v.S,{css:[h.wp.px(8),h.wp.rowWithGap(8),h.wp.align.center],children:[(0,a.Y)(S.A,{}),(0,a.Y)(g.EY,{color:"dimmest",multiline:!1,children:"Something went wrong searching your App's contents. Please try again."})]})}function x(){return(0,a.FD)(v.S,{row:!0,gap:8,css:[h.wp.p(8),h.wp.align.center],children:[(0,a.Y)(S.A,{}),(0,a.Y)(g.EY,{color:"dimmest",multiline:!1,children:"Displaying only part of the results, try being more specific with your search."})]})}function k(){return(0,a.Y)(v.S,{row:!0,gap:8,css:[h.wp.p(8),h.wp.align.center],children:(0,a.Y)(g.EY,{color:"dimmest",multiline:!1,children:"Nothing came up searching your App's content."})})}var _=(0,u.FM)({cmdOrCtrl:!0,shift:!0,key:"f"});function D(e){var n,t,u=(0,d.v)({container:e.container});return(0,c.gu)({type:"context",description:"Search through your files",label:"Search",icon:(0,a.Y)(b.A,{}),keyboardShortcut:e.keyboardShortcut?_:void 0},{match:(0,c.u4)({defaultScore:w.q.searchFileContents}),commands:(n=(0,r._)(function(n){var r,c,d,p,f,h,g,y,b,Y,_,D;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(!n.searchQuery||!n.active&&e.activeOnly)return[2,[]];return t=r=Math.random(),[4,u({query:n.searchQuery})];case 1:if(d=(c=o.sent()).results,p=c.error,f=c.isPartialResult,r!==t)return[2,[]];if(null!==p){if(!n.active)return[2,[]];return l.Cp(Error("Search file contents returned an error"),{extra:{message:p}}),[2,[{data:{type:"error",label:"error",icon:(0,a.Y)(S.A,{})},match:function(){return{score:1,render:{content:(0,a.Y)(C,{})}}}}]]}h=[],g=!0,y=!1,b=void 0;try{for(Y=function(){var t=(0,i._)(D.value,2),r=t[0];t[1].forEach(function(t){var i=t.matches[0].column;h.push({match:function(){var e=(0,s.w2)(n.searchQuery,t.content,{filterLowMatchScores:!0});return{score:Math.floor(((null==e?void 0:e.score)||1)*w.B.fileContentsSearch),render:{height:60,content:(0,a.Y)(A,{path:r,line:t})}}},data:{type:"action",label:r,icon:(0,a.Y)(m.A,{path:r}),key:[r,t.lineNumber,i].join(":"),run:function(){e.openFile({path:r,line:t.lineNumber,col:i})}}})})},_=Object.entries(d)[Symbol.iterator]();!(g=(D=_.next()).done);g=!0)Y()}catch(e){y=!0,b=e}finally{try{g||null==_.return||_.return()}finally{if(y)throw b}}if(0===h.length&&n.active)return[2,[{data:{type:"output",label:"",icon:(0,a.Y)(v.S,{})},match:function(){return{score:1,render:{content:(0,a.Y)(k,{})}}}}]];if(n.active){if(0===h.length)return[2,[{data:{type:"output",label:"",icon:(0,a.Y)(v.S,{})},match:function(){return{score:1,render:{content:(0,a.Y)(k,{})}}}}]];f&&h.push({data:{type:"error",label:"error",icon:(0,a.Y)(S.A,{})},match:function(){return{score:1/0,render:{content:(0,a.Y)(x,{})}}}})}return[2,h]}})}),function(e){return n.apply(this,arguments)})})}},86960:(e,n,t)=>{"use strict";t.d(n,{K:()=>h,r:()=>m});var r=t(1889),i=t(6680),o=t(61234),a=t(62493),l=t(43974),s=t(31618),c=t(40043),u=t(37407),d=t(35869),p=t(20627),f=(0,o.x)({self:[l.wp.colWithGap(8)],selfGrow:[l.wp.colWithGap(8),l.wp.flex.grow(1)],label:[l.wp.maxWidth("100%")],labelText:[l.wp.flex.growAndShrink(1),{textOverflow:"ellipsis"}],labelTextWarning:[l.wp.flex.growAndShrink(1),l.wp.color.orangeStrongest,{textOverflow:"ellipsis"}],header:[l.wp.display.flex,l.wp.flex.row,l.wp.justify.spaceBetween,l.wp.align.center],labelLoading:[a.S.foregroundPulse(),l.wp.width(200),l.wp.borderRadius(8)],inputLoading:[a.S.foregroundPulse(),l.wp.borderRadius(8)]}),h=function(e){var n=e.id,t=e.title,o=e.information,a=e.optional,l=e.detail,s=e.warning,h=e.actions,m=e.children,g=e.grow;return(0,r.FD)(d.S,{css:void 0!==g&&g?f.selfGrow:f.self,children:[(0,r.FD)(d.S,{css:f.header,children:[(0,r.FD)(d.S,{tag:"label",htmlFor:n,css:f.label,row:!0,gap:8,align:"center",children:[(0,r.Y)(c.EY,{color:"dimmer",multiline:!1,children:t}),(0,r.Y)(u.m_,{tooltip:o,children:(0,r.Y)(p.A,{color:i.LU.foregroundDimmest})}),void 0!==a&&a?(0,r.Y)(c.EY,{css:f.labelText,variant:"small",color:"dimmest",multiline:!1,children:"optional"}):null,l?(0,r.Y)(c.EY,{css:f.labelText,variant:"small",color:"dimmest",multiline:!1,children:l}):null,s?(0,r.Y)(c.EY,{css:f.labelTextWarning,variant:"small",multiline:!1,children:s}):null]}),h?(0,r.Y)(d.S,{row:!0,gap:4,children:h}):null]}),m]})},m=function(){return(0,r.FD)(d.S,{gap:8,children:[(0,r.Y)(d.S,{css:f.header,children:(0,r.Y)(d.S,{css:f.labelLoading,row:!0,gap:8,align:"center",children:(0,r.Y)(c.EY,{color:"dimmer",multiline:!1,children:"\xa0"})})}),(0,r.Y)(d.S,{css:f.inputLoading,children:(0,r.Y)(s.pd,{disabled:!0})})]})}},87098:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M18 3.25a.75.75 0 0 1 .75.75v16a.75.75 0 0 1-1.5 0V4a.75.75 0 0 1 .75-.75Zm-6 6a.75.75 0 0 1 .75.75v10a.75.75 0 0 1-1.5 0V10a.75.75 0 0 1 .75-.75Zm-6 6a.75.75 0 0 1 .75.75v4a.75.75 0 0 1-1.5 0v-4a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},87208:(e,n,t)=>{"use strict";t.d(n,{UI:()=>s,dz:()=>l});var r=t(21462),i=t(44370),o=t(99667),a=(0,i.eU)(!1),l=function(e){var n=(0,o.ob)(a);(0,r.useEffect)(function(){return e.watch(function(e){var t,r;if(e.error){if("NOT_FOUND"===e.error){n(!0);return}n(!1)}n(!(null===(r=e.config)||void 0===r?void 0:null===(t=r.autoSave)||void 0===t?void 0:t.disabled))})},[e,n])},s=function(){return(0,o.h)(a)}},87216:(e,n,t)=>{"use strict";t.d(n,{F:()=>Y});var r=t(46434),i=t(29935),o=t(12694),a=t(82643),l=t(1889),s=t(21462),c=t(75152),u=t(24998),d=t(16907),p=t(27609),f=t(63892),h=t(60990),m=t(39593),g=t(93682),v=t(44885),w=t(40043),y=t(35869),b=t(6761),S=c.ZU.Object({targetReplId:c.ZU.String(),sourceReplId:c.ZU.String(),bucketId:c.ZU.String()});function Y(){var e,n=(0,o._)((0,s.useState)(null),2),t=n[0],c=n[1],Y=(0,d.A)(),A=(0,m.i)();return(0,h.b)((e=(0,i._)(function(e,n){var t,i,o,l,s,d,h,m,g,v,w,y;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t=n.session,i=n.signal,!Y||!A)return[2];l=(o=e.replspaceApi.init.stream({session:t.from},{signal:i})).resReadable,s=o.reqWritable,d=!1,h=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),g=function(){var e=w.value;if(!e.ok||"requestDefaultBucketAccess"!==e.payload.$kind)return"continue";var n=e.payload.nonce;(0,f.u4)(f.AZ.MODAL_VIEWED,{modalName:"default_bucket_access_modal"}),c(function(){return function(e){if(!e){c(null),s.write({$kind:"allowDefaultBucketAccess",nonce:n,result:{status:"error",message:"user canceled"}});return}(0,p.B2)("/object-storage/replit/allowDefaultBucketAccess/targetRepl/".concat(encodeURIComponent(Y),"/sourceRepl/Dotfiles.").concat(encodeURIComponent(A.username)),{}).then(function(e){u.WT.Check(S,e)?s.write({$kind:"allowDefaultBucketAccess",nonce:n,result:{status:"ok",targetReplId:e.targetReplId,sourceReplId:e.sourceReplId,bucketId:e.bucketId}}):s.write({$kind:"allowDefaultBucketAccess",nonce:n,result:{status:"error",message:JSON.stringify(u.WT.Errors(S,e))}})}).catch(function(e){s.write({$kind:"allowDefaultBucketAccess",nonce:n,result:{status:"error",message:"".concat(e)}})}).finally(function(){c(null)})}})},v=(0,r._)(l),a.label=2;case 2:return[4,v.next()];case 3:if(!(d=!(w=a.sent()).done))return[3,5];g(),a.label=4;case 4:return d=!1,[3,2];case 5:return[3,12];case 6:return y=a.sent(),h=!0,m=y,[3,12];case 7:if(a.trys.push([7,,10,11]),!(d&&null!=v.return))return[3,9];return[4,v.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(h)throw m;return[7];case 11:return[7];case 12:return s.close(),[2]}})}),function(n,t){return e.apply(this,arguments)}),[Y,A]),(0,l.Y)(v.a,{isOpen:"function"==typeof t,onRequestClose:function(){null==t||t(!1),(0,f.u4)(f.AZ.DEFAULT_BUCKET_ACCESS_MODAL_ACCEPTED,{response:"close"}),c(null)},children:(0,l.FD)(y.S,{gap:16,children:[(0,l.Y)(w.Y9,{variant:"headerDefault",level:3,children:"Allow Dotfiles Object Storage Bucket access"}),(0,l.Y)(w.EY,{children:"Do you want the Object Storage bucket associated with your Dotfiles Repl to be accessible in this Repl? If your Dotfiles Repl has any secrets, they will be accessible to this Repl too."}),(0,l.Y)(w.EY,{children:"If you did not install the Replit dotfiles support, you should deny this."}),(0,l.FD)(y.S,{justify:"end",row:!0,gap:16,children:[(0,l.Y)(g.$n,{onClick:function(){null==t||t(!1),(0,f.u4)(f.AZ.DEFAULT_BUCKET_ACCESS_MODAL_ACCEPTED,{response:"deny"}),c(null)},text:"Deny"}),(0,l.Y)(g.$n,{onClick:function(){null==t||t(!0),(0,f.u4)(f.AZ.DEFAULT_BUCKET_ACCESS_MODAL_ACCEPTED,{response:"confirm"}),c(null)},iconLeft:(0,l.Y)(b.A,{}),text:"Allow for this Repl",colorway:"primary"})]})]})})}},87461:(e,n,t)=>{"use strict";t.d(n,{k:()=>y});var r=t(12694),i=t(1889),o=t(21462),a=t(26496),l=t(317),s=t(8952),c=t(5644),u=t(35482),d=t(61234),p=t(43974),f=t(93682),h=t(2527),m=t(40043),g=t(35869),v=t(82478),w=(0,d.x)({root:[p.wp.py(8),p.wp.px(12),p.wp.borderRadius()],text:[p.wp.textAlign.center],buttonContainer:[p.wp.width("100%"),p.wp.justify.center],chatButton:[p.wp.width("40%")],upgradeButton:[p.wp.width("60%")]});function y(e){var n=e.openPane,t=(0,u.eg)(),d=(0,r._)((0,o.useState)(!1),2),p=d[0],y=d[1],b=(0,c.A)();return(0,i.FD)(h.ui,{elevated:!0,css:w.root,gap:8,align:"center",children:[(0,i.FD)(m.EY,{css:w.text,children:["You've reached your free usage limit. Upgrade to ",l.en," to continue using ",a.g$,"."]}),(0,i.FD)(g.S,{css:w.buttonContainer,row:!0,gap:6,children:[t?null:(0,i.Y)(f.$n,{text:"Open ".concat(a.BP),onClick:function(){return n({type:"ghostwriterChat"})},css:w.chatButton}),(0,i.Y)(f.$n,{text:"Upgrade to ".concat(l.en),iconLeft:(0,i.Y)(v.A,{}),onClick:function(){return y(!0)},colorway:"brand",css:w.upgradeButton})]}),(0,i.Y)(s.A,{isOpen:p,onClose:function(){return y(!1)},type:"purchase",analyticsContext:{upgrade:{context:"agent_freemium_quota"}},onPurchaseComplete:function(){return b()},reloadPageAfterPurchaseComplete:!0})]})}},87498:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M12.56 10.72a.75.75 0 0 0-1.06 0L8 14.22a.75.75 0 1 0 1.06 1.06l2.22-2.22v5.19a.75.75 0 0 0 1.5 0v-5.19L15 15.28a.75.75 0 0 0 1.06-1.06l-3.5-3.5Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M6 1.25A2.75 2.75 0 0 0 3.25 4v16A2.75 2.75 0 0 0 6 22.75h12A2.75 2.75 0 0 0 20.75 20V8a.75.75 0 0 0-.22-.53l-6-6a.75.75 0 0 0-.53-.22H6Zm-.884 1.866A1.25 1.25 0 0 1 6 2.75h7.25V8c0 .414.336.75.75.75h5.25V20A1.25 1.25 0 0 1 18 21.25H6A1.25 1.25 0 0 1 4.75 20V4c0-.332.132-.65.366-.884ZM18.19 7.25 14.75 3.81v3.44h3.44Z",clipRule:"evenodd"})]}))}},87882:(e,n,t)=>{"use strict";t.d(n,{b:()=>l,d:()=>a});var r=t(44370),i=t(99667),o=(0,r.eU)(null);function a(){return(0,i.ob)(o)}function l(){return(0,i.h)(o)}},88272:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M2.25 6A3.75 3.75 0 0 1 6 2.25h12A3.75 3.75 0 0 1 21.75 6v12A3.75 3.75 0 0 1 18 21.75H6A3.75 3.75 0 0 1 2.25 18V6ZM6 3.75A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6ZM6.25 8A.75.75 0 0 1 7 7.25h10a.75.75 0 0 1 0 1.5H7A.75.75 0 0 1 6.25 8Zm0 4a.75.75 0 0 1 .75-.75h4a.75.75 0 0 1 0 1.5H7a.75.75 0 0 1-.75-.75Zm0 4a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 0 1.5H7a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}},88676:(e,n,t)=>{"use strict";t.d(n,{e:()=>l});var r=t(72004),i=t(26496),o=t(68209),a=t(46762);function l(e){var n=(0,i.NC)(),t=(0,o.Rj)(function(){return e?n.sessions.get(e):null},[n,e]);return(0,o.Rj)(function(){return null==t?void 0:t.reduce(s,"global").result.map(function(e){return e.cents})},[t],{default:null})}var s={direction:"forward",state:{cents:0},reducer:function(e,n){var t=(0,r.HM2)(e,"commitData");(null==t?void 0:t.billingRate)===r.pSr.NORMAL&&(n.cents+=a.ri)}}},89001:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{d:"M16.868 4.705h-3.365l6.133 15.51H23l-6.132-15.51Zm-9.736 0L1 20.215h3.436l1.265-3.245h6.418l1.241 3.245h3.436l-6.132-15.51H7.132Zm-.334 9.377 2.1-5.44 2.1 5.44h-4.2Z"})}))}},89358:(e,n,t)=>{"use strict";t.d(n,{o:()=>P,y:()=>L});var r=t(83846),i=t(12694),o=t(1889),a=t(21462),l=t(72004),s=t(26496),c=t(93415),u=t(16902),d=t(73978),p=t(6680),f=t(86417),h=t(61234),m=t(47258),g=t(43974),v=t(93682),w=t(74863),y=t(44885),b=t(40043),S=t(37407),Y=t(35869),A=t(6761),C=t(54572),x=t(54239),k=t(76860),_=t(20627),D=t(42784),E=t(56185),R="The agent can create a database to keep your app's user data persistent even when your app is stopped.\nYour app's database is managed on Replit. You can view the created database in\nthe Database pane.",I=(0,h.x)({container:[g.wp.p(6),{animation:"slideUp 0.2s ease-out"},{"@keyframes slideUp":{from:{opacity:0,transform:"scale(0.95)"},to:{opacity:1,transform:"scale(1)"}}}],toolButton:[g.wp.p(6),g.wp.color.foregroundDefault,m.b.filledAndOutlined,{borderColor:p.LU.backgroundHigher,minHeight:"36px"}],buttonContainer:[g.wp.gap(8),(0,r._)({display:"flex",flexWrap:"nowrap"},"@container (max-width: ".concat(f.LO.mobileMax,"px)"),{flexWrap:"wrap"})],expandedFeatures:[g.wp.flex.wrap],divider:[g.wp.backgroundColor.backgroundHighest],buttonText:[g.wp.color.foregroundDefault,{flexShrink:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}],showMoreText:[g.wp.color.foregroundDefault,(0,r._)({},"@media (max-width: ".concat(f.LO.mobileMax,"px)"),{display:"none"})],newSessionText:[{whiteSpace:"nowrap"}],tooltip:{flexShrink:1}});function F(e){if(!e)return null;var n,t,r,i,o,a,l,s,c,u=e.contents.contents;if((null==u?void 0:u.$kind)!=="agentAskUserForActionRequest"&&(null==u?void 0:u.$kind)!=="databaseNudgeEventContents")return null;if((null==u?void 0:u.$kind)==="databaseNudgeEventContents")return{sessionId:e.sessionId};var d=u.agentAskUserForActionRequest,p=d.request,f=d.message;return(null==p?void 0:p.$kind)!=="nextStepRequest"?null:{message:f,debugEnabled:null!==(o=null===(n=p.nextStepRequest.debugRequest)||void 0===n?void 0:n.enabled)&&void 0!==o&&o,debugSelected:null!==(a=null===(t=p.nextStepRequest.debugRequest)||void 0===t?void 0:t.isSelected)&&void 0!==a&&a,keepWorkingEnabled:null!==(l=null===(r=p.nextStepRequest.keepWorkingRequest)||void 0===r?void 0:r.enabled)&&void 0!==l&&l,keepWorkingSelected:null!==(s=null===(i=p.nextStepRequest.keepWorkingRequest)||void 0===i?void 0:i.isSelected)&&void 0!==s&&s,newFeatureRequests:null!==(c=p.nextStepRequest.newFeatureRequests)&&void 0!==c?c:[],sessionId:e.sessionId}}var T=(0,a.memo)(function(e){var n,t,r,c,u,p=e.data,f=e.event,h=e.disableFeatureSelect,m=(0,i._)((0,a.useState)(!1),2),g=m[0],v=m[1],y=(0,a.useMemo)(function(){var e;return null!==(e=null==p?void 0:p.newFeatureRequests)&&void 0!==e?e:[]},[p]),S=y.length>2,A=(t=(n={sessionId:null==p?void 0:p.sessionId,parentEventId:null==f?void 0:f.eventId}).sessionId,r=n.parentEventId,c=(0,s.Gk)(),u=(0,s.Au)({initialSessionId:t}).sendMessage,(0,a.useCallback)(function(e){c&&u({kind:"agentAskUserForActionResponse",response:{$kind:"nextStepResponse",nextStepResponse:e},model:l.e3q.ADVANCED},{parentEventId:r})},[c,r,u])),k=(0,a.useCallback)(function(e){if(p&&p.sessionId&&(null==f?void 0:f.eventId)){var n=y.find(function(n){return n.id===e});n&&(A({response:{$kind:"newFeatureResponse",newFeatureResponse:{selectedFeatureId:n.id,featureName:n.featureName}}}),(0,d.pI)({action:"suggested_feature_selected",sessionId:p.sessionId}))}},[p,null==f?void 0:f.eventId,y,A]);return(0,o.FD)(Y.S,{gap:8,wrap:"nowrap",css:I.container,children:[(0,o.FD)(Y.S,{row:!0,gap:8,align:"center",children:[(0,o.Y)(b.EY,{variant:"small",color:"dimmer",children:"Want to continue making changes?"}),(0,o.Y)(w.a,{css:I.divider})]}),(0,o.Y)(Y.S,{css:[I.buttonContainer,g&&I.expandedFeatures],row:!0,children:g?(0,o.FD)(o.FK,{children:[y.map(function(e){return(0,o.Y)(N,{featureName:e.featureName,onClick:function(){return k(e.id)},isSelected:e.isSelected,disabled:h},e.id)}),(0,o.Y)(O,{text:"Show fewer ideas",onClick:function(){return v(!1)},icon:(0,o.Y)(x.A,{}),disabled:h})]}):(0,o.FD)(o.FK,{children:[y.slice(0,2).map(function(e){return(0,o.Y)(N,{featureName:e.featureName,onClick:function(){return k(e.id)},isSelected:e.isSelected,disabled:h},e.id)}),S&&(0,o.Y)(O,{text:"Show more ideas",onClick:function(){return v(!0)},icon:(0,o.Y)(C.A,{}),disabled:h})]})})]})}),P=(0,a.memo)(function(e){var n=e.onAddDatabase,t=e.onSuggestionsToggle,r=(0,i._)((0,a.useState)(!0),2),l=r[0],s=r[1],d=(0,i._)((0,a.useState)(!1),2),f=d[0],h=d[1],m=(0,i._)((0,a.useState)(!1),2),g=m[0],v=m[1],w=(0,c.m5)(),C=(0,u.q)({onDatabasesDetected:function(){t(),s(!1)}}),x=C.loading,D=C.neonDatabases;return l?(0,o.FD)(Y.S,{gap:8,wrap:"nowrap",css:I.container,children:[(0,o.FD)(Y.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(b.EY,{variant:"small",color:"dimmer",children:D.length>0?"Database ready":"Add a database to store user data"}),(0,o.Y)(S.m_,{tooltip:R,placement:"top",children:(0,o.Y)(_.A,{size:16,onClick:function(){w&&h(!f)}})}),(0,o.Y)(y.a,{isOpen:f,onRequestClose:function(){return h(!1)},children:(0,o.Y)(Y.S,{children:(0,o.Y)(b.EY,{children:R})})})]}),(0,o.FD)(Y.S,{css:I.buttonContainer,row:!0,children:[(0,o.Y)(U,{disabled:g||x,colorway:"primary",toolIcon:D.length>0?(0,o.Y)(A.A,{}):g||x?(0,o.Y)(E.A,{}):(0,o.Y)(k.A,{}),tooltip:"Create a database to keep user data persistent",description:D.length>0?"Database ready":g?"Adding database...":"Add a database",onClick:function(){v(!0),t(),n()}}),(0,o.Y)(U,{tooltip:"Continue working without a database",description:"Maybe later",onClick:function(){s(!1),t()},backgroundColor:p.LU.backgroundHighest})]})]}):null}),L=(0,a.memo)(function(e){var n,t,r,i,c,u=e.event,p=e.disableFeatureSelect,f=e.onSuggestionsToggle,h=(0,s.Al)(u.eventId,F),m=(t=(n={sessionId:null==h?void 0:h.sessionId,parentEventId:null==u?void 0:u.eventId}).sessionId,r=n.parentEventId,i=(0,s.Gk)(),c=(0,s.Au)({initialSessionId:t}).sendMessage,(0,a.useCallback)(function(){i&&c({kind:"message",message:s.ay,model:l.e3q.ADVANCED,intent:l.qRv.AGENT},{parentEventId:r})},[i,r,c])),g=(0,a.useCallback)(function(){(0,d.pI)({action:"create_database",sessionId:null==h?void 0:h.sessionId}),m()},[m,null==h?void 0:h.sessionId]);return(0,o.Y)(o.FK,{children:"nextStepRequest"===u.eventType?(0,o.Y)(T,{data:h,event:u,disableFeatureSelect:p}):"databaseNudge"===u.eventType?(0,o.Y)(P,{onAddDatabase:g,onSuggestionsToggle:f}):null})});function U(e){var n=e.toolIcon,t=e.tooltip,r=e.description,i=e.onClick,a=e.rightIcon,l=e.disabled,s=e.outlined,c=e.backgroundColor,u=e.colorway;return(0,o.Y)(S.m_,{tooltip:t,css:I.tooltip,children:(0,o.Y)(v.$n,{colorway:u,variant:s?"outlined":"default",disabled:l,onClick:i,iconLeft:n,iconRight:a,style:c?{backgroundColor:c}:{},css:I.toolButton,text:(0,o.Y)(b.EY,{css:I.newSessionText,children:r})})})}function N(e){var n=e.featureName,t=e.onClick,r=e.isSelected,i=e.icon,a=e.disabled;return(0,o.Y)(S.m_,{tooltip:n,css:I.tooltip,children:(0,o.Y)(v.$n,{css:I.toolButton,onClick:t,disabled:r||a,iconLeft:null!=i?i:(0,o.Y)(D.A,{}),style:{backgroundColor:p.LU.backgroundHighest},text:(0,o.FD)(b.EY,{css:I.buttonText,children:[n,r?(0,o.Y)(A.A,{}):null]})})})}function O(e){var n=e.onClick,t=e.icon,r=e.text,i=e.disabled;return(0,o.Y)(v.$n,{css:I.toolButton,onClick:n,disabled:i,iconLeft:t,style:{backgroundColor:p.LU.backgroundHighest},text:(0,o.Y)(b.EY,{css:I.showMoreText,children:r})})}},89668:(e,n,t)=>{"use strict";t.d(n,{L:()=>i,M:()=>o});var r=t(49069),i=r.Pe.define(),o=r.Pe.define()},89783:(e,n,t)=>{"use strict";t.d(n,{AN:()=>w,Ed:()=>y,gu:()=>v,u0:()=>b});var r=t(1889),i=t(21462),o=t(72004),a=t(26496),l=t(68209),s=t(6680),c=t(61234),u=t(47258),d=t(43974),p=t(2527),f=t(40043),h=t(88654),m=t(35869),g=(0,c.x)({sessions:[d.wp.overflowY("auto"),d.wp.flex.growAndShrink(1)],item:[d.wp.reset.button,u.b.nofill,d.wp.py(4),d.wp.px(6),d.wp.colWithGap(2),{textAlign:"left"}]});function v(){var e=(0,a.NC)();return(0,l.Rj)(function(){return e.sessions.query({types:[o.dF3.AGENT_SESSION]}).map(function(e){return Array.from(e.values()).sort(function(e,n){return n.created.getTime()-e.created.getTime()})})},[e])}function w(e){var n=v();return(0,r.FD)(m.S,{css:g.sessions,gap:2,children:[e.sessionId?null:(0,r.Y)(b,{onClick:function(){return e.onNewSession()}}),null==n?void 0:n.map(function(n){return(0,r.Y)(y,{onClick:function(){return e.onSessionClick(n.id)},session:n,selected:n.id===e.sessionId},n.id)})]})}function y(e){var n=e.session,t=(0,l.Rj)(function(){return n.data.select(function(e){return{title:e.title,updated:e.updated}})},[n]);return t?(0,r.FD)(p.ui,{tag:"button",elevated:e.selected,css:g.item,onClick:e.onClick,style:e.selected?{backgroundColor:s.LU.surfaceBackground}:void 0,children:[(0,r.Y)(f.EY,{multiline:!1,children:t.title||"Thinking…"}),(0,r.Y)(h.Dc,{textColor:"dimmest",textVariant:"small",date:t.updated,live:!0})]}):null}function b(e){var n=e.onClick,t=(0,i.useRef)(Date.now());return(0,r.FD)(p.ui,{elevated:!0,tag:"button",css:g.item,onClick:n,children:[(0,r.Y)(f.EY,{color:"dimmer",children:"New chat"}),(0,r.Y)(h.Dc,{textColor:"dimmest",textVariant:"small",date:t.current,live:!0})]})}},89806:e=>{e.exports={startRapidBuild:"Events_startRapidBuild__WRcH6",userMessage:"Events_userMessage__HX2Pt",agentAction:"Events_agentAction__Sd2Gf",expandButton:"Events_expandButton__c05NT"}},90017:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>v,fq:()=>y,pi:()=>m});var r=t(12694),i=t(1889),o=t(21462),a=t(50462),l=t(80481),s=t(34787),c=t(91396),u=t(61234),d=t(43974),p=t(74863),f=t(31618),h=t(40043),m=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],g=(0,u.x)({sizeInput:[d.wp.py(6),d.wp.flex.growAndShrink(0),{border:"none"}]});function v(){var e=(0,l.gc)("indentDetection","indentFormatPastes","indentIsSpaces","indentSize"),n=e.preferences,t=e.update;return(0,i.FD)(i.FK,{children:[(0,i.Y)(s.n,{setting:a.KY.indentationDetection,currentValue:n.indentDetection,update:t}),(0,i.Y)(p.a,{}),(0,i.Y)(s.n,{setting:a.KY.indentFormatPastes,currentValue:n.indentFormatPastes,update:t}),(0,i.Y)(p.a,{}),(0,i.Y)(s.n,{setting:a.KY.indentIsSpaces,currentValue:n.indentIsSpaces,update:t}),(0,i.Y)(p.a,{}),(0,i.Y)(c.w,{id:"indentSize",title:(0,i.FD)(i.FK,{children:[(0,i.Y)(h.EY,{multiline:!1,children:"Indentation Size"}),(0,i.Y)(h.EY,{variant:"small",color:"dimmest",children:"The number of columns taken up by an indentation level."})]}),children:(0,i.Y)(y,{css:g.sizeInput,size:n.indentSize,onChange:function(e){t({indentSize:e})}})})]})}function w(e){return null==e?2:("string"==typeof e&&(e=parseInt(e,10)),isNaN(e))?2:(Number.isInteger(e)||(e=Math.round(e)),e<1)?1:e>16?16:e}function y(e){var n=e.size,t=e.onChange,a=e.className,l=(0,r._)((0,o.useState)(null),2),s=l[0],c=l[1],u=null!==s?s:n.toString(),d=""===u?"6ch":u.length+5.5+"ch";return(0,i.Y)(f.pd,{type:"number",style:{width:d},className:a,min:1,max:16,value:u,onBlur:function(){return c(null)},onChange:function(e){var n=e.target.value.trim(),r=e.target.valueAsNumber;if(""===n||isNaN(r)){c(n);return}e.target.validity.valid?(c(null),t(w(r))):(c(n),""===n||isNaN(parseInt(n,10))||t(w(n)))}})}},90298:(e,n,t)=>{"use strict";t.d(n,{Od:()=>p,QU:()=>v,Ws:()=>h,n8:()=>g});var r=t(1889),i=t(21462),o=t(54988),a=t(80481),l=t(93415),s=t(98429),c=t(80703),u=t(95758),d=t(61234),p=function(e){return e.Prompt="Prompt",e.CommandStart="CommandStart",e.CommandExecuted="CommandExecuted",e.CommandFinished="CommandFinished",e}({}),f={A:"Prompt",B:"CommandStart",C:"CommandExecuted",D:"CommandFinished"},h={id:"shell.generateWithAI",name:"Generate with AI in the shell",default:(0,u.FM)({cmdOrCtrl:!0,key:"i"})},m=(0,d.x)({root:{marginLeft:"auto"}}),g=133;function v(e){var n=e.onFTCSState,t=e.onOpenGeneratePrompt,u=e.onUpdateCurrentPromptLineNumber,d=(0,a.gc)("fontSize").preferences.fontSize,p=(0,i.useRef)(null),g=(0,i.useRef)(null),v=(0,l.m5)(),w=(0,c.Jn)(h.id),y=(0,i.useRef)(null);return(0,i.useCallback)(function(e,i){var a=f[i.split(";")[0]];if(a&&n&&n({state:a,data:i.split(";")[1]}),"B"===i){var l,c,h=e.buffer.active,b=h.cursorX,S=h.cursorY;u(S),p.current&&p.current.dispose(),g.current&&g.current.dispose(),y.current&&(y.current.unmount(),y.current=null);var Y=Math.round(12.6);p.current=e.registerMarker(0),g.current=null!==(c=e.registerDecoration({marker:p.current,x:Math.max(0,e.cols-Y),width:Y,layer:"top"}))&&void 0!==c?c:null,null===(l=g.current)||void 0===l||l.onRender(function(n){for(var i=!1,a=e.buffer.active._buffer.lines._array[S],l=b;l<e.cols;l++)if((null==a?void 0:a.hasContent(l))!==0){i=!0;break}var c=!i;y.current||(y.current=(0,o.createRoot)(n)),y.current.render(c?(0,r.Y)(s.u,{css:m.root,onClick:function(e){e.stopPropagation(),t()},keyCombo:v?void 0:w,text:"Generate",fontSize:Math.round(.9*d)}):null)})}},[t,u,v,w,d,n])}},90378:(e,n,t)=>{"use strict";t.d(n,{L:()=>c,T:()=>u});var r=t(45773),i=t(99672),o=t(63892),a=t(44370),l=t(99667),s=(0,a.eU)(!1),c=new i.k(function(e){var n=e.analyticsSurface,t=e.shouldTrack,i=e.onPaste;return r.Lz.domEventHandlers({paste:function(){t&&(0,o.u4)(o.AZ.TEXT_PASTED,{surface:n}),null==i||i()}})});function u(e){var n=e.analyticsSurface,t=(0,l.h)(s),r=(0,l.ob)(s);return c.use({analyticsSurface:n,shouldTrack:!t,onPaste:function(){return r(!0)}})}},90384:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M6.862 1.606A.75.75 0 0 1 7.5 1.25h9a.75.75 0 0 1 .67 1.085l-.92 1.842v6.513c.983.988 2.5 2.622 2.5 4.81a.75.75 0 0 1-.75.75h-5.25V22a.75.75 0 0 1-1.5 0v-5.75H6a.75.75 0 0 1-.75-.75c0-2.188 1.517-3.822 2.5-4.81V4.177l-.92-1.842a.75.75 0 0 1 .032-.73ZM8.714 2.75l.457.915A.75.75 0 0 1 9.25 4v7a.75.75 0 0 1-.22.53c-.878.879-1.895 1.93-2.193 3.22h10.326c-.298-1.29-1.315-2.341-2.193-3.22a.75.75 0 0 1-.22-.53V4a.75.75 0 0 1 .08-.335l.457-.915H8.714Z",clipRule:"evenodd"})}))}},90735:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M12 7.75a4.25 4.25 0 1 0 0 8.5 4.25 4.25 0 0 0 0-8.5ZM6.25 12a5.75 5.75 0 1 1 11.5 0 5.75 5.75 0 0 1-11.5 0Z",clipRule:"evenodd"}),(0,o.Y)("path",{d:"M1 11.25a.75.75 0 0 0 0 1.5h2a.75.75 0 0 0 0-1.5H1ZM21 11.25a.75.75 0 0 0 0 1.5h2a.75.75 0 0 0 0-1.5h-2ZM19.248 20.309a.75.75 0 0 0 1.06-1.061l-1.414-1.414a.75.75 0 0 0-1.06 1.06l1.414 1.415ZM5.106 6.166a.75.75 0 0 0 1.06-1.06L4.752 3.692a.75.75 0 1 0-1.06 1.06l1.414 1.414ZM3.692 19.248a.75.75 0 0 0 1.06 1.06l1.414-1.414a.75.75 0 0 0-1.06-1.06l-1.414 1.414ZM17.834 5.106a.75.75 0 1 0 1.06 1.06l1.415-1.414a.75.75 0 1 0-1.061-1.06l-1.414 1.414ZM11.25 23a.75.75 0 0 0 1.5 0v-2a.75.75 0 0 0-1.5 0v2ZM11.25 3a.75.75 0 0 0 1.5 0V1a.75.75 0 0 0-1.5 0v2Z"})]}))}},90821:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M8 1.25a.75.75 0 0 1 .75.75v1.25h6.5V2a.75.75 0 0 1 1.5 0v1.25H19A2.75 2.75 0 0 1 21.75 6v14A2.75 2.75 0 0 1 19 22.75H5A2.75 2.75 0 0 1 2.25 20V6A2.75 2.75 0 0 1 5 3.25h2.25V2A.75.75 0 0 1 8 1.25Zm-.75 3.5H5c-.69 0-1.25.56-1.25 1.25v3.25h16.5V6c0-.69-.56-1.25-1.25-1.25h-2.25V6a.75.75 0 0 1-1.5 0V4.75h-6.5V6a.75.75 0 0 1-1.5 0V4.75Zm13 6H3.75V20c0 .69.56 1.25 1.25 1.25h14c.69 0 1.25-.56 1.25-1.25v-9.25Z",clipRule:"evenodd"})}))}},91222:(e,n,t)=>{"use strict";t.d(n,{E:()=>r,s:()=>i});var r=function(e){return e[e.AI=0]="AI",e[e.Template=1]="Template",e[e.GitHub=2]="GitHub",e}({}),i=function(e){return e.Visited="visited",e.LanguageChanged="language-changed",e.ImportStarted="import-started",e.ImportEnded="import-ended",e.ConfigDone="config-done",e}({})},91331:(e,n,t)=>{"use strict";t.d(n,{AI:()=>u,Ou:()=>p,h:()=>c,ob:()=>d,rF:()=>l});var r=t(21462),i=t(69338),o=t(50140),a=t(17843),l=(0,r.createContext)(null);function s(){var e=(0,r.useContext)(l);if(!e)throw Error("Expected store in context");return e}function c(e){return(0,i.md)(e,{store:s()})}function u(e){return(0,a.k)(e,s())}var d=function(e){return(0,i.Xr)(e,{store:s()})};function p(e){return(0,o.yF)((0,r.useCallback)(function(n){return n(e)},[e]),{store:s()})}},91384:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(17844),i=t(93629),o=t(1889),a=t(45771),l=function(e){return{animationDuration:e?"2000ms":"800ms",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}},s=(0,a.i7)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, 80px) }\n  50% { transform: translate(100px, 80px) }\n  75% { transform: translate(100px, 160px) }\n  100% { transform: translate(0px, 160px) }\n"),c=(0,a.i7)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, -80px) }\n  50% { transform: translate(-100px, -80px) }\n  100% { transform: translate(-100px, -80px) }\n"),u=(0,a.i7)("\n  0% { transform: translate(0px, 0px) }\n  50% { transform: translate(0px, 0px) }\n  75% { transform: translate(0px, -80px) }\n  100% { transform: translate(100px, -80px) }\n");let d=function(e){var n=e.height,t=void 0===n?24:n,a=e.color,d=e.slow,p=void 0!==d&&d,f={width:84,height:64,fill:void 0===a?"#F26207":a,rx:12};return(0,o.FD)("svg",{width:t/1.2,height:t,viewBox:"0 0 200 240",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"loading-animation-title",children:[(0,o.Y)("title",{id:"loading-animation-title",children:"loading animation"}),(0,o.Y)("rect",(0,i._)((0,r._)({css:[l(p),{animationName:s}]},f),{x:8,y:8})),(0,o.Y)("rect",(0,i._)((0,r._)({css:[l(p),{animationName:c}]},f),{x:108,y:88})),(0,o.Y)("rect",(0,i._)((0,r._)({css:[l(p),{animationName:u}]},f),{x:8,y:168}))]})}},91396:(e,n,t)=>{"use strict";t.d(n,{c:()=>d,w:()=>f});var r=t(83846),i=t(1889),o=t(21462),a=t(61234),l=t(43974),s=t(35899),c=t(40043),u=t(35869),d="@container (max-width: 480px)",p=(0,a.x)({wrapper:[(0,r._)({},d,[l.wp.colWithGap(8),l.wp.align.start])],inner:[l.wp.flex.growAndShrink(1)]});function f(e){var n=e.id,t=e.title,r=e.children,a=(0,s.c)()(n);return(0,i.FD)(u.S,{css:p.wrapper,row:!0,gap:8,justify:"space-between",align:"center",children:[(0,i.Y)(u.S,{css:p.inner,tag:"label",htmlFor:a,children:"string"==typeof t?(0,i.Y)(c.EY,{multiline:!1,children:t}):t}),(0,o.cloneElement)(r,{id:a})]})}},91752:(e,n,t)=>{"use strict";t.d(n,{uG:()=>A,gv:()=>Y});var r=t(37743),i=t(17844),o=t(93629),a=t(12694),l=t(1889),s=t(21462),c=t(88079),u=t(30391),d=t(10825),p=t(155),f=t(43565),h=t(6680),m=t(43974),g=t(40043),v=t(35869),w=t(6761),y=t(84296);function b(e){return(0,l.FD)(y.Ay,(0,o._)((0,i._)({},e),{children:[(0,l.Y)("path",{fillRule:"evenodd",d:"M12 2.6a9.4 9.4 0 1 0 0 18.8 9.4 9.4 0 0 0 0-18.8ZM1.4 12C1.4 6.146 6.146 1.4 12 1.4c5.854 0 10.6 4.746 10.6 10.6 0 5.854-4.746 10.6-10.6 10.6-5.854 0-10.6-4.746-10.6-10.6Zm7-3a.6.6 0 0 1 .6-.6h.01a.6.6 0 0 1 0 1.2H9a.6.6 0 0 1-.6-.6Zm6 0a.6.6 0 0 1 .6-.6h.01a.6.6 0 1 1 0 1.2H15a.6.6 0 0 1-.6-.6Z",clipRule:"evenodd"}),(0,l.Y)("path",{d:"M8.71 14.515c.753-.548 1.875-1.115 3.29-1.115s2.537.567 3.29 1.115a6.538 6.538 0 0 1 1.1 1.013 3.76 3.76 0 0 1 .081.1l.009.012a.6.6 0 0 1-.959.722l-.05-.062a5.353 5.353 0 0 0-.886-.815c-.622-.452-1.5-.885-2.585-.885s-1.963.433-2.585.885a5.351 5.351 0 0 0-.886.815 2.31 2.31 0 0 0-.041.05l-.009.011a.6.6 0 0 1-.839.119.613.613 0 0 1-.093-.875l.063-.077c.053-.064.13-.152.23-.256.2-.207.492-.482.87-.757Z"})]}))}var S=t(56185),Y=new(function(){function e(){var n=this;(0,r._)(this,e),this.counter=0,this.enabled=!1,this.maxEntries=10,this.logs=(0,c.F)([]),this.clear=function(){n.logs.current=[]}}var n=e.prototype;return n.toggle=function(e){this.enabled=e},n.add=function(e){var n=this,t=this.counter++;if(!this.enabled)return{id:t};var r={id:t,request:e,requestTime:Date.now()};return this.logs.update(function(e){return[r].concat(e).slice(0,n.maxEntries)}),{id:t}},n.update=function(e,n){this.enabled&&this.logs.update(function(t){var r=t.findIndex(function(n){return n.id===e.id});if(-1===r)return t;var i=t.slice();return i[r]=n(i[r]),i})},n.complete=function(e,n){this.update(e,function(e){return(0,o._)((0,i._)({},e),{response:n,responseTime:Date.now()})})},n.abort=function(e){this.logs.update(function(n){return n.filter(function(n){return n.id!==e.id||null!=n.responseTime})})},e}()),A=function(e){var n=e.isHidden,t=(0,u.A)(Y.logs);return n?null:(0,l.FD)(v.S,{css:[m.wp.flex.column],children:[(0,l.FD)(v.S,{css:[m.wp.m(4),m.wp.position.sticky,m.wp.top(0),m.wp.backgroundColor.backgroundDefault,m.wp.zIndex(1)],row:!0,align:"center",children:[(0,l.Y)(g.EY,{css:m.wp.flex.grow(1),multiline:!1,children:"Requests"}),(0,l.Y)(f.D,{onClick:Y.clear})]}),(0,l.FD)(v.S,{css:[m.wp.flex.grow(1),m.wp.flex.column,m.wp.overflow("auto")],children:[t.map(function(e){var n;return(0,l.Y)(C,{log:e},null!==(n=e.id)&&void 0!==n?n:e.requestTime.valueOf())}),!t.length&&(0,l.Y)(v.S,{css:m.wp.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},C=(0,s.memo)(function(e){var n,t=e.log,r=t.requestTime,i=t.responseTime,o=t.request,s=t.response,c=(0,a._)((0,p.A)(!0),2),u=c[0],f=c[1],y=o.prefix.length>20?"...".concat(o.prefix.slice(-20)):o.prefix;return(0,l.FD)(v.S,{css:[m.wp.my(4),m.wp.mx(4)],children:[(0,l.FD)(v.S,{role:"button",onClick:f,onKeyDown:f,tabIndex:0,css:[{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],row:!0,gap:4,children:[(0,l.FD)(v.S,{css:[m.wp.flex.grow(1),m.wp.rowWithGap(2)],children:[(0,l.Y)(g.EY,{multiline:!1,children:(n=t.response)?"CompleteCodeResult"===n.__typename?(0,l.Y)(w.A,{}):(0,l.Y)(b,{}):(0,l.Y)(S.A,{})}),(0,l.Y)(g.EY,{multiline:!1,children:(0,l.Y)("code",{children:y})})]}),(0,l.Y)(v.S,{css:{opacity:.5},children:null!=i&&(0,l.FD)(g.EY,{css:m.wp.fontSize(13),multiline:!1,children:[i.valueOf()-r.valueOf(),"ms"]})})]}),!u&&(0,l.FD)(l.FK,{children:[void 0!==o&&(0,l.Y)(d.U,{name:"request",src:o}),void 0!==s&&("CompleteCodeResult"===s.__typename?(0,l.FD)("details",{children:[(0,l.Y)("summary",{children:"Response"}),(0,l.Y)("pre",{css:[m.wp.overflow("scroll"),m.wp.borderRadius(4),m.wp.p(4),{border:"1px solid ".concat(h.LU.outlineDimmest)}],children:s.code})]}):(0,l.Y)(d.U,{name:"response",src:s}))]})]})})},91784:(e,n,t)=>{"use strict";t.d(n,{Y:()=>y,O:()=>w});var r=t(29935),i=t(12694),o=t(22531),a=t(82643),l=t(17844),s=t(12584),c=t(41114),u=t(50175);function d(){var e=(0,s._)(["\n  mutation SetUserKeybindings($input: SetUserKeybindingsInput!) {\n    setUserKeybindings(input: $input) {\n      ... on Keybindings {\n        keybindings\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,c.J1)(d()),h=t(70906),m=t(43238),g=t(95758),v=t(41086);function w(){var e,n=(0,m.v)(),t=(0,i._)((e=(0,l._)({},p,void 0),u.n(f,e)),1)[0],o=(0,v.V)();return(0,h.A)(function(){var e;return e=(0,r._)(function(e){var r,l,s,c,u,d,p,f,h;return(0,a.YH)(this,function(a){switch(a.label){case 0:r=[],l=!0,s=!1,c=void 0;try{for(u=e[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)f=(p=(0,i._)(d.value,2))[0],h=p[1],r.push({commandId:f,keyCombo:h})}catch(e){s=!0,c=e}finally{try{l||null==u.return||u.return()}finally{if(s)throw c}}return[4,t({variables:{input:{environment:n,platform:o,keybindings:r}}})];case 1:return a.sent(),[2]}})}),function(n){return e.apply(this,arguments)}},[n,t,o])}function y(e){var n=new Map;if(!Array.isArray(e))return n;var t=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value,c=function(e){if(e&&(void 0===e?"undefined":(0,o._)(e))==="object"&&"commandId"in e&&"string"==typeof e.commandId&&"keyCombo"in e){if(Array.isArray(e.keyCombo)){var n=(0,g.by)(e.keyCombo);return{commandId:e.commandId,keyCombo:n}}if("string"==typeof e.keyCombo){var t=(0,g.A2)(e.keyCombo);return{commandId:e.commandId,keyCombo:t}}return{commandId:e.commandId,keyCombo:null}}}(s);c&&n.set(c.commandId,c.keyCombo)}}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}return n}},91873:(e,n,t)=>{"use strict";function r(e){var n=[],t=[],r=!1,i=!0,o=!1,a=void 0;try{for(var l,s=e.selection.ranges[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;c.empty||(n.push(e.sliceDoc(c.from,c.to)),t.push(c))}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}if(!n.length){var u=-1,d=!0,p=!1,f=void 0;try{for(var h,m=e.selection.ranges[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=h.value.from,v=e.doc.lineAt(g);v.number>u&&(n.push(v.text),t.push({from:v.from,to:Math.min(e.doc.length,v.to+1)})),u=v.number}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}r=!0}return{text:n.join(e.lineBreak),ranges:t,linewise:r}}t.d(n,{i:()=>r})},91888:(e,n,t)=>{"use strict";t.d(n,{G:()=>c});var r=t(1889),i=t(61234),o=t(43974),a=t(35869),l=t(56185),s=(0,i.x)({loadingState:[o.wp.flex.growAndShrink(1),o.wp.center]});function c(){return(0,r.Y)(a.S,{css:s.loadingState,children:(0,r.Y)(l.A,{})})}},91892:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(14854);function l(e){return(0,o.FD)(a.A,(0,i._)((0,r._)({},e),{children:[(0,o.FD)("g",{clipPath:"url(#clip0_7379_618)",children:[(0,o.Y)("path",{fill:"#188038",d:"m14.455 0 6 6-3 .545-3-.545-.546-3 .546-3Z"}),(0,o.Y)("path",{fill:"#34A853",d:"M14.455 6V0H4.635C3.732 0 3 .732 3 1.636v20.728C3 23.268 3.732 24 4.636 24h14.182c.904 0 1.636-.732 1.636-1.636V6h-6Z"}),(0,o.Y)("path",{fill:"#fff",d:"M6.273 9.273v7.909h10.909v-7.91H6.272Zm4.772 6.545H7.636V13.91h3.41v1.91Zm0-3.273H7.636v-1.909h3.41v1.91Zm4.773 3.273H12.41V13.91h3.41v1.91Zm0-3.273H12.41v-1.909h3.41v1.91Z"})]}),(0,o.Y)("defs",{children:(0,o.Y)("clipPath",{id:"clip0_7379_618",children:(0,o.Y)("path",{fill:"#fff",d:"M3 0h17.454v24H3z"})})})]}))}},92228:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M18.5 6a1 1 0 0 1 1 1v13h-2V7a1 1 0 0 1 1-1ZM15.243 6.03a1 1 0 0 1 .727 1.213l-3.242 12.97-1.94-.485 3.242-12.97a1 1 0 0 1 1.213-.728ZM11.385 6.077a1 1 0 0 1 .538 1.308L6.538 20.308l-1.846-.77 5.385-12.923a1 1 0 0 1 1.308-.538ZM5.47 3.47a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.75.75 0 0 1-1.06-1.06l.72-.72H3a.75.75 0 0 1 0-1.5h3.19l-.72-.72a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}},92395:(e,n,t)=>{"use strict";t.d(n,{A:()=>tV,G:()=>tG});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(1889),s=t(21462),c=t(69338),u=t(17844),d=t(12584),p=t(41114),f=t(86997),h=t(50175);function m(){var e=(0,d._)(["\n  fragment ObjectStorageBucket on Bucket {\n    id\n    externalId\n    name\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,d._)(["\n  query ObjectStoragePane(\n    $replId: String!\n    $bucketsAfter: String\n    $bucketsCount: Int\n  ) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n        authorizations {\n          createObjectBucket {\n            isAuthorized\n            code\n            message\n          }\n          editObjectBucket {\n            isAuthorized\n            code\n            message\n          }\n        }\n        buckets(after: $bucketsAfter, count: $bucketsCount) {\n          ... on BucketConnection {\n            __typename\n            items {\n              ...ObjectStorageBucket\n            }\n            pageInfo {\n              nextCursor\n            }\n          }\n          ... on UnauthorizedError {\n            __typename\n            message\n          }\n        }\n        defaultBucket {\n          ... on Bucket {\n            ...ObjectStorageBucket\n          }\n          ... on Error {\n            message\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n          ... on UserError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function v(){var e=(0,d._)(["\n  mutation ObjectStoragePaneCreateBucket($input: CreateBucketInput!) {\n    createBucket(input: $input) {\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var w={},y=(0,p.J1)(m()),b=(0,p.J1)(g(),y),S=(0,p.J1)(v(),y);function Y(e){var n=(0,u._)({},w,e);return h.n(S,n)}var A=t(25868),C=t(81239),x=t(16907),k=t(68221),_=t(67084),D=t(67337),E=t(14545);function R(){var e=(0,d._)(["\n  query CreateBucketName($teamId: Int, $name: String) {\n    bucketName: replTitle(teamId: $teamId, title: $name)\n  }\n"]);return R=function(){return e},e}var I={},F=(0,p.J1)(R()),T=t(61234),P=t(43974),L=t(35899),U=t(93682),N=t(31618),O=t(51820),M=t(44885),B=t(2527),H=t(40043),z=t(35869),W=t(56185),G=t(75251),V=(0,T.x)({createBucketButton:[P.wp.flex.growAndShrink(1),P.wp.justify.center,P.wp.textAlign.center],labeledInput:[P.wp.flex.growAndShrink(1),P.wp.textAlign.left],row:[P.wp.flex.growAndShrink(1),P.wp.pt(16),P.wp.rowWithGap(16),{flexBasis:"300px"}],wrapper:[P.wp.flex.wrap]});function j(e){var n,t,r,o,a,c,d,p,h,m,g,v,w,y=e.isOpen,b=e.loading,S=e.handleCreateBucket,Y=e.onRequestClose,A=(t=(n={}).preferredName,r=n.teamId,a=(o=(0,i._)((0,s.useState)(""),2))[0],c=o[1],d=(0,s.useRef)(null),p=(0,s.useRef)(!1),g=(h=(0,u._)({},I,{variables:{name:t,teamId:r},fetchPolicy:"network-only",nextFetchPolicy:"cache-first",ssr:!1}),m=f.I(F,h)).data,v=m.previousData,w=(null==g?void 0:g.bucketName)||(null==v?void 0:v.bucketName),(0,s.useEffect)(function(){w&&!p.current&&c(w)},[w]),{name:a,setName:(0,s.useCallback)(function(e){p.current=!0,c(e.slice(0,60))},[]),nameInputRef:d}),C=A.name,k=A.setName,_=A.nameInputRef,D=(0,x.A)();return(0,l.Y)(z.S,{children:(0,l.Y)(M.a,{fitContent:!0,isOpen:y,onRequestClose:Y,children:(0,l.FD)(B.ui,{children:[(0,l.Y)(H.Y9,{level:1,variant:"subheadBig",children:"Create a Bucket"}),(0,l.FD)(z.S,{css:V.wrapper,row:!0,children:[(0,l.Y)(z.S,{css:V.row,children:(0,l.Y)(Z,{name:C,setName:k,nameInputRef:_,disabled:b})}),(0,l.Y)(z.S,{css:V.row,children:(0,l.Y)(U.$n,{css:V.createBucketButton,text:b?"Creating bucket...":"Create bucket",onClick:function(){return S({name:C,replId:D})},colorway:"primary",iconLeft:b?(0,l.Y)(W.A,{}):(0,l.Y)(G.A,{}),disabled:b})})]})]})})})}function Z(e){var n=e.name,t=e.setName,r=e.nameInputRef,i=e.disabled,o=(0,L.c)();return(0,l.FD)(z.S,{css:V.labeledInput,gap:8,children:[(0,l.Y)(O.J,{htmlFor:o("bucketName"),children:"Name"}),(0,l.Y)(N.pd,{spellCheck:!1,id:o("bucketName"),disabled:i,onChange:function(e){t(e.currentTarget.value)},value:n,ref:r,placeholder:"Name your Bucket"})]})}var q=t(93629),K=t(90629),$=t(24998),J=t(2789),Q=t(82871),X=t(83848),ee=t(39416),en=t(75152),et=en.ZU.Object({id:en.ZU.String(),name:en.ZU.String(),contentType:en.ZU.Optional(en.ZU.String()),timeCreated:en.ZU.String(),size:en.ZU.String()}),er=en.ZU.Array(et),ei={FILE:"file"},eo=function(e){return e[e.Direct=1]="Direct",e[e.Multipart=2]="Multipart",e}({});function ea(e){return"".concat(e.status," - ").concat(e.statusText)}function el(){return(el=(0,r._)(function(e){var n,t,r,i,o,l,s,c,u,d;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.pageToken,i=void 0===(r=e.maxResults)?1e3:r,o=e.matchGlob,l=new URLSearchParams({maxResults:i.toString()}),t&&l.append("pageToken",t),o&&l.append("matchGlob","**".concat(o,"**")),[4,fetch("/object-storage/storage/v1/b/".concat(n,"/o?").concat(l.toString()),{method:"GET",credentials:"same-origin"})];case 1:if(!(s=a.sent()).ok)throw Error("Failed to get objects: ".concat(ea(s)));return[4,s.json()];case 2:if(d=null!==(u=(c=a.sent()).items)&&void 0!==u?u:[],!$.WT.Check(er,d))throw(0,X.$J)(er,d);return[2,{items:d,nextPageToken:c.nextPageToken}]}})})).apply(this,arguments)}function es(e){return ec.apply(this,arguments)}function ec(){return(ec=(0,r._)(function(e){var n,t,r,i;return(0,a.YH)(this,function(o){switch(n=e.bucketExternalId,t=e.objectName,r=e.file,void 0===(i=e.uploadMethod)?1:i){case 1:return[2,function(e){return eu.apply(this,arguments)}({bucketExternalId:n,objectName:t,file:r})];case 2:return[2,function(e){return eh.apply(this,arguments)}({bucketExternalId:n,objectName:t,file:r})]}return[2]})})).apply(this,arguments)}function eu(){return(eu=(0,r._)(function(e){var n,t,r,i,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.objectName,r=e.file,i=encodeURIComponent(t),[4,fetch("/object-storage/upload/storage/v1/b/".concat(n,"/o?uploadType=media&name=").concat(i),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},body:r})];case 1:if(!(o=a.sent()).ok)throw Error("Failed to upload object: ".concat(ea(o)));return[2]}})})).apply(this,arguments)}function ed(){return(ed=(0,r._)(function(e){var n,t,r,i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.encodedObjectName,r=e.file,[4,fetch("/object-storage/".concat(n,"/").concat(t,"?uploads"),{method:"POST",credentials:"same-origin",headers:{"Content-Length":"0","Content-Type":r.type,"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(i=a.sent()).ok)throw Error("Failed to initiate multipart upload: ".concat(ea(i)));return[4,i.text()];case 2:if(o=a.sent(),!(l=new DOMParser().parseFromString(o,"text/xml").getElementsByTagName("UploadId")[0].textContent))throw Error("Failed to initiate multipart upload: missing UploadId");return[2,l]}})})).apply(this,arguments)}function ep(){return(ep=(0,r._)(function(e){var n,t,r,i,o,l,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.encodedObjectName,r=e.partNumber,i=e.uploadId,o=e.chunk,[4,fetch("/object-storage/".concat(n,"/").concat(t,"?partNumber=").concat(r,"&uploadId=").concat(i),{method:"PUT",credentials:"same-origin",headers:{"Content-Length":o.length.toString(),"Content-Type":"text/xml","X-Requested-With":"XMLHttpRequest"},body:o})];case 1:if(!(l=a.sent()).ok)throw Error("Failed to upload chunk: ".concat(ea(l)));if(!(s=l.headers.get("x-upload-etag")))throw Error("Failed to upload chunk: missing x-upload-etag");return[2,{partNumber:r,etag:s}]}})})).apply(this,arguments)}function ef(){return(ef=(0,r._)(function(e){var n,t,r,i,o,l,s,c;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.encodedObjectName,r=e.uploadId,i=e.parts,l=(o=document.implementation.createDocument("","",null)).createElement("CompleteMultipartUpload"),i.forEach(function(e){var n=o.createElement("Part"),t=o.createElement("PartNumber");t.textContent=e.partNumber.toString(),n.appendChild(t);var r=o.createElement("ETag");r.textContent=e.etag,n.appendChild(r),l.appendChild(n)}),o.appendChild(l),s=new XMLSerializer().serializeToString(o),[4,fetch("/object-storage/".concat(n,"/").concat(t,"?uploadId=").concat(r),{method:"POST",credentials:"same-origin",headers:{"Content-Length":s.length.toString(),"Content-Type":"application/xml","X-Requested-With":"XMLHttpRequest"},body:s})];case 1:if(!(c=a.sent()).ok)throw Error("Failed to complete multipart upload: ".concat(ea(c)));return[2]}})})).apply(this,arguments)}function eh(){return(eh=(0,r._)(function(e){var n,t,r,i,o,l,s,c,u,d;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.objectName,r=e.file,[4,(0,ee.g6)(r)];case 1:return i=a.sent(),l=(o=Q.A.from(i)).toBuffer(),s=encodeURIComponent(t),[4,function(e){return ed.apply(this,arguments)}({bucketExternalId:n,encodedObjectName:s,file:r})];case 2:return c=a.sent(),u=(0,J.A)(5),[4,Promise.all(Array(Math.ceil(o.length/0x2000000)).fill(0).map(function(e,t){var r=l.subarray(0x2000000*t,(t+1)*0x2000000);return u(function(){return function(e){return ep.apply(this,arguments)}({bucketExternalId:n,encodedObjectName:s,partNumber:t+1,uploadId:c,chunk:r})})}))];case 3:return d=a.sent(),[4,function(e){return ef.apply(this,arguments)}({bucketExternalId:n,encodedObjectName:s,uploadId:c,parts:d})];case 4:return a.sent(),[2]}})})).apply(this,arguments)}function em(e){return eg.apply(this,arguments)}function eg(){return(eg=(0,r._)(function(e){var n,t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:return n=e.bucketExternalId,t=encodeURIComponent(e.objectName),[4,fetch("/object-storage/storage/v1/b/".concat(n,"/o/").concat(t),{method:"DELETE",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(r=i.sent()).ok)throw Error("Failed to delete object: ".concat(ea(r)));return[2]}})})).apply(this,arguments)}function ev(){return(ev=(0,r._)(function(e){var n,t,r,i,o,l,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.sourceBucketExternalId,t=e.destinationBucketExternalId,r=e.sourceObjectName,i=e.destinationObjectName,o=encodeURIComponent(r),l=encodeURIComponent(i),[4,fetch("/object-storage/storage/v1/b/".concat(n,"/o/").concat(o,"/copyTo/b/").concat(t,"/o/").concat(l),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(s=a.sent()).ok)throw Error("Failed to copy object: ".concat(ea(s)));return[2]}})})).apply(this,arguments)}var ew=t(35992),ey=t(44370),eb=t(67201),eS=(0,ey.eU)(new Map);function eY(e){var n=e.items,t=e.objects,r=new Set(n.map(function(e){return e.name})),i=t.filter(function(e){return!r.has(e.name)});return(0,o._)(n).concat((0,o._)(i))}var eA=(0,ey.eU)(null,function(e,n,t){var r=t.bucketExternalId,i=t.objects,o=t.nextPageToken,a=t.isSearch;n(eS,function(e){return(0,ew.jM)(e,function(n){var t,l,s=e.get(r),c=n.get(r);if(!c){n.set(r,{items:i,nextPageToken:o,isLoading:!1});return}var u=eY({items:c.items,objects:i}),d=c.search;if(a){c.search=d={items:eY({items:null!==(l=null==d?void 0:d.items)&&void 0!==l?l:[],objects:i}),currentPageToken:null==s?void 0:null===(t=s.search)||void 0===t?void 0:t.currentPageToken,nextPageToken:o},c.items=u,c.isLoading=!1;return}c.items=u,c.search=void 0,c.currentPageToken=null==s?void 0:s.nextPageToken,c.nextPageToken=o,c.isLoading=!1})})}),eC=(0,ey.eU)(null,function(e,n,t){var r=t.bucketExternalId,i=t.isLoading;n(eS,function(e){return(0,ew.jM)(e,function(e){var n=e.get(r);if(!n){e.set(r,{items:[],isLoading:i});return}n.isLoading=i})})}),ex=(0,ey.eU)(null,function(e,n,t){var r=t.bucketExternalId,i=t.name,o=t.contentType,a=t.size,l={id:"optimistic-"+(0,eb.A)(),name:i,contentType:o,size:a,timeCreated:new Date().toISOString(),optimisticallyInserted:!0};n(eS,function(e){return(0,ew.jM)(e,function(e){var n=e.get(r);if(!n){e.set(r,{items:[l],isLoading:!1});return}var t=n.items.find(function(e){return e.name===i});t?Object.assign(t,l):n.items.push(l)})})}),ek=(0,ey.eU)(null,function(e,n,t){var r=t.name,i=t.bucketExternalId,o=t.isPendingDeletion,a=t.isOptimisticallyInserted;n(eS,function(e){return(0,ew.jM)(e,function(e){var n=e.get(i);if(!n)throw Error("Bucket not found when updating object");var t=n.items.findIndex(function(e){return e.name===r});if(-1===t)throw Error("Bucket not found when updating object");void 0!==o&&(n.items[t].isPendingDeletion=o),void 0!==a&&(n.items[t].optimisticallyInserted=a)})})}),e_=(0,ey.eU)(null,function(e,n,t){var r=t.name,i=t.bucketExternalId;n(eS,function(e){return(0,ew.jM)(e,function(e){var n=e.get(i);if(!n)throw Error("Bucket not found when removing object");var t=n.search;if(t){t.items=t.items.filter(function(e){return e.name!==r});return}e.set(i,{items:n.items.filter(function(e){return e.name!==r}),isLoading:n.isLoading,nextPageToken:n.nextPageToken,search:t})})})}),eD=new Intl.Collator;function eE(e){return e.sort(function(e,n){return eD.compare(e.displayName,n.displayName)})}var eR=[1e3,2500,5e3];function eI(){var e,n=(0,c.md)(eS),t=(0,c.Xr)(eA),o=(0,c.Xr)(eC),l=(0,i._)((0,s.useState)(!1),2),u=l[0],d=l[1],p=(0,i._)((0,s.useState)(1e3),2),f=p[0],h=p[1];return{fetchObjects:(0,s.useCallback)((e=(0,r._)(function(e){var r,i,l,s,c,u,p,h,m,g,v,w;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(r=e.bucketExternalId,i=e.matchGlob,l=e.loadMorePageToken,s=e.isNewBucket,c=e.onError,s)return t({bucketExternalId:r,objects:[],isSearch:i}),[2];d(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),o({bucketExternalId:r,isLoading:!0}),p=n.get(r),h=i?null==p?void 0:null===(u=p.search)||void 0===u?void 0:u.currentPageToken:null==p?void 0:p.currentPageToken,[4,function(e){return el.apply(this,arguments)}({bucketExternalId:r,pageToken:null!=l?l:h,matchGlob:i,maxResults:f})];case 2:return g=(m=a.sent()).items,v=m.nextPageToken,t({bucketExternalId:r,objects:g,nextPageToken:v,isSearch:i}),[3,5];case 3:return w=a.sent(),K.Cp(w,{tags:{bucketExternalId:r,action:"fetchObjects"}}),null==c||c(w instanceof Error?w:Error("Failed to fetch objects")),[3,5];case 4:return o({bucketExternalId:r,isLoading:!1}),d(!1),[7];case 5:return[2]}})}),function(n){return e.apply(this,arguments)}),[t,o,n,f]),setMaxResults:h,maxResults:f,loading:u}}function eF(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(ex),l=(0,c.Xr)(e_),u=(0,c.Xr)(ek);function d(){return(d=(0,r._)(function(e){var n,i,s,c,d;return(0,a.YH)(this,function(p){switch(p.label){case 0:n=e.bucketExternalId,i=e.files,s=e.targetFolder,c=e.onError,t(!0),p.label=1;case 1:var f;return p.trys.push([1,3,,4]),[4,Promise.all(i.map((f=(0,r._)(function(e){var t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:t=s+(e.webkitRelativePath||e.dirPath||e.name),o({bucketExternalId:n,name:t,contentType:e.type,size:null==e?void 0:e.size.toString()}),r=e.size>0x1e00000?eo.Multipart:eo.Direct,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,es({bucketExternalId:n,objectName:t,file:e,uploadMethod:r})];case 2:return i.sent(),u({bucketExternalId:n,name:t,isOptimisticallyInserted:!1}),[3,4];case 3:return i.sent(),l({bucketExternalId:n,name:t}),[3,4];case 4:return[2]}})}),function(e){return f.apply(this,arguments)})))];case 2:return p.sent(),[3,4];case 3:return d=p.sent(),null==c||c(d),[3,4];case 4:return t(!1),[2]}})})).apply(this,arguments)}return{uploadFiles:function(e){return d.apply(this,arguments)},loading:n}}function eT(){var e=(0,d._)(["\n  query UserBuckets($input: CurrentUserBucketsInput!) {\n    currentUser {\n      id\n      buckets(input: $input) {\n        ... on BucketConnection {\n          __typename\n          items {\n            ...ObjectStorageBucket\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return eT=function(){return e},e}function eP(){var e=(0,d._)(["\n  query OrgBuckets($orgId: String!, $input: OrgBucketsInput!) {\n    currentUser {\n      id\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          buckets(input: $input) {\n            ... on BucketConnection {\n              __typename\n              items {\n                ...ObjectStorageBucket\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n            ... on Error {\n              message\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return eP=function(){return e},e}function eL(){var e=(0,d._)(["\n  mutation AddReplBucket($input: AddReplBucketInput!) {\n    addReplBucket(input: $input) {\n      __typename\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return eL=function(){return e},e}var eU={},eN=(0,p.J1)(eT(),y),eO=(0,p.J1)(eP(),y),eM=(0,p.J1)(eL(),y),eB=t(19570),eH=t(61239),ez=t(59669),eW=t(6680),eG=t(47258),eV=t(62493),ej=t(95949),eZ=t(6553),eq=t(6761),eK=t(54572),e$=(0,T.x)({self:[P.wp.flex.growAndShrink(1)],error:[P.wp.color.accentNegativeStronger],button:[P.wp.reset.button,P.wp.viewStyle,eG.b.nofill,P.wp.display.inlineFlex,{borderColor:eG.b.outlined.borderColor},P.wp.flex.growAndShrink(1)],select:[P.wp.display.flex,P.wp.flex.growAndShrink(1)],selectDisabled:[{backgroundColor:eW.LU.backgroundHigher}],popover:[P.wp.width("max-content"),P.wp.overflow("auto"),P.wp.p(1),P.wp.minWidth(240)],labeledInput:[P.wp.flex.growAndShrink(1),P.wp.minWidth(250)],listbox:[P.wp.maxHeight(300),P.wp.minWidth(300),P.wp.overflow("auto")],dropdownItemAndContainer:[P.wp.flex.row,P.wp.align.center,eG.b.listItem,P.wp.px(8),P.wp.py(4)],selectedItemAndContainer:[P.wp.px(8),P.wp.py(4),P.wp.justify.spaceBetween,P.wp.align.center,P.wp.rowWithGap(8)],selectedBucketName:[P.wp.align.center,P.wp.textAlign.left,P.wp.rowWithGap(8)],bucketName:[P.wp.textAlign.left,P.wp.rowWithGap(8)],selectedCheckIcon:[P.wp.pl(8)],loading:[P.wp.minWidth(200),P.wp.display.flex,P.wp.flex.grow(1),eV.S.backgroundPulse(eW.LU.backgroundHighest,eW.LU.backgroundHigher)]});function eJ(e){var n=e.buckets,t=e.error,r=e.loading,i=e.onChange,o=e.onLoadMore,a=e.selectedBucketId,c=(0,s.useId)();return(0,l.FD)(z.S,{css:e$.self,children:[(0,l.Y)(e2,{buckets:n,loading:r,selectedBucketId:a,onLoadMore:o,onSelectionChange:function(e){"string"==typeof e&&i(e)}}),t?(0,l.Y)(z.S,{css:e$.error,"aria-live":"polite","aria-atomic":"true",id:c,children:(0,l.Y)("span",{children:t})}):null]})}var eQ=(0,T.x)({self:[e$.dropdownItemAndContainer,P.wp.justify.spaceBetween,{backgroundColor:eW.LU.interactiveBackground}]});function eX(){return(0,l.Y)(z.S,{css:e$.selectDisabled,children:(0,l.Y)(z.S,{css:e$.selectedItemAndContainer,children:(0,l.Y)(z.S,{css:e$.selectedBucketName,children:(0,l.Y)(H.EY,{color:"dimmer",variant:"text",children:"No buckets available to add"})})})})}function e0(e){var n=e.title;return(0,l.FD)(z.S,{css:e$.selectedItemAndContainer,children:[(0,l.Y)(z.S,{css:e$.selectedBucketName,children:(0,l.Y)(H.EY,{variant:"text",children:n})}),(0,l.Y)(eK.A,{})]})}function e1(e){var n=e.bucketName,t=e.selected;return(0,l.FD)(z.S,{css:t?eQ.self:e$.dropdownItemAndContainer,children:[(0,l.Y)(z.S,{css:e$.bucketName,align:"center",children:(0,l.Y)(H.EY,{variant:"text",color:t?"default":"dimmer",children:n})}),(0,l.Y)(z.S,{css:e$.selectedCheckIcon,align:"center",row:!0,children:t?(0,l.Y)(eq.A,{}):null})]})}function e2(e){var n=e.buckets,t=e.loading,r=e.selectedBucketId,i=e.onLoadMore,o=e.onSelectionChange,a=(0,L.c)(),c=(0,s.useMemo)(function(){return n.find(function(e){return e.id===r})},[n,r]);return(0,l.FD)(z.S,{css:e$.labeledInput,gap:8,children:[(0,l.Y)(O.J,{htmlFor:a("bucket"),children:"Bucket"}),t?(0,l.Y)(N.pd,{css:e$.loading,disabled:!0}):(0,l.FD)(eB.l6,{css:e$.select,id:a("bucket"),onSelectionChange:o,"aria-label":"Bucket Select",children:[(0,l.Y)(eH.$,{css:e$.button,isDisabled:!c,children:c?(0,l.Y)(e0,{title:c.name}):(0,l.Y)(eX,{})}),(0,l.Y)(eZ.g_,{noArrow:!0,css:e$.popover,background:"default",placement:"bottom left",children:(0,l.Y)(ej.qF,{css:e$.listbox,onLoadMore:i,children:n.map(function(e){var n=e.id,t=e.name;return(0,l.Y)(ez.nh,{id:n,textValue:t,children:(0,l.Y)(e1,{bucketName:t,selected:n===r})},n)})})})]})]})}var e4=(0,T.x)({addBucketButton:[P.wp.flex.growAndShrink(1),P.wp.justify.center,P.wp.textAlign.center],row:[P.wp.flex.growAndShrink(1),P.wp.pt(16),P.wp.rowWithGap(16),{flexBasis:"300px"}],wrapper:[P.wp.flex.wrap]});function e5(e){var n,t,r,a,c,d,p,m,g,v,w,y,b,S,Y,A,C,k,_,D,E,R,I=e.excludeBucketIds,F=e.isOpen,T=e.onBucketAdded,P=e.onError,L=e.onRequestClose,N=e.orgId,O=(0,i._)((0,s.useState)(),2),V=O[0],j=O[1],Z=(0,x.A)(),K=(p=(n={onError:P,orgId:N}).orgId,m=n.onError,v=(g=(t=(0,u._)({},eU,{fetchPolicy:"network-only",onError:m,skip:void 0!==p,ssr:!1,variables:{input:e8}}),f.I(eN,t))).data,w=g.fetchMore,y=g.loading,b=(0,s.useCallback)(function(){var e,n,t;w({variables:{input:(0,q._)((0,u._)({},e8),{after:null==v?void 0:null===(t=v.currentUser)||void 0===t?void 0:null===(n=t.buckets)||void 0===n?void 0:null===(e=n.pageInfo)||void 0===e?void 0:e.nextCursor})},updateQuery:function(e,n){if(!(null===(a=n.fetchMoreResult)||void 0===a?void 0:null===(i=a.currentUser)||void 0===i?void 0:null===(r=i.buckets)||void 0===r?void 0:r.items))return e;var t=(0,u._)({},n.fetchMoreResult);if(null===(l=t.currentUser)||void 0===l?void 0:l.buckets){var r,i,a,l,s,c,d,p=null!==(d=null==e?void 0:null===(c=e.currentUser)||void 0===c?void 0:null===(s=c.buckets)||void 0===s?void 0:s.items)&&void 0!==d?d:[],f=t.currentUser.buckets.items;t.currentUser.buckets.items=(0,o._)(f).concat((0,o._)(p))}return t}})},[w,v]),Y=(S=(r=(0,u._)({},eU,{fetchPolicy:"network-only",onError:m,skip:void 0===p,ssr:!1,variables:{input:e8,orgId:p||""}}),f.I(eO,r))).data,A=S.fetchMore,C=S.loading,_=(null==(k=(null==Y?void 0:null===(a=Y.currentUser)||void 0===a?void 0:a.org.__typename)==="Org"?null==Y?void 0:null===(c=Y.currentUser)||void 0===c?void 0:c.org:void 0)?void 0:k.buckets.__typename)==="BucketConnection"?null==k?void 0:k.buckets:void 0,D=(0,s.useCallback)(function(){A({variables:{input:(0,q._)((0,u._)({},e8),{after:null==_?void 0:_.pageInfo.nextCursor})},updateQuery:function(e,n){var t,r,i=n.fetchMoreResult,a=null==i?void 0:i.currentUser;if((null==a?void 0:a.__typename)!=="CurrentUser")return e;var l=null==i?void 0:null===(t=i.currentUser)||void 0===t?void 0:t.org;if((null==l?void 0:l.__typename)!=="Org")return e;var s=l.buckets;if("BucketConnection"!==s.__typename)return e;var c=null==e?void 0:null===(r=e.currentUser)||void 0===r?void 0:r.org;if((null==c?void 0:c.__typename)!=="Org")return i;var d=c.buckets;return"BucketConnection"!==d.__typename?i:(0,q._)((0,u._)({},i),{currentUser:(0,q._)((0,u._)({},a),{__typename:"CurrentUser",org:(0,q._)((0,u._)({},l),{__typename:"Org",buckets:(0,q._)((0,u._)({},s),{__typename:"BucketConnection",items:(0,o._)(s.items).concat((0,o._)(d.items))})})})})}})},[A,_]),E=(0,s.useCallback)(function(){p?D():b()},[p,D,b]),{buckets:p?null==_?void 0:_.items:null==v?void 0:null===(d=v.currentUser)||void 0===d?void 0:d.buckets.items,fetchMore:E,loading:C||y}),$=K.buckets,J=K.fetchMore,Q=K.loading;(0,s.useEffect)(function(){!V&&$&&$.length>1&&j($[0].id)},[V,$]);var X=(0,s.useMemo)(function(){return $?$.filter(function(e){return!(null!=I?I:[]).includes(e.id)}):[]},[$,I]);(0,s.useEffect)(function(){!V&&X&&X.length>0&&j(X[0].id)},[X,V]);var ee=(0,i._)((R=(0,u._)({},eU,{variables:{input:{bucketId:null!=V?V:"",replId:Z}}}),h.n(eM,R)),2),en=ee[0],et=ee[1].loading;return(0,l.Y)(z.S,{children:(0,l.Y)(M.a,{fitContent:!0,isOpen:F,onRequestClose:L,children:(0,l.FD)(B.ui,{children:[(0,l.Y)(H.Y9,{level:1,variant:"subheadBig",children:"Choose a Bucket"}),(0,l.FD)(z.S,{css:e4.wrapper,row:!0,children:[(0,l.Y)(z.S,{css:e4.row,children:(0,l.Y)(eJ,{buckets:X,loading:Q,onChange:j,onLoadMore:J,selectedBucketId:V})}),(0,l.Y)(z.S,{css:e4.row,children:(0,l.Y)(U.$n,{css:e4.addBucketButton,text:et?"Adding Bucket to Repl...":"Add Bucket to Repl",onClick:function(){en({onCompleted:function(e){var n="Bucket"===e.addReplBucket.__typename?e.addReplBucket:null;if(!n){P(Error("Failed to create bucket"));return}T(n,!1),j(void 0)},onError:P})},colorway:"primary",iconLeft:et||Q?(0,l.Y)(W.A,{}):(0,l.Y)(G.A,{}),disabled:et||!V})})]})]})})})}var e8={count:10},e3=t(22531),e6=t(35135),e7=t(96866),e9=t(6620),ne=t(3910),nn=t(25584),nt=t(38224),nr=t(5408),ni=t(86278),no=t(75141),na=[{icon:(0,l.Y)(ni.A,{}),title:"JavaScript",value:"js"},{icon:(0,l.Y)(no.A,{}),title:"Python",value:"py"},{icon:(0,l.Y)(nr.A,{}),title:"All other languages",value:"other"}],nl={js:{packagerConfigLanguage:"nodejs",description:(0,l.Y)(nn.Ay,{components:{code:function(e){return(0,l.Y)(e6.A,(0,u._)({language:"json"},e))}},children:"This library supports Bun, Deno, and Node.js. It is not recommended for browser-based applications.\n  \nFor more information, see the [SDK Reference](https://docs.replit.com/cloud-services/storage-and-databases/object-storage/typescript-api-reference/)."}),packageName:"@replit/object-storage",commands:[{label:"Import Object Store Library",code:"const { Client } = require('@replit/object-storage');\nconst client = new Client();\n"},{label:"Download an object as text (i.e. JSON)",code:"const { ok, value: textValue, error } = await client.downloadAsText('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object as its raw byte representation (i.e. images)",code:"const { ok, value: bytesValue, error } = await client.downloadAsBytes('file.png');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object by streaming the object's contents (i.e. streaming data over an API)",code:"const { ok, value: stream, error } = await client.downloadAsStream('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object to the filesystem",code:"const { ok, error } = await client.downloadToFilename('file.json', destFilename);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"List the objects in the bucket",code:"const { ok, value, error } = await client.list();\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from text (i.e. JSON)",code:"const { ok, error } = await client.uploadFromText('file.json', data);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from its byte representation (i.e. images)",code:"const { ok, error } = await client.uploadFromBytes('file.png', data);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from the filesystem",code:"const { ok, error } = await client.uploadFromFilename('file.json', srcFilename);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from a stream (i.e. streaming data over an API)",code:"const { ok, error } = await client.uploadFromStream('file.json', stream);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Delete an object from the bucket",code:"const { ok, error } = await client.delete('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"}]},py:{packagerConfigLanguage:"python3",description:(0,l.Y)(nn.Ay,{components:{code:function(e){return(0,l.Y)(e6.A,(0,u._)({language:"json"},e))}},children:"For more information, see the [SDK Reference](https://docs.replit.com/cloud-services/storage-and-databases/object-storage/python-api-reference/)."}),packageName:"replit-object-storage",commands:[{label:"Import Object Store Library",code:"from replit.object_storage import Client\nclient = Client()"},{label:"Download an object as text (i.e. JSON)",code:'client.download_as_text("file.json")'},{label:"Download an object as its raw byte representation (i.e. images)",code:'client.download_as_bytes("file.png")'},{label:"Download an object to the filesystem",code:'client.download_to_filename("file.json", dest_filename)'},{label:"List the objects in the bucket",code:"client.list()"},{label:"Upload an object from text (i.e. JSON)",code:'client.upload_from_text("file.json", data)'},{label:"Upload an object from its byte representation (i.e. images)",code:'client.upload_from_bytes("file.png", data)'},{label:"Upload an object from the filesystem",code:'client.upload_from_filename("file.json", src_filename)'},{label:"Delete an object from the bucket",code:'client.delete("file.json")'}]},other:{description:(0,l.Y)(nn.Ay,{components:{code:function(e){return(0,l.Y)(e6.A,(0,u._)({language:"json"},e))}},children:'\nYou can use the [Google Cloud client libraries](https://cloud.google.com/storage/docs/reference/libraries#use) to interact with your bucket in any of the supported languages.\n\nIf there isn\'t a client library for your language of choice, you can use the [JSON API](https://cloud.google.com/storage/docs/json_api).\n\nWith both the client libraries and the JSON API, only blob/file/object APIs are authorized.\n\n## Authorization\n\n### Client libraries\n\n1. Create a JSON file with these contents in your project root directory, `google_application_credentials.json`\n\n```\n{\n  "type": "external_account",\n  "audience": "replit",\n  "credential_source": {\n    "url": "http://127.0.0.1:1106/credential"\n  },\n  "token_url": "http://127.0.0.1:1106/token"\n}\n```\n\n2. Set the `GOOGLE_APPLICATION_CREDENTIALS` environment variable to `"google_application_credentials.json"`\n3. Set the `GCLOUD_PROJECT` environment variable to `""`\n\n### JSON API\n\n1. Issue a `POST` request to `http://127.0.0.1:1106/token`\n\n## Bucket Selection\nUsing Google Cloud APIs or libraries directly requires a bucket name parameter to be specified on all requests. This field is interchangeable with your bucket\'s ID within Replit Object Storage.\n\nTo get the ID of the default bucket for your App or Deployment, issue a `GET` request to `http://127.0.0.1:1106/object-storage/default-bucket`\n'}),commands:[]}},ns=(0,T.x)({statusBanner:[P.wp.maxWidth("fit-content")]});function nc(e){var n=e.onError,t=(0,i._)((0,s.useState)("js"),2),o=t[0],c=t[1],d=(0,C.A)().showConfirm,p=(0,D.A)().packager,f=(0,e7.J)().configs,h=(0,e9.hF)(),m=(0,i._)((0,s.useState)(!1),2),g=m[0],v=m[1],w=f.find(function(e){return e.language===nl[o].packagerConfigLanguage}),y=!!(nl[o].packagerConfigLanguage&&nl[o].packageName&&w),b=!!(w&&h(w.id).some(function(e){return e.name===nl[o].packageName})),S=(0,i._)((0,s.useState)(!1),2),Y=S[0],A=S[1];function x(){return(x=(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:if(!y)return n(Error("Package not available for selected language")),[2];return v(!0),[4,p.addPackages([{name:nl[o].packageName}])];case 1:return e.sent()?(d("Installed ".concat(nl[o].packageName," package")),A(!0)):n(Error("Failed to install ".concat(nl[o].packageName," package"))),[2]}})})).apply(this,arguments)}var k=na.find(function(e){return e.value===o}),_=Y||b;return(0,s.useLayoutEffect)(function(){var e=!0,n=!1,t=void 0;try{for(var r,i=na[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=function(){var e=r.value;if(nl[e.value].packagerConfigLanguage&&f.find(function(n){return n.language===nl[e.value].packagerConfigLanguage}))return c(e.value),{v:void 0}}();if("object"===(0,e3._)(o))return o.v}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}c("other")},[]),(0,l.FD)(z.S,{gap:16,children:[(0,l.Y)(z.S,{row:!0,gap:0,children:(0,l.Y)(nt.l,{items:na,selectedItem:k,initialSelectedItem:na[0],onChange:function(e){A(!1),c(e.value)}})}),nl[o].description?nl[o].description:null,!_&&y?(0,l.Y)(U.$n,{onClick:function(){return x.apply(this,arguments)},text:"Install ".concat(nl[o].packageName," package"),colorway:"primary",loading:g}):null,k&&_?(0,l.Y)(ne.N,{text:"Package installed",colorway:"positive",css:ns.statusBanner}):null,nl[o].commands.map(function(e){return(0,l.FD)(z.S,{gap:6,children:[(0,l.Y)(H.EY,{children:e.label}),(0,l.Y)(nn.Ay,{components:{code:function(e){return(0,l.Y)(e6.A,(0,u._)({language:o},e))}},children:"```\n".concat(e.code)})]},e.label)})]})}function nu(){var e=(0,d._)(["\n  query ObjectStorageReplOrg($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return nu=function(){return e},e}var nd={},np=(0,p.J1)(nu()),nf=t(34951),nh=t(52097),nm=t(98899),ng=t(93415),nv=t(93548),nw=t(87736),ny=t(38169),nb=t(19706),nS=t(11406),nY=t(74406),nA=t(32633),nC=(0,T.x)({ctaStatusBanner:[P.wp.textAlign.left],cta:[P.wp.width("100%"),P.wp.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],payment:[P.wp.p(16),P.wp.borderRadius(12),P.wp.textAlign.left,P.wp.shadow(2)]});function nx(e){var n=e.children,t=e.createBucketAuthz,o=e.actionDescription,c=e.refetchAuthzQueryData,u=e.loading,d=e.replId,p=(0,i._)((0,s.useState)(!1),2),f=p[0],h=p[1],m=(0,i._)((0,s.useState)(!1),2),g=m[0],v=m[1];return(0,l.FD)(l.FK,{children:[(0,l.FD)(z.S,{gap:8,children:[(0,l.Y)(nk,{replId:d,mainActionCTA:n,showPaymentMethodForm:f,setShowPaymentMethodForm:function(){return h(!0)},setShowSupportForm:function(){return v(!0)},createBucketAuthz:t,actionDescription:o,refetchAuthzQueryData:c,loading:u}),f?(0,l.Y)(B.ui,{elevated:!0,css:nC.payment,children:(0,l.Y)(nv.y,{onSuccess:(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return h(!1),[4,c()];case 1:return e.sent(),[2]}})}),context:"workspace_object_storage_pane"})}):null]}),(0,l.Y)(M.a,{isOpen:g,onRequestClose:function(){return v(!1)},children:(0,l.Y)(nS.A,{onRequestClose:function(){return v(!1)}})})]})}function nk(e){var n=e.mainActionCTA,t=e.showPaymentMethodForm,r=e.setShowPaymentMethodForm,i=e.setShowSupportForm,o=e.createBucketAuthz,a=e.actionDescription,s=e.refetchAuthzQueryData,c=e.loading,u=e.replId,d=(0,ng.m6)();if(!o)return null;if(!o.isAuthorized&&d)return(0,l.Y)(ne.N,{text:o.message,colorway:"warning",icon:(0,l.Y)(nA.A,{}),css:nC.ctaStatusBanner});switch(o.code){case nf.S4.RequiresActiveSubscription:case nf.S4.RequiresPaymentMethodOrSubscription:return(0,l.FD)(z.S,{gap:8,align:"center",children:[(0,l.Y)(nw.A,{context:"workspace_object_storage_pane",text:"Upgrade your plan to ".concat(a,"."),css:nC.cta,colorway:"primary",variant:"default",disabled:t,onPlanCheckoutComplete:s}),(0,l.Y)(U.$n,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:nC.cta,disabled:t,loading:c,iconLeft:(0,l.Y)(nY.A,{}),onClick:function(){return r()}})]});case nf.S4.RequiresSmsVerification:return(0,l.Y)(nm.A,{context:nf.SG.ObjectStorage,onSuccess:s});case nf.S4.RequiresPaymentMethod:return(0,l.Y)(U.$n,{colorway:"primary",text:"Add a payment method",css:nC.cta,disabled:t,loading:c,iconLeft:(0,l.Y)(nY.A,{}),onClick:function(){return r()}});case nf.S4.RequiresUnbanning:return(0,l.Y)(nb.d,{text:"Your account is not currently allowed to ".concat(a,". We're here to help! Please reach out to our support team for assistance."),colorway:"warning",iconLeft:(0,l.Y)(nA.A,{}),css:nC.ctaStatusBanner,onClick:function(){return i()}});case nf.S4.InsufficientBudget:return(0,l.FD)(l.FK,{children:[(0,l.Y)(ne.N,{text:"You've reached your monthly usage budget. Increase your budget to ".concat(a,"."),colorway:"warning",icon:(0,l.Y)(nA.A,{}),css:nC.ctaStatusBanner}),(0,l.Y)(ny.h,{onUpdateSuccess:s,replId:u})]});case nf.S4.FeatureDisabled:case nf.S4.FeatureUnsupportedForReplitTeams:case nf.S4.FeatureUnsupportedForTeamsEdu:case nf.S4.FeatureUnsupportedForTeamsFree:case nf.S4.FeatureUnsupportedForTeamsPro:case nf.S4.InsufficientPermissions:case nf.S4.InsufficientQuota:case nf.S4.RequiresActiveTeamsSubscription:case nf.S4.RequiresEmailVerification:return(0,l.Y)(ne.N,{text:o.message,colorway:"warning",icon:(0,l.Y)(nA.A,{}),css:nC.ctaStatusBanner});case nf.S4.Authorized:case nf.S4.AuthorizedQuota:return(0,l.Y)(l.FK,{children:n});default:(0,nh.A)(o.code)}}var n_=t(33078),nD=t(37407),nE=t(74967),nR=t(97783),nI=[{imageUrl:"/public/images/object-storage/objects-in-bucket.svg",text:"Store immutable files, like photos and documents, in writable buckets (databases for unstructured files).",altText:"An image and a file going into a bucket"},{imageUrl:"/public/images/object-storage/upload-to-cloud.svg",text:"Deploy apps that handle variable sets of files added by your users, like an upload-based photo gallery.",altText:"Images being uploaded to a cloud"},{imageUrl:"/public/images/object-storage/share-same-bucket.svg",text:"Buckets are automatically shared between development and production, so you can easily pass files to your users directly from the Workspace.",altText:"Development icon and deployment icon sharing a bucket"}],nF=(0,T.x)({action:[P.wp.width("100%"),P.wp.maxWidth(320),P.wp.px(32),{marginLeft:"auto",marginRight:"auto"}],rowText:[P.wp.flex.growAndShrink(1),P.wp.textAlign.left]});function nT(e){var n,t,r,o=e.createBucketAuthz,a=e.editBucketAuthz,c=e.refetchAuthzQueryData,d=e.onBucketAdded,p=e.onError,h=e.innerRef,m=(0,i._)((0,s.useState)(!1),2),g=m[0],v=m[1],w=(0,s.useCallback)(function(){return v(!1)},[]),y=(0,s.useCallback)(function(){return v(!0)},[]),b=(0,i._)((0,s.useState)(!1),2),S=b[0],A=b[1],C=(0,s.useCallback)(function(){return A(!1)},[]),k=(0,s.useCallback)(function(){return A(!0)},[]),_=(0,x.A)(),D=(n=(0,u._)({},nd,{variables:{replId:_}}),f.I(np,n)).data,E=(null==D?void 0:D.getRepl.__typename)==="Repl"?null===(t=D.getRepl.org)||void 0===t?void 0:t.id:void 0,R=(0,i._)(Y(),2),I=R[0],F=R[1].loading;return(0,l.FD)(l.FK,{children:[(0,l.Y)(e5,{isOpen:g,onBucketAdded:d,onError:p,onRequestClose:w,orgId:E}),(0,l.Y)(j,{isOpen:S,loading:F,handleCreateBucket:function(e){I({variables:{input:e},onCompleted:function(e){var n="Bucket"===e.createBucket.__typename?e.createBucket:null;if(!n){p(Error("Failed to create bucket"));return}d(n)},onError:p})},onRequestClose:C}),(0,l.Y)(n_.A,{pane:{type:"objectStorage"},maxWidth:450,body:nI.map(function(e,n){return(0,l.FD)(z.S,{row:!0,gap:16,children:[(0,l.Y)(z.S,{children:(0,l.Y)(nE.A,{src:e.imageUrl,width:44,height:44,alt:e.altText})}),(0,l.Y)(H.EY,{css:nF.rowText,children:e.text})]},n)}),innerRef:h,action:(0,l.FD)(nx,{replId:_,createBucketAuthz:o,actionDescription:"create a bucket",refetchAuthzQueryData:c,loading:F,children:[(0,l.Y)(U.$n,{css:nF.action,text:F?"Creating bucket...":"Create new bucket",onClick:k,colorway:"primary",iconLeft:F?(0,l.Y)(W.A,{}):(0,l.Y)(G.A,{}),disabled:F}),(0,l.Y)(z.S,{children:(0,l.Y)(nD.m_,{isDisabled:null==a?void 0:a.isAuthorized,tooltip:null!==(r=null==a?void 0:a.message)&&void 0!==r?r:"You are not authorized to edit buckets",delay:"default",placement:"bottom-start",children:(0,l.Y)(U.$n,{css:nF.action,text:"Use an existing bucket",onClick:y,iconLeft:(0,l.Y)(nR.A,{}),disabled:F||!(null==a?void 0:a.isAuthorized)})})})]})})]})}var nP=t(83846),nL=t(95983),nU=t(4880),nN=t(99767),nO=t(91564),nM=t(14365),nB=t(75322),nH=t(98444),nz=function(e){var n=e.folderPath,t=e.onDropNativeFiles,r=(0,i._)((0,nB.H)(function(){return{accept:[ei.FILE,nH.FILE],drop:function(e){return"files"in e&&t(e.files),{name:n}},collect:function(e){return{isOver:!!e.isOver()}}}}),2);return{isDraggedOver:r[0].isOver,drop:r[1]}},nW=function(e){var n=e.currentFolder,t=e.onDropNativeFiles,r=(0,i._)((0,nB.H)(function(){return{accept:[nH.FILE],drop:function(e,n){!n.didDrop()&&e.dirContent.then(function(e){t(e)})},collect:function(e){return{isOverCurrent:e.isOver({shallow:!0})}}}},[n]),2);return{isOverCurrent:r[0].isOverCurrent,drop:r[1]}},nG=t(5902),nV=t(22498),nj=t(34231),nZ=t(26705),nq=t(41845),nK=t(12966),n$=t(88654),nJ=t(26600),nQ=t(84138),nX=t(67811),n0=t(6865),n1=t(87498),n2=t(53363),n4=t(12408),n5=t(18240),n8=t(55806),n3=t(56020),n6=t(59086),n7=t(19915),n9="1px dashed ".concat(eW.LU.accentPrimaryDefault),te=P.kL.min(500),tn=(0,nV.v)(["bodyOutline","bodyMarginBottom"]),tt=tn.cssVars,tr=tn.styleTokens,ti=(0,T.x)({wrapper:[P.wp.flex.growAndShrink(1)],buttons:[(0,nP._)({},te,[P.wp.rowWithGap(8)])],secondaryButtons:[P.wp.flex.grow(1)],tableWrapper:[P.wp.flex.growAndShrink(1),P.wp.borderRadius(4),{outline:tr.bodyOutline,marginBottom:tr.bodyMarginBottom}],tableHeader:[P.wp.position.sticky,P.wp.top(0),P.wp.textAlign.left,P.wp.zIndex(1),P.wp.backgroundColor.backgroundDefault],tableHeaderMainColumn:[P.wp.textAlign.left,P.wp.p(4)],footer:[P.wp.mb(8),P.wp.pt(8),P.wp.flex.growAndShrink(1)],loadMoreButton:[P.wp.flex.growAndShrink(1)],pageSizeSelect:[P.wp.minWidth(75),{borderTopRightRadius:"".concat(eW.LU.space4," !important"),borderBottomRightRadius:"".concat(eW.LU.space4," !important")}],searchWrapper:[P.wp.flex.grow(1)]});function to(e){var n,t,d,p,f,h,m,g,v=e.bucketExternalId,w=e.onOpenCommandsTab,y=e.onError,b=(0,i._)((0,s.useState)(""),2),S=b[0],Y=b[1],A=(0,c.md)(eS).get(v),C=null!==(m=null==A?void 0:A.isLoading)&&void 0!==m&&m,x=(0,i._)((0,s.useState)(""),2),k=x[0],_=x[1],D=(t=(n={searchQuery:S,bucketState:A,currentFolder:k}).bucketState,d=n.currentFolder,(0,s.useMemo)(function(){if(!t)return{displayedItems:[],nextPageToken:void 0,total:0};var e=t.items,n=t.search,r=t.nextPageToken,i=n?n.items:e,a=n?n.nextPageToken:r,l=n?n.items.length:e.length,s=[],c=new Map,p=!0,f=!1,h=void 0;try{for(var m,g=i[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=m.value;if(v.name.startsWith(d)&&v.name!==d){var w=v.name.slice(d.length);if(!w.includes("/")){s.push((0,q._)((0,u._)({},v),{isFolder:!1,displayName:w}));continue}var y=w.split("/")[0];if(c.get(y)||c.set(y,{isFolder:!0,name:d+y+"/",displayName:y}),v.name===d+y+"/"){var b=c.get(y);if(!b)throw Error("Folder should have been added to map");b.optimisticallyInserted=v.optimisticallyInserted,b.isPendingDeletion=v.isPendingDeletion}}}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}var S=eE(Array.from(c.values())),Y=eE(s);return{displayedItems:(0,o._)(S).concat((0,o._)(Y)),nextPageToken:a,total:l}},[t,d])),E=D.displayedItems,R=D.nextPageToken,I=D.total,F=!!R,T=(0,s.useMemo)(function(){return[{accessorKey:"name",header:"Name",size:500},{accessorKey:"added",header:"Added",size:200},{accessorKey:"size",header:"Size",size:200}]},[]),P=(0,nL.useReactTable)({data:E,columns:T,getCoreRowModel:(0,nL.getCoreRowModel)()}),L=P.getRowModel().rows,N=(0,s.useRef)(null),O=(0,nU.Te)({count:F?L.length+1:L.length,getScrollElement:function(){return N.current},estimateSize:function(){return 34},overscan:20}),M=eI(),B=M.fetchObjects,G=M.maxResults,V=M.setMaxResults,j=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(ex),l=(0,c.Xr)(ek),u=(0,c.Xr)(e_);function d(){return(d=(0,r._)(function(e){var n,r,i,s,c,d,p;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(n=e.bucketExternalId,r=e.folderName,i=e.currentFolder,s=e.onError,r.includes("/"))return null==s||s(Error("Folder name cannot contain a forward slash")),[2];t(!0),o({bucketExternalId:n,name:c=i+r+"/",contentType:"text/plain",size:"0"}),d=new File([""],r,{type:"text/plain"}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,es({bucketExternalId:n,objectName:c,file:d})];case 2:return a.sent(),l({bucketExternalId:n,name:c,isOptimisticallyInserted:!1}),[3,4];case 3:return p=a.sent(),null==s||s(p),u({bucketExternalId:n,name:c}),[3,4];case 4:return t(!1),[2]}})})).apply(this,arguments)}return{createFolder:function(e){return d.apply(this,arguments)},loading:n}}().createFolder,Z=eF().uploadFiles,K=(0,s.useRef)(null),$=(0,s.useRef)(null),J=(0,i._)((0,s.useState)(!1),2),Q=J[0],X=J[1],ee=(0,i._)((0,s.useState)(null),2),en=ee[0],et=ee[1],er=nW({currentFolder:k,onDropNativeFiles:function(e){Z({bucketExternalId:v,files:e,targetFolder:k,onError:y})}}),ei=er.isOverCurrent,eo=er.drop,ea=function(e){Y(e),""===e&&B({bucketExternalId:v,onError:y})},el=!(E&&E.length);return(0,l.FD)(l.FK,{children:[(0,l.FD)(z.S,{css:ti.wrapper,children:[(0,l.FD)(z.S,{css:ti.buttons,gap:8,children:[(0,l.FD)(z.S,{row:!0,gap:8,children:[(0,l.Y)(U.$n,{onClick:function(){K.current&&K.current.click()},text:"Upload files",colorway:"primary",iconLeft:(0,l.Y)(n1.A,{})}),(0,l.Y)(U.$n,{onClick:function(){$.current&&$.current.click()},text:"Upload folder",colorway:"primary",iconLeft:(0,l.Y)(n5.A,{})})]}),(0,l.FD)(z.S,{css:ti.secondaryButtons,row:!0,gap:8,justify:"space-between",children:[(0,l.Y)(U.$n,{onClick:function(){return X(!0)},text:"Create folder",iconLeft:(0,l.Y)(n4.A,{})}),(0,l.Y)(z.S,{css:ti.searchWrapper,children:(0,l.Y)(nq.I,{value:S,onChange:function(e){return ea(e.target.value)},onKeyDown:function(e){"Escape"===e.key&&ea(""),"Enter"===e.key&&B({bucketExternalId:v,matchGlob:S,onError:y})},onClear:function(){return ea("")},disabled:C})}),(0,l.Y)(U.$n,{onClick:function(){return B({bucketExternalId:v,matchGlob:S,onError:y})},text:"Refresh",loading:C,iconLeft:(0,l.Y)(n6.A,{})})]})]}),(0,l.FD)(z.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,l.Y)(tb,{currentFolder:k,bucketExternalId:v,setCurrentFolder:_,onError:y}),(0,l.Y)(z.S,{children:C?(0,l.Y)(W.A,{size:12}):(0,l.FD)(H.EY,{color:"dimmer",variant:"small",children:[F?"Loaded":"Total"," ",I]})})]}),(0,l.Y)(z.S,{innerRef:eo,css:ti.tableWrapper,style:(g={},(0,nP._)(g,tt.bodyOutline,(f=(p={isOverCurrent:ei,isEmpty:el}).isOverCurrent,h=p.isEmpty,f?n9:h?"1px dashed ".concat(eW.LU.outlineDefault):void 0)),(0,nP._)(g,tt.bodyMarginBottom,ei||el?eW.LU.space8:void 0),g),children:!el||Q?(0,l.Y)("div",{ref:N,className:"container",style:{overflow:"auto",flex:"1 1 auto"},children:(0,l.Y)("div",{style:{height:"".concat(O.getTotalSize(),"px")},children:(0,l.FD)("table",{style:{width:"100%"},children:[(0,l.Y)("thead",{css:ti.tableHeader,children:P.getHeaderGroups().map(function(e){return(0,l.Y)("tr",{children:e.headers.map(function(e){return(0,l.Y)("th",{css:ti.tableHeaderMainColumn,colSpan:e.colSpan,style:{width:e.getSize()},children:(0,nL.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,l.FD)("tbody",{children:[Q?(0,l.Y)(tA,{onCreateFolder:function(e){X(!1),j({bucketExternalId:v,folderName:e,currentFolder:k,onError:y})},onCanceled:function(){return X(!1)}}):null,O.getVirtualItems().map(function(e,n){if(e.index>L.length-1)return(0,l.Y)("tr",{style:{height:"".concat(e.size,"px"),transform:"translateY(".concat(e.start-n*e.size,"px)")},children:(0,l.Y)("td",{colSpan:3,children:(0,l.FD)(nj.Y,{css:ti.footer,children:[(0,l.Y)(U.$n,{css:ti.loadMoreButton,onClick:function(){return B({bucketExternalId:v,matchGlob:S,loadMorePageToken:R,onError:y})},text:C?"":"Load more",iconLeft:C?(0,l.Y)(W.A,{}):void 0,loading:C,disabled:C||!F}),(0,l.Y)(nK.l,{css:ti.pageSizeSelect,isDisabled:C||!F,"aria-label":"Select page size",selectedKey:G.toString(),onSelectionChange:function(e){return V(Number(e))},items:eR.map(function(e){return{id:e.toString()}}),children:function(e){return(0,l.Y)(ej.nh,{label:e.id},e.id)}})]})})},e.key.toString());var t=E[e.index];return t?t.isFolder?(0,l.Y)(tc,{index:n,virtualRow:e,item:t,setCurrentFolder:_,onDeleteClick:et,bucketExternalId:v,onError:y},t.name):(0,l.Y)(tu,{index:n,virtualRow:e,item:t,bucketExternalId:v,onDeleteClick:et,onError:y},t.name):null})]})]})})}):(0,l.Y)(l.FK,{children:C?(0,l.Y)(z.S,{align:"center",justify:"center",style:{flex:1},children:(0,l.Y)(W.A,{})}):(0,l.Y)(t_,{onOpenCommandsTab:w})})}),(0,l.Y)(nG.v,{fileUploadInputRef:K,dirUploadInputRef:$,uploadFiles:function(e){return Z({bucketExternalId:v,files:e.files,targetFolder:k,onError:y})}})]}),(0,l.Y)(tx,{bucketExternalId:v,requestedDeleteItem:en,onRequestClose:function(){return et(null)},onError:y})]})}var ta=(0,nV.v)(["rowOutline","rowOpacity","rowTextDecoration","rowCursor"]),tl=ta.cssVars,ts=ta.styleTokens;function tc(e){var n,t=e.index,r=e.virtualRow,i=e.item,o=e.bucketExternalId,a=e.setCurrentFolder,s=e.onDeleteClick,c=e.onError,u=eF().uploadFiles,d=(0,C.A)().showConfirm,p=nz({folderPath:i.name,onDropNativeFiles:function(e){d('Uploading files to "'.concat(i.name,'"')),u({bucketExternalId:o,files:e,targetFolder:i.name,onError:c})}}),f=p.isDraggedOver,h=p.drop;return(0,l.Y)(th,{index:t,virtualRow:r,item:i,ref:h,onDeleteClick:function(){return s(i)},icon:(0,l.Y)(n2.A,{}),timeCreatedCell:"-",sizeCell:"-",style:(n={},(0,nP._)(n,tl.rowOutline,f?n9:void 0),(0,nP._)(n,tl.rowCursor,"pointer"),n),onClick:function(){return a(i.name)},onKeyDown:function(e){"Enter"===e.key&&a(i.name)}})}function tu(e){var n,t,o,u,d,p=e.index,f=e.virtualRow,h=e.item,m=e.bucketExternalId,g=e.onDeleteClick,v=e.onError,w=encodeURIComponent(h.name),y="/object-storage/storage/v1/b/".concat(m,"/o/").concat(w,"?alt=media"),b=!!(h.optimisticallyInserted||h.isPendingDeletion),S=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(ek),l=(0,c.Xr)(ex),u=(0,c.Xr)(e_);function d(){return(d=(0,r._)(function(e){var n,r,i,s,c,d,p;return(0,a.YH)(this,function(a){switch(a.label){case 0:n=e.bucketExternalId,r=e.object,i=e.destinationFolder,s=e.onError,c=e.onSuccess,t(!0),d=i+r.name.split("/").pop(),o({bucketExternalId:n,name:r.name,isPendingDeletion:!0}),l({bucketExternalId:n,name:d,contentType:r.contentType,size:r.size}),a.label=1;case 1:return a.trys.push([1,4,,5]),[4,function(e){return ev.apply(this,arguments)}({destinationBucketExternalId:n,sourceBucketExternalId:n,sourceObjectName:r.name,destinationObjectName:d})];case 2:return a.sent(),[4,em({bucketExternalId:n,objectName:r.name})];case 3:return a.sent(),u({bucketExternalId:n,name:r.name}),o({bucketExternalId:n,name:d,isOptimisticallyInserted:!1}),null==c||c(),[3,5];case 4:return p=a.sent(),null==s||s(p),o({bucketExternalId:n,name:r.name,isPendingDeletion:!1}),u({bucketExternalId:n,name:d}),[3,5];case 5:return t(!1),[2]}})})).apply(this,arguments)}return{loading:n,moveObject:function(e){return d.apply(this,arguments)}}}().moveObject,Y=(0,C.A)().showConfirm,A=(t=(n={item:h,disableDrag:b,onDropOverFolder:function(e){return S({bucketExternalId:m,object:h,destinationFolder:e,onSuccess:function(){Y('Moved "'.concat(h.name,'" to "').concat(e,'"'))},onError:v})}}).item,o=n.disableDrag,u=n.onDropOverFolder,{isDragging:(d=(0,i._)((0,nM.i)(function(){return{type:ei.FILE,canDrag:!o,item:function(){return{name:t.name,type:ei.FILE}},collect:function(e){return{isDragging:!!e.isDragging()}},end:function(e,n){var t=n.getDropResult();t&&t&&u(t.name)}}},[o]),2))[0].isDragging,drag:d[1]}),x=A.isDragging,k=A.drag;return(0,l.Y)(th,{index:p,virtualRow:f,item:h,ref:k,onDeleteClick:function(){return g(h)},icon:(0,l.Y)(tC,{contentType:h.contentType}),timeCreatedCell:(0,l.Y)(n$.Dc,{date:h.timeCreated}),sizeCell:(0,nN.z)(Number(h.size),{isKib:!0,isKibNotation:!0}),style:(0,nP._)({},tl.rowOpacity,x?.5:void 0),additionalActionButtons:(0,l.Y)(l.FK,{children:(0,l.Y)(nZ.K0,{alt:"Download",css:tp.rowActionButton,children:(0,l.Y)("a",{download:h.displayName,href:y,css:P.wp.color.foregroundDefault,children:(0,l.Y)(nX.A,{})})})})})}var td=(0,T.x)({row:[P.wp.position.relative,P.wp.borderRadius(4),{outline:ts.rowOutline,outlineOffset:-1,opacity:ts.rowOpacity,cursor:ts.rowCursor,":hover":{background:"".concat(eW.LU.backgroundHigher," !important")},":hover #action-buttons":{display:"flex"},":focus":{outline:"2px solid ".concat(eW.LU.accentPrimaryDefault)}}],text:[P.wp.flex.shrink(1)]}),tp=(0,T.x)({row:[td.row],pendingRow:[td.row,P.wp.color.foregroundDimmest],tableData:[P.wp.p(4),{":first-of-type":{borderTopLeftRadius:4,borderBottomLeftRadius:4},":last-of-type, :nth-last-of-type(2)":{borderTopRightRadius:4,borderBottomRightRadius:4}}],text:td.text,strikeThroughText:[td.text,{textDecoration:"line-through"}],actionButtonTableData:[P.wp.position.relative],rowActionButtonGroup:[P.wp.px(4),P.wp.position.absolute,P.wp.right(0),P.wp.top(0),P.wp.bottom(0),P.wp.rowWithGap(4),P.wp.align.center,P.wp.backgroundColor.backgroundHigher,{display:"none",borderTopRightRadius:4,borderBottomRightRadius:4}],rowActionButton:[eG.b.filled],loadingTableData:[P.wp.position.relative],loadingIconWrapper:[P.wp.position.absolute,P.wp.right(4),P.wp.top(0),P.wp.bottom(0),P.wp.justify.center],loadingIcon:[{borderRadius:"50%"},P.wp.backgroundColor.backgroundDefault]}),tf=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],r=(0,i._)((0,s.useState)(null),2),o=r[0],a=r[1];return(0,s.useEffect)(function(){if(null!==o){var e=function(){t(o.offsetWidth<o.scrollWidth||o.offsetHeight<o.scrollHeight)};e();var n=new ResizeObserver(e);return n.observe(o),function(){return n.disconnect()}}},[o]),{attachObserver:a,isOverflowing:n}},th=(0,s.forwardRef)(function(e,n){var t=e.index,r=e.virtualRow,i=e.item,o=e.onDeleteClick,a=e.icon,s=e.timeCreatedCell,c=e.sizeCell,d=e.style,p=e.onClick,f=e.onKeyDown,h=e.additionalActionButtons,m=i.isPendingDeletion?tp.strikeThroughText:tp.text,g=i.optimisticallyInserted||i.isPendingDeletion,v=tf(),w=v.attachObserver,y=v.isOverflowing;return(0,l.FD)("tr",{style:(0,q._)((0,u._)({},d),{height:"".concat(r.size,"px"),transform:"translateY(".concat(r.start-t*r.size,"px)"),background:r.index%2==0?"color-mix(in srgb, ".concat(eW.LU.backgroundDefault," 60%, ").concat(eW.LU.backgroundRoot,")"):void 0}),ref:n,tabIndex:0,css:g?tp.pendingRow:tp.row,onClick:p,onKeyDown:f,children:[(0,l.Y)("td",{css:tp.tableData,children:(0,l.Y)(nD.m_,{isDisabled:!y,tooltip:i.displayName,children:(0,l.FD)(z.S,{row:!0,gap:8,align:"center",children:[a,(0,l.Y)(H.EY,{multiline:!0,maxLines:1,css:m,ref:w,children:i.displayName})]})})}),(0,l.Y)("td",{css:tp.tableData,children:(0,l.Y)(H.EY,{multiline:!0,maxLines:1,css:m,children:s})}),(0,l.Y)("td",{css:tp.tableData,children:(0,l.Y)(H.EY,{multiline:!0,maxLines:1,css:m,children:c})}),g?null:(0,l.Y)("td",{css:tp.actionButtonTableData,children:(0,l.FD)(z.S,{css:tp.rowActionButtonGroup,id:"action-buttons",children:[h,(0,l.Y)(nZ.K0,{onClick:o,alt:"Delete",css:tp.rowActionButton,children:(0,l.Y)(n7.A,{color:eW.LU.accentNegativeDefault})})]})}),g?(0,l.Y)("td",{css:tp.loadingTableData,children:(0,l.Y)(z.S,{css:tp.loadingIconWrapper,children:(0,l.Y)(W.A,{css:tp.loadingIcon})})}):null]},i.name)}),tm=(0,nV.v)(["breadcrumbOutline","breadcrumbTextColor"]),tg=tm.cssVars,tv=tm.styleTokens,tw=(0,T.x)({wrapper:[P.wp.pt(12),P.wp.pb(4)],breadcrumb:[{color:tv.breadcrumbTextColor,outline:tv.breadcrumbOutline}]}),ty=function(e){var n=e.split("/").filter(function(e){return""!==e}),t=n.map(function(e,t){return{folderName:e,path:n.slice(0,t+1).join("/")+"/"}});return[{folderName:"Objects",path:""}].concat((0,o._)(t))};function tb(e){var n=e.currentFolder,t=e.bucketExternalId,r=e.setCurrentFolder,i=e.onError,o=ty(n);return(0,l.Y)(z.S,{css:tw.wrapper,row:!0,gap:2,align:"center",children:o.map(function(e,n){var a=e.folderName,c=e.path,u=n===o.length-1;return(0,l.FD)(s.Fragment,{children:[(0,l.Y)(tS,{folderPath:c,folderName:a,bucketExternalId:t,onClick:function(){return r(c)},isLastBreadcrumb:u,onError:i}),u?null:(0,l.Y)(H.EY,{color:"dimmest",children:"/"})]},c)})})}function tS(e){var n,t=e.folderPath,r=e.folderName,i=e.bucketExternalId,o=e.onClick,a=e.isLastBreadcrumb,s=e.onError,c=eF().uploadFiles,u=nz({folderPath:t,onDropNativeFiles:function(e){return c({bucketExternalId:i,files:e,targetFolder:t,onError:s})}}),d=u.isDraggedOver,p=u.drop;return(0,l.Y)(U.$n,{ref:p,text:r,variant:"nofill",onClick:o,iconLeft:(0,l.Y)(n2.A,{}),size:"small",disabled:a,style:(n={},(0,nP._)(n,tg.breadcrumbTextColor,a?eW.LU.foregroundDefault:void 0),(0,nP._)(n,tg.breadcrumbOutline,d?n9:void 0),n),css:tw.breadcrumb})}var tY=(0,T.x)({icon:[P.wp.height(24),P.wp.width(24),P.wp.center]});function tA(e){var n=e.onCreateFolder,t=e.onCanceled,r=(0,i._)((0,s.useState)(""),2),o=r[0],a=r[1],c=(0,nO.A)(t,[]);return(0,l.Y)("tr",{children:(0,l.Y)("td",{colSpan:3,children:(0,l.FD)(z.S,{innerRef:c,row:!0,gap:8,align:"center",children:[(0,l.Y)(z.S,{css:tY.icon,children:(0,l.Y)(n2.A,{})}),(0,l.Y)(N.pd,{value:o,autoFocus:!0,onChange:function(e){return a(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(n(o),a("")),"Escape"===e.key&&t()},autoCapitalize:"off",autoComplete:"off",autoCorrect:"off"})]})})})}function tC(e){var n=e.contentType;return n?n.startsWith("image/")?(0,l.Y)(n8.A,{}):n.startsWith("video/")?(0,l.Y)(nQ.A,{}):n.startsWith("audio/")?(0,l.Y)(n3.A,{}):(0,l.Y)(n0.A,{}):(0,l.Y)(n0.A,{})}function tx(e){var n,t=e.bucketExternalId,o=e.requestedDeleteItem,u=e.onRequestClose,d=e.onError,p=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(ek),l=(0,c.Xr)(e_);function u(){return(u=(0,r._)(function(e){var n,r,i,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:n=e.bucketExternalId,r=e.objectName,i=e.onError,t(!0),o({bucketExternalId:n,name:r,isPendingDeletion:!0}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,em({bucketExternalId:n,objectName:r})];case 2:return a.sent(),l({bucketExternalId:n,name:r}),[3,4];case 3:return s=a.sent(),null==i||i(s),o({bucketExternalId:n,name:r,isPendingDeletion:!1}),[3,4];case 4:return t(!1),[2]}})})).apply(this,arguments)}return{loading:n,deleteObject:function(e){return u.apply(this,arguments)}}}().deleteObject,f=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(ek),l=(0,c.Xr)(e_),u=(0,c.md)(eS);function d(){return(d=(0,r._)(function(e){var n,i,s,c,d,p,f;return(0,a.YH)(this,function(h){switch(h.label){case 0:n=e.bucketExternalId,i=e.folderPath,s=e.onError,t(!0),p=(null!==(d=null===(c=u.get(n))||void 0===c?void 0:c.items)&&void 0!==d?d:[]).filter(function(e){return e.name.startsWith(i)}),h.label=1;case 1:var m;return h.trys.push([1,3,,4]),[4,Promise.all(p.map((m=(0,r._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:o({bucketExternalId:n,name:e.name,isPendingDeletion:!0}),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,em({bucketExternalId:n,objectName:e.name})];case 2:return t.sent(),l({bucketExternalId:n,name:e.name}),[3,4];case 3:return t.sent(),o({bucketExternalId:n,name:e.name,isPendingDeletion:!1}),[3,4];case 4:return[2]}})}),function(e){return m.apply(this,arguments)})))];case 2:return h.sent(),[3,4];case 3:return f=h.sent(),null==s||s(f),[3,4];case 4:return t(!1),[2]}})})).apply(this,arguments)}return{loading:n,deleteFolder:function(e){return d.apply(this,arguments)}}}().deleteFolder,h=(n=(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:if(!(null==o?void 0:o.isFolder))return[3,2];return[4,f({bucketExternalId:t,folderPath:o.name,onError:d})];case 1:return e.sent(),u(),[2];case 2:if(!o)return[3,4];return[4,p({bucketExternalId:t,objectName:o.name,onError:d})];case 3:e.sent(),u(),e.label=4;case 4:return[2]}})}),function(){return n.apply(this,arguments)});return(0,l.Y)(M.a,{isOpen:!!o,onRequestClose:u,children:o?(0,l.Y)(nJ.A,{name:o.displayName,description:'"'.concat(o.displayName,'" ').concat(o.isFolder?" and all its contents":""),entityType:o.isFolder?"folder":"file",hideModal:u,delete:h}):null})}var tk=(0,T.x)({wrapper:[P.wp.center,P.wp.colWithGap(16),P.wp.flex.grow(1),P.wp.justify.center,P.wp.borderRadius(4),P.wp.mb(8)],textWrapper:[P.wp.center,P.wp.colWithGap(4)],text:[P.wp.center],textButton:[P.wp.color.accentPrimaryStronger]});function t_(e){var n=e.onOpenCommandsTab;return(0,l.Y)(z.S,{css:tk.wrapper,children:(0,l.FD)(z.S,{css:tk.textWrapper,children:[(0,l.Y)(H.EY,{variant:"subheadBig",children:"No objects"}),(0,l.FD)(z.S,{css:tk.text,children:[(0,l.Y)(H.EY,{children:"Drag and drop or click to upload,"}),(0,l.FD)(z.S,{row:!0,gap:4,align:"center",children:[(0,l.Y)(H.EY,{children:"or"}),(0,l.Y)(U.$n,{variant:"underlinedOnHover",colorway:"primary",onClick:n,text:"upload using commands",css:tk.textButton})]})]})]})})}function tD(){var e=(0,d._)(["\n  mutation ObjectStorageSettingsDeleteBucket($input: DeleteBucketInput!) {\n    deleteBucket(input: $input) {\n      ... on Bucket {\n        id\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return tD=function(){return e},e}function tE(){var e=(0,d._)(["\n  mutation ObjectStorageSettingsRemoveReplBucket(\n    $input: RemoveReplBucketInput!\n  ) {\n    removeReplBucket(input: $input) {\n      __typename\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return tE=function(){return e},e}var tR={},tI=(0,p.J1)(tD()),tF=(0,p.J1)(tE(),y),tT=t(63041),tP=t(28365);function tL(e){var n,t,r=e.bucketId,o=e.bucketExternalId,a=e.onSettingsUpdate,c=e.onError,d=(0,x.A)(),p=(0,i._)((0,s.useState)(!1),2),f=p[0],m=p[1],g=function(){return m(!1)},v=(0,i._)((0,s.useState)(!1),2),w=v[0],y=v[1],b=function(){return y(!1)},S=(0,i._)((n=(0,u._)({},tR,void 0),h.n(tI,n)),2),Y=S[0],A=S[1].loading,C=(0,i._)((t=(0,u._)({},tR,void 0),h.n(tF,t)),2),k=C[0],_=C[1].loading;return(0,l.FD)(l.FK,{children:[(0,l.FD)(z.S,{gap:32,children:[(0,l.Y)(z.S,{gap:12,children:(0,l.FD)(z.S,{gap:6,children:[(0,l.Y)(H.EY,{variant:"subheadDefault",children:"Bucket ID"}),(0,l.Y)(nn.Ay,{children:"```\n".concat(o)})]})}),(0,l.FD)(z.S,{gap:12,children:[(0,l.FD)(z.S,{gap:6,children:[(0,l.Y)(U.$n,{text:_?"Removing Bucket from Repl...":"Remove Bucket from Repl",loading:_,css:P.wp.color.accentNegativeStronger,onClick:function(){return y(!0)}}),(0,l.Y)(H.EY,{color:"dimmest",children:"Your Repl will no longer be able to access this bucket. No data will be deleted and you can re-add this bucket at any time."})]}),(0,l.FD)(z.S,{gap:6,children:[(0,l.Y)(U.$n,{text:A?"Deleting…":"Delete Bucket",loading:A,iconLeft:(0,l.Y)(n7.A,{color:eW.LU.accentNegativeStronger}),css:P.wp.color.accentNegativeStronger,onClick:function(){return m(!0)}}),(0,l.Y)(H.EY,{color:"dimmest",children:"You cannot undo this action."})]})]})]}),(0,l.Y)(M.a,{isOpen:w,onRequestClose:b,children:(0,l.Y)(tT.A,{prompt:"Remove Bucket?",desc:"This action will revoke this Repl's access to this bucket.",onCancel:b,confirmText:"Remove Bucket",icon:(0,l.Y)(tP.A,{}),onConfirm:function(){k({variables:{input:{bucketId:r,replId:d}},onError:c,onCompleted:function(e){"Bucket"===e.removeReplBucket.__typename?a({type:"removeBucket",data:{bucketId:r}}):c(Error("Failed to remove bucket: "+e.removeReplBucket.message))}}),b()}})}),(0,l.Y)(M.a,{isOpen:f,onRequestClose:g,children:(0,l.Y)(nJ.A,{name:"bucket",description:"this bucket and all its contents",entityType:"bucket",hideModal:g,delete:function(){return Y({variables:{input:{bucketId:r}},onError:c,onCompleted:function(e){"Bucket"===e.deleteBucket.__typename?a({type:"deleteBucket",data:{bucketId:r}}):c(Error("Failed to delete bucket: "+e.deleteBucket.message))}})}})})]})}var tU=t(76089),tN=t(74863),tO=t(57667),tM=t(41685),tB=t(25757),tH=t(31412),tz=[{icon:(0,l.Y)(tB.A,{}),title:"Objects",value:"objects"},{icon:(0,l.Y)(nr.A,{}),title:"Commands",value:"commands"},{icon:(0,l.Y)(tH.A,{}),title:"Settings",value:"settings"}],tW=(0,T.x)({self:[P.wp.flex.growAndShrink(1)],controls:[P.wp.px(8),P.wp.py(4)],controlSeparator:[P.wp.color.outlineDefault,P.wp.px(8)],errorWrapper:[P.wp.p(16)],panels:[P.wp.flex.column,P.wp.px(8),P.wp.pt(12),P.wp.flex.growAndShrink(1)],objectTabPanel:[P.wp.flex.column,P.wp.flex.growAndShrink(1)]}),tG=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.onError,r=n.onCompleted,o=(0,x.A)(),a=(0,s.useCallback)(function(e){if((null==e?void 0:e.repl.__typename)==="Repl")try{return function(e){if("Repl"!==e.__typename)throw Error("Failed to fetch bucket data");var n,t=e.buckets;if(t&&"BucketConnection"!==t.__typename)throw Error(t.message);var r=null!==(n=null==t?void 0:t.items)&&void 0!==n?n:[];if(!r.length)return{buckets:r};var i=e.defaultBucket;if(i){if("Bucket"===i.__typename)return{initialBucket:i,buckets:r};throw Error(i.message)}return{initialBucket:r[0],buckets:r}}(e.repl)}catch(e){null==t||t(e)}},[]),l=(e=(0,u._)({},w,{variables:{replId:o,bucketsCount:10},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){if((null==e?void 0:e.repl.__typename)==="Repl"){var n=a(e);n&&(null==r||r(n))}}}),f.I(b,e)),c=l.data,d=l.loading,p=l.error,h=l.refetch,m=(0,i._)((0,s.useState)(c?a(c):void 0),2),g=m[0],v=m[1];return(0,s.useEffect)(function(){c&&v(a(c))},[a,c]),{buckets:null==g?void 0:g.buckets,initialBucket:null==g?void 0:g.initialBucket,data:c,loading:d,error:p,refetch:h}};function tV(){var e,n,t,u,d,p,f=(0,i._)((0,s.useState)(),2),h=f[0],m=f[1],g=(0,s.useMemo)(function(){return null==h?void 0:h.map(function(e){return e.id})},[h]),v=(0,i._)((0,s.useState)(),2),w=v[0],y=v[1],b=(0,i._)((0,s.useState)("objects"),2),S=b[0],x=b[1],R=(0,i._)((0,s.useState)(!1),2),I=R[0],F=R[1],T=(0,s.useCallback)(function(){return F(!1)},[]),P=(0,s.useCallback)(function(){return F(!0)},[]),L=(0,i._)((0,s.useState)(!1),2),U=L[0],N=L[1],O=(0,s.useCallback)(function(){return N(!1)},[]),M=(0,s.useCallback)(function(){return N(!0)},[]),B=(0,c.md)(eS).get(null!==(d=null==w?void 0:w.externalId)&&void 0!==d?d:""),W=eI(),G=W.fetchObjects,V=W.loading,Z=(0,s.useCallback)(function(e){y(e),x("objects"),G({bucketExternalId:e.externalId})},[G]),q=(0,D.A)().dotReplit;(0,s.useEffect)(function(){w&&q.updateDotReplit([(0,A.Xl)(w.externalId)])},[w,q]);var $=(0,C.A)(),J=$.showConfirm,Q=$.showError,X=function(e){Q(e.message),K.v4(function(n){n.setTag("object-storage-pane",!0),K.Cp(e)})},ee=tG({onError:X,onCompleted:function(e){var n=e.buckets,t=e.initialBucket;m(n),!w&&t&&(y(t),G({bucketExternalId:null==t?void 0:t.externalId}))}}),en=ee.data,et=ee.loading,er=ee.error,ei=ee.refetch,eo=(0,i._)(Y(),2),ea=eo[0],el=eo[1].loading,es=(0,s.useCallback)(function(e){var n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];m(function(n){return n?[e].concat((0,o._)(n)):[e]}),y(e),ei(),G({bucketExternalId:e.externalId,isNewBucket:n})},[G,ei]),ec=(0,s.useCallback)(function(e){var n=(null!=h?h:[]).filter(function(n){return n.id!==e});if(m(n),0===n.length){y(void 0),x("objects"),q.updateDotReplit([{path:"objectStorage",op:"remove"}]);return}y(n[0]),G({bucketExternalId:n[0].externalId}),x("objects")},[G,h,q]),eu=(null==en?void 0:en.repl.__typename)==="Repl"?en.repl.authorizations.createObjectBucket:void 0,ed=(null==en?void 0:en.repl.__typename)==="Repl"?en.repl.authorizations.editObjectBucket:void 0,ep=(null==en?void 0:en.repl.__typename)==="Repl"?null===(u=en.repl.org)||void 0===u?void 0:u.id:void 0,ef=(e=(0,E.Jw)(_._t.id,_.ij.UploadImages),n=(0,E.Jw)(_._t.id,_.ij.FindBucketId),(0,k.P)(e,n,{breadcrumb:"client/workspace/components/ObjectStorage/index.tsx:690"}));if(er)return(0,l.Y)(z.S,{css:tW.errorWrapper,children:(0,l.Y)(ne.N,{text:'Error: "'.concat(er.message,'". The issue has been logged and the Replit team will look into it.'),colorway:"negative"})});if(et&&!h)return(0,l.Y)(n_.A,{pane:{type:"objectStorage"},maxWidth:450,loading:!0,innerRef:ef});if(!w)return(0,l.Y)(nT,{createBucketAuthz:eu,editBucketAuthz:ed,refetchAuthzQueryData:ei,onBucketAdded:(t=(0,r._)(function(e){var n=arguments;return(0,a.YH)(this,function(t){return es(e,!(n.length>1)||void 0===n[1]||n[1]),[2]})}),function(e){return t.apply(this,arguments)}),onError:X,innerRef:ef});switch(S){case"objects":p=V&&void 0===B?(0,l.Y)(tU.A,{}):(0,l.Y)(z.S,{css:tW.objectTabPanel,children:(0,l.Y)(tM.A,{children:(0,l.Y)(to,{bucketExternalId:w.externalId,onOpenCommandsTab:function(){x("commands")},onError:X})})});break;case"commands":p=(0,l.Y)(z.S,{children:(0,l.Y)(nc,{onError:X})});break;case"settings":p=(0,l.Y)(z.S,{children:(0,l.Y)(tL,{bucketId:w.id,bucketExternalId:w.externalId,onSettingsUpdate:function(e){("deleteBucket"===e.type||"removeBucket"===e.type)&&ec(e.data.bucketId),"deleteBucket"===e.type&&J("Bucket deleted successfully"),"removeBucket"===e.type&&J("Bucket removed from Repl successfully")},onError:X})})}return(0,l.FD)(z.S,{innerRef:ef,css:tW.self,children:[(0,l.Y)(e5,{excludeBucketIds:null!=g?g:[],isOpen:I,onBucketAdded:function(e){T(),es(e,!1),J("Bucket added to Repl successfully")},onError:X,onRequestClose:T,orgId:ep}),(0,l.Y)(j,{isOpen:U,loading:el,handleCreateBucket:function(e){ea({variables:{input:{name:e.name,replId:e.replId}},onCompleted:function(e){var n="Bucket"===e.createBucket.__typename?e.createBucket:null;if(!n){X(Error("Failed to create bucket"));return}O(),es(n),J("Bucket created successfully")},onError:X})},onRequestClose:O}),(0,l.FD)(z.S,{css:tW.controls,align:"center",row:!0,children:[(0,l.Y)(tj,{buckets:h,onRequestAddBucket:P,onRequestCreateBucket:M,onSelect:Z,selectedBucketId:null==w?void 0:w.id}),(0,l.Y)(H.EY,{css:tW.controlSeparator,variant:"small",children:"/"}),(0,l.Y)(tZ,{onSelect:x,selectedView:S})]}),(0,l.Y)(tN.a,{}),(0,l.Y)(z.S,{css:tW.panels,children:p})]})}function tj(e){var n=e.buckets,t=e.onRequestAddBucket,r=e.onRequestCreateBucket,i=e.onSelect,o=e.selectedBucketId,a=(0,s.useMemo)(function(){if(n&&o)return n.find(function(e){return e.id===o})},[n,o]);return a&&n?(0,l.Y)(z.S,{children:(0,l.FD)(tO.in,{label:a.name,items:n,trigger:(0,l.Y)(U.$n,{size:"default",variant:"nofill",text:a.name,iconRight:(0,l.Y)(eK.A,{size:12})}),children:[n.map(function(e){return(0,l.Y)(tO.Dr,{icon:(0,l.Y)(eq.A,{visibility:e.id===a.id?"visible":"hidden"}),id:e.id,label:e.name,onAction:e.id!==a.id?function(){i(e)}:void 0},e.id)}),(0,l.Y)(tO.wv,{}),(0,l.Y)(tO.Dr,{icon:(0,l.Y)(G.A,{}),id:"create-new",label:"Create new bucket",onAction:r},"create-new"),(0,l.Y)(tO.Dr,{icon:(0,l.Y)(nR.A,{}),id:"add-existing",label:"Add an existing bucket",onAction:t},"add-existing")]})}):(0,l.Y)(z.S,{children:(0,l.Y)(U.$n,{size:"default",variant:"nofill",text:"Loading...",iconRight:(0,l.Y)(eK.A,{size:12})})})}function tZ(e){var n=e.onSelect,t=e.selectedView,r=(0,s.useMemo)(function(){return tz.find(function(e){return e.value===t})},[t]);return r?(0,l.Y)(z.S,{children:(0,l.Y)(tO.in,{onAction:function(e){var t=tz.find(function(n){return n.value===e});t&&n(t.value)},label:r.title,items:tz,trigger:(0,l.Y)(U.$n,{size:"default",variant:"nofill",text:r.title,iconLeft:r.icon,iconRight:(0,l.Y)(eK.A,{size:12})}),children:function(e){return(0,l.Y)(tO.Dr,{icon:e.icon,id:e.value,label:e.title},e.value)}})}):null}},92496:(e,n,t)=>{"use strict";t.d(n,{M:()=>c,v:()=>s});var r=t(1889),i=t(51895),o=t(40043),a=t(35869),l=t(32633),s="Unsupported",c={Content:function(){return(0,r.Y)(a.S,{style:{padding:32},children:(0,r.Y)(o.EY,{variant:"text",multiline:!1,children:"Sorry, this feature is not supported."})})},Icon:function(){return(0,r.Y)(l.A,{})},getTitle:function(){return s},category:i.bY.Other,decode:function(){return{type:"commands",data:{autoFocus:!1}}}}},93166:(e,n,t)=>{"use strict";t.d(n,{aK:()=>i,mW:()=>a,md:()=>o,sc:()=>l});var r=t(86846),i=[r.SemanticTokenTypes.namespace,r.SemanticTokenTypes.type,r.SemanticTokenTypes.class,r.SemanticTokenTypes.enum,r.SemanticTokenTypes.interface,r.SemanticTokenTypes.struct,r.SemanticTokenTypes.typeParameter,r.SemanticTokenTypes.parameter,r.SemanticTokenTypes.variable,r.SemanticTokenTypes.property,r.SemanticTokenTypes.enumMember,r.SemanticTokenTypes.event,r.SemanticTokenTypes.function,r.SemanticTokenTypes.method,r.SemanticTokenTypes.macro,r.SemanticTokenTypes.keyword,r.SemanticTokenTypes.modifier,r.SemanticTokenTypes.comment,r.SemanticTokenTypes.string,r.SemanticTokenTypes.number,r.SemanticTokenTypes.regexp,r.SemanticTokenTypes.operator,r.SemanticTokenTypes.decorator,"angle","arithmetic","attribute","attributeBracket","bitwise","boolean","brace","bracket","builtinAttribute","builtinType","character","colon","comma","comparison","constParameter","derive","deriveHelper","dot","escapeSequence","invalidEscapeSequence","formatSpecifier","generic","label","lifetime","logical","macroBang","parenthesis","punctuation","selfKeyword","selfTypeKeyword","semicolon","typeAlias","toolModule","union","unresolvedReference","tomlArrayKey","tomlTableKey"],o=[r.SemanticTokenModifiers.declaration,r.SemanticTokenModifiers.definition,r.SemanticTokenModifiers.readonly,r.SemanticTokenModifiers.static,r.SemanticTokenModifiers.deprecated,r.SemanticTokenModifiers.abstract,r.SemanticTokenModifiers.async,r.SemanticTokenModifiers.modification,r.SemanticTokenModifiers.documentation,r.SemanticTokenModifiers.defaultLibrary,"attribute","callable","constant","consuming","controlFlow","crateRoot","injected","intraDocLink","library","macro","mutable","public","reference","trait","unsafe"];function a(e,n){var t=e.tokenTypes[n];return t&&i.includes(t)?t:null}function l(e,n){for(var t=[],r=0;r<e.tokenModifiers.length;r++)if(n&1<<r){var i=e.tokenModifiers[r];i&&o.includes(i)&&t.push(i)}return t}},93249:e=>{e.exports={button:"ExpandableProgress_button__OoY_w",buttonLeft:"ExpandableProgress_buttonLeft__BlA9j",thought:"ExpandableProgress_thought__GbLBP",progressRendererWrap:"ExpandableProgress_progressRendererWrap__Xqqae",bar:"ExpandableProgress_bar__vq0rt"}},93501:(e,n,t)=>{"use strict";t.d(n,{A:()=>v});var r=t(12694),i=t(21462),o=t(28504),a=t(16907),l=t(17844),s=t(93629),c=t(64678),u=t.n(c),d=t(40208),p=t(93843);function f(e){return Math.floor(performance.now()-e.startTime)}var h=new WeakSet,m=t(67337),g=t(61377);function v(e){var n=(0,a.A)(),t=(0,m.A)().lspnix,c=(0,r._)((0,i.useState)([]),2),v=c[0],w=c[1],y=(0,g.i)();return(0,i.useEffect)(function(){if(e){var n=t.onClient(e,w);return function(){n(),w([])}}},[t,e]),(0,i.useEffect)(function(){return(0,o.xW)(v.map(function(t){return function(e){var n=e.client,t=e.replId,r=e.language,i=e.debug;if(!h.has(n)){h.add(n);var a=new Map,c=function(e){var i,o=n.getServerState(),a=null!==(i=n.getServerInfo())&&void 0!==i?i:{name:"unknown",version:"none"},l=o===p.b.INITIALIZED?"".concat(null==a?void 0:a.name,"@").concat(null==a?void 0:a.version):"not_ready: server is ".concat(o);return{method:e.method,replid:t,language:r,startTime:Math.floor(e.startTime),languageServerInfo:l,lspId:n.clientId}},m=u()(function(e,n){var t=f(n);t>1e4&&d.vF.time("LSP unresponsive request",t,c(n))}),g=setInterval(function(){a.forEach(function(e){m(e.id,e)})},2e3);return(0,o.xW)([n.onRequest(function(e){var n=e.id,t=e.data;(i||.01>Math.random())&&a.set(n,{id:n,method:t.method,startTime:performance.now()})}),n.onResponse(function(e){var n=e.id,t=e.error,r=a.get(n);null!=r&&(a.delete(n),d.vF.time("LSP request",f(r),(0,s._)((0,l._)({},c(r)),{result:null==t?"ok":"error"})))}),n.onCancelRequest(function(e){var n=a.get(e);null!=n&&(a.delete(e),d.vF.time("LSP request",f(n),(0,s._)((0,l._)({},c(n)),{result:"cancelled"})))}),function(){return clearInterval(g)},function(){return h.delete(n)}])}}({client:t,replId:n,language:t.getLanguageId(e),debug:y})}))},[v,n,e,y]),v}},93517:(e,n,t)=>{"use strict";t.d(n,{y:()=>p});var r=t(1889),i=t(21462),o=t(25933),a=t(80865),l=t(63892),s=t(28896),c=t(88676),u=t(12549),d=t(30094),p=function(e){var n=e.sessionId,t=e.type,p=void 0===t?"assistant":t,f=(0,o.ET)(),h=f.orgId,m=f.orgSlug,g=(0,a._P)({controlName:"flag-no-header-usage"}),v=(0,u.L)(null!=n?n:null),w=(0,c.e)(null!=n?n:null),y="assistant"===p?v:w,b=h&&m?"".concat((0,s.EG)({slug:m}).usage.href,"#").concat(p):"/usage#".concat(p),S=(0,i.useCallback)(function(){(0,l.u4)("assistant"===p?l.AZ.ASSISTANT_USED:l.AZ.AGENT_USED,{action:"opened_usage_link",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),window.open(b,"_blank")},[b,p]),Y=(0,i.useMemo)(function(){return{data:{type:"action",icon:(0,r.Y)(d.A,{}),label:y&&g?"Usage (this chat: $".concat((y/100).toFixed(2),")"):"Usage",run:S}}},[y,g,S]),A=(0,i.useMemo)(function(){return{name:"Usage",commands:[Y]}},[Y]);return{handleUsageClick:S,usageCommand:Y,usageCommandGroup:A,cents:y,usageHref:b}}},93843:(e,n,t)=>{"use strict";t.d(n,{A:()=>r,b:()=>i});var r=function(e){return e.NOT_READY="NOT_READY",e.READY="READY",e.STALLED="STALLED",e.BROKEN="BROKEN",e}({}),i=function(e){return e.OFFLINE="OFFLINE",e.INITIALIZING="INITIALIZING",e.INITIALIZED="INITIALIZED",e.EXITING="EXITING",e.EXITED="EXITED",e}({})},93873:(e,n,t)=>{"use strict";t.d(n,{N:()=>E,M:()=>D});var r=t(17844),i=t(93629),o=t(17459),a=t(12694),l=t(1889),s=t(21462),c=t(62019),u=t(37743),d=t(1833),p=t(49069),f=t(45773),h=t(61116),m=f.Lz.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),g=f.NZ.line({attributes:{class:"cm-diff-inserted"}}),v=f.NZ.line({attributes:{class:"cm-diff-deleted"}}),w=p.Pe.define({map:function(e,n){return e.map(n)}}),y=function(e){function n(){return(0,u._)(this,n),(0,c._)(this,n,arguments)}(0,d._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},t.ignoreEvent=function(){return!1},n}(f.xO);function b(e){var n=new p.vB,t=new y;e.sort(function(e,n){return e.character-n.character});var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var s=a.value,c=s.character,u=s.padding,d=0;d<u;d++)n.add(c,c,f.NZ.widget({widget:t,side:-1,block:!0}))}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.finish()}function S(e){var n=e.coloredLines,t=e.colorDecoration;return[m,f.Z9.fromClass(function e(r){(0,u._)(this,e);var i=new p.vB,o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var d=s.value,f=r.state.doc.line(d);i.add(f.from,f.from,t)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}this.decorations=i.finish()},{decorations:function(e){return e.decorations}}),p.sU.define({create:function(){return f.NZ.none},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(w))return l.value}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.docChanged?e.map(n.changes):e},provide:function(e){return f.Lz.decorations.from(e)}})]}var Y=t(44987),A=t(50066),C=t(74340),x=function(){var e=function(e,n){return f.Lz.domEventHandlers({scroll:function(t,r){if(r===e&&t.target){var i=t.target;if(i.scrollTop){var o=i.scrollTop;n.scrollDOM.scrollTo({top:o})}}}})},n=new p.xx,t=new p.xx;return{extensions:function(){return{right:n.of([]),left:t.of([])}},setup:function(r,i){r.dispatch({effects:t.reconfigure(e(r,i))}),i.dispatch({effects:n.reconfigure(e(i,r))})}}}(),k=x.extensions,_=x.setup;function D(e){var n=e.left,t=e.right,l=e.showDiffDecorations,c=void 0===l||l,u=n.code,d=(0,o._)(n,["code"]),f=t.code,m=(0,o._)(t,["code"]),y=(0,A.A)(),Y=y.ref,C=y.view,x=(0,A.A)(),D=x.ref,E=x.view,R=(0,s.useMemo)(function(){var e=k().left;return d.extensions?[d.extensions,e]:e},[d.extensions]),I=(0,s.useMemo)(function(){var e=k().right;return m.extensions?[m.extensions,e]:e},[m.extensions]);d=(0,i._)((0,r._)({},d),{extensions:R}),m=(0,i._)((0,r._)({},m),{extensions:I});var F=(0,a._)((0,s.useState)(!1),2),T=F[0],P=F[1],L=(0,a._)((0,s.useState)(!1),2),U=L[0],N=L[1];return(0,s.useEffect)(function(){if(C&&E&&T&&U&&c){var e=setTimeout(function(){var e;_(C,E),e=(0,h.nw)(C.state.doc.sliceString(0),E.state.doc.sliceString(0)),C.dispatch({effects:[p.Pe.appendConfig.of(S({coloredLines:e.leftColored.sort(function(e,n){return e-n}),colorDecoration:v})),w.of(b(e.leftPadded))]}),E.dispatch({effects:[p.Pe.appendConfig.of(S({coloredLines:e.rightColored.sort(function(e,n){return e-n}),colorDecoration:g})),w.of(b(e.rightPadded))]})});return function(){return clearTimeout(e)}}},[C,E,T,U,c]),(0,s.useEffect)(function(){C&&(C.dispatch({changes:{from:0,to:C.state.doc.length,insert:u}}),P(!0))},[u,C]),(0,s.useEffect)(function(){E&&(E.dispatch({changes:{from:0,to:E.state.doc.length,insert:f}}),N(!0))},[f,E]),{left:{view:C,ref:Y,code:u,options:d,ready:T},right:{view:E,ref:D,code:f,options:m,ready:U}}}function E(e){var n=e.diffViewer,t=(0,o._)(e,["diffViewer"]),i=(0,r._)({},n.options,t);return(0,l.FD)(l.FK,{children:[(0,l.Y)(Y.Ay,(0,r._)({ref:n.ref,css:{height:n.ready?0:"auto"},initialDoc:n.code,lineWrapping:!1,readOnly:!0},i)),!n.ready&&(0,l.Y)(C.A,{code:n.code,language:i.language,filePath:i.filePath,lineNumbers:!i.hideGutter,fontSize:i.fontSize})]})}},94146:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(12694),i=t(86105),o=t(21462),a=t(23099),l=t.n(a),s=t(8300),c=t(2960),u=t(70906),d=t(67337);function p(e){var n,t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=(0,r._)((0,o.useState)(null),2),h=f[0],m=f[1],g=(0,c.A)(h),v=null===(t=null!==(n=p.keepStaleResult)&&void 0!==n?n:p.refresh)||void 0===t||t,w=(0,o.useCallback)(function(e){l()(e,g.current)||m(e)},[g]),y=(0,u.A)(function(){return e},(0,i._)(a)),b=(0,d.A)().git,S=(0,o.useRef)(null),Y=(0,o.useCallback)(function(){S.current?S.current():v||w(null);var e=!1;y(b).then(function(n){e||(w(n),S.current=null)}).catch(function(){e||(w({error:s.uA.UNKNOWN}),S.current=null)}),S.current=function(){e=!0,S.current=null,v||w(null)}},[w,y,b,v]);return(0,o.useEffect)(function(){return Y()},[Y]),(0,o.useEffect)(function(){var e;if(null===(e=p.refresh)||void 0===e||e)return b.onRefresh(Y)},[b,Y,p.refresh]),h}},94216:(e,n,t)=>{"use strict";t.d(n,{OR:()=>u,fJ:()=>s,sz:()=>c});var r=t(90629),i=t(49069),o=t(58767),a=i.Pe.define(),l=i.Pe.define(),s=function(e){var n=e.view,t=e.insert,r=e.scrollIntoView,i=e.overwrite,l=e.insertAt;if(i)n.dispatch({changes:{from:0,to:n.state.doc.length,insert:t},effects:a.of(null),scrollIntoView:r,annotations:o.A.of(!0)});else{var s=null!=l?l:n.state.selection.main.head,c=null!=l?l:n.state.selection.main.from;n.dispatch({changes:{from:c,insert:t},selection:{anchor:s+t.length},effects:a.of(null),scrollIntoView:r,annotations:o.A.of(!0)})}},c=function(e){var n=e.state.field(u,!1);if(!n){r.Cp(Error("RevetGhostwriterCodeInsertState not found when trying to revert"));return}e.dispatch({changes:n,effects:l.of(null)})},u=i.sU.define({create:function(){return null},update:function(e,n){e&&(e=e.map(n.changes));var t=!0,r=!1,i=void 0;try{for(var o,s=n.effects[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var c=o.value;c.is(a)&&(e=n.changes.invert(n.startState.doc)),c.is(l)&&(e=null)}}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}return e}})},94372:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>S,ps:()=>v});var r=t(29935),i=t(82643),o=t(24998),a=t(12584);function l(){var e=(0,a._)(["\n  query GitHubAuth {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s=(0,t(41114).J1)(l()),c=t(75152),u=c.ZU.Object({id:c.ZU.String(),user_id:c.ZU.Number(),ssh_hostname:c.ZU.String(),token:c.ZU.String()}),d=t(2658),p=t(88685),f=t(40208),h=t(27609),m=t(63892),g=["http:","https:","vscode:"];function v(e){return w.apply(this,arguments)}function w(){return(w=(0,r._)(function(e){var n,t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return n=e.replId,[4,(0,d.$6)(function(){return(0,h.B2)("/data/repls/".concat(n,"/get_ssh_token"))})];case 1:if((t=r.sent()).error)return[2,{type:"error",message:t.error.toString()}];if(!o.WT.Check(u,t.value))return[2,{type:"error",message:"Invalid JSON"}];return[2,{type:"success",data:t.value}]}})})).apply(this,arguments)}function y(){return(y=(0,r._)(function(){var e;return(0,i.YH)(this,function(n){switch(n.label){case 0:if(!p.V)throw Error("Expected apollo");return[4,p.V.query({query:s})];case 1:if(!(null==(e=n.sent().data)?void 0:e.currentUser))throw Error("Expected current user");return[2,e.currentUser]}})})).apply(this,arguments)}function b(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function S(e){var n=e.container,t=e.fs,o=e.openMultipleFiles,a=e.openMultipleURLs,l=e.enableReplspaceSshTokenPassthrough,s=new Set,c=!1,u=null;return n.openChannel({service:"open",name:"open"},function(e){e.channel.onCommand(function(e){if("replspaceApiOpenMultipleFiles"===e.body){if(!e.replspaceApiOpenMultipleFiles)throw Error("Expected replspaceApiOpenMultipleFiles");var n=e.replspaceApiOpenMultipleFiles,t=n.files,r=n.urls.flatMap(function(e){var n;try{n=new URL(e)}catch(e){return[]}return g.includes(n.protocol)?[n]:[]});o&&t.length>0&&(b(),o({paths:t})),a&&r.length>0&&(b(),a({urls:r.map(function(e){return e.toString()})}))}})}),n.openChannel({service:"git",name:"git"},function(e){var n,a=e.channel;return a.onCommand((n=(0,r._)(function(e){var n,r,l,d,p,h,m,g,v,w,S,Y,A,C,x,k;return(0,i.YH)(this,function(i){switch(i.label){case 0:switch(e.body){case"replspaceApiOpenFile":return[3,1];case"replspaceApiGetGitHubToken":return[3,7]}return[3,9];case 1:if(!e.replspaceApiOpenFile)throw Error("Expected replspaceApiOpenFile");if(r=(n=e.replspaceApiOpenFile).file,l=n.waitForClose,d=n.nonce,o)return[3,3];if(!r.endsWith(".git/COMMIT_EDITMSG"))return l&&a.send({replspaceApiCloseFile:{file:r,nonce:d}}),window.alert("tried to open ".concat(r," but failed")),[2];return p=window.prompt("Enter a commit message"),[4,t.writeFile(r,null!=p?p:"")];case 2:if(i.sent(),!l)return[2];return[3,5];case 3:if(b(),o({paths:[r]}),!l||!u)return[2];return[4,u(r)];case 4:i.sent(),i.label=5;case 5:return[4,t.flush()];case 6:if(i.sent(),"open"!==a.status)return[2];return a.send({replspaceApiCloseFile:{file:r,nonce:d}}),[2];case 7:if(!e.replspaceApiGetGitHubToken)throw Error("Expected replspaceApiGetGitHubToken");return h=function(){var n;"open"===a.status&&a.send({replspaceApiGitHubToken:{token:"",nonce:null===(n=e.replspaceApiGetGitHubToken)||void 0===n?void 0:n.nonce}})},[4,function(){return y.apply(this,arguments)}()];case 8:if(null==(m=i.sent()).gitHubInfo)return h(),[2];if(!s.size)return h(),f.vF.error("Got a replspaceApiGetGitHubToken command but no confirm listener is set up"),[2];if(g=function(){var n,t;"open"===a.status&&a.send({replspaceApiGitHubToken:{token:null===(n=m.gitHubInfo)||void 0===n?void 0:n.accessToken,nonce:null===(t=e.replspaceApiGetGitHubToken)||void 0===t?void 0:t.nonce}})},c)return g(),[2];v=!1,w=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=s[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)(null)}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}},S=!0,Y=!1,A=void 0;try{for(C=s[Symbol.iterator]();!(S=(x=C.next()).done)&&(k=x.value,!v);S=!0)k(function(e){var n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!v){if(v=!0,!e){h(),w();return}n&&(c=e),g(),w()}})}catch(e){Y=!0,A=e}finally{try{S||null==C.return||C.return()}finally{if(Y)throw A}}i.label=9;case 9:return[2]}})}),function(e){return n.apply(this,arguments)})),function(){}}),n.openChannel({service:"shelltracker",name:"shelltracker"},function(e){e.channel.onCommand(function(e){if(null!=e.replspaceApiShellTracker){var t,r;(0,m.u4)(m.AZ.SHELL_COMMAND_EVALED,{context:e.replspaceApiShellTracker.cmd,replId:null===(r=n.getContext())||void 0===r?void 0:null===(t=r.repl)||void 0===t?void 0:t.id,api:"replspace",pwd:e.replspaceApiShellTracker.pwd})}})}),void 0!==l&&l&&n.openChannel({service:"sshtoken",name:"sshtoken"},function(e){var n,t=e.channel;t.onCommand((n=(0,r._)(function(e){var n,r,o,a,l,s;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(!e.replspaceApiSSHTokenGetRequest)throw Error("Expected replspaceApiSSHTokenGetRequest");return r=(n=e.replspaceApiSSHTokenGetRequest).nonce,o=n.replid,a=function(e){"open"===t.status&&t.send({replspaceApiSSHTokenGetResponse:e})},l=function(){a({token:"",nonce:r})},[4,v({replId:o})];case 1:if(s=i.sent(),"open"!==t.status)return[2];if("error"===s.type)return l(),f.vF.error(s.message),[2];return a({token:s.data.token,nonce:r,sshHostname:s.data.ssh_hostname}),[2]}})}),function(e){return n.apply(this,arguments)}))}),{onConfirmSendToken:function(e){var n=function(n){return e(n)};return s.add(n),function(){s.delete(n)}},setWaitForFileClose:function(e){u=e}}}},94849:(e,n,t)=>{"use strict";t.d(n,{w:()=>l});var r=t(21462),i=t(24491),o=t(55343),a=t(6680);function l(e){return(0,r.useCallback)(function(n){var t,r=null===(t=e.current)||void 0===t?void 0:t.querySelector('[data-event-id="'.concat(n,'"]'));r instanceof HTMLElement&&((0,o.A)(r,{behavior:"smooth"}),(0,i.U)(r,"outline","1px solid "+a.LU.accentPrimaryDefault),setTimeout(function(){return(0,i.U)(r,"outline","none")},2e3))},[e])}},94869:(e,n,t)=>{"use strict";t.d(n,{LO:()=>u,ff:()=>s,kP:()=>c,w:()=>l});var r=t(21462),i=t(30391),o=t(83353),a=t(67337);function l(e){var n=(0,i.A)(e.portsState);return(0,r.useMemo)(function(){return n?n.filter(function(e){return e.isOpen&&e.configuration.type===o.gH.FORWARDED}):[]},[n])}function s(e){var n=(0,a.A)().ports,t=(0,i.A)(n.portsState);return(0,r.useMemo)(function(){if(t)return t.find(function(n){return n.configuration.type===o.gH.FORWARDED&&n.configuration.externalPort===e})},[t,e])}function c(e){return u((0,a.A)().ports,e)}function u(e,n){var t=(0,i.A)(e.portsState);return(0,r.useMemo)(function(){return n&&t?t.filter(function(e){var t;return null!==(t=e.isOpen&&(null==n?void 0:n.endsWith(e.processInfo.cgroup)))&&void 0!==t&&t}):[]},[t,n])}},94965:(e,n,t)=>{"use strict";t.d(n,{AM:()=>d,CW:()=>u,my:()=>p});var r=t(12694),i=t(21462),o=t(69945),a=t.n(o),l=t(90001),s=t(14545),c=t(49937);function u(e){var n=e.targetElement,t=e.activeTourStep,r=e.goToNextStep,o=e.setTourPausedReason,a=(0,c.Av)(),l=(0,i.useRef)(void 0),s=(0,i.useCallback)(function(){(null==t?void 0:t.waitToAdvanceOn)==="webviewPortOpened"?(o("async"),l.current=a.subscribe(function(e){e&&o("user")})):r()},[null==t?void 0:t.waitToAdvanceOn,r,o,a]);(0,i.useEffect)(function(){if(null!=n&&null!=t&&t.advanceOnTargetClick)return n.addEventListener("click",s),function(){var e;n.removeEventListener("click",s),null===(e=l.current)||void 0===e||e.call(l),l.current=void 0}},[n,t,s])}function d(e){var n=(0,s._$)(),t=(0,r._)((0,i.useState)(!1),2),o=t[0],a=t[1];(0,i.useEffect)(function(){n||o||(e(),a(!0))},[n,e,o])}function p(e){var n=(0,r._)((0,i.useState)(null),2),t=n[0],o=n[1],s=(0,l.A)(function(){e&&o({rect:e.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},{type:"throttle",wait:100});return(0,i.useEffect)(function(){e&&s(e)},[e,s]),(0,i.useEffect)(function(){if(e){var n=a()(function(){o({rect:e.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},100);return window.addEventListener("resize",n),window.addEventListener("scroll",n),function(){window.removeEventListener("resize",n),window.removeEventListener("scroll",n),n.cancel()}}},[e]),t}},95512:(e,n,t)=>{"use strict";t.d(n,{A:()=>n_});var r=t(1889),i=t(93415),o=t(17844),a=t(93629),l=t(4124),s=t(50462),c=t(80481),u=t(80865),d=t(94668),p=t(63892),f=t(9907),h=t(12694),m=t(86105),g=t(21462),v=t(12584),w=t(41114),y=t(86997);function b(){var e=(0,v._)(["\n  query AiDeveloperSection {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return b=function(){return e},e}var S={},Y=(0,w.J1)(b()),A=t(26496),C=t(97378),x=t(91396),k=t(45771),_=t(43974),D=t(18063),E=(0,k.AH)([_.wp.height(18)]);function R(){return(0,r.Y)(D.a,{css:E,text:"Staff-only",colorway:"warning"})}var I=t(26705),F=t(31618),T=t(40043),P=t(35869),L=t(38224),U=t(6761),N=t(59086),O=(0,A.qK)(),M=A.Ku?[{title:"override",value:A.Ku}]:Array.from((0,m._)(Object.entries(C.B)).concat([["custom",""]]),function(e){return{title:e[0],value:e[1]}}),B=(0,A.lJ)()||A.Ku?M[0]:M[1];function H(){var e,n,t,i=(e=(0,o._)({},S,void 0),y.I(Y,e)).data,a=(null==i?void 0:null===(n=i.currentUser)||void 0===n?void 0:n.isStaff)||!1,l=(0,h._)((0,g.useState)(!Object.values(M).map(function(e){return e.value}).includes(O)),2),s=l[0],c=l[1],u=(0,h._)((0,g.useState)(""),2),d=u[0],p=u[1];return a?(0,r.Y)(x.w,{id:"chatServiceEndpoint",title:(0,r.FD)(r.FK,{children:[(0,r.FD)(P.S,{row:!0,gap:8,align:"center",justify:"start",children:[(0,r.Y)(T.EY,{multiline:!1,children:"AI Chat Service Endpoint"}),(0,r.Y)(R,{})]}),(0,r.FD)(P.S,{gap:8,children:[(0,r.FD)(T.EY,{variant:"small",color:"dimmest",children:["Current endpoint: ",O]}),(0,r.Y)(T.EY,{variant:"small",color:"dimmest",children:"Reloading window is required for change to take effect."})]})]}),children:(0,r.FD)(P.S,{gap:12,children:[(0,r.Y)(L.l,{css:[_.wp.minWidth(184)],initialSelectedItem:null!==(t=M.find(function(e){return e.value===O}))&&void 0!==t?t:O?M[M.length-1]:B,onChange:function(e){(null==e?void 0:e.title)!=="custom"?((0,A.WQ)(e.value),c(!1),window.location.reload()):c(!0)},items:M}),s?(0,r.FD)(P.S,{row:!0,gap:4,children:[(0,r.Y)(F.pd,{value:d,onChange:function(e){p(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(0,A.WQ)(d)}}),(0,r.Y)(I.K0,{alt:"Update custom url",onClick:function(){(0,A.WQ)(d),window.location.reload()},children:O!==d?(0,r.Y)(N.A,{}):(0,r.Y)(U.A,{})})]}):null]})}):null}var z=t(7146);function W(e){var n=e.preferences,t=e.update;return(0,r.Y)(x.w,{id:"codeActionsOnSave",title:(0,r.FD)(r.FK,{children:[(0,r.Y)(T.EY,{multiline:!1,children:"Code Actions on Save"}),(0,r.Y)(T.EY,{variant:"small",color:"dimmest",children:"Run 'Fix all' Code Actions for the current editor on save."})]}),children:(0,r.Y)(z.d,{"aria-label":"Code Actions on Save",isSelected:n.codeActionsOnSave,onChange:function(e){t({codeActionsOnSave:e})}})})}var G=t(34951);function V(){var e=(0,v._)(["\n  query CodeSuggestionPreferences($replId: String!) {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return V=function(){return e},e}var j={},Z=(0,w.J1)(V()),q=t(31255),K=t(317),$=t(8952),J=t(93682);function Q(e){var n=e.context,t=e.text,i=(0,h._)((0,g.useState)(!1),2),o=i[0],a=i[1];return(0,r.FD)(r.FK,{children:[(0,r.Y)(J.$n,{text:void 0===t?"Activate":t,colorway:"primary",onClick:function(){return a(!0)}}),(0,r.Y)($.A,{isOpen:o,onClose:function(){return a(!1)},type:"purchase",analyticsContext:{upgrade:{context:n}}})]})}var X=t(60799),ee=t(16907),en=t(34787),et=t(74863);function er(){var e,n,t,a,d=(0,u._P)({controlName:"flag-code-suggestion-engine",logFlagToAnalytics:!1}),f=(e={variables:{replId:(0,ee.A)()}},n=(0,o._)({},j,e),y.I(Z,n)).data,m=(null==f?void 0:null===(t=f.currentUser)||void 0===t?void 0:t.userSubscriptionType)===G.Oh.HackerPro,g=(null==f?void 0:f.getRepl.__typename)==="Repl"&&null!==(a=f.getRepl.org)&&void 0!==a&&!!a.id,v=(0,i.Po)((0,l.useRouter)()),w=(0,X.f)().isTeamWithAiDisabled,b=(0,c.gc)("codeSuggestion","completeCodeEngine"),S=b.preferences,Y=b.update,A=(0,q.A)().engine,C=function(e){var n=Y(e),t=!0,r=!1,i=void 0;try{for(var o,a=Object.entries(e)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,h._)(o.value,2),s=l[0],c=l[1];(0,p.u4)(p.AZ.SETTINGS_TOGGLED,{settingChanged:s,updatedValue:c})}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n};return w?null:(0,r.FD)(P.S,{gap:12,children:[(0,r.Y)(en.n,{currentValue:S.codeSuggestion,update:C,setting:s.KY.codeSuggestion,title:(0,r.FD)(r.FK,{children:[(0,r.Y)(P.S,{row:!0,gap:8,align:"center",children:(0,r.Y)(T.EY,{multiline:!1,children:"AI Code Completion"})}),(0,r.FD)(T.EY,{variant:"small",color:"dimmest",children:["Code completion provides inline “ghost text” suggestions while you code.",(0,r.Y)("br",{}),"Press tab or swipe right on your mobile device to accept."]})]})}),g||m||v?null:(0,r.FD)(P.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,r.Y)(T.EY,{children:"Upgrade for full access to Replit AI"}),(0,r.Y)(Q,{text:"Upgrade to Replit ".concat(K.en),context:"workspace_settings_pane"})]}),d?(0,r.FD)(r.FK,{children:[(0,r.Y)(et.a,{}),(0,r.Y)(en.n,{title:(0,r.FD)(r.FK,{children:[(0,r.FD)(P.S,{row:!0,gap:8,align:"center",justify:"start",children:[(0,r.Y)(T.EY,{multiline:!1,children:"AI Code Completion Engine"}),(0,r.Y)(R,{})]}),(0,r.FD)(T.EY,{variant:"small",color:"dimmest",children:["Current applied engine: ",A]})]}),currentValue:S.completeCodeEngine,update:C,setting:s.KY.completeCodeEngine})]}):null]})}function ei(e){var n=e.preferences,t=e.update;return(0,r.Y)(x.w,{id:"formatOnSave",title:(0,r.FD)(r.FK,{children:[(0,r.Y)(T.EY,{multiline:!1,children:"Format on Save"}),(0,r.Y)(T.EY,{variant:"small",color:"dimmest",children:"Controls whether files are automatically formatted when saved"})]}),children:(0,r.Y)(z.d,{"aria-label":"Format on Save",isSelected:n.formatOnSave,onChange:function(e){t({formatOnSave:e})}})})}var eo=t(90017),ea=t(6680),el=t(61234),es=t(2527),ec=t(19750),eu=t(75251);function ed(e){return e.slice().sort(function(e,n){return e-n})}var ep=(0,el.x)({ruler:[_.wp.py(4),_.wp.px(8),_.wp.rowWithGap(4),_.wp.align.center,_.wp.borderRadius(8)],remove:[_.wp.borderRadius(4)],title:[_.wp.pr(8),_.wp.overflow("visible"),_.wp.flex.shrink(0)],body:[_.wp.flex.wrapReverse,_.wp.align.start,_.wp.justify.end,_.wp.flex.growAndShrink(1),{gap:ea.LU.space4}],list:[_.wp.flex.wrap,_.wp.flex.growAndShrink(1),_.wp.align.end,_.wp.justify.end,{gap:ea.LU.space4}]});function ef(e){var n=e.pos,t=e.onRemove;return(0,r.FD)(es.ui,{css:ep.ruler,elevated:!0,children:[(0,r.Y)(T.EY,{multiline:!1,children:n}),(0,r.Y)(I.K0,{css:ep.remove,alt:"Remove ruler",onClick:t,children:(0,r.Y)(ec.A,{})})]})}function eh(){var e=(0,h._)((0,g.useState)(!1),2),n=e[0],t=e[1],i=(0,h._)((0,g.useState)(80),2),o=i[0],a=i[1],l=(0,g.useRef)(null),s=(0,g.useRef)(null),u=-1===o,d=o>=0&&o<=1e3,p=(0,c.gc)("rulers"),f=p.preferences,v=p.update,w=ed(f.rulers);return(0,r.Y)(x.w,{id:"rulers",title:(0,r.Y)(T.EY,{css:ep.title,multiline:!1,children:"Rulers"}),children:(0,r.FD)(P.S,{css:ep.body,row:!0,children:[(0,r.Y)(P.S,{css:ep.list,row:!0,children:w.map(function(e,n){return(0,r.Y)(ef,{pos:e,onRemove:function(){v({rulers:w.filter(function(e,t){return t!==n})})}},n)})}),n?(0,r.FD)(P.S,{row:!0,gap:4,align:"center",children:[(0,r.Y)(F.pd,{ref:l,type:"number",style:{width:u?"6ch":o.toString().length+5.5+"ch"},value:o>=0?o.toString():"",onChange:function(e){if(""===e.target.value)a(-1);else{var n=parseInt(e.target.value,10);isNaN(n)||a(n)}},onKeyDown:function(e){"Escape"===e.key?(a(80),t(!1)):"Enter"===e.key&&d&&(v({rulers:ed((0,m._)(w).concat([o]))}),t(!1),a(80))},onBlur:function(e){e.relatedTarget!==s.current&&(t(!1),a(80))},onFocus:function(e){e.target.select()},autoFocus:!0}),(0,r.Y)(J.$n,{ref:s,text:"Accept",colorway:"primary",iconLeft:(0,r.Y)(U.A,{}),disabled:!d,onClick:function(){d&&(v({rulers:ed((0,m._)(w).concat([o]))}),t(!1),a(80))},onBlur:function(e){e.relatedTarget!==l.current&&(t(!1),a(80))}})]}):(0,r.Y)(r.FK,{children:w.length>=10?null:(0,r.Y)(J.$n,{text:"Add Ruler",iconLeft:(0,r.Y)(eu.A,{}),onClick:function(){return t(!0)}})})]})})}var em=t(83846),eg=(0,el.x)({container:[(0,em._)({},x.c,[_.wp.colWithGap(8)])],title:[_.wp.flex.growAndShrink(1)],switchWrapper:[_.wp.rowWithGap(8),_.wp.align.center,_.wp.justify.end,(0,em._)({},x.c,[_.wp.flex.rowReverse])],switchLabel:[(0,em._)({},x.c,[_.wp.ml(8)])]});function ev(){var e=(0,c.gc)("showLeadingWhitespace","showTrailingWhitespace","showEnclosedWhitespace","showSelectedWhitespace"),n=e.preferences,t=e.update;return(0,r.FD)(P.S,{css:eg.container,row:!0,justify:"space-between",align:"start",children:[(0,r.FD)(P.S,{css:eg.title,children:[(0,r.Y)(T.EY,{children:"Show Whitespace"}),(0,r.Y)(T.EY,{multiline:!0,variant:"small",color:"dimmest",children:"Make whitespace characters visible, such as tabs and spaces."})]}),(0,r.FD)(P.S,{gap:12,children:[(0,r.FD)(P.S,{css:eg.switchWrapper,tag:"label",children:[(0,r.Y)(T.EY,{variant:"small",css:eg.switchLabel,children:"Leading"}),(0,r.Y)(z.d,{"aria-label":"Show leading whitespace",isSelected:n.showLeadingWhitespace,onChange:function(e){t({showLeadingWhitespace:e})}})]}),(0,r.FD)(P.S,{css:eg.switchWrapper,tag:"label",children:[(0,r.Y)(T.EY,{variant:"small",css:eg.switchLabel,children:"Enclosed"}),(0,r.Y)(z.d,{"aria-label":"Show enclosed whitespace",isSelected:n.showEnclosedWhitespace,onChange:function(e){t({showEnclosedWhitespace:e})}})]}),(0,r.FD)(P.S,{css:eg.switchWrapper,tag:"label",children:[(0,r.Y)(T.EY,{variant:"small",css:eg.switchLabel,children:"Trailing"}),(0,r.Y)(z.d,{"aria-label":"Show trailing whitespace",isSelected:n.showTrailingWhitespace,onChange:function(e){t({showTrailingWhitespace:e})}})]}),(0,r.FD)(P.S,{css:eg.switchWrapper,tag:"label",children:[(0,r.Y)(T.EY,{variant:"small",css:eg.switchLabel,children:"Selected"}),(0,r.Y)(z.d,{"aria-label":"Show selected whitespace",isSelected:n.showSelectedWhitespace,onChange:function(e){t({showSelectedWhitespace:e})}})]})]})]})}var ew=t(71508),ey=t(17459),eb=t(51026);function eS(){var e=(0,v._)(["\n  fragment ThemesSwitcherCustomTheme on CustomTheme {\n    id\n    title\n    isCurrentUserThemeAuthor\n    colorScheme\n  }\n"]);return eS=function(){return e},e}function eY(){var e=(0,v._)(["\n  query ThemesSwitcherCurrentUserAuthoredThemes(\n    $input: CurrentUserAuthoredThemesInput!\n  ) {\n    currentUser {\n      id\n      authoredThemes(input: $input) {\n        ... on CustomThemeConnection {\n          items {\n            id\n            ...ThemesSwitcherCustomTheme\n          }\n          pageInfo {\n            nextCursor\n            hasNextPage\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return eY=function(){return e},e}function eA(){var e=(0,v._)(["\n  query ThemesSwitcherCurrentUserInstalledThemes(\n    $input: CurrentUserInstalledThemesInput!\n  ) {\n    currentUser {\n      id\n      installedThemes(input: $input) {\n        ... on InstalledThemeConnection {\n          items {\n            id\n            themeVersion {\n              id\n            }\n            customTheme {\n              id\n              ...ThemesSwitcherCustomTheme\n            }\n          }\n          pageInfo {\n            nextCursor\n            hasNextPage\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return eA=function(){return e},e}var eC={},ex=(0,w.J1)(eS()),ek=(0,w.J1)(eY(),ex),e_=(0,w.J1)(eA(),ex),eD=t(81239),eE=t(81391),eR=t(66892),eI=t(39695),eF=t(66637),eT=t(8153),eP=function(e){var n=(0,h._)((0,g.useState)(0),2),t=n[0],r=n[1];return(0,eT.A)(function(){null!==e.current&&r(e.current.getBoundingClientRect().height)},[e]),t},eL=t(2960),eU=t(39074),eN=t(45981),eO=t.n(eN),eM=t(97954),eB=t(47258),eH=t(13344),ez=(0,el.x)({self:[{border:"1px solid",borderColor:ea.LU.outlineDimmest},_.wp.zIndex(5),_.wp.maxHeight(300),_.wp.position.absolute,_.wp.overflowY("auto"),_.wp.width("100%"),_.wp.left(0),_.wp.borderRadius(8),_.wp.flex.column],apron:[_.wp.flex.grow(1),{borderTop:"1px solid",borderTopColor:ea.LU.outlineDimmest}],menuItems:[_.wp.flex.growAndShrink(1),_.wp.overflowY("auto"),{listStyle:"none"}],menuApronItem:[_.wp.p(8),_.wp.rowWithGap(12),_.wp.justify.start,_.wp.align.center,eB.b.listItem],menuApronWrapper:[_.wp.flex.column]}),eW=(0,eM.xQ)();let eG=function(e){var n=e.children,t=e.className,i=e.bottomOffset;return(0,r.FD)(es.ui,{className:t,tag:"ul",elevated:!0,css:ez.self,style:{bottom:"calc(".concat(i,"px + ").concat(ea.LU.space8,")")},children:[(0,r.Y)(P.S,{css:ez.menuItems,children:n}),(0,r.Y)(es.ui,{css:ez.apron,children:(0,r.FD)(P.S,{css:ez.menuApronWrapper,children:[(0,r.Y)(eO(),{legacyBehavior:!0,href:eW.href,as:eW.as,children:(0,r.FD)(P.D.a,{css:ez.menuApronItem,children:[(0,r.Y)(eH.A,{}),(0,r.Y)(T.EY,{multiline:!1,children:"Explore Themes"})]})}),(0,r.Y)(eO(),{legacyBehavior:!0,href:eM.y_.href,as:eM.y_.as,children:(0,r.FD)(P.S,{css:ez.menuApronItem,children:[(0,r.Y)(eu.A,{}),(0,r.Y)(T.EY,{multiline:!1,children:"Create a Theme"})]})})]})})]})};var eV=t(26020),ej=t(56185),eZ=(0,el.x)({trigger:[eB.b.filled,_.wp.p(8),_.wp.color.foregroundDefault,_.wp.border({width:0})],chevron:[_.wp.transition.snappy],selectLabel:[_.wp.flex.growAndShrink(1),{textAlign:"left",lineHeight:ea.LU.lineHeightHeaderBig}],menuWrapper:[_.wp.position.relative],sectionHeadings:[_.wp.p(8),_.wp.fontWeight.bold,_.wp.fontSize(12),{borderTop:"1px solid ".concat(ea.LU.outlineDimmer),textTransform:"uppercase"}],officialHeading:[_.wp.p(8),_.wp.fontWeight.bold,_.wp.fontSize(12),{textTransform:"uppercase"}],spinnerWrapper:[_.wp.p(8),_.wp.align.center]}),eq=P.D.li;function eK(e){var n=e.id,t=e.sections,i=e.initialSelectedItem,l=e.selectedItem,s=e.onChange,c=e.placeholder,u=e.dataCy,d=e.paginationOptions,p=(0,ey._)(e,["id","sections","initialSelectedItem","selectedItem","onChange","placeholder","dataCy","paginationOptions"]),f=(0,g.useId)(),h=(0,eL.A)(s),m=(0,g.useRef)(null),v=eP(m),w=Object.values(t).flat(),y=(0,eI.WM)((0,a._)((0,o._)({items:w,initialSelectedItem:i,onSelectedItemChange:function(e){var n=e.selectedItem;n&&h.current(n)},stateReducer:function(e,n){var t=n.type,r=n.changes;switch(t){case eI.WM.stateChangeTypes.MenuKeyDownEnter:case eI.WM.stateChangeTypes.MenuKeyDownSpaceButton:case eI.WM.stateChangeTypes.ItemClick:return(0,a._)((0,o._)({},r),{isOpen:!0});default:return r}}},void 0!==l&&{selectedItem:l}),{id:f})),b=(0,eU.A)({onLoadMore:d.loadMore,rootMargin:"0px 0px 300px 0px"}).targetRef,S=function(e){var n,t=e.item,i=e.index;return(0,r.Y)(eq,(0,a._)((0,o._)({},y.getItemProps({item:t,index:i})),{"data-cy":t.dataCy,children:(0,r.Y)(eF.A,{highlighted:i===y.highlightedIndex,selected:t.id===(null===(n=y.selectedItem)||void 0===n?void 0:n.id),title:t.title})}))};return(0,r.FD)(P.S,{id:n,dataCy:u,children:[(0,r.Y)(eR.s,{children:(0,r.Y)("label",(0,a._)((0,o._)({},y.getLabelProps()),{children:"select a theme"}))}),(0,r.Y)("button",(0,a._)((0,o._)({type:"button",css:eZ.trigger},p,y.getToggleButtonProps({ref:m})),{children:(0,r.FD)(P.S,{align:"center",row:!0,gap:8,children:[(0,r.Y)(eH.A,{size:16}),y.selectedItem?(0,r.Y)(T.EY,{css:eZ.selectLabel,multiline:!1,children:y.selectedItem.title}):(0,r.Y)(T.EY,{color:"dimmer",css:eZ.selectLabel,multiline:!1,children:c}),(0,r.Y)(eV.A,{rotate:180*!!y.isOpen,css:eZ.chevron})]})})),(0,r.Y)("div",(0,a._)((0,o._)({},y.getMenuProps()),{css:eZ.menuWrapper,children:y.isOpen&&w.length>0?(0,r.FD)(eG,{bottomOffset:v,children:[(0,r.Y)(T.EY,{color:"dimmer",css:eZ.officialHeading,multiline:!1,children:"Official Themes"}),t.official.map(function(e,n){return(0,r.Y)(S,{item:e,index:n},"".concat(e.id))}),t.authored.length?(0,r.FD)(r.FK,{children:[(0,r.Y)(T.EY,{color:"dimmer",css:eZ.sectionHeadings,multiline:!1,children:"Your Themes"}),t.authored.map(function(e,n){var i=t.official.length;return(0,r.Y)(S,{item:e,index:i+n},"".concat(e.id))})]}):null,t.installed.length?(0,r.FD)(r.FK,{children:[(0,r.Y)(T.EY,{color:"dimmer",css:eZ.sectionHeadings,multiline:!1,children:"Community Themes"}),t.installed.map(function(e,n){var i=t.official.length+t.authored.length;return(0,r.Y)(S,{item:e,index:i+n},"".concat(e.id))})]}):null,d.authoredHasNextPage||d.installedHasNextPage?(0,r.Y)(P.S,{align:"center",children:d.loading?(0,r.Y)(P.S,{css:eZ.spinnerWrapper,children:(0,r.Y)(ej.A,{size:12})}):(0,r.Y)(I.K0,{tooltipBehavior:"hidden",alt:"Show more",onClick:d.loadMore,ref:b,children:(0,r.Y)(eV.A,{})})}):null]}):null}))]})}var e$=function(e,n){var t,r,i=n.fetchMoreResult;if((null===(t=e.currentUser)||void 0===t?void 0:t.authoredThemes.__typename)==="CustomThemeConnection"&&(null===(r=i.currentUser)||void 0===r?void 0:r.authoredThemes.__typename)==="CustomThemeConnection"){var l=e.currentUser.authoredThemes.items,s=i.currentUser.authoredThemes.items;return(0,a._)((0,o._)({},i),{currentUser:(0,a._)((0,o._)({},i.currentUser),{authoredThemes:(0,a._)((0,o._)({},i.currentUser.authoredThemes),{items:(0,m._)(l).concat((0,m._)(s))})})})}return i},eJ=function(e,n){var t,r,i=n.fetchMoreResult;if((null===(t=e.currentUser)||void 0===t?void 0:t.installedThemes.__typename)==="InstalledThemeConnection"&&(null===(r=i.currentUser)||void 0===r?void 0:r.installedThemes.__typename)==="InstalledThemeConnection"){var l=e.currentUser.installedThemes.items,s=i.currentUser.installedThemes.items;return(0,a._)((0,o._)({},i),{currentUser:(0,a._)((0,o._)({},i.currentUser),{installedThemes:(0,a._)((0,o._)({},i.currentUser.installedThemes),{items:(0,m._)(l).concat((0,m._)(s))})})})}return i},eQ=function(e){var n=e.authoredThemesData,t=e.installedThemesData,r=e.fetchMoreAuthored,i=e.fetchMoreInstalled;return(0,g.useCallback)(function(){var e,o;(null==n?void 0:null===(e=n.currentUser)||void 0===e?void 0:e.authoredThemes.__typename)==="CustomThemeConnection"&&n.currentUser.authoredThemes.pageInfo.hasNextPage?r({variables:{input:{after:n.currentUser.authoredThemes.pageInfo.nextCursor,count:100}},updateQuery:e$}):(null==t?void 0:null===(o=t.currentUser)||void 0===o?void 0:o.installedThemes.__typename)==="InstalledThemeConnection"&&t.currentUser.installedThemes.pageInfo.hasNextPage&&i({variables:{input:{after:t.currentUser.installedThemes.pageInfo.nextCursor,count:100}},updateQuery:eJ})},[n,t,r,i])},eX=t(57757),e0=t(12722),e1=t(62493),e2=t(3910),e4={select:function(e){return[e?e1.S.backgroundPulse(ea.LU.accentPrimaryDefault,ea.LU.accentPrimaryDimmest):{}]}};let e5=function(e){var n,t,i,l,s,c,u,d,p=e.context,f=(0,ey._)(e,["context"]),m=(0,g.useId)(),v=(0,eD.A)().showError,w=(n=(0,o._)({},eC,{variables:{input:{count:100}},fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0,onError:function(e){return v(e.message)},onCompleted:function(e){var n,t=null===(n=e.currentUser)||void 0===n?void 0:n.authoredThemes;((null==t?void 0:t.__typename)==="UnauthorizedError"||(null==t?void 0:t.__typename)==="UserError")&&v(t.message)}}),y.I(ek,n)),b=w.data,S=w.loading,Y=w.error,A=w.fetchMore,C=(0,h._)((t=(0,o._)({},eC,{variables:{input:{count:100}},fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0,onError:function(e){return v(e.message)},onCompleted:function(e){var n,t=null===(n=e.currentUser)||void 0===n?void 0:n.installedThemes;((null==t?void 0:t.__typename)==="UnauthorizedError"||(null==t?void 0:t.__typename)==="UserError")&&v(t.message)}}),eb._(e_,t)),2),x=C[0],k=C[1],D=k.data,E=k.loading,R=k.error,I=k.fetchMore,F=(0,e0.D)(),T=F.setActiveTheme,L=F.isSaving,U=F.error,N=F.theme;(0,g.useEffect)(function(){var e,n=null==b?void 0:null===(e=b.currentUser)||void 0===e?void 0:e.authoredThemes;(null==n?void 0:n.__typename)!=="CustomThemeConnection"||n.pageInfo.hasNextPage||x()},[b,x]);var O=((null==D?void 0:null===(l=D.currentUser)||void 0===l?void 0:null===(i=l.installedThemes)||void 0===i?void 0:i.__typename)==="InstalledThemeConnection"?D.currentUser.installedThemes.items:[]).map(function(e){return e.customTheme}),M=(null==b?void 0:null===(c=b.currentUser)||void 0===c?void 0:null===(s=c.authoredThemes)||void 0===s?void 0:s.__typename)==="CustomThemeConnection"?b.currentUser.authoredThemes.items:[];(0,g.useEffect)(function(){U&&v(U.message)},[U,v]);var B=eQ({authoredThemesData:b,installedThemesData:D,fetchMoreAuthored:A,fetchMoreInstalled:I}),H=(null==b?void 0:null===(u=b.currentUser)||void 0===u?void 0:u.authoredThemes.__typename)==="CustomThemeConnection"&&b.currentUser.authoredThemes.pageInfo.hasNextPage,z=(null==D?void 0:null===(d=D.currentUser)||void 0===d?void 0:d.installedThemes.__typename)==="InstalledThemeConnection"&&D.currentUser.installedThemes.pageInfo.hasNextPage;if(Y||R)return(0,r.Y)(P.S,{children:(0,r.Y)(e2.N,{colorway:"negative",text:"Something went wrong loading your themes"})});var W={official:eE.U,authored:M,installed:O};return(0,r.Y)(P.S,{children:(0,r.Y)(eK,(0,o._)({css:[e4.select(L),_.wp.backgroundColor.backgroundDefault,{":not([disabled]):hover":{background:ea.LU.backgroundHigher}}],id:m,dataCy:"preferences-theme-dropdown",sections:W,disabled:L,paginationOptions:{loadMore:B,authoredHasNextPage:H,installedHasNextPage:z,loading:S||E},selectedItem:N.isOfficial?eE.U.find(function(e){return e.id===N.id}):(0,a._)((0,o._)({},N),{title:N.name}),onChange:function(e){T(e.id),"isCurrentUserThemeAuthor"in e&&(0,eX.Ot)({themeId:e.id,colorScheme:e.colorScheme,isAlreadyInstalled:!0,isAuthor:e.isCurrentUserThemeAuthor,context:p})}},f))})};var e8=(0,el.x)({container:[_.wp.p(16),_.wp.colWithGap(12)],statusBannerContainer:[_.wp.pt(8),_.wp.maxWidth("calc(100% - 12px)")],themesSwitcher:[_.wp.minWidth(184),_.wp.backgroundColor.backgroundHigher]});function e3(e){var n=e.hideLayoutControl,t=e.className,h=e.resetLayout,m=(0,c.gc)("isLayoutStacked","fontSize","minimapDisplay","wrapping","keyboardHandler","multiselectModifierKey","showFileTreeGitStatus","codeIntelligence","codeActionsOnSave","formatOnSave","semanticTokens","accessibleTerminal","shellBellAudio","webviewAutoOpenOnPortOpened","chatAudioNotification","agentAudioNotification","agentPushNotification","assistantPushNotification","forwardPortsAutomatically","acceptSuggestionOnCommitCharacter","enableCloseBracketMatching"),g=m.preferences,v=m.update,w=(0,i.Po)((0,l.useRouter)()),y=(0,i.m5)(),b=(0,ew.oR)(),S=(0,f.vm)(),Y=(0,u._P)({controlName:"flag-draft-buffers",logFlagToAnalytics:!1}),A=(0,u._P)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),C=(0,u._P)({controlName:"flag-authentic-zealous-robots"}),k=(0,u._P)({controlName:"flag-agent-mobile-push"}),_=(0,u._P)({controlName:"flag-assistant-mobile-push"}),D=function(e){Object.keys(e).forEach(function(n){var t=e[n];(0,p.u4)(p.AZ.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t})}),v(e)};if(!g)return null;var E=(0,a._)((0,o._)({},s.KY.multiselectModifierKey),{options:s.KY.multiselectModifierKey.options.map(function(e){return(0,a._)((0,o._)({},e),{title:(0,d.t3)("cmdOrCtrlKey"===e.id?d.YX.CMD_OR_CTRL_KEY:d.YX.ALT_KEY,S)})})});return(0,r.FD)(es.ui,{className:t,background:"default",css:e8.container,children:[n?null:(0,r.FD)(r.FK,{children:[(0,r.Y)(en.n,{setting:s.KY.layout,update:D,currentValue:g.isLayoutStacked,rightComponent:h?(0,r.Y)(I.K0,{alt:"Reset layout",onClick:function(){h.reset()},children:h.resetting?(0,r.Y)(ej.A,{}):(0,r.Y)(N.A,{})}):null}),(0,r.Y)(et.a,{})]}),(0,r.Y)(en.n,{setting:s.KY.fontSize,update:D,currentValue:g.fontSize}),(0,r.Y)(et.a,{}),(0,r.Y)(x.w,{id:"acceptSuggestionOnCommitCharacter",title:(0,r.FD)(r.FK,{children:[(0,r.Y)(T.EY,{children:"Accept Suggestion on Commit Character"}),(0,r.FD)(T.EY,{variant:"small",color:"dimmest",children:["Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (",(0,r.Y)("code",{children:";"}),") can be a commit character that accepts the suggestion and types the character."]})]}),children:(0,r.Y)(z.d,{"aria-label":"Accept suggestion on commit character",isSelected:g.acceptSuggestionOnCommitCharacter,onChange:function(e){D({acceptSuggestionOnCommitCharacter:e})}})}),(0,r.Y)(et.a,{}),(0,r.Y)(x.w,{id:"enableCloseBracketMatching",title:(0,r.FD)(r.FK,{children:[(0,r.Y)(T.EY,{children:"Auto close brackets"}),(0,r.Y)(T.EY,{variant:"small",color:"dimmest",children:"Controls whether the editor should automatically close brackets after the user adds an opening bracket."})]}),children:(0,r.Y)(z.d,{"aria-label":"Auto close brackets",isSelected:g.enableCloseBracketMatching,onChange:function(e){D({enableCloseBracketMatching:e})}})}),(0,r.Y)(et.a,{}),(0,r.Y)(eo.Ay,{}),(0,r.Y)(et.a,{}),Y?(0,r.FD)(r.FK,{children:[(0,r.Y)(W,{preferences:g,update:D}),(0,r.Y)(et.a,{}),(0,r.Y)(ei,{preferences:g,update:D}),(0,r.Y)(et.a,{})]}):null,(0,r.Y)(en.n,{setting:s.KY.wrapping,update:D,currentValue:g.wrapping}),(0,r.Y)(et.a,{}),y?null:(0,r.FD)(r.FK,{children:[(0,r.Y)(en.n,{setting:s.KY.minimap,update:D,currentValue:g.minimapDisplay}),(0,r.Y)(et.a,{})]}),(0,r.Y)(eh,{}),(0,r.Y)(et.a,{}),(0,r.Y)(en.n,{setting:s.KY.keyboardHandler,update:D,currentValue:g.keyboardHandler}),(0,r.Y)(et.a,{}),(0,r.Y)(en.n,{setting:E,update:D,currentValue:g.multiselectModifierKey}),(0,r.Y)(et.a,{}),(0,r.Y)(en.n,{setting:s.KY.showFileTreeGitStatus,update:D,currentValue:g.showFileTreeGitStatus}),(0,r.Y)(et.a,{}),(0,r.Y)(et.a,{}),(0,r.Y)(er,{}),(0,r.Y)(et.a,{}),(0,r.Y)(H,{}),(0,r.Y)(et.a,{}),(0,r.Y)(en.n,{setting:s.KY.codeIntelligence,update:D,currentValue:g.codeIntelligence}),(0,r.Y)(et.a,{}),A&&g.codeIntelligence?(0,r.FD)(r.FK,{children:[(0,r.Y)(en.n,{setting:s.KY.semanticTokens,update:D,currentValue:g.semanticTokens}),(0,r.Y)(et.a,{})]}):null,(0,r.Y)(ev,{}),(0,r.Y)(et.a,{}),(0,r.Y)(en.n,{setting:s.KY.accessibleTerminal,update:D,currentValue:g.accessibleTerminal}),(0,r.Y)(et.a,{}),(0,r.Y)(en.n,{setting:s.KY.shellBellAudio,update:D,currentValue:g.shellBellAudio}),(0,r.Y)(et.a,{}),(0,r.Y)(x.w,{id:"webviewAutoOpenOnPortOpened",title:(0,r.FD)(r.FK,{children:[(0,r.Y)(T.EY,{children:b?"Automatic Webview (unavailable in this Repl)":"Automatic Webview"}),(0,r.Y)(T.EY,{variant:"small",color:"dimmest",children:"Open a webview automatically when a port is open"}),b?(0,r.Y)(P.S,{css:e8.statusBannerContainer,children:(0,r.Y)(e2.N,{colorway:"orange",text:'This preference is unavailable in Extension Apps. To view custom tools in dev mode, click the "Preview" button in Extension Devtools instead.'})}):null]}),children:(0,r.Y)(z.d,{"aria-label":"Automatic Webview",isSelected:g.webviewAutoOpenOnPortOpened,isDisabled:b,onChange:function(e){D({webviewAutoOpenOnPortOpened:e})}})}),(0,r.Y)(et.a,{}),(0,r.Y)(en.n,{setting:s.KY.forwardPortsAutomatically,update:D,currentValue:g.forwardPortsAutomatically}),w?null:(0,r.FD)(r.FK,{children:[(0,r.Y)(et.a,{}),(0,r.Y)(x.w,{id:"theme",title:"Theme",children:(0,r.Y)(e5,{css:e8.themesSwitcher,context:eX.iu.WorkspacePreferencesPane})})]}),(0,r.Y)(et.a,{}),(0,r.Y)(en.n,{setting:s.KY.chatAudioNotification,update:D,currentValue:g.chatAudioNotification}),C?(0,r.FD)(r.FK,{children:[(0,r.Y)(et.a,{}),(0,r.Y)(en.n,{setting:s.KY.agentAudioNotification,update:D,currentValue:g.agentAudioNotification})]}):null,k?(0,r.FD)(r.FK,{children:[(0,r.Y)(et.a,{}),(0,r.Y)(en.n,{setting:s.KY.agentPushNotification,update:D,currentValue:g.agentPushNotification})]}):null,_?(0,r.FD)(r.FK,{children:[(0,r.Y)(et.a,{}),(0,r.Y)(en.n,{setting:s.KY.assistantPushNotification,update:D,currentValue:g.assistantPushNotification})]}):null]})}var e6=t(93707),e7=t(91564),e9=t(70906),ne=t(56135),nn=t(95758),nt=t(30778),nr=t(75978),ni=t(28023),no=t(81975),na=t(48795),nl=t(12544),ns=t(19915),nc=t(32633);function nu(e){var n=(0,g.useRef)(null),t=(0,g.useRef)([]);function r(){n.current&&clearTimeout(n.current),t.current=[]}function i(n){e({type:"success",shortcut:n.length>1?[n[0],n[1]]:n[0]}),r()}return{onKeyDown:function(r){var o=n.current,a=t.current;r.preventDefault(),r.stopPropagation(),o&&clearTimeout(o);var l=(0,nn.yz)(r);if(l){if((0,nn.RW)(l)){e({type:"update",recorded:a.length?[a[0],l]:[l]});return}if(a.length>0&&"Enter"===l){i(a);return}a.push(l),e({type:"update",recorded:a}),n.current=setTimeout(function(){return i(a)},600*(2!==a.length))}},startRecording:function(){r(),e({type:"start"})},stopRecording:function(){r(),e({type:"stop"})}}}var nd=(0,el.x)({row:[_.wp.minHeight(28)],left:[_.wp.flex.grow(0),_.wp.flex.shrink(1)],right:[_.wp.position.relative,_.wp.flex.grow(1),_.wp.flex.shrink(0)],recordingRow:[_.wp.flex.column,_.wp.align.center,_.wp.justify.end],recordingRowKeys:[_.wp.position.relative],recordingRowPlaceholder:[_.wp.display.flex,_.wp.align.baseline,_.wp.rowWithGap(4),{fontStyle:"italic"}],keys:[_.wp.display.inlineFlex,_.wp.rowWithGap(12)],secondaryText:[_.wp.display.flex,_.wp.flex.row,_.wp.align.center,_.wp.rowWithGap(4)],secondaryTextId:[_.wp.flex.grow(1),_.wp.flex.shrink(0)],secondaryTextDescription:[_.wp.flex.grow(0),_.wp.flex.shrink(1),_.wp.color.foregroundDimmest]}),np=(0,el.x)({input:[{opacity:0,width:1}],searchingText:[{fontStyle:"italic"}]});function nf(e){var n,t,i,o,a=e.command,l=e.filter,s=e.shortcutsToCommands,c=e.onViewShortcutConflicts,u=(0,nr.ef)(),d=(0,nr.vU)(),p=(0,nr.UU)(a.id),f=(0,h._)((0,g.useState)(null),2),m=f[0],v=f[1],w=nu(function(e){switch(e.type){case"start":v({recorded:[]});return;case"stop":v(null);return;case"update":v({recorded:e.recorded});return;case"success":var n=(0,nn.u7)(e.shortcut);if(!n||u(a.id,n)){v(null);return}v(null);return;case"error":v(function(n){var t;return{error:e.message,recorded:null!==(t=null==n?void 0:n.recorded)&&void 0!==t?t:[]}});return}}),y=w.stopRecording,b=w.startRecording,S=w.onKeyDown,Y=(0,e7.A)(function(){return y()},[]),A=!!m;ny(A);var C=null!==(o=null==m?void 0:m.recorded)&&void 0!==o?o:[],x=null==m?void 0:m.error,k=l.length>0,_=null===(n=ne.A.match(l,a.name))||void 0===n?void 0:n.ranges,D=null===(t=ne.A.match(l,a.id))||void 0===t?void 0:t.ranges,E=(null==a?void 0:a.description)?null===(i=ne.A.match(l,a.description))||void 0===i?void 0:i.ranges:void 0,R=(0,e9.A)(function(){return l.replaceAll('"',"").split("-").map(function(e){return e.toLowerCase()})},[l]);return(0,r.FD)(P.S,{gap:8,"data-testid":a.id,children:[(0,r.FD)(P.S,{css:nd.row,row:!0,gap:8,align:"center",children:[(0,r.FD)(P.S,{css:nd.left,gap:2,children:[(0,r.Y)(ni.e,{text:a.name,highlight:_,dimmed:k}),(0,r.FD)(T.EY,{variant:"small",css:nd.secondaryText,multiline:!1,children:[k?(0,r.Y)(ni.e,{css:nd.secondaryTextId,text:a.id,highlight:D,dimmed:k}):null,a.description?(0,r.FD)(r.FK,{children:[k?(0,r.Y)(T.EY,{color:"dimmest",multiline:!1,children:"•"}):null,(0,r.Y)(ni.e,{css:nd.secondaryTextDescription,text:a.description,highlight:E,dimmed:k})]}):null]})]}),(0,r.FD)(P.S,{innerRef:A?Y:void 0,css:nd.right,row:!0,gap:16,align:"center",justify:"end",children:[A?(0,r.Y)(e6.n1,{autoFocus:!0,restoreFocus:!0,children:(0,r.Y)("input",{onKeyDown:S,css:np.input})}):null,a.shortcut&&!A&&s.length>1?(0,r.Y)(I.K0,{"data-testid":"View conflicts",alt:"View conflicts",onClick:function(){(0,g.startTransition)(function(){a.shortcut&&c(nh([a.shortcut]))})},children:(0,r.Y)(nc.A,{color:ea.LU.foregroundDimmer})}):null,a.shortcut&&!A?(0,r.Y)(nt._y,{small:!0,keyCombo:a.shortcut,match:R}):null,a.shortcut||A?null:(0,r.FD)(r.FK,{children:[(0,r.Y)(J.$n,{size:"small",variant:"outlined",iconLeft:(0,r.Y)(eu.A,{}),text:"Add shortcut",onClick:function(){return b()}}),p?(0,r.Y)(I.K0,{alt:"Reset",onClick:function(){return u(a.id,p)},children:(0,r.Y)(N.A,{})}):null]}),A?(0,r.Y)(P.S,{css:nd.recordingRow,children:(0,r.FD)(P.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(P.S,{css:nd.recordingRowKeys,children:C.length>0?(0,r.Y)(P.S,{css:nd.keys,children:C.map(function(e,n){return(0,r.Y)(nt._y,{small:!0,keyCombo:e},"".concat(e,"-").concat(n))})}):(0,r.Y)(T.EY,{multiline:!1,color:"dimmest",css:nd.recordingRowPlaceholder,children:"Recording…"})}),(0,r.Y)(I.K0,{alt:"Stop",onClick:function(){return y()},children:(0,r.Y)(nY,{})})]})}):null,a.shortcut&&!A?(0,r.FD)(P.S,{row:!0,gap:4,children:[p&&p!==a.shortcut?(0,r.Y)(I.K0,{alt:"Reset",onClick:function(){return u(a.id,p)},children:(0,r.Y)(N.A,{})}):null,(0,r.Y)(I.K0,{alt:"Change",onClick:function(){return b()},children:(0,r.Y)(na.A,{})}),(0,r.Y)(I.K0,{alt:"Remove",onClick:function(){return d(a.id)},children:(0,r.Y)(ns.A,{})})]}):null]})]}),x?(0,r.Y)(e2.N,{icon:(0,r.Y)(nc.A,{}),colorway:"warning",text:x,closable:!0,closeAction:function(){return v(function(e){var n;return{recorded:null!==(n=null==e?void 0:e.recorded)&&void 0!==n?n:[]}})}}):null]})}function nh(e){var n=e.flat();return n.length>1?n.map(function(e){return nh([e])}).join(" "):(0,nn.Ft)(n[0]).map(function(e){return'"'.concat(e,'"')}).join("-").replaceAll(" ","space")}var nm=(0,el.x)({root:[_.wp.p(0)],surface:[_.wp.pt(8),_.wp.borderRadius(8),_.wp.colWithGap(12)]});function ng(e){var n=e.search,t=e.setSearch,i=(0,g.useRef)(null),o=(0,h._)((0,g.useState)(!1),2),a=o[0],l=o[1];ny(a);var s=nu(function(e){var n,r,o;switch(e.type){case"start":l(!0),t(""),null==i||null===(n=i.current)||void 0===n||n.focus();return;case"stop":case"error":l(!1),null==i||null===(r=i.current)||void 0===r||r.focus(),null==i||null===(o=i.current)||void 0===o||o.select();return;case"success":t(nh([e.shortcut]));return;case"update":t(nh(e.recorded));return}}),c=s.stopRecording,u=s.startRecording,d=s.onKeyDown;return(0,r.FD)(P.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(e6.n1,{children:(0,r.Y)(F.pd,{ref:i,placeholder:a?"Searching with pressed keys. Press Escape to exit":"Type to search keyboard shortcuts",onBlur:a?c:void 0,onChange:function(e){t(e.currentTarget.value)},onKeyDown:a?function(e){"Escape"===e.key?c():d(e)}:void 0,value:n})}),(0,r.Y)(P.S,{row:!0,gap:4,align:"center",children:a?(0,r.FD)(r.FK,{children:[(0,r.Y)(T.EY,{color:"dimmest",css:np.searchingText,multiline:!1,children:"Searching…"}),(0,r.Y)(I.K0,{alt:"Stop Recording",onClick:c,children:(0,r.Y)(nY,{})})]}):(0,r.Y)(I.K0,{alt:"Record Keys",onClick:u,children:(0,r.Y)(nl.A,{})})}),(0,r.Y)(I.K0,{alt:"Clear Input",disabled:0===n.length,onClick:function(){var e;t(""),null==i||null===(e=i.current)||void 0===e||e.focus()},children:(0,r.Y)(ec.A,{})})]})}function nv(){var e=(0,h._)((0,g.useState)(""),2),n=e[0],t=e[1],i=(0,g.useDeferredValue)(n);return(0,r.FD)(P.S,{css:nm.root,gap:8,children:[(0,r.Y)(ng,{search:n,setSearch:t}),(0,r.Y)(nw,{search:i,setSearch:t})]})}var nw=(0,g.memo)(function(e){var n=e.search,t=e.setSearch,i=(0,nr.RI)(),o=(0,e9.A)(function(){return(0,m._)(i.values())},[i]),a=(0,g.useMemo)(function(){return ne.A.filter(n,o,{extract:function(e){var n="".concat(e.name," ").concat(e.id);return e.description&&(n+=" ".concat(e.description)),e.shortcut&&(n+=" ".concat(nh([e.shortcut]))),n}})},[n,o]),l=(0,g.useMemo)(function(){return a.reduce(function(e,n){var t=n.original,r=t.shortcut;if(!r)return e;var i=e.get(r);return i?i.push(t):i=[t],e.set(r,i),e},new Map)},[a]);return a.length>0?(0,r.Y)(es.ui,{css:nm.surface,children:a.map(function(e,i){var o;return(0,r.FD)(g.Fragment,{children:[i>0?(0,r.Y)(es.ui,{elevated:!0,style:{height:1}}):null,(0,r.Y)(nf,{command:e.original,filter:n,shortcutsToCommands:null!==(o=l.get(e.original.shortcut))&&void 0!==o?o:[],onViewShortcutConflicts:t})]},e.original.id)})}):null});function ny(e){var n="You have unsaved changes";(0,g.useEffect)(function(){var t=function(e){return e.preventDefault(),e.returnValue=n,n};if(e)return window.addEventListener("beforeunload",t),function(){window.removeEventListener("beforeunload",t)}},[e])}var nb=(0,k.i7)("0%{transform:scale(1);}40%{transform:scale(1.3);}100%{transform:scale(1);}"),nS=(0,el.x)({background:[{animationName:nb,animation:"".concat(nb," 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"),boxShadow:"0 0 10px ".concat(ea.LU.redStronger)},_.wp.height(11),_.wp.width(11),_.wp.borderRadius("full"),_.wp.position.absolute],container:[_.wp.position.relative,_.wp.align.center,_.wp.justify.center],icon:[{zIndex:1}]});function nY(){return(0,r.FD)(P.S,{css:nS.container,children:[(0,r.Y)(no.A,{css:nS.icon,color:ea.LU.redStronger}),(0,r.Y)(P.S,{css:nS.background})]})}var nA=t(35899);function nC(){var e=(0,nA.c)()("keyboard_shortcuts");return(0,r.FD)(es.ui,{background:"default",css:[_.wp.px(16),_.wp.pb(16),_.wp.colWithGap(12)],children:[(0,r.Y)(P.S,{tag:"label",htmlFor:e}),(0,r.Y)(nv,{})]})}var nx=t(60738),nk=(0,el.x)({headerContainer:[_.wp.flex.column,_.wp.justify.center,_.wp.px(16),_.wp.py(8)],subheading:[{fontStyle:"italic"},_.wp.color.foregroundDimmer,_.wp.mt(8),_.wp.mb(8)],tabs:[{width:"100%"}],tabList:[{"[aria-selected=true]":[_.wp.fontWeight.medium]}],tab:[_.wp.py(8),_.wp.px(16)]});function n_(e){var n=e.hideLayoutControl,t=e.resetLayout,o=(0,i.m5)();return(0,r.FD)(r.FK,{children:[(0,r.FD)(P.S,{css:nk.headerContainer,children:[(0,r.Y)(T.Y9,{variant:"subheadBig",level:3,children:"User Settings"}),(0,r.Y)(T.EY,{variant:"small",css:nk.subheading,children:"The following settings apply to your account and will be used across all your Apps."})]}),o?(0,r.Y)(e3,{hideLayoutControl:n,resetLayout:t}):(0,r.Y)(P.S,{children:(0,r.FD)(nx.tU,{css:nk.tabs,children:[(0,r.FD)(nx.wb,{withDividers:!1,css:nk.tabList,children:[(0,r.Y)(nx.oz,{css:nk.tab,children:"Editor preferences"}),(0,r.Y)(nx.oz,{css:nk.tab,children:"Keyboard shortcuts"})]}),(0,r.FD)(nx.T2,{children:[(0,r.Y)(nx.Kp,{children:(0,r.Y)(e3,{resetLayout:t})}),(0,r.Y)(nx.Kp,{children:(0,r.Y)(nC,{})})]})]})})]})}},95563:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(80865),i=t(96842);function o(){var e=(0,r._P)({controlName:"flag-agent-v2-web-ui"}),n=(0,i.F)();return e&&!n}},95583:(e,n,t)=>{"use strict";t.d(n,{QS:()=>I});var r=t(17844),i=t(93629),o=t(12694),a=t(1889),l=t(21462),s=t(75152),c=t(24998),u=t(26496),d=t(78932),p=t(83353),f=t(94869),h=t(67337),m=t(98961),g=t(14856),v=t(55482),w=t(21792),y=t(51895),b=t(43612),S=t(1566),Y=t(38027),A=t(52690),C=t(6680),x=t(26705),k=t(84296),_=t(58127),D=t(78745),E=s.ZU.Union([s.ZU.Object({type:s.ZU.Literal("local"),port:s.ZU.Number(),path:s.ZU.Optional(s.ZU.String())}),s.ZU.Object({type:s.ZU.Literal("external"),port:s.ZU.Number(),path:s.ZU.Optional(s.ZU.String())})]),R=s.ZU.Object({type:s.ZU.Literal("webview"),data:s.ZU.Optional(s.ZU.Object({previewScreenSize:s.ZU.Optional(v.R),ports:s.ZU.Optional(E)}))}),I={Content:function(e){var n,t,s,c,v,y=e.pane.data,C=e.options,k=C.performPaneOperation,_=(0,h.A)(),E=_.container,R=_.runner,I=_.ports,F=(0,l.useRef)(null),T=(0,u.jt)(),P=(0,f.w)(I),L=(0,d.g)(),U=(0,l.useMemo)(function(){return L?g.YY:(0,g.Eo)(y,P)},[y,P,L]),N=null==y?void 0:null===(c=y.ports)||void 0===c?void 0:c.path,O=(0,l.useRef)(null!=N?N:"/"),M=(0,o._)((0,l.useState)(!1),2),B=M[0],H=M[1],z=(0,l.useCallback)(function(){return k({operation:"open",secondary:!0,pane:{type:"networking"}})},[k]),W=(0,l.useCallback)(function(){return k({operation:"open",secondary:!0,pane:{type:"agentChat"}})},[k]),G=(0,l.useCallback)(function(){return k({operation:"open",secondary:!0,pane:{type:"deployments"}})},[k]),V=(0,l.useCallback)(function(e){k({operation:"open",pane:e})},[k]),j=(0,l.useCallback)(function(e){k({operation:"replace",pane:{type:"webview",data:(0,i._)((0,r._)({},y),{previewScreenSize:e})}})},[y,k]),Z=(0,l.useCallback)(function(e){O.current=e},[]),q=(0,l.useCallback)(function(){k({operation:"openPip",data:{type:T?"agent":"assistant",eventId:"",port:U,path:O.current}})},[U,k,T]),K=(0,b.xQ)({openDeploymentsPane:G,includeSharing:!0}).getCommandGroups;(0,S.Qt)(function(){var e={type:"webview",refresh:function(){var e;null===(e=F.current)||void 0===e||e.refresh()},navigate:function(e,n){var t;null===(t=F.current)||void 0===t||t.navigateTo(e,n)},setShouldShowAgentDeployBanner:H},n=K();return n.length>0?(0,i._)((0,r._)({},e),{commands:n}):e},[K]),t=(n={runner:R,refreshWebView:null===(v=F.current)||void 0===v?void 0:v.refresh}).runner,s=n.refreshWebView,(0,l.useEffect)(function(){if("html"===t.mode)return t.onStateChanged(function(e){e===A.ll.RUNNING&&(null==s||s())})},[t,s]);var $=(0,l.useMemo)(function(){return void 0===U},[U]),J=(0,p.th)(U);return((0,Y.El)({isVisible:!$&&!J&&C.isActive}),$)?(0,a.FD)(a.FK,{children:[(0,a.Y)(m.cR,{side:"left",children:(0,a.Y)(b.Cv,{openDeploymentsPane:G})}),(0,a.Y)(w.A,{openNetworkingTool:z,openAgentPane:W})]}):(0,a.FD)(a.FK,{children:[(0,a.Y)(m.cR,{side:"left",children:(0,a.Y)(b.Cv,{openDeploymentsPane:G})}),(0,a.Y)(m.cR,{side:"right",children:U?(0,a.Y)(x.K0,{size:36,alt:"Picture in Picture",onClick:q,children:(0,a.Y)(D.A,{})}):null}),(0,a.Y)(g.QJ,{ref:F,initialPort:U,initialPath:N,openPane:V,shouldShowAgentDeployBanner:B,openNetworkingTool:z,ports:I,container:E,previewScreenSize:null==y?void 0:y.previewScreenSize,setPreviewScreenSize:j,onCurrentRelativeUrlChanged:Z})]})},Icon:function(e){var n=e.size;return(0,a.Y)(k.Vx.Provider,{value:{color:C.LU.foregroundDimmer,size:n},children:(0,a.Y)(_.A,{})})},getTitle:function(){return"Webview"},description:"Preview your App here",category:y.bY.WorkspaceFeatures,decode:function(e){return"portType"in e&&"port"in e?c.WT.Decode(R,{ports:{type:e.portType,port:e.port,path:e.path}}):c.WT.Decode(R,e)}}},95969:(e,n,t)=>{"use strict";t.d(n,{j:()=>s});var r=t(17844),i=t(21462),o=t(80865),a=t(2960),l=t(67337);function s(e){var n=(0,l.A)().userEvents,t=(0,o._P)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1}),s=(0,a.A)(e);return(0,i.useCallback)(function(e,i){t&&n.emit(e,(0,r._)({},s.current,i))},[n,s,t])}},96497:(e,n,t)=>{"use strict";t.d(n,{I:()=>l});var r=t(86105),i=t(21462),o=t(58270),a=t(71498);function l(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=(0,o.yB)(),l=(0,a.X)();return(0,i.useMemo)(function(){return t&&l?e(t.client,l):null},[t,l].concat((0,r._)(n)))}},96856:(e,n,t)=>{"use strict";t.d(n,{X:()=>p});var r=t(17844),i=t(93629),o=t(86105),a=t(12584),l=t(41114),s=t(86997);function c(){var e=(0,a._)(['\n  query PersonalCollaboratorGate {\n    currentUser {\n      id\n      isSubscribed\n      username\n      shouldEnforceMultiplayerLimit: gate(feature: "flag-empty-hangar")\n      personalCollaborators {\n        ... on PersonalCollaboratorsInfo {\n          count\n          limit\n          collaborators {\n            repl {\n              id\n              slug\n              url\n              title\n              nextPagePathname\n              iconUrl\n            }\n            user {\n              id\n              username\n            }\n          }\n        }\n      }\n    }\n  }\n']);return c=function(){return e},e}var u={},d=(0,l.J1)(c()),p=function(){var e,n,t=(e=(0,r._)({},u,{ssr:!1,fetchPolicy:"network-only"}),s.I(d,e)),a=t.data,l=t.loading,c=t.refetch;if(l)return{type:"loading"};if(a&&(null==a?void 0:null===(n=a.currentUser)||void 0===n?void 0:n.personalCollaborators.__typename)==="PersonalCollaboratorsInfo"){var p=a.currentUser,f=p.personalCollaborators,h=f.count,m=f.limit,g=f.collaborators,v=p.isSubscribed,w=p.shouldEnforceMultiplayerLimit,y=p.username;return{type:"data",refetch:c,collaboratorCount:h,collaboratorLimit:m,collaboratorsByRepl:g.reduce(function(e,n){var t,a=n.repl,l=n.user,s=null!==(t=e.get(a.id))&&void 0!==t?t:{id:a.id,slug:a.slug,url:a.url,title:a.title,nextPagePathname:a.nextPagePathname,iconUrl:a.iconUrl,__typename:a.__typename,users:[]};return e.set(a.id,(0,i._)((0,r._)({},s),{users:(0,o._)(s.users).concat([{id:l.id,username:l.username}])})),e},new Map),isStarterUser:!v,username:y,shouldEnforceMultiplayerLimit:w}}return{type:"error"}}},96866:(e,n,t)=>{"use strict";t.d(n,{J:()=>u});var r=t(17844),i=t(93629),o=t(21462),a=t(80865),l=t(78932),s=t(44269),c={nodejs:["package.json","package-lock.json","yarn.lock","node_modules/"],python2:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],python3:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function u(){var e=(0,s.I)(),n=(0,l.g)(),t=(0,a._P)({controlName:"flag-system-dependencies-search"});return{configs:(0,o.useMemo)(function(){var o=(null==e?void 0:e.packagers)||[],a=(null==o?void 0:o.map(function(e){var n,t;return(0,i._)((0,r._)({},e),{title:e.language,packagerFiles:(null===(n=e.packagerFiles)||void 0===n?void 0:n.length)?e.packagerFiles:null!==(t=c[e.language])&&void 0!==t?t:[]})}))||[];return n&&a.push({id:"html",title:"html",name:"HTML Packager",language:"html",packageSearch:!0,guessImports:!1,packagerFiles:[]}),a.push({id:"nix",title:"system",name:"System Dependencies",language:"nix",packageSearch:t,guessImports:!1,packagerFiles:["replit.nix"]}),a},[e,n,t]),loading:!e}}},97282:(e,n,t)=>{"use strict";t.d(n,{M:()=>f});var r=t(1889),i=t(72542),o=t(6680),a=t(61234),l=t(43974),s=t(93682),c=t(26705),u=t(27489),d="Have feedback?",p=(0,a.x)({button:[l.wp.color.foregroundDimmest]});function f(e){var n=e.session,t=e.variant,a=(0,i.K)(n,"header"),l=a.openFeedbackModal,f=a.FeedbackModal;return(0,r.FD)(r.FK,{children:["default"===(void 0===t?"default":t)?(0,r.Y)(s.$n,{text:d,size:"small",variant:"nofill",onClick:l,style:{height:28},css:p.button}):(0,r.Y)(c.K0,{alt:d,onClick:l,children:(0,r.Y)(u.A,{color:o.LU.accentPrimaryStronger})}),(0,r.Y)(f,{})]})}},97715:(e,n,t)=>{"use strict";t.d(n,{A:()=>u});var r=t(17844),i=t(93629),o=t(1889),a=t(21462),l=t(8038),s=t(16016),c="rag://rag_source_";function u(e){var n=e.openWebview,t=e.ragSources;return(0,a.useMemo)(function(){return function(e){var u,d=null===(u=e.node.properties)||void 0===u?void 0:u.href,p=(0,a.useMemo)(function(){if(n&&"string"==typeof d)try{var e=new URL(d);if("0.0.0.0"===e.hostname||"localhost"===e.hostname)return function(t){t.preventDefault(),n(e.pathname,parseInt(e.port,10))}}catch(e){return}},[d]);if("string"==typeof d&&d.startsWith(c)){var f=d.slice(c.length),h=null==t?void 0:t.find(function(e){return e.id===f});if(!h)return(0,o.FD)(a.Fragment,{children:["[",e.children,"]"]});var m=(0,l.A)(h.url);return(0,o.Y)(s.A,(0,i._)((0,r._)({},e),{href:"#"+m,filePath:"",target:""}))}return(0,o.Y)(s.A,(0,i._)((0,r._)({},e),{type:void 0!==p?"button":e.type,href:void 0!==p?"#":e.href,onClick:p}))}},[n,t])}},97841:(e,n,t)=>{"use strict";t.d(n,{J:()=>e_,g:()=>ek});var r=t(29935),i=t(82643),o=t(1889),a=t(21462),l=t(69338),s=t(17844),c=t(12584),u=t(41114),d=t(86997),p=t(40085);function f(){var e=(0,c._)(["\n  query AutoscaleMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: cloud_run }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var h={},m=(0,u.J1)(f(),p.yH),g=t(88184),v=t(29824),w=t(59539),y=t(42545),b=t(2385),S=t(83846),Y=t(12694),A=t(31195);let C=(0,a.forwardRef)(function(e,n){var t=(0,Y._)((0,l.fp)(A.NF),1)[0],r=(0,l.Xr)(A.b8),i=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useImperativeHandle)(n,function(){return i.current}),t&&i.current&&(i.current.setAttribute("aria-valuemin",String(A.xP[0])),i.current.setAttribute("aria-valuemax",String(A.xP[A.xP.length-1])),i.current.setAttribute("aria-valuenow",String(t))),(0,a.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),s.current=requestAnimationFrame(e))};return e(),function(){s.current&&cancelAnimationFrame(s.current)}},[r]),(0,a.useMemo)(function(){return(0,o.Y)("div",{ref:i,role:"slider",tabIndex:0,css:[A.sC,{left:"calc((100% - 16px) * var(--cpu-progress, 0))",transition:"left var(--cpu-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])});var x=t(24491),k=t(6680),_="min(var(--point), var(--position))",D="max(var(--point), var(--position))";let E=(0,a.forwardRef)(function(e,n){var t=(0,l.md)(A.C5),r=t.overage,i=t.point,s=(0,l.md)(A.Yb),c=(0,a.useRef)(null);return(0,a.useEffect)(function(){(0,x.U)(c,"--opacity",String(r))},[r]),(0,a.useEffect)(function(){(0,x.U)(c,"--point",String(100*i)+"%")},[i]),(0,a.useEffect)(function(){(0,x.U)(c,"--position",String(100*s)+"%")},[s]),(0,a.useMemo)(function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,o.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:k.LU.interactiveBorder,borderRadius:"2px"},children:(0,o.Y)("div",{ref:c,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(_,", \n                  ").concat(k.LU.interactiveBorderHover," ").concat(_,", \n                  ").concat(k.LU.interactiveBorderHover," ").concat(D,", \n                  transparent ").concat(D," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[n])});var R=t(61234),I=t(35869),F=(0,R.x)({container:{flexDirection:"row",justifyContent:"space-between",height:6,paddingLeft:8,paddingRight:8},mark:{width:1,backgroundColor:k.LU.outlineStronger}});function T(e){var n=e.list;return(0,o.Y)(I.S,{css:F.container,children:n.map(function(e){return(0,o.Y)(I.S,{css:F.mark},e)})})}var P=t(43974),L=P.kL.min(320),U=(0,R.x)({container:P.wp.colWithGap(4),label:[P.wp.flex.column,P.wp.pb(4),(0,S._)({},L,[P.wp.flex.row,P.wp.justify.spaceBetween,P.wp.pb(0)])],resource:P.wp.fontWeight.medium,cost:[P.wp.rowWithGap(1),P.wp.align.baseline]}),N=t(69543),O=t(40043),M=A.Rp;function B(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(A.yh),2),r=t[0],i=t[1],s=(0,Y._)((0,a.useState)(!1),2),c=s[0],u=s[1],d=(0,a.useRef)(null),p=(0,a.useRef)(null),f=(0,a.useRef)(null),h=(0,a.useCallback)(function(e){n.setTransitionTime(e)},[n]),m=(0,a.useCallback)(function(e){n.setProgress(e)},[n]);return void 0===r||c||(m(r/M),h(A.tH.Normal)),(0,a.useEffect)(function(){if(void 0!==r&&p.current&&f.current&&!c){var e=p.current,n=f.current,t=function(t){if(0===t.button){u(!0),n.focus();var r=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=r.width,l=o.width,s=t.target===e?l/2:t.clientX-o.left,c=null,d=function(e){var n=Math.max(0,Math.min(1,(e-r.left-s)/(a-l)));n!==c&&(c=n,m(n),i(Math.round(n*M)))};d(t.clientX);var p=function(e){h(A.tH.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},f=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),h(A.tH.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",f),window.addEventListener("pointercancel",f),t.preventDefault(),t.stopPropagation()}};return e.addEventListener("pointerdown",t),n.addEventListener("pointerdown",t),function(){e.removeEventListener("pointerdown",t),n.removeEventListener("pointerdown",t)}}},[r,c,i,m,h]),(0,a.useEffect)(function(){if(void 0!==r&&f.current&&!c){var e=f.current,n=function(e){if(void 0!==r&&A.DO.includes(e.key)){var n=Math.max(0,r-1),t=Math.min(M,r+1),o=null;switch(e.key){case"ArrowLeft":o=n;break;case"ArrowRight":o=t;break;case"Home":o=0;break;case"End":o=M}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",n),function(){e.removeEventListener("keydown",n)}}},[c,r,i]),(0,a.useMemo)(function(){return(0,o.FD)(I.S,{gap:8,children:[(0,o.FD)(I.S,{innerRef:d,css:A.uu,children:[(0,o.Y)(E,{ref:p}),(0,o.Y)(C,{ref:f})]}),(0,o.Y)(T,{list:A.xP})]})},[])}function H(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(A.NF),1)[0],r=(0,Y._)((0,l.fp)(A.WM),1)[0],i=(0,l.Xr)(A.kR);return(0,a.useEffect)(function(){i()},[i,t]),(0,o.FD)(I.S,{css:U.container,children:[(0,o.FD)(I.S,{css:U.label,children:[(0,o.FD)(O.EY,{css:U.resource,multiline:!1,children:[t," vCPU",t>1?"s":""]}),(0,o.FD)(I.S,{css:U.cost,children:[(0,o.FD)(O.EY,{color:"dimmer",multiline:!1,children:[r," ",(0,N.A)("compute unit",r)]}),(0,o.Y)(O.EY,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,o.Y)(B,{setAttrs:n})]})}let z=(0,a.forwardRef)(function(e,n){var t=(0,Y._)((0,l.fp)(A.No),1)[0],r=(0,l.Xr)(A.TJ),i=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useImperativeHandle)(n,function(){return i.current}),t&&i.current&&(i.current.setAttribute("aria-valuemin",String(A.T1[0])),i.current.setAttribute("aria-valuemax",String(A.T1[A.T1.length-1])),i.current.setAttribute("aria-valuenow",String(t))),(0,a.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),s.current=requestAnimationFrame(e))};return e(),function(){s.current&&cancelAnimationFrame(s.current)}},[r]),(0,a.useMemo)(function(){return(0,o.Y)("div",{ref:i,role:"slider",tabIndex:0,"data-ram-thumb":!0,css:[A.sC,{left:"calc((100% - 16px) * var(--ram-progress, 0))",transition:"left var(--ram-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])});var W="min(var(--point), var(--position))",G="max(var(--point), var(--position))";let V=(0,a.forwardRef)(function(e,n){var t=(0,l.md)(A.G),r=t.overage,i=t.point,s=(0,l.md)(A.Sh),c=(0,a.useRef)(null);return(0,a.useEffect)(function(){(0,x.U)(c,"--opacity",String(r))},[r]),(0,a.useEffect)(function(){(0,x.U)(c,"--point",String(100*i)+"%")},[i]),(0,a.useEffect)(function(){(0,x.U)(c,"--position",String(100*s)+"%")},[s]),(0,a.useMemo)(function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,o.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:k.LU.interactiveBorder,borderRadius:"2px"},children:(0,o.Y)("div",{ref:c,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(W,", \n                  ").concat(k.LU.interactiveBorderHover," ").concat(W,", \n                  ").concat(k.LU.interactiveBorderHover," ").concat(G,", \n                  transparent ").concat(G," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[n])});var j=A.VW;function Z(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(A.gb),2),r=t[0],i=t[1],s=(0,Y._)((0,a.useState)(!1),2),c=s[0],u=s[1],d=(0,a.useRef)(null),p=(0,a.useRef)(null),f=(0,a.useRef)(null),h=(0,a.useCallback)(function(e){n.setTransitionTime(e)},[n]),m=(0,a.useCallback)(function(e){n.setProgress(e)},[n]);return void 0===r||c||(m(r/j),h(A.tH.Normal)),(0,a.useEffect)(function(){if(void 0!==r&&p.current&&f.current&&!c){var e=p.current,n=f.current,t=function(t){if(0===t.button){u(!0),n.focus();var r=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=r.width,l=o.width,s=t.target===e?l/2:t.clientX-o.left,c=null,d=function(e){var n=Math.max(0,Math.min(1,(e-r.left-s)/(a-l)));n!==c&&(c=n,m(n),i(Math.round(n*j)))};d(t.clientX);var p=function(e){h(A.tH.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},f=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),h(A.tH.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",f),window.addEventListener("pointercancel",f),t.preventDefault(),t.stopPropagation()}};return e.addEventListener("pointerdown",t),n.addEventListener("pointerdown",t),function(){e.removeEventListener("pointerdown",t),n.removeEventListener("pointerdown",t)}}},[r,c,i,m,h]),(0,a.useEffect)(function(){if(void 0!==r&&f.current&&!c){var e=f.current,n=function(e){if(void 0!==r&&A.DO.includes(e.key)){var n=Math.max(0,r-1),t=Math.min(j,r+1),o=null;switch(e.key){case"ArrowLeft":o=n;break;case"ArrowRight":o=t;break;case"Home":o=0;break;case"End":o=j}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",n),function(){e.removeEventListener("keydown",n)}}},[c,r,i]),(0,a.useMemo)(function(){return(0,o.FD)(I.S,{gap:8,children:[(0,o.FD)(I.S,{innerRef:d,css:A.uu,children:[(0,o.Y)(V,{ref:p}),(0,o.Y)(z,{ref:f})]}),(0,o.Y)(T,{list:A.T1})]})},[])}function q(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(A.No),1)[0],r=(0,Y._)((0,l.fp)(A.mN),1)[0],i=(0,l.Xr)(A.k4);return(0,a.useEffect)(function(){i()},[i,t]),(0,o.FD)(I.S,{css:U.container,children:[(0,o.FD)(I.S,{css:U.label,children:[(0,o.FD)(O.EY,{css:U.resource,multiline:!1,children:[t," GiB RAM"]}),(0,o.FD)(I.S,{css:U.cost,children:[(0,o.FD)(O.EY,{color:"dimmer",multiline:!1,children:[r," ",(0,N.A)("compute unit",r)]}),(0,o.Y)(O.EY,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,o.Y)(Z,{setAttrs:n})]})}var K=t(93629),$=(0,R.x)({container:[P.wp.px(8),P.wp.width("100%"),P.wp.position.absolute,P.wp.top(60),P.wp.bottom(21),P.wp.transition.snappy,P.wp.zIndex(1),(0,S._)({},P.kL.min(320),P.wp.top(34))],svg:[P.wp.width("100%"),P.wp.height("100%"),P.wp.overflow("visible")],overage:{"--opacity":0,opacity:"var(--opacity)",transition:"opacity 80ms ease-out"}});function J(){var e,n=(0,l.md)(A.NT),t=(0,a.useRef)(null),r=(0,a.useRef)(null),i=(0,a.useRef)((null===(e=r.current)||void 0===e?void 0:e.offsetWidth)||0),c=(0,l.md)(A.b8),u=(0,l.md)(A.TJ);(0,a.useEffect)(function(){r.current&&(i.current=r.current.offsetWidth)});var d={x1:c/(i.current-16)*100,x2:u/(i.current-16)*100,y1:0,y2:100,strokeWidth:3,vectorEffect:"non-scaling-stroke",shapeRendering:"crisp-edges"};return(0,a.useEffect)(function(){(0,x.U)(t,"--opacity",String(Math.pow(n,1/3)))},[n]),(0,o.Y)(I.S,{css:$.container,id:"rope",innerRef:r,children:(0,o.FD)("svg",{height:100,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",css:$.svg,children:[(0,o.Y)("line",(0,K._)((0,s._)({},d),{stroke:k.LU.outlineDimmer})),(0,o.Y)("line",(0,K._)((0,s._)({},d),{stroke:k.LU.outlineDefault,strokeDasharray:8})),(0,o.FD)("g",{ref:t,css:$.overage,children:[(0,o.Y)("line",(0,K._)((0,s._)({},d),{stroke:k.LU.accentPrimaryDefault})),(0,o.Y)("line",(0,K._)((0,s._)({},d),{stroke:k.LU.accentPrimaryStrongest,strokeDasharray:8}))]})]})})}var Q=t(4804),X=t(47258),ee=t(93682),en=t(2527),et=t(37407),er=t(13194),ei=t(20627),eo=[P.wp.borderRadius(8)],ea=(0,R.x)({container:[eo],disabled:[eo,{opacity:.5,pointerEvents:"none"}],top:[P.wp.p(16),P.wp.colWithGap(12)],bottom:[P.wp.p(16),P.wp.border({direction:"top",color:k.LU.outlineDimmer})],text:[P.wp.flex.growAndShrink(1)],edit:X.b.outlined,overviewLine:[P.wp.flex.column,(0,S._)({},P.kL.min(320),[P.wp.flex.row,P.wp.justify.spaceBetween])],overviewValue:[P.wp.fontWeight.medium],total:[P.wp.flex.shrink(1),P.wp.align.center],cost:[P.wp.flex.row,P.wp.align.baseline,{gap:1}],builder:[P.wp.position.relative,{"--cpu-transition-time":A.tH.Normal,"--cpu-progress":1,"--ram-transition-time":A.tH.Normal,"--ram-progress":1,"#rope":{opacity:0}," *":{transitionTimingFunction:"ease"},":hover, :focus-within":{" #rope":{opacity:1}}}]});function el(e){var n=e.machineConfiguration,t=e.disabled,r=e.toggleEditable,i=void 0===r||r,s=e.hasDeploymentRepricing,c=(0,a.useRef)(null),u=(0,Y._)((0,a.useState)(!i),2),d=u[0],p=u[1],f=(0,l.md)(A.NF),h=(0,l.md)(A.No),m=(0,l.md)(A.WM),g=(0,l.md)(A.mN),v=(0,l.md)(A.Je),w=(0,l.md)(A.GS),y=(0,l.Xr)(A.ZH),b=(0,l.Xr)(A.Yb),S=(0,l.Xr)(A.Sh),C=(0,l.Xr)(A.yh),_=(0,l.Xr)(A.gb);return(0,a.useEffect)(function(){y((0,Q.xC)({hasDeploymentRepricing:null!=s&&s}).autoscaleDeploymentCostDetails)},[y,s]),(0,a.useEffect)(function(){if(n){var e=A.xP.findIndex(function(e){return e.toString()===n.vcpu}),t=A.T1.findIndex(function(e){return e.toString()===n.memory});C(e),_(t)}},[n,C,_]),(0,o.FD)(en.ui,{elevated:!0,css:t?ea.disabled:ea.container,children:[(0,o.FD)(I.S,{css:ea.top,children:[(0,o.FD)(I.S,{row:!0,gap:8,children:[(0,o.FD)(I.S,{css:ea.text,gap:4,children:[(0,o.FD)(I.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(er.A,{}),(0,o.Y)(O.EY,{variant:"subheadDefault",multiline:!1,children:"Machine power"})]}),(0,o.Y)(O.EY,{multiline:!0,color:"dimmer",children:"The power level for each machine that spins up upon any request"})]}),i?(0,o.Y)(ee.$n,{text:d?"Done":"Edit",css:ea.edit,onClick:function(){return p(!d)}}):null]}),d?(0,o.FD)(o.FK,{children:[(0,o.FD)(I.S,{css:ea.builder,gap:12,innerRef:c,children:[(0,o.Y)(J,{}),(0,o.Y)(H,{setAttrs:{setTransitionTime:function(e){(0,x.U)(c,"--cpu-transition-time",e)},setProgress:function(e){(0,x.U)(c,"--cpu-progress",e.toString()),b(e)}}}),(0,o.Y)(q,{setAttrs:{setTransitionTime:function(e){(0,x.U)(c,"--ram-transition-time",e)},setProgress:function(e){(0,x.U)(c,"--ram-progress",e.toString()),S(e)}}})]}),(0,o.Y)(O.EY,{color:"dimmer",children:"Only some configurations are valid. When you change one slider, the other one will automatically adjust to remain valid."})]}):(0,o.FD)(I.S,{gap:8,children:[(0,o.FD)(I.S,{css:ea.overviewLine,children:[(0,o.FD)(O.EY,{css:ea.overviewValue,multiline:!1,children:[f," vCPU",f>1?"s":""]}),(0,o.FD)(I.S,{css:ea.cost,children:[(0,o.FD)(O.EY,{multiline:!1,color:"dimmer",children:[m," ",(0,N.A)("compute unit",m)]}),(0,o.Y)(O.EY,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]}),(0,o.FD)(I.S,{css:ea.overviewLine,children:[(0,o.FD)(O.EY,{css:ea.overviewValue,multiline:!1,children:[h," GiB RAM"]}),(0,o.FD)(I.S,{css:ea.cost,children:[(0,o.FD)(O.EY,{multiline:!1,color:"dimmer",children:[g," ",(0,N.A)("compute unit",g)]}),(0,o.Y)(O.EY,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]})]})]}),(0,o.Y)(I.S,{css:ea.bottom,children:(0,o.FD)(I.S,{css:ea.overviewLine,children:[(0,o.Y)(O.EY,{css:ea.overviewValue,multiline:!1,children:"Total per machine"}),(0,o.FD)(I.S,{css:ea.total,row:!0,gap:4,children:[(0,o.FD)(I.S,{css:ea.cost,children:[(0,o.FD)(O.EY,{multiline:!1,children:[w," ",(0,N.A)("compute unit",w)]}),(0,o.Y)(O.EY,{variant:"small",color:"dimmer",multiline:!1,children:"/sec"})]}),(0,o.Y)(et.m_,{tooltip:(0,o.FD)(I.S,{css:ea.cost,children:[(0,o.FD)(O.EY,{multiline:!1,children:["$",v.toFixed(6)]}),(0,o.Y)(O.EY,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]}),children:(0,o.Y)(ei.A,{color:k.LU.foregroundDimmest})})]})]})})]})}var es=t(50010);let ec=(0,a.forwardRef)(function(e,n){var t=(0,Y._)((0,l.fp)(es.h0),1)[0],r=(0,a.useRef)(null);return(0,a.useImperativeHandle)(n,function(){return r.current}),t&&r.current&&(r.current.setAttribute("aria-valuemin",String(es.hK[0])),r.current.setAttribute("aria-valuemax",String(es.hK[es.hK.length-1])),r.current.setAttribute("aria-valuenow",String(t))),(0,a.useMemo)(function(){return(0,o.Y)("div",{ref:r,role:"slider",tabIndex:0,css:[es.sC,{left:"calc((100% - 16px) * var(--max-instances-progress, 0))",transition:"left var(--max-instances-transition-time, 100ms) ease-out"}]})},[])});var eu="min(var(--point), var(--position))",ed="max(var(--point), var(--position))";let ep=(0,a.forwardRef)(function(e,n){var t=(0,l.md)(es.sh),r=t.overage,i=t.point,s=(0,l.md)(es.o2),c=(0,a.useRef)(null);return(0,a.useEffect)(function(){(0,x.U)(c,"--opacity",String(r))},[r]),(0,a.useEffect)(function(){(0,x.U)(c,"--point",String(100*i)+"%")},[i]),(0,a.useEffect)(function(){(0,x.U)(c,"--position",String(100*s)+"%")},[s]),(0,a.useMemo)(function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,o.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:k.LU.interactiveBorder,borderRadius:"2px"},children:(0,o.Y)("div",{ref:c,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(eu,", \n                  ").concat(k.LU.interactiveBorderHover," ").concat(eu,", \n                  ").concat(k.LU.interactiveBorderHover," ").concat(ed,", \n                  transparent ").concat(ed," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[n])});var ef=es.i_;function eh(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(es.Md),2),r=t[0],i=t[1],s=(0,Y._)((0,a.useState)(!1),2),c=s[0],u=s[1],d=(0,a.useRef)(null),p=(0,a.useRef)(null),f=(0,a.useRef)(null),h=(0,a.useCallback)(function(e){n.setTransitionTime(e)},[n]),m=(0,a.useCallback)(function(e){n.setProgress(e)},[n]);return void 0===r||c||(m(r/ef),h(es.tH.Normal)),(0,a.useEffect)(function(){if(void 0!==r&&p.current&&f.current&&!c){var e=p.current,n=f.current,t=function(t){if(0===t.button){u(!0),n.focus();var r=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=r.width,l=o.width,s=t.target===e?l/2:t.clientX-o.left,c=null,d=function(e){var n=Math.max(0,Math.min(1,(e-r.left-s)/(a-l)));n!==c&&(c=n,m(n),i(Math.round(n*ef)))};d(t.clientX);var p=function(e){h(es.tH.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},f=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),h(es.tH.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",f),window.addEventListener("pointercancel",f),t.preventDefault(),t.stopPropagation()}};return e.addEventListener("pointerdown",t),n.addEventListener("pointerdown",t),function(){e.removeEventListener("pointerdown",t),n.removeEventListener("pointerdown",t)}}},[r,c,i,m,h]),(0,a.useEffect)(function(){if(void 0!==r&&f.current&&!c){var e=f.current,n=function(e){if(void 0!==r&&es.DO.includes(e.key)){var n=Math.max(0,r-1),t=Math.min(ef,r+1),o=null;switch(e.key){case"ArrowLeft":o=n;break;case"ArrowRight":o=t;break;case"Home":o=0;break;case"End":o=ef}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",n),function(){e.removeEventListener("keydown",n)}}},[c,r,i]),(0,a.useMemo)(function(){return(0,o.Y)(I.S,{gap:8,children:(0,o.FD)(I.S,{innerRef:d,css:es.uu,children:[(0,o.Y)(ep,{ref:p}),(0,o.Y)(ec,{ref:f})]})})},[])}var em=(0,R.x)({costInfo:[P.wp.flex.shrink(1),P.wp.align.center]});function eg(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(es.h0),1)[0],r=(0,Y._)((0,l.fp)(es.D_),1)[0],i=(0,Y._)((0,l.fp)(es.Wt),1)[0];return(0,o.FD)(I.S,{css:U.container,children:[(0,o.FD)(I.S,{css:U.label,children:[(0,o.FD)(O.EY,{css:U.resource,multiline:!1,children:[t," ",(0,N.A)("machine",t)]}),(0,o.FD)(I.S,{css:em.costInfo,row:!0,gap:4,children:[(0,o.FD)(I.S,{css:U.cost,children:[(0,o.FD)(O.EY,{multiline:!1,children:[i," compute units"]}),(0,o.Y)(O.EY,{color:"dimmer",variant:"small",multiline:!1,children:"/s at max traffic"})]}),(0,o.Y)(et.m_,{tooltip:(0,o.FD)(I.S,{css:U.cost,children:[(0,o.FD)(O.EY,{multiline:!1,children:["$",r]}),(0,o.Y)(O.EY,{variant:"small",color:"dimmest",multiline:!1,children:"/s"})]}),children:(0,o.Y)(ei.A,{color:k.LU.foregroundDimmest})})]})]}),(0,o.Y)(eh,{setAttrs:n})]})}var ev=t(76860),ew=[P.wp.colWithGap(12),P.wp.borderRadius("container"),P.wp.p(16)],ey=(0,R.x)({container:[ew],disabled:[ew,{opacity:.5,pointerEvents:"none"}],builder:[P.wp.position.relative,{"--max-instances-transition-time":es.tH.Normal,"--max-instances":1," *":{transitionTimingFunction:"ease"}}]});function eb(e){var n=e.maxMachineInstances,t=e.disabled,r=e.onError,i=(0,a.useRef)(null),s=(0,l.Xr)(es.o2),c=(0,l.Xr)(es.Md);return(0,a.useEffect)(function(){if(n){var e=es.hK.indexOf(n);if(-1===e){r("An error occurred while setting selected max machine instances.");return}c(e)}},[n,c,r]),(0,o.FD)(en.ui,{elevated:!0,css:t?ey.disabled:ey.container,children:[(0,o.FD)(I.S,{gap:4,children:[(0,o.FD)(I.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(ev.A,{}),(0,o.Y)(O.EY,{variant:"subheadDefault",multiline:!1,children:"Max number of machines"})]}),(0,o.Y)(O.EY,{multiline:!0,variant:"small",color:"dimmer",children:"The most machines that should ever spin up to handle your highest traffic. More machines means a faster experience for your users."})]}),(0,o.Y)(I.S,{css:ey.builder,gap:8,innerRef:i,children:(0,o.Y)(eg,{setAttrs:{setTransitionTime:function(e){(0,x.U)(i,"--max-instances-transition-time",e)},setProgress:function(e){(0,x.U)(i,"--max-instances-progress",e.toString()),s(e)}}})})]})}var eS=t(49295),eY=t(50172),eA=t(67084),eC=t(14545),ex=t(44144);function ek(e){var n,t=e.onError,r=(n=(0,s._)({},h,{onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename&&t("Something went wrong")},onError:function(e){return t(e.message)}}),d.I(m,n)),i=r.data,o=r.loading;return{machineConfigurations:(null==i?void 0:i.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?i.hostingMachineConfigurations.results:null,loading:o}}var e_=function(e){var n,t=(0,v.uS)(),s=(0,v.i$)(),c=(0,v.cF)(),u=(0,v.tq)(),d=(0,v.gq)(),p=void 0!==u,f=!p&&"string"!=typeof s,h=(0,l.md)(A.NF),m=(0,l.md)(A.No),S=(0,l.md)(es.h0),Y=ek({onError:e.onError}),C=Y.machineConfigurations,x=Y.loading;(0,a.useEffect)(function(){(0,y.Ae)({context:b.P.AutoscaleMachineConfiguration})},[]);var k=(0,eC.Os)(eA.IW.id,eA.Gp.ApproveDeployment),_=(0,eC.Os)(eA._t.id,eA.ij.ApproveDeployment),D=(n=(0,r._)(function(){var n,t,r,o;return(0,i.YH)(this,function(i){return(n=null==C?void 0:C.find(function(e){var n=e.vcpu,t=e.memory;return h.toString()===n&&m.toString()===t}))?(t=n.id,r=n.label,o=n.slug,e.onConfirm({configurationId:t,configurationLabel:r,configurationSlug:o,maxInstances:S}),k.goto(eA.Gp.ConfirmDeployment),_.goto(eA.ij.ConfirmDeployment)):e.onError("An error occurred trying to validate selected machine configuration"),[2]})}),function(){return n.apply(this,arguments)}),E=x||e.fetching||p||t!==w.d.Ready;return(0,o.FD)(o.FK,{children:[(0,o.Y)(eS.A,{maxWidth:!0,children:(0,o.Y)(eY.fw,{onBack:function(){e.onBack(),k.goto(eA.Gp.SetupDeployment),_.goto(eA.ij.SetupDeployment)}})}),(0,o.Y)(eS.A,{maxWidth:!0,children:(0,o.FD)(I.S,{gap:16,children:[(0,o.FD)(I.S,{gap:4,children:[(0,o.Y)(O.EY,{variant:"subheadBig",children:"Autoscale machine configuration"}),(0,o.Y)(O.EY,{variant:"small",color:"dimmer",children:"Autoscale apps spin up enough machines to meet demand at any point in time. You are billed for the total number of compute units across all machines."})]}),(0,o.FD)(I.S,{gap:16,children:[(0,o.Y)(el,{machineConfiguration:null==c?void 0:c.machineConfiguration,disabled:E,hasDeploymentRepricing:null==d?void 0:d.hasDeploymentRepricing}),(0,o.Y)(eb,{maxMachineInstances:null==c?void 0:c.maxMachineInstances,disabled:E,onError:e.onError})]}),(0,o.FD)(I.S,{gap:8,css:[P.wp.pt(8)],children:[(0,o.Y)(ee.$n,{colorway:"primary",text:f?"Approve and configure build settings":"Approve and update",iconRight:(0,o.Y)(ex.A,{}),onClick:D,loading:x}),(0,o.FD)(O.EY,{color:"dimmest",children:["Your deployed app will utilize any available monthly free allotment before charging for additional resource usage."," ",(0,o.Y)("a",{href:g.ik.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]})]})})]})}},98015:(e,n,t)=>{"use strict";t.d(n,{o:()=>h,t:()=>f});var r=t(12694),i=t(21462),o=t(17844),a=t(12584),l=t(41114),s=t(86997);function c(){var e=(0,a._)(["\n  query OrgFlags($orgId: String!) {\n    currentUser {\n      id\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          flags {\n            id\n            type\n            value\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},d=(0,l.J1)(c()),p=t(25933);function f(){var e,n,t,r=(0,p.ET)().orgId,a=(e=(0,o._)({},u,{skip:void 0===r,variables:{orgId:r}}),s.I(d,e)),l=(null===(t=a.data)||void 0===t?void 0:null===(n=t.currentUser)||void 0===n?void 0:n.org.__typename)==="Org"&&a.data.currentUser.org.flags;return[(0,i.useMemo)(function(){return(l||[]).reduce(function(e,n){return"boolean"===n.type&&(e[n.id]=n.value),e},{})},[l]),a.loading]}var h=function(e){var n,t=e.controlName,i=e.default;return null!==(n=(0,r._)(f(),1)[0][t])&&void 0!==n?n:i}},98152:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 .25a.75.75 0 0 1 .75.75v7.19l3.72-3.72a.75.75 0 1 1 1.06 1.06l-5 5a.75.75 0 0 1-1.06 0l-5-5a.75.75 0 0 1 1.06-1.06l3.72 3.72V1A.75.75 0 0 1 12 .25Zm0 13a.75.75 0 0 1 .53.22l5 5a.75.75 0 1 1-1.06 1.06l-3.72-3.72V23a.75.75 0 0 1-1.5 0v-7.19l-3.72 3.72a.75.75 0 0 1-1.06-1.06l5-5a.75.75 0 0 1 .53-.22Z",clipRule:"evenodd"})}))}},98429:(e,n,t)=>{"use strict";t.d(n,{u:()=>m});var r=t(83846),i=t(1889),o=t(30778),a=t(6680),l=t(61234),s=t(22498),c=t(43974),u=t(35869),d=(0,s.v)(["fontSize"]),p=d.cssVars,f=d.styleTokens,h=(0,l.x)({button:[c.wp.reset.button,c.wp.flex.row,c.wp.align.center,c.wp.cursor.pointer,c.wp.hover({opacity:1}),{opacity:.6,fontFamily:a.LU.fontFamilyDefault,"*":{fontSize:f.fontSize,borderColor:a.LU.foregroundDimmest,color:a.LU.foregroundDimmest},":hover *":{borderColor:a.LU.foregroundDefault,color:a.LU.foregroundDefault}}],keyCombo:[{marginLeft:"calc(".concat(f.fontSize," * 0.3)")}]});function m(e){return(0,i.FD)(u.S,{className:e.className,tag:"button",css:h.button,style:(0,r._)({},p.fontSize,e.fontSize+"px"),onClick:e.onClick,children:[(0,i.Y)(u.S,{children:e.text}),e.keyCombo?(0,i.Y)(u.S,{css:h.keyCombo,justify:"center",children:(0,i.Y)(o._y,{fontSize:.8*e.fontSize,keyCombo:e.keyCombo})}):null]})}},98510:e=>{e.exports={highlightBackground:"AgentMessage_highlightBackground__O3BTi",content:"AgentMessage_content__UUt2n",inner:"AgentMessage_inner__UU4OT",root:"AgentMessage_root__k4pIK","border-rotate":"AgentMessage_border-rotate__e0lrW","fallback-animation":"AgentMessage_fallback-animation__rsVAj"}},98668:(e,n,t)=>{"use strict";t.d(n,{DB:()=>m,Ay:()=>v,mS:()=>g});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  fragment CompleteCodeAuthorization on OrgAuthorizations {\n    useAdvancedModel: useAiModel(model: advanced) {\n      isAuthorized\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(['\n  query CompleteCode($orgId: String) {\n    currentUser {\n      id\n      hasKillswitch: gate(feature: "flag-killswitch-ghostwriter")\n      personalOrgAuthorizations {\n        ... on OrgAuthorizations {\n          ...CompleteCodeAuthorization\n        }\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          authorizations {\n            ...CompleteCodeAuthorization\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ',"\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(l()),d=(0,o.J1)(s(),u),p=t(60799),f=t(47606),h=t(16907),m=function(e){return e.None="None",e.Basic="Basic",e.Pro="Pro",e.BackendOnly="BackendOnly",e}({});function g(e){return"None"!==e&&"BackendOnly"!==e}function v(){var e,n,t,i,o,l=(0,h.A)(),s=(0,f.R)(l),u=s.orgId,m=s.loading,g=(e=(0,r._)({},c,{variables:{orgId:u},skip:m}),a.I(d,e)),v=g.data,w=g.loading,y=(0,p.f)().isTeamWithAiDisabled,b=null==v?void 0:v.currentUser;return!b||b.hasKillswitch||y||w||m?"None":u?(null===(n=v.currentUser)||void 0===n?void 0:n.org.__typename)==="Org"&&(null===(t=v.currentUser)||void 0===t?void 0:t.org.authorizations.useAdvancedModel.isAuthorized)?"Pro":"Basic":(null===(i=v.currentUser)||void 0===i?void 0:i.personalOrgAuthorizations.__typename)==="OrgAuthorizations"&&(null===(o=v.currentUser)||void 0===o?void 0:o.personalOrgAuthorizations.useAdvancedModel.isAuthorized)?"Pro":"Basic"}},98796:(e,n,t)=>{"use strict";t.d(n,{D:()=>a});var r=t(75152),i=t(24998),o=r.ZU.Object({type:r.ZU.Literal("config"),flow:r.ZU.Union([r.ZU.Literal("githubImport"),r.ZU.Literal("incompleteConfig")])}),a=function(e){return i.WT.Decode(o,e)}},98961:(e,n,t)=>{"use strict";t.d(n,{Xh:()=>c,cR:()=>s,oL:()=>u});var r=t(12694),i=t(1889),o=t(21462),a=t(47993),l=(0,o.createContext)({left:null,right:null,setLeft:function(){},setRight:function(){}});function s(e){var n=e.children,t=e.side,r=(0,o.useContext)(l);if(!r)return null;var i=r[t];return i?a.createPortal(n,i):null}function c(e){var n,t,a,s,c,u,d=e.children,p=(t=(n=(0,r._)((0,o.useState)(null),2))[0],a=n[1],c=(s=(0,r._)((0,o.useState)(null),2))[0],u=s[1],(0,o.useMemo)(function(){return{left:t,right:c,setLeft:a,setRight:u}},[t,c]));return(0,i.Y)(l.Provider,{value:p,children:d})}function u(){return(0,o.useContext)(l)}},99091:(e,n,t)=>{"use strict";t.d(n,{A:()=>h});var r=t(1889),i=t(45981),o=t.n(i),a=t(1040),l=t(6680),s=t(61234),c=t(43974),u=t(36245),d=t(40043),p=t(35869),f=(0,s.x)({url:[c.wp.color.accentPositiveStronger,c.wp.fontSize("small"),c.wp.focusRing,{"&:hover":[c.wp.cursor.pointer,c.wp.color.accentPositiveStrongest]}],qrCodeWrapper:[c.wp.p(8),c.wp.borderRadius(4),c.wp.display.inlineBlock,c.wp.border({width:1,color:l.LU.outlineDefault}),{backgroundColor:"white"}]});function h(e){var n=e.url;return(0,r.FD)(p.S,{gap:4,children:[(0,r.Y)(d.EY,{children:"Dev URL:"}),(0,r.Y)(p.S,{row:!0,gap:4,children:(0,r.FD)(p.S,{row:!0,gap:4,align:"center",children:[(0,r.Y)(o(),{legacyBehavior:!0,href:n,passHref:!0,children:(0,r.Y)("a",{css:f.url,target:"_blank",children:n})}),(0,r.Y)(u.r,{textToCopy:n,tooltipText:"Copy link",tooltipDelay:"none"})]})}),(0,r.Y)(p.S,{align:"start",children:(0,r.Y)(p.S,{css:f.qrCodeWrapper,children:(0,r.Y)(a.Ay,{size:128,value:n})})}),(0,r.Y)(d.EY,{color:"dimmer",variant:"small",children:"Dev URLs are temporary and will sleep after you leave the workspace."})]})}},99395:(e,n,t)=>{"use strict";t.d(n,{Q:()=>f,z:()=>p});var r=t(17844),i=t(93629),o=t(49069),a=t(45773),l=t(89668),s=t(67315),c=t(92537),u=t(63892);function d(e){var n=e.state.field(p);if(n){var t=n.type;return"explainCode"===t?(0,u.u4)(u.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"explain",source:n.source}):"generateCode"===t?(0,u.u4)(u.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:n.source}):"transformCode"===t&&(0,u.u4)(u.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"modify",source:n.source}),e.dispatch({effects:l.L.of(null)}),!0}return!1}var p=o.sU.define({create:function(){return null},update:function(e,n){if((0,c.C)(n,l.L,function(n){e=n.value?{id:n.value.id,codeReference:n.value.codeReference,type:n.value.type,source:n.value.source,loading:n.value.loading,data:n.value.data}:null}),!e||n.changes.empty)return e;var t=e.codeReference.range.indexFrom>n.newDoc.length?n.newDoc.length:n.changes.mapPos(e.codeReference.range.indexFrom),o=e.codeReference.range.indexTo>n.newDoc.length?n.newDoc.length:n.changes.mapPos(e.codeReference.range.indexTo);return t>=o?null:e=(0,i._)((0,r._)({},e),{codeReference:(0,i._)((0,r._)({},e.codeReference),{range:{indexFrom:t,indexTo:o,lineFrom:n.newDoc.lineAt(t).number,lineTo:n.newDoc.lineAt(o).number}})})},provide:function(e){return[o.Nb.highest(a.w4.of([{key:"Escape",run:d}])),s.Rh.from(e,function(e){var n;return null!==(n=(null==e?void 0:e.loading)&&e.codeReference.range.indexFrom===e.codeReference.range.indexTo)&&void 0!==n?n:null})]}}),f=o.sU.define({create:function(){return null},update:function(e,n){if(!n.state.field(p))return null;var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;s.is(l.L)&&(e=null),s.is(l.M)&&(e=s.value)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}})},99498:(e,n,t)=>{"use strict";t.d(n,{A:()=>x});var r=t(17844),i=t(93629),o=t(12694),a=t(1889),l=t(21462),s=t(18740),c=t(92302),u=t(56282),d=t(20387),p=t(61239),f=t(67277),h=t(6680),m=t(61234),g=t(47258),v=t(43974),w=t(26705),y=t(31618),b=t(6553),S=t(4989),Y=t(44144),A=t(90821),C=(0,m.x)({group:[v.wp.display.flex,{gap:h.LU.space4},v.wp.position.relative],dateInput:[y.cO,v.wp.flex.row,{gap:h.LU.space4,'&[data-invalid="true"]':{"&, &:hover":{borderColor:h.LU.accentNegativeStronger}}}],dateSegment:[v.wp.borderRadius(2),{outline:"none","&[data-focused=true]":{outline:"2px solid ".concat(h.LU.accentPrimaryDefault),outlineOffset:1}}],iconButton:[v.wp.position.absolute,v.wp.top("50%"),v.wp.right(0),{transform:"translateY(-50%)"}],calendar:[v.wp.p(8)],calendarHeader:[v.wp.flex.row,v.wp.align.center,v.wp.justify.spaceBetween],calendarHeaderText:[v.wp.fontSize(h.LU.fontSizeDefault),v.wp.color.foregroundDefault,v.wp.fontWeight.normal],arrowButton:[g.b.listItem,v.wp.borderRadius("default"),v.wp.p(4),{appearance:"none",background:"transparent",border:"none"}],calendarGrid:[v.wp.mt(8),{th:[v.wp.height(14),v.wp.color.foregroundDimmer,v.wp.fontWeight.normal,v.wp.pb(4)]}],calendarCell:[g.b.listItem,v.wp.flex.column,v.wp.fontSize(h.LU.fontSizeDefault),v.wp.width(32),v.wp.height(28),v.wp.borderRadius("default"),{textAlign:"center",justifyContent:"center",'&[data-outside-visible-range="true"]':[v.wp.display.none],'&[data-selected="true"]':{"&, &:hover":[v.wp.backgroundColor.accentPrimaryDimmer]},'&[data-disabled="true"]':{opacity:.5},'&[data-unavailable="true"]':{opacity:.5}}]});function x(e){var n=(0,o._)((0,l.useState)(!1),2),t=n[0],h=n[1];return(0,a.Y)(s.lr,(0,i._)((0,r._)({},e),{children:(0,a.FD)(c.Y,{css:C.group,children:[(0,a.Y)(u.J3,{css:C.dateInput,children:function(e){return(0,a.Y)(u.Eu,{segment:e,css:C.dateSegment})}}),(0,a.FD)(b.Wv,{label:"Calendar",isOpen:t,onOpenChange:h,children:[(0,a.Y)(w.K0,{alt:"Open calendar",tooltipBehavior:"hidden",css:C.iconButton,children:(0,a.Y)(A.A,{})}),(0,a.FD)(d.Vv,{css:C.calendar,children:[(0,a.FD)("header",{css:C.calendarHeader,children:[(0,a.Y)(p.$,{slot:"previous",css:C.arrowButton,children:(0,a.Y)(S.A,{})}),(0,a.Y)(f.D,{css:C.calendarHeaderText}),(0,a.Y)(p.$,{slot:"next",css:C.arrowButton,children:(0,a.Y)(Y.A,{})})]}),(0,a.Y)(d.r8,{css:C.calendarGrid,children:function(e){return(0,a.Y)(d.Zr,{date:e,css:C.calendarCell})}})]})]})]})}))}},99500:(e,n,t)=>{"use strict";t.d(n,{n:()=>v});var r=t(12694),i=t(1889),o=t(21462),a=t(317),l=t(8952),s=t(5644),c=t(61234),u=t(43974),d=t(93682),p=t(2527),f=t(40043),h=t(35869),m=t(82478),g=(0,c.x)({root:[u.wp.py(8),u.wp.px(12),u.wp.borderRadius()],buttonContainer:[u.wp.width("100%"),u.wp.justify.center],upgradeButton:[u.wp.width("60%")]});function v(e){var n=e.aiName,t=(0,r._)((0,o.useState)(!1),2),c=t[0],u=t[1],v=(0,s.A)();return(0,i.FD)(p.ui,{elevated:!0,css:g.root,gap:8,align:"center",children:[(0,i.FD)(f.EY,{children:[n," is currently experiencing high demand and is temporarily unavailable for ",a.Lm," plan users."]}),(0,i.FD)(f.EY,{children:["Please try again later, or upgrade to ",a.en," for immediate access."]}),(0,i.Y)(h.S,{css:g.buttonContainer,row:!0,gap:6,children:(0,i.Y)(d.$n,{text:"Upgrade to ".concat(a.en),iconLeft:(0,i.Y)(m.A,{}),onClick:function(){return u(!0)},colorway:"brand",css:g.upgradeButton})}),(0,i.Y)(l.A,{isOpen:c,onClose:function(){return u(!1)},type:"purchase",analyticsContext:{upgrade:{context:"agent_freemium_quota"}},onPurchaseComplete:function(){return v()},reloadPageAfterPurchaseComplete:!0})]})}},99621:(e,n,t)=>{"use strict";t.d(n,{B:()=>lE});var r,i,o,a,l,s=t(17844),c=t(93629),u=t(12694),d=t(22531),p=t(1889),f=t(21462),h=t(75152),m=t(24998),g=t(29824),v=t(59539),w=t(29935),y=t(86105),b=t(82643),S=t(34951),Y=t(2385),A=t(49295),C=t(83846),x=t(11953),k=t(47389),_=t(60721),D=t(1867),E=t(21640),R=t(12584),I=t(41114),F=t(86997);function T(){var e=(0,R._)(["\n  fragment ReplAnalyticsDurationResult on ReplAnalyticsDuration {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return T=function(){return e},e}function P(){var e=(0,R._)(["\n  query ReplAnalyticsDuration(\n    $id: String!\n    $input: ReplAnalyticsDurationInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsDuration(input: $input) {\n          ... on ReplAnalyticsDuration {\n            ...ReplAnalyticsDurationResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return P=function(){return e},e}var L={},U=(0,I.J1)(T()),N=(0,I.J1)(P(),U),O=t(45771),M=t(12722),B=t(43974),H=(0,O.AH)([B.wp.maxHeight(320),B.wp.minHeight(240),{aspectRatio:"2 / 1"}]);function z(){var e=(0,M.D)().values;return{animation:{duration:0},backgroundColor:e.global.backgroundHigher,borderColor:e.global.outlineDimmer,borderWidth:1,titleFont:{family:"'IBM Plex Sans', sans-serif"},titleColor:e.global.foregroundDimmest,bodyFont:{family:"'IBM Plex Sans', sans-serif"},bodyColor:e.global.foregroundDimmest,footerFont:{family:"'IBM Plex Sans', sans-serif"},footerColor:e.global.foregroundDimmest,padding:8,cornerRadius:6}}var W=t(62493),G=t(3910),V=t(40043),j=t(35869),Z=function(e){var n=e.data;E.t1.register(E.E8);var t=(0,M.D)().values;return(0,p.Y)(D.yP,{options:{responsive:!0,maintainAspectRatio:!1,datasets:{bar:{categoryPercentage:1,barPercentage:1}},plugins:{tooltip:z()},scales:{y:{title:{display:!0,text:"# Requests",color:t.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:t.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return e}},grid:{color:t.global.outlineDimmest}},x:{title:{font:{family:"'IBM Plex Sans', sans-serif"},display:!0,text:"Duration (ms)",color:t.global.foregroundDimmer},ticks:{autoSkip:!1,maxRotation:20,color:t.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:t.global.outlineDimmest}}}},data:{labels:n.results.map(function(e){var n=e.value.replace("ms","").split("-"),t=n[n.length-1];return t.includes("s+")?t.replace("s+","000+"):"< "+t}),datasets:[{borderWidth:0,data:n.results.map(function(e){return e.count}),backgroundColor:Array(n.results.length).fill(t.global.tealDefault)}]}})};let q=function(e){var n,t,r,i=e.replId,o=e.start,a=e.hours,l=(0,u._)((0,f.useState)(void 0),2),c=l[0],d=l[1],h=(n=(0,s._)({},L,{variables:{id:i,input:{start:o,hours:a,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsDuration.__typename){case"UserError":case"NotFoundError":d(Error(e.getRepl.analyticsDuration.message))}}}),F.I(N,n)),m=h.data,g=h.loading,v=h.error;return v&&d(v),(0,p.FD)(j.S,{gap:8,children:[(0,p.Y)(V.EY,{variant:"subheadDefault",children:"Request Durations (ms)"}),(0,p.FD)(j.S,{children:[g?(0,p.Y)(j.S,{css:[H,B.wp.borderRadius(),W.S.backgroundPulse()]}):null,c?(0,p.Y)(G.N,{text:c.message,colorway:"negative"}):null,(null==m?void 0:null===(t=m.getRepl)||void 0===t?void 0:t.__typename)==="Repl"&&(null===(r=m.getRepl.analyticsDuration)||void 0===r?void 0:r.__typename)==="ReplAnalyticsDuration"?(0,p.Y)(j.S,{css:H,children:(0,p.Y)(Z,{data:m.getRepl.analyticsDuration})}):null]})]})};var K=t(65954);function $(){var e=(0,R._)(["\n  fragment ReplAnalyticsPageViewDataPoint on ReplAnalyticsPageViewsData {\n    __typename\n    timestamp\n    success\n    failure\n  }\n"]);return $=function(){return e},e}function J(){var e=(0,R._)(["\n  fragment ReplAnalyticsPageViews on ReplAnalyticsPageViews {\n    __typename\n    uniques\n    results {\n      ...ReplAnalyticsPageViewDataPoint\n    }\n  }\n  ","\n"]);return J=function(){return e},e}function Q(){var e=(0,R._)(["\n  query ReplAnalyticsPageViews(\n    $id: String!\n    $input: ReplAnalyticsPageViewsInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsPageViews(input: $input) {\n          ... on ReplAnalyticsPageViews {\n            ...ReplAnalyticsPageViews\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return Q=function(){return e},e}var X={},ee=(0,I.J1)($()),en=(0,I.J1)(J(),ee),et=(0,I.J1)(Q(),en),er=t(32771),ei=t(68461);E.t1.register(E.PP,E.kc,E.FN,E.No,E.m_);let eo=function(e){var n=e.labels,t=e.datasets,r=e.maintainAspectRatio,i=e.yAxisLabel,o=e.xAxisLabel,a=e.unit,l=(0,M.D)().values,u={labels:n.map(function(e){return e.toISOString()}),datasets:t.map(function(e){return(0,c._)((0,s._)({},e),{data:e.data.map(function(e){var n=e.x,t=e.y;return{x:n.toISOString(),y:t}}),pointRadius:.5,tension:.1})})},d=n.length;return(0,p.Y)(D.N1,{options:{clip:4,interaction:{mode:"nearest",intersect:!1},transitions:{active:{animation:{duration:0}}},elements:{point:{hoverRadius:4},line:{borderWidth:2}},responsive:!0,maintainAspectRatio:void 0===r||r,plugins:{tooltip:(0,c._)((0,s._)({},z()),{callbacks:{title:function(e){var n=new Date(e[0].label);return(0,er.A)(n,"MMM d, HH:mm (z)")}}})},scales:{y:{title:{display:!0,text:void 0===i?"# Requests":i,color:l.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:l.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:l.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return a?"".concat(e).concat(a):e}},min:0},x:{title:{display:!0,text:void 0===o?"Time":o,color:l.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:l.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:l.global.foregroundDimmer,callback:function(e,t){var r=n[t];if(d<=24){if(r.getHours()%4!=0)return;return(0,er.A)(r,"HH:mm")}if(r.toISOString()===(0,ei.A)(r).toISOString())return(0,er.A)(r,"MMM d")}}}}},data:u})};var ea=function(e){var n=e.data,t=e.start,r=e.hours,i=(0,M.D)().values,o=Array(r).fill(0).map(function(e,n){return(0,K.A)(t,n)}),a=n.results.reduce(function(e,n){return e.set(n.timestamp,n),e},new Map),l=[{label:"Connected",data:o.map(function(e){var n;return{y:(null!==(n=a.get(e.toISOString()))&&void 0!==n?n:{success:0}).success,x:e}}),borderColor:i.global.accentPrimaryStronger,backgroundColor:i.global.accentPrimaryStronger},{label:"Failed",data:o.map(function(e){var n;return{y:(null!==(n=a.get(e.toISOString()))&&void 0!==n?n:{failure:0}).failure,x:e}}),borderColor:i.global.accentNegativeStronger,backgroundColor:i.global.accentNegativeStronger}];return(0,p.Y)(eo,{labels:o,datasets:l,maintainAspectRatio:!1})};let el=function(e){var n,t,r,i=e.replId,o=e.start,a=e.hours,l=(0,u._)((0,f.useState)(void 0),2),c=l[0],d=l[1],h=(n=(0,s._)({},X,{variables:{id:i,input:{start:o,hours:a,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsPageViews.__typename){case"UserError":case"NotFoundError":d(Error(e.getRepl.analyticsPageViews.message))}}}),F.I(et,n)),m=h.data,g=h.loading,v=h.error,w=(null==m?void 0:null===(t=m.getRepl)||void 0===t?void 0:t.__typename)==="Repl"&&(null===(r=m.getRepl.analyticsPageViews)||void 0===r?void 0:r.__typename)==="ReplAnalyticsPageViews"?m.getRepl.analyticsPageViews:void 0,y=w?w.uniques:void 0;return v&&d(v),(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(j.S,{row:!0,align:"center",justify:"space-between",children:[(0,p.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Requests"}),y?(0,p.FD)(V.EY,{multiline:!1,children:[(0,p.Y)("strong",{children:y})," unique IP addresses"]}):null]}),(0,p.FD)(j.S,{children:[g?(0,p.Y)(j.S,{css:[B.wp.width("100%"),H,B.wp.borderRadius(),W.S.backgroundPulse()]}):null,c?(0,p.Y)(G.N,{text:c.message,colorway:"negative"}):null,w?(0,p.Y)(j.S,{css:H,children:(0,p.Y)(ea,{data:w,start:o,hours:a})}):null]})]})};function es(){var e=(0,R._)(["\n  fragment ReplAnalyticsTimeSeriesDataPoint on ReplAnalyticsTimeSeriesData {\n    __typename\n    timestamp\n    value\n    count\n    unit\n  }\n"]);return es=function(){return e},e}function ec(){var e=(0,R._)(["\n  fragment ReplAnalyticsTimeSeries on ReplAnalyticsTimeSeries {\n    __typename\n    results {\n      ...ReplAnalyticsTimeSeriesDataPoint\n    }\n  }\n  ","\n"]);return ec=function(){return e},e}function eu(){var e=(0,R._)(["\n  query ReplAnalyticsTimeSeries(\n    $id: String!\n    $input: ReplAnalyticsTimeSeriesInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTimeSeries(input: $input) {\n          ... on ReplAnalyticsTimeSeries {\n            ...ReplAnalyticsTimeSeries\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return eu=function(){return e},e}var ed={},ep=(0,I.J1)(es()),ef=(0,I.J1)(ec(),ep),eh=(0,I.J1)(eu(),ef);t(93572),E.t1.register(E.PP,E.kc,E.FN,E.No,E.hE,E.m_,E.UA);let em=function(e){var n,t=e.data,r=e.start,i=e.end,o=e.label,a=e.unit,l=e.xAxisLabel,c=e.yAxisLabel,u=(0,M.D)().values,d=z(),f={datasets:[{label:o,data:t,fill:!1,borderColor:u.global.blueDimmer,tension:.1}]},h=(n=Math).max.apply(n,(0,y._)(t.map(function(e){return e.y}))),m=Math.ceil(a===_.zj.Percentage?Math.max(h,100):Math.ceil(1.2*h)),g=function(e,n){var t=n.getTime()-e.getTime();if(t<=36e5)return{unit:"minute",stepSize:5};if(t<=216e5)return{unit:"minute",stepSize:30};if(t<=864e5)return{unit:"hour",stepSize:2};if(t<=2592e5)return{unit:"hour",stepSize:6};if(t<=6048e5)return{unit:"hour",stepSize:12};else return{unit:"day",stepSize:1}}(r,i),v=g.unit,w=g.stepSize;return(0,p.Y)(D.N1,{data:f,options:{animation:!1,scales:{x:{type:"time",time:{unit:v},title:{display:!0,text:l},min:r.getTime(),max:i.getTime(),ticks:{stepSize:w,color:u.global.foregroundDimmer}},y:{title:{display:!0,text:c},type:"linear",suggestedMax:m,ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:u.global.foregroundDimmer,callback:function(e){return a?"".concat(e).concat(a):e}},min:0}},maintainAspectRatio:!1,responsive:!0,plugins:{tooltip:(0,s._)({},d)}}})};var eg=function(e){var n,t,r,i,o=e.start,a=e.end,l=e.timeSeriesFragment,s=e.xAxisLabel,c=e.yAxisLabel;if(0===l.results.length)return(0,p.Y)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px"},children:"No Data Available"});var d=(r=(n=l.results)[0].value,{label:r,unit:(i=null===(t=n[0])||void 0===t?void 0:t.unit)?function(e,n){var t=Object.entries(e).find(function(e){var t=(0,u._)(e,2);return t[0],t[1]===n});if(t)return e[t[0]]}(_.zj,i):void 0,data:n.map(function(e){return{x:new Date(e.timestamp),y:e.count}})}),f=d.label,h=d.unit,m=d.data;return(0,p.Y)(em,{data:m,start:o,end:a,label:f,unit:h,xAxisLabel:s,yAxisLabel:c})},ev=function(e){var n=e.data,t=e.start,r=e.hours,i=e.colorFn,o=Array(r).fill(0).map(function(e,n){return(0,K.A)(t,n)}),a=n.results.reduce(function(e,n){var t,r=n.timestamp,i=n.value,o=n.count,a=null!==(t=e.get(i))&&void 0!==t?t:new Map;return a.set(r,o),e.set(i,a),e},new Map),l=(0,y._)(a.keys()).map(function(e,n){var t=i(e,n),r=a.get(e);return{label:e,data:o.map(function(e){var n,t=null!==(n=null==r?void 0:r.get(e.toISOString()))&&void 0!==n?n:0;return{x:new Date(e),y:t}}),borderColor:t,backgroundColor:t}});return(0,p.Y)(eo,{labels:o,datasets:l,maintainAspectRatio:!1})};let ew=function(e){var n,t,r,i=e.replId,o=e.title,a=e.metric,l=e.start,c=e.hours,d=e.colorFn,h=(0,u._)((0,f.useState)(void 0),2),m=h[0],g=h[1],v=(n=(0,s._)({},ed,{variables:{id:i,input:{metric:a,start:l,hours:c,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsTimeSeries.__typename){case"TooManyRequestsError":g(Error("Too many requests"));break;case"UserError":case"NotFoundError":g(Error(e.getRepl.analyticsTimeSeries.message))}}}),F.I(eh,n)),w=v.data,y=v.loading,b=v.error,S=(null==w?void 0:null===(t=w.getRepl)||void 0===t?void 0:t.__typename)==="Repl"&&(null===(r=w.getRepl.analyticsTimeSeries)||void 0===r?void 0:r.__typename)==="ReplAnalyticsTimeSeries"?w.getRepl.analyticsTimeSeries:void 0;return b&&g(b),(0,p.FD)(j.S,{gap:8,children:[(0,p.Y)(j.S,{row:!0,align:"center",justify:"space-between",children:(0,p.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:o})}),(0,p.FD)(j.S,{children:[y?(0,p.Y)(j.S,{css:[B.wp.width("100%"),H,B.wp.borderRadius(),W.S.backgroundPulse()]}):null,m?(0,p.Y)(G.N,{text:m.message,colorway:"negative"}):null,S?(0,p.Y)(j.S,{css:H,children:(0,_.P0)(a)?(0,p.Y)(eg,{start:l,end:(0,K.A)(l,c),timeSeriesFragment:S}):(0,p.Y)(ev,{data:S,start:l,hours:c,colorFn:d})}):null]})]})};var ey=t(85014),eb=t.n(ey);function eS(){var e=(0,R._)(["\n  fragment ReplAnalyticsTopListResult on ReplAnalyticsTopList {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return eS=function(){return e},e}function eY(){var e=(0,R._)(["\n  query ReplAnalyticsTopList($id: String!, $input: ReplAnalyticsTopInput!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTopList(input: $input) {\n          ... on ReplAnalyticsTopList {\n            ...ReplAnalyticsTopListResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return eY=function(){return e},e}var eA={},eC=(0,I.J1)(eS()),ex=(0,I.J1)(eY(),eC),ek=t(6680),e_=t(26705),eD=t(98152),eE=t(6113),eR=function(e){var n=e.data,t=e.variant;if(0===n.results.length)return(0,p.Y)(V.EY,{multiline:!1,children:"No results"});switch(t){case"map":return(0,p.Y)(eT,{data:n});case"pie":return(0,p.Y)(eF,{data:n,devices:!1});case"device-pie":return(0,p.Y)(eF,{data:n,devices:!0});case"table":return(0,p.Y)(eI,{data:n})}},eI=function(e){var n=e.data;return E.t1.register(E.Bs),(0,p.Y)(j.S,{children:n.results.map(function(e,n){return(0,p.FD)(j.S,{css:[B.wp.py(8),{borderBottom:"1px solid ".concat(ek.LU.outlineDimmest)},{"&:last-of-type":{borderBottom:"none"}}],row:!0,gap:16,children:[(0,p.Y)(j.S,{css:[B.wp.flex.grow(1),B.wp.maxWidth("90%")],children:(0,p.Y)(V.EY,{title:e.value,multiline:!1,children:e.value})}),(0,p.Y)(j.S,{children:(0,p.Y)(V.EY,{multiline:!1,children:e.count})})]},n)})})},eF=function(e){var n=e.data,t=e.devices,r=(0,M.D)(),i=r.isDarkColorScheme,o=r.values,a=i?B.iB.categorical:B.iB.categorical.reverse(),l=new Map;return t?n.results.forEach(function(e){var n=e.value,t=e.count,r=n.match(/\(.*\)/);if(r&&r.length){var i=r[0].substring(1,r[0].length-1),o=l.get(i)||0;l.set(i,o+t)}else{var a=l.get("Unknown")||0;l.set("Unknown",a+t)}}):n.results.forEach(function(e){var n=e.value,t=e.count,r=n.replace(/ \(.*\)/,""),i=l.get(r)||0;l.set(r,i+t)}),(0,p.Y)(j.S,{css:H,children:(0,p.Y)(D.Fq,{options:{radius:"90%",maintainAspectRatio:!1,plugins:{tooltip:z()}},data:{labels:(0,y._)(l.keys()),datasets:[{borderWidth:+((0,y._)(l.keys()).length>1),borderColor:o.global.outlineDimmest,data:(0,y._)(l.values()),backgroundColor:Array(l.size).fill(0).map(function(e,n){return a[n%a.length]})}]}})})},eT=function(e){var n=e.data,r=eb()(function(){return Promise.all([t.e(1175),t.e(1434),t.e(8679),t.e(2390)]).then(t.bind(t,12390))},{loadableGenerated:{webpack:function(){return[12390]}},ssr:!1}),i=n.results.map(function(e){return{country:e.value,numHits:e.count}});return(0,p.Y)(r,{countries:i})};let eP=function(e){var n,t,r,i=e.replId,o=e.start,a=e.hours,l=e.metric,c=e.count,d=e.variant,h=void 0===d?"table":d,m=e.expandable,g=(0,_.sJ)(l),v=(0,u._)((0,f.useState)(void 0),2),w=v[0],y=v[1],b=(0,u._)((0,f.useState)(!1),2),S=b[0],Y=b[1],A=(n=(0,s._)({},eA,{variables:{id:i,input:{metric:l,start:o,hours:a,deployment:!0,count:S?3*c:c}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsTopList.__typename){case"UserError":case"NotFoundError":y(Error(e.getRepl.analyticsTopList.message))}}}),F.I(ex,n)),C=A.data,x=A.loading,k=A.error;return k&&y(k),(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(j.S,{row:!0,gap:8,children:[(0,p.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"device-pie"===h?"Top Devices":"Top ".concat(g)}),void 0!==m&&m?(0,p.Y)(e_.K0,{alt:S?"Collapse list":"Expand list",onClick:function(){return Y(!S)},children:S?(0,p.Y)(eD.A,{}):(0,p.Y)(eE.A,{})}):null]}),(0,p.FD)(j.S,{children:[x?(0,p.Y)(j.S,{css:[B.wp.height(80),B.wp.borderRadius(),W.S.backgroundPulse()]}):null,w?(0,p.Y)(G.N,{text:w.message,colorway:"negative"}):null,(null==C?void 0:null===(t=C.getRepl)||void 0===t?void 0:t.__typename)==="Repl"&&(null===(r=C.getRepl.analyticsTopList)||void 0===r?void 0:r.__typename)==="ReplAnalyticsTopList"?(0,p.Y)(eR,{variant:h,data:C.getRepl.analyticsTopList}):null]})]})};var eL=t(42545),eU=t(33698),eN=t(61234),eO=t(57667),eM=[{label:"six hours",key:6},{label:"one day",key:24},{label:"five days",key:120},{label:"one week",key:168},{label:"two weeks",key:336},{label:"thirty days",key:720}],eB={label:"one week",key:168},eH=B.kL.min(600),ez=(0,eN.x)({fullWidth:(0,C._)({},eH,{gridColumn:"span 2"})}),eW=(0,eN.x)({container:[B.wp.display.grid,B.wp.gap(32),B.wp.pb(32),(0,C._)({},eH,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"})],fullWidth:ez.fullWidth,map:[ez.fullWidth],pies:[ez.fullWidth,B.wp.flex.column,(0,C._)({gap:32},B.kL.min(480),[B.wp.flex.row,{" > *":{flex:1}}])]}),eG=function(e){var n=e.replId,t=(0,u._)((0,f.useState)(eB),2),r=t[0],i=r.key,o=r.label,a=t[1],l=(0,u._)((0,f.useState)((0,x.A)((0,k.A)(new Date),i-1)),2),s=l[0],c=l[1],d=(0,eU.g)("deployment-analytics-dot"),h=d.isDone,m=d.setAsDone,g=(0,x.A)((0,k.A)(new Date),23),v=(0,M.D)().values,w=[v.global.redStronger,v.global.redDimmer,v.global.redStrongest,v.global.redDimmest],y=[v.global.orangeDefault,v.global.orangeDimmer,v.global.orangeStronger,v.global.orangeDimmest],b=[v.global.blueDefault,v.global.blueDimmer,v.global.blueStronger,v.global.blueDimmest],S=[v.global.greenDefault,v.global.greenDimmer,v.global.greenStronger,v.global.greenDimmest];return(0,f.useEffect)(function(){(0,eL.Ae)({context:Y.P.Analytics})},[]),(0,f.useEffect)(function(){h||m()},[h,m]),(0,p.Y)(A.A,{children:(0,p.FD)(j.S,{css:eW.container,children:[(0,p.Y)(j.S,{css:eW.fullWidth,children:(0,p.Y)(eO.in,{items:eM,label:"Past ".concat(o),onAction:function(e){var n,t="string"==typeof e?parseInt(e,10):e;a(null!==(n=eM.find(function(e){return e.key===t}))&&void 0!==n?n:eB),c((0,x.A)((0,k.A)(new Date),t-1))},children:function(e){return(0,p.Y)(eO.Dr,{label:e.label,id:e.key},e.key)}})}),(0,p.Y)(j.S,{css:eW.fullWidth,children:(0,p.Y)(el,{replId:n,start:s,hours:i})}),(0,p.Y)(eP,{replId:n,metric:_.d0.Url,start:s,hours:i,count:4,expandable:!0}),(0,p.Y)(eP,{replId:n,metric:_.d0.Referrer,start:s,hours:i,count:4,expandable:!0}),(0,p.Y)(ew,{replId:n,title:"HTTP Statuses (24h)",metric:_.YE.Statuses,start:g,hours:24,colorFn:function(e,n){var t=Number(e);return t<300?S[n%S.length]:t<400?b[n%b.length]:t<500?y[n%y.length]:w[n%w.length]}}),(0,p.Y)(q,{replId:n,start:s,hours:i}),(0,p.FD)(j.S,{css:eW.pies,children:[(0,p.Y)(eP,{replId:n,metric:_.d0.Browser,start:s,hours:i,count:100,variant:"pie"}),(0,p.Y)(eP,{replId:n,metric:_.d0.Browser,start:s,hours:i,count:100,variant:"device-pie"})]}),(0,p.Y)(j.S,{css:eW.map,children:(0,p.Y)(eP,{replId:n,metric:_.d0.Country,start:s,hours:i,count:100,variant:"map"})})]})})},eV=t(39969),ej=t(86752);function eZ(){var e=(0,R._)(["\n  query HostingDeploymentConfigRedeploy($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        activityLogs(count: 20) {\n          items {\n            id\n            ...HostingActivityLogLine2\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n        currentBuild {\n          id\n          envVars {\n            name\n            value\n          }\n          suspendedReason\n        }\n        ...DeploymentsDeployOptionsDeployment\n        repl {\n          ...DeploymentsDeployOptionsAuthzRepl\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return eZ=function(){return e},e}var eq={},eK=(0,I.J1)(eZ(),ej.aW,eV.vz,eV.px),e$=t(11646),eJ=t(63892),eQ=t(93682),eX=t(44885),e0=t(47258),e1=t(554),e2=(0,eN.x)({styles0:[B.wp.height(128),B.wp.width(128),B.wp.borderRadius(2),e0.b.nofill],styles1:[B.wp.position.absolute]});function e4(e){var n=e.color;return(0,p.FD)(j.S,{align:"center",gap:4,children:[(0,p.FD)(j.S,{align:"center",justify:"center",children:[(0,p.Y)("svg",{viewBox:"0 0 128 128",css:e2.styles0,target:"_blank",onClick:function(){window.open("/mobile")},children:(0,p.Y)("path",{fill:null!=n?n:ek.LU.foregroundDefault,d:"m0,13.58v13.58h27.15V0H0v13.58ZM34.91,1.94v1.94h-3.88v3.88h3.88v-3.88h7.76v3.88h3.88v-3.88h-3.88V0h-7.76v1.94Zm31.03,0v1.94h-15.52v7.76h-15.52v3.88h7.76v7.76h-3.88v-3.88h-7.76v11.64h-15.52v7.76h-3.88v3.88h-3.88v-3.88H0v3.88h7.76v3.88H0v7.76h3.88v3.88H0v3.88h3.88v3.88H0v3.88h3.88v3.88H0v3.88h3.88v3.88H0v3.88h15.52v3.88h-3.88v7.76h3.88v-3.88h3.88v-3.88h7.76v-3.88h-7.76v-7.76h3.88v3.88h3.88v-3.88h3.88v-3.88h3.88v-19.39h7.76v-3.88h-3.88v-3.88h-3.88v-3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h3.88v-3.88h3.88v-7.76h3.88v3.88h3.88v7.76h-3.88v3.88h11.64v-3.88h3.88v3.88h15.52v3.88h-3.88v3.88h3.88v11.64h11.64v3.88h-11.64v3.88h-3.88v3.88h15.52v7.76h-3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v3.88h3.88v15.52h3.88v15.52h7.76v3.88h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-7.76v-3.88h-3.88v3.88h3.88v3.88h-11.64v-3.88h3.88v-7.76h7.76v-3.88h7.76v-3.88h-3.88v-3.88h-3.88v-3.88h3.88v-11.64h-11.64v3.88h3.88v3.88h-7.76v-3.88h-7.76v-3.88h-7.76v3.88h7.76v7.76h-7.76v-3.88h-15.52v7.76h3.88v-3.88h7.76v3.88h3.88v3.88h-3.88v3.88h-11.64v-3.88h-3.88v-7.76h-3.88v15.52h3.88v3.88h3.88v-3.88h3.88v3.88h3.88v3.88h3.88v3.88h7.76v-3.88h-7.76v-3.88h15.52v-3.88h-3.88v-3.88h7.76v-7.76h11.64v7.76h-7.76v3.88h-3.88v7.76h-3.88v3.88h3.88v3.88h27.15v-7.76h3.88v7.76h7.76v-3.88h3.88v3.88h3.88v-3.88h-3.88v-7.76h3.88v3.88h3.88v-3.88h3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v-11.64h3.88v3.88h3.88v3.88h7.76v-3.88h-3.88v-3.88h-7.76v-7.76h-3.88v-7.76h7.76v7.76h7.76v-3.88h-3.88v-7.76h-7.76v-3.88h-7.76v3.88h-3.88v-11.64h3.88v3.88h7.76v-3.88h-7.76v-3.88h3.88v-7.76h3.88v-3.88h3.88v3.88h3.88v3.88h-3.88v15.52h3.88v-11.64h3.88v-7.76h-3.88v-7.76h3.88v-7.76h-3.88v-11.64h-3.88v11.64h3.88v3.88h-3.88v3.88h-7.76v-3.88h3.88v-3.88h-3.88v-3.88h3.88v-3.88h-3.88v3.88h-3.88v-7.76h-7.76v3.88h3.88v3.88h-11.64v-3.88h3.88v-11.64h-3.88v7.76h-3.88v-11.64h3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v-3.88h7.76V3.88h3.88v3.88h3.88V0h-7.76v3.88h-3.88V0h-3.88v3.88h-7.76V0h-7.76v1.94Zm34.91,11.64v13.58h27.15V0h-27.15v13.58Zm-31.03-5.82v3.88h-7.76v3.88h-3.88v7.76h3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v7.76h-3.88v-7.76h-3.88v7.76h-3.88v3.88h-3.88v-3.88h-11.64v-3.88h11.64v-3.88h3.88v-7.76h3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h3.88v-3.88h-7.76v-3.88h3.88v-3.88h3.88v3.88h3.88v-7.76h7.76v-3.88h3.88v3.88Zm-46.8,5.82v9.45H4.13V4.13h18.89v9.45Zm100.85,0v9.45h-18.89V4.13h18.89v9.45Zm-116.11,0v5.82h11.64V7.76H7.76v5.82Zm73.7-3.88v1.94h-3.88v7.76h-3.88v3.88h3.88v3.88h3.88v-7.76h3.88v7.76h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v-3.88h3.88v-3.88h-3.88v-11.64h3.88v3.88h3.88V7.76h7.76v1.94Zm27.15,3.88v5.82h11.64V7.76h-11.64v5.82Zm-38.79,11.64v1.94h3.88v-3.88h-3.88v1.94Zm-27.15,3.88v1.94h3.88v-3.88h-3.88v1.94Zm46.55,7.76v1.94h-11.64v-3.88h11.64v1.94Zm-62.06,7.76v1.94h-3.88v3.88h11.64v3.88h-11.64v3.88h3.88v3.88h3.88v11.64h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v-3.88h-3.88v-7.76h3.88v-11.64h3.88v3.88h3.88v-7.76h-7.76v-3.88h-3.88v-3.88h3.88v-3.88h15.52v1.94Zm81.45,1.94v3.88h3.88v7.76h-3.88v7.76h-3.88v3.88h-3.88v-3.88h3.88v-11.64h-3.88v-3.88h-3.88v-3.88h-3.88v-3.88h15.52v3.88Zm-96.97,1.94v1.94h3.88v-3.88h-3.88v1.94Zm89.21,0v1.94h3.88v3.88h3.88v-3.88h-3.88v-3.88h-3.88v1.94Zm-81.45,3.88v1.94h3.88v-3.88h-3.88v1.94Zm77.58,3.88v1.94h-3.88v-3.88h3.88v1.94Zm-77.58,9.7v3.88h-7.76v7.76h3.88v-3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h-3.88v-3.88h3.88v-3.88h-7.76v3.88Zm19.39-1.94v1.94h3.88v-3.88h-3.88v1.94Zm0,11.64v1.94h-3.88v7.76h-3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-7.76h-3.88v-3.88h3.88v-3.88h-3.88v1.94Zm58.18,7.76v1.94h3.88v-3.88h3.88v11.64h-7.76v-3.88h-3.88v-7.76h3.88v1.94Zm15.52,0v1.94h-3.88v-3.88h3.88v1.94ZM0,95.03v1.94h7.76v-3.88H0v1.94Zm23.27,0v1.94h3.88v-3.88h-3.88v1.94Zm46.55,0v1.94h-3.88v-3.88h3.88v1.94Zm38.79,7.76v5.82h-11.64v-11.64h11.64v5.82ZM0,114.42v13.58h27.15v-27.15H0v13.58Zm65.94-11.64v1.94h-3.88v-3.88h3.88v1.94Zm34.91,0v1.94h3.88v-3.88h-3.88v1.94Zm-42.67,3.88v1.94h-3.88v3.88h-3.88v-3.88h3.88v-3.88h3.88v1.94Zm-35.16,7.76v9.45H4.13v-18.89h18.89v9.45Zm-15.26,0v5.82h11.64v-11.64H7.76v5.82Zm100.85,3.88v1.94h-3.88v-3.88h3.88v1.94Zm-69.82,3.88v1.94h-3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h-3.88v-3.88h-3.88v1.94Zm54.3,0v1.94h-3.88v-3.88h3.88v1.94Zm31.03,3.88v1.94h3.88v-3.88h-3.88v1.94Z"})}),(0,p.Y)(e1.A,{size:32,css:e2.styles1,color:n})]}),(0,p.Y)(V.EY,{variant:"small",color:"dimmer",children:"Scan to install"})]})}var e5=t(28365),e8=t(13742),e3=(0,eN.x)({row:[B.wp.pb(12),B.wp.rowWithGap(2),B.wp.justify.center],buttonLeft:[B.wp.borderRadius(8,0,0,8),B.wp.flex.growAndShrink(1)],buttonRight:[B.wp.borderRadius(0,8,8,0)]});function e6(e){var n=e.shouldShow,t=e.onDismissTour,r=(0,u._)((0,f.useState)(!1),2),i=r[0],o=r[1];return(0,p.FD)(p.FK,{children:[n?(0,p.FD)(j.S,{css:e3.row,children:[(0,p.Y)(eQ.$n,{iconLeft:(0,p.Y)(e8.A,{}),onClick:function(){(0,eJ.u4)(e$.AZ.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),o(!0)},text:"Deploy with the Replit App!",css:e3.buttonLeft}),(0,p.Y)(eQ.$n,{css:e3.buttonRight,text:"",iconLeft:(0,p.Y)(e5.A,{}),onClick:t})]}):null,(0,p.Y)(eX.a,{isOpen:i,onRequestClose:function(){o(!1),t()},children:(0,p.Y)(e4,{})})]})}var e7=t(96354),e9=t(53677),ne=t(50172),nn=t(84271),nt=t(9853),nr=t(69543),ni=t(68686),no=t(99054),na=t(32633),nl=(0,eN.x)({self:B.wp.colWithGap(8),ctaGroup:{flexDirection:"row",gap:8,flexWrap:"wrap"},deployOptions:[B.wp.p(16),B.wp.pt(12),B.wp.borderRadius(8),B.wp.border({color:ek.LU.outlineDimmest})]}),ns=function(e){var n,t,r,i,o,a,l,c,d,h,m,y,S,Y,A,C,x,k,_=e.deploymentId,D=e.replId,E=e.dotReplit,R=e.fs,I=e.ports,T=e.secrets,P=e.onError,L=e.expanded,U=e.setExpanded,N=e.shouldShowMobileTour,O=e.onDismissMobileTour,M=e.openNetworkingPane,B=e.onResume,H=e.hasAgentSession,z=(0,g.Tp)().redeployWithNoNewOptions,W=(0,g.uS)(),V=(i=(n={deploymentId:_,dotReplit:E}).deploymentId,o=n.dotReplit,l=(a=(0,u._)((0,f.useState)(null),2))[0],c=a[1],(0,f.useEffect)(function(){var e=!1;function n(){return(n=(0,w._)(function(){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,(0,e7.XE)(o)];case 1:if(n=t.sent(),e)return[2];return c(n),[2]}})})).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){e=!0}},[o]),m=(d=(0,s._)({},eq,{variables:{id:i},ssr:!1,fetchPolicy:"cache-and-network"}),h=F.I(eK,d)).data,y=h.loading,S=h.error,Y=(null==m?void 0:null===(t=m.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"?m.hostingDeployment:null,(null==m?void 0:null===(r=m.hostingDeployment)||void 0===r?void 0:r.__typename)==="NotFoundError"?{deployment:null,config:null,error:"Deployment not found",loading:!1}:null===l||!Y&&y?{data:null,erorr:null,loading:!0}:S||!Y?{deployment:null,config:null,error:"Something went wrong",loading:!1}:{deployment:Y,config:l,error:null,loading:!1}),Z=(0,g.mj)().deployability,q=null===(A=V.deployment)||void 0===A?void 0:A.currentBuild,K=(0,e9.g)({secrets:T,replId:D}).devSecrets,$=null===(C=V.deployment)||void 0===C?void 0:C.currentBuild.envVars,J=null===(x=V.deployment)||void 0===x?void 0:x.repl.authorizations.editSecrets.isAuthorized,Q=null===(k=V.deployment)||void 0===k?void 0:k.repl.authorizations.editDeploymentSecrets.isAuthorized,X=(0,f.useMemo)(function(){return K&&$&&J&&Q?(0,ni.j)({secrets:new Map(null==$?void 0:$.map(function(e){return[e.name,e.value]})),otherSecrets:K}).missing.size:0},[K,$,J,Q]);if(V.error)return(0,p.Y)(ne.Wx,{text:V.error});if(L)return q?(0,p.Y)(j.S,{css:nl.deployOptions,children:(0,p.Y)(nn.S,{initialSubdomain:"",provider:q.provider,deploymentId:_,replId:D,fs:R,secrets:T,dotReplit:E,ports:I,onCancel:function(){return U(!1)},onDeploy:function(){return U(!1)},onError:P,initialSecretsSyncExpanded:X>0,openNetworkingPane:M,hasAgentSession:H})}):(0,p.Y)(G.N,{colorway:"warning",icon:(0,p.Y)(na.A,{}),text:"Provider not found"});var ee=V.loading||!Z.redeploy.isAuthorized||W!==v.d.Ready&&W!==v.d.Suspended;return(0,p.FD)(j.S,{css:nl.self,children:[(0,p.Y)(nt.Y,{deployability:Z,isRedeploy:!0}),(0,p.FD)(j.S,{css:nl.ctaGroup,children:[(0,p.Y)(eQ.$n,{disabled:ee,onClick:(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(V.loading)return[2];if(W===v.d.Suspended)return B(),[2];return[4,z({hasAgentSession:H})];case 1:return e.sent(),[2]}})}),text:W===v.d.Suspended?"Resume":"Redeploy",iconLeft:(0,p.Y)(no.A,{})}),(0,p.Y)(eQ.$n,{disabled:ee,text:X>0?"".concat(X," ").concat((0,nr.A)("secrets",X)," out of sync"):"Edit commands and secrets",iconLeft:X>0?(0,p.Y)(na.A,{}):void 0,onClick:function(){return U(!0)}}),(0,p.Y)(e6,{shouldShow:N,onDismissTour:O})]})]})},nc=(0,eN.x)({line:{width:1,position:"absolute",left:3},circlePast:{position:"absolute",top:10,left:1,width:5,height:5,borderRadius:"100%",opacity:.5}}),nu=(0,eN.x)({container:{width:7,position:"relative"},linePast:[nc.line,{backgroundColor:ek.LU.outlineDimmest,top:15,bottom:-10}],linePresent:[nc.line,{backgroundImage:"linear-gradient(to top, ".concat(ek.LU.outlineDimmest,", ").concat(ek.LU.outlineDimmer,")"),top:27,bottom:-10}],lineFuture:[nc.line,{borderRight:"1px dashed "+ek.LU.outlineDimmer,top:23,bottom:-20}],lineFutureFailClosed:[nc.line,{backgroundColor:ek.LU.outlineDimmest,top:19,bottom:-20}],lineFutureFailOpen:[nc.line,{borderRight:"1px dashed "+ek.LU.outlineDimmer,top:22,bottom:-18}],circlePastGreen:[nc.circlePast,B.wp.backgroundColor.accentPositiveDefault],circlePastRed:[nc.circlePast,B.wp.backgroundColor.accentNegativeDefault],circlePastGray:[nc.circlePast,B.wp.backgroundColor.outlineDimmer],circlePresent:[B.wp.backgroundColor.accentPrimaryStronger,{position:"absolute",top:20,left:0,width:7,height:7,borderRadius:"100%"}],circleFuture:{position:"absolute",top:12,left:-1,width:9,height:9},circleFutureFailClosed:[B.wp.backgroundColor.accentNegativeDefault,{position:"absolute",top:14,left:1,width:5,height:5,borderRadius:"100%",opacity:.6}]});function nd(e){var n,t;switch(e.type){case"pastSuccess":n=nu.linePast,t=(0,p.Y)(j.S,{css:nu.circlePastGreen});break;case"pastFail":n=nu.linePast,t=(0,p.Y)(j.S,{css:nu.circlePastRed});break;case"pastNeutral":n=nu.linePast,t=(0,p.Y)(j.S,{css:nu.circlePastGray});break;case"present":n=nu.linePresent,t=(0,p.Y)(j.S,{css:nu.circlePresent});break;case"future":n=nu.lineFuture,t=(0,p.Y)("svg",{viewBox:"0 0 9 9",css:nu.circleFuture,children:(0,p.Y)("circle",{cx:4.5,cy:4.5,r:4,fill:"none",stroke:ek.LU.outlineStrongest,strokeDasharray:"2 1"})});break;case"futureFailClosed":n=nu.lineFutureFailClosed,t=(0,p.Y)(j.S,{css:nu.circleFutureFailClosed});break;case"futureFailOpen":n=nu.lineFutureFailOpen,t=null}return(0,p.FD)(j.S,{css:nu.container,children:[(0,p.Y)(j.S,{css:n,"data-timeline-line":!0}),t]})}var np=t(97841),nf=t(39256);function nh(){var e=(0,R._)(["\n  query HostingDeployActionHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return nh=function(){return e},e}var nm={},ng=(0,I.J1)(nh()),nv=t(51026),nw=t(40085),ny=t(50175);function nb(){var e=(0,R._)(["\n  fragment HostingDeploymentDomainsDomain on HostingDeploymentDomain {\n    id\n    status\n    state\n    domain\n  }\n"]);return nb=function(){return e},e}function nS(){var e=(0,R._)(["\n  fragment HostingDeploymentDomainsHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n    }\n    repl {\n      id\n      apexProxy\n    }\n    domains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n  }\n  ","\n"]);return nS=function(){return e},e}function nY(){var e=(0,R._)(["\n  query HostingDeploymentDomains($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return nY=function(){return e},e}function nA(){var e=(0,R._)(["\n  mutation LinkHostingDeploymentDomain(\n    $input: LinkHostingDeploymentDomainInput!\n  ) {\n    linkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          ...HostingDeploymentDomainsDomain\n        }\n      }\n    }\n  }\n  ","\n"]);return nA=function(){return e},e}var nC={},nx=(0,I.J1)(nb()),nk=(0,I.J1)(nS(),nx),n_=(0,I.J1)(nY(),nk),nD=(0,I.J1)(nA(),nx);function nE(){var e=(0,R._)(["\n  fragment DeploymentSettingsAuthorizations on ReplAuthorizations {\n    addCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteDeployment {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentStatus(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentTier(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return nE=function(){return e},e}function nR(){var e=(0,R._)(["\n  query HostingDeploymentSettings($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n        currentBuild {\n          id\n          provider\n          suspendedReason\n          machineConfiguration {\n            ...MachineConfiguration\n          }\n          machineJob {\n            ... on HostingBuildMachineJob {\n              failureNotifications\n            }\n          }\n          envVars {\n            name\n            value\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return nR=function(){return e},e}function nI(){var e=(0,R._)(["\n  query HostingDeploymentSettingsAuthz(\n    $replId: String!\n    $provider: HostingBuildProvider!\n  ) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        authorizations {\n          ...DeploymentSettingsAuthorizations\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return nI=function(){return e},e}var nF={},nT=(0,I.J1)(nE()),nP=(0,I.J1)(nR(),nk,nw.yH),nL=(0,I.J1)(nI(),nT),nU=t(18063),nN=t(6761),nO=t(60147),nM=t(56185),nB=function(e){var n=e.stage,t=e.activeStage;return n===e.erroredStage?(0,p.Y)(na.A,{alt:"error"}):n<t?(0,p.Y)(nN.A,{alt:"success"}):n===t?(0,p.Y)(nM.A,{alt:"current"}):(0,p.Y)(nO.A,{alt:"waiting"})},nH=function(e){var n=e.stage,t=e.activeStage,r=e.erroredStage;return void 0===t?null:n===r?"negative":n<t?"positive":n===t?"primary":null},nz=function(e){var n,t=e.stage,r=e.totalStagesWithTitle,i=e.activeStage,o=e.text,a=e.erroredStage,l=void 0!==i;return(0,p.Y)(f.Fragment,{children:(0,p.Y)(nU.a,{text:l?o:"",colorway:null!==(n=nH({stage:t,activeStage:i,erroredStage:a}))&&void 0!==n?n:void 0,variant:"filled",css:[l&&i<=t&&!a?W.S.foregroundPulse():{},B.wp.border({color:ek.LU.backgroundDefault}),B.wp.overflow("hidden"),(0,C._)({position:"relative",flex:1,height:26,zIndex:r-t,":first-of-type":{paddingLeft:6,paddingRight:6},":not(:first-of-type)":{paddingLeft:24},":not(:last-of-type)":{marginRight:-24}," span":B.wp.display.none},B.kL.min(400),{" span":B.wp.display.flex,":first-of-type":{paddingLeft:16,paddingRight:0}})],iconRight:l?(0,p.Y)(nB,{stage:t,activeStage:i,erroredStage:a}):void 0})},l&&i<=t&&!a?1:0)},nW=t(15278),nG=t(17602),nV=t(72004),nj=t(26496),nZ=t(68209),nq=h.ZU.Object({description:h.ZU.String(),name:h.ZU.Optional(h.ZU.String()),type:h.ZU.Optional(h.ZU.String()),before:h.ZU.Optional(h.ZU.String()),after:h.ZU.Optional(h.ZU.String()),file:h.ZU.Optional(h.ZU.Union([h.ZU.String(),h.ZU.Null()])),File:h.ZU.Optional(h.ZU.Object({$kind:h.ZU.String(),file:h.ZU.String()}))}),nK=h.ZU.Object({errors:nV.wIV.properties.errors,suggestions:h.ZU.Array(nq)}),n$={direction:"forward",state:{result:void 0,completed:!1},reducer:function(e,n){if((0,nV.VFn)(e.contents.contents,"hostingDebugSummaryEventContents")&&e.state===nV.qOk.COMPLETE&&e.sender.type===nV.utd.AI){var t=(0,nV.QNh)(e.contents.contents).result;if(m.WT.Check(nK,t))return n.result=t,n.completed=e.state===nV.qOk.COMPLETE,!1}}},nJ=t(18960),nQ=t(16907),nX=t(48568),n0=t(16836),n1=t(17367),n2=(0,eN.x)({link:{color:ek.LU.foregroundDefault,textDecoration:"underline",":hover":{color:ek.LU.accentPrimaryStronger}},list:[{listStyle:"inside"}]});function n4(e){var n=e.provider,t=e.onViewApplicationLogs,r=(0,g.O6)();return(0,p.FD)(p.FK,{children:["Common issues for promote stage errors can be an error occurring while trying to run your run command, your application exiting unexpectedly, an error on your app server or a provisioning issue.",(0,p.Y)("br",{}),(0,p.Y)("br",{}),"Ways to debug:",(0,p.FD)("ul",{css:n2.list,children:[r?(0,p.Y)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,p.Y)("li",{children:"Make sure your repl runs in the Workspace."}),(0,p.FD)("li",{children:["View our"," ",(0,p.Y)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",target:"_blank",css:n2.link,onClick:function(){return(0,eL.Ae)({context:"troubleshooting_doc"})},children:"troubleshooting tips."})]}),n!==S.Q0.Static&&t?(0,p.FD)("li",{children:["Look for errors in your application's server logs.",(0,p.Y)(eQ.$n,{text:"Logs",size:"small",iconLeft:(0,p.Y)(n1.A,{}),onClick:t,css:B.wp.display.inlineFlex})," "]}):null,(0,p.Y)("li",{children:"Look for errors in your deploy logs."})]})]})}function n5(){var e=(0,g.O6)();return(0,p.FD)(p.FK,{children:["Common issues for build stage errors can be an error occurring while trying to run your build command or an compilation issue with your application code.",(0,p.Y)("br",{}),(0,p.Y)("br",{}),"Ways to debug:",(0,p.FD)("ul",{css:n2.list,children:[e?(0,p.Y)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,p.Y)("li",{children:"Make sure your repl runs in the Workspace."}),(0,p.FD)("li",{children:["View our"," ",(0,p.Y)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",target:"_blank",css:n2.link,onClick:function(){return(0,eL.Ae)({context:"troubleshooting_doc"})},children:"troubleshooting tips."})]}),(0,p.Y)("li",{children:"Look for errors in your deploy logs."})]})]})}var n8=t(67549),n3=t(2527),n6=t(54572),n7=t(54239),n9=t(62451),te=t(49019),tn=[B.wp.cursor.pointer,B.wp.reset.button,B.wp.color.foregroundDimmest,B.wp.focusRing,B.wp.hover(B.wp.color.foregroundDefault),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],tt=(0,eN.x)({errorsSection:[B.wp.p(8),B.wp.colorMixBg(ek.LU.accentNegativeDimmest,"transparent",.3),B.wp.color.accentNegativeStrongest],errorsSectionTitleText:[B.wp.color.foregroundDefault],errorsList:[B.wp.display.flex,B.wp.colWithGap(4),B.wp.pt(6),B.wp.pl(24),{listStyleType:"disc"}],suggestionsSectionAssistant:[B.wp.colorMixBg(ek.LU.tealDimmest,"transparent",.15),B.wp.border({direction:"top",color:ek.LU.outlineDimmer})],aiSuggestions:[B.wp.p(8),B.wp.colWithGap(8)],aiSuggestionsTitle:[B.wp.color.blurpleStrongest,B.wp.align.center],aiSuggestionsList:B.wp.pl(24),textButton:[tn]});function tr(e){var n,t,r,i,o,a,l,s,c,d,h,m,v,y,S,Y,A=e.title,C=e.debugSummary,x=e.view,k=e.provider,_=e.onViewBuildLogs,D=e.viewingBuildLogs,E=e.viewBuildLogsIcon,R=e.openFile,I=e.openDebugChat,F=(0,nQ.A)(),T=(0,g.i$)(),P=(0,nj.NC)(),L=(0,f.useCallback)(function(e){(0,nJ.Q)({error:e,context:"useHostingDebugSummary",extras:{replId:F,deploymentId:T,debugSummary:C,view:x,provider:k}})},[C,T,k,F,x]),U=(n=C.sessionId,t=(0,nj.NC)(),i=(r=(0,u._)((0,f.useState)(),2))[0],o=r[1],l=(a=(0,u._)((0,f.useState)(!0),2))[0],s=a[1],d=(c=(0,u._)((0,f.useState)(!1),2))[0],h=c[1],m=(0,f.useRef)(null),v=(0,f.useCallback)(function(e){s(!1),L(e),h(!0)},[L]),y=(0,nZ.J2)(n?t.sessions.get(n):null),S=(0,f.useMemo)(function(){return null==y?void 0:y.reduce(n$,"global").result},[y]),(0,nZ.q3)(S,{next:function(e){e.result&&e.completed&&(o(e.result),m.current&&(clearTimeout(m.current),m.current=null),s(!1))},error:function(e){v(e instanceof Error?e:Error(String(e)))}}),(0,f.useEffect)(function(){if(l&&y)return m.current=setTimeout(function(){v(Error("Debug summary event timed out while loading."))},3e4),function(){m.current&&(clearTimeout(m.current),m.current=null)}},[l,y,v]),{loading:l,error:d,debugResult:i}),N=U.loading,O=U.debugResult,M=U.error,B=(0,g.om)().listFiles,H=(0,u._)((0,f.useState)([]),2),z=H[0],W=H[1],G=(0,nj.dm)(),V=G.assistantMode,j=G.getAssistantMessageModel,Z=G.getAssistantMessageIntent,q=(0,n0.T)({mode:V,authz:(0,nX.L)().authorizations}),K=(Y=(0,w._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:return[4,P.sessions.get(C.sessionId).once()];case 1:return[4,(e=n.sent()).updateSession({sessionType:nV.dF3.CHAT})];case 2:return n.sent(),[4,e.appendEvent({kind:"message",message:"Can you help me with this deployment issue?",modelType:j(q),intent:Z()})];case 3:return n.sent(),I(C.sessionId),[2]}})}),function(){return Y.apply(this,arguments)}),$=(0,f.useRef)(!1);return(0,f.useEffect)(function(){T&&O&&!$.current&&($.current=!0,(0,eL.QH)("viewed",{view:x,debugSummary:C,debugResult:O,replId:F,deploymentId:T}),O.suggestions.some(function(e){return!!to(e)})&&B().then(function(e){e.files&&W(e.files)}))},[O,x,C,F,T,B]),(0,p.Y)(ti,{title:A,debugSummary:C,debugResult:O,provider:k,viewingBuildLogs:D,viewBuildLogsIcon:E,loading:N,files:z,error:M,onViewBuildLogs:_,openFile:R,onDebugWithAssistant:K})}function ti(e){var n=e.title,t=e.debugSummary,r=e.debugResult,i=e.provider,o=e.viewingBuildLogs,a=e.viewBuildLogsIcon,l=e.loading,s=e.files,c=e.error,u=e.onViewBuildLogs,d=e.openFile,f=e.onDebugWithAssistant;return(0,p.FD)(n3.ui,{elevated:!0,children:[(0,p.FD)(j.S,{css:tt.errorsSection,gap:4,children:[(0,p.FD)(j.S,{row:!0,gap:12,align:"center",justify:"space-between",children:[(0,p.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(na.A,{color:ek.LU.accentNegativeStronger}),(0,p.Y)(V.EY,{css:tt.errorsSectionTitleText,multiline:!1,children:n})]}),(0,p.Y)(j.S,{row:!0,gap:0,children:"function"==typeof u?(0,p.Y)(j.S,{children:(0,p.FD)("button",{css:tt.textButton,onClick:u,children:[o?"Hide":"View"," logs"," ",(0,p.Y)(ta,{viewingBuildLogs:o,viewBuildLogsIcon:a})]})}):null})]}),(0,p.FD)(V.EY,{children:[l?(0,p.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,p.Y)(nM.A,{}),(0,p.Y)(V.EY,{children:"Analyzing error, generating suggestions..."})]}):(0,p.Y)(p.FK,{children:r?(0,p.FD)(p.FK,{children:[(0,p.Y)(V.EY,{children:"Your deployment attempt had the following errors:"}),(0,p.Y)("ul",{css:tt.errorsList,children:r.errors.map(function(e){return(0,p.Y)("li",{children:e},e)})})]}):null}),c?(0,p.FD)(p.FK,{children:[(0,p.FD)(V.EY,{children:["An error occurred while loading AI generated suggestions. Please try deploying again or follow the common debugging steps."," "]}),t.type===S.Uf.DeploymentBuildError?(0,p.Y)(n5,{}):null,t.type===S.Uf.DeploymentPromotionError?(0,p.Y)(n4,{provider:i}):null]}):null]})]}),!l&&r?(0,p.Y)(j.S,{css:tt.suggestionsSectionAssistant,children:(0,p.FD)(j.S,{css:tt.aiSuggestions,children:[(0,p.FD)(j.S,{css:tt.aiSuggestionsTitle,row:!0,gap:8,children:[(0,p.Y)(n9.A,{}),(0,p.Y)(V.EY,{multiline:!1,style:{flex:"1 1 auto",color:ek.LU.tealStrongest},children:"Assistant suggestions"}),(0,p.Y)(eQ.$n,{size:"small",iconLeft:(0,p.Y)(te.A,{}),colorway:"teal",text:"Debug with ".concat(nj.BP),onClick:f})]}),(0,p.Y)("ol",{css:tt.aiSuggestionsList,children:r.suggestions.map(function(e,n){return(0,p.Y)(ts,{suggestion:e,files:s,openFile:d},"".concat(t.id,"-").concat(n))})})]})}):null]})}function to(e){var n,t,r,i;return"File"in e&&(null===(n=e.File)||void 0===n?void 0:n.file)!=="null"&&(null===(t=e.File)||void 0===t?void 0:t.file)!==""?(null===(r=e.File)||void 0===r?void 0:r.file.replace("./",""))||void 0:"file"in e&&"null"!==e.file&&""!==e.file&&(null===(i=e.file)||void 0===i?void 0:i.replace("./",""))||void 0}function ta(e){var n=e.viewingBuildLogs,t=e.viewBuildLogsIcon;return t||(n?(0,p.Y)(n7.A,{}):(0,p.Y)(n6.A,{}))}var tl=(0,eN.x)({self:{"[data-accordion-header]":[B.wp.align.start,B.wp.flex.growAndShrink(1),B.wp.rowWithGap(4)]},headerInner:[B.wp.flex.growAndShrink(1),B.wp.align.baseline,B.wp.rowWithGap(4)],description:[B.wp.textAlign.left,B.wp.color.foregroundDimmer,B.wp.rowWithGap(8),B.wp.flex.growAndShrink(1),B.wp.justify.spaceBetween],interactiveDescription:[tn,B.wp.textAlign.left,B.wp.color.foregroundDimmer,B.wp.rowWithGap(8),B.wp.flex.growAndShrink(1),B.wp.justify.spaceBetween],body:[B.wp.border(),B.wp.borderRadius(),B.wp.mt(4),B.wp.mb(8),B.wp.overflow("hidden"),B.wp.font.code,B.wp.fontSize("small"),{lineHeight:ek.LU.lineHeightSmall}],before:[B.wp.color.accentNegativeStrongest,B.wp.colorMixBg(ek.LU.accentNegativeDimmest,"transparent",.3),B.wp.px(6),B.wp.py(2)],after:[B.wp.color.accentPositiveStrongest,B.wp.colorMixBg(ek.LU.accentPositiveDimmest,"transparent",.3),B.wp.px(6)],fileLinkButton:[tn,B.wp.fontSize("small")]});function ts(e){var n=e.suggestion,t=e.files,r=e.openFile,i=(0,f.useRef)(to(n)),o=(0,u._)((0,f.useState)(),2),a=o[0],l=o[1];(0,f.useEffect)(function(){if(i.current&&!a){var e=!0,n=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(e=(o=s.next()).done);e=!0)if(o.value===i.current){l(i.current);return}}catch(e){n=!0,r=e}finally{try{e||null==s.return||s.return()}finally{if(n)throw r}}}},[t,a]);var s=(null==n?void 0:n.after)&&(null==n?void 0:n.after)!=="",c=(null==n?void 0:n.before)&&(null==n?void 0:n.before)!=="";return s||c?(0,p.Y)("li",{css:tl.self,children:(0,p.Y)(n8.A,{toggleOn:"chevron",chevron:"none",headerContent:function(e){var t=e.isExpanded,i=e.toggle;return(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{css:tl.headerInner,children:[(0,p.FD)("button",{css:tl.interactiveDescription,onClick:i,children:[(0,p.Y)(V.EY,{maxLines:t?void 0:1,style:{color:"inherit"},children:n.description})," "]}),a?(0,p.Y)("button",{css:tl.fileLinkButton,onClick:function(e){e.stopPropagation(),r({path:a})},children:a}):null]}),(0,p.Y)(e_.K0,{alt:"Show suggestion",onClick:i,children:t?(0,p.Y)(n7.A,{}):(0,p.Y)(n6.A,{})})]})},headerProps:{"data-accordion-header":""},children:(0,p.FD)(j.S,{css:tl.body,children:[c?(0,p.Y)(j.S,{css:tl.before,children:(0,p.Y)("pre",{children:n.before})}):null,s?(0,p.Y)(j.S,{css:tl.after,children:(0,p.Y)("pre",{children:n.after})}):null]})})}):(0,p.Y)("li",{css:tl.self,children:(0,p.FD)(j.S,{css:tl.headerInner,children:[(0,p.FD)(j.S,{css:tl.description,children:[(0,p.Y)(V.EY,{style:{color:"inherit"},children:n.description})," "]}),a?(0,p.Y)("button",{css:tl.fileLinkButton,onClick:function(e){e.stopPropagation(),r({path:a})},children:a}):null]})})}function tc(e){var n=e.currentStatus,t=e.provider,r=e.logs,i=e.viewBuildLogs,o=e.debugSummary,a=e.openFile,l=e.openDebugChat,s=e.onViewBuildLogs,c=e.onViewApplicationLogs;if((0,g.mj)().hasDebugSummariesAuthorization&&o){var u=n===S.nH.Building?"Build failed":"Promotion failed";return(0,p.Y)(tr,{title:u,debugSummary:o,view:Y.P.DeploymentInProgress,provider:t,openFile:a,openDebugChat:l})}return n===S.nH.Building?(0,p.Y)(tg,{provider:t,logs:r,openFile:a,viewBuildLogs:i,onViewBuildLogs:s}):n===S.nH.Promoting?(0,p.Y)(tm,{provider:t,logs:r,openFile:a,viewBuildLogs:i,onViewBuildLogs:s,onViewApplicationLogs:c}):null}function tu(e){var n=e.currentStatus,t=e.provider,r=e.debugSummary,i=e.openFile,o=e.openDebugChat,a=e.onViewApplicationLogs;return(0,g.mj)().hasDebugSummariesAuthorization&&r?(0,p.Y)(tr,{title:"Deployment failed",debugSummary:r,view:"deploy_history_logs",provider:t,openFile:i,openDebugChat:o}):n===S.nH.Building?(0,p.Y)(tg,{provider:t,openFile:i}):n===S.nH.Promoting?(0,p.Y)(tm,{provider:t,openFile:i,onViewApplicationLogs:a}):null}var td=(0,eN.x)({self:[B.wp.borderRadius(4),B.wp.overflow("hidden"),B.wp.border({color:ek.LU.outlineDimmer}),B.wp.mb(6)]});function tp(e){var n=e.title,t=e.debugSummary,r=e.provider,i=e.openFile,o=e.openDebugChat,a=e.onViewBuildLogs;return(0,p.Y)(j.S,{css:td.self,children:(0,p.Y)(tr,{title:n,debugSummary:t,view:Y.P.Deployment,provider:r,onViewBuildLogs:a,viewBuildLogsIcon:(0,p.Y)(n1.A,{}),openFile:i,openDebugChat:o})})}var tf=(0,eN.x)({errorContainer:[B.wp.p(12),B.wp.colWithGap(12)],xtermContainer:[B.wp.display.flex,B.wp.pt(12),B.wp.pl(16),B.wp.overflow("hidden"),B.wp.borderRadius(4,4,0,0)],xterm:[B.wp.width("100%"),B.wp.maxWidth("100%"),B.wp.height(200)],xtermButton:B.wp.borderRadius(0,0,4,4)});function th(e){var n=e.title,t=e.description,r=e.logs,i=e.viewBuildLogs,o=e.onViewBuildLogs,a=e.openFile,l=(0,nG.V)(),s=(0,g.om)(),c=(0,u._)((0,nW.A)({openFile:a,listFiles:s.listFiles}),2),d=c[0],h=c[1],m=(0,f.useRef)(r?r.slice(-5):[]);return(0,f.useEffect)(function(){m.current.length&&m.current.forEach(function(e){null==d||d.write(e)})},[d]),(0,p.FD)(n3.ui,{elevated:!0,css:tf.errorContainer,children:[(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(na.A,{color:ek.LU.accentNegativeStronger}),(0,p.Y)(V.EY,{multiline:!1,children:n})]}),(0,p.Y)(V.EY,{children:t})]}),void 0===i||i?null:(0,p.FD)(j.S,{children:[(0,p.Y)(j.S,{css:tf.xtermContainer,style:{backgroundColor:null==l?void 0:l.background},children:(0,p.Y)(j.D.div,{css:tf.xterm,ref:h})}),(0,p.Y)(eQ.$n,{text:"View all",iconLeft:(0,p.Y)(eE.A,{}),onClick:function(){return null==o?void 0:o()},css:tf.xtermButton})]})]})}function tm(e){return(0,p.Y)(th,(0,s._)({title:"Your app failed to promote",description:(0,p.Y)(n4,{provider:e.provider,onViewApplicationLogs:e.onViewApplicationLogs})},e))}function tg(e){return(0,p.Y)(th,(0,s._)({title:"Your app failed to build",description:(0,p.Y)(n5,{})},e))}function tv(e){return(0,p.Y)(th,(0,s._)({title:"This build's deploy logs have expired",description:(0,p.Y)(p.FK,{children:"No information was found for this build. Deploy logs expire after 30 days."})},e))}var tw=t(74863),ty=t(37407),tb=[{id:0,title:"Provision",statusType:S.nH.Pending},{id:1,title:"Build",statusType:S.nH.Building},{id:2,title:"Bundle",statusType:S.nH.Running},{id:3,title:"Promote",statusType:S.nH.Promoting},{id:4,statusType:S.nH.Success}],tS=tb.filter(function(e){return"title"in e}),tY=function(e){return tb.find(function(n){return n.statusType===e})},tA=(0,eN.x)({base:{borderRadius:ek.LU.borderRadiusDefault,paddingLeft:6,paddingRight:6,height:24}}),tC=[B.wp.borderRadius(),{border:"1px solid ".concat(ek.LU.outlineDimmest)}],tx=(0,eN.x)({container:tC,top:[B.wp.p(16),B.wp.pt(12)],header:[B.wp.width("100%")],headerLeft:[B.wp.align.baseline,B.wp.flex.shrink(1)],started:[B.wp.rowWithGap(6),B.wp.flex.growAndShrink(1),B.wp.justify.end,B.wp.color.foregroundDimmest],cancel:[tA.base,{'&[data-cancelable="true"]':{opacity:1,width:"auto"},'&[data-cancelable="false"]':{opacity:0,width:0}}],stages:[B.wp.flex.grow(1),{zIndex:0}],bottom:[B.wp.borderRadius(0,0,4,4),B.wp.overflow("hidden")],logsOpen:[B.wp.overflow("hidden"),B.wp.height("auto")],logsClosed:[B.wp.overflow("hidden"),B.wp.height(0)],xtermContainer:[B.wp.display.flex,B.wp.pt(12),B.wp.pl(16),B.wp.overflow("hidden")],xterm:[B.wp.width("100%"),B.wp.maxWidth("100%"),B.wp.height(340)],textButton:[B.wp.cursor.pointer,B.wp.reset.button,B.wp.color.foregroundDimmest,B.wp.focusRing,B.wp.hover(B.wp.color.foregroundDefault),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}]}),tk=function(e){var n,t,r,i,o=(r={variables:{replId:(0,nQ.A)(),provider:null!==(n=e.provider)&&void 0!==n?n:S.Q0.CloudRun},skip:!e.provider},i=(0,s._)({},nF,r),F.I(nL,i)).data,a=(null==o?void 0:o.getRepl.__typename)==="Repl"?o.getRepl.authorizations.editDeploymentStatus:void 0,l=null!==(t=null==a?void 0:a.isAuthorized)&&void 0!==t&&t;return(0,p.FD)(j.S,{css:tx.top,gap:12,children:[(0,p.FD)(j.S,{css:tx.header,row:!0,gap:8,justify:"space-between",children:[(0,p.FD)(j.S,{css:tx.headerLeft,row:!0,gap:8,children:[(0,p.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Deploying"}),e.timeStarted&&e.userDisplayName?(0,p.FD)(V.EY,{css:tx.started,multiline:!1,maxLines:1,children:["Started ".concat((0,nf.A)(new Date(e.timeStarted),Date.now(),{addSuffix:!0})," by "),(0,p.Y)("span",{children:e.userDisplayName})]}):null,(0,p.Y)(ty.m_,{isDisabled:l,tooltip:null==a?void 0:a.message,children:(0,p.Y)(eQ.$n,{size:"small",text:"Cancel",css:tx.cancel,onClick:e.onCancel,iconRight:e.isCanceling?(0,p.Y)(nM.A,{}):void 0,disabled:e.isCanceling||!l,"data-cancelable":e.onCancel?"true":"false"})})]}),(0,p.Y)(j.S,{row:!0,gap:6,justify:"end",children:e.onViewBuildLogs?(0,p.FD)("button",{css:tx.textButton,onClick:e.onViewBuildLogs,children:[e.viewBuildLogs?"Hide":"View"," logs"," ",e.viewBuildLogs?(0,p.Y)(n7.A,{}):(0,p.Y)(n6.A,{})]}):null})]}),(0,p.Y)(j.S,{css:tx.stages,row:!0,children:tS.map(function(n){var t=n.id,r=n.title;return(0,p.Y)(nz,{stage:t,totalStagesWithTitle:tS.length,text:r,activeStage:e.activeStage,erroredStage:e.erroredStage},t)})})]})},t_=function(e){return(0,g.uS)()===v.d.Preparing?(0,p.Y)(j.S,{css:tx.container,children:(0,p.Y)(tk,{})}):(0,p.Y)(tD,(0,s._)({},e))},tD=function(e){var n,t,r,i,o,a,l,c,d,h,m,v,Y,A,C=e.initialBuild,x=e.viewBuildLogsOnLoad,k=e.onViewLogs,_=e.onCanceled,D=e.onError,E=e.openFile,R=e.openDebugChat,I=(0,g.UM)(),T=(0,g.tq)(),P=T?{id:T.id,status:T.status,provider:T.provider,timeStarted:T.timeCreated,userDisplayName:T.user.displayName,debugSummary:T.debugSummary}:void 0,L=(0,f.useRef)(C||P),U=(n={skip:!(null===(i=L.current)||void 0===i?void 0:i.id),variables:{input:{buildId:null!==(A=null===(o=L.current)||void 0===o?void 0:o.id)&&void 0!==A?A:""}},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if(null==e?void 0:e.hostingBuildDeployActionHistory)switch(e.hostingBuildDeployActionHistory.__typename){case"NotFoundError":break;case"UnauthorizedError":D(e.hostingBuildDeployActionHistory.message);break;case"HostingBuildDeployActionHistoryResults":var n=e.hostingBuildDeployActionHistory.results;if(n&&n.length>0){var t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;switch(c.__typename){case"HostingBuildDeployLogAction":t.push(c.log);break;case"HostingBuildDeployStatusAction":r.push(c)}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}eo({type:"setHistory",payload:t});var u=!0,d=!1,p=void 0;try{for(var f,h=r[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;ea(m.status,m.debugSummary)}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}}break;default:D("Unexpected typename.")}},onError:function(e){D(e.message)}},t=(0,s._)({},nm,n),F.I(ng,t)),N=U.loading,O=U.refetch;(0,g.kW)(function(e){switch(e.__typename){case"HostingBuildDeployLogAction":eo({type:"addLog",payload:e.log});break;case"HostingBuildDeployStatusAction":ea(e.status,e.debugSummary)}});var M=(0,u._)((0,f.useState)(L.current?null===(a=tY(L.current.status))||void 0===a?void 0:a.id:void 0),2),B=M[0],H=M[1],z=(0,u._)((0,f.useState)((null===(l=L.current)||void 0===l?void 0:l.status)==="failed"?null===(c=tY(null===(d=L.current)||void 0===d?void 0:d.status))||void 0===c?void 0:c.id:void 0),2),W=z[0],G=z[1],V=(0,u._)((0,f.useState)((null===(h=L.current)||void 0===h?void 0:h.debugSummary)||void 0),2),Z=V[0],q=V[1],K=(0,u._)((0,f.useState)(!1),2),$=K[0],J=K[1],Q=(0,g.om)(),X=(0,u._)((0,nW.A)({openFile:E,listFiles:Q.listFiles}),2),ee=X[0],en=X[1],et=(0,nG.V)(),er=(0,u._)((0,f.useReducer)(function(e,n){switch(n.type){case"setHistory":return ee&&ee.clear(),{allLogs:(0,y._)(n.payload).concat((0,y._)(e.allLogs))};case"addLog":return{allLogs:(0,y._)(e.allLogs).concat([n.payload]),recentLogs:[n.payload]};case"refetchLogs":return ee&&ee.clear(),N||O(),{allLogs:[]}}},{allLogs:[]}),2),ei=er[0],eo=er[1],ea=function(e,n){if(e===S.nH.Failed)G(B),n&&q(n);else{var t=tY(e);if(!t)return;H(t.id)}},el=(r=(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return J(!0),[4,I()];case 1:return e.sent(),_(),[2]}})}),function(){return r.apply(this,arguments)}),es=(0,u._)((0,f.useState)(x||!1),2),ec=es[0],eu=es[1],ed=function(){eu(!ec),ec||(0,eL.Ae)({context:"deploy_progress_logs"})};(0,f.useEffect)(function(){(0,eL.Ae)({context:"deploy_progress"})},[]),(0,f.useEffect)(function(){var e;(null===(e=L.current)||void 0===e?void 0:e.id)&&T&&T.id!==L.current.id&&(L.current={id:T.id,status:T.status,provider:T.provider,timeStarted:T.timeCreated,userDisplayName:T.user.displayName,debugSummary:T.debugSummary},H(void 0),G(void 0),eo({type:"refetchLogs"}))},[T,null===(m=L.current)||void 0===m?void 0:m.id,O]),(0,f.useEffect)(function(){var e;void 0!==B&&(null===(e=L.current)||void 0===e?void 0:e.status)==="failed"&&G(B)},[B,null===(v=L.current)||void 0===v?void 0:v.status]),(0,f.useEffect)(function(){if(ee){if(ei.recentLogs){ei.recentLogs.forEach(function(e){return ee.write(e)});return}ei.allLogs.forEach(function(e){return ee.write(e)})}},[ei,ee]);var ep=null===(Y=tb.find(function(e){return e.id===B}))||void 0===Y?void 0:Y.statusType,ef=ep!==S.nH.Success&&!W;return L.current?(0,p.FD)(j.S,{css:tx.container,children:[(0,p.Y)(tk,{onCancel:ef?el:void 0,isCanceling:$,onViewBuildLogs:ed,viewBuildLogs:ec,provider:L.current.provider,timeStarted:L.current.timeStarted,userDisplayName:L.current.userDisplayName,activeStage:B,erroredStage:W}),(0,p.FD)(j.S,{css:tx.bottom,children:[(0,p.FD)(j.S,{css:ec?tx.logsOpen:tx.logsClosed,children:[(0,p.Y)(tw.a,{}),(0,p.Y)(j.S,{css:tx.xtermContainer,style:{backgroundColor:null==et?void 0:et.background},children:(0,p.Y)(j.D.div,{css:tx.xterm,ref:en})})]}),W&&ep?(0,p.FD)(p.FK,{children:[(0,p.Y)(tw.a,{}),(0,p.Y)(tc,{currentStatus:ep,provider:L.current.provider,debugSummary:Z,logs:ei.allLogs,viewBuildLogs:ec,openFile:E,openDebugChat:R,onViewBuildLogs:ed,onViewApplicationLogs:k})]}):null]})]}):null},tE=t(23700),tR=t(17599),tI=t(49115),tF=function(e){return e.Current="current",e}(tF||{}),tT=(0,C._)({},"current",{icon:(0,p.Y)(function(e){var n=e.color;return(0,p.Y)(j.S,{css:[{textTransform:"capitalize"}],align:"center",row:!0,gap:8,children:(0,p.Y)(j.S,{tag:"span",css:[B.wp.width("8px"),B.wp.height("8px"),B.wp.borderRadius("full"),{backgroundColor:n,boxShadow:"0 0 12px ".concat(n)}]})})},{color:ek.LU.blueStronger}),text:"Current deployment"}),tP=j.D.div,tL=function(e){var n=e.activityLogItem.type,t=(0,u._)((0,f.useState)(!1),2),r=t[0],i=t[1],o=(0,u._)((0,f.useState)(!1),2),a=o[0],l=o[1],s=(0,f.useRef)(!1);(0,f.useEffect)(function(){s.current=!0;var e=setTimeout(function(){l(r)},200);return function(){clearTimeout(e)}},[r]);var c=n in tT&&tT[n];if(!c)return null;var d=c.icon,h=c.text;return(0,p.Y)(j.S,{css:[B.wp.p(8)],onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},children:(0,p.FD)(tI.A,{isOpen:a,onClickOutside:function(){return l(!1)},padding:8,children:[(0,p.Y)(tP,{css:B.wp.cursor.pointer,children:d}),(0,p.Y)(j.S,{css:[B.wp.maxWidth(240)],children:(0,p.Y)(V.EY,{children:h})})]})})},tU=t(84789),tN=t(29253),tO=t(81207),tM=(0,eN.x)({activityLogContainerDesktop:[B.wp.pb(4),B.wp.align.center],rollbackPillSpan:[e0.b.listItem,B.wp.display.inlineBlock,B.wp.px(6),B.wp.fontSize(ek.LU.fontSizeDefault),B.wp.color.foregroundDimmer,B.wp.borderRadius(16),{whiteSpace:"nowrap"}],longId:[B.wp.maxWidth(260)],shortId:[B.wp.pl(4),B.wp.color.foregroundDimmer],buildIdColumn:[B.wp.flex.row,B.wp.minWidth(85)],pillSpanActivityLog:[B.wp.pl(16)],displayName:[B.wp.fontWeight.medium,B.wp.pl(6)],formattedText:[B.wp.pl(4),B.wp.overflow("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]}),tB=(0,eN.x)({subtitleView:[B.wp.py(4),B.wp.flex.row,B.wp.align.center]}),tH=function(e){var n=e.build,t=n.id.slice(0,8),r=(0,u._)((0,f.useState)(!1),2),i=r[0],o=r[1],a=(0,u._)((0,f.useState)(!1),2),l=a[0],s=a[1],c=(0,f.useRef)(!1);return(0,f.useEffect)(function(){c.current=!0;var e=setTimeout(function(){s(i)},200);return function(){clearTimeout(e)}},[i]),(0,p.Y)("span",{onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},children:(0,p.FD)(tI.A,{isOpen:l,onClickOutside:function(){return s(!1)},padding:8,children:[(0,p.Y)("span",{css:[e0.b.listItem,B.wp.display.inlineBlock,B.wp.px(2),B.wp.py(0),B.wp.borderRadius(4)],children:t}),(0,p.Y)(j.S,{css:[B.wp.maxWidth(260)],children:(0,p.Y)(V.EY,{variant:"small",children:n.id})})]})})},tz=(r={},(0,C._)(r,S.Ey.Deploy,"deployed"),(0,C._)(r,S.Ey.Rollback,"rolled back"),(0,C._)(r,S.Ey.Fail,"failed to deploy"),r),tW=function(e){var n,t=e.build,r=e.background,i=null===(n=t.rollbackSourceBuildId)||void 0===n?void 0:n.slice(0,8);r=null!=r?r:"higher";var o=(0,u._)((0,f.useState)(!1),2),a=o[0],l=o[1],s=(0,u._)((0,f.useState)(!1),2),c=s[0],d=s[1],h=(0,f.useRef)(!1);return(0,f.useEffect)(function(){h.current=!0;var e=setTimeout(function(){d(a)},200);return function(){clearTimeout(e)}},[a]),(0,p.Y)("span",{onMouseEnter:function(){return l(!0)},onMouseLeave:function(){return l(!1)},children:(0,p.FD)(tI.A,{isOpen:c,onClickOutside:function(){return d(!1)},padding:8,children:[(0,p.FD)(n3.ui,{background:r,css:tM.rollbackPillSpan,children:[(0,p.Y)(tO.A,{size:12}),(0,p.Y)(V.EY,{css:tM.shortId,children:i})]}),(0,p.Y)(j.S,{css:tM.longId,children:(0,p.Y)(V.EY,{variant:"small",children:t.rollbackSourceBuildId})})]})})},tG=function(e){var n=e.activityLogItem,t=n.type,r=n.build,i=e.formattedTime,o=r.user.displayName,a=t in tz&&tz[t];if(!a)return null;var l=r.rollbackSourceBuildId;return(0,p.FD)(j.S,{css:tM.activityLogContainerDesktop,row:!0,children:[(0,p.Y)("span",{css:tM.buildIdColumn,children:(0,p.Y)(tH,{build:r})}),(0,p.Y)(tN.e,{src:r.user.image||null,size:16,username:r.user.username||"",fullName:r.user.fullName||""}),(0,p.Y)("span",{css:tM.displayName,children:o}),(0,p.FD)("span",{css:tM.formattedText,children:[" "+a," "+i]}),l?(0,p.Y)("span",{css:tM.pillSpanActivityLog,children:(0,p.Y)(tW,{build:r})}):null," "]})},tV=function(e){var n=e.activityLogItem,t=n.type,r=n.build,i=e.formattedTime,o=r.user.displayName,a=t in tz&&tz[t];if(!a)return null;var l=r.rollbackSourceBuildId;return(0,p.FD)(j.S,{children:[(0,p.FD)(j.S,{row:!0,align:"center",children:[(0,p.Y)(tH,{build:r}),l?(0,p.Y)("span",{css:tM.pillSpanActivityLog,children:(0,p.Y)(tW,{build:r})}):null]}),(0,p.FD)(j.S,{css:tB.subtitleView,children:[(0,p.Y)(tN.e,{src:r.user.image||null,size:24,username:r.user.username||"",fullName:r.user.fullName||""}),(0,p.Y)("span",{css:tM.displayName,children:o}),(0,p.FD)("span",{css:tM.formattedText,children:[" "+a," "+i]})]})]})},tj=function(e){var n=e.activityLogItem,t=(0,tU.a)(),r=new Date(n.build.timeCreated),i=Date.now(),o=(0,nf.A)(r,i,{addSuffix:!0});return(0,p.Y)(p.FK,{children:t?(0,p.Y)(tV,{activityLogItem:n,formattedTime:o}):(0,p.Y)(tG,{activityLogItem:n,formattedTime:o})})},tZ=t(71991),tq=t(74130),tK=t(38565),t$=(0,eN.x)({title:[B.wp.fontSize(24),B.wp.pt(32)],subtitle:[B.wp.pt(6)],accordionContainer:[B.wp.pt(24)],accordion:[B.wp.backgroundColor.backgroundHigher,B.wp.borderRadius(6)],accordionItem:[B.wp.px(8),B.wp.py(2),B.wp.rowWithGap(8),B.wp.align.center],tableContainer:[B.wp.backgroundColor.backgroundDefault,B.wp.border({color:ek.LU.backgroundHigher}),B.wp.borderRadius(0,0,6,6),B.wp.px(12),B.wp.pb(6)],changedSecretsDisclaimer:[B.wp.py(8)],table:[B.wp.width("100%"),{".tr":{display:"flex",width:"100%",flexDirection:"row"},".th":{flexDirection:"row",borderBottom:"1px solid ".concat(ek.LU.outlineDimmest),color:ek.LU.foregroundDimmer},".td":{flexDirection:"row"}}],cell:[B.wp.fontWeight.normal,B.wp.fontSize(ek.LU.fontSizeDefault),B.wp.py(8),B.wp.display.flex,B.wp.flex.row,B.wp.align.center,B.wp.justify.spaceBetween],secretValue:[B.wp.pl(4),B.wp.color.foregroundDefault],noValue:[B.wp.pl(4),B.wp.color.foregroundDimmest],shortId:[B.wp.display.inlineBlock,B.wp.py(0),B.wp.borderRadius(4)],longId:[B.wp.maxWidth(260)]}),tJ=function(e){var n=e.buildSecret,t=e.shortSecretLength,r=n.slice(0,void 0===t?8:t),i=(0,u._)((0,f.useState)(!1),2),o=i[0],a=i[1],l=(0,u._)((0,f.useState)(!1),2),s=l[0],c=l[1],d=(0,f.useRef)(!1);return((0,f.useEffect)(function(){d.current=!0;var e=setTimeout(function(){c(o)},200);return function(){clearTimeout(e)}},[o]),r.length===n.length)?(0,p.Y)("span",{children:r}):(0,p.Y)("span",{onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:(0,p.FD)(tI.A,{isOpen:s,onClickOutside:function(){return c(!1)},padding:8,children:[(0,p.FD)("span",{css:t$.shortId,children:[r,"..."]}),(0,p.Y)(j.S,{css:t$.longId,children:(0,p.Y)(V.EY,{variant:"small",children:n})})]})})};function tQ(e){var n=e.secretKey,t=e.build1Secret,r=e.build2Secret,i=e.hideSecret,o=e.selectedSecretsMap,a=e.updateSecretsMap,l=(0,u._)((0,f.useState)(o.get(n)),2),s=l[0],c=l[1],d=function(e){var t=e.buildSecret;return(0,p.Y)("td",{className:"td",children:(0,p.FD)(j.S,{css:t$.cell,style:{justifyContent:"start"},children:[(0,p.Y)(tZ.s,{id:n,value:null!=t?t:"",checked:s===t,onChange:function(){c(t),a({key:n,value:t})}}),t?(0,p.Y)("span",{css:t$.secretValue,children:i?"••••••••":(0,p.Y)(tJ,{buildSecret:t})}):(0,p.Y)("span",{css:t$.noValue,children:"No Value"})]})})};return(0,p.FD)("tr",{children:[(0,p.Y)("td",{className:"td",children:(0,p.Y)(j.S,{css:t$.cell,className:"cell",children:n})}),(0,p.Y)(d,{buildSecret:t}),(0,p.Y)(d,{buildSecret:r})]})}var tX=function(e){var n=e.secretKey,t=e.secretValue,r=e.hideSecret;return(0,p.FD)("tr",{children:[(0,p.Y)("td",{className:"td",children:(0,p.Y)(j.S,{css:t$.cell,className:"cell",children:n})}),(0,p.Y)("td",{className:"td",children:(0,p.Y)("span",{css:t$.cell,className:"cell",children:r?"••••••••••••••••••••••••":(0,p.Y)(tJ,{buildSecret:t,shortSecretLength:20})})})]})};let t0=function(e){var n=e.currentBuild,t=e.build,r=e.selectedSecretsMap,i=e.updateSecretsMap,o=(0,u._)((0,f.useState)(!1),2),a=o[0],l=o[1],s=(0,u._)((0,f.useState)(!1),2),c=s[0],d=s[1],h=(0,u._)((0,f.useState)(!0),2),m=h[0],g=h[1],v=(0,u._)((0,f.useState)(!0),2),w=v[0],y=v[1],b=(0,u._)((0,f.useState)(),2),S=b[0],Y=b[1];return((0,f.useEffect)(function(){var e,r,o,a,l,s,c,u,d,p=(r=(e={build1Secrets:n.envVars,build2Secrets:t.envVars}).build1Secrets,o=e.build2Secrets,a=new Map,l=new Map,s=new Map,c=new Map,u=new Set,d=new Map,r.forEach(function(e){s.set(e.name,e.value),u.add(e.name)}),o.forEach(function(e){c.set(e.name,e.value),u.add(e.name)}),u.forEach(function(e){var n=s.get(e)||void 0,t=c.get(e)||void 0;n===t?n&&(a.set(e,n),d.set(e,n)):(l.set(e,{build1Value:n,build2Value:t}),d.set(e,n))}),{unchangedSecrets:a,changedSecrets:l,defaultSelectedMap:d});p.defaultSelectedMap.forEach(function(e,n){i({key:n,value:e})}),Y(p)},[t.envVars,n.envVars,i]),S&&(0!==S.unchangedSecrets.size||0!==S.changedSecrets.size))?(0,p.FD)(p.FK,{children:[(0,p.Y)(j.S,{css:t$.title,children:"Review Secrets"}),(0,p.Y)(V.EY,{css:t$.subtitle,children:"Manage which secrets you would like to preserve from your production deployment or from your rollback target."}),S.changedSecrets.size>0?(0,p.Y)(j.S,{css:t$.accordionContainer,children:(0,p.Y)(n8.A,{headerContent:(0,p.FD)(j.S,{css:t$.accordionItem,children:[(0,p.Y)(na.A,{color:ek.LU.yellowStronger}),S.changedSecrets.size,1===S.changedSecrets.size?" secret is ":" secrets are ","different across deployments"]}),expanded:c,onClick:function(){return d(!c)},css:t$.accordion,children:(0,p.FD)(j.S,{css:t$.tableContainer,children:[(0,p.Y)(V.EY,{css:t$.changedSecretsDisclaimer,children:"Select secret values from either your production environment or rollback environment to copy over in your rollback."}),(0,p.FD)("table",{css:t$.table,children:[(0,p.FD)("tr",{children:[(0,p.Y)("th",{className:"th",style:{width:"40%"},children:(0,p.Y)(j.S,{css:t$.cell,children:"Key"})}),(0,p.Y)("th",{className:"th",style:{width:"30%"},children:(0,p.Y)(j.S,{css:t$.cell,children:"Production"})}),(0,p.Y)("th",{className:"th",style:{width:"30%"},children:(0,p.FD)(j.S,{css:t$.cell,children:["Rollback Build",(0,p.Y)(e_.K0,{alt:w?"Reveal Values":"Hide Values",onClick:function(){y(!w)},children:w?(0,p.Y)(tK.A,{}):(0,p.Y)(tq.A,{})})]})})]}),Array.from(S.changedSecrets.entries()).map(function(e){var n=(0,u._)(e,2),t=n[0],o=n[1];return(0,p.Y)(tQ,{secretKey:t,build1Secret:o.build1Value,build2Secret:o.build2Value,hideSecret:w,selectedSecretsMap:r,updateSecretsMap:i},t)})]})]})})}):null,S.unchangedSecrets.size>0?(0,p.Y)(j.S,{css:t$.accordionContainer,children:(0,p.Y)(n8.A,{headerContent:(0,p.FD)(j.S,{css:t$.accordionItem,children:[(0,p.Y)(nN.A,{color:ek.LU.accentPositiveStronger}),S.unchangedSecrets.size,1===S.unchangedSecrets.size?" secret is ":" secrets are ","shared across deployments"]}),expanded:a,onClick:function(){return l(!a)},css:t$.accordion,children:(0,p.Y)(j.S,{css:t$.tableContainer,children:(0,p.FD)("table",{css:t$.table,children:[(0,p.FD)("tr",{children:[(0,p.Y)("th",{className:"th",style:{width:"40%"},children:(0,p.Y)(j.S,{css:t$.cell,children:"Key"})}),(0,p.Y)("th",{className:"th",style:{width:"60%"},children:(0,p.FD)(j.S,{css:t$.cell,children:["Rollback Build",(0,p.Y)(e_.K0,{alt:m?"Reveal Values":"Hide Values",onClick:function(){g(!m)},children:m?(0,p.Y)(tK.A,{}):(0,p.Y)(tq.A,{})})]})})]}),Array.from(S.unchangedSecrets.entries()).map(function(e,n){var t=(0,u._)(e,2),r=t[0],i=t[1];return(0,p.Y)(tX,{secretKey:r,secretValue:i,hideSecret:m},n)})]})})})}):null]}):null};var t1=t(11014),t2=t(39074),t4=t(4989),t5=t(44144),t8=t(26020),t3=t(38828);function t6(e){var n=e.type,t=e.view,r=e.provider,i=e.onViewBuildLogs,o=e.openFile,a=e.openDebugChat,l=e.onClickRollback,s=(0,nQ.A)();return(0,p.Y)(rd,{replId:s,type:void 0===n?"default":n,view:t,provider:r,onSelect:i,openFile:o,openDebugChat:a,onClickRollback:l})}var t7=tb.filter(function(e){return"title"in e}),t9=(0,eN.x)({root:[B.wp.px(8),B.wp.pb(8),{zIndex:0}]});function re(e){var n=e.activeStage,t=e.erroredStage;return(0,p.Y)(j.S,{css:t9.root,row:!0,children:t7.map(function(e){return(0,p.Y)(nz,{stage:e.id,text:e.title,totalStagesWithTitle:t7.length,activeStage:n,erroredStage:t},e.id)})})}var rn=(0,eN.x)({root:[B.wp.height("100%")],header:[B.wp.pt(8),B.wp.px(8),B.wp.rowWithGap(8),B.wp.align.center],divider:[{marginLeft:8,marginRight:8,borderBottom:"1px solid "+ek.LU.outlineDimmest}],name:[B.wp.color.foregroundDefault,B.wp.fontWeight.medium],content:[B.wp.p(8),B.wp.flex.growAndShrink(1),B.wp.position.relative],loading:[B.wp.coverContainer,B.wp.center],error:[B.wp.m(8),B.wp.borderRadius(8),B.wp.overflow("hidden")],xterm:[B.wp.coverContainer,{overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,"& > div":[B.wp.coverContainer,B.wp.p(8)]}]}),rt=(0,eN.x)({root:[B.wp.pt(12),B.wp.pb(16),tR.R1.maxWidth],header:[B.wp.pt(8),B.wp.pl(8),B.wp.rowWithGap(8),B.wp.align.center],title:[B.wp.fontSize(24),B.wp.pt(8)],subheader:[B.wp.pt(12),B.wp.fontSize(14)],content:[B.wp.px(8),B.wp.flex.growAndShrink(1),B.wp.position.relative],prodToTargetContainer:[B.wp.pt(32),{b:{display:"contents",fontWeight:500}}],prodToTarget:[B.wp.pt(16),B.wp.rowWithGap(8),B.wp.flex.growAndShrink(1),B.wp.align.center,B.wp.justify.spaceBetween],prodStatusDot:[B.wp.width(12),B.wp.align.center],buildContainer:[B.wp.py(12),B.wp.px(16),B.wp.borderRadius(),{outline:"1px solid ".concat(ek.LU.outlineDimmer)},B.wp.backgroundColor.outlineDimmest,B.wp.width("45%"),B.wp.height("100%")],buildContainerTitle:[B.wp.fontSize(16),B.wp.align.center],buildContainerSubTitle:[B.wp.color.foregroundDimmer],confirmButton:[B.wp.pt(24)]});function rr(e){var n=e.build,t=e.isCurrentBuild,r=Date.now(),i=(0,nf.A)(new Date(n.timeCreated),r,{addSuffix:!0}),o=t?(0,p.Y)(j.S,{css:rt.prodStatusDot,children:(0,p.Y)(t1.$,{status:n.status})}):(0,p.Y)(t3.A,{color:ek.LU.outlineStrongest,size:12});return(0,p.FD)(j.S,{css:rt.buildContainer,gap:8,children:[(0,p.FD)(j.S,{css:rt.buildContainerTitle,row:!0,gap:6,children:[o,t?"Production":n.id.slice(0,8)]}),(0,p.FD)(j.S,{css:rt.buildContainerSubTitle,row:!0,gap:6,align:"center",children:[(0,p.Y)(tN.e,{src:n.user.image||null,size:12,username:n.user.username||"",fullName:n.user.fullName||""}),(0,p.Y)("b",{children:" "+n.user.displayName})," deployed"," "+i]})]})}function ri(e){var n=e.build,t=e.onBack,r=e.onClickRollback,i=e.onError,o=(0,g.cF)(),a=(0,u._)((0,f.useState)(new Map),2),l=a[0],s=a[1],c=(0,tU.a)();return o?(0,p.FD)(j.S,{css:rt.root,children:[(0,p.Y)(j.S,{css:rt.header,children:(0,p.Y)(e_.K0,{alt:"Back to timeline",onClick:function(){return t()},children:(0,p.Y)(t4.A,{})})}),(0,p.FD)(j.S,{css:rt.content,children:[(0,p.Y)(j.S,{css:rt.title,children:"Instant Rollback"}),(0,p.Y)(j.S,{css:rt.subheader,children:"Replace your current production with a previously successful deployment."}),(0,p.FD)(j.S,{css:rt.prodToTargetContainer,children:["Rolling back from ",(0,p.Y)("b",{children:"production"})," to the following"," ",(0,p.Y)("b",{children:"rollback target"}),":",(0,p.FD)(j.S,{css:rt.prodToTarget,children:[(0,p.Y)(rr,{build:o,isCurrentBuild:!0}),(0,p.Y)(t5.A,{}),(0,p.Y)(rr,{build:n,isCurrentBuild:!1})]})]}),c?null:(0,p.Y)(t0,{build:n,currentBuild:o,updateSecretsMap:function(e){var n=e.key,t=e.value;s(l.set(n,t))},selectedSecretsMap:l}),(0,p.Y)(j.S,{css:rt.confirmButton,children:(0,p.Y)(eQ.$n,{text:"Confirm Rollback",iconLeft:(0,p.Y)(tO.A,{}),onClick:function(){var e=[];l.forEach(function(n,t){n&&e.push({name:t,value:n})}),r(e),t()},colorway:"primary"})})]})]}):(i("This deployment does not have a current build to rollback from"),null)}function ro(e){var n=e.build,t=e.onBack,r=e.fs,i=e.openFile,o=e.openDebugChat,a=e.onViewAppLogs,l=(0,u._)((0,nW.A)({openFile:i,listFiles:r.listFiles}),2),s=l[0],c=l[1],d=(0,ej.XH)({variables:{input:{buildId:n.id}},ssr:!1,fetchPolicy:"cache-and-network"}),h=d.data,m=d.loading,g=(0,f.useMemo)(function(){var e=[],n=h&&"HostingBuildDeployActionHistoryResults"===h.hostingBuildDeployActionHistory.__typename?h.hostingBuildDeployActionHistory.results:null;if(n){var t=void 0,r=void 0,i=void 0,o=!0,a=!1,l=void 0;try{for(var s,c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)!function(){var n=c.value;if("HostingBuildDeployLogAction"===n.__typename)return e.push(n.log);tb.some(function(e){return e.statusType===n.status})&&(t=n.status),n.status===S.nH.Failed&&(r=t)}()}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var d=t?null===(s=tY(t))||void 0===s?void 0:s.id:void 0;return r&&(i=d),{logs:e,activeStage:d,erroredStage:i,erroredStatus:r}}},[h]);return(0,f.useEffect)(function(){s&&g&&s.write(g.logs.join(""))},[s,g]),(0,p.FD)(j.S,{css:rn.root,gap:8,children:[(0,p.FD)(j.S,{css:rn.header,children:[(0,p.Y)(e_.K0,{alt:"Back to timeline",onClick:function(){return t()},children:(0,p.Y)(t4.A,{})}),(0,p.Y)(j.S,{children:(0,p.FD)(V.EY,{color:"dimmer",multiline:!1,children:[(0,p.Y)("span",{css:rn.name,children:n.user.displayName+" "}),(0,tE.f)(n.status)]})}),(0,p.Y)(tH,{build:n})]}),g||m?(0,p.FD)(p.FK,{children:[(null==g?void 0:g.erroredStatus)?(0,p.Y)(j.S,{css:rn.error,children:(0,p.Y)(tu,{currentStatus:g.erroredStatus,provider:n.provider,debugSummary:n.debugSummary,openFile:i,openDebugChat:o,onViewApplicationLogs:a})}):null,(0,p.Y)(re,{activeStage:null==g?void 0:g.activeStage,erroredStage:null==g?void 0:g.erroredStage}),(0,p.Y)(j.S,{css:rn.divider}),(0,p.FD)(n3.ui,{css:rn.content,children:[(0,p.Y)(j.S,{css:rn.xterm,innerRef:c}),m||!s?(0,p.Y)(j.S,{css:rn.loading,children:(0,p.Y)(nM.A,{color:ek.LU.white,size:24})}):null]})]}):(0,p.Y)(tv,{provider:n.provider,openFile:i})]})}var ra=(0,eN.x)({item:B.wp.rowWithGap(12),past:{":last-of-type":{"[data-timeline-line]":{display:"none"}}},future:{":last-of-type":{"[data-timeline-line]":{bottom:-19}}}}),rl=(0,eN.x)({empty:[B.wp.pb(8),B.wp.center,B.wp.align.stretch],items:[],loadMore:[B.wp.center],item:[B.wp.pl(8),B.wp.pr(4),B.wp.pb(12),B.wp.align.center,B.wp.flex.growAndShrink(1),B.wp.color.foregroundDimmest,B.wp.hover(B.wp.color.foregroundDefault),{"&:hover .itemRight":{display:"flex"},"&:hover .itemLine":{display:"flex"}}],itemMainText:[B.wp.flex.growAndShrink(1),(0,C._)({},B.kL.min(640),B.wp.flex.growAndShrink(0))],itemLine:[B.wp.display.none,(0,C._)({},B.kL.min(640),[B.wp.flex.growAndShrink(1),B.wp.border({color:ek.LU.outlineDimmest,direction:"top"})])],itemRight:[B.wp.textAlign.right,B.wp.display.none],itemPast:[ra.item,ra.past],itemFuture:[ra.item,ra.future],disabledLog:{cursor:"not-allowed"}}),rs=(0,eN.x)({top:B.wp.rowWithGap(12),button:[B.wp.reset.button,B.wp.cursor.pointer,B.wp.borderRadius(8),B.wp.display.flex,B.wp.rowWithGap(6),B.wp.align.center,B.wp.px(8),B.wp.color.foregroundDimmer,B.wp.height(32),B.wp.hover(B.wp.color.foregroundDefault),{'&[data-highlight="true"]':[B.wp.color.accentNegativeStrongest,B.wp.backgroundColor.accentNegativeDimmest,B.wp.border({color:ek.LU.accentNegativeDimmer})]}],info:[B.wp.flex.growAndShrink(1),{'&[data-open="false"]':B.wp.pb(6)}],buttonContent:[B.wp.flex.growAndShrink(1),B.wp.rowWithGap(8),B.wp.align.center],failedBuildList:B.wp.pt(8)});function rc(e){var n=e.items,t=e.upcomingBuildStatus,r=e.view,i=e.provider,o=e.onClick,a=e.openFile,l=e.openDebugChat,s=(0,u._)((0,f.useState)(!1),2),c=s[0],d=s[1],h=(0,g.uS)(),m=n[0],w=m.build.debugSummary,y=h===v.d.Ready&&!t&&r!==Y.P.DeploymentInProgress&&w;return(0,p.FD)(j.S,{children:[(0,p.FD)(j.S,{css:rs.top,children:[(0,p.Y)(nd,{type:c?"futureFailOpen":"futureFailClosed"}),(0,p.FD)(j.S,{css:rs.info,"data-open":c,children:[y?(0,p.Y)(tp,{title:"".concat(n.length," ").concat((0,nr.A)("build",n.length)," failed"),debugSummary:w,onViewBuildLogs:function(){return o(m.build)},openFile:a,provider:i,openDebugChat:l}):null,(0,p.FD)("button",{onClick:function(){return d(!c)},css:rs.button,children:[(0,p.FD)(j.S,{css:rs.buttonContent,children:[(0,p.Y)(eE.A,{}),(0,p.Y)(V.EY,{children:"View all failed builds"}),c?null:(0,p.FD)(V.EY,{css:B.wp.color.foregroundDimmest,variant:"small",children:[n.length>1?"Most recent: ":null,(0,nf.A)(new Date(n[0].timeCreated),Date.now(),{addSuffix:!0})]})]}),c?(0,p.Y)(n7.A,{color:ek.LU.foregroundDimmer}):(0,p.Y)(n6.A,{color:ek.LU.foregroundDimmer})]})]})]}),c?(0,p.Y)(j.S,{css:rs.failedBuildList,children:n.map(function(e){return(0,p.Y)(rf,{item:e,onClick:function(){return o(e.build)},type:"future"},e.id)})}):null]})}function ru(e){var n=e.items,t=e.view,r=e.provider,i=e.onClick,o=e.openFile,a=e.openDebugChat,l=(0,u._)((0,f.useState)(!1),2),s=l[0],c=l[1],d=(0,g.mj)().hasDebugSummariesAuthorization,h=(0,g.tq)(),m=(0,f.useRef)(void 0);(0,f.useEffect)(function(){(null==h?void 0:h.status)!==void 0&&(m.current=null==h?void 0:h.status)},[h,null==h?void 0:h.status]);var v=!h&&m.current!==S.nH.Building&&m.current!==S.nH.Success,w=v?ek.LU.accentNegativeStronger:ek.LU.foregroundDimmer;if(0===n.length)return null;var y=n[0];return d&&y.build.debugSummary?(0,p.Y)(rc,{items:n,upcomingBuildStatus:m.current,view:t,provider:r,onClick:i,openFile:o,openDebugChat:a}):(0,p.FD)(j.S,{children:[(0,p.FD)(j.S,{css:rs.top,children:[(0,p.Y)(nd,{type:s?"futureFailOpen":"futureFailClosed"}),(0,p.Y)(j.S,{css:rs.info,"data-open":s,children:(0,p.FD)("button",{onClick:function(){return c(!s)},css:rs.button,"data-highlight":v,children:[(0,p.FD)(j.S,{css:rs.buttonContent,children:[v?(0,p.Y)(na.A,{color:ek.LU.accentNegativeStronger}):null,(0,p.FD)(V.EY,{children:[n.length," ",(0,nr.A)("build",n.length)," failed"]}),s?null:(0,p.FD)(V.EY,{children:[n.length>1?"Most recent: ":null,(0,nf.A)(new Date(n[0].timeCreated),Date.now(),{addSuffix:!0})]})]}),s?(0,p.Y)(n7.A,{color:w}):(0,p.Y)(n6.A,{color:w})]})})]}),s?(0,p.Y)(j.S,{css:rs.failedBuildList,children:n.map(function(e){return(0,p.Y)(rf,{item:e,onClick:function(){return i(e.build)},type:"future"},e.id)})}):null]})}function rd(e){var n,t,r=e.replId,i=e.type,o=void 0===i?"default":i,a=e.view,l=e.provider,s=e.onSelect,c=e.openFile,u=e.openDebugChat,d=e.onClickRollback,h=(0,ej.jN)({variables:{replId:r,count:20},fetchPolicy:"cache-and-network",ssr:!1}),m=h.data,y=h.previousData,Y=h.loading,A=h.error,C=h.fetchMore,x=null!=m?m:y,k=(0,g.uS)(),_=(null==x?void 0:x.getRepl.__typename)==="Repl"?x.getRepl:null,D=(null==_?void 0:null===(t=_.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"?_.hostingDeployment:null,E=(n=(0,w._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!(e=null==D?void 0:D.activityLogs.pageInfo.nextCursor))return[2];return[4,C({variables:{after:e,count:20}})];case 1:return n.sent(),[2]}})}),function(){return n.apply(this,arguments)}),R=(0,t2.A)({onLoadMore:E,rootMargin:"0px 0px 300px 0px"}).targetRef,I=(0,g.cF)(),F=(0,g.tq)(),T=(0,f.useRef)(void 0);if((0,f.useEffect)(function(){(null==F?void 0:F.id)!==void 0&&(T.current=null==F?void 0:F.id)},[null==F?void 0:F.id]),Y&&!D)return"failureQueue"===o?null:(0,p.Y)(rm,{});if(!(null==D?void 0:D.activityLogs))return null;var P=D.activityLogs,L=P.items,U=P.pageInfo;if(0===L.length)return null;if(A)return(0,p.Y)(j.S,{css:rl.empty,children:(0,p.Y)(G.N,{colorway:"warning",icon:(0,p.Y)(na.A,{}),text:"Something went wrong"})});var N=function(e,n){var t=[],r=(null==n?void 0:n.timeCreated)?new Date(n.timeCreated):null,i=!0,o=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;if(c.type!==S.Ey.Fail||r&&r.getTime()>new Date(c.build.timeCreated).getTime())break;t.push(c)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return t}(L,I);return"failureQueue"===o?(0,p.Y)(tR.lQ,{render:N.length>0,initialHeight:44,children:(0,p.Y)(ru,{items:N,view:a,provider:l,onClick:s,openFile:c,openDebugChat:u})}):(0,p.FD)(j.S,{gap:8,"data-history-timeline-items":L.length-N.length,children:[(0,p.Y)(j.S,{css:rl.items,children:L.map(function(e,n){if(e.build.id===(null==I?void 0:I.id)||n<N.length)return null;var t=!1;return e.isRollbackCandidate&&e.build.status===S.nH.Success&&!e.build.rollbackSourceBuildId&&d&&k===v.d.Ready&&(t=!0),(0,p.Y)(rf,{item:e,onClick:function(){return s(e.build)},onClickRollback:t&&d?function(){return d(e.build)}:void 0},e.id)})}),U.nextCursor?(0,p.Y)(j.S,{css:rl.loadMore,children:(0,p.Y)(e_.K0,{disabled:Y,tooltipBehavior:"hidden",alt:"Show more",onClick:E,ref:R,children:Y?(0,p.Y)(nM.A,{}):(0,p.Y)(t8.A,{})})}):null]})}var rp=function(e){var n=e.onClickRollback,t=e.rollbackTooltip;if((0,tU.a)()&&!n)return(0,p.Y)(p.FK,{});var r=void 0===n;return(0,p.Y)(e_.K0,{alt:t,onClick:function(){return n?n():void 0},disabled:r,css:r&&rl.disabledLog,children:(0,p.Y)(tO.A,{})})};function rf(e){var n=e.item,t=e.onClick,r=e.onClickRollback,i=e.timeline,o=e.type,a=n.build.hasDeployLogs,l=!a,s=(0,tU.a)(),c=(0,g.uS)(),u="Rollback";r||(u="Cannot roll back, the image for this build is no longer available"),c!==v.d.Ready?u="Cannot roll back while a deployment is in progress":n.build.status!==S.nH.Success?u="Cannot roll back to a failed build":n.build.rollbackSourceBuildId&&(u="Cannot roll back, already rolled back to this deployment");var d=(0,p.FD)(j.S,{css:rl.item,row:!0,gap:8,style:s?{alignItems:"start"}:{},children:[(0,p.Y)(j.S,{css:rl.itemMainText,children:(0,p.Y)(tj,{activityLogItem:n})}),(0,p.Y)(j.S,{css:rl.itemLine,className:"itemLine"}),(0,p.FD)(j.S,{css:rl.itemRight,row:!0,gap:0,justify:"end",style:s?{display:"flex"}:{},className:"itemRight",children:[(0,p.Y)(tL,{activityLogItem:n}),(0,p.Y)(rp,{onClickRollback:r,rollbackTooltip:u}),(0,p.Y)(e_.K0,{alt:a?"View deploy logs":"Deploy logs expire after 30 days",onClick:t,disabled:l,css:l&&rl.disabledLog,children:(0,p.Y)(n1.A,{})})]})]});return void 0===i||i?(0,p.FD)(j.S,{css:"past"===(void 0===o?"past":o)?rl.itemPast:rl.itemFuture,children:[(0,p.Y)(nd,{type:n.type===S.Ey.Fail?"pastFail":"pastSuccess"}),d]}):d}var rh=(0,eN.x)({loading:[{":last-of-type":{"[data-timeline-line]":{display:"none"}}}],loadingItem:[W.S.backgroundPulse(),B.wp.height(20.4),B.wp.mt(2),B.wp.ml(4),B.wp.flex.growAndShrink(1),B.wp.borderRadius(6),{opacity:.5,marginBottom:14}]});function rm(){return(0,p.Y)(j.S,{children:[,,,].fill(0).map(function(e,n){return(0,p.FD)(j.S,{css:rh.loading,row:!0,gap:12,children:[(0,p.Y)(nd,{type:"pastNeutral"}),(0,p.Y)(n3.ui,{elevated:!0,css:rh.loadingItem})]},n)})})}var rg=t(36662),rv=t(45981),rw=t.n(rv),ry=t(61598),rb=t(94299),rS=(0,eN.x)({root:[B.wp.flex.shrink(1)],name:[B.wp.color.foregroundDefault,B.wp.fontWeight.medium],item:[B.wp.pr(4),B.wp.align.center,B.wp.flex.growAndShrink(1)],itemMainText:[B.wp.flex.growAndShrink(1),B.wp.align.center],itemRight:[B.wp.textAlign.right],disabledLog:{cursor:"not-allowed"}}),rY=function(e){var n=e.onClick,t=(0,g.uS)(),r=(0,g.cF)();if(t===v.d.Loading||!r)return(0,p.Y)(nM.A,{size:12});var i=r.status,o=r.hasDeployLogs,a=!o;return(0,p.Y)(j.S,{css:rS.root,row:!0,gap:0,children:(0,p.FD)(j.S,{css:rS.item,row:!0,gap:8,children:[(0,p.Y)(t1.$,{status:i}),(0,p.Y)(j.S,{css:rS.itemMainText,children:(0,p.FD)(V.EY,{multiline:!1,children:[(0,p.Y)("span",{css:rS.name,children:r.user.displayName+" "}),(0,tE.f)(i,r.suspendedReason)+" ",!function(e){switch(e){case S.nH.Building:case S.nH.Promoting:case S.nH.Running:case S.nH.Pending:case S.nH.Failed:case S.nH.Success:return!0;case S.nH.Resuming:case S.nH.Suspending:case S.nH.Suspended:case S.nH.UpdatingTier:return!1}}(i)?null:(0,p.Y)(ty.m_,{tooltip:(0,rb.A)(new Date(r.timeCreated),"MMMM do, Y 'at' h:m aa z"),maxWidth:250,children:function(e,n){return(0,p.Y)("span",(0,c._)((0,s._)({},e),{ref:n,children:(0,nf.A)(new Date(r.timeCreated),Date.now(),{addSuffix:!0})}))}})]})}),(0,p.Y)(j.S,{css:rS.itemRight,children:(0,p.Y)(e_.K0,{alt:o?"View deploy logs":"Deploy logs expire after 30 days",onClick:n,disabled:a,css:a&&rS.disabledLog,children:(0,p.Y)(n1.A,{})})})]})})},rA=(i={},(0,C._)(i,S.Q0.Gce,"Reserved VM"),(0,C._)(i,S.Q0.CloudRun,"Autoscale"),(0,C._)(i,S.Q0.Static,"Static"),(0,C._)(i,S.Q0.Cron,"Scheduled"),i);function rC(){var e=(0,R._)(["\n  query DeploymentSuspendedReplOrg($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return rC=function(){return e},e}var rx={},rk=(0,I.J1)(rC()),r_=t(77581),rD=t(317),rE=t(20627),rR=(0,eN.x)({suspendedLink:[B.wp.color.accentPrimaryStronger],deploymentInfoWrapper:[B.wp.flex.growAndShrink(1),B.wp.rowWithGap(12),{':has( + [data-history-timeline-items="0"])':{"[data-timeline-line]":{display:"none"}}}],deploymentSuspension:[B.wp.flex.growAndShrink(1),B.wp.colWithGap(12)]});function rI(){var e,n,t=(0,nQ.A)(),r=(0,g.cF)(),i=(0,g.mj)().deployability,o=(e=(0,s._)({},rx,{variables:{replId:t}}),F.I(rk,e)).data;if(!r)return null;var a=(null==o?void 0:o.getRepl.__typename)==="Repl"&&(null===(n=o.getRepl.org)||void 0===n?void 0:n.__typename)==="Org"?"Org Settings > Billing":"Account > Subscription",l=i.redeploy.isAuthorized?"You can resume your deployment to make it available once again.":"Navigate to ".concat(a," to resolve."),c="If no action is taken your deployment will be deleted ".concat(r_.wp," days after the date it was suspended. For more assistance reach out to our support team at ");return r.suspendedReason===S.UV.Ubb?(0,p.Y)(j.S,{css:rR.deploymentInfoWrapper,children:(0,p.Y)(j.S,{css:rR.deploymentSuspension,children:(0,p.Y)(G.N,{icon:(0,p.Y)(rE.A,{}),text:["Your deployment was suspended due to a billing failure. ".concat(l," ").concat(c),(0,p.Y)("a",{css:rR.suspendedLink,href:"mailto:support@replit.com",children:(0,p.Y)("u",{children:"support@replit.com"})},""),"."]})})}):r.suspendedReason===S.UV.SubscriptionRequired?(0,p.Y)(j.S,{css:rR.deploymentInfoWrapper,children:(0,p.Y)(j.S,{css:rR.deploymentSuspension,children:(0,p.Y)(G.N,{icon:(0,p.Y)(rE.A,{}),text:["Your deployment was suspended due to requiring an active ".concat(rD.en," membership. ").concat(l," ").concat(c),(0,p.Y)("a",{css:rR.suspendedLink,href:"mailto:support@replit.com",children:(0,p.Y)("u",{children:"support@replit.com"})},""),"."]})})}):null}function rF(){var e=(0,R._)(["\n  fragment ExecuteScheduledJobExecution on ScheduledJobExecution {\n    id\n    startedAt\n    endedAt\n    status\n  }\n"]);return rF=function(){return e},e}function rT(){var e=(0,R._)(["\n  mutation ExecuteScheduledJob($deploymentId: String!) {\n    executeScheduledJob(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ExecuteScheduledJobResult {\n        execution {\n          ...ExecuteScheduledJobExecution\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return rT=function(){return e},e}var rP={},rL=(0,I.J1)(rF()),rU=(0,I.J1)(rT(),rL),rN=t(73559),rO=t(81239),rM=t(9885);function rB(e){var n,t=e.disabled,r=e.onSuccessfulExecution,i=(0,g.i$)(),o=(0,g.cF)(),a=(0,g.uS)(),l=(0,rO.A)().showError,c=(0,u._)((0,f.useState)(),2),d=c[0],h=c[1],m=function(e){h(e.message),l(e.message)},w=(0,u._)((n=(0,s._)({},rP,{onError:m,onCompleted:function(e){var n=e.executeScheduledJob;if("ExecuteScheduledJobResult"===n.__typename){null==r||r(n.execution);return}m(Error("An error occurred while executing the scheduled job"))}}),ny.n(rU,n)),2),y=w[0],b=w[1].loading,Y=!!(!i||!o||b||d||void 0!==t&&t),A=(null==o?void 0:o.status)===S.nH.Success,C=a===v.d.Ready,x=!Y&&C&&A,k=C?"You must successfully deploy your project before being able to run it":"Can't run while deployment is ".concat((0,rN.OS)(a));return(0,p.Y)(ty.m_,{tooltip:k,isDisabled:x,children:(0,p.Y)(eQ.$n,{text:"Run now",iconLeft:b?(0,p.Y)(nM.A,{}):(0,p.Y)(rM.A,{}),size:"small",disabled:Y||!x,onClick:function(){i&&!Y&&y({variables:{deploymentId:i}})}})})}var rH=t(1040),rz=t(80865),rW=t(6553),rG=t(65558),rV=t(18680),rj=t(84296);function rZ(e){return(0,p.Y)(rj.Ay,(0,c._)((0,s._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M3.75 4A.25.25 0 0 1 4 3.75h3a.25.25 0 0 1 .25.25v3a.25.25 0 0 1-.25.25H4A.25.25 0 0 1 3.75 7V4ZM4 2.25A1.75 1.75 0 0 0 2.25 4v3c0 .966.784 1.75 1.75 1.75h3A1.75 1.75 0 0 0 8.75 7V4A1.75 1.75 0 0 0 7 2.25H4ZM16.75 4a.25.25 0 0 1 .25-.25h3a.25.25 0 0 1 .25.25v3a.25.25 0 0 1-.25.25h-3a.25.25 0 0 1-.25-.25V4ZM17 2.25A1.75 1.75 0 0 0 15.25 4v3c0 .966.784 1.75 1.75 1.75h3A1.75 1.75 0 0 0 21.75 7V4A1.75 1.75 0 0 0 20 2.25h-3ZM4 16.75a.25.25 0 0 0-.25.25v3c0 .138.112.25.25.25h3a.25.25 0 0 0 .25-.25v-3a.25.25 0 0 0-.25-.25H4ZM2.25 17c0-.966.784-1.75 1.75-1.75h3c.966 0 1.75.784 1.75 1.75v3A1.75 1.75 0 0 1 7 21.75H4A1.75 1.75 0 0 1 2.25 20v-3ZM18 15.25A2.75 2.75 0 0 0 15.25 18v3a.75.75 0 0 0 1.5 0v-3A1.25 1.25 0 0 1 18 16.75h3a.75.75 0 0 0 0-1.5h-3Zm3 5a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-1.5 0V21a.75.75 0 0 1 .75-.75ZM12.75 7a.75.75 0 0 0-1.5 0v3A1.25 1.25 0 0 1 10 11.25H7a.75.75 0 0 0 0 1.5h3A2.75 2.75 0 0 0 12.75 10V7Zm-10.5 5a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75ZM12 2.25a.75.75 0 0 0 0 1.5h.01a.75.75 0 0 0 0-1.5H12Zm0 13a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-1.5 0V16a.75.75 0 0 1 .75-.75Zm4-4a.75.75 0 0 0 0 1.5h1a.75.75 0 0 0 0-1.5h-1Zm5 0a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-1.5 0V12a.75.75 0 0 1 .75-.75ZM12.75 20a.75.75 0 0 0-1.5 0v1a.75.75 0 0 0 1.5 0v-1Z",clipRule:"evenodd"})}))}var rq=(0,eN.x)({qrCodeWrapper:[B.wp.p(8),B.wp.borderRadius(4),{backgroundColor:"white"}]}),rK=function(e){var n=e.currentBuild,t=(0,rz._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:r_.co}),r=(0,u._)((0,f.useState)([]),2),i=r[0],o=r[1],a=t!==r_.co;return(0,f.useEffect)(function(){var e=(null===(i=n.repl.hostingDeployment)||void 0===i?void 0:i.__typename)==="HostingDeployment"&&n.repl.hostingDeployment.id,r=[];switch(n.provider){case S.Q0.Gce:case S.Q0.CloudRun:case S.Q0.Static:var i,a,l,s,c,u,d=(null===(a=n.repl.hostingDeployment)||void 0===a?void 0:a.__typename)==="HostingDeployment"?null===(l=n.repl.hostingDeployment)||void 0===l?void 0:l.replitAppSubdomain:void 0;!d&&(null===(s=n.repl.owner)||void 0===s?void 0:s.username)&&(d="".concat(n.repl.slug,"-").concat(n.repl.owner.username)),d&&r.push({href:"https://".concat(d).concat((null===(u=window)||void 0===u?void 0:null===(c=u.location)||void 0===c?void 0:c.hostname)!=="replit.com"?".staging":"",".").concat(t),private:!1})}if(n.repl.domains){var p=n.repl.domains.filter(function(n){return(null==n?void 0:n.hosting_deployment_id)===e}),f=!0,h=!1,m=void 0;try{for(var g,v=p[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var w=g.value;w&&r.push({href:"https://".concat(w.domain),private:!1,state:"verified"!==w.state?w.state:void 0})}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}}o(r)},[n,t]),(0,p.FD)(j.S,{gap:2,css:[B.wp.flex.growAndShrink(1)],children:[a?(0,p.Y)(G.N,{colorway:"warning",text:"The ".concat(r_.co," domain is currently unavailable, please use the ").concat(t," URL below.")}):null,i.map(function(e,n){return(0,p.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(V.EY,{css:[B.wp.flex.shrink(1)],multiline:!1,children:(0,p.Y)("a",{href:e.href,target:"_blank",css:[B.wp.color.foregroundDefault],children:e.href})}),e.private?(0,p.Y)(rV.A,{color:ek.LU.foregroundDefault}):null,(0,p.Y)("a",{href:e.href,target:"_blank",css:[B.wp.display.flex,B.wp.align.center],children:(0,p.Y)(rG.A,{color:ek.LU.foregroundDefault})}),(0,p.Y)(r$,{url:e.href}),e.state?(0,p.FD)(V.EY,{multiline:!1,children:["(","pushed_to_goval"===e.state?"verifying":e.state,")"]}):null]},"domains-".concat(n))})]})};function r$(e){var n=e.url,t=(0,u._)((0,f.useState)(!1),2),r=t[0],i=t[1];return(0,p.FD)(rW.Wv,{isOpen:r,onOpenChange:function(e){return i(e)},label:"QR Code",children:[(0,p.Y)(e_.K0,{alt:"QR Code",children:(0,p.Y)(rZ,{})}),(0,p.Y)(j.S,{align:"start",children:(0,p.Y)(j.S,{css:rq.qrCodeWrapper,children:(0,p.Y)(rH.Ay,{size:128,value:n})})})]})}var rJ=(0,O.i7)("\n    50% {\n      background-color: ".concat(ek.LU.accentPositiveDimmest,";\n      outline: 1px solid ").concat(ek.LU.accentPositiveDimmer,";\n      box-shadow: 0px 0px 32px rgba(0, 145, 24, 0.3);\n    }\n")),rQ=(0,eN.x)({deploymentInfo:[B.wp.colWithGap(8),B.wp.p(16),B.wp.borderRadius(),{outline:"1px solid transparent"}]}),rX=(0,eN.x)({textButton:[B.wp.reset.button,B.wp.color.foregroundDimmest,B.wp.hover(B.wp.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":[B.wp.cursor.pointer,B.wp.color.accentPrimaryStronger,B.wp.focusRing]}],textLink:B.wp.hover(B.wp.color.accentPrimaryStrongest),labeledSection:[B.wp.flex.growAndShrink(1),(0,C._)({},B.kL.min(400),[B.wp.flex.row,B.wp.align.baseline])],labeledSectionFullWidth:[B.wp.flex.growAndShrink(1),(0,C._)({},B.kL.min(400),[B.wp.flex.row,B.wp.align.baseline,B.wp.flex.grow(1),B.wp.justify.spaceBetween])],buildStatus:[B.wp.flex.shrink(1)],deploymentInfo:rQ.deploymentInfo,deploymentInfoAnimate:[rQ.deploymentInfo,{animation:"".concat(rJ," 700ms ease-out")}],deploymentInfoTitle:[B.wp.flex.wrap,B.wp.flex.shrink(0),B.wp.justify.spaceBetween],deploymentInfoContent:[(0,C._)({},B.kL.min(400),B.wp.colWithGap(4))],typeColumn:[B.wp.flex.wrap,B.wp.flex.shrink(1)]}),r0=function(e){var n=e.text,t=e.onClick,r=e.disabled;return(0,p.Y)("button",{css:rX.textButton,onClick:t,disabled:void 0!==r&&r,children:n})},r1=function(e){var n=e.name,t=e.sku,r=e.canManage,i=e.usageLink,o=e.onManageClick;return(0,p.FD)(j.S,{css:rX.typeColumn,row:!0,gap:6,children:[(0,p.Y)(V.EY,{multiline:!1,children:n}),t?(0,p.FD)(V.EY,{color:"dimmest",multiline:!1,children:["(",t,")"]}):null,(0,p.Y)(r0,{text:"Manage",onClick:o,disabled:!r}),i?(0,p.Y)(rw(),{legacyBehavior:!0,href:"/usage",passHref:!0,children:(0,p.Y)("a",{css:rX.textLink,children:(0,p.Y)(V.EY,{children:"See all usage"})})}):null]})},r2=function(e){var n=e.label,t=e.children,r=e.fullWidth;return(0,p.FD)(j.S,{css:r?rX.labeledSectionFullWidth:rX.labeledSection,children:[(0,p.Y)(j.S,{css:B.wp.minWidth(100),children:(0,p.Y)(V.EY,{css:B.wp.color.foregroundDimmer,multiline:!1,children:n})}),t]})},r4=function(e){var n=e.provider,t=e.machine,r=e.onViewBuildLogs,i=e.onManageClick,o=e.onViewAction,a=(0,g.uS)(),l=(0,g.cF)(),s=void 0!==l,c=n!==S.Q0.Static&&s&&null===l.hasImageTag,u=!!((a===v.d.Ready||a===v.d.Suspended)&&!c),d=null,h=null,m=null,w=null,y=(0,g.tq)(),b=(0,f.useRef)(void 0);(0,f.useEffect)(function(){y&&(b.current=null==y?void 0:y.id)},[y,null==y?void 0:y.id]);var A=(null==l?void 0:l.status)===S.nH.Success,C=(null==l?void 0:l.id)===b.current,x=(null==l?void 0:l.provider)!==S.Q0.Cron;switch(l&&(h=(0,p.FD)(p.FK,{children:[(0,p.Y)(r2,{label:"Status",children:(0,p.Y)(j.S,{css:rX.buildStatus,row:!0,gap:4,align:"center",children:(0,p.Y)(rY,{onClick:function(){r(l)}})})}),x?(0,p.Y)(r2,{label:"Domain",children:(0,p.Y)(rK,{currentBuild:l})}):null]})),n){case S.Q0.Gce:m=(0,p.Y)(r2,{label:"Type",fullWidth:!s,children:(0,p.Y)(r1,{name:rA[n],sku:null==t?void 0:t.configurationLabel,canManage:u,onManageClick:i})});break;case S.Q0.CloudRun:m=(0,p.Y)(r2,{label:"Type",fullWidth:!s,children:(0,p.Y)(r1,{name:rA[n],sku:t?"".concat(t.configurationLabel," / ").concat(t.maxInstances," Max"):"Beta",canManage:u,usageLink:!0,onManageClick:i})});break;case S.Q0.Static:m=(0,p.Y)(r2,{label:"Type",fullWidth:!s,children:(0,p.Y)(r1,{name:rA[n],sku:void 0,canManage:u&&s,onManageClick:i})});break;case S.Q0.Cron:if(!(null==l?void 0:null===(k=l.machineJob)||void 0===k?void 0:k.timezone))break;var k,_,D,E=null==l?void 0:null===(_=l.machineJob)||void 0===_?void 0:_.timezone,R=ry.m.find(function(e){return e.utc.includes(E)}),I=(null==R?void 0:R.abbr)||E;m=(0,p.Y)(r2,{label:"Type",fullWidth:!s,children:(0,p.Y)(r1,{name:rA[n],sku:"".concat(I,", ").concat(null==l?void 0:null===(D=l.machineJob)||void 0===D?void 0:D.crontab),canManage:!1,onManageClick:i})}),d=(0,p.Y)(rB,{onSuccessfulExecution:function(){o({type:Y.k.ChangeView,payload:{view:Y.P.Schedule}})}})}return(c&&(w=(0,p.Y)(j.S,{children:(0,p.Y)(G.N,{icon:(0,p.Y)(na.A,{}),colorway:"warning",text:"To upgrade, please redeploy."})})),h||m||w)?(0,p.FD)(n3.ui,{elevated:!0,css:A&&C?rX.deploymentInfoAnimate:rX.deploymentInfo,style:{paddingTop:l?12:16},children:[l?(0,p.FD)(j.S,{css:rX.deploymentInfoTitle,row:!0,gap:8,children:[(0,p.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Production"}),d,l.rollbackSourceBuildId?(0,p.Y)(tW,{build:l,background:"highest"}):null]}):null,(0,p.FD)(j.S,{css:rX.deploymentInfoContent,gap:8,children:[(0,p.Y)(rI,{}),h,m,w]})]}):null},r5=t(93415),r8=t(24373),r3=t(4124),r6=t(48686),r7=t(24948),r9=t(49259),ie=(0,eN.x)({subView:[B.wp.pb(12),B.wp.flex.growAndShrink(1),B.wp.colWithGap(12)],deploymentInfoWrapper:[{':has( + [data-history-timeline-items="0"])':{"[data-timeline-line]":{display:"none"}}}],deploymentInfo:[B.wp.pb(16),B.wp.flex.growAndShrink(1),B.wp.colWithGap(12)]}),it=function(e){var n,t,r,i=e.view,o=e.onLifecycleCommand,a=e.onViewAction,l=e.onError,s=e.openFile,c=e.hasAgentSession,d=(0,g.uS)(),h=(0,g.i$)(),m=(0,g.cF)(),w=(0,g.tq)(),y=(0,g.om)(),b=(0,g.g$)(),C=(0,r5.m6)(),x=(0,g.Tp)().rollbackToPreviousBuild,k=(n=(0,r3.useRouter)(),t=(0,r5.ME)(n,"storeReviewPrompt")&&(0,r5.Po)(n),r=(0,f.useCallback)(function(e){var n=e.source;t&&(0,r7._z)({messageType:r9.tF.REQUEST_STORE_REVIEW_PROMPT,source:n},(0,r6.Ak)())},[t]),(0,f.useMemo)(function(){return{isSupported:t,requestPrompt:r}},[t,r])),_=void 0!==m,D=(0,nQ.A)(),E=(0,g.ik)(D),R=null==m?void 0:m.provider,I=_&&m.machineConfiguration?{configurationId:m.machineConfiguration.id,configurationLabel:m.machineConfiguration.label,configurationSlug:m.machineConfiguration.slug,maxInstances:null==m?void 0:m.maxMachineInstances}:void 0,F=(0,r8.A)("deployments-pane","deployments-mobile-download"),T=F.shouldDisplay,P=F.dismiss,L=F.register;(0,f.useEffect)(function(){L()},[L]),(0,f.useEffect)(function(){_&&d===v.d.Deploying&&k.requestPrompt({source:"deployProgress"})},[k,_,d]);var U=(null==m?void 0:m.status)&&m.status===S.nH.Success&&T&&!C,N=(0,u._)((0,f.useState)(!1),2),O=N[0],M=N[1],B=(0,u._)((0,f.useState)(null),2),H=B[0],z=B[1],W=(0,u._)((0,f.useState)(null),2),G=W[0],V=W[1],Z=(0,u._)((0,f.useState)(null),2),q=Z[0],K=Z[1];(0,f.useEffect)(function(){(0,eL.Ae)({context:Y.P.Deployment})},[]),(0,f.useEffect)(function(){(d===v.d.Preparing||d===v.d.Deploying)&&(i===Y.P.DeploymentInProgress||G||a({type:Y.k.ChangeView,payload:{view:Y.P.DeploymentInProgress}}))},[d,i,a,G]);var $=(0,f.useRef)(void 0);(0,f.useEffect)(function(){$.current=null==w?void 0:w.id},[null==w?void 0:w.id]);var J=(null==m?void 0:m.status)===S.nH.Success,Q=(null==m?void 0:m.id)===$.current;(0,f.useEffect)(function(){J&&Q&&a({type:Y.k.ChangeView,payload:{view:Y.P.Deployment}})},[J,Q,a]);var X=null==w?void 0:w.status,ee=(0,f.useRef)(X);(0,f.useEffect)(function(){X&&(ee.current=X)},[X]);var en=(0,g.Ol)(),et=(0,g.Rh)();if(G)return(0,p.Y)(ro,{build:G,fs:y,openFile:s,openDebugChat:function(e){a({type:Y.k.OpenPane,payload:{type:"ghostwriterChat",data:{sessionId:e}}})},onBack:function(){V(null)},onViewAppLogs:function(){a({type:Y.k.ChangeView,payload:{view:Y.P.Logs}})}});if(H)return(0,p.Y)(ri,{build:H,onBack:function(){z(null)},onClickRollback:function(e){x({rollbackCandidateBuildId:H.id,envVars:e})},onError:function(e){z(null),l(e)}});if(q===S.Q0.CloudRun)return(0,p.Y)(np.J,{onError:l,onConfirm:function(e){a({type:Y.k.SendDeploymentLifecycleCommand,payload:{command:S.jP.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return K(null)}});if(q===S.Q0.Gce)return(0,p.Y)(rg.VW,{replId:D,isTeamRepl:E,initialMachineConfiguration:I,onConfirm:function(e){a({type:Y.k.SendDeploymentLifecycleCommand,payload:{command:S.jP.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return K(null)},onError:l});var er=!_||!h||d!==v.d.Ready&&d!==v.d.Suspended&&d!==v.d.ProcessingLifecycleCommand,ei=function(e){a({type:Y.k.OpenPane,payload:{type:"ghostwriterChat",data:{sessionId:e}}})};return(0,p.Y)(p.FK,{children:(0,p.Y)(A.A,{children:(0,p.FD)(j.S,{children:[(0,p.FD)(j.S,{row:!0,gap:12,children:[_?(0,p.Y)(nd,{type:"future"}):null,(0,p.FD)(j.S,{css:ie.subView,children:[er?null:(0,p.Y)(ns,{dotReplit:en,fs:y,secrets:b,ports:et,deploymentId:h,replId:D,onError:l,expanded:O,setExpanded:M,shouldShowMobileTour:null!=U&&U,onDismissMobileTour:P,openNetworkingPane:function(){a({type:Y.k.OpenPane,payload:{type:"networking"}})},onResume:function(){o({command:S.jP.Resume})},hasAgentSession:c}),i===Y.P.DeploymentInProgress?(0,p.Y)(t_,{openFile:s,openDebugChat:ei,viewBuildLogsOnLoad:!_,onViewLogs:function(){a({type:Y.k.ChangeView,payload:{view:Y.P.Logs}})},onCanceled:function(){a({type:Y.k.ChangeView,payload:{view:Y.P.Deployment}}),l("Build cancelled")},onError:l}):null]})]}),_&&R?(0,p.FD)(p.FK,{children:[(0,p.Y)(t6,{type:"failureQueue",onViewBuildLogs:V,openFile:s,openDebugChat:ei,view:i,provider:R}),(0,p.FD)(j.S,{css:ie.deploymentInfoWrapper,row:!0,gap:12,children:[(0,p.Y)(nd,{type:"present"}),(0,p.Y)(j.S,{css:ie.deploymentInfo,children:(0,p.Y)(r4,{provider:R,machine:I,onViewBuildLogs:V,onManageClick:function(){if(R===S.Q0.CloudRun||R===S.Q0.Gce){K(R);return}R===S.Q0.Static&&a({type:Y.k.ChangeView,payload:{view:Y.P.Settings}})},onViewAction:a})})]}),(0,p.Y)(t6,{onViewBuildLogs:V,openFile:s,openDebugChat:ei,view:i,provider:R,onClickRollback:function(e){z(e)}})]}):null]})})})};function ir(){var e=(0,R._)(["\n  fragment DeploymentsNewDeploymentRepl on Repl {\n    id\n    slug\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    org {\n      __typename\n      id\n      slug\n      type\n    }\n  }\n"]);return ir=function(){return e},e}function ii(){var e=(0,R._)(["\n  query DeploymentsNewDeployment($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentsNewDeploymentRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return ii=function(){return e},e}var io={},ia=(0,I.J1)(ir()),il=(0,I.J1)(ii(),ia);function is(){var e=(0,R._)(["\n  query DeploymentsPaneIntro($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n        }\n        ...DeploymentsNewDeploymentRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return is=function(){return e},e}var ic={},iu=(0,I.J1)(is(),ia),id=t(52097),ip=t(98899),ih=t(2545),im=t(28896),ig=t(87736),iv=t(38169),iw=t(19706),iy=t(74406),ib=(0,eN.x)({cta:[B.wp.width("100%"),B.wp.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[B.wp.colWithGap(8),B.wp.align.center],ctaStatusBanner:[B.wp.textAlign.left],disabledBanner:[B.wp.py(6),{alignSelf:"center"}]});function iS(e){var n=e.provider,t=e.isDeployable,r=e.isDeployableCode,i=e.isDeployableExplanation,o=e.isIncludedInSubscription,a=e.loading,l=e.onProviderContinue,s=e.refetchDeployabilityQueryData,c=e.setShowPaymentMethodForm,u=e.showPaymentMethodForm,d=e.setShowSupportForm,f=e.replId,h=e.org,m=e.hasAgentSession,v=(0,g.gq)(),w=(0,r5.m6)();if(!t&&w)return(0,p.Y)(G.N,{text:i,colorway:"grey",css:ib.disabledBanner});if(o)return(0,p.FD)(p.FK,{children:[(0,p.Y)(eQ.$n,{colorway:"primary",onClick:l,text:"Included in your subscription",loading:a,css:ib.cta}),(0,p.Y)(V.EY,{color:"dimmer",children:i})]});var y=function(){if(h){var e=(0,im.EG)(h).settings.href.toString()+"/billing";window.open(e,"_blank");return}c()};switch(r){case S.S4.RequiresActiveSubscription:return(0,p.Y)(j.S,{css:ib.ctaContainer,children:(0,p.Y)(ig.A,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:ib.cta,colorway:"primary",variant:"default",disabled:u,onPlanCheckoutComplete:s,highlightUpsell:"deployments"})});case S.S4.RequiresPaymentMethodOrSubscription:return(0,p.FD)(j.S,{css:ib.ctaContainer,children:[(0,p.Y)(ig.A,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:ib.cta,colorway:"primary",variant:"default",disabled:u,onPlanCheckoutComplete:s}),(0,p.Y)(eQ.$n,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:ib.cta,disabled:u,loading:a,iconLeft:(0,p.Y)(iy.A,{}),onClick:y})]});case S.S4.RequiresSmsVerification:return(0,p.Y)(ip.A,{context:S.SG.Deployments,onSuccess:s});case S.S4.RequiresPaymentMethod:return(0,p.Y)(eQ.$n,{colorway:"primary",text:"Add a payment method",css:ib.cta,disabled:u,loading:a,iconLeft:(0,p.Y)(iy.A,{}),onClick:function(){return y()}});case S.S4.RequiresUnbanning:return(0,p.Y)(iw.d,{text:"Your account currently has restrictions on deploying. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,p.Y)(na.A,{}),css:ib.ctaStatusBanner,onClick:function(){return d()}});case S.S4.InsufficientBudget:return(0,p.FD)(p.FK,{children:[(0,p.Y)(G.N,{text:"You've reached your monthly usage budget. Increase your budget to continue deploying.",colorway:"warning",icon:(0,p.Y)(na.A,{}),css:ib.ctaStatusBanner}),(0,p.Y)(iv.h,{onUpdateSuccess:s,replId:f})]});case S.S4.FeatureDisabled:case S.S4.FeatureUnsupportedForReplitTeams:case S.S4.FeatureUnsupportedForTeamsEdu:case S.S4.FeatureUnsupportedForTeamsFree:case S.S4.FeatureUnsupportedForTeamsPro:case S.S4.InsufficientPermissions:case S.S4.InsufficientQuota:case S.S4.RequiresActiveTeamsSubscription:case S.S4.RequiresEmailVerification:if(r===S.S4.InsufficientQuota&&"static"===n)return(0,p.FD)(j.S,{css:ib.ctaContainer,children:[(0,p.Y)(G.N,{text:"You have reached the maximum number of Static deployments available on your plan.",colorway:"grey",css:ib.disabledBanner}),(0,p.Y)(ig.A,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:ib.cta,colorway:"primary",variant:"default",disabled:u,onPlanCheckoutComplete:s})]});return(0,p.Y)(G.N,{text:i,colorway:"grey",css:ib.disabledBanner});case S.S4.Authorized:case S.S4.AuthorizedQuota:return(0,p.FD)(p.FK,{children:[m&&n===S.Q0.Static?(0,p.Y)(G.N,{text:"Static deployments are not yet officially supported for Agent Apps.",colorway:"warning",icon:(0,p.Y)(na.A,{}),css:ib.cta}):null,(0,p.Y)(eQ.$n,{colorway:"primary",onClick:l,text:"Set up your deployment",loading:a,css:ib.cta}),v&&!v.hasDeploymentRepricing?(0,p.Y)(j.S,{row:!0,gap:8,align:"center",justify:"center",children:(0,p.Y)(ih.u,{})}):null]});default:(0,id.A)(r)}}var iY=t(28113),iA=t(88184),iC=t(97302),ix=t(86960),ik=t(67084),i_=t(14545),iD=(0,eN.x)({type:[B.wp.borderRadius(8),B.wp.p(8)]});function iE(e){var n,t,r,i=e.replId,o=e.initialState,a=e.fs,l=e.secrets,c=e.dotReplit,d=e.ports,h=e.onBack,m=e.onDeploy,v=e.onError,w=e.openNetworkingPane,y=e.hasAgentSession,b=(0,u._)((0,f.useState)(o),2),Y=b[0],C=b[1],x=(n=(0,s._)({},io,{variables:{replId:i},onError:function(e){return v(e.message)}}),F.I(il,n)),k=x.data,_=x.loading,D=(0,g._k)().scheduledDeploymentCostDetails,E=(null==k?void 0:k.getRepl.__typename)==="Repl"?k.getRepl:null,R=E?(0,iC.ER)({replSlug:E.slug,username:null===(t=E.owner)||void 0===t?void 0:t.username}):"",I=(0,i_.Os)(ik.IW.id,ik.Gp.ConfirmDeployment),T=(0,i_.Os)(ik._t.id,ik.ij.ConfirmDeployment);if(_)return(0,p.Y)(ne.cN,{});if(!E)return null;var P=(null==E?void 0:null===(r=E.owner)||void 0===r?void 0:r.__typename)==="Team";return Y.type===S.Q0.Static?(0,p.FD)(p.FK,{children:[(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(e_.K0,{alt:"Back",tooltipBehavior:"hidden",onClick:h,children:(0,p.Y)(t4.A,{})})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(n3.ui,{css:iD.type,elevated:!0,children:(0,p.Y)(r2,{label:"Type",fullWidth:!0,children:(0,p.Y)(r1,{name:rA[Y.type]})})})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(nn.S,{initialSubdomain:R,deploymentId:null,replId:i,provider:Y.type,onError:v,onCancel:h,onDeploy:m,dotReplit:c,fs:a,ports:d,secrets:l,openNetworkingPane:w,hasAgentSession:y})})]}):Y.type===S.Q0.Gce?(0,p.FD)(p.FK,{children:[(0,p.Y)(rg.VW,{replId:i,isTeamRepl:P,onBack:h,onError:v,onChange:function(e){C({type:S.Q0.Gce,machine:e})}}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(nn.S,{initialSubdomain:R,deploymentId:null,replId:i,provider:Y.type,machine:Y.machine,onError:v,onCancel:h,onDeploy:m,fs:a,secrets:l,dotReplit:c,ports:d,openNetworkingPane:w,hasAgentSession:y})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.FD)(V.EY,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,p.Y)("a",{href:iA.ik.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})})]}):Y.type===S.Q0.Cron?(0,p.FD)(p.FK,{children:[(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(ne.fw,{onBack:h})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.FD)(j.S,{gap:4,children:[(0,p.Y)(V.EY,{variant:"subheadBig",children:"Scheduled Job configuration"}),(0,p.FD)(V.EY,{variant:"small",color:"dimmer",children:["Scheduled deployments run at a specified time and frequency configured by you. During executions they spin up an on demand machine to run your code. You are billed for the total number of compute units used across all machines plus $",D.fixedCostPerMonth,"/month per scheduled deployment scheduler."]})]})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(ix.K,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app.",detail:"More machine configurations coming soon.",children:(0,p.Y)(n3.ui,{css:iD.type,elevated:!0,children:(0,p.Y)(r1,{name:"1 vCPU / 2 GiB RAM",sku:"$".concat(D.fixedConfigurationCostPerSec,"/sec")})})})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(nn.S,{initialSubdomain:R,deploymentId:null,replId:i,provider:Y.type,onError:v,onCancel:function(){return h()},onDeploy:m,fs:a,secrets:l,dotReplit:c,ports:d,openNetworkingPane:w,hasAgentSession:y})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.FD)(V.EY,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,p.Y)("a",{href:iA.ik.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})})]}):Y.machine?(0,p.FD)(p.FK,{children:[(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(e_.K0,{alt:"Back",tooltipBehavior:"hidden",onClick:function(){C({type:S.Q0.CloudRun,machine:null}),I.goto(ik.Gp.ApproveDeployment),T.goto(ik.ij.ApproveDeployment)},children:(0,p.Y)(t4.A,{})})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(n3.ui,{css:iD.type,elevated:!0,children:(0,p.Y)(r2,{label:"Type",fullWidth:!0,children:(0,p.Y)(r1,{name:rA[Y.type],sku:"".concat(Y.machine.configurationLabel," / ").concat(Y.machine.maxInstances," Max"),canManage:!0,onManageClick:function(){C({type:S.Q0.CloudRun,machine:null})}})})})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(nn.S,{initialSubdomain:R,deploymentId:null,replId:i,provider:Y.type,machine:Y.machine,onError:v,onCancel:function(){return C({type:S.Q0.CloudRun})},onDeploy:m,fs:a,secrets:l,dotReplit:c,ports:d,openNetworkingPane:w,hasAgentSession:y})})]}):(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(np.J,{onBack:h,onError:v,onConfirm:function(e){C({type:S.Q0.CloudRun,machine:e})}})})}var iR=t(93548),iI=t(51895),iF=t(4930),iT=t(11406),iP=t(73790),iL=t(76860),iU=t(58127),iN=t(39334),iO=B.kL.min(600),iM={order:"--provider-order"},iB={order:"var(".concat(iM.order,")")},iH=(0,O.AH)([B.wp.width("100%"),B.wp.maxWidth(340),(0,C._)({},iO,{order:iB.order})]),iz=(0,O.AH)([B.wp.reset.button,B.wp.overflow("hidden"),B.wp.position.relative,B.wp.focusRing,B.wp.borderRadius(),B.wp.width("100%")]),iW=(0,eN.x)({self:[iH,{"&::after":{content:"none"}}],selfLoading:[iH,W.S.foregroundPulse(),B.wp.border({color:ek.LU.backgroundHighest})],button:[iz,B.wp.border({color:ek.LU.outlineDimmer}),{"&:not(.is-disabled)":[e0.b.filledAndOutlined],"&.is-disabled":[B.wp.backgroundColor.backgroundHigher,{cursor:"not-allowed"}]}],buttonActive:[iz,B.wp.cursor.pointer,B.wp.backgroundColor.accentPrimaryDimmest,B.wp.border({color:ek.LU.accentPrimaryStronger})],content:[B.wp.p(8),B.wp.colWithGap(4),(0,C._)({},iO,B.wp.py(12))],contentRecommended:[B.wp.p(8),B.wp.colWithGap(4),(0,C._)({},iO,{paddingTop:12,paddingBottom:20})],recommended:[B.wp.py(4),B.wp.backgroundColor.backgroundHighest],recommendedActive:[B.wp.py(4),B.wp.backgroundColor.accentPrimaryDimmer],icon:[B.wp.display.none,B.wp.color.foregroundDimmer,B.wp.center,(0,C._)({},iO,B.wp.display.flex)],iconActive:[B.wp.display.none,B.wp.color.accentPrimaryStrongest,B.wp.center,(0,C._)({},iO,B.wp.display.flex)],title:[B.wp.center]});function iG(e){var n,t=e.loading,r=e.active,i=e.disabled,o=void 0!==i&&i,a=e.provider,l=e.onClick,s=e.title,c=e.description,u=e.recommended,d=e.index,f=e.isAgentDeployment,h=(n={},(0,C._)(n,S.Q0.CloudRun,(0,p.Y)(iP.A,{size:32})),(0,C._)(n,S.Q0.Gce,(0,p.Y)(iL.A,{size:32})),(0,C._)(n,S.Q0.Static,(0,p.Y)(iU.A,{size:32})),(0,C._)(n,S.Q0.Cron,(0,p.Y)(nO.A,{size:32})),n)[a];return(0,p.Y)("span",{css:t?iW.selfLoading:iW.self,children:(0,p.FD)("button",{css:r?iW.buttonActive:iW.button,className:o?"is-disabled":"",onClick:function(){return l(a)},disabled:t||o,style:(0,C._)({},iM.order,d),children:[u?(0,p.Y)(j.S,{css:r?iW.recommendedActive:iW.recommended,children:(0,p.Y)(V.EY,{variant:"small",children:f?"Chosen by Agent":"Recommended"})}):null,(0,p.FD)(j.S,{css:u?iW.contentRecommended:iW.content,children:[(0,p.Y)(j.S,{css:r?iW.iconActive:iW.icon,children:h}),(0,p.FD)(j.S,{children:[(0,p.Y)(j.S,{css:iW.title,row:!0,gap:4,children:(0,p.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:s})}),(0,p.Y)(V.EY,{multiline:!1,variant:"small",children:c})]})]})]})})}var iV=(0,eN.x)({container:[B.wp.maxWidth(420),{marginLeft:"auto",marginRight:"auto"}],item:[{display:"grid",gridTemplateColumns:"56px auto",gap:20}],text:[B.wp.flex.growAndShrink(1),B.wp.textAlign.left]});function ij(e){var n=e.header,t=e.info;return(0,p.FD)(j.S,{css:iV.container,gap:12,children:[(0,p.Y)(V.EY,{variant:"subheadDefault",children:n}),t.map(function(e,n){return(0,p.FD)(j.S,{css:iV.item,align:"center",children:[e.icon,(0,p.Y)(V.EY,{css:iV.text,children:e.text})]},n)})]})}var iZ=[S.Q0.Gce,S.Q0.CloudRun,S.Q0.Static,S.Q0.Cron],iq=(0,eN.x)({container:[B.wp.textAlign.center,tR.R1.maxWidth],title:[B.wp.width("100%"),B.wp.maxWidth(400),B.wp.align.center,{marginLeft:"auto",marginRight:"auto"}],body:B.wp.colWithGap(16),providers:[B.wp.flex.column,B.wp.align.center,(0,C._)({gap:8},iO,[B.wp.flex.row,B.wp.align.center,{gap:12}])],providerDetails:B.wp.colWithGap(16),ctaGroup:B.wp.colWithGap(8),payment:[B.wp.p(16),B.wp.borderRadius("container"),B.wp.textAlign.left,B.wp.shadow(2)]}),iK=function(e){var n,t,r,i,o,a=e.replId,l=e.onError,c=e.onDeploy,d=e.onViewAction,h=e.initialSelectedProvider,m=e.disableUnrecommendedProviders,v=void 0!==m&&m,y=e.hasAgentSession,x=e.flow,k=(0,g.om)(),_=(0,g.g$)(),D=(0,g.Ol)(),E=(0,g.Rh)(),R=(0,g._k)(),I=R.getRvmDeploymentCostDetailsByConfigurationSlug,T=R.autoscaleDeploymentCostDetails,P=R.staticDeploymentCostDetails,L=R.scheduledDeploymentCostDetails,U=(0,u._)((0,f.useState)(!1),2),N=U[0],O=U[1],M=(0,u._)((0,f.useState)(!1),2),B=M[0],H=M[1],z=(0,u._)((0,f.useState)(null!=h?h:null),2),W=z[0],G=z[1],Z=(0,g.kM)({replId:a,onError:l,dotReplitService:D}),q=Z.activeProvider,K=Z.setActiveProvider,$=Z.recommendedProvider,J=(0,u._)((0,f.useState)(null!==(i=null==x?void 0:x.skipIntro)&&void 0!==i&&i),2),Q=J[0],X=J[1];v||(v=Q&&!!(null==x?void 0:x.isAgentDeployment));var ee=(n=(0,s._)({},ic,{variables:{id:a},onError:function(e){return l(e.message)}}),F.I(iu,n)),en=ee.loading,et=ee.data,er=(0,u._)((0,f.useState)(!1),2),ei=er[0],eo=er[1],ea=(0,g.mj)(),el=ea.getDeployabilityByProvider,es=ea.refetch,ec=el(q),eu=ec.deploy,ed=ec.isIncludedInSubscription,ep=eu.isAuthorized,ef=eu.code,eh=eu.message,em=en||ei||void 0===q,eg=(0,rz._P)({controlName:"flag-disable-agent-static-deployments",logFlagToAnalytics:!1});(0,f.useEffect)(function(){(0,eL.Ae)({context:"intro"})},[]);var ev=(0,iI.Vv)(),ew=ev.getDescription,ey=ev.Icon,eb=(null==et?void 0:null===(t=et.getRepl)||void 0===t?void 0:t.__typename)==="Repl"&&(null===(r=et.getRepl.org)||void 0===r?void 0:r.type)==="team"?et.getRepl.org:void 0;(0,f.useEffect)(function(){Q&&ep&&void 0!==q&&W!==q&&G(q)},[q,W,Q,ep]);var eS=(0,f.useCallback)((0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return eo(!0),[4,es()];case 1:return e.sent(),eo(!1),[2]}})}),[es,eo]),eY=(0,i_.Os)(ik.IW.id,ik.Gp.SetupDeployment),eA=(0,i_.Os)(ik._t.id,ik.ij.SetupDeployment);if(W)return(0,p.Y)(iE,{replId:a,initialState:W?{type:W}:{type:S.Q0.Gce,didCheckout:!0},fs:k,secrets:_,dotReplit:D,ports:E,onDeploy:c,onBack:function(){X(!1),G(null),eY.goto(ik.Gp.SetupDeployment),eA.goto(ik.ij.SetupDeployment)},onError:l,hasAgentSession:y,openNetworkingPane:function(){d({type:Y.k.OpenPane,payload:{type:"networking"}})}});var eC=y&&eg&&$!==S.Q0.Static,ex=(o={title:"Deploy to production",subtitle:ew({type:"deployments"})},(0,C._)(o,S.Q0.Gce,{display:!0,title:"Reserved VM",subtitle:"Always On Servers",header:"Reserved VMs are for long-running jobs and apps",info:[{text:"Reserved VMs ensure high uptime, minimizing disruptions for apps requiring persistent session data.",icon:(0,p.Y)(iY.Qm,{})},{text:"Reserved VMs are billed hourly starting at $".concat(I("e2-micro").costPerHour,"/hour."),icon:(0,p.Y)(iY.QX,{})},{text:"Suitable for bots, stateful APIs, webscraping, and long-running jobs.",icon:(0,p.Y)(iY.XD,{})}]}),(0,C._)(o,S.Q0.CloudRun,{display:!0,title:"Autoscale",subtitle:"".concat($===S.Q0.CloudRun?"Best choice for most apps":"Meet demand exactly"),header:"Scale up and down to meet demand exactly",info:[{text:"Automatically scales from zero to any level of demand, making it inexpensive for most apps and effortless when you go viral.",icon:(0,p.Y)(iY.Js,{})},{text:T.fixedCostPerMonth?"Usage-based pricing. Billed at $".concat(T.costPerComputeUnitUsd," per compute unit, plus a fixed cost of $").concat(T.fixedCostPerMonth," per month per deployment."):"Compute units are billed at $".concat(T.costPerComputeUnitUsd," per compute unit."),icon:(0,p.Y)(iY.iw,{})},{text:"Suitable for web apps and stateless APIs.",icon:(0,p.Y)(iY.XD,{})}]}),(0,C._)(o,S.Q0.Static,{display:!eC,title:"Static pages",subtitle:"Simple HTML websites",header:"Basic websites with no backend server",info:[{text:"You only pay for outbound data transfer included in Replit plans. $".concat(P.outboundDataCostPerGib,"/GiB otherwise."),icon:(0,p.Y)(iY.ly,{})},{text:"No database or data persistence.",icon:(0,p.Y)(iY.Y9,{})},{text:"Suitable for HTML, CSS, JavaScript sites.",icon:(0,p.Y)(iY.XD,{})}]}),(0,C._)(o,S.Q0.Cron,{display:!0,title:"Scheduled",subtitle:"Time-based job scheduler",header:"The easiest way to schedule for your apps to run",info:[{text:"Scheduled deployments run at a specified time and frequency configured by you.",icon:(0,p.Y)(iY.Y9,{})},{text:"Usage-based pricing. Each scheduled job is billed at $".concat(L.costPerComputeUnitUsd," per compute unit + $").concat(L.fixedCostPerMonth," per month for the scheduler."),icon:(0,p.Y)(iY.iw,{})},{text:"Suitable for internal tools, one-off tasks, and Cron jobs.",icon:(0,p.Y)(iY.XD,{})}]}),o);return(0,p.FD)(A.A,{centered:!0,children:[(0,p.Y)(eX.a,{isOpen:B,onRequestClose:function(){return H(!1)},children:(0,p.Y)(iT.A,{onRequestClose:function(){return H(!1)}})}),(0,p.FD)(j.S,{css:iq.container,gap:32,children:[Q?null:(0,p.FD)(j.S,{css:iq.title,gap:4,children:[(0,p.Y)(ey,{pane:{type:"deployments"},size:48}),(0,p.Y)(V.Y9,{level:1,variant:"subheadBig",children:ex.title}),(0,p.FD)(V.EY,{color:"dimmer",children:[ex.subtitle," ",(0,p.Y)("a",{href:"https://docs.replit.com/category/replit-deployments",target:"_blank",rel:"noopener",children:"Learn more."})]}),(0,p.Y)(iF.v,{iconLeft:(0,p.Y)(iN.A,{}),text:" Choosing the right deployment type",href:"https://www.youtube.com/watch?v=sXP5d0k1atk",target:"_blank"})]}),(0,p.FD)(j.S,{css:iq.body,children:[(0,p.Y)(j.S,{css:iq.providers,children:iZ.map(function(e,n){if(!ex[e].display)return null;var t=ex[e],r=t.title,i=t.subtitle,o=q===e,a=$===e;return(0,p.Y)(iG,{provider:e,loading:em,active:o,onClick:function(e){K(e),O(!1)},title:r,description:i,recommended:a,index:e===$&&0===n?1.5:e===$&&2===n?.5:n,disabled:v&&!a,isAgentDeployment:(null==x?void 0:x.isAgentDeployment)&&a},e)})}),(0,p.FD)(j.S,{css:iq.ctaGroup,children:[(0,p.Y)(iS,{loading:em,provider:q,isDeployable:ep,isDeployableCode:ef,isDeployableExplanation:eh,isIncludedInSubscription:ed,onProviderContinue:function(){q&&(Q||(G(q),eY.goto(ik.Gp.ApproveDeployment),eA.goto(ik.ij.ApproveDeployment)))},refetchDeployabilityQueryData:eS,setShowPaymentMethodForm:function(){return O(!0)},showPaymentMethodForm:N,setShowSupportForm:function(){return H(!0)},org:eb,replId:a,hasAgentSession:y}),N?(0,p.Y)(n3.ui,{elevated:!0,css:iq.payment,children:(0,p.Y)(iR.y,{onSuccess:(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return O(!1),[4,eS()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]})]}),(0,p.Y)(j.S,{css:iq.providerDetails,children:!Q&&q?(0,p.Y)(ij,{header:ex[q].header,info:ex[q].info}):null})]})]})},i$=t(57576),iJ=t(35992);function iQ(){var e=(0,R._)(["\n  fragment ReplLogLine2 on ReplLog {\n    __typename\n    timestamp\n    line\n    level\n    isFromReplit\n    deploymentId\n    executionId\n    buildId\n  }\n"]);return iQ=function(){return e},e}function iX(){var e=(0,R._)(["\n  query HostingDeploymentLogs2(\n    $replId: String!\n    $deploymentId: String!\n    $executionId: String\n    $start: DateTime\n    $end: DateTime\n    $message: String\n    $level: LogLevel\n    $limit: Int\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        __typename\n        hostingDeploymentLogs(\n          deploymentId: $deploymentId\n          executionId: $executionId\n          start: $start\n          end: $end\n          message: $message\n          level: $level\n          limit: $limit\n        ) {\n          ... on ReplLogs {\n            result {\n              ...ReplLogLine2\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return iX=function(){return e},e}function i0(){var e=(0,R._)(["\n  subscription HostingDeploymentLogUpdates(\n    $input: HostingDeploymentLogUpdatesInput!\n  ) {\n    hostingDeploymentLogUpdates(input: $input) {\n      ...ReplLogLine2\n    }\n  }\n  ","\n"]);return i0=function(){return e},e}var i1={},i2=(0,I.J1)(iQ()),i4=(0,I.J1)(iX(),i2),i5=(0,I.J1)(i0(),i2),i8=t(32039),i3=t(90001),i6=(0,f.createContext)(null),i7=function(){var e=(0,f.useContext)(i6);if(!e)throw Error("Expected log context in context");return e},i9=function(e){var n,t,r,i,o=e.deploymentId,a=e.replId,l=e.executionId,d=e.openFile,p=(0,u._)((0,f.useState)(null),2),h=p[0],m=p[1],g=(0,u._)((0,f.useState)([]),2),v=g[0],S=g[1],Y=(0,u._)((0,f.useState)(),2),A=Y[0],C=Y[1],x=(0,u._)((0,f.useState)({message:"",executionId:l,start:null,end:null,level:null}),2),k=x[0],_=x[1],D=(0,f.useCallback)(function(){return _({message:"",executionId:l,start:null,end:null,level:null})},[l]),E=(0,u._)((0,f.useState)(!0),2),R=E[0],I=E[1],T=(0,u._)((0,f.useState)(!1),2),P=T[0],L=T[1],U=(0,u._)((0,f.useState)(!1),2),N=U[0],O=U[1],M=(0,u._)((0,f.useState)(!1),2),B=M[0],H=M[1],z=(0,u._)((0,i8.A)("deployments-logs-color",!0),2),W=z[0],G=z[1],V=(0,f.useRef)(!1),j=(0,i3.A)(function(e){var n=e.width;if(void 0!==n){var t=n>500;O(t),!V.current&&(V.current=!0,L(t))}}),Z=(0,i$.Xj)(),q=(n={ssr:!1,fetchPolicy:"network-only",variables:{deploymentId:o,replId:a,executionId:k.executionId?"d-scheduled-".concat(o,"-").concat(k.executionId):void 0,limit:100,level:k.level,message:k.message,start:null===(r=k.start)||void 0===r?void 0:r.toDate(Z).toISOString(),end:null===(i=k.end)||void 0===i?void 0:i.toDate(Z).toISOString()},onError:function(){C("Something went wrong"),S([])},onCompleted:function(e){if("hostingDeploymentLogs"in e.getRepl){if("ReplLogs"===e.getRepl.hostingDeploymentLogs.__typename){C(void 0);var n=e.getRepl.hostingDeploymentLogs.result,t=(0,y._)(n).reverse();if(!h){if(n.length>0){var r=new Date(n[0].timestamp);r.setSeconds(r.getSeconds()+1),m(r.toISOString())}else m(new Date().toISOString())}S(t)}else C(e.getRepl.hostingDeploymentLogs.message),S([])}}},t=(0,s._)({},i1,n),F.I(i4,t)),K=q.loading,$=q.fetchMore,J=q.subscribeToMore,Q=q.variables;(0,f.useEffect)(function(){K&&m(null)},[K]),(0,f.useEffect)(function(){m(null)},[k,o,a,l]),(0,f.useEffect)(function(){if(h)return J({document:i5,variables:{input:(0,c._)((0,s._)({deploymentId:o,executionId:l},k),{start:k.end?k.start:h,level:k.level||void 0})},updateQuery:function(e,n){var t=n.subscriptionData;return(0,iJ.jM)(e,function(e){if(!("hostingDeploymentLogs"in e.getRepl))return e;if("ReplLogs"===e.getRepl.hostingDeploymentLogs.__typename){var n=t.data.hostingDeploymentLogUpdates;e.getRepl.hostingDeploymentLogs.result.unshift(n)}return e})}})},[J,o,l,K,k,h]);var X=(0,f.useRef)(null),ee=(0,f.useRef)(!1),en=(0,f.useRef)(!1),et=(0,f.useCallback)((0,w._)(function(){var e,n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(e=X.current?Math.abs(X.current.getTime()-Date.now()):0,K||X.current&&e<500||en.current||ee.current)return[2];return(n=new Date(v[0].timestamp)).setSeconds(n.getSeconds()-1),ee.current=!0,[4,$({variables:(0,c._)((0,s._)({},Q),{end:n.toISOString()})})];case 1:return t=i.sent().data,ee.current=!1,"hostingDeploymentLogs"in t.getRepl&&"ReplLogs"===t.getRepl.hostingDeploymentLogs.__typename&&(X.current=new Date,0===t.getRepl.hostingDeploymentLogs.result.length?en.current=!0:(r=(0,y._)(t.getRepl.hostingDeploymentLogs.result).reverse(),S(function(e){return(0,y._)(r).concat((0,y._)(e))}))),[2]}})}),[$,K,v,Q]);return(0,f.useMemo)(function(){return{logs:v,loading:K,error:A,fetchPage:et,isLive:R,setIsLive:I,isExpanded:P,setIsExpanded:L,filter:k,setFilter:_,clearFilter:D,deploymentId:o,containerRef:j,isWide:N,isWrapped:B,setIsWrapped:H,openFile:d,isColorful:W,setIsColorful:G}},[D,j,o,A,et,k,W,P,R,N,B,K,v,d,G])},oe=t(4880),on=t(16088),ot=t(90629),or=t(25024),oi=t(46231),oo=t.n(oi),oa=t(50683),ol=t(36245),os=(0,eN.x)({root:[B.wp.transition.none,B.wp.reset.button,B.wp.flex.row,B.wp.align.center,B.wp.font.code,B.wp.fontSize(12),B.wp.textAlign.left,B.wp.position.absolute,B.wp.top(0),B.wp.left(0),B.wp.width("100%"),B.wp.color.foregroundDefault,B.wp.border({color:ek.LU.outlineDimmest,direction:"bottom"}),B.wp.highRes({borderWidth:.5}),{outline:"none",userSelect:"auto","--cell-background":"".concat(ek.LU.backgroundDefault),"&:hover":{backgroundColor:ek.LU.interactiveBackground,"--cell-background":"".concat(ek.LU.interactiveBackground),".copy":{display:"block"}},'&[data-error="true"]':[B.wp.colorMixBg(ek.LU.accentNegativeDimmest,"transparent"),{borderBottomColor:ek.LU.accentNegativeDimmest,boxShadow:"0 -1px 0 0 "+ek.LU.accentNegativeDimmest,"&:hover":{"--cell-background":"".concat(ek.LU.accentNegativeDimmest),backgroundColor:"var(--cell-background) !important"},"&:active":{boxShadow:"0 -1px 0 0 "+ek.LU.accentPrimaryDefault}},B.wp.highRes({boxShadow:"0 -0.5px 0 0 "+ek.LU.accentNegativeDimmest,"&:active":{boxShadow:"0 -0.5px 0 0 "+ek.LU.accentPrimaryDefault}})]}],primaryCell:[B.wp.display.block,B.wp.pl(6),B.wp.py(6),B.wp.pr(4),B.wp.flex.growAndShrink(1),B.wp.minHeight(26),{whiteSpace:"nowrap",'&[data-wrapped="true"]':{whiteSpace:"normal"},'&[data-new-flag="false"]':{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",'&[data-wrapped="true"]':{whiteSpace:"normal"}},a:{color:"inherit","&:hover":{textDecoration:"underline"}}}],secondaryCell:[B.wp.p(6),B.wp.color.foregroundDimmest,B.wp.truncate,{'&[data-error="true"]':B.wp.color.accentNegativeStrongest}],copyColumn:[{display:"none",position:"absolute",top:"50%",zIndex:1,left:"calc(var(--width) + var(--scroll-left-offset))",transform:"translate(-100%, -50%)"}],copyButton:[{backgroundColor:"var(--cell-background) !important",color:"inherit"}]}),oc=(0,f.memo)(function(e){var n=e.log,t=e.y,r=e.height,i=e.resizeRef,o=e.index,a=e.isScrolling,l=e.columns,s=i7(),c=s.isWrapped,u=s.isColorful&&n.level===S.$b.Error&&["INFO","DEBUG","TRACE"].every(function(e){return!n.line.includes(e)}),d=(0,f.useMemo)(function(){return(0,oa.A)(n.line)},[n.line]);return(0,p.FD)("div",{tabIndex:0,role:"button",title:d,css:os.root,style:{height:r,transform:"translateY(".concat(t,"px)")},"data-error":u,children:[l.map(function(e,t){var r=t===l.length-1,a=e.renderCell(n);return(0,p.Y)(j.S,{css:r?os.primaryCell:os.secondaryCell,style:{width:e.width},innerRef:r?i:void 0,"data-index":o,"data-error":u,"data-wrapped":c,children:a},e.key)}),(0,p.Y)("span",{css:os.copyColumn,className:"copy",children:!a&&(0,p.Y)(ol.r,{textToCopy:d,tooltipDisable:!0,css:os.copyButton})})]})}),ou=t(61358),od=t(7118),op=new ou.tQ,of=function(e){var n=e.log,t=e.files,r=i7().openFile,i=n.line;i=n.level===S.$b.Error?(0,oa.A)(n.line):op.toHtml(n.line);var o=(0,u._)((0,f.useState)([]),2),a=o[0],l=o[1];(0,f.useEffect)(function(){(0,od.C)(i,function(){return Promise.resolve(t)}).then(function(e){return l(e)})},[t,i]);var s=(0,f.useCallback)(function(e){e.preventDefault();var n=e.target;n.dataset.file&&r({path:n.dataset.file})},[r]);return(0,p.Y)("div",{dangerouslySetInnerHTML:{__html:function(e,n){n.sort(function(e,n){return e.from-n.from});var t="",r=0;return n.forEach(function(n){t+=e.slice(r,n.from);var i=e.slice(n.from,n.to);t+='<a href="#" data-file="'.concat(n.file,'">').concat(i,"</a>"),r=n.to}),t+=e.slice(r)}(i,a)},onKeyDown:s,onClick:s})},oh=t(59147),om=t(55343),og=function(e){var n=e.scrollRef,t=e.scrollBottomRef,r=(0,f.useRef)(!1);return(0,oh.S)(function(){n.current&&setTimeout(function(){t.current&&((0,om.A)(t.current),r.current=!0)},0)}),{didInitialScroll:r}},ov=function(e){var n,t=e.didInitialScroll,r=e.itemHeight,i=e.scrollRef,o=i7(),a=o.fetchPage,l=o.setIsLive,s=(0,u._)((0,f.useState)(!1),2),c=s[0],d=s[1],p=(0,u._)((0,f.useState)(0),2),h=p[0],m=p[1],g=(0,u._)((0,f.useState)(0),2),v=g[0],y=g[1],S=(0,f.useRef)(),Y=(0,f.useRef)(!1);(0,f.useEffect)(function(){i.current&&m(i.current.offsetWidth-i.current.clientWidth)},[i]);var A=(0,f.useCallback)(function(e){(S.current||c)&&clearTimeout(S.current),d(!0),S.current=setTimeout(function(){d(!1),y(e.scrollLeft)},100)},[c]);return{scrollHandler:(0,f.useCallback)((n=(0,w._)(function(e){var n,i,o,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:if(!(n=e.currentTarget)||Y.current)return[2];if(A(n),i=n.scrollHeight,o=n.scrollTop,l(c=i-(s=n.clientHeight)===o),u=20*r,!(!c&&o<u&&i>s&&t.current))return[3,5];Y.current=!0,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,a()];case 2:return p.sent(),[3,4];case 3:return d=p.sent(),ot.Cp(d),[3,4];case 4:Y.current=!1,p.label=5;case 5:return[2]}})}),function(e){return n.apply(this,arguments)}),[A,l,r,t,a]),isScrolling:c,scrollLeftOffset:v-h}},ow=function(e){var n=e.scrollRef,t=e.scrollBottomRef,r=i7(),i=r.loading,o=r.logs,a=r.isLive,l=r.isWrapped,s=(0,f.useRef)(0),c=(0,f.useRef)(o[0]),u=(0,f.useCallback)(function(){t.current&&(0,om.A)(t.current)},[t]);(0,f.useEffect)(function(){var e=n.current;if(e&&!i&&0!==o.length){if(a)e.scrollHeight>e.clientHeight&&u();else if(c.current&&c.current.timestamp>o[0].timestamp){var t=e.scrollHeight;if(t!==s.current){var r=t-s.current,l=e.scrollTop;e.scrollTo({top:l+r,behavior:"instant"})}}c.current=o[0],s.current=e.scrollHeight}},[a,i,o,n,u]);var d=(0,f.useRef)(l);(0,f.useEffect)(function(){a&&d.current!==l&&(u(),d.current=l)},[a,l,u])},oy=(0,eN.x)({root:[{overflow:"auto"},B.wp.flex.growAndShrink(1)],virtualTable:[B.wp.width("100%"),B.wp.position.relative],tableHeader:[B.wp.display.flex,B.wp.flex.row,B.wp.backgroundColor.backgroundDefault,B.wp.position.sticky,B.wp.zIndex(1),B.wp.top(0),B.wp.border({color:ek.LU.outlineDimmest,direction:"bottom"})],columnHeader:[B.wp.color.foregroundDimmer,B.wp.fontSize(12),{lineHeight:"18px"},B.wp.px(6),B.wp.justify.center],infoTooltip:[B.wp.display.flex,B.wp.align.center,B.wp.gap(4),{lineHeight:0}],bottomAnchor:[B.wp.position.absolute,B.wp.bottom(0),B.wp.left(0),B.wp.right(0)]}),ob=function(){var e=i7().isColorful,n=(0,nG.V)();return(0,f.useMemo)(function(){var t={};if(n){var r=!0,i=!1,o=void 0;try{for(var a,l=Object.entries(n)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=(0,u._)(a.value,2),c=s[0],d=s[1];t["--ansi-".concat(oo()(c))]=e?d:"currentColor"}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}return t},[e,n])};function oS(){var e=i7(),n=e.loading,t=e.error,r=e.logs,i=e.isExpanded,o=e.isWrapped,a=e.isWide,l=!!(n||t),c=(0,f.useRef)(null),d=(0,f.useRef)(null),h=(0,r5.m6)(),m=ob(),v=h?44:26,w=(0,oe.Te)({count:(null==r?void 0:r.length)||0,getScrollElement:function(){return c.current},estimateSize:function(){return v},overscan:10,measureElement:function(e){return e.getBoundingClientRect().height},rangeExtractor:function(e){var n=new Set([0].concat((0,y._)((0,on.vp)(e))));return(0,y._)(n)}});ow({scrollRef:c,scrollBottomRef:d});var b=ov({didInitialScroll:og({scrollRef:c,scrollBottomRef:d}).didInitialScroll,itemHeight:v,scrollRef:c}),Y=b.scrollHandler,A=b.isScrolling,C=b.scrollLeftOffset,x=(0,g.cF)(),k=(null==x?void 0:x.provider)===S.Q0.Cron,_=(0,f.useMemo)(function(){var e;return 8*(e=Math).max.apply(e,(0,y._)((null==r?void 0:r.map(function(e){return e.line.length}))||[]))},[r]),D=(0,g.om)().listFiles,E=(0,u._)((0,f.useState)([]),2),R=E[0],I=E[1];(0,f.useEffect)(function(){D().then(function(e){e.files&&I(e.files)})},[D]);var F=(0,r5.m6)(),T=(0,f.useMemo)(function(){return[{key:"time",title:(0,p.FD)("span",{css:oy.infoTooltip,children:["Time",!F&&(0,p.Y)(ty.m_,{tooltip:"Logs persist for up to 30 days",css:oy.infoTooltip,children:(0,p.Y)(rE.A,{size:12})})]}),width:a?173:115,renderCell:function(e){var n=(0,or.A)(e.timestamp);return(0,er.A)(n,a?"yyyy-MM-dd HH:mm:ss.SS":"MM-dd HH:mm:ss")}},i&&{key:"build",title:"Deployment",width:75,renderCell:function(e){var n=e.buildId.split("-");return n?n[0]:e.buildId}},k&&{key:"run",title:"Run",width:50,renderCell:function(e){var n,t=null===(n=e.executionId)||void 0===n?void 0:n.split("-");return t?t[t.length-1]:""}},i&&{key:"source",title:"Source",width:57,renderCell:function(e){return e.isFromReplit?"System":"User"}},{width:o?void 0:_,key:"log",title:"Log",renderCell:function(e){return(0,p.Y)(of,{files:R,log:e})}}].filter(Boolean)},[R,k,i,F,a,o,_]),P=(0,f.useMemo)(function(){return T.reduce(function(e,n){return e+(n.width||0)},0)},[T]);return(0,p.Y)(j.S,{innerRef:c,css:oy.root,onScroll:Y,children:(0,p.FD)(j.S,{style:(0,s._)({height:w.getTotalSize(),minWidth:P,"--scroll-left-offset":"".concat(C,"px")},m),css:oy.virtualTable,children:[(0,p.Y)(j.S,{css:oy.tableHeader,children:T.map(function(e){return(0,p.Y)(j.S,{tag:"div",css:oy.columnHeader,style:{width:e.width,flex:e.width?void 0:1,height:v},children:e.title},e.key)})}),w.getVirtualItems().map(function(e){var n=r[e.index];return n?(0,p.Y)(oc,{log:n,height:e.size,y:e.start,resizeRef:w.measureElement,index:e.index,disabled:l,isScrolling:A,columns:T},e.key.toString()):null}),(0,p.Y)("div",{ref:d,css:oy.bottomAnchor})]})})}var oY=(0,eN.x)({root:[B.wp.flex.grow(1)],noLogsContainer:[B.wp.pt(4)],noLogsText:[B.wp.textAlign.center],viewError:[B.wp.pt(0)]});function oA(){var e=i7(),n=e.logs,t=e.error;return e.loading?(0,p.Y)(A.A,{css:oY.root,centered:!0,children:(0,p.Y)(ne.cN,{})}):0===n.length?(0,p.FD)(p.FK,{children:[t?(0,p.Y)(ne.Wx,{css:oY.viewError,text:t}):null,(0,p.Y)(A.A,{css:oY.root,children:(0,p.FD)(j.S,{css:oY.noLogsContainer,gap:8,children:[(0,p.Y)(V.EY,{css:oY.noLogsText,children:"No logs are available."}),(0,p.FD)(V.EY,{color:"dimmer",css:oY.noLogsText,children:["Having trouble?"," ",(0,p.Y)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",onClick:function(){return(0,eL.Ae)({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})})]}):(0,p.Y)(oS,{})}var oC=t(99498),ox=t(92302),ok=(0,eN.x)({buttonGroup:[B.wp.flex.row,B.wp.rowWithGap(1),{button:{"&:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}}}]});function o_(e){var n=e.onClear,t=e.label,r=e.buttonProps,i=e.children,o=n?"primary":void 0,a=(0,u._)((0,f.useState)(!1),2),l=a[0],c=a[1];return(0,p.FD)(ox.Y,{css:ok.buttonGroup,children:[(0,p.FD)(rW.Wv,{label:t,isOpen:l,onOpenChange:c,noArrow:!0,background:"higher",children:[(0,p.Y)(eQ.$n,(0,s._)({colorway:o},r)),i]}),n?(0,p.Y)(eQ.$n,{colorway:o,text:"",iconLeft:(0,p.Y)(e5.A,{}),onClick:n}):null]})}var oD=t(51820),oE=(0,eN.x)({section:[B.wp.p(8),B.wp.gap(8)],dateRangeInputs:[B.wp.display.grid,B.wp.gap(8),B.wp.align.center,{gridTemplateColumns:"min-content 200px",gridAutoFlow:"row",gridAutoRows:"1fr"}]}),oR=function(){var e=i7(),n=e.filter,t=e.setFilter;return(0,p.FD)(j.S,{css:oE.dateRangeInputs,children:[(0,p.Y)(oD.J,{variant:"text",children:"After"}),(0,p.Y)(oC.A,{granularity:"minute",hourCycle:24,value:n.start,onChange:function(e){return t(function(n){return(0,c._)((0,s._)({},n),{start:e})})}}),(0,p.Y)(oD.J,{variant:"text",children:"Before"}),(0,p.Y)(oC.A,{granularity:"minute",hourCycle:24,value:n.end,onChange:function(e){return t(function(n){return(0,c._)((0,s._)({},n),{end:e})})}})]})},oI=function(){var e=i7(),n=e.filter,t=e.setFilter,r=(0,i$.Xj)(),i=n.start||n.end,o="Date",a=n.start&&(0,er.A)(n.start.toDate(r),"M/d/yy"),l=n.end&&(0,er.A)(n.end.toDate(r),"M/d/yy");return a&&l?o="".concat(a," to ").concat(l):a?o="After ".concat(a):l&&(o="Before ".concat(l)),(0,p.Y)(o_,{label:"Date range",onClear:i?function(){return t(function(e){return(0,c._)((0,s._)({},e),{start:null,end:null})})}:void 0,buttonProps:{text:o,iconRight:i?void 0:(0,p.Y)(n6.A,{})},children:(0,p.Y)(j.S,{css:oE.section,children:(0,p.Y)(oR,{})})})},oF=t(31618),oT=t(2613),oP=(0,eN.x)({inputContainer:[B.wp.p(8)]}),oL=function(){var e=i7(),n=e.filter,t=e.setFilter,r=(0,u._)((0,f.useState)(n.executionId),2),i=r[0],o=r[1];return(0,f.useEffect)(function(){o(n.executionId)},[n.executionId]),(0,p.Y)(oF.pd,{placeholder:"*****",value:i||"",onChange:function(e){var n=e.target.value;o(n),n&&5!==n.length||t(function(e){return(0,c._)((0,s._)({},e),{executionId:n})})},onBlur:function(){return t(function(e){return(0,c._)((0,s._)({},e),{executionId:i})})},onKeyDown:function(e){"Enter"===e.key&&t(function(e){return(0,c._)((0,s._)({},e),{executionId:i})})}})},oU=function(){var e=i7(),n=e.filter,t=e.setFilter;return(0,p.Y)(o_,{onClear:n.executionId?function(){return t(function(e){return(0,c._)((0,s._)({},e),{executionId:null})})}:void 0,label:"Run ID",buttonProps:{text:n.executionId?"Run: ".concat(n.executionId):"Run ID",iconRight:n.executionId?void 0:(0,p.Y)(n6.A,{})},children:(0,p.Y)(j.S,{css:oP.inputContainer,children:(0,p.Y)(oT.A_,{children:(0,p.Y)(oL,{})})})})},oN=t(35899),oO=t(67197),oM=t(41845);function oB(e){return(0,p.Y)(rj.Ay,(0,c._)((0,s._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M1.25 6A.75.75 0 0 1 2 5.25h20a.75.75 0 0 1 0 1.5H2A.75.75 0 0 1 1.25 6Zm3 6a.75.75 0 0 1 .75-.75h14a.75.75 0 0 1 0 1.5H5a.75.75 0 0 1-.75-.75Zm3 6a.75.75 0 0 1 .75-.75h8a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}var oH=function(){var e=(0,g.cF)();return(null==e?void 0:e.provider)===S.Q0.Cron},oz=(0,eN.x)({root:[B.wp.p(8),B.wp.rowWithGap(8),{"> *:first-child":B.wp.flex.grow(1)}],divider:B.wp.backgroundColor.outlineDimmer,section:[B.wp.p(8),B.wp.gap(8)],checkboxWithLabel:[B.wp.p(8)],buttonInnerCheckbox:[{pointerEvents:"none"}],clearFilterButton:[B.wp.borderRadius(0),B.wp.width("fit-content")]}),oW=function(){var e=i7(),n=e.filter,t=e.setFilter,r=function(){t(function(e){return(0,c._)((0,s._)({},e),{level:e.level===S.$b.Error?null:S.$b.Error})})};return(0,p.Y)(eQ.$n,{colorway:n.level===S.$b.Error?"primary":void 0,text:"Errors only",iconLeft:(0,p.Y)(oO.S,{onChange:r,checked:n.level===S.$b.Error}),onClick:r})},oG=function(){var e=oH();return(0,p.FD)(p.FK,{children:[(0,p.Y)(oW,{}),(0,p.Y)(oI,{}),e&&(0,p.Y)(oU,{})]})},oV=function(){var e=i7(),n=e.filter,t=e.setFilter,r=e.clearFilter,i=oH(),o=!!(n.message||n.level||n.start||n.end||n.executionId),a=(0,oN.c)();return(0,p.Y)(o_,{label:"Filter",buttonProps:{text:"",iconLeft:(0,p.Y)(oB,{})},onClear:o?r:void 0,children:(0,p.FD)(j.S,{children:[(0,p.FD)(j.S,{css:oz.checkboxWithLabel,row:!0,gap:8,children:[(0,p.Y)(oO.S,{name:"Filter by errors only",id:a("errors-only"),checked:n.level===S.$b.Error,onChange:function(e){return t(function(n){return(0,c._)((0,s._)({},n),{level:e?S.$b.Error:null})})}}),(0,p.Y)("label",{htmlFor:a("errors-only"),children:"Errors only"})]}),i?(0,p.FD)(p.FK,{children:[(0,p.Y)(tw.a,{css:oz.divider}),(0,p.Y)(j.S,{css:oz.section,children:(0,p.FD)(oT.A_,{children:[(0,p.Y)(oD.J,{color:"dimmer",children:"Run ID"}),(0,p.Y)(oL,{})]})})]}):null,(0,p.Y)(tw.a,{css:oz.divider}),(0,p.FD)(j.S,{css:oz.section,children:[(0,p.Y)(oD.J,{color:"dimmer",children:"Date range"}),(0,p.Y)(oR,{})]}),(0,p.Y)(tw.a,{css:oz.divider}),(0,p.Y)(eQ.$n,{variant:"nofill",onClick:function(){return r()},text:"Clear all filters",alignment:"start",css:oz.clearFilterButton})]})})};function oj(){var e=i7(),n=e.filter,t=e.setFilter,r=e.isWide,i=(0,u._)((0,f.useState)(n.message),2),o=i[0],a=i[1];return(0,f.useEffect)(function(){a(n.message)},[n.message]),(0,p.FD)(j.S,{css:oz.root,children:[(0,p.Y)(oM.I,{placeholder:"Search",value:o,onChange:function(e){a(e.target.value),""===e.target.value&&t(function(e){return(0,c._)((0,s._)({},e),{message:""})})},onBlur:function(){return t(function(e){return(0,c._)((0,s._)({},e),{message:o})})},onClear:function(){t(function(e){return(0,c._)((0,s._)({},e),{message:""})})},onKeyDown:function(e){"Enter"===e.key&&t(function(e){return(0,c._)((0,s._)({},e),{message:o})})}}),r?(0,p.Y)(oG,{}):(0,p.Y)(oV,{})]})}function oZ(e){return(0,p.Y)(rj.Ay,(0,c._)((0,s._)({},e),{viewBox:"0 0 16 16",fill:"none",children:(0,p.Y)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 11.5H10A3.5 3.5 0 0013.5 8v0A3.5 3.5 0 0010 4.5H2.5m2 7L7 9m-2.5 2.5L7 14"})}))}var oq=t(76346),oK=t(13344),o$=(0,eN.x)({root:[B.wp.border({color:ek.LU.outlineDimmest,direction:"top"}),B.wp.height(29)],group:[B.wp.display.flex,B.wp.rowWithGap(8)],button:[B.wp.color.foregroundDefault,B.wp.borderRadius(0),B.wp.height("100%")],liveIndicatorWrapper:[B.wp.width(16),B.wp.height(16),B.wp.display.flex,B.wp.align.center,B.wp.justify.center],liveIndicator:[B.wp.width(6),B.wp.height(6),B.wp.borderRadius("full"),B.wp.backgroundColor.accentPositiveStronger],checkboxWrapper:[B.wp.display.flex,B.wp.align.center,B.wp.rowWithGap(4),B.wp.cursor.pointer],checkbox:[{input:[B.wp.width(16),B.wp.height(16)]}]});function oJ(){var e=i7(),n=e.isLive,t=e.setIsLive,r=e.isExpanded,i=e.setIsExpanded,o=e.isWrapped,a=e.setIsWrapped,l=e.isColorful,s=e.setIsColorful,c=(0,oN.c)();return(0,p.FD)(j.S,{css:o$.root,row:!0,gap:8,justify:"space-between",children:[(0,p.FD)(j.S,{css:o$.group,children:[(0,p.Y)(eQ.$n,{iconLeft:r?(0,p.Y)(eD.A,{rotate:90}):(0,p.Y)(eE.A,{rotate:90}),onClick:function(){return i(function(e){return!e})},variant:"nofill",text:r?"Collapse":"Expand",css:o$.button}),(0,p.FD)("label",{css:o$.checkboxWrapper,htmlFor:c("wrap"),children:[(0,p.Y)(oO.S,{id:c("wrap"),checked:o,onChange:function(){return a(function(e){return!e})},css:o$.checkbox}),(0,p.Y)(oZ,{}),(0,p.Y)("span",{children:"Wrap"})]}),(0,p.FD)("label",{css:o$.checkboxWrapper,htmlFor:c("colorful"),children:[(0,p.Y)(oO.S,{id:c("colorful"),checked:l,onChange:function(){return s(function(e){return!e})},css:o$.checkbox}),(0,p.Y)(oK.A,{}),(0,p.Y)("span",{children:"Colors"})]})]}),(0,p.Y)(j.S,{css:o$.group,children:(0,p.Y)(eQ.$n,{iconLeft:n?(0,p.Y)(j.S,{css:o$.liveIndicatorWrapper,children:(0,p.Y)(j.S,{css:o$.liveIndicator})}):(0,p.Y)(oq.A,{}),onClick:function(){return t(function(e){return!e})},variant:"nofill",text:"Live",css:o$.button})})]})}var oQ=(0,eN.x)({root:[B.wp.flex.growAndShrink(1),B.wp.overflow("hidden")],header:[B.wp.p(6),{borderBottom:"1px solid ".concat(ek.LU.outlineDimmest)}]}),oX=function(e){var n=e.deploymentId,t=e.replId,r=e.executionId,i=e.onBack,o=e.openFile;return n?(0,p.Y)(o0,{deploymentId:n,replId:t,executionId:r,onBack:i,openFile:o}):(0,p.Y)(A.A,{children:(0,p.Y)(G.N,{colorway:"warning",icon:(0,p.Y)(na.A,{}),text:"Deployment not found"})})};function o0(e){var n=e.deploymentId,t=e.replId,r=e.executionId,i=e.onBack,o=i9({deploymentId:n,replId:t,executionId:r,openFile:e.openFile});return(0,oh.S)(function(){(0,eL.Ae)({context:Y.P.Logs})}),(0,p.Y)(i6.Provider,{value:o,children:(0,p.FD)(j.S,{css:oQ.root,innerRef:o.containerRef,children:[i?(0,p.Y)(j.S,{css:oQ.header,gap:8,children:(0,p.Y)(j.S,{row:!0,gap:8,align:"center",justify:"space-between",children:(0,p.Y)(e_.K0,{alt:"Back",onClick:i,children:(0,p.Y)(t4.A,{})})})}):null,(0,p.Y)(oj,{}),(0,p.Y)(oA,{}),(0,p.Y)(oJ,{})]})})}var o1=[{label:"one hour",key:1},{label:"six hours",key:6},{label:"one day",key:24},{label:"three days",key:72},{label:"one week",key:168}],o2={label:"one hour",key:1},o4=B.kL.min(600),o5=(0,eN.x)({fullWidth:(0,C._)({},o4,{gridColumn:"span 2"})}),o8=(0,eN.x)({container:(0,C._)({display:"grid",gap:32},o4,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"}),fullWidth:o5.fullWidth}),o3=function(e){var n=e.replId,t=(0,u._)((0,f.useState)(o2),2),r=t[0],i=r.key,o=r.label,a=t[1],l=(0,x.A)(new Date,i),s=(0,M.D)().values,c=o7(l,o6(i));return(0,p.Y)(A.A,{children:(0,p.FD)(j.S,{css:o8.container,children:[(0,p.Y)(j.S,{css:o8.fullWidth,children:(0,p.Y)(eO.in,{items:o1,label:"Past ".concat(o),onAction:function(e){var n,t="string"==typeof e?parseInt(e,10):e;a(null!==(n=o1.find(function(e){return e.key===t}))&&void 0!==n?n:o2)},children:function(e){return(0,p.Y)(eO.Dr,{label:e.label,id:e.key},e.key)}})}),(0,p.Y)(j.S,{css:o8.fullWidth,children:(0,p.Y)(ew,{replId:n,title:"CPU Utilization",metric:_.YE.CPU,start:c,hours:i,colorFn:function(){return s.global.redDefault}})}),(0,p.Y)(j.S,{css:o8.fullWidth,children:(0,p.Y)(ew,{replId:n,title:"Memory Utilization",metric:_.YE.Memory,start:c,hours:i,colorFn:function(){return s.global.redDefault}})})]})})},o6=function(e){return e<=1?6e5:e<=6?18e5:e<=24?72e5:216e5},o7=function(e,n){var t=e.getTime()%n;return new Date(e.getTime()-t)},o9=t(63005);function ae(){var e=(0,R._)(["\n  query ScheduledJobListExecution($deploymentId: String!) {\n    scheduledJobListExecutions(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ScheduledJobListExecutionsResults {\n        results {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return ae=function(){return e},e}function an(){var e=(0,R._)(["\n  mutation CancelScheduledJobExecution(\n    $deploymentId: String!\n    $executionId: String!\n  ) {\n    cancelScheduledJobExecution(\n      input: { deploymentId: $deploymentId, executionId: $executionId }\n    ) {\n      __typename\n      ... on CancelScheduledJobExecutionResult {\n        execution {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return an=function(){return e},e}var at={},ar=(0,I.J1)(ae()),ai=(0,I.J1)(an()),ao=t(68153),aa=t(59086),al=(0,eN.x)({root:[B.wp.flex.growAndShrink(1),B.wp.overflow("hidden")],executionListHeader:[B.wp.p(6),{borderBottom:"1px solid ".concat(ek.LU.outlineDimmest)}],executionList:[{overflow:"auto"},B.wp.flex.growAndShrink(1)],executionListRows:{width:"100%",position:"relative"},executionItem:[B.wp.rowWithGap(8),B.wp.align.center,B.wp.fontSize(12),B.wp.px(8),{position:"absolute",top:0,left:0,width:"100%",borderBottom:"1px solid ".concat(ek.LU.outlineDimmest),color:ek.LU.foregroundDimmer}],executionItemStatusDot:[B.wp.width("6px"),B.wp.height("6px"),B.wp.borderRadius("full"),B.wp.flex.shrink(0),B.wp.pr(4)],executionItemDistance:[B.wp.minWidth(100)],executionItemTimestamp:[B.wp.minWidth(90)],executionItemRunTime:[B.wp.minWidth(60)],executionItemStatus:[B.wp.minWidth(100),{textTransform:"capitalize"}],executionItemActions:[{marginLeft:"auto"}],noExecutionsContainer:[B.wp.pt(4)],noExecutionsText:[B.wp.textAlign.center],maxResultsMessage:[B.wp.fontSize(12),B.wp.color.foregroundDimmest]});function as(e){var n=e.deploymentId,t=e.replId,r=e.openFile,i=(0,u._)((0,f.useState)(),2),o=i[0],a=i[1];return n?o?(0,p.Y)(oX,{replId:t,deploymentId:n,executionId:o,onBack:function(){return a(void 0)},openFile:r}):(0,p.Y)(ac,{deploymentId:n,onViewExecutionLogs:function(e){var n=e.split("-");a(n[n.length-1])}}):(0,p.Y)(A.A,{children:(0,p.Y)(G.N,{colorway:"warning",icon:(0,p.Y)(na.A,{}),text:"Deployment not found"})})}function ac(e){var n,t,r,i=e.deploymentId,o=e.onViewExecutionLogs,a=(0,u._)((0,f.useState)([]),2),l=a[0],c=a[1],d=(0,u._)((0,f.useState)(!1),2),h=d[0],m=d[1],g=(0,u._)((0,f.useState)(),2),v=g[0],w=g[1],b=(n=(0,s._)({},at,{variables:{deploymentId:i},onError:function(e){w(e)},onCompleted:function(e){(null==e?void 0:e.scheduledJobListExecutions.__typename)==="ScheduledJobListExecutionsResults"&&c(e.scheduledJobListExecutions.results)}}),F.I(ar,n)),S=b.loading,A=b.refetch,C=(0,u._)((t=(0,s._)({},at,{onError:function(e){w(e)},onCompleted:function(e){var n=e.cancelScheduledJobExecution;"CancelScheduledJobExecutionResult"===n.__typename&&c(function(e){return e.map(function(e){return e.id===n.execution.id?n.execution:e})})}}),ny.n(ai,t)),2),x=C[0],k=C[1].loading,_=!!(S||k||h||v);return(0,oh.S)(function(){S||A(),(0,eL.Ae)({context:Y.P.Schedule})}),(0,p.FD)(j.S,{css:al.root,children:[(0,p.FD)(j.S,{css:al.executionListHeader,gap:8,children:[v?(0,p.Y)(G.N,{colorway:"warning",icon:(0,p.Y)(na.A,{}),text:null!==(r=v.message)&&void 0!==r?r:"Something went wrong"}):null,(0,p.FD)(j.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,p.Y)(rB,{disabled:_,onSuccessfulExecution:function(e){c(function(n){return[e].concat((0,y._)(n)).slice(0,50)})}}),(0,p.Y)(e_.K0,{alt:"Refresh",disabled:_,onClick:function(){!_&&(m(!0),A().finally(function(){m(!1)}))},children:h?(0,p.Y)(nM.A,{}):(0,p.Y)(aa.A,{})})]})]}),(0,p.Y)(au,{executions:l,loading:S,disabled:_,onExecutionItemAction:function(e){switch(e.type){case"cancel":x({variables:{deploymentId:i,executionId:e.payload.id}});break;case"logs":o(e.payload.id)}}})]})}function au(e){var n=e.executions,t=e.loading,r=e.disabled,i=e.onExecutionItemAction,o=(0,f.useRef)(null),a=(0,r5.m6)()?44:28,l=(0,oe.Te)({count:n.length,getScrollElement:function(){return o.current},estimateSize:function(){return a},overscan:10});return t?(0,p.Y)(A.A,{centered:!0,children:(0,p.Y)(ne.cN,{})}):0===n.length?(0,p.Y)(A.A,{children:(0,p.FD)(j.S,{css:al.noExecutionsContainer,gap:8,children:[(0,p.Y)(V.EY,{css:al.noExecutionsText,children:"No runs yet..."}),(0,p.FD)(V.EY,{color:"dimmer",css:al.noExecutionsText,children:["Having trouble?"," ",(0,p.Y)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",onClick:function(){return(0,eL.Ae)({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})}):(0,p.Y)(j.S,{innerRef:o,css:al.executionList,children:(0,p.Y)(j.S,{style:{height:l.getTotalSize()},css:al.executionListRows,children:l.getVirtualItems().map(function(e){var t=n[e.index];return(0,p.Y)(ah,{execution:t,height:e.size,y:e.start,index:e.index,onAction:i,disabled:r},e.key.toString())})})})}var ad=(o={},(0,C._)(o,S.vJ.Done,ek.LU.accentPositiveDefault),(0,C._)(o,S.vJ.Running,ek.LU.orangeStronger),(0,C._)(o,S.vJ.Failed,ek.LU.accentNegativeDefault),(0,C._)(o,S.vJ.Cancelled,ek.LU.greyDefault),(0,C._)(o,S.vJ.Unrecognized,ek.LU.greyDefault),o);function ap(e){var n=e.status,t=n in ad?ad[n]:ek.LU.greyDefault;return(0,p.Y)(j.S,{tag:"span",css:al.executionItemStatusDot,style:{backgroundColor:t,boxShadow:"0 0 8px ".concat(t)}})}var af=function(e){return e.Cancel="cancel",e.Logs="logs",e}(af||{});function ah(e){var n=e.execution,t=e.y,r=e.height,i=e.index,o=e.onAction,a=e.disabled,l=(null==n?void 0:n.endedAt)?(new Date(n.endedAt).valueOf()-new Date(n.startedAt).valueOf())/1e3:null;return(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{title:n.id,css:al.executionItem,style:{height:r,transform:"translateY(".concat(t,"px)")},children:[(0,p.Y)(ap,{status:n.status}),(0,p.Y)(j.S,{css:al.executionItemDistance,children:(0,o9.A)(new Date(n.startedAt),Date.now(),{addSuffix:!0})}),(0,p.FD)(j.S,{css:al.executionItemTimestamp,children:[new Date(n.startedAt).toLocaleString("en-US",{month:"short",day:"2-digit"}),", ",new Date(n.startedAt).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hourCycle:"h23"})]}),(0,p.Y)(j.S,{css:al.executionItemRunTime,children:l?"".concat(l,"s"):"-"}),(0,p.Y)(j.S,{css:al.executionItemStatus,children:n.status}),(0,p.FD)(j.S,{css:al.executionItemActions,row:!0,gap:8,align:"center",children:[n.status===S.vJ.Running?(0,p.Y)(e_.K0,{alt:"Cancel",size:12,disabled:a,onClick:function(){return o({type:"cancel",payload:{id:n.id}})},children:(0,p.Y)(ao.A,{})}):null,(0,p.Y)(e_.K0,{alt:"Logs",size:18,disabled:a,onClick:function(){return o({type:"logs",payload:{id:n.id}})},children:(0,p.Y)(n1.A,{})})]})]}),49===i?(0,p.Y)(j.S,{title:n.id,css:al.executionItem,style:{height:r,transform:"translateY(".concat(t+r,"px)")},children:(0,p.Y)(V.EY,{css:al.maxResultsMessage,children:"Only the most recent 50 runs are displayed currently"})}):null]})}var am=t(63775),ag=t(92647),av=t(84185);function aw(e){return(0,p.Y)(rj.Ay,(0,c._)((0,s._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M4 2.25a.75.75 0 0 1 .75.75v7a.75.75 0 0 1-1.5 0V3A.75.75 0 0 1 4 2.25Zm8 0a.75.75 0 0 1 .75.75v4.25H15a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1 0-1.5h2.25V3a.75.75 0 0 1 .75-.75Zm8 0a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75Zm-8 9a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-1.5 0v-9a.75.75 0 0 1 .75-.75ZM.25 14a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5H4.75V21a.75.75 0 0 1-1.5 0v-6.25H1A.75.75 0 0 1 .25 14Zm16 2a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5h-2.25V21a.75.75 0 0 1-1.5 0v-4.25H17a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}var ay=t(19915),ab=(0,eN.x)({container:B.wp.colWithGap(24),pauseAndResumeButtons:B.wp.colWithGap(8),sectionContainer:B.wp.colWithGap(8),sectionButton:[B.wp.color.accentNegativeStrongest,B.wp.transition.snappy,(0,C._)({backgroundColor:ek.LU.interactiveBackground,borderColor:"transparent"},B.Tp.hover,{borderColor:"transparent"})]}),aS=function(e){var n=e.hideResume,t=e.hideSuspend,r=e.onLifecycleCommand,i=e.authorizations,o=(0,g.uS)(),a=(0,g.cF)(),l=(0,u._)((0,f.useState)(!1),2),s=l[0],c=l[1],d=i.editDeploymentStatus,h=d.isAuthorized,m=d.message,w=(null==a?void 0:a.status)===S.nH.Resuming,y=(null==a?void 0:a.status)===S.nH.Suspending,b=(null==a?void 0:a.status)===S.nH.Suspended,Y=w||y||o===v.d.ProcessingLifecycleCommand||o===v.d.Deploying,A=!(void 0!==n&&n)&&(b||w)&&(null==a?void 0:a.hasImageTag),C=!(void 0!==t&&t)&&!b&&!w&&(y||o===v.d.Deploying||o===v.d.Ready)&&(null==a?void 0:a.hasImageTag);return(0,p.Y)(p.FK,{children:(0,p.FD)(j.S,{css:ab.container,children:[A||C?(0,p.FD)(j.S,{css:ab.pauseAndResumeButtons,children:[A?(0,p.FD)(p.FK,{children:[(0,p.Y)(ty.m_,{tooltip:m,isDisabled:h,children:(0,p.Y)(eQ.$n,{text:w?"Resuming":"Resume",onClick:function(){return r({command:S.jP.Resume})},loading:w,disabled:Y||!h,iconLeft:w?(0,p.Y)(nM.A,{}):(0,p.Y)(av.A,{})})}),(0,p.Y)(V.EY,{color:"dimmer",children:"Your app will become accessible to users again"})]}):null,C?(0,p.FD)(p.FK,{children:[(0,p.Y)(ty.m_,{tooltip:m,isDisabled:h,children:(0,p.Y)(eQ.$n,{text:"Pause",onClick:function(){return r({command:S.jP.Suspend})},loading:y,disabled:Y||!h,iconLeft:y?(0,p.Y)(nM.A,{}):(0,p.Y)(ag.A,{})})}),(0,p.Y)(V.EY,{color:"dimmer",children:"Your deployment billing will continue, but all users will lose access to your app"})]}):null]}):null,(0,p.Y)(aY,{setIsDestroying:c,onLifecycleCommand:r,authorizations:i}),(0,p.Y)(aA,{isDestroying:s,setIsDestroying:c,onLifecycleCommand:r,authorizations:i})]})})};function aY(e){var n=e.setIsDestroying,t=e.onLifecycleCommand,r=e.authorizations,i=(0,u._)((0,f.useState)(!1),2),o=i[0],a=i[1],l=r.deleteDeployment,s=l.isAuthorized,c=l.message;return(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{css:ab.sectionContainer,children:[(0,p.Y)(ty.m_,{tooltip:c,isDisabled:s,children:(0,p.Y)(eQ.$n,{text:"Change deployment type",onClick:function(){return a(!0)},disabled:!s,iconLeft:(0,p.Y)(aw,{})})}),(0,p.Y)(V.EY,{color:"dimmer",children:"To change your deployment type, you will need to shut down and create a new deployment"})]}),(0,p.Y)(eX.a,{isOpen:o,onRequestClose:function(){return a(!1)},children:(0,p.Y)(am.A,{confirmLabel:"Yes, delete my deployment",title:"Change Deployment Type",isDestructive:!0,onConfirm:function(){n(!0),a(!1),t({command:S.jP.Destroy})},onCancel:function(){return a(!1)},children:"To change your deployment type, you will need to shut down and create a new deployment. This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your App again."})})]})}function aA(e){var n=e.isDestroying,t=e.setIsDestroying,r=e.onLifecycleCommand,i=e.authorizations,o=(0,u._)((0,f.useState)(!1),2),a=o[0],l=o[1],s=i.deleteDeployment,c=s.isAuthorized,d=s.message;return(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{css:ab.sectionContainer,children:[(0,p.Y)(ty.m_,{tooltip:d,isDisabled:c,children:(0,p.Y)(eQ.$n,{text:"Shut down",colorway:"negative",variant:"outlined",css:ab.sectionButton,onClick:function(){return l(!0)},disabled:n||!c,iconLeft:(0,p.Y)(ay.A,{})})}),(0,p.Y)(V.EY,{color:"dimmer",children:"Your deployment billing will be canceled, and your deployed app will cease to exist"})]}),(0,p.Y)(eX.a,{isOpen:a,onRequestClose:function(){return l(!1)},children:(0,p.Y)(am.A,{confirmLabel:"Yes, delete my deployment",title:"Delete Deployment",isDestructive:!0,onConfirm:function(){t(!0),l(!1),r({command:S.jP.Destroy})},onCancel:function(){return l(!1)},children:"This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})}function aC(e){var n=e.shouldShowDownloadQR,t=(0,u._)((0,f.useState)(n),2),r=t[0],i=t[1];return(0,p.Y)(j.S,{children:(0,p.FD)(j.S,{gap:8,children:[(0,p.Y)(eQ.$n,{iconLeft:(0,p.Y)(e8.A,{}),text:"Install the Replit App",onClick:function(){return i(function(e){var n=!e;return n&&(0,eJ.u4)(eJ.AZ.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),n})}}),r?(0,p.Y)(e4,{color:ek.LU.foregroundDefault}):null]})})}function ax(){var e=(0,R._)(["\n  query AutoscaleUsageSectionCurrentUser {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          startDate\n          endDate\n          resources {\n            autoscaleComputeUnits {\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return ax=function(){return e},e}var ak={},a_=(0,I.J1)(ax()),aD=t(57642),aE=t(48795),aR=(0,eN.x)({root:[B.wp.p(8),B.wp.pt(12),B.wp.borderRadius(8),{outline:"1px solid transparent"}],outerRow:[B.wp.rowWithGap(12),B.wp.align.center],typeCol:[B.wp.flex.growAndShrink(1)]}),aI=function(e){var n,t=e.machineConfiguration,r=(n=(0,s._)({},ak,void 0),F.I(a_,n)).data,i=(0,f.useMemo)(function(){return function(e){var n,t,r=e.data;if((null==r?void 0:null===(n=r.currentUser)||void 0===n?void 0:n.__typename)==="CurrentUser"){var i=null==r?void 0:null===(t=r.currentUser)||void 0===t?void 0:t.usageInterval;if(i&&"UsageInterval"===i.__typename){var o=i.resources.autoscaleComputeUnits.usage,a=(0,aD.h7)(o,{resourceUsageType:"ComputeUnits"}),l=new Date(i.endDate).toLocaleString("default",{month:"short",day:"numeric"});return{description:"".concat(a," used this billing period"),renewalInfo:"Renews ".concat(l," ")}}}}({data:r})},[r]),o=(0,f.useMemo)(function(){if(null!=t)return"Autoscale (".concat(t.label,")")},[t]);if(!o||!i)return(0,p.Y)(j.S,{justify:"center",row:!0,children:(0,p.Y)(nM.A,{})});var a=e.authorizations.editDeploymentTier,l=a.isAuthorized,c=a.message;return(0,p.FD)(n3.ui,{elevated:!0,css:aR.root,gap:4,children:[(0,p.FD)(j.S,{css:aR.outerRow,children:[(0,p.Y)(j.S,{css:aR.typeCol,gap:4,children:o?(0,p.Y)(V.EY,{multiline:!1,children:o}):null}),(0,p.Y)(e_.K0,{alt:l?"Edit":c,disabled:!l,onClick:e.onEditAutoscaleMachineConfiguration,children:(0,p.Y)(aE.A,{})})]}),i?(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{css:aR.outerRow,children:[(0,p.Y)(V.EY,{multiline:!1,children:i.description}),(0,p.Y)(V.EY,{color:"dimmer",multiline:!1,children:i.renewalInfo})]}),(0,p.Y)(j.S,{css:aR.outerRow,children:(0,p.Y)(rw(),{legacyBehavior:!0,passHref:!0,href:"/usage",prefetch:!1,children:(0,p.Y)("a",{role:"button",children:"View account resource limits"})})})]}):null]})};function aF(){var e=(0,R._)(["\n  mutation HostingDeploymentsUnlinkDomain(\n    $input: UnlinkHostingDeploymentDomainInput!\n  ) {\n    unlinkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          id\n        }\n      }\n    }\n  }\n"]);return aF=function(){return e},e}function aT(){var e=(0,R._)(["\n  mutation HostingDeploymentsVerifyDomain(\n    $input: VerifyHostingDeploymentDomainInput!\n  ) {\n    verifyHostingDeploymentDomain(input: $input) {\n      ... on HostingDeploymentDomain {\n        id\n        state\n      }\n    }\n  }\n"]);return aT=function(){return e},e}var aP={},aL=(0,I.J1)(aF()),aU=(0,I.J1)(aT()),aN=t(2904),aO=t(22498),aM=t(85280),aB=(0,aO.v)(["paddingRight"]),aH=aB.cssVars,az=aB.styleTokens,aW=(0,eN.x)({inputWrapper:[B.wp.position.relative,B.wp.flex.growAndShrink(1),{input:[{paddingRight:az.paddingRight}]}],copyButton:[B.wp.position.absolute,B.wp.top("50%"),B.wp.right(4),{transform:"translateY(-50%)"}]});function aG(e){return(0,p.FD)(j.S,{css:aW.inputWrapper,style:(0,C._)({},aH.paddingRight,e.value?"36px":"8px"),children:[(0,p.Y)(oF.pd,(0,c._)((0,s._)({},e),{onClick:function(e){return e.currentTarget.select()}})),e.value?(0,p.Y)(e_.K0,{css:aW.copyButton,alt:"Copy",tooltipBehavior:"hidden",onClick:function(){return e.value&&(0,aN.default)(e.value)},children:(0,p.Y)(aM.A,{})}):null]})}var aV=(0,eN.x)({root:[B.wp.flex.column,(a={gap:8},(0,C._)(a,B.kL.min("mobileMax"),[B.wp.flex.row,{"& > div:nth-of-type(1)":{maxWidth:50},"& > div:nth-of-type(2)":{width:"30%"}}]),(0,C._)(a,"label",[B.wp.color.foregroundDimmer,{fontSize:ek.LU.fontSizeSmall}]),a)],col:[B.wp.colWithGap(4),B.wp.flex.growAndShrink(1)],records:[B.wp.px(12),B.wp.pt(8),B.wp.pb(16),B.wp.colWithGap(16),B.wp.borderRadius(12),(0,C._)({},B.kL.min("mobileMax"),B.wp.colWithGap(12))],divider:(0,C._)({display:"flex",height:1,backgroundColor:ek.LU.outlineDimmest},B.kL.min("mobileMax"),B.wp.display.none)});function aj(e){var n=e.hostname.split(".").slice(0,-2).join(".");return(0,p.FD)(j.S,{css:aV.root,children:[(0,p.FD)(j.S,{css:aV.col,children:[(0,p.Y)(j.S,{tag:"label",children:"Type"}),(0,p.Y)(oF.pd,{value:e.type,readOnly:!0})]}),(0,p.FD)(j.S,{css:aV.col,children:[(0,p.Y)(j.S,{tag:"label",children:"Hostname"}),(0,p.Y)(oF.pd,{value:""===n?"@":n,readOnly:!0})]}),(0,p.FD)(j.S,{css:aV.col,children:[(0,p.Y)(j.S,{tag:"label",children:"Record"}),(0,p.Y)(aG,{value:e.record,readOnly:!0})]})]})}function aZ(e){var n="replit-verify=".concat(e.deploymentId);return(0,p.FD)(n3.ui,{background:"default",css:aV.records,children:[(0,p.Y)(aj,{hostname:e.hostname,type:"A",record:e.apexProxy}),(0,p.Y)(j.S,{css:aV.divider}),(0,p.Y)(aj,{hostname:e.hostname,type:"TXT",record:n})]})}var aq="https://docs.replit.com/cloud-services/deployments/custom-domains",aK=(0,eN.x)({root:[B.wp.colWithGap(8),B.wp.borderRadius(8),B.wp.pl(8),B.wp.pr(4),B.wp.height(32),B.wp.justify.center]}),a$=(0,eN.x)({root:aK.root,rootExpanded:[aK.root,B.wp.height("auto"),B.wp.pt(4),B.wp.pb(12),B.wp.justify.start],domainRow:[B.wp.reset.button,B.wp.rowWithGap(8),B.wp.align.center,B.wp.justify.spaceBetween],expanded:[B.wp.pl(4),B.wp.pr(8)],domainWrapper:[B.wp.flex.shrink(1),B.wp.color.accentPrimaryStronger,{a:B.wp.hover(B.wp.color.accentPrimaryStrongest)}],statusDot:[B.wp.borderRadius("full"),B.wp.width(6),B.wp.height(6)],buttons:[B.wp.flex.column,B.wp.justify.spaceBetween,(l={gap:8},(0,C._)(l,B.kL.min("mobileMax"),B.wp.flex.row),(0,C._)(l,"button",[B.wp.flex.growAndShrink(1)]),l)]}),aJ={verified:{color:ek.LU.accentPositiveDefault,text:"Verified"},verifying:{color:ek.LU.orangeDefault,text:"Verifying"},pushed_to_goval:{color:ek.LU.orangeDefault,text:"Verifying"},failed:{color:ek.LU.accentNegativeDefault,text:"Failed"}};function aQ(e){var n,t,r,i=e.domain,o=e.deploymentId,a=e.apexProxy,l=e.authorizations,c=(0,u._)((0,f.useState)(!1),2),d=c[0],h=c[1],m=(0,u._)((0,f.useState)(!1),2),g=m[0],v=m[1],w=(0,u._)((n=(0,s._)({},nC,{variables:{id:o},fetchPolicy:"network-only",ssr:!1}),nv._(n_,n)),2),y=w[0],b=w[1].loading,Y=(0,u._)((t=(0,s._)({},aP,void 0),ny.n(aL,t)),2),A=Y[0],C=Y[1].loading,x=(0,u._)((r=(0,s._)({},aP,void 0),ny.n(aU,r)),2),k=x[0],_=x[1].loading,D=i.state===S.xp.Failed,E=l.addCustomDomain,R=E.isAuthorized,I=E.message,F=l.deleteCustomDomain,T=F.isAuthorized,P=F.message;return(0,p.FD)(n3.ui,{elevated:!0,css:d?a$.rootExpanded:a$.root,children:[(0,p.FD)(j.S,{css:a$.domainRow,style:{borderBottomLeftRadius:d?0:void 0,borderBottomRightRadius:d?0:void 0},children:[(0,p.FD)(j.S,{css:a$.domainWrapper,row:!0,gap:8,align:"center",children:[(0,p.Y)(V.EY,{multiline:!1,children:(0,p.Y)("a",{target:"_blank",href:"".concat(i.domain.startsWith("http://")||i.domain.startsWith("https://")?"":"https://").concat(i.domain),children:i.domain})}),(0,p.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,p.Y)(j.S,{css:a$.statusDot,style:{backgroundColor:aJ[i.state].color}}),(0,p.Y)(V.EY,{color:"dimmer",variant:"small",children:aJ[i.state].text})]})]}),(0,p.FD)(j.S,{row:!0,children:[(0,p.Y)(ol.r,{textToCopy:i.domain,tooltipSuccessText:"Copy link"}),(0,p.Y)(ty.m_,{tooltip:I,isDisabled:R,children:(0,p.Y)(e_.K0,{alt:"Edit",disabled:!R,tooltipBehavior:"hidden",onClick:function(){v(!1),h(function(e){return!e})},css:B.wp.color.foregroundDimmer,children:d?(0,p.Y)(n7.A,{}):(0,p.Y)(aE.A,{})})})]})]}),d?(0,p.Y)(j.S,{css:a$.expanded,gap:12,children:g?(0,p.FD)(p.FK,{children:[(0,p.Y)(V.EY,{children:"Are you sure you want to unlink this domain?"}),(0,p.FD)(j.S,{css:a$.buttons,children:[(0,p.Y)(eQ.$n,{size:"small",variant:"outlined",text:"Cancel",onClick:function(){v(!1)}}),(0,p.Y)(eQ.$n,{size:"small",disabled:C,text:"Yes, unlink "+i.domain,colorway:"negative",onClick:function(){A({variables:{input:{hostingDeploymentDomainId:i.id}}})}})]})]}):(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{gap:6,children:[D?(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{row:!0,gap:6,align:"center",children:[(0,p.Y)(na.A,{}),(0,p.Y)(V.EY,{children:"DNS Error"})]}),(0,p.FD)(V.EY,{children:["Failed to link domain",i.status?": ".concat(i.status.endsWith(".")?i.status.slice(0,-1):i.status):null,". Make sure your domain's DNS settings have these records."," ",(0,p.Y)("a",{target:"_blank",href:aq,children:"Learn more"})]})]}):(0,p.FD)(V.EY,{color:"dimmer",children:["Add these records to your domain's"," ",(0,p.Y)("strong",{css:B.wp.color.foregroundDefault,children:"DNS settings"}),". This may take up to 48 hours to fully apply."," ",(0,p.Y)("a",{target:"_blank",href:aq,children:"Learn more"})]}),(0,p.Y)(aZ,{hostname:i.domain,apexProxy:a,deploymentId:o})]}),(0,p.FD)(j.S,{css:a$.buttons,children:[(0,p.Y)(eQ.$n,{iconLeft:b||_?(0,p.Y)(nM.A,{}):(0,p.Y)(aa.A,{}),size:"small",text:D?"Retry linking":"Check status",onClick:function(){D?k({variables:{input:{hostingDeploymentDomainId:i.id}}}):y()}}),(0,p.Y)(ty.m_,{isDisabled:T,tooltip:P,children:(0,p.Y)(eQ.$n,{iconLeft:(0,p.Y)(ay.A,{}),size:"small",disabled:C||!T,text:D?"Remove domain":"Unlink domain",colorway:"negative",onClick:function(){v(!0)}})})]})]})}):null]})}var aX=t(59655),a0=t.n(aX);function a1(e){return(0,p.Y)(rj.Ay,(0,c._)((0,s._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M2.25 3A.75.75 0 0 1 3 2.25h18a.75.75 0 0 1 0 1.5h-1.304c-.273 1.86-1.53 3.131-2.595 4.209l-.067.068C15.749 9.328 14.75 10.384 14.75 12c0 1.616.999 2.672 2.284 3.973l.067.068c1.065 1.078 2.322 2.35 2.595 4.209H21a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h1.304c.273-1.86 1.53-3.131 2.595-4.209l.067-.068C8.251 14.672 9.25 13.616 9.25 12c0-1.616-.999-2.672-2.284-3.973L6.9 7.959C5.834 6.88 4.577 5.609 4.304 3.75H3A.75.75 0 0 1 2.25 3Zm3.577.75c.257 1.217 1.131 2.134 2.207 3.223l.067.068C9.303 8.258 10.75 9.721 10.75 12c0 2.278-1.447 3.742-2.65 4.959l-.066.068c-1.076 1.089-1.95 2.006-2.207 3.223H7.75l3.8-2.85a.75.75 0 0 1 .9 0l3.8 2.85h1.923c-.257-1.217-1.131-2.134-2.207-3.223l-.067-.068c-1.202-1.217-2.649-2.68-2.649-4.959 0-2.278 1.447-3.742 2.65-4.959l.066-.068c1.076-1.089 1.95-2.006 2.207-3.223H5.827Zm7.923 16.5L12 18.938l-1.75 1.312h3.5Z",clipRule:"evenodd"})}))}var a2=t(79571),a4=(0,eN.x)({root:[B.wp.p(8),B.wp.borderRadius(8),B.wp.border({color:ek.LU.outlineDimmer})],labelRow:[B.wp.rowWithGap(8),B.wp.align.center],labelText:[B.wp.flex.growAndShrink(1)],controls:[{"& > button":[B.wp.flex.growAndShrink(1)]}],valueRow:[B.wp.borderRadius(8),B.wp.pl(8),B.wp.pr(4),B.wp.height(32),B.wp.rowWithGap(8),B.wp.align.center,B.wp.justify.spaceBetween,{a:B.wp.hover(B.wp.color.accentPrimaryStrongest)}]}),a5=function(e){try{return new URL(e.startsWith("http")?e:"https://".concat(e)).hostname.toLowerCase()}catch(n){return e.trim().toLowerCase()}};function a8(e){var n,t=(0,u._)((0,f.useState)(!0),2),r=t[0],i=t[1],o=(0,u._)((0,f.useState)(""),2),a=o[0],l=o[1],c=(0,u._)((0,f.useState)(!1),2),d=c[0],h=c[1],m=(0,u._)((0,f.useState)(!1),2),g=m[0],v=m[1],w=(0,u._)((n=(0,s._)({},nC,{onCompleted:function(){e.onAdd()}}),ny.n(nD,n)),2),y=w[0],b=w[1].loading,S=(0,f.useRef)(null),Y=(0,f.useId)(),A=a0()(a),C=b||!a||g&&!A,x=g&&!A?"Enter a valid domain":null,k=b?(0,p.Y)(nM.A,{}):(0,p.Y)(t5.A,{});return r||b||(k=(0,p.Y)(a2.A,{})),(0,p.FD)(j.S,{tag:"form",css:a4.root,gap:16,onSubmit:function(n){if(n.preventDefault(),r){var t,o=a5(a);l(o),v(!0),a0()(o)?(i(!1),null===(t=S.current)||void 0===t||t.focus()):h(!0);return}y({variables:{input:{hostingDeploymentId:e.deploymentId,domain:a}}})},children:[(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(j.S,{tag:"label",htmlFor:Y,css:a4.labelRow,children:[A&&!r?(0,p.Y)(nN.A,{color:ek.LU.accentPositiveDefault}):null,(0,p.Y)(V.EY,{color:"dimmer",children:"First, enter your domain"})]}),r?(0,p.Y)(oF.pd,{id:Y,autoFocus:!0,placeholder:"example.com",value:a,disabled:b,onChange:function(e){l(e.currentTarget.value),v(!1),h(!1)}}):(0,p.FD)(n3.ui,{elevated:!0,css:a4.valueRow,children:[(0,p.Y)(j.S,{href:"https://"+a,tag:"a",target:"_blank",children:a}),(0,p.Y)(e_.K0,{alt:"Edit",onClick:function(){return i(!0)},children:(0,p.Y)(aE.A,{color:ek.LU.foregroundDimmer})})]}),x&&d?(0,p.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,p.Y)(na.A,{size:12,color:ek.LU.orangeDefault}),(0,p.Y)(V.EY,{variant:"small",children:x})]}):null]}),!r&&A?(0,p.Y)(a3,{apexProxy:e.apexProxy,domain:a,deploymentId:e.deploymentId}):null,(0,p.FD)(j.S,{css:a4.controls,row:!0,gap:8,justify:"space-between",children:[(0,p.Y)(eQ.$n,{type:"button",text:"Cancel",onClick:e.onCancel}),(0,p.Y)(eQ.$n,{ref:S,iconRight:k,colorway:"primary",type:"submit",disabled:C,text:r?"Next":"Link domain"})]})]})}function a3(e){var n={A:{hostname:e.domain,record:e.apexProxy},TXT:{hostname:e.domain,record:"replit-verify=".concat(e.deploymentId)}};return(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(j.S,{css:a4.labelRow,children:[(0,p.Y)(a1,{color:ek.LU.foregroundDimmest}),(0,p.FD)(V.EY,{multiline:!0,css:a4.labelText,children:["Next, add the following records to your domain's DNS settings."," ",(0,p.Y)("a",{target:"_blank",href:aq,children:"Learn more"})]}),(0,p.Y)(ol.i,{textToCopy:JSON.stringify(n,null,2),text:"JSON",showIcon:!0,size:"small"})]}),(0,p.Y)(aZ,{apexProxy:e.apexProxy,hostname:e.domain,deploymentId:e.deploymentId})]})}var a6=t(75251),a7=(0,eN.x)({primaryDomain:[B.wp.height(32),B.wp.justify.spaceBetween,B.wp.align.center,B.wp.pl(8),B.wp.pr(4),B.wp.borderRadius(8)],primaryDomainLink:[B.wp.flex.shrink(1),B.wp.color.accentPrimaryStronger,{a:B.wp.hover(B.wp.color.accentPrimaryStrongest)}]});function a9(e){var n,t,r,i=e.deployment,o=e.authorizations,a=(0,u._)((0,f.useState)(!1),2),l=a[0],c=a[1],d=(0,u._)((0,f.useState)(void 0),2),h=d[0],m=d[1],v=(0,rz._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:r_.co});n={variables:{id:i.id},fetchPolicy:"cache-and-network",ssr:!1,pollInterval:h,onCompleted:function(e){var n,t;m((null===(n=e.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"&&(null===(t=e.hostingDeployment.domains)||void 0===t?void 0:t.some(function(e){return e.state===S.xp.Verifying}))?3e4:void 0)}},t=(0,s._)({},nC,n),F.I(n_,t);var w=(null==i?void 0:null===(r=i.domains)||void 0===r?void 0:r.length)?i.domains:null,y=(null==i?void 0:i.currentBuild.status)===S.nH.Success,b=null==i?void 0:i.repl.apexProxy,Y=(0,g.cF)(),A=function(){var e,n,t,r,i,o=(null==Y?void 0:null===(e=Y.repl.hostingDeployment)||void 0===e?void 0:e.__typename)==="HostingDeployment"?null===(n=Y.repl.hostingDeployment)||void 0===n?void 0:n.replitAppSubdomain:void 0;if(!o&&(null==Y?void 0:null===(t=Y.repl.owner)||void 0===t?void 0:t.username)&&(o="".concat(Y.repl.slug,"-").concat(Y.repl.owner.username)),o)return"".concat(o).concat((null===(i=window)||void 0===i?void 0:null===(r=i.location)||void 0===r?void 0:r.hostname)!=="replit.com"?".staging":"",".").concat(v)}(),C=o.addCustomDomain,x=C.isAuthorized,k=C.message;return(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(n3.ui,{elevated:!0,css:a7.primaryDomain,row:!0,gap:4,children:[(0,p.Y)(V.EY,{multiline:!1,css:a7.primaryDomainLink,children:(0,p.Y)("a",{href:"https://".concat(A),target:"_blank",rel:"noreferrer noopener",children:A})}),(0,p.FD)(j.S,{row:!0,align:"center",children:[(0,p.Y)(ol.r,{textToCopy:null!=A?A:""}),(0,p.Y)(ty.m_,{tooltip:le,children:(0,p.Y)(rV.A,{"aria-label":le,color:ek.LU.foregroundDimmer,css:B.wp.m(4)})})]})]}),w&&i?(0,p.Y)(j.S,{gap:8,children:w.map(function(e){return(0,p.Y)(j.S,{children:(0,p.Y)(aQ,{apexProxy:i.repl.apexProxy,deploymentId:i.id,domain:e,authorizations:o})},e.domain)})}):null,l&&b?(0,p.Y)(a8,{apexProxy:b,deploymentId:i.id,onAdd:function(){return c(!1)},onCancel:function(){return c(!1)}}):null,y?null:(0,p.Y)(G.N,{colorway:"warning",icon:(0,p.Y)(na.A,{}),text:"You must successfully deploy your project before linking a domain"}),!1===l?(0,p.Y)(j.S,{row:!0,children:(0,p.Y)(ty.m_,{tooltip:k,isDisabled:x,children:(0,p.Y)(eQ.$n,{disabled:!y||!x,iconLeft:(0,p.Y)(a6.A,{}),text:"Link a domain",onClick:function(){return c(!0)},variant:"outlined",size:"small"})})}):null]})}var le="You must shut down your deployment and redeploy to change the primary domain";function ln(){var e=(0,R._)(["\n  mutation NotificationsSectionUpdateFailureNotifications(\n    $input: UpdateMachineJobFailureNotificationInput!\n  ) {\n    updateMachineJobFailureNotification(input: $input) {\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UpdateMachineJobFailureNotificationResult {\n        failureNotifications\n      }\n    }\n  }\n"]);return ln=function(){return e},e}var lt={},lr=(0,I.J1)(ln()),li=t(53723),lo=t(92264);function la(e){return(0,p.Y)(rj.Ay,(0,c._)((0,s._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M.47.47a.75.75 0 0 1 1.06 0l5.25 5.249a.745.745 0 0 1 .02.02l10.73 10.73.001.001 6 6a.75.75 0 1 1-1.061 1.06l-5.78-5.78H3a.75.75 0 0 1-.414-1.376l.063-.05c.06-.05.156-.136.275-.262.239-.252.575-.668.918-1.296C4.525 13.514 5.25 11.39 5.25 8a6.61 6.61 0 0 1 .173-1.517L.47 1.53a.75.75 0 0 1 0-1.06Zm6.283 7.344a5.096 5.096 0 0 0-.003.184V8c0 3.61-.775 5.986-1.592 7.484a8.768 8.768 0 0 1-.468.766h10.5L6.752 7.814Zm4.922-6.565A6.75 6.75 0 0 1 18.75 8v.011c-.026 1.617.177 3.23.604 4.79a.75.75 0 0 1-1.447.396 18.642 18.642 0 0 1-.657-5.204 5.25 5.25 0 0 0-8.164-4.37.75.75 0 0 1-.832-1.248 6.75 6.75 0 0 1 3.42-1.127ZM9.894 20.35a.75.75 0 0 1 1.025.273 1.25 1.25 0 0 0 2.162 0 .75.75 0 0 1 1.298.752 2.749 2.749 0 0 1-4.758 0 .75.75 0 0 1 .273-1.025Z",clipRule:"evenodd"})}))}var ll=(0,eN.x)({container:[B.wp.colWithGap(8)]});function ls(e){var n,t=e.replId,r=e.isCurrentBuildSuccess,i=e.areFailureNotificationsEnabled,o=(0,rz._P)({controlName:"flag-cron-push-notifications",type:"boolean",default:!1,logFlagToAnalytics:!0}),a=(0,u._)((0,f.useState)(i),2),l=a[0],c=a[1],d=(0,u._)((0,f.useState)(void 0),2),h=d[0],m=d[1],g=(0,u._)((n=(0,s._)({},lt,{onCompleted:function(e){var n=e.updateMachineJobFailureNotification;((null==n?void 0:n.__typename)==="NotFoundError"||(null==n?void 0:n.__typename)==="UnauthorizedError"||(null==n?void 0:n.__typename)==="UserError")&&(m(n.message),c(function(e){return!e}))}}),ny.n(lr,n)),1)[0],v=function(e){m(void 0),g({variables:{input:{replId:t,failureNotifications:e}}}),c(e)};return(0,p.FD)(j.S,{children:[h?(0,p.Y)(G.N,{text:h,colorway:"warning"}):null,(0,p.FD)(ty.m_,{isDisabled:r,tooltip:"Most recent build failed. Re-deploy successfully before enabling notifications",placement:"top-end",css:ll.container,children:[(0,p.FD)(li.e2,{disabled:!r,tag:"fieldset",name:"notification-switch",value:l?"enabled":"disabled",onChange:function(e){v("enabled"===e)},row:!0,primary:!0,stretch:!0,children:[(0,p.Y)(li.$O,{id:"failure-notifications-disabled",value:"disabled",text:"Disabled",icon:(0,p.Y)(la,{})}),(0,p.Y)(li.$O,{id:"failure-notifications-enabled",value:"enabled",text:"Enabled",icon:(0,p.Y)(lo.A,{})})]}),(0,p.Y)(V.EY,{color:"dimmer",children:"Send email ".concat(o?"and push ":"","notifications when scheduled jobs fail")})]})]})}var lc=(0,eN.x)({container:[tR.R1.maxWidth,B.wp.py(8)],usageContainer:B.wp.colWithGap(16),header:B.wp.pb(8),paddedHeader:B.wp.pb(12)}),lu=function(e){var n=e.deploymentId,t=e.onLifecycleCommand,r=e.onError;return n?(0,p.Y)(lp,{deploymentId:n,onLifecycleCommand:t,onError:r}):(0,p.Y)(A.A,{children:(0,p.Y)(G.N,{colorway:"warning",icon:(0,p.Y)(na.A,{}),text:"Deployment not found"})})},ld={__typename:"ReplAuthorizations",addCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:S.S4.InsufficientPermissions,message:"Loading"},deleteCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:S.S4.InsufficientPermissions,message:"Loading"},deleteDeployment:{__typename:"ReplAuthorization",isAuthorized:!1,code:S.S4.InsufficientPermissions,message:"Loading"},editDeploymentStatus:{__typename:"ReplAuthorization",isAuthorized:!1,code:S.S4.InsufficientPermissions,message:"Loading"},editDeploymentTier:{__typename:"ReplAuthorization",isAuthorized:!1,code:S.S4.InsufficientPermissions,message:"Loading"}};function lp(e){var n,t,r,i,o,a,l,c,d=(0,r5.m6)(),h=(0,u._)((0,f.useState)(!1),2),m=h[0],g=h[1];(0,f.useEffect)(function(){(0,eL.Ae)({context:Y.P.Settings})},[]);var v=(0,u._)((n=(0,s._)({},nF,void 0),nv._(nL,n)),2),w=v[0],y=v[1],b=y.data,C=y.error,x=(t={variables:{id:e.deploymentId},ssr:!1,fetchPolicy:"cache-and-network",onCompleted:function(e){var n;(null==e?void 0:null===(n=e.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"&&w({variables:{replId:e.hostingDeployment.repl.id,provider:e.hostingDeployment.currentBuild.provider}})}},r=(0,s._)({},nF,t),F.I(nP,r)),k=x.data,_=x.loading,D=x.error,E=(null==k?void 0:null===(i=k.hostingDeployment)||void 0===i?void 0:i.__typename)==="HostingDeployment"?k.hostingDeployment:void 0,R=(null==E?void 0:E.currentBuild.provider)===S.Q0.Cron;if(m)return(0,p.Y)(np.J,{onError:e.onError,onConfirm:function(n){e.onLifecycleCommand({command:S.jP.UpdateMachineConfiguration,machineConfigurationId:n.configurationId,maxMachineInstances:n.maxInstances})},onBack:function(){return g(!1)}});if(D)return(0,p.Y)(ne.Wx,{text:D.message});if(_||!E)return(0,p.Y)(A.A,{centered:!0,children:(0,p.Y)(ne.cN,{})});var I=E.currentBuild,T=null!==(l=null==I?void 0:I.machineConfiguration)&&void 0!==l?l:void 0,P=(null==b?void 0:null===(o=b.getRepl)||void 0===o?void 0:o.__typename)==="Repl"?b.getRepl.authorizations:ld;return(0,p.Y)(A.A,{children:(0,p.FD)(j.S,{css:lc.container,gap:32,children:[C?(0,p.Y)(G.N,{colorway:"negative",text:C.message}):void 0,I.provider===S.Q0.CloudRun?(0,p.FD)(j.S,{children:[(0,p.Y)(V.EY,{variant:"subheadDefault",css:lc.header,children:"Resource usage"}),(0,p.Y)(j.S,{css:lc.usageContainer,children:(0,p.Y)(aI,{machineConfiguration:T,onEditAutoscaleMachineConfiguration:function(){return g(!0)},authorizations:P})})]}):null,I.provider!==S.Q0.Cron?(0,p.FD)(j.S,{children:[(0,p.Y)(V.EY,{variant:"subheadDefault",css:lc.header,children:"Domains"}),(0,p.Y)(a9,{deployment:E,authorizations:P})]}):null,(0,p.FD)(j.S,{children:[(0,p.Y)(V.EY,{variant:"subheadDefault",css:lc.paddedHeader,children:"Manage deployment"}),(0,p.Y)(rI,{}),(0,p.Y)(aS,{onLifecycleCommand:e.onLifecycleCommand,authorizations:P})]}),R?(0,p.FD)(j.S,{children:[(0,p.Y)(V.EY,{variant:"subheadDefault",css:lc.paddedHeader,children:"Scheduled Job Notifications"}),(0,p.Y)(ls,{replId:E.repl.id,isCurrentBuildSuccess:E.currentBuild.status===S.nH.Success,areFailureNotificationsEnabled:null!==(c=null===(a=E.currentBuild.machineJob)||void 0===a?void 0:a.failureNotifications)&&void 0!==c&&c})]}):null,d?null:(0,p.FD)(j.S,{children:[(0,p.Y)(V.EY,{variant:"subheadDefault",css:lc.paddedHeader,children:"Deploy on the go"}),(0,p.Y)(aC,{shouldShowDownloadQR:!1})]})]})})}var lf=t(68221),lh=t(57198),lm=t(73978),lg=t(11764),lv=t(87098),lw=t(31412),ly=t(30094),lb=[S.Q0.Gce,S.Q0.CloudRun,S.Q0.Cron],lS=(0,eN.x)({root:[{height:"100%"},B.wp.overflow("hidden"),B.wp.position.relative],content:[B.wp.overflow("auto"),B.wp.flex.growAndShrink(1),B.wp.position.relative]}),lY=function(e){var n,t,r,i,o,a,l,s,c,d,h,m,v,C,x=e.onViewUpdate,k=e.onError,_=e.refetch,D=e.openFile,E=e.openPane,R=e.initialView,I=e.error,F=e.flow,T=function(e){$({type:Y.k.SendDeploymentLifecycleCommand,payload:e})},P=(0,nQ.A)(),L=(0,g.i$)(),U=(0,g.tq)(),N=(0,g.cF)(),O=(0,g.om)(),M="string"==typeof L,B=void 0===U&&!M,H=(0,lm.Ay)(),z=(0,lh.Q)(),W=!!z,V=(0,u._)((0,f.useState)(function(){return U?Y.P.DeploymentInProgress:B?Y.P.Intro:Y.P.Deployment}),2),Z=V[0],q=V[1];(0,f.useEffect)(function(){U&&q(Y.P.DeploymentInProgress)},[U]);var K=(0,g.e_)(),$=(n=(0,w._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:switch(x(),e.type){case Y.k.SendDeploymentLifecycleCommand:return[3,1];case Y.k.ChangeView:return[3,3];case Y.k.OpenPane:return[3,4]}return[3,7];case 1:return[4,K(e.payload)];case 2:if(t.sent(),e.payload.command===S.jP.Destroy)return q(Y.P.Intro),_(),[2];return e.payload.command===S.jP.UpdateMachineConfiguration&&_(),q(Y.P.Deployment),[3,8];case 3:return q(e.payload.view),[3,8];case 4:if("codeEditor"!==(n=e.payload).type||".replit"!==n.data.path)return[3,6];return[4,O.stat(".replit")];case 5:if(!t.sent().exists)return k("Could not find .replit configuration file."),[2];t.label=6;case 6:return E(n),[3,8];case 7:return[3,8];case 8:return[2]}})}),function(e){return n.apply(this,arguments)}),J=(t=null==N?void 0:N.provider,r=(0,rz._P)({controlName:"flag-supply-eye",logFlagToAnalytics:!1,default:!1}),o=(i=(0,eU.g)("deployment-analytics-dot")).isLoading,a=i.isDone,(0,f.useMemo)(function(){return[{value:Y.P.Deployment,label:"Overview",icon:(0,p.Y)(no.A,{})}].concat((0,y._)(t===S.Q0.Cron?[{value:Y.P.Schedule,label:"Schedule",icon:(0,p.Y)(nO.A,{})}]:[]),(0,y._)(t!==S.Q0.Static?[{value:Y.P.Logs,label:"Logs",icon:(0,p.Y)(n1.A,{})}]:[]),(0,y._)(t!==S.Q0.Cron?[{value:Y.P.Analytics,label:"Analytics",icon:(0,p.Y)(lv.A,{}),showDot:!o&&!a}]:[]),(0,y._)(t&&r&&lb.includes(t)?[{value:Y.P.ResourceMonitoring,label:"Resources",icon:(0,p.Y)(ly.A,{}),beta:!1}]:[]),[{value:Y.P.Settings,label:"Settings",icon:(0,p.Y)(lw.A,{})}])},[a,o,t,r])),Q=(l=(0,i_.Os)(ik.IW.id,ik.Gp.SetupDeployment,{onEnter:function(){Z!==Y.P.Intro&&l.goto(ik.Gp.MonitorDeployment)}}),s=(0,i_.Jw)(ik.IW.id,ik.Gp.ApproveDeployment),c=(0,i_.Jw)(ik.IW.id,ik.Gp.ConfirmDeployment),d=(0,i_.Os)(ik.IW.id,ik.Gp.MonitorDeployment),h=(0,i_.Os)(ik._t.id,ik.ij.SetupDeployment,{onEnter:function(){Z!==Y.P.Intro&&h.goto(ik.ij.MonitorDeployment)}}),m=(0,i_.Jw)(ik._t.id,ik.ij.ApproveDeployment),v=(0,i_.Jw)(ik._t.id,ik.ij.ConfirmDeployment),C=(0,i_.Os)(ik._t.id,ik.ij.MonitorDeployment),{shouldDisableUnrecommendedProviders:l.isActive||h.isActive,mergedTourRefs:(0,lf.P)(l.tourRef,s,c,d.tourRef,h.tourRef,m,v,C.tourRef,{breadcrumb:"client/deployments/Deployment/Views/useDeploymentGuidedTourSteps.ts:79"}),handleDeploy:function(){d.goto(ik.Gp.MonitorDeployment),C.goto(ik.ij.MonitorDeployment)}});return Z===Y.P.Intro?(0,p.Y)(j.S,{css:lS.content,innerRef:Q.mergedTourRefs,children:(0,p.Y)(iK,{initialSelectedProvider:R===Y.P.ReservedVMTierSelection?S.Q0.Gce:void 0,onViewAction:$,onError:k,onDeploy:function(){$({type:Y.k.ChangeView,payload:{view:Y.P.DeploymentInProgress}}),Q.handleDeploy(),z&&H({action:"deploying_app",sessionId:z})},replId:P,disableUnrecommendedProviders:Q.shouldDisableUnrecommendedProviders,hasAgentSession:W,flow:F})}):(0,p.FD)(j.S,{css:lS.root,innerRef:Q.mergedTourRefs,children:[J?(0,p.Y)(lg.P,{onClick:function(e){$({type:Y.k.ChangeView,payload:{view:e.value}})},tabs:J,value:Z===Y.P.DeploymentInProgress?Y.P.Deployment:Z}):null,(0,p.FD)(j.S,{css:lS.content,children:[I?(0,p.Y)(A.A,{children:(0,p.Y)(G.N,{colorway:"warning",icon:(0,p.Y)(na.A,{}),text:I})}):null,Z===Y.P.Analytics?(0,p.Y)(eG,{replId:P}):null,Z===Y.P.Logs?(0,p.Y)(oX,{replId:P,deploymentId:L,openFile:D}):null,Z===Y.P.ResourceMonitoring?(0,p.Y)(o3,{replId:P}):null,Z===Y.P.Settings?(0,p.Y)(lu,{onError:k,deploymentId:L,onLifecycleCommand:T}):null,Z===Y.P.Deployment||Z===Y.P.DeploymentInProgress?(0,p.Y)(it,{view:Z,refetch:_,onViewAction:$,onError:k,openFile:D,onLifecycleCommand:T,hasAgentSession:W}):null,Z===Y.P.Schedule?(0,p.Y)(as,{replId:P,deploymentId:L,openFile:D}):null]})]})},lA=t(33078);function lC(e){var n=e.initialView,t=e.flow,r=e.onViewUpdate,i=e.openFile,o=e.openPane,a=e.tabsNavRef,l=(0,g.Ki)(),s=(0,g.uS)(),c=(0,g.Jz)(),d=(0,u._)((0,f.useState)(null),2),h=d[0],m=d[1];return s===v.d.Loading?(0,p.Y)(lA.A,{pane:{type:"deployments"},headerText:"Deploy to production",loading:!0}):(0,p.Y)(lY,{tabsNavRef:a,initialView:n,onViewUpdate:function(){h&&m(null),r()},onError:m,refetch:l,openFile:i,openPane:o,error:h||c,flow:t})}var lx=t(43612),lk=t(1566),l_=h.ZU.Object({skipIntro:h.ZU.Optional(h.ZU.Boolean()),isAgentDeployment:h.ZU.Optional(h.ZU.Boolean())}),lD=h.ZU.Object({type:h.ZU.Literal("deployments"),data:h.ZU.Optional(h.ZU.Object({view:h.ZU.Enum(Y.P)})),flow:h.ZU.Optional(l_)}),lE={Content:function(e){var n=e.pane,t=n.data,r=n.flow,i=e.options.performPaneOperation,o=(0,f.useRef)(function(e){if(e&&(void 0===e?"undefined":(0,d._)(e))==="object"&&"view"in e&&e.view===Y.P.ReservedVMTierSelection)return Y.P.ReservedVMTierSelection}(t)),a=(0,f.useCallback)(function(e){return i({operation:"open",secondary:!0,pane:{type:(0,iI.QY)(e),data:e}})},[i]),l=(0,u._)((0,f.useState)(null),2),h=l[0],m=l[1],g=(0,lx.xQ)().getDeploymentCommand;(0,lk.Qt)(function(){var e={type:"deployments",getTabs:h?h.getTabs:function(){return null},setTab:h?h.setTab:function(){}},n=g();return n?(0,c._)((0,s._)({},e),{commands:[{commands:[n]}]}):e},[h,g]);var v=(0,f.useCallback)(function(e){i({operation:"open",pane:e,secondary:!0})},[i]);return(0,p.Y)(lC,{tabsNavRef:m,initialView:o.current,onViewUpdate:function(){o.current&&(o.current=void 0,i({operation:"replace",pane:{type:"deployments"}}))},openFile:a,openPane:v,flow:r})},Icon:function(e){var n=e.size;return(0,p.Y)(rj.Vx.Provider,{value:{color:ek.LU.greenStrongest,size:n},children:(0,p.Y)(no.A,{})})},getTitle:function(){return"Deployments"},description:"Publish a live, stable, public version of your App, unaffected by the changes you make in the workspace",category:iI.bY.CloudServices,decode:function(e){return m.WT.Decode(lD,e)}}},99767:(e,n,t)=>{"use strict";t.d(n,{z:()=>o});var r=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function o(e,n){var t,o=n||{},a=o.signed,l=o.digitsNumber,s=o.isKib,c=o.isKibNotation;if(t=void 0!==a&&a?e<0?"-":"+":"",0===e)return"".concat(t,"0B");var u=void 0===s||s?1024:1e3,d=Math.floor(Math.log(Math.abs(e))/Math.log(u));return"".concat(t).concat(parseFloat(Math.abs(e/Math.pow(u,d)).toFixed(void 0===l?2:l))).concat((void 0!==c&&c?r:i)[d])}},99941:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(1889),a=t(84296);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M2.365 4.356a.75.75 0 0 1 .74-.016l13 7a.75.75 0 0 1 0 1.32l-13 7A.75.75 0 0 1 2 19V5a.75.75 0 0 1 .365-.644Zm1.135 1.9v11.488L14.168 12 3.5 6.256ZM18.5 12a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1-.75-.75ZM11 6a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5h-10.5A.75.75 0 0 1 11 6ZM11 18a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5h-10.5A.75.75 0 0 1 11 18Z",clipRule:"evenodd"})}))}}}]);
//# sourceMappingURL=8062-bbc045d8fcb04349.js.map