!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="fca1cfe4-37a5-4d6d-a1ca-a1d2c26e9b81",e._sentryDebugIdIdentifier="sentry-dbid-fca1cfe4-37a5-4d6d-a1ca-a1d2c26e9b81")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"35ecf50c"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9504],{10053:(e,n,t)=>{t.d(n,{o:()=>u});var r=t(1889),o=t(43974),i=t(26705),c=t(40043),a=t(35869),s=t(4989);function u(e){var n=e.title,t=e.onBack,u=e.children;return(0,r.FD)(a.S,{gap:16,children:[(0,r.FD)(a.S,{row:!0,gap:8,align:"center",children:[t?(0,r.Y)(i.K0,{alt:"Back",onClick:t,size:24,children:(0,r.Y)(s.A,{size:24})}):null,(0,r.Y)(c.EY,{variant:"subheadBig",multiline:!1,children:n})]}),(0,r.Y)(a.S,{css:[o.wp.flex.grow(1)],justify:"center",children:u})]})}},14166:(e,n,t)=>{t.d(n,{j:()=>s});var r=t(12694),o=t(21462),i=t(1376),c="(prefers-reduced-motion: no-preference)",a=function(){return!window.matchMedia||!window.matchMedia(c).matches};function s(){var e=(0,r._)((0,o.useState)(a),2),n=e[0],t=e[1],s=(0,i.wR)();return(0,o.useEffect)(function(){if(window.matchMedia){var e=window.matchMedia(c),n=function(e){t(!e.matches)};if(null==e?void 0:e.addEventListener)return e.addEventListener("change",n),function(){n&&e.removeEventListener("change",n)}}},[]),!!s||n}},33136:(e,n,t)=>{t.d(n,{V:()=>I});var r=t(29935),o=t(17844),i=t(93629),c=t(12694),a=t(82643),s=t(1889),u=t(21462),l=t(12584),d=t(41114),f=t(51026),h=t(5971),p=t(84538);function m(){var e=(0,l._)(["\n  query RefetchCyclesBalancePurchaseForm {\n    currentUser {\n      id\n      ...CyclesBalanceFragment\n      paymentMethod {\n        ... on PaymentMethod {\n          ...UserPaymentMethod\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return m=function(){return e},e}var y={},w=(0,d.J1)(m(),h.eC,p.R),g=t(99692),S=t(317),v=t(86464),b=t(96044),_=t(98348),k=t(24675),C=t(88750),Y=t(26335),E=t(83608),P=t(70771),D=t(43974),R=t(3910),F=t(40043),T=t(35869),A=t(20627);function I(e){var n,t=e.cyclesQuantity,l=e.onSuccess,d=(0,C.N)().createCheckoutSession;function h(){return(h=(0,r._)(function(e){var n,o,i,c,s,u;return(0,a.YH)(this,function(f){switch(f.label){case 0:return n=e.stripe,o=e.elements,i=e.onError,c=e.onSubmitComplete,[4,o.submit()];case 1:var h;if(s=f.sent().error)return u=(0,P.YY)(s),i(u),[2];return d({input:{cyclesQuantity:t},onError:function(e){i(e),(0,b.P)("Error in CyclesPurchaseForm when creating Checkout Session: "+e)},onSucceed:(h=(0,r._)(function(e){var t,s,u,d;return(0,a.YH)(this,function(f){switch(f.label){case 0:return t=e.clientSecret,s=e.checkoutSessionId,[4,n.confirmPayment({clientSecret:t,elements:o,confirmParams:P.nx,redirect:"if_required"})];case 1:var h,y;return(u=f.sent().error)?(d=(0,P.YY)(u),i(d)):(y=(h={onSubmitComplete:c,checkoutSessionId:s}).onSubmitComplete,p({checkoutSessionId:h.checkoutSessionId,onFailed:function(){H("Polling for one-time cycles checkout failed.")},onError:function(e){H("Polling for one-time cycles checkout errored: "+e)},onSucceeded:(0,r._)(function(){return(0,a.YH)(this,function(e){return m({fetchPolicy:"network-only",onError:function(e){H("Refetching cycles balance errored: "+e)},onCompleted:function(){y(),setTimeout(function(){l()},2e3)}}),[2]})})})),[2]}})}),function(e){return h.apply(this,arguments)})}),[2]}})})).apply(this,arguments)}var p=(0,E.f)().startPolling,m=(0,c._)((n=(0,o._)({},y,void 0),f._(w,n)),1)[0],I=(0,c._)((0,u.useState)(!1),2),M=I[0],O=I[1],x=(0,Y.Q)(),B=x.isOnTrialPlan,U=x.trialWillCancel,N=x.isPro;function H(e){(0,b.P)(e),O(!0),m({fetchPolicy:"network-only"})}return M?(0,s.Y)(_.A,{}):(0,s.FD)(T.S,{children:[B&&!U?(0,s.Y)(R.N,{colorway:"primary",icon:(0,s.Y)(A.A,{}),text:(0,s.FD)(s.FK,{children:["Adding a payment method will set your Replit"," ",N?S.en:S.BH," membership to auto-renew at the end of the trial. Cancel anytime from your"," ",(0,s.Y)("a",{css:D.wp.color.foregroundDefault,href:"/account#billing",target:"_blank",children:"account settings"}),"."]})}):null,(0,s.Y)(k.A,{elementsOptions:(0,i._)((0,o._)({},P.Ny),{mode:"payment",amount:(0,g.IZ)(t),setup_future_usage:"off_session"}),isPayment:!0,submitButtonText:"Complete Purchase",onSubmit:function(e){return h.apply(this,arguments)},disclaimerTextAction:"completing this purchase and adding this payment method",purchaseItemDetails:(0,s.FD)(T.S,{row:!0,gap:8,justify:"space-between",align:"center",children:[(0,s.FD)(F.EY,{variant:"subheadDefault",color:"dimmer",multiline:!1,children:[(0,v.m8)(t)," "]}),(0,s.Y)(F.EY,{variant:"subheadDefault",multiline:!1,children:(0,v.QJ)(t)})]})})]})}},33255:(e,n,t)=>{t.d(n,{A:()=>T});var r=t(29935),o=t(12694),i=t(82643),c=t(1889),a=t(21462),s=t(64327),u=t(17844),l=t(12584),d=t(41114),f=t(51026),h=t(5971);function p(){var e=(0,l._)(["\n  query RefetchCyclesBalance {\n    currentUser {\n      id\n      ...CyclesBalanceFragment\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var m={},y=(0,d.J1)(p(),h.eC),w=t(86464),g=t(81239),S=t(96044),v=t(24374),b=t(98348),_=t(26966),k=t(88750),C=t(83608),Y=t(66404),E=t(43974),P=t(26705),D=t(40043),R=t(35869),F=t(48795);function T(e){var n,t=e.cyclesQuantity,l=e.onRequestPaymentMethodSetupForm,d=e.onPurchaseComplete,h=(0,s.useStripe)(),p=(0,Y.y)().paymentMethod,T=(0,k.N)().createCheckoutSession,A=(0,C.f)().startPolling,I=(0,o._)((n=(0,u._)({},m,void 0),f._(y,n)),1)[0],M=(0,g.A)().showError,O=(0,o._)((0,a.useState)("Processing..."),2),x=O[0],B=O[1],U=(0,o._)((0,a.useState)(!1),2),N=U[0],H=U[1],q=(0,o._)((0,a.useState)(!1),2),L=q[0],Q=q[1];function j(){return(j=(0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:var n;if(null==p)return M("A payment method is required."),(0,S.P)(Error("User attempted cycles purchase without a payment method.")),[2];if(null==h)return M("Error loading payment system."),(0,S.P)(Error("User attempted cycles purchase without Stripe loaded.")),[2];return H(!0),B("Checking out..."),[4,T({input:{cyclesQuantity:t},onError:function(e){M(e),H(!1)},onSucceed:(n=(0,r._)(function(e){var n,t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return B("Processing payment..."),[4,h.confirmCardPayment(e.clientSecret)];case 1:if(n=r.sent().error)return M(null!==(t=n.message)&&void 0!==t?t:"An error occurred. Please try again."),H(!1),[2];return B("Adding Cycles to your wallet..."),A({checkoutSessionId:{checkoutSessionId:e.checkoutSessionId}.checkoutSessionId,onSucceeded:function(){I({fetchPolicy:"network-only",onError:function(e){W("Refetching cycles balance after one-time checkout failed: "+e)},onCompleted:function(){H(!1),Q(!0),setTimeout(function(){d()},2e3)}})},onFailed:function(){W("Polling for one-time cycles checkout failed.")},onError:function(e){W("Polling for one-time cycles checkout errored: "+e)}}),[2]}})}),function(e){return n.apply(this,arguments)})})];case 1:return e.sent(),[2]}})})).apply(this,arguments)}var J=(0,o._)((0,a.useState)(!1),2),K=J[0],z=J[1];function W(e){(0,S.P)(e),z(!0),H(!1),I({fetchPolicy:"network-only"})}return K?(0,c.Y)(b.A,{}):(0,c.FD)(R.S,{css:[E.wp.py(12),E.wp.px(16),E.wp.colWithGap(12)],children:[(0,c.FD)(D.EY,{variant:"subheadDefault",multiline:!1,children:["Buy ",(0,w.m8)(t)," "]}),(0,c.FD)(R.S,{row:!0,gap:8,justify:"space-between",align:"center",children:[(0,c.Y)(D.EY,{multiline:!1,children:(0,w.QJ)(t)}),(0,c.FD)(R.S,{row:!0,gap:8,align:"center",children:[p?(0,c.Y)(v.l,{last4:p.last4}):(0,c.Y)(D.EY,{css:[E.wp.color.accentNegativeDefault],multiline:!1,children:"Enter a payment method"}),(0,c.Y)(P.K0,{alt:"Edit",onClick:l,children:(0,c.Y)(F.A,{})})]})]}),(0,c.Y)(_.T,{isMakingPayment:!0,disabled:!p||N||L,initialStateTextOverride:"Confirm Purchase",processingStateTextOverride:x,showProcessingState:N,showSuccessState:L,onClick:function(){return j.apply(this,arguments)}})]})}},59533:(e,n,t)=>{t.d(n,{C:()=>v});var r=t(83846),o=t(12694),i=t(1889),c=t(21462),a=t(91564),s=t(14166),u=t(6680),l=t(61234),d=t(22498),f=t(43974),h=t(26705),p=t(35869),m=t(28365),y=(0,d.v)(["y","opacity","containerOverflow"]),w=y.cssVars,g=y.styleTokens,S=(0,l.x)({root:[f.wp.position.relative],container:[f.wp.position.absolute,f.wp.borderRadius(8),f.wp.bottom(0),f.wp.minWidth("max(100%, 240px)"),{transform:"translateX(-50%)",overflow:g.containerOverflow,opacity:g.opacity,transition:"opacity ".concat(500,"ms ease-out")},f.wp.right("50%"),f.wp.left("50%")],content:[f.wp.backgroundColor.backgroundHigher,f.wp.border({color:u.LU.outlineDefault,width:1}),f.wp.borderRadius(8),{transform:"translateY(".concat(g.y,")"),transition:"transform ".concat(500,"ms ease-out"),boxShadow:"0 0 20px ".concat(u.LU.black)}],iconButton:[f.wp.position.absolute,f.wp.top(4),f.wp.right(4)]});function v(e){var n,t=e.children,u=e.isOpen,l=e.onRequestClose,d=(0,s.j)(),f=(0,o._)(t,2),y=f[0],g=f[1],v=(0,o._)((0,c.useState)(d?"0%":"100%"),2),b=v[0],_=v[1],k=(0,o._)((0,c.useState)(+!d),2),C=k[0],Y=k[1],E=(0,o._)((0,c.useState)(u),2),P=E[0],D=E[1],R=(0,o._)((0,c.useState)(u?"visible":"hidden"),2),F=R[0],T=R[1],A=(0,a.A)(function(){l()},[]);return(0,c.useEffect)(function(){P&&(Y(1),_("0%"))},[P]),(0,c.useLayoutEffect)(function(){if(u){if(D(!0),d){T("visible");return}var e=setTimeout(function(){T("visible")},500);return function(){clearTimeout(e)}}Y(+!d),_(d?"0%":"100%"),T("hidden");var n=setTimeout(function(){D(!1)},500);return function(){clearTimeout(n)}},[u,d]),(0,i.FD)(p.S,{css:S.root,style:(n={},(0,r._)(n,w.y,b),(0,r._)(n,w.opacity,C),(0,r._)(n,w.containerOverflow,F),n),children:[y,P?(0,i.Y)("div",{css:S.container,children:(0,i.FD)("div",{ref:A,css:S.content,children:[(0,i.Y)(h.K0,{alt:"Close",tooltipBehavior:"hidden",onClick:l,css:S.iconButton,children:(0,i.Y)(m.A,{})}),g]})}):null]})}},88750:(e,n,t)=>{t.d(n,{N:()=>p});var r=t(29935),o=t(12694),i=t(82643),c=t(17844),a=t(12584),s=t(41114),u=t(50175),l=t(84538);function d(){var e=(0,a._)(["\n  mutation CreateReplitOneTimeCheckoutSession(\n    $input: CreateReplitOneTimeCheckoutSessionInput!\n  ) {\n    createReplitOneTimeCheckoutSession(input: $input) {\n      ... on CreateReplitOneTimeCheckoutSessionResult {\n        checkoutSession {\n          id\n          status\n        }\n        clientSecret\n        currentUser {\n          id\n          paymentMethod {\n            ... on PaymentMethod {\n              ...UserPaymentMethod\n            }\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on PaymentError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var f={},h=(0,s.J1)(d(),l.R);function p(){var e,n,t=(0,o._)((e=(0,c._)({},f,void 0),u.n(h,e)),2),a=t[0],s=t[1].called;return{createCheckoutSession:(n=(0,r._)(function(e){var n,t,r,o,c,s,u,l;return(0,i.YH)(this,function(i){switch(i.label){case 0:return n=e.input,t=e.onError,r=e.onSucceed,[4,a({variables:{input:n}})];case 1:if(c=(o=i.sent()).data,s=o.errors)return t(s[0].message),[2,null];if(!(u=null==c?void 0:c.createReplitOneTimeCheckoutSession))return t("An error occurred. Please try again."),[2,null];if((null==u?void 0:u.__typename)!=="CreateReplitOneTimeCheckoutSessionResult")return t(u.message),[2,null];if(l={clientSecret:u.clientSecret,checkoutSessionId:u.checkoutSession.id},!r)return[3,3];return[4,r(l)];case 2:i.sent(),i.label=3;case 3:return[2,l]}})}),function(e){return n.apply(this,arguments)}),called:s}}},98348:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(1889),o=t(43974),i=t(40043),c=t(35869);function a(){return(0,r.FD)(c.S,{css:[o.wp.p(12)],children:[(0,r.Y)(i.EY,{variant:"subheadDefault",css:[o.wp.color.accentNegativeDefault],children:"There was an error checking on the status of your purchase."}),(0,r.FD)(i.EY,{children:["Please contact"," ",(0,r.Y)("a",{href:"mailto:support@replit.com",children:"support@replit.com"})," if you weren't granted the Cycles you paid for."]})]})}}}]);
//# sourceMappingURL=9504-a68a86e700fb8ffd.js.map