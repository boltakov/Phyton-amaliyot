!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e85337f8-9698-4f44-9e26-4e7f76a85282",e._sentryDebugIdIdentifier="sentry-dbid-e85337f8-9698-4f44-9e26-4e7f76a85282")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"35ecf50c"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3205],{181:(e,t,n)=>{"use strict";n.d(t,{s:()=>i});var r=n(11797),o=n(49069);function i(e,t){var n=[],i=!0,a=!1,s=void 0;try{for(var c,u=(0,r.Ui)(e.toString(),t.toString())[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value,f=l.fromA,d=l.fromB,h=l.toA,g=l.toB;f===h&&n.push({from:f,insert:t.slice(d,g)}),d===g&&n.push({from:f,to:h,insert:""}),f!==h&&d!==g&&n.push({from:f,to:h,insert:t.slice(d,g)})}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}return o.VR.of(n,e.length)}},3112:(e,t,n)=>{"use strict";function r(){var e,t,n={promise:new Promise(function(n,r){e=n,t=r}),resolve:function(t){n.isFulfilled=!0,e(t)},reject:function(e){n.isFulfilled=!0,t(e)},isFulfilled:!1};return n}n.d(t,{A:()=>r})},22200:(e,t,n)=>{"use strict";n.d(t,{T:()=>u,w:()=>s});var r=n(29935),o=n(12694),i=n(82643),a=n(21462);function s(){return c.apply(this,arguments)}function c(){return(c=(0,r._)(function(){return(0,i.YH)(this,function(e){return"undefined"!=typeof document&&document.hidden?[2,new Promise(function(e){var t=function(){!document.hidden&&(document.removeEventListener("visibilitychange",t),e())};document.addEventListener("visibilitychange",t)})]:[2]})})).apply(this,arguments)}function u(){var e=(0,o._)((0,a.useState)(!1),2),t=e[0],n=e[1];return(0,a.useEffect)(function(){var e=function(){n(!document.hidden)};return document.addEventListener("visibilitychange",e),e(),function(){document.removeEventListener("visibilitychange",e)}},[]),t}},31930:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>p,KN:()=>g.K});var r=n(29935),o=n(82643),i=n(4124),a=n.n(i),s=n(79919),c=n(82891),u=n(40208),l=n(94631),f=n(22200),d=n(4847),h=n(57465),g=n(43033);function p(e){var t,n,i=e.onUnrecoverableError,g=e.ctx,p={register:function(e,r){return n(),window.addEventListener("online",e),window.addEventListener("offline",r),t=function(){window.removeEventListener("online",e),window.removeEventListener("offline",r)},n},unregister:n=function(){t&&(t(),t=void 0)}},v=p.register,m=p.unregister;return(0,c.Ay)({fetchConnectionMetadata:d.A,getOverrideClusterMetadata:h.A,getDotdevUrl:l.CZ,logger:u.vF,onUnrecoverableError:i,performance:window.performance,preFetchConnectionMetadata:(0,r._)(function(){var e;return(0,o.YH)(this,function(t){switch(t.label){case 0:if(window.performance.clearMarks(s.pY.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(s.pY.fetchConnectionMetadataPageInvisibleEnd),e=u.vF.timeStart(),window.performance.mark(s.pY.fetchConnectionMetadataPageInvisibleStart),"/migrateReplToNix"===a().pathname)return[3,2];return[4,(0,f.w)()];case 1:t.sent(),t.label=2;case 2:window.performance.mark(s.pY.fetchConnectionMetadataPageInvisibleEnd),e("page visible fetch connection metadata"),t.label=3;case 3:return[2]}})}),registerReconnectionMonitor:v,unregisterReconnectionMonitor:m,traceCtx:g})}},43033:(e,t,n)=>{"use strict";n.d(t,{K:()=>r.KN,s:()=>o});var r=n(44249),o=function(e){return e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.PORT_OPEN="PORT_OPEN",e.PORT_CLOSE="PORT_CLOSE",e.TOAST="TOAST",e}({})},51578:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(86105),o=n(3112);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{wait:0},n=null,i=null,a=null,s=null;if(t.wait<0)throw Error("wait must be 0 or more");if(t.maxWait){if(t.maxWait<0)throw Error("maxWait must be 0 or more");if(t.maxWait<t.wait)throw Error("maxWait must be higher than wait")}function c(){i&&clearTimeout(i),i=null,s=null,n=null,a=null}function u(){if(!n||!i)throw Error("Expected to call debounced function once before flushing");var t=n,o=s;return c(),e.apply(void 0,(0,r._)(o)).then(function(e){return t.resolve(e),e}).catch(function(e){throw t.reject(e),e})}return Object.assign(function(){for(var e=arguments.length,r=Array(e),c=0;c<e;c++)r[c]=arguments[c];if(n){if(!i)throw Error("Did not expect to have deferred and no timeout");clearTimeout(i)}else n=(0,o.A)(),a=Date.now();return s=r,i=setTimeout(function(){u()},function(){if(!t.maxWait)return t.wait;if(!a)throw Error("Expected scheduledAt to be a set when getting wait");var e=Date.now()-a;return Math.min(t.maxWait-e,t.wait)}()),n.promise},{isScheduled:function(){return!!(n&&i)},cancel:function(){if(!i||!n)throw Error("Expected to call debounced function once before cancelling");var e=n;c(),e.reject(Error("Debounced function cancelled"))},flush:u})}},58758:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>l,mU:()=>f,ub:()=>c});var r=n(62019),o=n(37743),i=n(1833),a=n(12694),s=n(89264),c=function(e){return e.NotFound="NotFound",e.NotAllowed="NotAllowed",e.ConcurrentReplLimit="ConcurrentReplLimit",e.LanguageTokenDenied="LanguageTokenDenied",e.RequiresRefresh="RequiresRefresh",e}({}),u={"repl not found":"NotFound","not allowed to run at this time":"NotAllowed","language tokens are only for logged out people.":"LanguageTokenDenied","user is required to refresh":"RequiresRefresh"};function l(e){var t=!0,n=!1,r=void 0;try{for(var o,i=Object.entries(u)[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=(0,a._)(o.value,2),c=s[0],l=s[1];if(e.message.toLowerCase().includes(c))return l}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return null}var f=function(e){function t(e){return(0,o._)(this,t),(0,r._)(this,t,["user is required to refresh: "+e])}return(0,i._)(t,e),t}((0,s._)(Error))},66757:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>o,gT:()=>i});var r=n(38356);function o(){return new r.EventEmitter}function i(e,t){return function(n){return e.on(t,n),function(){e.off(t,n)}}}},81085:()=>{},82871:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(37743),o=n(48122),i=n(22531),a=n(64254).hp,s=function(){function e(t,n){if((0,r._)(this,e),this.asEncoding={},this.asBuffer=null,n&&"string"==typeof t)this.asEncoding[n]=t;else if(null==t)this.asBuffer=a.alloc(0);else if(t instanceof a)this.asBuffer=t;else if("string"==typeof t)this.asEncoding.utf8=t;else if(t instanceof ArrayBuffer)this.asBuffer=a.from(t);else{if(t instanceof e)return t;t instanceof Uint8Array?this.asBuffer=a.from(t):(void 0===t?"undefined":(0,i._)(t))==="object"&&"object"===(0,i._)(t.asEncoding)&&null!==t.asEncoding&&(t.asBuffer instanceof a||null===t.asBuffer)&&(this.asBuffer=t.asBuffer||null,"string"==typeof t.asEncoding.base64&&(this.asEncoding={base64:t.asEncoding.base64}),"string"==typeof t.asEncoding.utf8&&(this.asEncoding={utf8:t.asEncoding.utf8}))}}var t=e.prototype;return t.toString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf8";if(void 0!==this.asEncoding[e])return this.asEncoding[e];var t=this.toBuffer().toString(e);return this.asEncoding[e]=t,t},t.toJSON=function(){return{asEncoding:{base64:this.toString("base64")},asBuffer:null}},t.toBuffer=function(){if(this.asBuffer)return this.asBuffer;for(var e in this.asEncoding){var t=this.asEncoding[e];if("string"==typeof t){var n=a.from(t,e);return this.asBuffer=n,n}}return this.asBuffer=a.alloc(0),this.asBuffer},e.from=function(t,n){return new e(t,n)},e.isBuffer=function(t){return t instanceof e},(0,o._)(e,[{key:"length",get:function(){return void 0!==this.asEncoding.utf8?this.asEncoding.utf8.length:this.toBuffer().length}}]),e}()},82891:(e,t,n)=>{"use strict";n.d(t,{KN:()=>b.K,no:()=>S,wF:()=>_,Ay:()=>T});var r=n(29935),o=n(17844),i=n(93629),a=n(17459),s=n(86105),c=n(82643),u=n(90629),l=n(8696),f=n.n(l),d=n(44249),h=n(723),g=n(66757),p=n(90654),v=n(8321),m=n(96986);function w(e){return E.apply(this,arguments)}function E(){return(E=(0,r._)(function(e){var t,n,r,o;return(0,c.YH)(this,function(i){return t=e.client,n=e.args,r=e.env,o=e.noUserEnv,[2,new Promise(function(e){var i=t.openChannel({service:"exec"},function(t){var a=t.channel,s="";a.onCommand(function(e){e.output&&(s+=e.output)}),a.request({exec:{args:n,env:r,noUserEnv:null!=o&&o}}).then(function(t){if(t.channelClosed){e({error:"Channel closed",output:s||null});return}if("open"===a.status&&i(),t.error){e({error:t.error,output:s||null});return}e({output:s,error:null})})})})]})})).apply(this,arguments)}var y=n(58758),b=n(43033),C=n(95570),_=5900,S=5904,x=.1>=Math.random();function O(e){return Math.min(1e3*Math.pow(2,e),6e4)+Math.floor(500*Math.random())}function T(e){var t,n=e.fetchConnectionMetadata,l=e.getOverrideClusterMetadata,E=e.getDotdevUrl,S=e.logger,T=e.onUnrecoverableError,M=e.performance,A=e.preFetchConnectionMetadata,R=e.registerReconnectionMonitor,N=e.unregisterReconnectionMonitor,k=e.crosisTimeout,P=e.crosisWebSocketClass,D=e.traceCtx,L=(0,g.Ay)();L.setMaxListeners(1e3);var B=null,I=new d.Kj;I.setUnrecoverableErrorHandler(T),I.onDebugLog(function(e){if("breadcrumb"===e.type){t="container:state"===e.message?{containerState:e.data}:"data"in e?e.data:void 0,u.ZQ({category:"crosisV6",message:e.message,data:t});var t,n={replid:null==B?void 0:B.repl.id,language:null==B?void 0:B.repl.language};switch(e.message){case"timeout:hit":S.error("crosis connect timeout",n);break;case"onUnrecoverableError":var r=(0,o._)({errorMessage:e.data.message},n);S.error("crosis unrecoverable error",r);break;case"status:retrying":var i=e.data,s=i.error,c=(0,a._)(i,["error"]),l=(0,o._)({errorMessage:s.message},n,c);S.error("crosis retrying",l);break;case"status:connecting":case"status:reconnecting":var f=e.message.split(":")[1];S.info("crosis ".concat(f),(0,o._)({},n,"data"in e?e.data:void 0));break;case"websocket:polling fallback":S.info("crosis polling fallback",(0,o._)({},n))}}});var F=window.location.search.includes("debug=1");F&&I.onDebugLog(function(e){"log"===e.type&&C.log("in"===e.log.direction?"--\x3e":"<--",e.log.channel.service,{cmd:e.log.cmd,channel:e.log.channel})});var U=function(e){var t=void 0;if(void 0!==D&&e.service){var n="";"string"==typeof e.service?n=e.service:B&&(n=e.service(B)),n&&(t=(0,p.Ux)(D,"container.".concat(n,".openChannel")).span)}return t};return{logger:S,performance:M,onPortOpened:function(e){return L.on(b.s.PORT_OPEN,e),function(){L.removeListener(b.s.PORT_OPEN,e)}},onPortClosed:function(e){return L.on(b.s.PORT_CLOSE,e),function(){L.removeListener(b.s.PORT_CLOSE,e)}},onToast:function(e){return L.on(b.s.TOAST,e),function(){L.removeListener(b.s.TOAST,e)}},onConnectionStateChanged:function(e){return I.onConnectionStateChange(e)},connect:function(e){var t,u,g=this,p=e.context,w=e.fetchConnectionMetadataExtras,E=e.getMinimumRetryDelayMs,N=(0,a._)(e,["context","fetchConnectionMetadataExtras","getMinimumRetryDelayMs"]);I.getConnectionState()!==b.K.DISCONNECTED&&I.close(),B=p,R(function(){I.getConnectionState()===b.K.DISCONNECTED&&g.connect((0,o._)({context:p,fetchConnectionMetadataExtras:w,getMinimumRetryDelayMs:E},N))},function(){I.getConnectionState()!==b.K.DISCONNECTED&&g.close({expectReconnect:!0})});var D=this,U=(t=(0,r._)(function(e){var t,n,r,i,a,s;return(0,c.YH)(this,function(c){switch(c.label){case 0:if(t=e.chan0,n=e.gurl,r=e.isFirst,"open"!==t.status)return[2];return i=S.timeStart({gurl:n}),a=setTimeout(function(){S.error("ping with no response",{gurl:n}),D.connect((0,o._)({context:p,fetchConnectionMetadataExtras:w,getMinimumRetryDelayMs:E},N))},3e4),[4,t.request({ping:{}})];case 1:if(s=c.sent().channelClosed,clearTimeout(a),s)return[2];return r?i("latency to pid1",{type:"startup"}):x&&i("latency to pid1",{type:"periodic"}),setTimeout(function(){return U({chan0:t,gurl:n,isFirst:!1})},1e3),[2]}})}),function(e){return t.apply(this,arguments)}),Y={getNextRetryDelayMs:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Math.max(O.apply(void 0,(0,s._)(t)),E())},context:p,reuseConnectionMetadata:!0,fetchConnectionMetadata:(u=(0,r._)(function(e){var t,r,a,s,u,f;return(0,c.YH)(this,function(c){switch(c.label){case 0:if("function"!=typeof A)return[3,2];return[4,A()];case 1:c.sent(),c.label=2;case 2:if("function"!=typeof l)return[3,4];return[4,l()];case 3:return r=c.sent(),[3,5];case 4:r=null,c.label=5;case 5:if(t=r,e.aborted)return[2,{error:d.wd.Aborted}];a=S.timeStart({hasCustomFetch:!!N.fetchConnectionMetadata}),c.label=6;case 6:if(c.trys.push([6,12,,13]),!N.fetchConnectionMetadata)return[3,8];return[4,N.fetchConnectionMetadata()];case 7:return s=c.sent(),[3,11];case 8:return u={asViewer:p.asViewer,replId:p.repl.id,isLoggedIn:!!p.currentUser},[4,(0,v.E)()];case 9:return[4,n.apply(void 0,[o._.apply(void 0,[(u.requestedPid2Version=c.sent(),u.format=h.api.token.ReplToken.WireFormat.PROTOBUF,u.overrideClusterMetadata=t,u),w])])];case 10:s=c.sent(),c.label=11;case 11:return[3,13];case 12:if(f=c.sent(),e.aborted)return[2,{error:d.wd.Aborted}];switch(f&&f.statusCode){case 400:case 401:case 403:throw new y.mU(f.statusCode);case 408:case 409:case 429:case 500:case 502:case 503:case 504:case 526:return S.warn("Retriable error while fetching connection metadata",{statusCode:f.statusCode,originalMessage:f.message}),[2,{error:d.wd.Retriable}]}throw f;case 13:if(e.aborted)return[2,{error:d.wd.Aborted}];return F&&C.log("connecting",s),a("fetched connection metadata"),[2,(0,i._)((0,o._)({},s),{error:null})]}})}),function(e){return u.apply(this,arguments)})};k&&k>0&&(Y.timeout=k),P?Y.WebSocketClass=P:"undefined"==typeof WebSocket&&(Y.WebSocketClass=f());var H=M.now(),W=0;I.open(Y,function(e){var t,n=e.channel;F&&C.log("connected",{replId:p.repl.id});var r=n.onCommand(function(e){switch(e.body){case"portOpen":if(!e.portOpen)throw Error("portOpen only handles portOpen commands");var t=!!e.portOpen.forwarded,n=e.portOpen,r=n.address,o=n.cmdline,i=n.cgroup,a=n.pid,s=e.portOpen.port||0;if(8284===s||5901===s)return;L.emit(b.s.PORT_OPEN,{port:s,externalPort:e.portOpen.externalPort,isVnc:s===_,isForwarded:t,address:r,cmdline:o,cgroup:i,pid:a});break;case"portClose":if(!e.portClose)throw Error("portClose only handles portClose commands");var c=e.portClose.port||0,u=e.portClose.address;if(8284===c||5901===c)return;L.emit(b.s.PORT_CLOSE,{port:c,externalPort:e.portClose.externalPort,isVnc:c===_,address:u});break;case"protocolError":T(new m.A("goval panic").setExtra("message",null!==(f=null===(l=e.protocolError)||void 0===l?void 0:l.text)&&void 0!==f?f:"protocol error"));break;case"toast":var l,f,d,h=null===(d=e.toast)||void 0===d?void 0:d.text;if(!h)break;L.emit(b.s.TOAST,h)}});U({chan0:n,gurl:null===(t=I.getConnectionMetadata())||void 0===t?void 0:t.gurl,isFirst:!0}),window.v6ws=I.ws;var o=M.now()-H;return S.info("connected to pid1",{time:o,reconnectCount:W,replid:p.repl.id,language:p.repl.language}),function(e){var t=e.willReconnect;if(r(),!t){B=null;return}H=M.now(),W++}})},openChannel:function(e,t){var n=U(e);return I.openChannel(e,function(e){var r=e.channel.onCommand(function(e){if("protocolError"===e.body){var t,n;T(new m.A("goval panic").setExtra("message",null!==(n=null===(t=e.protocolError)||void 0===t?void 0:t.text)&&void 0!==n?n:"protocol error"))}}),o=t(e);return void 0!==n&&n.end(),function(e){o&&o(e),r&&r()}})},getConnectionState:function(){return I.getConnectionState()},exec:(0,r._)(function(){var e,t,n,r=arguments;return(0,c.YH)(this,function(o){for(t=Array(e=r.length),n=0;n<e;n++)t[n]=r[n];return[2,w({client:I,args:t})]})}),execImmediately:(0,r._)(function(){var e,t,n,r=arguments;return(0,c.YH)(this,function(o){for(t=Array(e=r.length),n=0;n<e;n++)t[n]=r[n];return[2,w({client:I,args:t,noUserEnv:!0})]})}),execWithEnv:(t=(0,r._)(function(e){var t,n,r,o=arguments;return(0,c.YH)(this,function(i){for(n=Array((t=o.length)>1?t-1:0),r=1;r<t;r++)n[r-1]=o[r];return[2,w({client:I,args:n,env:e})]})}),function(e){return t.apply(this,arguments)}),close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{expectReconnect:!1};I.getConnectionState()!==b.K.DISCONNECTED&&I.close(e)},destroy:function(){I.destroy(),L.removeAllListeners(),N()},client:function(){return I},focus:function(){var e=I.getChannel(0);e&&e.send({focused:{}})},getConnectionMetadata:function(){return I.getConnectionMetadata()},getContext:function(){return B},getDotdevUrl:function(){var e=I.getConnectionMetadata();if(!e||I.getConnectionState()!==b.K.CONNECTED)throw Error("Cannot get dot dev url when container is not connected");return E(e)},unrecoverableError:function(e,t){I.destroy(),L.removeAllListeners(),T(t?m.A.wrap(e).setExtras(t):e)}}}},90654:(e,t,n)=>{"use strict";n.d(t,{Lk:()=>l,Ux:()=>v,ce:()=>d,eT:()=>g,mY:()=>m,rA:()=>c});var r=n(29935),o=n(82643),i=n(50548),a=n(43628),s=n(3136),c="repl.it-web",u=i.u.getTracer(c);function l(e,t){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e,t){return(0,o.YH)(this,function(n){switch(n.label){case 0:return[4,d(a._.active(),e,t)];case 1:return[2,n.sent()]}})})).apply(this,arguments)}function d(e,t,n){return h.apply(this,arguments)}function h(){return(h=(0,r._)(function(e,t,n){var r,a;return(0,o.YH)(this,function(o){switch(o.label){case 0:r=u.startSpan(t,void 0,e),a=i.u.setSpan(e,r),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,n(a)];case 2:return[2,o.sent()];case 3:return r.end(),[7];case 4:return[2]}})})).apply(this,arguments)}function g(e,t,n){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e,t,n){var r,a;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(void 0!==e)return[3,2];return[4,n()];case 1:return[2,o.sent()];case 2:r=u.startSpan(t,void 0,e),a=i.u.setSpan(e,r),o.label=3;case 3:return o.trys.push([3,,5,6]),[4,n(a,r)];case 4:return[2,o.sent()];case 5:return r.end(),[7];case 6:return[2]}})})).apply(this,arguments)}function v(e,t){var n=u.startSpan(t,void 0,e),r=i.u.setSpan(e,n);return{span:n,childCtx:r}}function m(e){var t={};return new s.lm().inject(e,t,{set:function(e,t,n){e[t]=n}}),t}},94631:(e,t,n)=>{"use strict";n.d(t,{CZ:()=>s,pI:()=>a});var r=n(723),o=n(2272),i=n(64254).hp;function a(e){var t=e.split(".");if(4!==t.length)throw Error("Invalid token: should have exactly 4 parts: "+e);for(var n=t[2].replace(/-/g,"+").replace(/_/g,"/");n.length%4;)n+="=";var o=window.atob(n);if(o.length<64)throw Error("Invalid token: signed part is too short: "+o.length);var a=o.substring(0,o.length-64);return r.api.token.ReplToken.decode(new i(a,"base64"))}function s(e){return e.dotdevHostname.endsWith(".localhost")?"http://".concat(e.dotdevHostname,":8081"):"https://".concat(e.dotdevHostname)}o.env.PROXY_SUFFIX}}]);
//# sourceMappingURL=3205-f7652482b928a894.js.map